(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1103],{75480:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(24852),l=n.n(r);const o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{display:"inline-block"}:t;return l().createElement("div",{style:n,className:"mapstore-inline-loader"})}},94745:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(24852),l=n.n(r),o=n(30294),a=n(7472),i=n(80717),c=n(67076),s=n(19081),u=n.n(s),d=n(75480),m={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},v={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const f=(0,c.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,n=void 0!==t&&t,r=e.loading,c=e.loadingText,s=e.onClose,f=void 0===s?function(){}:s,p=e.title,g=void 0===p?"":p,b=e.clickOutEnabled,y=void 0===b||b,h=e.showClose,E=void 0===h||h,O=e.disabledClose,j=void 0!==O&&O,C=e.showFullscreen,S=void 0!==C&&C,I=e.fullscreenType,w=void 0===I?"full":I,P=e.buttons,Z=void 0===P?[]:P,x=e.size,z=void 0===x?"":x,N=e.bodyClassName,k=void 0===N?"":N,A=e.children,D=e.draggable,F=void 0!==D&&D,T=e.fullscreenState,G=e.onFullscreen,_=e.fade,L=void 0!==_&&_,M=e.fitContent,$=e.modalClassName,B=void 0===$?"":$,R=e.dialogClassName,U=void 0===R?"":R,X=e.enableFooter,q=void 0===X||X,H=m[z]||"",V=S&&"expanded"===T&&v.className[w]||"",J=n?l().createElement("div",{className:"modal-fixed ".concat(B," ")+(F?"ms-draggable":"")},l().createElement(a.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:y?f:function(){},containerClassName:"ms-resizable-modal",draggable:F,modal:!0,className:"modal-dialog modal-content"+H+V+U+(M?" ms-fit-content":"")},l().createElement("span",{role:"header"},l().createElement("h4",{className:"modal-title"},l().createElement("div",{className:"ms-title"},g),S&&v.className[w]&&l().createElement(o.Glyphicon,{className:"ms-header-btn",onClick:function(){return G("expanded"===T?"collapsed":"expanded")},glyph:v.glyph[T][w]}),E&&f&&l().createElement(o.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:f,disabled:j}))),l().createElement("div",{role:"body",className:k},A),q&&l().createElement("div",{style:{display:"flex"},role:"footer"},l().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},r?l().createElement(d.Z,null):null),l().createElement("div",{className:"ms-resizable-modal-loading-text"},r?c:null),l().createElement(i.Z,{buttons:Z})))):null;return L?l().createElement(u(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},J):J}))},93451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(86638),l=n(45697),o=n.n(l),a=n(84596),i=n.n(a),c=n(1469),s=n.n(c),u=n(14293),d=n.n(u),m=n(47037),v=n.n(m),f=n(67076),p=["messages"];function g(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(t))return t.map((function(l){var o=(0,r.S$)(e,l[n]||v()(l)&&l||"");return y(y({},l),{},h({},n,d()(o)?t:o))}));var l=(0,r.S$)(e,t);return d()(l)?t:l},O=function(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;return y(y({},r),{},h({},l,e[l]&&E(t,e[l],n)))}};const j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,f.compose)((0,f.getContext)({messages:o().object}),(0,f.mapProps)((function(n){var r=n.messages,l=g(n,p);return y(y({},l),i()(e).reduce(O(l,r,t),{}))})))}},81114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n(24852),l=n.n(r),o=n(71703),a=n(22222),i=n(22843),c=n(82904),s=n(5346),u=n(30294),d=n(827),m=n(74621),v=n(73443),f=n(25108),p=n(72036),g=n(62170),b=n(12547),y=n(45697),h=n.n(y),E=n(94745),O=n(14068),j=n(93451),C=n(32425);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=(0,j.Z)("placeholder")(u.FormControl);function P(e){var t=e.update,n=e.error,o=e.success,a=e.labelId,i=e.resource,c=e.contentId,d=e.saving,m=e.loading,v=e.enabled,f=e.onClose,p=e.onSave,g=e.onInit,b=e.onClear,y=e.thumbnailOptions,h=S((0,r.useState)(),2),j=h[0],I=h[1],P=S((0,r.useState)(),2),Z=P[0],x=P[1],z=S((0,r.useState)(""),2),N=z[0],k=z[1],A=S((0,r.useState)(""),2),D=A[0],F=A[1],T=S((0,r.useState)(!1),2),G=T[0],_=T[1],L=(0,r.useRef)();L.current={contentId:c,resource:i},(0,r.useEffect)((function(){v?g(L.current.contentId):b()}),[v]),(0,r.useEffect)((function(){if(!m){var e=L.current.resource||{};I(e.thumbnail_url),k(e.title),F(e.abstract),x(!1),_(e.title?void 0:"error")}}),[v,m]);var M=m||d;return l().createElement(E.Z,{title:l().createElement(s.Z,{msgId:a}),show:v,fitContent:!0,clickOutEnabled:!1,buttons:M?[]:[{text:l().createElement(s.Z,{msgId:"close"}),onClick:function(){return f()}},{text:l().createElement(s.Z,{msgId:a}),disabled:!!G,onClick:function(){return p(t?c:void 0,{thumbnail:j,name:N,description:D},!0)}}],onClose:M?null:function(){return f()}},n&&l().createElement(u.Alert,{bsStyle:"danger",style:{margin:0}},l().createElement("div",null,l().createElement(s.Z,{msgId:"map.mapError.errorDefault"}))),o&&l().createElement(u.Alert,{bsStyle:"success",style:{margin:0}},l().createElement("div",null,l().createElement(s.Z,{msgId:"saveDialog.saveSuccessMessage"}))),l().createElement(u.Form,null,l().createElement(u.FormGroup,{validationState:Z?"error":void 0},l().createElement(u.ControlLabel,null,l().createElement(s.Z,{msgId:"map.thumbnail"})),l().createElement(O.Z,{thumbnail:j,thumbnailOptions:y,message:l().createElement(s.Z,{msgId:"map.message"}),onUpdate:function(e){I(e),x(!1)},onError:function(e){x(e)}}),Z&&l().createElement("div",null,l().createElement("div",null,l().createElement(s.Z,{msgId:"map.error"})),l().createElement("div",null,Z.indexOf&&-1!==Z.indexOf("FORMAT")&&l().createElement("small",null,l().createElement(s.Z,{msgId:"map.errorFormat"}))),l().createElement("div",null,Z.indexOf&&-1!==Z.indexOf("SIZE")&&l().createElement("small",null,l().createElement(s.Z,{msgId:"map.errorSize"}))))),l().createElement(u.FormGroup,{validationState:G},l().createElement(u.ControlLabel,null,l().createElement(s.Z,{msgId:"saveDialog.name"})),l().createElement(w,{placeholder:"saveDialog.namePlaceholder",value:N,onChange:function(e){k(e.target.value),_(e.target.value?void 0:"error")},onBlur:function(e){_(e.target.value?void 0:"error")}})),l().createElement(u.FormGroup,null,l().createElement(u.ControlLabel,null,l().createElement(s.Z,{msgId:"saveDialog.description"})),l().createElement(w,{placeholder:"saveDialog.descriptionPlaceholder",value:D,onChange:function(e){return F(e.target.value)}}))),M&&l().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},l().createElement(C.Z,{size:70})))}P.propTypes={update:h().bool,labelId:h().string,contentId:h().oneOfType([h().string,h().number]),resource:h().object,loading:h().bool,enabled:h().bool,onClose:h().func,onSave:h().func,onInit:h().func,onClear:h().func,error:h().oneOfType([h().string,h().object]),success:h().oneOfType([h().string,h().object]),thumbnailOptions:h().object},P.defaultProps={update:!1,resource:{},loading:!1,enabled:!1,onClose:function(){},onSave:function(){},onInit:function(){},onClear:function(){},thumbnailOptions:{width:300,height:250,type:"image/jpeg",quality:.9,contain:!1}};const Z=P;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k=(0,o.connect)((0,a.P1)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.saveAs)||void 0===n?void 0:n.enabled},d._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,n,r,l,o,a,i){return{enabled:e,contentId:i||(null==t?void 0:t.id),resource:n,loading:r,saving:l,error:o,success:a}})),{onClose:c.Xi.bind(null,"saveAs",null),onInit:v.Pg,onSave:v.Vj,onClear:v.rG})((function(e){return l().createElement(Z,N({},e,{labelId:"saveAs"}))}));const A=(0,i.rx)("SaveAs",{component:k,containers:{BurgerMenu:{name:"saveAs",position:30,text:l().createElement(s.Z,{msgId:"saveAs"}),icon:l().createElement(u.Glyphicon,{glyph:"floppy-open"}),action:c.Xi.bind(null,"saveAs",null),selector:(0,a.P1)(m.jl,(function(e){var t,n,r;return null==e||null===(t=e.security)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.perms)||void 0===r?void 0:r.includes("add_resource")}),(function(e,t){return{style:e&&t?{}:{display:"none"}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b.ZP),reducers:{gnresource:p.Z,gnsave:g.Z,controls:f.Z}})},19081:(e,t,n)=>{"use strict";e.exports=n(1174)}}]);