(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9955],{62770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(41609),l=r.n(c),u=r(81763),s=r.n(u),p=r(90079);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(i){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),h(m(t=a.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),h(m(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),h(m(t),"useLegendOptions",(function(){return!l()(t.props.node.legendOptions)&&s()(t.props.node.legendOptions.legendHeight)&&s()(t.props.node.legendOptions.legendWidth)})),h(m(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=o().createRef(),t}return t=c,(r=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,r=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(p.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:r&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:r&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}])&&g(t.prototype,r),c}(o().Component);h(O,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),h(O,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const w=O},90079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(72500),o=r.n(n),i=r(1469),a=r.n(i),c=r(27418),l=r.n(c),u=r(45697),s=r.n(u),p=r(24852),f=r.n(p),d=r(33044),g=r(5346);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,r,n,i,c=(n=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(i){var r=w(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function u(){var e;v(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(O(e=c.call.apply(c,[this].concat(r))),"state",{error:!1}),j(O(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),j(O(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=t||a()(r.url)&&Math.floor(Math.random()*r.url.length),i=a()(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),c=o().parse(i),u=(0,d.clearNilValuesForParams)(r.params),s=l()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},e.language&&r.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,d.addAuthenticationToSLD)(u||{},e.layer),u&&u.SLD_BODY?{SLD_BODY:u.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,d.addAuthenticationParameter)(i,s),o().format({host:c.host,protocol:c.protocol,pathname:c.pathname,query:s})}return""})),j(O(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=u,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?f().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):f().createElement(g.Z,{msgId:"layerProperties.legenderror"})}}])&&m(t.prototype,r),u}(f().Component);j(P,"propTypes",{layer:s().object,legendHeight:s().number,legendWidth:s().number,legendOptions:s().string,style:s().object,currentZoomLvl:s().number,scales:s().array,scaleDependent:s().bool,language:s().string}),j(P,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const S=P},72688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(38560),l=r(43614),u=r(72986),s=r.n(u);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,r,n,i,a=(n=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(i){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function u(){var e;d(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(m(e=a.call.apply(a,[this].concat(r))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=u,(r=[{key:"render",value:function(){var e=this,t=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(c.Z,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?o().createElement(s(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?o().createElement(c.Z,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):o().createElement("span",null)),r=this.props.body;return o().createElement(l.Z,f({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),o().createElement(l.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(l.Z.Title,null,this.props.titleText)),o().createElement(l.Z.Body,null,r),o().createElement(l.Z.Footer,null,t))}}])&&g(t.prototype,r),u}(o().Component);h(O,"propTypes",{className:a().string,show:a().bool,options:a().object,onConfirm:a().func,onClose:a().func,closeGlyph:a().string,style:a().object,buttonSize:a().string,includeCloseButton:a().bool,body:a().oneOfType([a().string,a().element]),titleText:a().oneOfType([a().string,a().element]),confirmText:a().oneOfType([a().string,a().element]),cancelText:a().oneOfType([a().string,a().element]),running:a().bool}),h(O,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"});const w=O},75480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(24852),o=r.n(n);const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{display:"inline-block"}:t;return o().createElement("div",{style:r,className:"mapstore-inline-loader"})}},43614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(27418),o=r.n(n),i=r(57588),a=r(61365);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(o){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function a(){return l(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&u(t.prototype,r),a}(i.Modal);const g=o()((0,a.Z)(d),{Body:i.Modal.Body,Dialog:i.Modal.Dialog,Footer:i.Modal.Footer,Header:i.Modal.Header,Title:i.Modal.Title})},1036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18446),o=r.n(n);const i=(0,r(67076).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(r(85552))},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(24852),o=r.n(n),i=r(13218),a=r.n(i),c=r(32425),l=["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,i=e.className,u=void 0===i?"":i,p=e.description,d=e.fullText,g=e.onClick,y=void 0===g?function(){}:g,v=e.onMouseEnter,m=void 0===v?function(){}:v,b=e.onMouseLeave,h=void 0===b?function(){}:b,O=e.preview,w=e.selected,j=e.size,P=e.style,S=void 0===P?{}:P,E=e.stylePreview,D=void 0===E?{}:E,C=e.styleTools,x=void 0===C?{}:C,k=e.title,T=e.loading,R=e.dragSymbol,I=void 0===R?"+":R,F=e.tools,Z=f(e,l);return o().createElement("div",{className:"mapstore-side-card".concat(w?" selected":"").concat(j?" ms-"+j:"").concat(u?" ".concat(u):"").concat(d?" full-text":""),onClick:function(e){return y(s({title:k,preview:O,description:p,caption:r,tools:F},Z),e)},onMouseEnter:m,onMouseLeave:h,style:S},o().createElement("div",{className:"ms-head"},Z.isDraggable&&Z.connectDragSource&&Z.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},I))),O&&o().createElement("div",{className:"mapstore-side-preview",style:D},O),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},k&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,k)),p&&o().createElement("div",{className:"mapstore-side-card-desc"},a()(p)?p:o().createElement("span",null,p)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:x},F),"sm"!==j&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(c.Z,{className:"mapstore-side-card-loader",size:12,hidden:!T})))))),t&&o().createElement("div",{className:"ms-body"},t))}},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(49977),o=r.n(n),i=r(86850),a=r(24262);const c=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return(0,a.Tt)(t)===(0,a.Tt)(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return(0,i.v$)({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return o().Observable.of({loading:!1,error:e})}))}))}},43716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Rt});var n=r(24852),o=r.n(n),i=r(67076),a=r(12425),c=r(39860);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const u=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,c.tR)(),(0,c.AV)(),(0,c.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,c.um)())),s=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var p=r(27361),f=r.n(p);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const v=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:g(g({},r),{},{onAddFilter:function(e){return o("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,i,a){return o('options.columnSettings["'.concat(f()(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:g(g({},r),{},{onGridSort:function(e,t){return o("sortOptions",{sortBy:e,sortOrder:t})}})}})));var m=r(13314);const b=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.G5)(),(0,c.E6)(),(0,c.um)()),h=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var O=r(87017),w=r(39589),j=r(64721),P=r.n(j),S=r(82492),E=r.n(S),D=r(78889),C=r(73849),x=r(25382),k=r(49977),T=r.n(k),R=r(86850);const I=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return(0,R.Mc)(r,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return T().Observable.of({loading:!1,error:e,data:[]}).do(u)}))}))};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(49977);const L=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return Z(Z({},e),{},{features:[],pages:[],pagination:{}})}))};var N=r(96958);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const W=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,l=t.filter,u=t.options,s=void 0===u?{}:u,p=t.sortOptions,f=t.pages,d=t.features,g=void 0===d?[]:d,y=t.onLoad,v=void 0===y?function(){}:y,m=t.onLoadError,b=void 0===m?function(){}:m;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,R.Mc)(n,l,A(A({},(0,N.S9)(r,f,i)),{},{sortOptions:p,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:s.propertyName,viewParams:s.viewParams})).do((function(e){return v(A(A({},(0,N.f1)(e,r,{pages:f,features:g},A(A({},(0,N.S9)(r,f,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return T().Observable.of({loading:!1,error:e}).do(b)})).startWith({loading:!0})}))}))}};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=function(e){var t=(0,i.createEventHandler)(),r=t.handler,n=t.stream;return(0,x.Z)(e).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return L(e).let(r?W(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return V({pagesRange:e},t)}))):I).startWith({})}(e,n.startWith({startPage:0,endPage:1})),(function(e,t){return V(V(V({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};const q=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:B}})),C.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:E()(n?(0,D.getFeatureTypeProperties)(n).filter((function(e){return!P()(r.propertyName||[],e.name)})).reduce((function(e,t){return V(V({},e),{},H({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var U=r(30881),$=r(8488),J=r(73339),Q=r(5055),K=r.n(Q),Y=r(41609),X=r.n(Y),ee=r(18446),te=r.n(ee),re=r(70956),ne=r(99767),oe=r(27835),ie=function(e){var t=e.wfsGetFeature;return(0,oe.Uh)("gs:Bounds",[(0,ne.qP)("features",(0,ne.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,ne.DK)((0,ne.En)("bounds","application/json")))};var ae=r(47805),ce=r(24262),le=r(61868),ue=r(52259);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const de=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!X()(r.quickFilters)||!X()(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,ue.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return te()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&te()(e.dependencies.filter,t.dependencies.filter)&&te()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||X()(n.layer))return k.Observable.of({loading:!1});var a={};n.quickFilters&&(a=pe(pe({},a),(0,re.r$)(o,n.quickFilters,n.options))),n.filter&&(a=pe(pe({},a),(0,ae.composeAttributeFilters)([a,n.filter])));var c=n&&n.layer&&n.layer.name;if(!X()(a)){a=pe(pe({},a),{},{options:pe(pe({},a.options||{}),{},{noSchemaLocation:!0})});var l=(0,ae.toOGCFilter)(c,a,"1.1.0");return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,oe.mG)(e,ie(t),{},r)}((0,ce.ZA)(n.layer),{wfsGetFeature:l}).switchMap((function(e){var t,r,n;if(K().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return k.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(ue.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),k.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return k.Observable.of({error:"error getting bounds from filter",details:e})}))}return k.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,le.t8)("loading",r,n)}))})))));var ge=r(13311),ye=r.n(ge),ve=r(43378);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){he(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Oe=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!te()(n,a.dependencies)||!te()(i,a.map)||c!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.map,c=void 0===a?{layers:[]}:a,l=n&&n.layer&&n.layer.name,u=ye()(c.layers,{name:l})||{},s={},p={},f=void 0;return t&&!X()(u)&&(n.quickFilters&&(s=be(be({},s),(0,re.r$)(i,n.quickFilters,n.options))),n.filter&&(s=be(be({},s),(0,ae.composeAttributeFilters)([s,n.filter]))),!X()(s)&&(0,ae.toCQLFilter)(s))?(f=(0,ae.toCQLFilter)(s),p=(0,le.cc)(!1,be(be({},u),{},{params:(0,ve.v)({params:{CQL_FILTER:f}},u&&u.params&&u.params.CQL_FILTER)}),{name:l},c.layers),{map:be(be({},c),{},{layers:p})}):(p=c.layers.map((function(e){return be(be({},e),{},{params:be(be({},e.params),{},{CQL_FILTER:void 0})})})),{map:be(be({},c),{},{layers:p})})}))),we=function(e){return(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=arguments.length>1?arguments[1]:void 0,c=a.mapSync,l=a.dependencies;return l&&(0,i.shallowEqual)(o[e],l[e])||r===c}),(function(t){var r=t.map,n=t.mapSync,o=t.dependencies,i=void 0===o?{}:o;return{mapStateSource:"__dependency_system__",map:i[e]&&n?(0,le.t8)(e,i[e],r):r}})))};var je=r(57588),Pe=["data"];function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=Ce(e,Pe),i=Object.keys(r.reduce((function(e,t){return Ee(Ee({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(je.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var ke=r(96259),Te=r(73014),Re=r(42415),Ie=r(39837),Fe=r(28315),Ze=(0,Te.Z)()((0,Re.Z)((0,Ie.Z)(Fe.Z)));const Me=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(ke.Z,null,o().createElement(Ze,e)))};var Le=r(5346),Ne=r(65539),_e=r(72688);const Ae=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,c=e.isDraggable,l=void 0===c||c,u=e.toggleDeleteConfirm,s=void 0===u?function(){}:u,p=e.onDelete,f=void 0===p?function(){}:p,d=e.icons,g=e.topLeftItems,y=e.topRightItems,v=e.headerStyle,m=void 0===v?{}:v,b=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(Ne.Z,{className:a,header:o().createElement("div",{style:m,className:"mapstore-widget-info ".concat(l?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),g,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},y)))},b),i?o().createElement(_e.Z,{confirmText:o().createElement(Le.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Le.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Le.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return s(!1)},onConfirm:function(){return f(t)}}):null)};var ze=["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"];function We(){return(We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(je.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var Ve=r(82030),He=r(99707),Be=(0,Ve.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),He.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),qe=r(57557),Ue=r.n(qe),$e=r(75480),Je=r(92936),Qe=["layers"];function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Qe);return r("map",t,"merge")}}})(Je.Z),tt=r(18027);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&ye()(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return nt(nt({},e),{},{value:n})}))}))),at=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),it)((0,tt.Q)(r,{name:n}))},ct=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return nt(nt({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),lt=(0,i.compose)(ct,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,N.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=at({options:r,localType:o,attributeName:i,quickFilterStream$:n});return nt(nt({},e),{},ot({},i,a))}),{})}:{}}))),ut=r(30029),st=r(93358),pt=(0,Re.Z)((0,Te.Z)((function(e){return!e.describeFeatureType}))(st.Z));const ft=lt((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,l=void 0!==c&&c,u=e.headerStyle,s=e.icons,p=e.topRightItems,f=e.toggleDeleteConfirm,d=void 0===f?function(){}:f,g=e.onDelete,y=void 0===g?function(){}:g,v=e.gridEvents,m=void 0===v?function(){}:v,b=e.pageEvents,h=void 0===b?{moreFeatures:function(){}}:b,O=e.describeFeatureType,w=e.filterRenderers,j=e.columnSettings,P=e.features,S=e.size,E=e.pages,D=e.error,C=e.pagination,x=void 0===C?{}:C,k=e.dataGrid,T=void 0===k?{}:k,R=e.virtualScroll,I=void 0===R||R;return o().createElement(Ae,{id:"widget-chart-".concat(t),title:r,headerStyle:u,icons:s,isDraggable:T.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:d,topRightItems:p},o().createElement(Ne.Z,{footer:x.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement($e.Z,null)):null,void 0===D&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(Le.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:x.totalFeatures}}))):null},o().createElement(pt,{emptyRowsView:function(){return o().createElement(ut.Z,{loading:n},o().createElement(He.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:m,sortable:!0,defaultSize:!1,columnSettings:j,pageEvents:h,virtualScroll:I,enableColumnFilters:l,filterRenderers:w,features:P,pages:E,error:D,size:S,rowKey:"id",describeFeatureType:O,pagination:x})))}));var dt=r(80844),gt=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(je.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},mt=r(46173),bt=r(70919),ht=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"];function Ot(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var wt=(0,mt.Z)()(bt.Z),jt=(0,i.compose)(J.Z,U.Z,$.Z,O.Z,u)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,c=void 0===a?[]:a,l=e.series,u=void 0===l?[]:l,s=e.loading,p=e.icons,f=e.showTable,d=e.topRightItems,g=e.confirmDelete,y=void 0!==g&&g,v=e.dataGrid,m=void 0===v?{}:v,b=e.onDelete,h=void 0===b?function(){}:b,O=e.toggleTableView,w=void 0===O?function(){}:O,j=e.toggleDeleteConfirm,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ze);return o().createElement(Ae,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:m.isDraggable,title:r,icons:p,topLeftItems:Ge({loading:s,title:r,description:n,showTable:f,toggleTableView:w}),confirmDelete:y,onDelete:h,toggleDeleteConfirm:P,topRightItems:d},f?o().createElement(xe,We({data:c},S)):o().createElement(Me,We({id:t,isAnimationActive:!s,loading:s,data:c,series:u,iconFit:!0},S)))})),Pt=(0,i.compose)(b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,c=e.title,l=e.text,u=e.headerStyle,s=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.confirmDelete,g=void 0!==d&&d,y=e.onDelete,v=void 0===y?function(){}:y;return o().createElement(Ae,{id:"widget-text-".concat(a),title:c,confirmDelete:g,onDelete:v,toggleDeleteConfirm:r,headerStyle:u,isDraggable:f.isDraggable,icons:n,topLeftItems:i,topRightItems:s},o().createElement(Be,{text:l}))})),St=(0,i.compose)(J.Z,Oe,we("center"),we("zoom"),de,h)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,n=e.toggleDeleteConfirm,i=void 0===n?function(){}:n,a=e.id,c=e.title,l=e.map,u=e.icons,s=e.hookRegister,p=e.mapStateSource,f=e.topRightItems,d=e.confirmDelete,g=void 0!==d&&d,y=e.loading,v=void 0!==y&&y,m=e.dataGrid,b=void 0===m?{}:m,h=e.onDelete,O=void 0===h?function(){}:h,w=e.headerStyle,j=e.env,P=l.size,S=P.height,E=P.width,D=l.mapInfoControl,C=S>400&&E>400&&D;return o().createElement(Ae,{id:"widget-text-".concat(a),title:c,confirmDelete:g,onDelete:O,toggleDeleteConfirm:i,headerStyle:w,icons:u,topRightItems:f,isDraggable:b.isDraggable},o().createElement(Ne.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},v?o().createElement("span",{style:{float:"right"}},o().createElement($e.Z,null)):null)},o().createElement(et,{tools:C?["popup"]:[],updateProperty:r,id:a,map:Ye({},Ue()(l,"mapStateSource")),mapStateSource:p,hookRegister:s,layers:l&&l.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:j})))})),Et=(0,i.compose)(J.Z,$.Z,U.Z,q,v)(ft),Dt=(0,i.compose)(J.Z,U.Z,$.Z,w.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,l=void 0===c?[]:c,u=e.loading,s=e.showTable,p=e.confirmDelete,f=void 0!==p&&p,d=e.headerStyle,g=e.icons,y=e.topRightItems,v=e.dataGrid,m=void 0===v?{}:v,b=e.toggleTableView,h=void 0===b?function(){}:b,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,j=e.onDelete,P=void 0===j?function(){}:j,S=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,gt);return o().createElement(Ae,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:m.isDraggable,icons:g,topLeftItems:vt({loading:u,title:r,description:n,showTable:s,toggleTableView:h}),confirmDelete:f,onDelete:P,toggleDeleteConfirm:w,headerStyle:d,topRightItems:y},o().createElement(dt.Z,yt({id:t,isAnimationActive:!u,loading:u,data:a,series:l,iconFit:!0},S)))})),Ct=(0,i.compose)(J.Z,m.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,c=e.headerStyle,l=e.confirmDelete,u=void 0!==l&&l,s=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.onDelete,g=void 0===d?function(){}:d,y=Ot(e,ht);return o().createElement(Ae,{id:"widget-text-".concat(n),title:i,confirmDelete:u,onDelete:g,toggleDeleteConfirm:r,headerStyle:c,icons:a,topRightItems:s,isDraggable:f.isDraggable},o().createElement(wt,y))})),xt=["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"];function kt(){return(kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Tt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,c=e.exportImage,l=void 0===c?function(){}:c,u=e.onDelete,s=void 0===u?function(){}:u,p=e.onEdit,f=void 0===p?function(){}:p,d=Tt(e,xt);return"text"===d.widgetType?o().createElement(Pt,kt({},d,{toggleCollapse:n,onDelete:s,onEdit:f})):"table"===d.widgetType?o().createElement(Et,kt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:s,onEdit:f})):"counter"===d.widgetType?o().createElement(Dt,kt({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):"map"===d.widgetType?o().createElement(St,kt({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):"legend"===d.widgetType?o().createElement(Ct,kt({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):o().createElement(jt,kt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:l,onDelete:s,onEdit:f}))}},88395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>W});var n=r(49977),o=r.n(n),i=r(66654),a=r.n(i),c=r(18721),l=r.n(c),u=r(27361),s=r.n(u),p=r(64721),f=r.n(p),d=r(18446),g=r.n(d),y=r(57557),v=r.n(y),m=r(14176),b=r.n(m),h=r(57579),O=r(81808),w=r(1757),j=r(80416),P=r(75110),S=r(24684),E=r(69293),D=r(55927),C=r(75982),x=r(78598),k=r(89077),T=r(17542),R=r.n(T),I=r(59425),F=r.n(I);function Z(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){return e.ofType(E.WC,E.a3,E.W5).startWith({type:O.ok}).switchMap((function(t){return t.type===E.WC?o().Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===C.nk}))},z=function(e,t,r,n){return o().Observable.of((0,h.Rz)("mapSync",e),(0,h.Rz)("dependenciesMap",function(e,t,r){var n,o=r.dependenciesMap,i=r.mappings,c=["layer","filter","quickFilters","options"],l=["layers","viewport","zoom","center"],u=(h.oU.exec(t)||[])[1],s=b()(o,(function(e){return-1===e.indexOf(u)})),p=Object.keys(i).filter((function(e){return void 0!==i[e]})).reduce((function(e,r){return!a()(t,"map")&&f()(c,r)?N(N({},e),{},_({},r,"".concat(t,".").concat(i[r]))):a()(t,"map")?f()(l,r)?N(N({},e),{},_({},r,"map"===t?i[r]:"".concat(t,".").concat(i[r]))):N(N({},e),{},_({},r,"".concat(t.replace(".map",""),".").concat(i[r]))):e}),{});return e?N(N(N({},s),p),{},(_(n={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),_(n,"mapSync","".concat(t.replace(".map",""),".mapSync")),n)):v()(s,[Object.keys(i)])}(e,t,r)))};const W={exportWidgetData:function(e){return e.ofType(h.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return R().json2csv(r,(function(e,t){return e?null:(0,x.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(O.ok,D.E9,h.Jm).map((function(){return(0,w.jx)(n())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return g()(Z(e),Z(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h._k)(e.reduce((function(e,t){var r,n,o=t.replace(".map","");return a()(t,"map")?N(N({},e),{},(_(r={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),_(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),_(r,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),_(r,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),_(r,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),_(r,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),r)):N(N({},e),{},(_(n={},"".concat(t,".filter"),"".concat(t,".filter")),_(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),_(n,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),_(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),_(n,"".concat(t,".layer"),"".concat(t,".layer")),_(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(h.LH).switchMap((function(t){var r=t.active,i=t.availableDependencies,a=void 0===i?[]:i,c=t.options;return r&&a.length>0?1===a.length?z(r,a[0],c):o().Observable.of((0,h.kr)(r,{availableDependencies:a})).merge(e.ofType(h.V5).filter((function(){return(0,w.xI)(n())})).switchMap((function(e){var t=e.widget,i=s()((0,w.r0)(n()),"availableDependencies").filter((function(e){return(h.oU.exec(e)||[])[1]===t.id}));return z(r,i[0],c,t.dependeciesMap).concat(o().Observable.of((0,h.kr)(!1,{})))})).takeUntil(e.ofType(C.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===h.Cz&&r===h.jv}))))):z(r,a[0],c)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(O.ok).switchMap((function(){var t=(0,S.F)(n()).split("/"),r=t[t.length-1];return e.let(A).filter((function(){var e=(0,S.F)(n()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?o().Observable.of((0,h.K4)()):o().Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(h.pV).do((function(e){var t,r,n=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),c=document.querySelector("#".concat(n," .recharts-wrapper svg")),l=c.outerHTML?c.outerHTML:(t=c,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);F()(a,l,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),(0,k.RP)(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(j.yS).switchMap((function(e){var r,n=e.layer,i=e.newProperties,a=t.getState(),c=(0,P.CA)(a,n);return(r=o().Observable).of.apply(r,Z(l()(i,"layerFilter")&&c?[(0,h.Ko)(c)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(j.x9,j.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,n=e.layerId,i=t.getState(),a=(0,P.CA)(i,n);return(r=o().Observable).of.apply(r,Z(a&&a.previousLoadingError!==a.loadingError?[(0,h.Ko)(a)]:[]))}))})).mergeAll()}}},88495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>re});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(71703),l=r(22222),u=r(67076),s=r(22843),p=r(827),f=r(1757),d=r(57579),g=r(10473),y=r(54414),v=r(75382),m=r(38482);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var h=r(13311),O=r.n(h),w=r(66604),j=r.n(w),P=r(69968),S=r(27361),E=r.n(S),D=r(91175),C=r.n(D);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){return E()(C()(e,(function(e){return e.color})),"color")};const I=(0,u.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&R(t)?k(k({},o),{},{borderTop:"3px solid ".concat(R(t))}):o}}));r(89611);var F=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"];function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var A=(0,u.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),P.WidthProvider)(P.Responsive),z=I(r(43716).Z),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return O()(e.widgets,(function(e){return e===t.id}))}))};const G=(0,u.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,i=void 0===n?"":n,a=e.toolsOptions,c=void 0===a?{}:a,l=e.rowHeight,u=void 0===l?208:l,s=e.breakpoints,p=void 0===s?{lg:1200,md:996,sm:768,xs:480,xxs:0}:s,f=e.cols,d=void 0===f?{lg:6,md:6,sm:4,xs:2,xxs:1}:f,g=e.widgets,y=void 0===g?[]:g,v=e.layouts,m=e.dependencies,b=e.verticalCompact,h=void 0!==b&&b,w=e.compactMode,P=e.useDefaultWidthProvider,S=void 0===P||P,E=e.measureBeforeMount,D=e.width,C=e.showGroupColor,x=e.groups,k=void 0===x?[]:x,T=e.canEdit,R=void 0===T||T,I=e.getWidgetClass,M=void 0===I?function(){}:I,N=e.onWidgetClick,G=void 0===N?function(){}:N,V=e.updateWidgetProperty,H=void 0===V?function(){}:V,B=e.deleteWidget,q=void 0===B?function(){}:B,U=e.toggleCollapse,$=void 0===U?function(){}:U,J=e.toggleMaximize,Q=void 0===J?function(){}:J,K=e.editWidget,Y=void 0===K?function(){}:K,X=e.onLayoutChange,ee=void 0===X?function(){}:X,te=e.language,re=e.env,ne=_(e,F),oe=y.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),ie=function(e){return"table"===e.widgetType&&oe.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return o().createElement(A,{key:t||"widgets-view",useDefaultWidthProvider:S,measureBeforeMount:E,width:S?void 0:D,isResizable:R,isDraggable:R,draggableHandle:".draggableHandle",onLayoutChange:ee,preventCollision:!0,style:r,className:"widget-container ".concat(i," ").concat(R?"":"no-drag"),rowHeight:u,autoSize:!0,verticalCompact:h,compactMode:w,breakpoints:p,cols:d,layouts:v?JSON.parse(JSON.stringify(j()(v,(function(e){return e.map((function(e){var t=O()(y,{id:e.i});return t?L(L({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},y.map((function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return G(e)},className:M(e)},o().createElement(z,Z({"data-grid":e.dataGrid},ne,e,{quickFilters:ie(e)?e.quickFilters:void 0,toolsOptions:c,groups:W(k,e),showGroupColor:C,dependencies:m,enableColumnFilters:ie(e),canEdit:R,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return H.apply(void 0,[e.id].concat(r))},toggleCollapse:function(){return $(e)},toggleMaximize:function(){return Q(e)},onDelete:function(){return q(e)},onEdit:function(){return Y(e)},language:te,env:re})))})))}));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y,X=(0,u.compose)((0,c.connect)((0,l.P1)(p.J9,f.E5,f.p,f.Jb,f.h9,(function(e,t,r,n,o){return{id:e,widgets:t,layouts:r,maximized:n,dependencies:o}})),{editWidget:d.uT,updateWidgetProperty:d.Ij,exportCSV:d.sD,toggleCollapse:d.f,toggleMaximize:d.Pt,exportImage:d.Rb,deleteWidget:d.E9,onLayoutChange:d.c_}),(0,u.compose)((Y={debounceTime:20,closest:!0,querySelector:".fill"},(0,u.compose)((0,u.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,m.Z)(Y))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,u.compose)((0,u.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return o().createElement(v.Z,{handleWidth:!0},(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return o().createElement(e,b({width:n},t))}))}}))}({overrideWidthProvider:!1}),(0,u.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.maximized,o=r-120,i=4,a=Math.floor(o/i-20),c=null!=n&&n.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},l=null!=n&&n.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{},u=t&&t>800?t-570:t-70,s=t?{width:u-1}:{};return Q(Q({rowHeight:a,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1}},s),{},{useDefaultWidthProvider:!1,style:Q({left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((r-100)/(a+10))*(a+10),width:u+"px",position:"absolute",zIndex:50},c)},l)}))),(0,u.compose)((0,u.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),(0,g.Z)("toolsOptions",{asObject:!0}),(0,u.compose)((0,c.connect)((0,l.P1)(f.Xu,(function(e){return{tray:e}}))),(0,u.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,r=e.tray;return{toolsOptions:t?Q(Q({},t),{},{showCollapse:t.showCollapse&&r}):t}}))),(0,u.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.toolsOptions,o=void 0===n?{}:n;return{widgets:r.filter((function(e){return!e.hide||o.seeHidden}))}}))))(G),ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(n);if(i){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return U(this,e)});function c(){return H(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return this.props.enabled?o().createElement(X,this.props):null}}])&&B(t.prototype,r),c}(o().Component);K(ee,"propTypes",{enabled:a().bool}),K(ee,"defaultProps",{enabled:!0});var te=(0,y.Z)(ee);const re=(0,s.rx)("WidgetsPlugin",{component:te,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:r(75859).Z},epics:r(88395).ZP})},54414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(22222),o=r(71703),i=r(55105),a=r(93152);const c=(0,o.connect)((0,n.P1)(i.Jz,i.VM,a.c0,(function(e,t,r){return{enabled:!e&&!t&&!r}})))},10473:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(67076),o=r(71703),i=r(22222),a=r(827),c=r(74621),l=r(27361),u=r.n(l),s=r(84596),p=r.n(s),f=r(66604),d=r.n(f),g=r(47037),y=r.n(g),v=r(1469),m=r.n(v);function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function e(t){var r=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var i=p()(t),a=o;return i.length>1&&"__OR__"===i[0]&&(a=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if(m()(i))return e({accessInfo:r,postProcessValue:n,reduceFun:o})(i);var a=!1;i&&y()(i)&&i.startsWith("!")&&(a=!0,i=i.substr(1));var c=function(e){return a?!e:e},l=y()(i)&&i.split(":");if(l&&l[0]){var s=l[0].split(/\!\=\=?/),p=l[0].split(/\=\=?\=?/);return s.length>1?c(n(u()(r,s[0]),i)!==s[1]):p.length>1?c(n(u()(r,p[0]),i)===p[1]):c(n(u()(r,l[0]),i))}return i})).reduce(a||function(e,t){return e&&t})}};const O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.asObject,o=void 0!==r&&r,i=t.postProcessValue,a=void 0===i?function(e){return e}:i,c=t.reduceFun,l=t.accessInfo,u=void 0===l?"accessInfo":l;return(0,n.withPropsOnChange)([e,u],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b({},e,o?d()(t[e],h({accessInfo:t[u],postProcessValue:a,reduceFun:c})):h({accessInfo:t[u],postProcessValue:a,reduceFun:c})(t[e]))}))},w=function(){return(0,n.compose)((0,o.connect)((0,i.P1)(a.J9,a._H,c.np,(function(e,t,r){return{accessInfo:{mapId:e,mapInfo:t,user:r}}}))),O.apply(void 0,arguments))}},75859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(57579),o=r(81808),i=r(55927),a=r(27418),c=r.n(a),l=r(28252),u=r.n(l),s=r(27361),p=r.n(s),f=r(13311),d=r.n(f),g=r(57557),y=r.n(g),v=r(66604),m=r.n(v),b=r(84596),h=r.n(b),O=r(61868);function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return u()("builder.settings.".concat(r.key),r.value,t);case n.n8:return u()("builder.editor",r.widget,u()("builder.settings",r.settings||D.settings,t));case n.dm:return u()("builder.editor",S(S({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),u()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:return u()("builder.editor.".concat(r.key),r.value,t);case n.Jm:var a=(0,O.vy)("containers[".concat(r.target,"].widgets"),S(S({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);return a;case n.$A:var l=d()(p()(t,"containers[".concat(r.target,"].widgets")),{id:r.id});return(0,O.vy)("containers[".concat(r.target,"].widgets"),u()(r.key,"merge"===r.mode?c()({},l[r.key],r.value):r.value,l),{id:r.id},t);case n.eb:if(r.layer){var s=p()(t,"containers[".concat(n.VR,"].widgets"));if(s)return u()("containers[".concat(n.VR,"].widgets"),s.map((function(e){return p()(e,"layer.id")===r.layer.id?u()("layer",r.layer,e):e})),t)}return t;case n.yY:return(0,O.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t);case i.E9:var f=r.data;return u()("containers[".concat(n.VR,"]"),S({},f),t);case o.ok:var g=r.config||{},v=g.widgetsConfig;return u()("containers[".concat(n.VR,"]"),S({},v),t);case n.v8:return u()("containers[".concat(r.target,"].layout"),r.layout)(u()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return u()("containers[".concat(n.VR,"]"),D.containers[n.VR],t);case n.S0:var b=r.key,j=r.value;return u()("dependencies[".concat(b,"]"),j,t);case n.Q6:var P=r.key;return u()("dependencies[".concat(P,"]"),null,t);case n.kb:var E=r.dependencies;return u()("dependencies",E,t);case n.GV:return u()("dependencies",D.dependencies,t);case n.Ym:var C=r.widget,x=void 0===C?{}:C;if(x.dataGrid&&x.dataGrid.static)return t;var k=p()(t,"containers[".concat(r.target,"].collapsed[").concat(x.id));if(k){var T=[].concat(w(p()(t,"containers[".concat(r.target,"].layout"),[])),w(h()(p()(k,"layout",[])))),R=m()(p()(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(w(e),w(h()(p()(k,"layouts[".concat(t,"]"),[]))))}));return y()((0,O.qC)(u()("containers[".concat(r.target,"].layout"),T),u()("containers[".concat(r.target,"].layouts"),R))(t),"containers[".concat(r.target,"].collapsed[").concat(x.id,"]"))}return u()("containers[".concat(r.target,"].collapsed[").concat(x.id,"]"),{layout:d()(p()(t,"containers[".concat(r.target,"].layout"),[]),{i:x.id}),layouts:m()(p()(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return d()(e,{i:x.id})}))},t);case n.ke:var I,F,Z,M,L,N,_,A,z,W,G,V,H,B,q,U,$,J,Q=r.widget,K=null==t||null===(I=t.containers)||void 0===I||null===(F=I[r.target])||void 0===F?void 0:F.maximized;if(!Q||null!==(Z=Q.dataGrid)&&void 0!==Z&&Z.static)return t;if(null!=K&&K.widget)return(0,O.qC)(u()("containers[".concat(r.target,"].layout"),K.layout),u()("containers[".concat(r.target,"].layouts"),K.layouts),u()("containers[".concat(r.target,"].maximized"),{}),u()("containers[".concat(r.target,"].widgets"),null==t||null===(U=t.containers)||void 0===U||null===($=U[r.target])||void 0===$||null===(J=$.widgets)||void 0===J?void 0:J.map((function(e){return e.id===K.widget.id?S(S({},e),{},{dataGrid:S(S({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(M=t.containers)&&void 0!==M&&null!==(L=M[r.target])&&void 0!==L&&null!==(N=L.collapsed)&&void 0!==N&&N[Q.id])return t;var Y={x:0,y:0,w:1,h:1},X=d()(null==t||null===(_=t.containers)||void 0===_||null===(A=_[r.target])||void 0===A?void 0:A.layout,{i:Q.id}),ee=S(S({},X),Y);return(0,O.qC)(u()("containers[".concat(r.target,"].maximized"),{widget:Q,layout:null==t||null===(z=t.containers)||void 0===z||null===(W=z[r.target])||void 0===W?void 0:W.layout,layouts:null==t||null===(G=t.containers)||void 0===G||null===(V=G[r.target])||void 0===V?void 0:V.layouts}),u()("containers[".concat(r.target,"].layout"),[ee]),u()("containers[".concat(r.target,"].layouts"),{xxs:[ee]}),u()("containers[".concat(r.target,"].widgets"),null==t||null===(H=t.containers)||void 0===H||null===(B=H[r.target])||void 0===B||null===(q=B.widgets)||void 0===q?void 0:q.map((function(e){return e.id===Q.id?S(S({},e),{},{dataGrid:S(S({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var te=p()(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),re=te.filter((function(e){return p()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ne=te.filter((function(e){return!p()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),oe=0===ne.length;return oe?re.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):ne.length>0?ne.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return u()("tray",r.value,t);default:return t}}},55105:(e,t,r)=>{"use strict";r.d(t,{Nr:()=>p,ic:()=>f,Jz:()=>g,VM:()=>y,CF:()=>v});var n=r(91175),o=r.n(n),i=r(827),a=r(52259);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e.maplayout&&e.maplayout.layout||{}},p=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){return l(l({},e),{},u({},t,r[t]))}),{})||{}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s(e),n=!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})));return n},g=function(e){return d(e,[{key:"right",value:658}])},y=function(e){return d(e,[{key:"bottom",value:30,type:"not"}])},v=function(e){var t=(0,i.Od)(e),r=p(e);return r&&t&&t.size&&{left:(0,a.parseLayoutValue)(r.left,t.size.width),bottom:(0,a.parseLayoutValue)(r.bottom,t.size.height),right:(0,a.parseLayoutValue)(r.right,t.size.width),top:(0,a.parseLayoutValue)(r.top,t.size.height)}}},96958:(e,t,r)=>{"use strict";r.d(t,{t3:()=>E,WQ:()=>C,dM:()=>x,rK:()=>k,Lo:()=>I,gP:()=>L,S9:()=>N,AV:()=>_,Sc:()=>A,a3:()=>z,IC:()=>W,wT:()=>G,cZ:()=>V,ek:()=>H,Qc:()=>B,Cf:()=>U,dJ:()=>$,DR:()=>J,f1:()=>Q});var n=r(6557),o=r.n(n),i=r(92742),a=r.n(i),c=r(19873),l=r.n(c),u=r(30998),s=r.n(u),p=r(27361),f=r.n(p),d=r(1469),g=r.n(d),y=r(14293),v=r.n(y),m=r(47037),b=r.n(m),h=r(78889);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e,t,r){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return s()(e,(function(e){return e<=r&&r<e+t}))}(t,r,e);return-1===n?n:n*r+e-t[n]},D={id:"empty_row",get:function(){}},C=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return t[E(e,r,n)]||P({},D)},x=function(e,t){return t[e]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g()(e)?e.reduce((function(e,t){return P(P({},e),{},S({},t.id,P(P({},e[t.id]),t.updated)))}),{}):{}},T=function(e,t){var r=Object.keys(t).filter((function(e){return"geometry"!==e})).reduce((function(e,r){return P(P({},e),{},S({},r,t[r]))}),{}),n=Object.keys(t).filter((function(e){return"geometry"===e})).reduce((function(e,r){return P(P({},e),{},S({},r,t[r]))}),{});return P(P(P({},e),n),{},{properties:P(P({},e&&e.properties||{}),r)})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=s()(e,t);return n>=0?e.map((function(e,t){return t===n?r:e})):[].concat(O(e),[r])},I=function(e){return((0,h.getFeatureTypeProperties)(e)||[]).filter((function(e){return!(0,h.isGeometryType)(e)}))},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return t.map((function(t){return r<=t&&t<=n?0:Math.abs(t-e)})).reduce((function(e,t,r,n){return t>n[e]&&r||e}),0)},Z=function(e,t){return t.filter((function(t,r){return r!==e}))},M=function(e,t,r){return e.filter((function(e,n){return n<t||n>=t+r}))},L=function(e,t,r,n){for(var o,i,a=e;a<=t&&void 0===o;a++)-1===E(a*n,r,n)&&(o=a);for(var c=t;c>=e&&void 0===i;c--)-1===E(c*n,r,n)&&(i=c);return[o,i].filter((function(e){return void 0!==e}))},N=function(e,t,r){var n=e.startPage,o=e.endPage,i=L(n,o,t,r),a=i[1]-i[0]+1;return{startIndex:i[0]*r,maxFeatures:a*r}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.editable,o=void 0!==n&&n,i=r.sortable,a=void 0===i||i,c=r.resizable,l=void 0===c||c,u=r.filterable,s=void 0===u||u,p=r.defaultSize,f=void 0===p?200:p,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=d.getEditor,y=void 0===g?function(){}:g,v=d.getFilterRenderer,m=void 0===v?function(){}:v,b=d.getFormatter,h=void 0===b?function(){}:b;return I(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){return{sortable:a,key:e.name,width:t[e.name]&&t[e.name].width||f||void 0,name:t[e.name]&&t[e.name].label||e.name,resizable:l,editable:o,filterable:s,editor:y(e),formatter:h(e),filterRenderer:m(e,e.name)}}))},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},i=(0,h.findGeometryProperty)(r);return e.map((function(e){return P(P({},e),{},{events:e.events&&Object.keys(e.events).reduce((function(o,i){return P(P({},o),{},S({},i,(function(o,a){return e.events[i](t(a.rowIdx),a,r,n)})))}),{})},"geometry"===e.key&&i?{filterRenderer:o(P(P({},i),{},{localType:"geometry"}),i.name),filterable:!0,geometryPropName:i.name}:{})}))},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(i,a){return P(P({},i),{},S({},a,(function(){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return e[a].apply(e,c.concat([t,r,n,o]))})))}),{})},W=function(e,t){return!!(0,h.getPropertyDesciptor)(e,t)},G=function(e,t,r){return(0,h.isValidValueForPropertyName)(e,(o=r,"geometry"===(n=t)?function(e){return f()((0,h.findGeometryProperty)(e),"name")}(o):n),r);var n,o},V=function(){return"EPSG:4326"},H=function(e,t,r){return function(n){return t.length>0?n._new:!e||e&&!!r[n.id]}},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T(e,t[e.id]||{})},q=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,U=function(e,t){if("string"===t)return{newVal:a()(e),operator:"ilike"};var r,n=q.exec(e),o="=";return n?("!=="===(o=n[1]||"=")|"!="===o?o="<>":"==="===o|"=="===o&&(o="="),r=parseFloat(n[2])):r=parseFloat(e,10),{newVal:r,operator:o}},$=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.attribute,n=t.operator,i=t.value,a=t.type,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(null===(e=c.groupFields)||void 0===e?void 0:e.filter((function(e){return r!==e.id&&1!==e.id})))||[];if(("string"===a||"number"===a)&&b()(i)&&-1!==(null==i?void 0:i.indexOf(","))){var u,s=(null==i?void 0:i.split(",").filter(o()))||[],p=(null===(u=c.filterFields)||void 0===u?void 0:u.filter((function(e){return r!==e.attribute})))||[];return P(P({},c),{},{groupFields:l.concat([{id:r,logic:"OR",groupId:1,index:0}]),filterFields:p.concat(s.map((function(e){var t=U(e,a),n=t.operator,o=t.newVal;return{attribute:r,rowId:Date.now(),type:a,groupId:r,operator:n,value:o}}))),spatialField:c.spatialField,spatialFieldOperator:c.spatialFieldOperator})}return P(P({},c),{},{groupFields:l.concat([{id:1,logic:"AND",groupId:1,index:0}]),filterFields:"geometry"===a?c.filterFields:v()(i)?(c.filterFields||[]).filter((function(e){return e.attribute!==r})):R(c.filterFields||[],{attribute:r},{attribute:r,rowId:Date.now(),type:a,groupId:1,operator:n,value:i}),spatialField:"geometry"===a?i:c.spatialField,spatialFieldOperator:g()(i)?"OR":""})},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,r=void 0===t?0:t,n=e.maxFeatures,o=void 0===n?1:n,i=e.totalFeatures,a=void 0===i?0:i,c=e.resultSize;return{page:Math.ceil(r/o),resultSize:c,size:o,total:a,maxPages:Math.ceil(a/o)-1}},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.endPage,n=t.startPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.pages,a=o.features,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=c.size,s=c.maxStoredPages,p=c.startIndex,d=L(n,r,i,u),g=d[1]-d[0]+1,y=f()(e,"features",[]);y.length!==g*u&&(y=y.concat(l()(Array(g*u-y.length>0?g*u-y.length:y.length),!1)));var v=i,m=a,b=v.length+g-Math.max(s,r-n+1);if(b>0)for(var h=n*u,O=r*u,w=h+(O-h)/2,j=0;j<b;j++){var P=F(w,i,h,O),S=P*u;v=Z(P,v),m=M(a,S,u)}for(var E=[],D=0;D<g;D++)E.push(p+u*D);return{pages:v.concat(E),features:m.concat(y)}}},89077:(e,t,r)=>{"use strict";r.d(t,{LR:()=>f,RP:()=>d});var n=r(78598),o=r.n(n),i=r(97995),a=r.n(i),c=(r(39902),r(89597),r(66085),r(82702),r(27418),r(72163),r(5055),r(3674),r(52628),r(27361),r(91175),r(66604),r(87185),r(30998),r(78718),r(18721),r(93220),r(23570),r(57557),r(47037),r(85564)),l=r.n(c);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(13311),r(6557);var p=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return l()([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var r=u(t,2),n=r[0],o=r[1];return e.replace(n,o)}),o)};p.bind(null,!0,!0,!0,!1),p.bind(null,!1,!1,!0,!1),r(24262),r(86267),new DOMParser;var f=function(e,t,r){var n=new Blob([e],{type:r});o().saveAs(n,t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;f(a()(e),t,r)}},72810:()=>{},86799:()=>{}}]);