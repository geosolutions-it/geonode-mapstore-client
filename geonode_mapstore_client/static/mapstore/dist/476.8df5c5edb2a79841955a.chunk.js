(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[476],{50476:(t,e,r)=>{"use strict";r.r(e);var i=r(8010),o=r(38225),a=r(21915),n=r(21882),s=r(13580),p=r(50596),c=r(76122),l=r(70701),u=r(78487);function h(t,e,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=t[0])){var o=i.getTileCoordExtent(t,this.tmpExtent_),a=(0,p.Pq)(i.getTileSize(t[0]),this.tmpSize);1!=e&&(a=(0,p.bA)(a,e,this.tmpSize));var n={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return(0,s.f0)(n,this.params_),this.getRequestUrl_(t,a,o,e,r,n)}}const g=function(t){function e(e){var r=e||{};t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,tileUrlFunction:h,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition}),this.params_=r.params||{},this.tmpExtent_=(0,a.lJ)(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,i,o,a){var s=this.urls;if(s){var p=o.getCode().split(":").pop();a.SIZE=e[0]+","+e[1],a.BBOX=r.join(","),a.BBOXSR=p,a.IMAGESR=p,a.DPI=Math.round(a.DPI?a.DPI*i:90*i);var c=(1==s.length?s[0]:s[(0,n.$W)((0,l.vp)(t),s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,u.B)(c,a)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.updateParams=function(t){(0,s.f0)(this.params_,t),this.setKey(this.getKeyForParams_())},e}(c.Z);(0,i.registerType)("arcgis",{create:function(t){return new o.Z({opacity:void 0!==t.opacity?t.opacity:1,visible:!1!==t.visibility,zIndex:t.zIndex,source:new g({params:{LAYERS:"show:".concat(parseInt(t.name||0,10))},url:t.url})})}})}}]);