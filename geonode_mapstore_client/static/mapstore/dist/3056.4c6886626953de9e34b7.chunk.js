(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3056],{59551:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(72500),o=r.n(n),a=r(91175),c=r.n(a),i=r(10928),s=r.n(i),u=r(27418),l=r.n(u),g=r(75875),d=r.n(g),f=r(37275),m=r(86267),p=function(e){var t=o().parse(e,!0);return o().format(l()({},t,{search:null},{query:l()({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},w={parseUrl:p,getRecordById:function(e){return new Promise((function(t){Promise.all([r.e(9942),r.e(6372)]).then(function(){t(d().get(e).then((function(e){if(e){var t=r(66372).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var n=t.value.abstractRecord[0].value.dcElement;if(n){for(var o={references:[]},a=0;a<n.length;a++){var c=n[a],i=c.name.localPart,s={};s="references"===i&&c.value?{value:c.value.content&&(0,f.$F)(c.value.content[0])||c.value.content||c.value,scheme:c.value.scheme}:c.value.content&&c.value.content[0]||c.value.content||c.value,o[i]&&Array.isArray(o[i])?o[i].push(s):o[i]?o[i]=[o[i],s]:o[i]=s}return{dc:o}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,r)).catch(r.oe)}))},getRecords:function(e,t,n,o){return new Promise((function(a){Promise.all([r.e(9942),r.e(1269)]).then(function(){var i=r(66372),u=i.CSW,l=i.marshaller,g=i.unmarshaller,w=l.marshalString({name:"csw:GetRecords",value:u.getRecords(t,n,"string"!=typeof o&&o)});o&&"string"!=typeof o||(w=function(e,t,r){return r?'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:dc="http://purl.org/dc/elements/1.1/"\n    xmlns:dct="http://purl.org/dc/terms/"\n    xmlns:gmd="http://www.isotc211.org/2005/gmd"\n    xmlns:gco="http://www.isotc211.org/2005/gco"\n    xmlns:gmi="http://www.isotc211.org/2005/gmi"\n    xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e,'" maxRecords="').concat(t,'">\n    <csw:Query typeNames="csw:Record">\n        <csw:ElementSetName>full</csw:ElementSetName>\n        <csw:Constraint version="1.1.0">\n            <ogc:Filter>\n            <ogc:And>\n                <ogc:PropertyIsLike wildCard="%" singleChar="_" escapeChar="\\">\n                    <ogc:PropertyName>csw:AnyText</ogc:PropertyName>\n                    <ogc:Literal>%').concat(r,"%</ogc:Literal>\n                </ogc:PropertyIsLike>\n                <ogc:Or>\n                <ogc:PropertyIsEqualTo>\n                    <ogc:PropertyName>dc:type</ogc:PropertyName>\n                    <ogc:Literal>dataset</ogc:Literal>\n                </ogc:PropertyIsEqualTo>\n                <ogc:PropertyIsEqualTo>\n                    <ogc:PropertyName>dc:type</ogc:PropertyName>\n                    <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n                </ogc:PropertyIsEqualTo>\n               </ogc:Or>\n            </ogc:And>\n            </ogc:Filter>\n        </csw:Constraint>\n    </csw:Query>\n</csw:GetRecords>"):'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"\n        xmlns:ogc="http://www.opengis.net/ogc"\n        xmlns:gml="http://www.opengis.net/gml"\n        xmlns:dc="http://purl.org/dc/elements/1.1/"\n        xmlns:dct="http://purl.org/dc/terms/"\n        xmlns:gmd="http://www.isotc211.org/2005/gmd"\n        xmlns:gco="http://www.isotc211.org/2005/gco"\n        xmlns:gmi="http://www.isotc211.org/2005/gmi"\n        xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e,'" maxRecords="').concat(t,'">\n        <csw:Query typeNames="csw:Record">\n            <csw:ElementSetName>full</csw:ElementSetName>\n            <csw:Constraint version="1.1.0">\n        <ogc:Filter>\n            <ogc:Or>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n           </ogc:Or>\n        </ogc:Filter>\n            </csw:Constraint>\n        </csw:Query>\n    </csw:GetRecords>')}(t,n,o)),a(d().post(p(e),w,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=g.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var r=t.value,n=r.searchResults.abstractRecord||r.searchResults.any,o={numberOfRecordsMatched:r.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:r.searchResults.numberOfRecordsReturned,nextRecord:r.searchResults.nextRecord},a=[];if(n)for(var i=0;i<n.length;i++){var u=n[i].value,l={dateStamp:u.dateStamp&&u.dateStamp.date,fileIdentifier:u.fileIdentifier&&u.fileIdentifier.characterString&&u.fileIdentifier.characterString.value,identificationInfo:u.abstractMDIdentification&&u.abstractMDIdentification.value};if(u.boundingBox){var d,p=void 0,w=void 0;if((d=Array.isArray(u.boundingBox)?c()(u.boundingBox):u.boundingBox)&&d.value){var v,h,y,S,P=null!==(v=null===(h=d.value)||void 0===h?void 0:h.crs)&&void 0!==v?v:"",x=null===(y=P.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===y?void 0:y[0],b=(0,m.makeNumericEPSG)(null===(S=P.match(/EPSG:[0-9]+/))||void 0===S?void 0:S[0]),R=d.value.lowerCorner,E=d.value.upperCorner,O=b||(0,m.extractCrsFromURN)(x)||s()(P.split(":"));if(O){if("EPSG:"===O.slice(0,5)){if(!(w=(0,m.makeNumericEPSG)(O)))throw new Error('No suitable EPSG numeric conversion found for "'.concat(O,'"'))}else if(!(w=(0,m.makeNumericEPSG)("EPSG:".concat(O))))throw new Error('No suitable EPSG numeric conversion found for "'.concat(O,'"'))}else w="EPSG:4326";"EPSG:4326"===w&&"CRS84"!==O&&"OGC:CRS84"!==O&&(R=[R[1],R[0]],E=[E[1],E[0]]),p=(0,m.makeBboxFromOWS)(R,E)}l.boundingBox={extent:p,crs:w}}var C=u.dcElement;if(C){for(var G={references:[]},N=0;N<C.length;N++){var T=C[N],I=T.name.localPart,L={};L="references"===I&&T.value?{value:T.value.content&&(0,f.$F)(T.value.content[0])||T.value.content||T.value,scheme:T.value.scheme}:T.value.content&&T.value.content[0]||T.value.content||T.value,G[I]&&Array.isArray(G[I])?G[I].push(L):G[I]?G[I]=[G[I],L]:G[I]=L}l.dc=G}a.push(l)}return o.records=a,o}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,r)).catch(r.oe)}))},textSearch:function(e,t,r,n){return new Promise((function(o){o(w.getRecords(e,t,r,n))}))},workspaceSearch:function(e,t,n,o,a){return new Promise((function(c){Promise.all([r.e(9942),r.e(1269)]).then(function(){var i=r(84454).Filter,s=a||"%",u=o&&"%"+o+"%"||"%",l=i.propertyIsLike("identifier",s+":"+u),g=i.filter(l);c(w.getRecords(e,t,n,g))}.bind(null,r)).catch(r.oe)}))},reset:function(){}};const v=w},3475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(75875),o=r.n(n),a=r(37275),c=r(72500),i=r.n(c),s=r(27418),u=r.n(s),l=r(5055),g=r.n(l),d=r(84596),f=r.n(d),m=r(86267),p=r(7294),w={},v=function(e){var t=i().parse(e,!0);return i().format(u()({},t,{search:null},{query:u()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},h=function(e,t,r,n,o){for(var a=e.Capabilities.Contents,c=(0,p.G6)(e),i=(0,p.s5)(e),s=a.TileMatrixSet&&f()(a.TileMatrixSet)||[],l=[],g=s.length,d=0;d<g;d++)l.push((0,m.getEPSGCode)(s[d]["ows:SupportedCRS"]));var w=a.Layer,v=f()(w).filter((function(e){return!n||-1!==e["ows:Identifier"].toLowerCase().indexOf(n.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:v.length,numberOfRecordsReturned:Math.min(r,v.length),nextRecord:t+Math.min(r,v.length)+1,records:v.filter((function(e,n){return n>=t-1&&n<t-1+r})).map((function(e){return u()({},e,{SRS:l,TileMatrixSet:s,queryable:!!(0,p.b4)(c,"GetFeatureInfo","KVP"),requestEncoding:i,style:(0,p.EN)(e),format:(0,p.JY)(e),GetTileURL:(0,p.b4)(c,"GetTile",i),capabilitiesURL:o})}))}},y={parseUrl:v,getRecords:function(e,t,r,n){var c=w[e];return c&&(new Date).getTime()<c.timestamp+1e3*((0,a.u8)("cacheExpire")||60)?new Promise((function(o){o(h(c.data,t,r,n,e))})):o().get(v(e)).then((function(o){var a;return g().parseString(o.data,{explicitArray:!1},(function(e,t){a=t})),w[e]={timestamp:(new Date).getTime(),data:a},h(a,t,r,n,e)}))},getCapabilities:function(e){var t=w[e];return t&&(new Date).getTime()<t.timestamp+1e3*((0,a.u8)("cacheExpire")||60)?new Promise((function(e){e(t.data)})):o().get(v(e)).then((function(t){var r;return g().parseString(t.data,{explicitArray:!1},(function(e,t){r=t})),w[e]={timestamp:(new Date).getTime(),data:r},r}))},textSearch:function(e,t,r,n){return y.getRecords(e,t,r,n)},reset:function(){Object.keys(w).forEach((function(e){delete w[e]}))}};const S=y},32354:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(27361),o=r.n(n),a=r(37275),c=function(e,t,r,n){var c=o()(a.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!n||e.title.indexOf(n)>-1})),i=c.filter((function(e,n){return n>=t-1&&n<r+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:c.length,numberOfRecordsReturned:i.length,records:i,service:{Name:"Background Provider"}})}))};const i={getRecords:c,reset:function(){},textSearch:function(e,t,r,n){return c(0,t,r,n)}}},88113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>f,PG:()=>m,_x:()=>p,Mm:()=>w,dP:()=>v,SX:()=>h,ZL:()=>y,_S:()=>S,iH:()=>P,R7:()=>x,Q7:()=>b,n7:()=>R,bA:()=>E,hm:()=>O,E2:()=>C,Cb:()=>G,eK:()=>N,Im:()=>T,e8:()=>I,$t:()=>L,kS:()=>k,y:()=>q,l2:()=>j,HN:()=>F,BM:()=>M,am:()=>A,LV:()=>D,CK:()=>B});var n=r(22222),o=r(27361),a=r.n(o),c=r(78718),i=r.n(c),s=r(827),u=r(76712);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){return a()(e,"catalog.services")},m=(0,n.P1)((function(e){return a()(e,"catalog.default.staticServices")}),f,(function(e,t){return g(g({},t),i()(e,"default_map_backgrounds"))})),p=function(e){return a()(e,"catalog.default.tileSizes",[256,512])},w=function(e){return a()(e,"controls.metadataexplorer.group")},v=function(e){return a()(e,"catalog.saving")},h=function(e){return a()(e,"catalog.result")},y=function(e){return a()(e,"catalog.openCatalogServiceList")},S=function(e){return a()(e,"catalog.newService")},P=function(e){return a()(e,"catalog.newService.type","csw")},x=function(e){return a()(e,'catalog.services["'.concat(a()(e,"catalog.selectedService"),'"]'))},b=function(e){return a()(e,'catalog.services["'.concat(a()(e,"catalog.selectedService"),'"].type'),function(e){return a()(e,'catalog.default.staticServices["'.concat(a()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},R=function(e){return a()(e,'catalog.services["'.concat(a()(e,"catalog.selectedService"),'"].layerOptions'),{})},E=function(e){return a()(e,"catalog.searchOptions")},O=function(e){return a()(e,"catalog.loadingError")},C=function(e){return a()(e,"catalog.loading",!1)},G=function(e){return a()(e,"catalog.selectedService")},N=function(e){return a()(e,"catalog.mode","view")},T=function(e){return a()(e,"catalog.layerError")},I=function(e){return a()(e,"catalog.searchOptions.text","")},L=function(e){return"metadataexplorer"===a()(e,"controls.toolbar.active")||a()(e,"controls.metadataexplorer.enabled")},k=function(e){return(a()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},q=function(e){return a()(e,"catalog.pageSize",4)},j=function(e){return a()(e,"catalog.delayAutoSearch",1e3)},F=(0,n.zB)({projection:s.uy}),M=function(e){return a()(e,"catalog.formatsLoading",!1)},A=function(e){return a()(e,"catalog.newService.supportedFormats.imageFormats",u.QQ)},D=function(e){return a()(e,"catalog.newService.supportedFormats.infoFormats",(0,u.B8)())},B=function(e){return a()(e,"catalog.newService.formatUrlUsed","")}}}]);