(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{2120:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(162),a="WIDGETS:INSERT",l="WIDGETS:NEW",s="WIDGETS:UPDATE",c="WIDGETS:DELETE",u=function(e,t){return{type:"WIDGETS:EDITOR_SETTING_CHANGE",key:e,value:t}},p=function(e){return u("".concat("dependencySelector"),e)};e.exports={NEW:l,INSERT:a,UPDATE:s,UPDATE_PROPERTY:"WIDGETS:UPDATE_PROPERTY",UPDATE_LAYER:"WIDGETS:UPDATE_LAYER",DELETE:c,CLEAR_WIDGETS:"WIDGETS:CLEAR_WIDGETS",CHANGE_LAYOUT:"WIDGETS:CHANGE_LAYOUT",EDIT:"WIDGETS:EDIT",EDIT_NEW:"WIDGETS:EDIT_NEW",EDITOR_CHANGE:"WIDGETS:EDITOR_CHANGE",EDITOR_SETTING_CHANGE:"WIDGETS:EDITOR_SETTING_CHANGE",ADD_DEPENDENCY:"WIDGETS:ADD_DEPENDENCY",REMOVE_DEPENDENCY:"WIDGETS:REMOVE_DEPENDENCY",LOAD_DEPENDENCIES:"WIDGETS:LOAD_DEPENDENCIES",RESET_DEPENDENCIES:"WIDGETS:RESET_DEPENDENCIES",OPEN_FILTER_EDITOR:"WIDGETS:OPEN_FILTER_EDITOR",EXPORT_CSV:"WIDGETS:EXPORT_CSV",EXPORT_IMAGE:"WIDGETS:EXPORT_IMAGE",TOGGLE_CONNECTION:"WIDGETS:TOGGLE_CONNECTION",WIDGET_SELECTED:"WIDGETS:WIDGET_SELECTED",createChart:function(){return{type:"WIDGETS:NEW_CHART"}},NEW_CHART:"WIDGETS:NEW_CHART",exportCSV:function(e){var t=e.data,r=void 0===t?[]:t,n=e.title;return{type:"WIDGETS:EXPORT_CSV",data:r,title:void 0===n?"export":n}},exportImage:function(e){return{type:"WIDGETS:EXPORT_IMAGE",widgetDivId:e.widgetDivId}},openFilterEditor:function(){return{type:"WIDGETS:OPEN_FILTER_EDITOR"}},createWidget:function(e){return{type:l,widget:e}},insertWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:a,target:t,id:i(),widget:e}},updateWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:s,target:t,widget:e}},updateWidgetProperty:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"floating";return{type:"WIDGETS:UPDATE_PROPERTY",id:e,target:n,key:t,value:r}},updateWidgetLayer:function(e){return{type:"WIDGETS:UPDATE_LAYER",layer:e}},deleteWidget:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:c,target:t,widget:e}},clearWidgets:function(){return{type:"WIDGETS:CLEAR_WIDGETS"}},changeLayout:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"floating";return{type:"WIDGETS:CHANGE_LAYOUT",allLayouts:t,layout:e,target:r}},editWidget:function(e){return{type:"WIDGETS:EDIT",widget:e}},editNewWidget:function(e,t){return{type:"WIDGETS:EDIT_NEW",widget:e,settings:t}},onEditorChange:function(e,t){return{type:"WIDGETS:EDITOR_CHANGE",key:e,value:t}},changeEditorSetting:u,toggleConnection:function(e,t,r,n){return{type:"WIDGETS:TOGGLE_CONNECTION",active:e,availableDependencies:t,options:r,target:n}},selectWidget:function(e,t){return{type:"WIDGETS:WIDGET_SELECTED",widget:e,opts:t}},addDependency:function(e,t){return{type:"WIDGETS:ADD_DEPENDENCY",key:e,value:t}},removeDependency:function(e){return{type:"WIDGETS:REMOVE_DEPENDENCY",key:e}},loadDependencies:function(e){return{type:"WIDGETS:LOAD_DEPENDENCIES",dependencies:e}},resetDependencies:function(){return{type:"WIDGETS:RESET_DEPENDENCIES"}},setPage:function(e){return u("step",e)},changeDependencySelector:function(e,t){return u("".concat("dependencySelector","[").concat(e,"]"),t)},setupDependencySelector:p,toggleDependencySelector:function(e,t){return p(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({active:e},t))},DEPENDENCY_SELECTOR_KEY:"dependencySelector",DEFAULT_TARGET:"floating",WIDGETS_REGEX:/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,toggleCollapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"floating";return{type:"WIDGET:TOGGLE_COLLAPSE",widget:e,target:t}},TOGGLE_COLLAPSE:"WIDGET:TOGGLE_COLLAPSE",toggleCollapseAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"floating";return{type:"WIDGET:TOGGLE_COLLAPSE_ALL",target:e}},TOGGLE_COLLAPSE_ALL:"WIDGET:TOGGLE_COLLAPSE_ALL",toggleTray:function(e){return{type:"WIDGET:TOGGLE_TRAY",value:e}},TOGGLE_TRAY:"WIDGET:TOGGLE_TRAY"}},2138:function(e,t,r){var n=r(1),o=r(13).isFunction,i=r(407).branch,a=r(3687);e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return i(e,(function(){return function(e){return n.createElement(r,t&&o(t)?t(e):t)}}))}},2143:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(13),a=i.find,l=i.get,s=i.castArray,c=r(268).mapSelector,u=r(408).getSelectedLayer,p=r(2522).pathnameSelector,f=r(2120),d=f.DEFAULT_TARGET,m=f.DEPENDENCY_SELECTOR_KEY,y=f.WIDGETS_REGEX,g=r(2793),b=g.getWidgetsGroups,h=g.getWidgetDependency,v=r(2523),O=v.isDashboardAvailable,E=v.isDashboardEditing,w=r(195),S=w.createSelector,P=w.createStructuredSelector,T=r(2480).createShallowSelector,j=function(e){return l(e,"widgets.builder.settings")},A=function(e){return l(e,"widgets.dependencies")||{}},C=function(e){return Object.keys(A(e)).map((function(t){return A(e)[t]}))},x=function(e){return l(e,"widgets.builder.editor")},D=S(x,u,(function(e){return O(e)&&E(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t||!n&&r})),_=function(e){return l(e,"widgets.containers[".concat(d,"].widgets"))},I=function(e){return l(e,"widgets.containers[".concat(d,"].collapsed"))},F=S(_,I,(function(e,t){return e&&t?e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id;return!t[r]})):e})),k=S(I,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),L=function(e){return(_(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},R=S(L,(function(e){return(_(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))}),c,p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(s(r).map((function(){return"map"}))).concat(s(t).filter((function(){return-1===n.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),N=function(e){return l(j(e),"".concat(m))},M=S(_,(function(e){return b(e)})),B=function(e){return l(e,"widgets.containers[".concat(d,"].layouts"))},G=function(e){return l(e,"widgets.containers[".concat(d,"].widgets"))};e.exports={getFloatingWidgets:_,getVisibleFloatingWidgets:F,getCollapsedState:I,getCollapsedIds:k,getFloatingWidgetsLayout:B,getFloatingWidgetsCurrentLayout:function(e){return l(e,"widgets.containers[".concat(d,"].layout"))},getDashboardWidgets:G,dashboardHasWidgets:function(e){return(G(e)||[]).length>0},getDashboardWidgetsLayout:function(e){return l(e,"widgets.containers[".concat(d,"].layouts"))},getEditingWidget:x,getEditingWidgetLayer:function(e){return l(x(e),"layer")},returnToFeatureGridSelector:function(e){return l(e,"widgets.builder.editor.returnToFeatureGrid",!1)},getEditingWidgetFilter:function(e){return l(x(e),"filter")},getEditorSettings:j,getWidgetLayer:D,getMapWidgets:L,getWidgetAttributeFilter:function(e,t){return S(F,(function(r){var n=a(r,{id:e});return n&&n.quickFilters&&n.options&&a(n.options.propertyName,(function(e){return e===t}))&&n.quickFilters[t]||{}}))},availableDependenciesSelector:R,dashBoardDependenciesSelector:function(){return{}},dependenciesSelector:T(A,C,(function(e){return C(e).map((function(t){return 0===t.indexOf("map.")?l(c(e),t.slice(4)):t.match(y)?h(t,_(e)):l(e,t)}))}),(function(e,t,r){return t.reduce((function(t,i,a){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,o({},Object.keys(e)[a],r[a]))}),{})})),isWidgetSelectionActive:function(e){return l(N(e),"active")},getDependencySelectorConfig:N,getWidgetsDependenciesGroups:M,widgetsConfig:P({widgets:_,layouts:B}),isTrayEnabled:function(e){return l(e,"widgets.tray")}}},2175:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(71);function i(e,t){return{type:"ZONE_FILTER",data:e,id:t}}function a(e,t){return{type:"ZONE_SEARCH_ERROR",error:e,id:t}}function l(e,t){return{type:"ZONE_SEARCH",active:e,id:t}}e.exports={ADD_FILTER_FIELD:"ADD_FILTER_FIELD",REMOVE_FILTER_FIELD:"REMOVE_FILTER_FIELD",UPDATE_FILTER_FIELD:"UPDATE_FILTER_FIELD",UPDATE_EXCEPTION_FIELD:"UPDATE_EXCEPTION_FIELD",ADD_GROUP_FIELD:"ADD_GROUP_FIELD",UPDATE_LOGIC_COMBO:"UPDATE_LOGIC_COMBO",REMOVE_GROUP_FIELD:"REMOVE_GROUP_FIELD",CHANGE_CASCADING_VALUE:"CHANGE_CASCADING_VALUE",EXPAND_ATTRIBUTE_PANEL:"EXPAND_ATTRIBUTE_PANEL",EXPAND_SPATIAL_PANEL:"EXPAND_SPATIAL_PANEL",EXPAND_CROSS_LAYER:"QUERYFORM:EXPAND_CROSS_LAYER",SELECT_SPATIAL_METHOD:"SELECT_SPATIAL_METHOD",SELECT_SPATIAL_OPERATION:"SELECT_SPATIAL_OPERATION",CHANGE_SPATIAL_ATTRIBUTE:"CHANGE_SPATIAL_ATTRIBUTE",CHANGE_SPATIAL_FILTER_VALUE:"CHANGE_SPATIAL_FILTER_VALUE",REMOVE_SPATIAL_SELECT:"REMOVE_SPATIAL_SELECT",SHOW_SPATIAL_DETAILS:"SHOW_SPATIAL_DETAILS",SET_CROSS_LAYER_PARAMETER:"QUERYFORM:SET_CROSS_LAYER_PARAMETER",QUERY_FORM_SEARCH:"QUERY_FORM_SEARCH",QUERY_FORM_RESET:"QUERY_FORM_RESET",SHOW_GENERATED_FILTER:"SHOW_GENERATED_FILTER",CHANGE_DWITHIN_VALUE:"CHANGE_DWITHIN_VALUE",ZONE_SEARCH:"ZONE_SEARCH",ZONE_SEARCH_ERROR:"ZONE_SEARCH_ERROR",ZONE_FILTER:"ZONE_FILTER",ZONE_CHANGE:"ZONE_CHANGE",ZONES_RESET:"ZONES_RESET",SIMPLE_FILTER_FIELD_UPDATE:"SIMPLE_FILTER_FIELD_UPDATE",ADD_SIMPLE_FILTER_FIELD:"ADD_SIMPLE_FILTER_FIELD",REMOVE_SIMPLE_FILTER_FIELD:"REMOVE_SIMPLE_FILTER_FIELD",REMOVE_ALL_SIMPLE_FILTER_FIELDS:"REMOVE_ALL_SIMPLE_FILTER_FIELDS",SELECT_VIEWPORT_SPATIAL_METHOD:"SELECT_VIEWPORT_SPATIAL_METHOD",UPDATE_GEOMETRY:"UPDATE_GEOMETRY",UPDATE_FILTER_FIELD_OPTIONS:"UPDATE_FILTER_FIELD_OPTIONS",LOADING_FILTER_FIELD_OPTIONS:"LOADING_FILTER_FIELD_OPTIONS",ADD_CROSS_LAYER_FILTER_FIELD:"QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",UPDATE_CROSS_LAYER_FILTER_FIELD:"QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",REMOVE_CROSS_LAYER_FILTER_FIELD:"QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",RESET_CROSS_LAYER_FILTER:"QUERYFORM:RESET_CROSS_LAYER_FILTER",SET_AUTOCOMPLETE_MODE:"SET_AUTOCOMPLETE_MODE",TOGGLE_AUTOCOMPLETE_MENU:"TOGGLE_AUTOCOMPLETE_MENU",LOAD_FILTER:"QUERYFORM:LOAD_FILTER",setAutocompleteMode:function(e){return{type:"SET_AUTOCOMPLETE_MODE",status:e}},loadingFilterFieldOptions:function(e,t){return{type:"LOADING_FILTER_FIELD_OPTIONS",status:e,filterField:t}},updateGeometrySpatialField:function(e){return{type:"UPDATE_GEOMETRY",geometry:e}},selectViewportSpatialMethod:function(){return{type:"SELECT_VIEWPORT_SPATIAL_METHOD"}},resetZones:function(){return{type:"ZONES_RESET"}},zoneChange:function(e,t){return{type:"ZONE_CHANGE",id:e,value:t}},search:function(e,t){return{type:"QUERY_FORM_SEARCH",searchUrl:e,filterObj:t}},loadFilter:function(e){return{type:"QUERYFORM:LOAD_FILTER",filter:e}},zoneSearch:l,zoneSearchError:a,zoneFilter:i,zoneGetValues:function(e,t,r){return function(s){return o.post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var c=o.data;if("object"!==n(c))try{c=JSON.parse(c)}catch(n){s(a("Search result broken ("+e+":   "+t+"): "+n.message,r))}s(i(c,r)),s(l(!1,r))})).catch((function(e){s(a(e,r))}))}},addFilterField:function(e){return{type:"ADD_FILTER_FIELD",groupId:e}},removeFilterField:function(e){return{type:"REMOVE_FILTER_FIELD",rowId:e}},updateFilterField:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:"UPDATE_FILTER_FIELD",rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}},updateExceptionField:function(e,t){return{type:"UPDATE_EXCEPTION_FIELD",rowId:e,exceptionMessage:t}},addGroupField:function(e,t){return{type:"ADD_GROUP_FIELD",groupId:e,index:t}},updateLogicCombo:function(e,t){return{type:"UPDATE_LOGIC_COMBO",groupId:e,logic:t}},removeGroupField:function(e){return{type:"REMOVE_GROUP_FIELD",groupId:e}},changeCascadingValue:function(e){return{type:"CHANGE_CASCADING_VALUE",attributes:e}},expandAttributeFilterPanel:function(e){return{type:"EXPAND_ATTRIBUTE_PANEL",expand:e}},expandSpatialFilterPanel:function(e){return{type:"EXPAND_SPATIAL_PANEL",expand:e}},expandCrossLayerFilterPanel:function(e){return{type:"QUERYFORM:EXPAND_CROSS_LAYER",expand:e}},selectSpatialMethod:function(e,t){return{type:"SELECT_SPATIAL_METHOD",fieldName:t,method:e}},selectSpatialOperation:function(e,t){return{type:"SELECT_SPATIAL_OPERATION",fieldName:t,operation:e}},changeSpatialAttribute:function(e){return{type:"CHANGE_SPATIAL_ATTRIBUTE",attribute:e}},changeSpatialFilterValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:"CHANGE_SPATIAL_FILTER_VALUE",value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}},removeSpatialSelection:function(){return{type:"REMOVE_SPATIAL_SELECT"}},showSpatialSelectionDetails:function(e){return{type:"SHOW_SPATIAL_DETAILS",show:e}},setCrossLayerFilterParameter:function(e,t){return{type:"QUERYFORM:SET_CROSS_LAYER_PARAMETER",key:e,value:t}},query:function(e,t){return{type:"SHOW_GENERATED_FILTER",data:t}},reset:function(e){return{type:"QUERY_FORM_RESET",skip:e}},changeDwithinValue:function(e){return{type:"CHANGE_DWITHIN_VALUE",distance:e}},simpleFilterFieldUpdate:function(e,t){return{type:"SIMPLE_FILTER_FIELD_UPDATE",id:e,properties:t}},addSimpleFilterField:function(e){return{type:"ADD_SIMPLE_FILTER_FIELD",properties:e}},removeSimpleFilterField:function(e){return{type:"REMOVE_SIMPLE_FILTER_FIELD",id:e}},removeAllSimpleFilterFields:function(){return{type:"REMOVE_ALL_SIMPLE_FILTER_FIELDS"}},addCrossLayerFilterField:function(e){return{type:"QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",rowId:(new Date).getTime(),groupId:e}},updateCrossLayerFilterField:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:"QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}},removeCrossLayerFilterField:function(e){return{type:"QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",rowId:e}},resetCrossLayerFilter:function(){return{type:"QUERYFORM:RESET_CROSS_LAYER_FILTER"}},updateFilterFieldOptions:function(e,t,r){return{type:"UPDATE_FILTER_FIELD_OPTIONS",filterField:e,options:t,valuesCount:r}},toggleMenu:function(e,t){return{type:"TOGGLE_AUTOCOMPLETE_MENU",rowId:e,status:t}}}},2176:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(71);function i(e,t){return{type:"FEATURE_LOADED",typeName:e,feature:t}}function a(e,t){return{type:"FEATURE_ERROR",typeName:e,error:t}}e.exports={LAYER_SELECTED_FOR_SEARCH:"LAYER_SELECTED_FOR_SEARCH",layerSelectedForSearch:function(e){return{type:"LAYER_SELECTED_FOR_SEARCH",id:e}},FEATURE_TYPE_SELECTED:"FEATURE_TYPE_SELECTED",featureTypeSelected:function(e,t){return{type:"FEATURE_TYPE_SELECTED",url:e,typeName:t}},FEATURE_TYPE_LOADED:"FEATURE_TYPE_LOADED",featureTypeLoaded:function(e,t){return{type:"FEATURE_TYPE_LOADED",typeName:e,featureType:t}},FEATURE_TYPE_ERROR:"FEATURE_TYPE_ERROR",featureTypeError:function(e,t){return{type:"FEATURE_TYPE_ERROR",typeName:e,error:t}},FEATURE_ERROR:"FEATURE_ERROR",featureError:a,QUERY_CREATE:"QUERY_CREATE",createQuery:function(e,t){return{type:"QUERY_CREATE",searchUrl:e,filterObj:t}},QUERY_RESULT:"QUERY_RESULT",querySearchResponse:function(e,t,r,n){return{type:"QUERY_RESULT",searchUrl:t,filterObj:r,result:e,queryOptions:n}},QUERY_ERROR:"QUERY_ERROR",queryError:function(e){return{type:"QUERY_ERROR",error:e}},RESET_QUERY:"RESET_QUERY",resetQuery:function(){return{type:"RESET_QUERY"}},QUERY:"QUERY",query:function(e,t,r){return{type:"QUERY",searchUrl:e,filterObj:t,queryOptions:r}},UPDATE_QUERY:"QUERY:UPDATE_QUERY",updateQuery:function(e){return{type:"QUERY:UPDATE_QUERY",updates:e}},FEATURE_LOADING:"FEATURE_LOADING",featureLoading:function(e){return{type:"FEATURE_LOADING",isLoading:e}},FEATURE_LOADED:"FEATURE_LOADED",featureLoaded:i,INIT_QUERY_PANEL:"INIT_QUERY_PANEL",initQueryPanel:function(){return{type:"INIT_QUERY_PANEL"}},loadFeature:function(e,t){return function(r){return o.get(e+"?service=WFS&version=1.1.0&request=GetFeature&typeName="+t+"&outputFormat=application/json").then((function(e){if("object"===n(e.data))r(i(t,e.data));else try{JSON.parse(e.data)}catch(e){r(a(t,"Error from WFS: "+e.message))}})).catch((function(e){r(a(t,e))}))}},TOGGLE_SYNC_WMS:"QUERY:TOGGLE_SYNC_WMS",toggleSyncWms:function(){return{type:"QUERY:TOGGLE_SYNC_WMS"}},TOGGLE_LAYER_FILTER:"QUERY:TOGGLE_LAYER_FILTER",toggleLayerFilter:function(){return{type:"QUERY:TOGGLE_LAYER_FILTER"}}}},2195:function(e,t,r){e.exports=r(2850)},2214:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(136).getMessageById,s=r(0),c=r(13),u=c.castArray,p=c.isArray,f=c.isNil,d=c.isString,m=r(407),y=m.getContext,g=m.mapProps,b=m.compose,h=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(p(t))return t.map((function(n){var o=l(e,n[r]||d(n)&&n||"");return i({},n,{label:f(o)?t:o})}));var n=l(e,t);return f(n)?t:n},v=function(e,t,r){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return i({},n,a({},o,e[o]&&h(t,e[o],r)))}};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return b(y({messages:s.object}),g((function(r){var o=r.messages,a=n(r,["messages"]);return i({},a,{},u(e).reduce(v(a,o,t),{}))})))}},2239:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(2521),d=r(0),m=r(758),y=m.Row,g=m.Col,b=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,i=e.onItemClick,a=e.size,l=t||f;return p.createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},p.createElement(y,{className:"items-list"},r.map((function(e,t){return p.createElement(g,o({key:e.id||t},n),p.createElement(l,o({onClick:function(){return i(e)},size:a},e)))}))))}}])&&a(r.prototype,n),u&&a(r,u),t}(p.Component);u(b,"propTypes",{size:d.string,onItemClick:d.func,colProps:d.object,items:d.array,cardComponent:d.oneOfType([d.string,d.func]),className:d.string}),u(b,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]}),e.exports=b},2240:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(71),u=r(55),p=r(15),f=r(13),d=f.castArray,m=f.isNil,y=r(275).parseString,g=r(429).stripPrefix,b=r(776).interceptOGCError,h=r(137).getCapabilitiesUrl,v=r(762),O=r(2802)({wfsVersion:"1.1.0"}),E=O.getFeature,w=O.query,S=O.sortBy,P=O.propertyName,T=r(55),j=r(13).isObject,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=i(e,["totalFeatures","features"]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.startIndex,s=arguments.length>2?arguments[2]:void 0;return s>t&&s===a+r.length&&t===r.length?l({},n,{features:r,totalFeatures:s}):l({},n,{features:r,totalFeatures:t})},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.pagination||!m(t.startIndex)&&!m(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}},x=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=v.getWFSFilterData(t,r),o=T.parse(e,!0),i=j(o.query)?o.query:{};i.service="WFS",i.outputFormat="json";var a=T.format({protocol:o.protocol,host:o.host,pathname:o.pathname,query:i});return p.Observable.defer((function(){return c.post(a,n,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}})})).let(b).map((function(e){return A(e.data,C(t,r),r.totalFeatures)}))};e.exports={getJSONFeature:x,getLayerJSONFeature:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,a=e.url,s=e.name,c=arguments.length>1?arguments[1]:void 0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=u.sortOptions,f=u.propertyName,m=i(u,["sortOptions","propertyName"]);return x(r.url||a,c&&"object"===o(c)?l({},c,{typeName:s||c.typeName}):E(w(s,[].concat(n(p?[S(p.sortBy,p.sortOrder)]:[]),n(f?[P(f)]:[]),n(c?d(c):[]))),m),m).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!p&&f&&f[0])return x(r.url||a,c&&"object"===o(c)?l({},c,{typeName:s||c.typeName}):E(w(s,[S(f[0])].concat(n(f?[P(f)]:[]),n(c?d(c):[]))),m),m);throw e}))},getJSONFeatureWA:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.sortOptions,o=void 0===n?{}:n,a=i(r,["sortOptions"]);return x(e,t,a).catch((function(r){if("OGCError"===r.name&&"NoApplicableCode"===r.code)return x(e,l({},t,{sortOptions:o}),a);throw r}))},describeFeatureType:function(e){var t=e.layer;return p.Observable.defer((function(){return c.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,o=e.url,i=e.describeFeatureTypeURL,a=u.parse(i||n.url||o,!0);return u.format(l({},a,{search:void 0,query:l({},a.query,{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(b)},getLayerWFSCapabilities:function(e){var t=e.layer;return p.Observable.defer((function(){return c.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,o=e.url,i=h({name:t,url:n&&n.url||o}),a=u.parse(i,!0);return u.format(l({},a,{search:void 0,query:l({},a.query,{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(b).switchMap((function(e){return p.Observable.bindNodeCallback((function(e,t){return y(e,{tagNameProcessors:[g],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}}},2241:function(e,t,r){e.exports.Message=r(2103),e.exports.HTML=r(2260),e.exports.DateFormat=r(3873)},2242:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(195).createSelector,l=r(2143),s=l.getEditingWidget,c=l.dependenciesSelector,u=l.getEditorSettings,p=l.getWidgetLayer,f=l.getFloatingWidgets,d=l.availableDependenciesSelector,m=r(2523).showConnectionsSelector,y=a(p,s,u,f,(function(e,t,r,n){return{layer:t&&t.layer||e,editorData:t,settings:r,widgets:n}})),g=a(s,m,c,d,(function(e,t,r,n){return o({layer:e.layer,showConnections:t,dependencies:r},n)}));e.exports={getWidgetLayer:p,availableDependenciesSelector:d,dashboardSelector:g,wizardStateToProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o({},r,{},e,{},t,{step:e&&e.settings&&e.settings.step,valid:e&&e.settings&&e.settings.valid,onFinish:function(){return t.insertWidget&&t.insertWidget(o({layer:e.layer,url:e.layer&&e.layer.url},e.editorData||{}),r.target)}})},wizardSelector:y}},2274:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(13),s=l.head,c=l.get,u=l.isArray,p=l.isString,f=r(162),d=r(55),m=r(3688),y=m.baseTemplates,g=m.customTemplates,b={},h={css:"geocss",sld:"xml"},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type&&e.type.localPart&&e.type.localPart.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},O={STYLE_OWNER_NAME:"styleeditor",STYLE_ID_SEPARATOR:"___",generateTemporaryStyleId:function(){return"".concat(f(),"_ms_").concat(Date.now().toString())},generateStyleId:function(e){var t=e.title;return"".concat((void 0===t?"":t).toLowerCase().replace(/\s/g,"_")).concat("___").concat(f())},extractFeatureProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeLayer,r=void 0===t?{}:t,n=e.describeFeatureType,o=void 0===n?{}:n,l=r&&r.owsType||null,u=c(o,"complexType[0].complexContent.extension.sequence.element")||null,p=u&&s(u.filter((function(e){var t=e.type;return t&&"gml"===t.prefix}))),f=("WCS"===l?"raster":p&&"WFS"===l&&v(p))||null,d=u&&u.reduce((function(e,t){var r=t.name,n=t.type,o=void 0===n?{}:n;return i({},e,a({},r,{localPart:o.localPart,prefix:o.prefix}))}),{});return{geometryType:f,properties:d,owsType:l}},getEditorMode:function(e){return h[e]||e},isSameOrigin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b.isSameOrigin)return b.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;var r=[t.baseUrl].concat(n(t.availableUrls||[])),o=r.map((function(e){var t=d.parse(e);return"".concat(t.protocol,"//").concat(t.host)})),i=d.parse(e.url),a="".concat(i.protocol,"//").concat(i.host);return-1!==o.indexOf(a)},getStyleTemplates:function(){if(b.getStyleTemplates){var e=b.getStyleTemplates();return[].concat(n(u(e)?e:[]),n(y))}return[].concat(n(g),n(y))},setCustomUtils:function(e,t){b[e]=t},getNameParts:function(e){var t=p(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},stringifyNameParts:function(e){var t=e.name,r=e.workspace;return"".concat(r&&r.name&&"".concat(r.name,":")||"").concat(t)}};e.exports=O},2275:function(e,t,r){var n=r(407).withState;e.exports=n("confirmDelete","toggleDeleteConfirm",!1)},2276:function(e,t,r){var n=r(407).compose,o=r(3709),i=r(3710),a=r(3711),l=r(3712),s=r(3713),c=r(3714),u=r(3715),p=r(3716),f=r(3717);e.exports={withTools:o,pinnableWidget:i,hidableWidget:a,withMenu:s,withIcons:c,editableWidget:u,exportableWidget:p,collapsibleWidget:f,defaultIcons:function(){return n(i(),f(),l())},withHeaderTools:function(){return n(o(),c(),s())}}},2277:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.mapPropsStreamWithConfig,c=a.defaultProps,u=r(2526).default,p=r(15),f=s(u);e.exports=l(c({dataStreamFactory:function(){return p.Observable.of({})}}),f((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o({},t,{},e)}))})))},2278:function(e,t,r){var n=r(1),o=r(2103),i=r(2119),a=r(2736);e.exports=function(e){var t=e.id,r=e.title,l=e.confirmDelete,s=void 0!==l&&l,c=e.className,u=e.handle,p=void 0===u?"draggableHandle":u,f=e.toggleDeleteConfirm,d=void 0===f?function(){}:f,m=e.onDelete,y=void 0===m?function(){}:m,g=e.icons,b=e.topLeftItems,h=e.topRightItems,v=e.headerStyle,O=void 0===v?{}:v,E=e.children;return n.createElement("div",{className:"mapstore-widget-card",id:t},n.createElement(i,{className:c,header:n.createElement("div",{style:O,className:"mapstore-widget-info ".concat(p||"")},n.createElement("div",{className:"mapstore-widget-header"},n.createElement("span",{className:"widget-icons"},g),b,n.createElement("span",{className:"widget-title"},r),n.createElement("span",{className:"mapstore-widget-options"},h)))},E),s?n.createElement(a,{confirmText:n.createElement(o,{msgId:"widgets.widget.menu.delete"}),titleText:n.createElement(o,{msgId:"widgets.widget.menu.delete"}),body:n.createElement(o,{msgId:"widgets.widget.menu.confirmDelete"}),show:s,onClose:function(){return d(!1)},onConfirm:function(){return y(t)}}):null)}},2281:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=r(407).withProps;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return 0===e.step},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s((function(r){var n=r.stepButtons,i=void 0===n?[]:n,s=r.exitButton,c=l(r,["stepButtons","exitButton"]);return{stepButtons:[o({},s,{visible:e(o({stepButtons:i,exitButton:s},c))},t)].concat(a(i))}}))}},2282:function(e,t,r){var n=r(407),o=n.compose,i=n.withState,a=n.withPropsOnChange,l=n.withHandlers,s=o(a(["step"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipButtonsOnSteps,r=void 0===t?[]:t,n=e.step,o=e.hideButtons;return r&&r.indexOf(n)>=0?{hideButtons:!0}:{hideButtons:o}})),l({onNextPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(t+1)}},onPrevPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(Math.max(t-1,0))}}}));e.exports={controlledWizard:o(i("step","setPage",0),s),wizardHandlers:s}},2283:function(e,t,r){var n=r(1),o=r(758),i=o.Row,a=o.Col;e.exports=function(e){var t=e.title,r=e.description;return n.createElement(i,null,n.createElement(a,{xs:12,className:"text-center"},n.createElement("div",{className:"mapstore-step-title"},t),n.createElement("div",{className:"mapstore-step-description"},r)))}},2284:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758),m=d.Button,y=d.Row,g=r(2103),b=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderButtons",(function(){var e=[],t=r.props,n=t.isStepValid,o=t.children,i=void 0===o?[]:o,a=i.length>=0?i.length:1;return r.props.hideButtons?null:(r.props.step>0&&e.push(p.createElement(m,{key:"prev",className:"ms-wizard-prev",onClick:function(){return r.props.onPrevPage()}},p.createElement(g,{msgId:"wizard.prev"}))),r.props.step>=a-1?e.push(p.createElement(m,{key:"finish",className:"ms-wizard-finish",onClick:function(){return r.props.onFinish()}},p.createElement(g,{msgId:"wizard.finish"}))):r.props.step<a-1&&a>1&&e.push(p.createElement(m,{key:"next",className:"ms-wizard-next",disabled:!n(r.props.step),onClick:function(){return r.props.onNextPage()}},p.createElement(g,{msgId:"wizard.next"}))),e)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.children||[],r=t.length>=0?t.length:1;return p.createElement("div",{key:"wizard-pages",className:"ms-wizard"},p.Children.map(t,(function(t,n){return n===e.props.step?p.cloneElement(t,{key:"wizard-component-".concat(n),onNextPage:e.props.step===r-1?e.props.onFinish:e.props.onNextPage,onPrevPage:e.props.onPrevPage}):null})),p.createElement(y,{key:"wizard-buttons",className:"ms-wizard-buttons"},this.renderButtons()))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(b,"propTypes",{step:f.number,hideButtons:f.bool,onNextPage:f.func,onPrevPage:f.func,buttonType:f.node,onFinish:f.func,isStepValid:f.func}),u(b,"defaultProps",{step:0,isStepValid:function(){return!0},hideButtons:!1,onNextPage:function(){},onPrevPage:function(){},onFinish:function(){}}),e.exports=b},2306:function(e,t,r){var n=r(269).updateNode,o=r(769),i=r(2498),a=r(3391),l=r(137),s=r(13),c=s.get,u=s.head;e.exports={getDescribeLayer:function(e,t,r){return function(l){return o.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?i.describeFeatureType(e,r.name).then((function(e){var o=c(e,"complexType[0].complexContent.extension.sequence.element"),i=u(o&&o.filter((function(e){return"the_geom"===e.name||0===e.type.prefix.indexOf("gml")})));return i=i&&i.type.localPart,r.geometryType=i&&i.split("PropertyType")[0],l(n(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return l(n(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&a.describeCoverage(e,r.name).then((function(e){var o=c(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),l(n(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return l(n(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),l(n(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return l(n(t.id,"id",{describeLayer:{error:e.status}}))}))}},getLayerCapabilities:function(e,t){var r=l.getCapabilitiesUrl(e);return function(i){return i(n(e.id,"id",{capabilitiesLoading:!0})),o.getCapabilities(r,t).then((function(t){var r=o.parseLayerCapabilities(t,e);i(n(e.id,"id",r?l.formatCapabitiliesOptions(r):{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i(n(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}}},2308:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(26),l=r(13),s=l.head,c=l.isArray,u=l.isString,p=l.castArray,f=l.isObject,d=l.sortBy,m=l.uniq,y=l.includes,g=r(55),b=r(80),h=r(47),v=r(137),O=r(136),E=r(774),w=r(769),S=function(e){return e&&e.replace(/\/csw$/,"/")},P=function(e){return f(e)&&e._||e},T=function(e,t){return e.filter((function(r){return E.getTileMatrixSet(t,r,e,t,null)}))},j=function(e){var t=Array.isArray(e.references)?e.references:[e.references];return s([].filter.call(t,(function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))},A={csw:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;return n&&n.records?n.records.map((function(e){var n,l,f,b=e.dc;if(b&&b.URI){var h=c(b.URI)?b.URI:b.URI&&[b.URI]||[],v=s([].filter.call(h,(function(e){return"thumbnail"===e.name})));n=v?v.value:null,l=s([].filter.call(h,(function(e){return e.protocol&&(e.protocol.match(/^OGC:WMS-(.*)-http-get-map/g)||e.protocol.match(/^OGC:WMS/g))})))}if(!l&&b&&b.references&&b.references.length){var E=Array.isArray(b.references)?b.references:[b.references];if(l=s([].filter.call(E,(function(e){return e.scheme&&(e.scheme.match(/^OGC:WMS-(.*)-http-get-map/g)||"OGC:WMS"===e.scheme)})))){var w=g.parse(l.value,!0),P=w.query&&w.query.layers||b.alternative;l=a({},l,{name:P})}}if(!l&&b&&b.references&&b.references.length){var T=Array.isArray(b.references)?b.references:[b.references];if(f=s([].filter.call(T,(function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme})))){var A=b.alternative;f=a({},f,{name:A})}}if(!n&&b&&b.references){var C=j(b);C&&(n=C.value)}var x=[];b&&b.references&&(Array.isArray(b.references)?b.references:[b.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;x.push({type:e.scheme,url:r})}));if(l&&l.name){0===l.value.indexOf("http")||a({},l,{value:(t&&t.catalogURL||"")+"/"+l.value});var D={type:l.protocol||l.scheme,url:l.value,SRS:[],params:{name:l.name}};x.push(D)}if(f&&f.name){var _={type:"arcgis",url:f.value,SRS:[],params:{name:f.name}};x.push(_)}n&&(0===n.indexOf("http")||(n=(S(t&&t.url)||"")+n));var I={boundingBox:e.boundingBox&&e.boundingBox.extent&&p(e.boundingBox.extent.join(","))};if(b&&(I=o({},I,{},d(Object.keys(b)).reduce((function(e,t){return o({},e,i({},t,m(p(b[t]))))}),{}))),b&&b.URI&&p(b.URI)&&p(b.URI).length&&(I=o({},I,{uri:["<ul>"+p(b.URI).map((function(e){return'<li><a target="_blank" href="'.concat(e.value,'">').concat(e.name,"</a></li>")})).join("")+"</ul>"]})),b&&b.subject&&p(b.subject)&&p(b.subject).length&&(I=o({},I,{subject:["<ul>"+p(b.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),x&&p(x).length?I=o({},I,{references:["<ul>"+p(x).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete I.references,b&&b.temporal){var F=b.temporal.split("; ");if(F.length){var k=F.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));k=k.length?k[0]:"W3C-DTF",I=o({},I,{temporal:["<ul>"+F.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),o=e.substr(t+1,e.length-1),i=e.length-t-1<=10;return y(["start","end"],n)&&"W3C-DTF"===k&&!i?O.getMessageById(r,"catalog.".concat(n))+new Date(o).toLocaleString():y(["start","end"],n)?O.getMessageById(r,"catalog.".concat(n))+o:""})).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}return{boundingBox:e.boundingBox,description:b&&u(b.abstract)&&b.abstract||"",identifier:b&&u(b.identifier)&&b.identifier||"",references:x,thumbnail:n,title:b&&u(b.title)&&b.title||"",tags:b&&b.tags||"",metadata:I}})):null},wms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.records?e.records.map((function(r){return{capabilities:r,credits:r.credits,boundingBox:w.getBBox(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",title:v.getLayerTitleTranslations(r)||r.Name,dimensions:(r.Dimension&&p(r.Dimension)||[]).map((function(e){return a({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&(c(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}]}})):null},wmts:function(e,t){return e&&e.records?e.records.map((function(e){var r=p(E.getGetTileURL(e)||t&&t.url);1===r.length&&(r=r[0]);var n=E.getCapabilitiesURL(e),o=p(e.TileMatrixSetLink||[]).reduce((function(t,r){var n,o=s((e.TileMatrixSet&&p(e.TileMatrixSet)||[]).filter((function(e){return e["ows:Identifier"]===r.TileMatrixSet}))),l=o&&b.getEPSGCode(o["ows:SupportedCRS"]),c=r.TileMatrixSetLimits&&(r.TileMatrixSetLimits.TileMatrixLimits||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}}))||o.TileMatrix.map((function(e){return{identifier:e["ows:Identifier"]}}));return a(t,(i(n={},o["ows:Identifier"],c),i(n,l,c),n))}),{}),l=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e);return{title:P(e["ows:Title"]||e["ows:Identifier"]),description:P(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:P(e["ows:Identifier"]),tags:"",style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,tileMatrixSet:e.TileMatrixSet,matrixIds:o,TileMatrixSetLink:p(e.TileMatrixSetLink),boundingBox:{extent:[l["ows:LowerCorner"].split(" ")[0],l["ows:LowerCorner"].split(" ")[1],l["ows:UpperCorner"].split(" ")[0],l["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:[{type:"OGC:WMTS",url:r,SRS:T(e.SRS||[],o),params:{name:e["ows:Identifier"]}}]}})):null},backgrounds:function(e){return e&&e.records?e.records.map((function(e){return{description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null}},C=function(e){return e.filter((function(e){return b.isSRSAllowed(e)})).reduce((function(e,t){return a(e,i({},t,!0))}),{})},x=function(e,t){var r=e.split("?"),n={};r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])}));return{url:r[0],params:n}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{wms:s(e.references.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:s(e.references.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)})))}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:s(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},I=function(e){var t=s(e.references.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),r=s(e.references.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),n=s(e.references.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=[];return t&&o.push({type:"WMS_GET_CAPABILITIES",url:t.url,labelId:"catalog.wmsGetCapLink"}),n&&o.push({type:"WMTS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wmtsGetCapLink"}),r&&o.push({type:"WFS_GET_CAPABILITIES",url:r.url,labelId:"catalog.wfsGetCapLink"}),o},F={buildSRSMap:C,removeParameters:x,getRecordLinks:I,extractOGCServicesReferences:D,extractEsriReferences:_,recordToLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.removeParams,i=void 0===n?[]:n,a=r.format,l=r.catalogURL,s=r.url,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e||!e.references)return null;var p,f,d=D(e),m=d.wms,y=d.wmts,g=m||y,b=function(e){return x(h.cleanDuplicatedQuestionMarks(e),["request","layer","layers","service","version"].concat(i))},v=g.url;if(v&&c(v))p=v.map((function(e){return b(e)})).map((function(e){return e.url})),f=v.map((function(e){return b(e)})).map((function(e){return e.params})).reduce((function(e,t){return o({},e,{},t)}),{});else{var O=b(v||l),E=O.url,w=O.params;p=E,f=w}var S=function(e){return c(e)&&1===e.length?e[0]:e},P=S(s||p),T=C(g.SRS);return o({type:t,requestEncoding:e.requestEncoding,style:e.style,format:a,url:P,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:g.params&&g.params.name,title:e.title||g.params&&g.params.name,matrixIds:"wmts"===t?e.matrixIds||[]:void 0,description:e.description||"",tileMatrixSet:"wmts"===t?e.tileMatrixSet||[]:void 0,credits:!h.getConfigProp("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:I(e),params:f,allowedSRS:T,catalogURL:l},u)},getCatalogRecords:function(e,t,r,n){return A[e]&&A[e](t,r,n)||null},esriToLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.references)return null;var r=_(e),n=r.esri;return o({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},t)}};e.exports=F},2317:function(e,t,r){var n=r(1),o=r(2103),i=r(2138),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?n.createElement(o,{msgId:"widgets.errors.timeoutExpired"}):n.createElement(o,{msgId:"widgets.errors.genericError"})};e.exports=i((function(e){return e.error}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.iconFit;return{glyph:"warning-sign",iconFit:r,tooltip:a(t)}}))},2319:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(407),a=i.withProps,l=i.compose;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return l(a((function(t){var r=t.disableMultiDependencySupport,i=t.stepButtons,a=void 0===i?[]:i,l=t.toggleConnection,s=void 0===l?function(){}:l,c=t.availableDependencies,u=void 0===c?[]:c,p=t.canConnect,f=t.connected,d=o(t,["disableMultiDependencySupport","stepButtons","toggleConnection","availableDependencies","canConnect","connected"]);return{stepButtons:[].concat(n(a),[{onClick:function(){return s(u)},disabled:r,visible:!!e(d)&&!!p&&u.length>0,bsStyle:f?"success":"primary",glyph:f?"plug":"unplug",tooltipId:f?"widgets.builder.wizard.clearConnection":1===u.length?"widgets.builder.wizard.connectToTheMap":"widgets.builder.wizard.connectToAMap"}])}})))}},2320:function(e,t,r){var n=r(1),o=r(758),i=o.Row,a=o.Col,l=o.Form,s=o.FormGroup,c=o.ControlLabel,u=o.FormControl,p=r(2103),f=r(2283);e.exports=function(e){var t=e.data,r=void 0===t?{}:t,o=e.onChange,d=void 0===o?function(){}:o,m=e.sampleChart;return n.createElement(i,null,n.createElement(f,{title:n.createElement(p,{msgId:"widgets.widgetOptionsTitle"})}),n.createElement(a,{key:"sample",xs:12},n.createElement("div",{style:{marginBottom:"30px"}},m)),n.createElement(a,{key:"form",xs:12},n.createElement(l,{className:"widget-options-form",horizontal:!0},n.createElement(s,{controlId:"groupByAttributes"},n.createElement(a,{componentClass:c,sm:6},n.createElement(p,{msgId:"widgets.title"})),n.createElement(a,{sm:6},n.createElement(u,{value:r.title,type:"text",onChange:function(e){return d("title",e.target.value)}}))),n.createElement(s,{controlId:"aggregationAttribute"},n.createElement(a,{componentClass:c,sm:6},n.createElement(p,{msgId:"widgets.description"})),n.createElement(a,{sm:6},n.createElement(u,{value:r.description,type:"text",onChange:function(e){return d("description",e.target.value)}}))))))}},2369:function(e,t){e.exports={OPEN_QUERY_BUILDER:"LAYER_FILTER:OPEN_QUERY_BUILDER",openQueryBuilder:function(){return{type:"LAYER_FILTER:OPEN_QUERY_BUILDER"}},INIT_LAYER_FILTER:"LAYER_FILTER:INIT_LAYER_FILTER",initLayerFilter:function(e){return{type:"LAYER_FILTER:INIT_LAYER_FILTER",filter:e}},APPLIED_FILTER:"LAYER_FILTER:APPLIED_FILTER",storeAppliedFilter:function(e){return{type:"LAYER_FILTER:APPLIED_FILTER",filter:e}},STORE_CURRENT_APPLIED_FILTER:"LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",storeCurrentFilter:function(){return{type:"LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER"}},DISCARD_CURRENT_FILTER:"LAYER_FILTER:DISCARD_CURRENT_FILTER",discardCurrentFilter:function(){return{type:"LAYER_FILTER:DISCARD_CURRENT_FILTER"}},applyFilter:function(){return{type:"LAYER_FILTER:APPLY_FILTER"}},APPLY_FILTER:"LAYER_FILTER:APPLY_FILTER"}},2370:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(2354),u=r(758).Modal,p=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&i(r.prototype,n),c&&i(r,c),t}(u),f=r(26);e.exports=f(c(p),{Body:u.Body,Dialog:u.Dialog,Footer:u.Footer,Header:u.Header,Title:u.Title})},2383:function(e,t,r){var n=r(1),o=r(758).Glyphicon,i=r(2209).default,a=r(2135)(o);e.exports=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,o=e.tooltip,l=e.tooltipId,s=e.iconFit,c=e.padding,u=void 0===c?0:c,p=e.margin,f=void 0===p?0:p;return n.createElement(i,null,(function(e){var t=e.width,i=e.height;return n.createElement(a,{glyph:r,tooltip:o,tooltipId:l,style:{display:"inline-block",padding:u+"px",margin:f+"px",textAlign:"center",fontSize:s?Math.min(t,i)-2*u-2*f:t-2*u-2*f}})}))}},2384:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13),l=a.get,s=a.find,c=a.reduce,u=a.isEmpty,p=r(2152).gridUpdateToQueryUpdate,f=r(762).composeAttributeFilters;e.exports={getDependencyLayerParams:function(e,t){return e&&e.id&&l(s(t.layers||[],{id:e.id}),"params",{})},composeFilterObject:function(e,t,r){var n=t&&r&&Object.keys(t).filter((function(e){return s(r.propertyName,(function(t){return t===e}))})).reduce((function(e,r){return o({},e,i({},r,t[r]))}),{}),a=c(n,(function(e,t,r){return p(o({attribute:r},t),e)}),{});return u(e)&&u(a)?{}:o({},e,{},f([e,a]))},getLayerInCommon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t,n=e.dependencies,o=n&&n.layer&&n.layer.name,i=!u(r)&&!u(r.layers)&&s(r.layers,{name:o})||{};return i}}},2385:function(e,t,r){var n=r(1),o=r(2103),i=r(2138);e.exports=i((function(e){var t=e.data,r=void 0===t?[]:t;return!r||0===r.length}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.iconFit;return{iconFit:r,tooltip:t?n.createElement(o,{msgId:"widgets.errors.nodatainviewport"}):n.createElement(o,{msgId:"widgets.errors.nodata"})}}))},2386:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(2245),l=a.Tooltip,s=a.Legend,c=r(2224).sameToneRangeColors,u={line:r(3734),pie:r(3735),bar:r(3736),gauge:r(3737)},p={base:190,range:0,s:.95,v:.63};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"line":t,a=e.tooltip,f=void 0===a?{}:a,d=e.legend,m=void 0===d?{}:d,y=e.autoColorOptions,g=void 0===y?p:y,b=e.colorGenerator,h=o(e,["type","tooltip","legend","autoColorOptions","colorGenerator"]),v=u[r],O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,r=t.base,n=t.range,i=o(t,["base","range"]);return(c(r,n,e+1,i)||[0]).slice(1)},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active,r=e.payload;if(t){var n=r[0].name,o=r[0].percent;return i.createElement("div",{className:"custom-tooltip"},i.createElement("p",{className:"label"},"".concat(n," : ").concat(r[0].value),i.createElement("span",{className:"desc"},"(",(100*o).toFixed(0),"%)")))}return null};return i.createElement(v,n({margin:{top:5,right:30,left:20,bottom:5},colorGenerator:b||O,autoColorOptions:g},h,{legend:m,tooltip:f}),!1!==f?"pie"===r?i.createElement(l,{content:E}):i.createElement(l,f):null,!1!==m?i.createElement(s,n({},m,{wrapperStyle:{bottom:0}})):null)}},2387:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(136),m=r(758).Tooltip,y=r(2114),g=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderInput",(function(){if(!1===r.props.column.filterable)return p.createElement("span",null);var e=d.getMessageById(r.context.messages,r.props.placeholderMsgId)||"Search",t="header-filter-"+r.props.column.key;return p.createElement("input",{disabled:r.props.disabled,key:t,type:"text",className:"form-control input-sm",placeholder:e,value:r.props.value,onChange:r.handleChange})})),u(s(r),"renderTooltip",(function(e){return r.props.tooltipMsgId&&d.getMessageById(r.context.messages,r.props.tooltipMsgId)?p.createElement(y,{placement:"top",overlay:p.createElement(m,{id:"tooltip"},d.getMessageById(r.context.messages,r.props.tooltipMsgId))},e):e})),u(s(r),"handleChange",(function(e){var t=e.target.value;r.props.onChange({value:t,attribute:r.props.column&&r.props.column.name})})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e="header-filter--"+this.props.column.key;return p.createElement("div",{key:e,className:"form-group".concat(this.props.valid?"":" has-error")},this.renderTooltip(this.renderInput()))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.PureComponent);u(g,"propTypes",{valid:f.bool,disabled:f.bool,onChange:f.func.isRequired,value:f.any,column:f.object,placeholderMsgId:f.string,tooltipMsgId:f.string}),u(g,"contextTypes",{messages:f.object}),u(g,"defaultProps",{value:"",valid:!0,onChange:function(){},column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"}),e.exports=g},2389:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(0),p=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onTemporaryChanges&&this.props.onTemporaryChanges(!0)}},{key:"componentWillUnmount",value:function(){var e=this;this.props.onTemporaryChanges&&setTimeout((function(){return e.props.onTemporaryChanges(!1)}),500)}}])&&i(r.prototype,n),c&&i(r,c),t}(r(2388).editors.SimpleTextEditor);c(p,"propTypes",{onTemporaryChanges:u.func}),c(p,"defaultProps",{onTemporaryChanges:function(){}}),e.exports=p},2392:function(e,t,r){var n=r(2143).isWidgetSelectionActive,o=r(2362),i=r(88).connect,a=r(195).createSelector,l=r(407).compose,s=r(1),c=r(2103);e.exports=l(i(a(n,(function(e){return{widgetSelectionActive:e}}))),o((function(e){return e.widgetSelectionActive}),(function(){return s.createElement("div",{style:{margin:"auto"}},s.createElement(c,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}))},2393:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=r(13).get,l=r(195).createSelector,s=r(408).layersSelector,c=r(767).currentLocaleSelector,u=r(136).getLocalizedProp,p=function(e){return a(e,"queryform.spatialField.geometry")},f=l((function(e){return a(e,"queryform.attributePanelExpanded")}),(function(e){return a(e,"queryform.spatialPanelExpanded")}),(function(e){return a(e,"queryform.crossLayerExpanded")}),(function(e,t,r){return{attributePanelExpanded:e,spatialPanelExpanded:t,crossLayerExpanded:r}}));e.exports={spatialFieldSelector:function(e){return a(e,"queryform.spatialField")},spatialFieldMethodSelector:function(e){return a(e,"queryform.spatialField.method")},spatialFieldGeomSelector:p,maxFeaturesWPSSelector:function(e){return a(e,"queryform.maxFeaturesWPS")},spatialFieldGeomTypeSelector:function(e){return p(e)&&p(e).type||"Polygon"},spatialFieldGeomProjSelector:function(e){return p(e)&&p(e).projection||"EPSG:4326"},spatialFieldGeomCoordSelector:function(e){return p(e)&&p(e).coordinates||[]},crossLayerFilterSelector:function(e){return a(e,"queryform.crossLayerFilter")},availableCrossLayerFilterLayersSelector:function(e){return(s(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group;return"wms"===t&&"background"!==r})).map((function(t){var r=t.title;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i(t,["title"]),{title:u(c(e),r)})}))},queryFormUiStateSelector:f,storedFilterSelector:function(e){return a(e,"layerFilter.persisted")},appliedFilterSelector:function(e){return a(e,"layerFilter.applied")}}},2394:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(26),m=r(136),y=r(758).Tooltip,g=r(2114),b=r(2177),h=b.DropdownList,v=b.Multiselect,O=r(2103),E=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=d({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=d({},t,{borderColor:"#FF0000"}));var r=this.props.multivalue?v:h,n=null!==this.props.valueField&&null!==this.props.textField?f.createElement(r,o({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:m.getMessageById(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):f.createElement(r,o({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:m.getMessageById(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?f.createElement(g,{placement:"bottom",overlay:f.createElement(y,{id:this.props.fieldRowId+"_tooltip"},f.createElement("strong",null,this.props.fieldException))},n):n}}])&&a(r.prototype,n),u&&a(r,u),t}(f.Component);u(E,"propTypes",{busy:p.bool,style:p.object,valueField:p.string,textField:p.string,placeholder:p.object,itemComponent:p.oneOfType([p.object,p.func]),fieldOptions:p.array,fieldName:p.string,fieldRowId:p.number,attType:p.string,fieldValue:p.oneOfType([p.number,p.string,p.array]),fieldException:p.oneOfType([p.object,p.string]),comboFilter:p.oneOfType([p.bool,p.string,p.func]),groupBy:p.oneOfType([p.string,p.func]),multivalue:p.bool,disabled:p.bool,options:p.object,onSelect:p.func,onToggle:p.func,onSearch:p.func,onUpdateField:p.func,onClick:p.func,onUpdateExceptionField:p.func}),u(E,"contextTypes",{messages:p.object}),u(E,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:f.createElement(O,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}}),e.exports=E},2395:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(274).default,m=r(758),y=m.Glyphicon,g=m.Button,b=m.Label,h=r(2868),v=r(80),O=r(2396),E=r(2555),w=r(2397),S=r(2103),P=r(13).isNumber;r(2869);var T=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getPosition",(function(){var e=r.props.mousePosition?r.props.mousePosition:[null,null],t=e.x,n=e.y,o=e.z;if(t||n){if(d.defs(r.props.mousePosition.crs)!==d.defs(r.props.crs)){var i=v.reproject([t,n],r.props.mousePosition.crs,r.props.crs);t=i.x,n=i.y}}else{var a={x:0,y:0,z:o};t=a.x,n=a.y}return"degrees"===v.getUnits(r.props.crs)?{lat:n,lng:t,z:o}:{x:t,y:n,z:o}})),u(s(r),"getTemplateComponent",(function(){return"degrees"===v.getUnits(r.props.crs)?r.props.degreesTemplate:r.props.projectedTemplate})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.mousePosition?this.getTemplateComponent():null;if(this.props.enabled){var t=this.getPosition();return f.createElement("div",{id:this.props.id,style:this.props.style},f.createElement("span",{className:"mapstore-mouse-coordinates"},this.props.showLabels?f.createElement("label",null,f.createElement(S,{msgId:"mouseCoordinates"})):null,e?f.createElement(e,{position:t}):f.createElement("h5",null,f.createElement(b,{bsSize:"lg",bsStyle:"info"},"...",f.createElement("span",null)))),this.props.copyToClipboardEnabled&&f.createElement(h,{text:JSON.stringify(t),onCopy:this.props.onCopy},f.createElement(g,{bsSize:this.props.btnSize},f.createElement(y,{glyph:this.props.glyphicon}))),this.props.showElevation?f.createElement("span",{className:"mapstore-mouse-elevation"},this.props.showLabels?f.createElement("label",null,f.createElement(S,{msgId:"mousePositionElevation"})):null,f.createElement("h5",null,this.props.elevationTemplate(t.z))):null,this.props.showCRS?this.props.crsTemplate(this.props.crs):null,this.props.editCRS?f.createElement(w,{projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,label:this.props.showLabels?f.createElement("label",null,f.createElement(S,{msgId:"mousePositionCRS"})):null,crs:this.props.crs,enabled:!0,onCRSChange:this.props.onCRSChange}):null,this.props.showToggle?this.props.toggle:null)}return this.props.showToggle?f.createElement("div",{id:this.props.id,style:this.props.style},this.props.toggle):null}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(T,"propTypes",{id:p.string,mousePosition:p.object,crs:p.string,enabled:p.bool,showCRS:p.bool,editCRS:p.bool,filterAllowedCRS:p.array,projectionDefs:p.array,additionalCRS:p.object,degreesTemplate:p.oneOfType([p.object,p.func]),projectedTemplate:p.oneOfType([p.object,p.func]),crsTemplate:p.oneOfType([p.object,p.func]),elevationTemplate:p.oneOfType([p.object,p.func]),style:p.object,copyToClipboardEnabled:p.bool,glyphicon:p.string,btnSize:p.oneOf(["large","medium","small","xsmall"]),onCopy:p.func,onCRSChange:p.func,toggle:p.object,showLabels:p.bool,showToggle:p.bool,showElevation:p.bool}),u(T,"defaultProps",{id:"mapstore-mouseposition",mousePosition:null,crs:"EPSG:4326",enabled:!0,showCRS:!1,editCRS:!1,degreesTemplate:O,projectedTemplate:E,crsTemplate:function(e){return f.createElement("span",{className:"mouseposition-crs"},e)},elevationTemplate:function(e){return P(e)?f.createElement("span",{className:"mouseposition-elevation"},e," m"):f.createElement(S,{msgId:"mousePositionNoElevation"})},style:{},copyToClipboardEnabled:!1,glyphicon:"paste",btnSize:"xsmall",onCopy:function(){},onCRSChange:function(){},toggle:f.createElement("div",null),showLabels:!1,showToggle:!1,showElevation:!1}),e.exports=T},2396:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758).Label,m=r(2210),y=r(80).roundCoord,g=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:Math.trunc(n),latM:Math.abs(o),latS:Math.abs(a),lng:Math.trunc(r),lngM:Math.abs(i),lngS:Math.abs(l)}})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.position||{},t=e.lng,r=e.lat,n=this.getPositionValues(this.props.position),o=t<0?"-":"",i=r<0?"-":"",a={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},l={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return p.createElement("h5",null,p.createElement(d,{bsSize:"lg",bsStyle:"info"},p.createElement("span",null,"Lat: ",i),p.createElement(m,{key:"latD",numberParams:a,value:Math.abs(n.lat)}),p.createElement("span",null," "),p.createElement(m,{key:"latM",numberParams:a,value:y({roundingBehaviour:"floor",value:n.latM,maximumFractionDigits:a.maximumFractionDigits})}),p.createElement("span",null,"' "),p.createElement(m,{key:"latS",numberParams:l,value:n.latS}),p.createElement("span",null,"''"),p.createElement("span",{className:"mouseposition-separator"}),p.createElement("span",null," Lng: ",o),p.createElement(m,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0},value:Math.abs(n.lng)}),p.createElement("span",null," "),p.createElement(m,{key:"lngM",numberParams:a,value:y({roundingBehaviour:"floor",value:n.lngM,maximumFractionDigits:a.maximumFractionDigits})}),p.createElement("span",null,"' "),p.createElement(m,{key:"lngS",numberParams:l,value:n.lngS}),p.createElement("span",null,"''")))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(g,"propTypes",{position:f.shape({lng:f.number,lat:f.number})}),e.exports=g},2397:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(33),d=r(0),m=r(758),y=m.FormControl,g=m.FormGroup,b=m.ControlLabel,h=r(80),v=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"launchNewCRSAction",(function(e){if(r.props.useRawInput)r.props.onCRSChange(e.target.value);else{var t=f.findDOMNode(s(r)).getElementsByTagName("select").item(0);r.props.onCRSChange(t.value)}})),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e,t,r=[],n={};for(var o in Object.keys(this.props.availableCRS).length&&(n=h.filterCRSList(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),n)n.hasOwnProperty(o)&&(e=o,t=n[o].label,r.push(p.createElement("option",{value:e,key:e},t)));return this.props.enabled&&this.props.useRawInput?p.createElement("select",{id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r):this.props.enabled&&!this.props.useRawInput?p.createElement(g,null,p.createElement(b,null,this.props.label),p.createElement(y,{componentClass:"select",id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r)):null}}])&&i(r.prototype,n),d&&i(r,d),t}(p.Component);u(v,"propTypes",{id:d.string,label:d.oneOfType([d.func,d.string,d.object]),availableCRS:d.object,filterAllowedCRS:d.array,projectionDefs:d.array,additionalCRS:d.object,crs:d.string,enabled:d.bool,onCRSChange:d.func,useRawInput:d.bool}),u(v,"defaultProps",{id:"mapstore-crsselector",availableCRS:h.getAvailableCRS(),crs:null,onCRSChange:function(){},enabled:!1,useRawInput:!1}),e.exports=v},2498:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(71),i=r(55),a=r(26),l={getFeatureSimple:function(e,t){return o.get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:a({outputFormat:"application/json"},t)}).then((function(e){return"object"!==n(e.data)?JSON.parse(e.data):e.data}))},describeFeatureType:function(e,t){var n=i.parse(e,!0),l=i.format(a({},n,{query:a({service:"WFS",version:"1.1.0",typeName:t,request:"DescribeFeatureType"},n.query)}));return new Promise((function(e){Promise.all([r.e(0),r.e(19)]).then(function(){var t=r(2891).unmarshaller;e(o.get(l).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value})))}.bind(null,r)).catch(r.oe)}))}};e.exports=l},2499:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758),m=d.FormGroup,y=d.FormControl,g=d.Glyphicon,b=d.InputGroup,h=d.OverlayTrigger,v=d.Tooltip;r(3397);var O=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onFilter",(function(e){r.props.onFilter(e.target.value)})),u(s(r),"onClear",(function(){r.props.onFilter("")})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.filterText?p.createElement(h,{placement:"bottom",overlay:p.createElement(v,{id:"mapstore-toc-filter"},this.props.tooltipClear)},p.createElement(g,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):p.createElement(g,{className:"text-primary",glyph:"filter"});return p.createElement(m,{className:"mapstore-filter"},p.createElement(b,null,p.createElement(y,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),p.createElement(b.Addon,{className:"square-button-md"},this.props.loading?p.createElement("div",{className:"toc-inline-loader"}):e)))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(O,"propTypes",{loading:f.bool,filterText:f.string,filterPlaceholder:f.oneOfType([f.object,f.string]),onFilter:f.func,onFocus:f.func,tooltipClear:f.oneOfType([f.object,f.string])}),u(O,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"}),e.exports=O},2500:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(0),p=r(1),f=r(758),d=f.Glyphicon,m=f.Tooltip,y=r(2114),g=r(2103),b=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.className?" "+this.props.className:"",r=p.createElement(d,{className:"toc-layer-tool"+t,style:this.props.style,glyph:this.props.glyph,onClick:function(){return e.props.onClick(e.props.node)}});return this.props.tooltip?p.createElement(y,{placement:"bottom",overlay:p.createElement(m,{id:"Tooltip-"+this.props.tooltip},p.createElement("strong",null,p.createElement(g,{msgId:this.props.tooltip})))},r):r}}])&&i(r.prototype,n),c&&i(r,c),t}(p.Component);c(b,"propTypes",{node:u.object,onClick:u.func,style:u.object,glyph:u.string,tooltip:u.string,className:u.string}),c(b,"defaultProps",{onClick:function(){}}),e.exports=b},2520:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13),l=a.get,s=a.head,c=a.uniqBy,u=r(408),p=u.layerSettingSelector,f=u.getSelectedLayer,d=r(2274),m=d.STYLE_ID_SEPARATOR,y=d.extractFeatureProperties,g=function(e){var t=p(e);return o({},f(e)||{},{},t&&t.options||{})},b=function(e){var t=g(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name};e.exports={temporaryIdSelector:function(e){return l(e,"styleeditor.temporaryId")},templateIdSelector:function(e){return l(e,"styleeditor.templateId")},statusStyleSelector:function(e){return l(e,"styleeditor.status")},errorStyleSelector:function(e){return l(e,"styleeditor.error")||{}},loadingStyleSelector:function(e){return l(e,"styleeditor.loading")},formatStyleSelector:function(e){return l(e,"styleeditor.format")||"css"},languageVersionStyleSelector:function(e){return l(e,"styleeditor.languageVersion")||{}},codeStyleSelector:function(e){return l(e,"styleeditor.code")},initialCodeStyleSelector:function(e){return l(e,"styleeditor.initialCode")||""},selectedStyleSelector:b,addStyleSelector:function(e){return l(e,"styleeditor.addStyle")||""},geometryTypeSelector:function(e){var t=g(e),r=y(t).geometryType;return void 0===r?"vector":r},layerPropertiesSelector:function(e){var t=g(e),r=y(t).properties;return void 0===r?{}:r},enabledStyleEditorSelector:function(e){return l(e,"styleeditor.enabled")},styleServiceSelector:function(e){return l(e,"styleeditor.service")||{}},canEditStyleSelector:function(e){return l(e,"styleeditor.canEdit")},getUpdatedLayer:g,selectedStyleFormatSelector:function(e){var t=(g(e)||{}).availableStyles,r=void 0===t?[]:t,n=b(e);return s(r.filter((function(e){return e.name===n})).map((function(e){return e.format})))},getAllStyles:function(e){var t=g(e),r=t.availableStyles||[],n=(s(r)||{}).name,i=t.style||t&&!t.style&&n;return{availableStyles:c(r.map((function(e){var t=e.title&&e.title.split(m);return o({},e,{label:t[0]||e.name})})),"name"),defaultStyle:n,enabledStyle:i}}}},2521:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=r(1);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.className,i=void 0===n?"":n,s=e.description,c=e.fullText,u=e.onClick,p=void 0===u?function(){}:u,f=e.onMouseEnter,d=void 0===f?function(){}:f,m=e.onMouseLeave,y=void 0===m?function(){}:m,g=e.preview,b=e.selected,h=e.size,v=e.style,O=void 0===v?{}:v,E=e.stylePreview,w=void 0===E?{}:E,S=e.styleTools,P=void 0===S?{}:S,T=e.title,j=e.dragSymbol,A=void 0===j?"+":j,C=e.tools,x=a(e,["body","caption","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","dragSymbol","tools"]);return l.createElement("div",{className:"mapstore-side-card".concat(b?" selected":"").concat(h?" ms-"+h:"").concat(i?" ".concat(i):"").concat(c?" full-text":""),onClick:function(){return p(o({title:T,preview:g,description:s,caption:r,tools:C},x))},onMouseEnter:d,onMouseLeave:y,style:O},l.createElement("div",{className:"ms-head"},x.isDraggable&&x.connectDragSource&&x.connectDragSource(l.createElement("div",{className:"mapstore-side-card-tool text-center"},l.createElement("div",{style:{width:10,overflow:"hidden"}},A))),g&&l.createElement("div",{className:"mapstore-side-preview",style:w},g),l.createElement("div",{className:"mapstore-side-card-info"},T&&l.createElement("div",{className:"mapstore-side-card-title"},l.createElement("span",null,T)),s&&l.createElement("div",{className:"mapstore-side-card-desc"},l.createElement("span",null,s)),r&&l.createElement("div",{className:"mapstore-side-card-caption"},l.createElement("span",null,r))),l.createElement("div",{className:"mapstore-side-card-tool text-center",style:P},C)),t&&l.createElement("div",{className:"ms-body"},t))}},2522:function(e,t,r){var n=r(13).get;e.exports={pathnameSelector:function(e){return n(e,"router.location.pathname")||"/"}}},2523:function(e,t,r){var n=function(e){return e&&e.dashboard&&e.dashboard.resource},o=(0,r(195).createSelector)(r(2522).pathnameSelector,n,(function(e,t){return t&&t.canEdit||isNaN(e.substr(-4))}));e.exports={isDashboardAvailable:function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},isShowSaveOpen:function(e){return e&&e.dashboard&&e.dashboard.showSaveModal},isShowSaveAsOpen:function(e){return e&&e.dashboard&&e.dashboard.showSaveAsModal},isDashboardEditing:function(e){return e&&e.dashboard&&e.dashboard.editing},showConnectionsSelector:function(e){return e&&e.dashboard&&e.dashboard.showConnections},dashboardResource:n,isDashboardLoading:function(e){return e&&e.dashboard&&e.dashboard.loading},getDashboardSaveErrors:function(e){return e&&e.dashboard&&e.dashboard.saveErrors},buttonCanEdit:o}},2525:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(55),l=r(13).endsWith;e.exports={getWPSURL:function(e,t){if(e){var r=a.parse(e,!0),n=r.pathname;return(l(r.pathname,"wfs")||l(r.pathname,"wms"))&&(n=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),a.format(o({},r,{search:null,pathname:n,query:o({service:"WPS"},t,{},r.query)}))}return e}}},2527:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=r(407),s=l.compose,c=l.withPropsOnChange,u=r(13),p=u.find,f=u.isEmpty,d=r(80),m=r(762),y=r(780),g=r(796),b=r(2384),h=b.getDependencyLayerParams,v=b.composeFilterObject,O=r(762).composeAttributeFilters,E=function(e,t){var r=h(e,t),n=p(Object.keys(r||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()}));return r&&n&&r[n]},w=r(795).read,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerFilter;return t};e.exports=s(c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.layer,a=e.quickFilters,l=e.options,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return t!==s.mapSync||o.viewport!==(s.dependencies&&s.dependencies.viewport)||o.quickFilters!==(s.dependencies&&s.dependencies.quickFilters)||o.options!==(s.dependencies&&s.dependencies.options)||r!==s.geomProp||c!==s.filter||l!==s.options||a!==s.quickFilters||E(i,o)!==E(s.layer,s.dependencies)||S(i)!==S(s.layer)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=void 0===r?"the_geom":r,l=e.dependencies,s=void 0===l?{}:l,c=e.filter,u=e.layer,p=e.quickFilters,b=e.options,h=s.viewport,S=y({gmlVersion:"3.1.1"}),P=g(S),T=S.filter,j=S.property,A=S.and,C=u||{},x=C.layerFilter,D={},_={},I=v(c,p,b);if(!t)return{filter:!f(I)||x?T(A.apply(void 0,a(x?m.toOGCFilterParts(x,"1.1.0","ogc"):[]).concat(a(I?m.toOGCFilterParts(I,"1.1.0","ogc"):[])))):void 0};if(s.quickFilters&&(I=o({},I,{},v(I,s.quickFilters,s.options))),s.filter&&(I=o({},I,{},O([I,s.filter]))),s.viewport){var F=Object.keys(h.bounds).reduce((function(e,t){return o({},e,i({},t,parseFloat(h.bounds[t])))}),{});D=d.getViewportGeometry(F,h.crs);var k=E(u,s);return _=k?[P(w(k))]:[],{filter:T(A.apply(void 0,a(_).concat(a(x?m.toOGCFilterParts(x,"1.1.0","ogc"):[]),a(I?m.toOGCFilterParts(I,"1.1.0","ogc"):[]),[j(n).intersects(D)])))}}return{filter:T(A.apply(void 0,a(x?m.toOGCFilterParts(x,"1.1.0","ogc"):[]).concat(a(I?m.toOGCFilterParts(I,"1.1.0","ogc"):[]))))}})))},2528:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withPropsOnChange,c=r(2384).getDependencyLayerParams,u=r(13).find;e.exports=l(s(["dependencies","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=void 0===t?{}:t,n=e.options,i=e.layer,a=void 0===i?{}:i,l=c(a,r),s=u(Object.keys(l||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"viewparams"===e.toLowerCase()})),p=l&&s&&l[s];return{options:p?o({},n,{viewParams:p}):n}})))},2529:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407).withProps,l=r(13).pick,s=function e(t,r,n){return t?Object.keys(t).reduce((function(a,s){return"dependenciesMap"===s&&r[t[s]]&&r[t.mapSync]&&r[t[s]][s]&&-1===r[t[s]][s].indexOf(n)?o({},a,{},l(e(r[t[s]],r,n),["options","layer","quickFilters","filter","dependenciesMap"])):o({},a,i({},s,r[t[s]]))}),{}):r};e.exports=a((function(e){var t=e.dependenciesMap,r=e.dependencies,n=e.id;return{dependencies:t?s(t,r,n):r,dependenciesMap:t}}))},2530:function(e,t,r){var n=r(407).withProps,o=r(3755),i=r(3756),a=r(3757),l=r(4284).default,s={defaultFilter:function(e){return n((function(){return{type:e}}))(o)},string:function(){return i},number:function(){return a},int:function(){return a},date:function(){return n((function(){return{type:"date"}}))(l)},time:function(){return n((function(){return{type:"time"}}))(l)},"date-time":function(){return n((function(){return{type:"date-time"}}))(l)}};e.exports={getFilterRenderer:function(e,t){return s[e]?s[e](e,t):s.defaultFilter(e,t)},DefaultFilter:o,StringFilter:i,NumberFilter:a,DateTimeFilter:l}},2531:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(2177).Combobox,y=r(758),g=y.Glyphicon,b=y.Tooltip,h=r(136),v=r(2114),O=r(2532),E=function(e){function t(){var e,r,n=this;i(this,t);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(u)))),"renderWithTooltip",(function(e){if(r.props.tooltip.customizedTooltip){var t=r.props.tooltip.customizedTooltip;return d.createElement(t,null,e)}var n=d.createElement(b,{id:r.props.tooltip.id},r.props.tooltip.message);return d.createElement(v,{key:r.props.tooltip.overlayTriggerKey,placement:r.props.tooltip.placement,overlay:n},e)})),p(c(r),"renderPagination",(function(){var e=r.props.pagination.firstPage,t=r.props.pagination.lastPage;return d.createElement("div",{className:"autocomplete-toolbar"},!e&&d.createElement(g,{className:r.props.prevPageIcon,glyph:r.props.prevPageIcon,onClick:function(e){r.props.stopPropagation&&e.stopPropagation(),r.props.pagination.loadPrevPage()}}),!t&&d.createElement(g,{className:r.props.nextPageIcon,glyph:r.props.nextPageIcon,onClick:function(e){r.props.stopPropagation&&e.stopPropagation(),r.props.pagination.loadNextPage()}}))})),p(c(r),"renderField",(function(){var e,t={emptyList:h.getMessageById(r.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:h.getMessageById(r.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:h.getMessageById(r.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},i=[];(r.props.data&&r.props.data.length>0&&(i=r.props.data.map((function(e){return e}))),r.props.pagination&&r.props.pagination.paginated&&i.length>0)&&i.push((p(e={},r.props.textField,""),p(e,r.props.valueField,""),p(e,"disabled",!0),p(e,"pagination",r.renderPagination()),e));var a=r.props.loading?[]:i,l=d.createElement(m,{placeholder:r.props.placeholder,dropUp:r.props.dropUp,busy:r.props.busy,data:a,disabled:r.props.disabled,itemComponent:function(e){return d.createElement(n.props.itemComponent,o({textField:r.props.textField,valueField:r.props.valueField},e))},messages:r.props.messages||t,open:r.props.open,filter:r.props.filter,onChange:function(e){return r.props.onChange(e)},onFocus:function(){return r.props.onFocus(r.props.data)},onSelect:function(e){return r.props.onSelect(e)},onToggle:function(e){return r.props.onToggle(e)},textField:r.props.textField,valueField:r.props.valueField,value:r.props.selectedValue});return r.props.tooltip&&r.props.tooltip.enabled?r.renderWithTooltip(l):l})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.selectedValue,r=e.disabled,n=e.onReset,o=e.label,i=e.clearable,a=o?d.createElement("label",null,o):d.createElement("span",null);return d.createElement("div",{className:"autocompleteField"},a,i?d.createElement("div",{className:"rw-combo-clearable ".concat(r?"disabled":"")},this.renderField(),d.createElement("span",{className:"rw-combo-clear ".concat(t?"":"hidden"),onClick:n},"x")):this.renderField())}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(E,"propTypes",{busy:f.bool,data:f.array,disabled:f.bool,dropUp:f.bool,itemComponent:f.oneOfType([f.object,f.func]),label:f.string,loading:f.bool,filter:f.oneOfType([f.string,f.bool]),messages:f.object,onChange:f.func,onFocus:f.func,onSelect:f.func,onToggle:f.func,open:f.bool,pagination:f.object,nextPageIcon:f.string,prevPageIcon:f.string,selectedValue:f.string,textField:f.string,tooltip:f.object,valueField:f.string,placeholder:f.string,stopPropagation:f.bool,clearable:f.bool,onReset:f.func}),p(E,"contextTypes",{messages:f.object}),p(E,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:O,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1}),e.exports=E},2532:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,f=r(1),d=r(0),m=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.item;return e.pagination?f.createElement("span",null,e[this.props.textField]," ",e.pagination," "):f.createElement("span",null,e[this.props.textField])}}])&&i(r.prototype,n),c&&i(r,c),t}(f.Component);c=m,u="propTypes",p={item:d.object,textField:d.string,valueField:d.string},u in c?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p,e.exports=m},2546:function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=r(1),i=r(2161),a=r(2138),l=r(2277),s=r(407),c=s.compose,u=s.defaultProps,p=r(13).get,f=r(15).Observable,d=r(2240).describeFeatureType,m=r(2851).describeProcess,y=r(2241),g=y.Message,b=y.HTML,h=r(765).findGeometryProperty;e.exports=c(u({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onEditorChange,o=void 0===r?function(){}:r,i=t.onConfigurationError,a=void 0===i?function(){}:i;return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return r.name===o.name})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return f.forkJoin(d({layer:t}),m(t.url,"gs:Aggregate")).do((function(e){var t=n(e,1)[0],r=p(h(t.data||{}),"name");r&&o("geomProp",r)})).map((function(e){var t=n(e,1)[0];return p(t,"data.featureTypes[0].properties")||[]})).map((function(e){return{loading:!1,types:"ALL",featureTypeProperties:e}}))})).catch((function(e){return a(e),f.of({errorObj:e,loading:!1,featureTypeProperties:[]})})).startWith({loading:!0})}}),l,i(),a((function(e){var t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.types,o=void 0===n?[]:n;return 0===r.length||0===o.length}),(function(){return{title:o.createElement(g,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),description:o.createElement(b,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}})))},2547:function(e,t,r){var n=r(88).connect,o=r(407),i=o.compose,a=o.defaultProps,l=o.withProps,s=o.setDisplayName,c=r(2852),u=r(2120).onEditorChange,p=r(3874);e.exports=i(s("ChartLayerSelector"),n((function(){return{}}),{onLayerChoice:function(e){return u("layer",e)},onResetChange:u}),a({layerValidationStream:function(e){return e.switchMap((function(e){return p(e)}))}}),l((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("options",void 0),r("widgetType",void 0)}}]}})),c)},2548:function(e,t,r){var n=r(407),o=n.withProps,i=n.compose,a=r(2549),l=function(e,t,r){return"table"===t&&0===e.filter((function(e){return Object.keys(e).filter((function(t){return e[t]&&-1!==e[t].indexOf(r.id)})).length>0})).length};e.exports=i(o((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.widgets,o=(void 0===n?[]:n).filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap}));return{canConnect:r.geomProp&&"table"!==r.widgetType||l(o,r.widgetType,r),connected:r.mapSync}})),a({viewport:"viewport",layers:"layers",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"}))},2549:function(e,t,r){var n=r(407).withHandlers;e.exports=function(e){return n({toggleConnection:function(t){var r=t.toggleConnection,n=void 0===r?function(){}:r,o=t.editorData,i=void 0===o?{}:o;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(!i.mapSync,t,{dependenciesMap:i.dependenciesMap,mappings:e,sourceWidgetType:i.widgetType})}}})}},2550:function(e,t,r){var n=r(1),o=r(2138),i=r(2103);e.exports=function(e){return o(e,{title:n.createElement(i,{msgId:"widgets.builder.errors.noAttributesTitle"}),description:n.createElement(i,{msgId:"widgets.builder.errors.noAttributesDescription"}),glyph:"warning-sign"})}},2551:function(e,t,r){var n=r(1),o=r(88).connect,i=r(195).createSelector,a=r(2119),l=r(2193).selectedCatalogSelector,s=r(3883),c=r(2195),u=r(2265),p=r(2241),f=p.Message,d=p.HTML,m=r(407),y=(0,m.compose)((0,m.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),o(i(l,(function(e){return{catalog:e}})))))(r(2856));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,o=e.setSelected,i=void 0===o?function(){}:o,l=e.onLayerChoice,p=void 0===l?function(){}:l,m=e.stepButtons,g=e.selected,b=e.error,h=e.canProceed,v=e.layer,O=e.catalog,E=e.catalogServices;return n.createElement(a,{className:"bg-body layer-selector",header:n.createElement(c,{onClose:r},n.createElement(s,{stepButtons:m,canProceed:h,onProceed:function(){return p(v)}}),g&&!h&&b?n.createElement(u,{trigger:!1,glyph:"warning-sign",bsStyle:"warning",title:n.createElement(f,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:n.createElement(d,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},n.createElement(y,{services:E,selected:g,catalog:O,onRecordSelected:function(e){return i(e)}}))}},2552:function(e,t,r){var n=r(407),o=n.branch,i=n.withState;e.exports=function(e,t,r){return o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e[t]}),i(e,t,r))}},2555:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,f=r(0),d=r(1),m=r(758).Label,y=r(2210),g=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return d.createElement("h5",null,d.createElement(m,{bsSize:"lg",bsStyle:"info"},d.createElement("span",null,"X: "),d.createElement(y,{key:"x",numberParams:e,value:this.props.position.x}),d.createElement("span",{className:"mouseposition-separator"}),d.createElement("span",null," Y: "),d.createElement(y,{key:"y",numberParams:e,value:this.props.position.y})))}}])&&i(r.prototype,n),c&&i(r,c),t}(d.Component);c=g,u="propTypes",p={position:f.shape({x:f.number,y:f.number})},u in c?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p,e.exports=g},2556:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758).Label,m=r(2210),y=r(13).isNil,g=r(80).roundCoord,b=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60;return{lat:n,latM:Math.abs(o),lng:r,lngM:Math.abs(i)}})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:3,minimumFractionDigits:3},n={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return p.createElement("h5",null,p.createElement(d,{bsSize:"lg",bsStyle:"info"},p.createElement("span",null,"Lat: "),p.createElement(m,{key:"latD",numberParams:t,value:y(e.lat)?e.lat:g({roundingBehaviour:"floor",value:e.lat,maximumFractionDigits:t.maximumFractionDigits})}),p.createElement("span",null," "),p.createElement(m,{key:"latM",numberParams:r,value:e.latM}),p.createElement("span",null,"' "),p.createElement("span",null,"Lng: "),p.createElement(m,{key:"lngD",numberParams:n,value:y(e.lng)?e.lng:g({roundingBehaviour:"floor",value:e.lng,maximumFractionDigits:n.maximumFractionDigits})}),p.createElement("span",null," "),p.createElement(m,{key:"lngM",numberParams:r,value:e.lngM}),p.createElement("span",null,"' ")))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(b,"propTypes",{position:f.shape({lng:f.number,lat:f.number})}),e.exports=b},2557:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758).Label,m=r(2210),y=r(80).roundCoord,g=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:n,latM:Math.abs(o),latS:Math.abs(a),lng:r,lngM:Math.abs(i),lngS:Math.abs(l)}})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2},n={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return p.createElement("h5",null,p.createElement(d,{bsSize:"lg",bsStyle:"info"},p.createElement(m,{key:"latD",numberParams:t,value:y({roundingBehaviour:"floor",value:Math.abs(e.lat),maximumFractionDigits:t.maximumFractionDigits})}),p.createElement("span",null," "),p.createElement(m,{key:"latM",numberParams:t,value:y({roundingBehaviour:"floor",value:e.latM,maximumFractionDigits:t.maximumFractionDigits})}),p.createElement("span",null,"' "),p.createElement(m,{key:"latS",numberParams:r,value:e.latS}),p.createElement("span",null,"'' ",e.lat>0?"N":"S"," "),p.createElement(m,{key:"lngD",numberParams:n,value:y({roundingBehaviour:"floor",value:Math.abs(e.lng),maximumFractionDigits:n.maximumFractionDigits})}),p.createElement("span",null," "),p.createElement(m,{key:"lngM",numberParams:t,value:y({roundingBehaviour:"floor",value:e.lngM,maximumFractionDigits:t.maximumFractionDigits})}),p.createElement("span",null,"' "),p.createElement(m,{key:"lngS",numberParams:r,value:e.lngS}),p.createElement("span",null,"'' ",e.lng>0?"E":"W")))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(g,"propTypes",{position:f.shape({lng:f.number,lat:f.number})}),e.exports=g},2560:function(e,t,r){"use strict";r.r(t),r.d(t,"SEARCH_LAYER_WITH_FILTER",(function(){return o})),r.d(t,"TEXT_SEARCH_STARTED",(function(){return i})),r.d(t,"TEXT_SEARCH_RESULTS_LOADED",(function(){return a})),r.d(t,"TEXT_SEARCH_PERFORMED",(function(){return l})),r.d(t,"TEXT_SEARCH_RESULTS_PURGE",(function(){return s})),r.d(t,"TEXT_SEARCH_RESET",(function(){return c})),r.d(t,"TEXT_SEARCH_ADD_MARKER",(function(){return u})),r.d(t,"TEXT_SEARCH_TEXT_CHANGE",(function(){return p})),r.d(t,"TEXT_SEARCH_LOADING",(function(){return f})),r.d(t,"TEXT_SEARCH_NESTED_SERVICES_SELECTED",(function(){return d})),r.d(t,"TEXT_SEARCH_ERROR",(function(){return m})),r.d(t,"TEXT_SEARCH_CANCEL_ITEM",(function(){return y})),r.d(t,"TEXT_SEARCH_ITEM_SELECTED",(function(){return g})),r.d(t,"TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",(function(){return b})),r.d(t,"UPDATE_RESULTS_STYLE",(function(){return h})),r.d(t,"CHANGE_SEARCH_TOOL",(function(){return v})),r.d(t,"ZOOM_ADD_POINT",(function(){return O})),r.d(t,"CHANGE_FORMAT",(function(){return E})),r.d(t,"CHANGE_COORD",(function(){return w})),r.d(t,"changeFormat",(function(){return S})),r.d(t,"searchLayerWithFilter",(function(){return P})),r.d(t,"zoomAndAddPoint",(function(){return T})),r.d(t,"changeActiveSearchTool",(function(){return j})),r.d(t,"searchResultLoaded",(function(){return A})),r.d(t,"searchTextChanged",(function(){return C})),r.d(t,"searchTextLoading",(function(){return x})),r.d(t,"searchResultError",(function(){return D})),r.d(t,"resultsPurge",(function(){return _})),r.d(t,"resetSearch",(function(){return I})),r.d(t,"addMarker",(function(){return F})),r.d(t,"textSearch",(function(){return k})),r.d(t,"selectSearchItem",(function(){return L})),r.d(t,"selectNestedService",(function(){return R})),r.d(t,"cancelSelectedItem",(function(){return N})),r.d(t,"setHighlightedFeature",(function(){return M})),r.d(t,"updateResultsStyle",(function(){return B})),r.d(t,"changeCoord",(function(){return G})),r.d(t,"nonQueriableLayerError",(function(){return U})),r.d(t,"serverError",(function(){return W}));var n=r(161),o="SEARCH:SEARCH_WITH_FILTER",i="TEXT_SEARCH_STARTED",a="TEXT_SEARCH_RESULTS_LOADED",l="TEXT_SEARCH_PERFORMED",s="TEXT_SEARCH_RESULTS_PURGE",c="TEXT_SEARCH_RESET",u="TEXT_SEARCH_ADD_MARKER",p="TEXT_SEARCH_TEXT_CHANGE",f="TEXT_SEARCH_LOADING",d="TEXT_SEARCH_NESTED_SERVICE_SELECTED",m="TEXT_SEARCH_ERROR",y="TEXT_SEARCH_CANCEL_ITEM",g="TEXT_SEARCH_ITEM_SELECTED",b="TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE",h="UPDATE_RESULTS_STYLE",v="CHANGE_SEARCH_TOOL",O="SEARCH:ZOOM_ADD_POINT",E="SEARCH:CHANGE_FORMAT",w="SEARCH:CHANGE_COORD";function S(e){return{type:E,format:e}}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=e.cql_filter;return{type:o,layer:t,cql_filter:r}}function T(e,t,r){return{type:O,pos:e,zoom:t,crs:r}}function j(e){return{type:v,activeSearchTool:e}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;return{type:a,results:e,append:t,services:r}}function C(e){return{type:p,searchText:e}}function x(e){return{type:f,loading:e}}function D(e){return{type:m,error:e}}function _(){return{type:s}}function I(){return{type:c}}function F(e,t){return{type:u,markerPosition:e,markerLabel:t}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.services,n=void 0===r?null:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return{type:i,searchText:e,services:n,maxResults:o}}function L(e,t,r){return{type:g,item:e,mapConfig:t,resultsStyle:r}}function R(e,t,r){return{type:d,searchText:r,services:e,items:t}}function N(e){return{type:y,item:e}}function M(e){return{type:b,highlightedFeature:e}}function B(e){return{type:h,style:e}}function G(e,t){return{type:w,coord:e,val:t}}function U(){return Object(n.error)({title:"Error",position:"tc",message:"search.errors.nonQueriableLayers",autoDismiss:10})}function W(){return Object(n.error)({title:"Error",position:"tc",message:"search.errors.serverError",autoDismiss:10})}},2735:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(3393);r(3394);var d=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=[],r=this.props.nodes.filter(this.props.filter);if(this.props.children){var n=0;t=r.map((function(t){return u.cloneElement(e.props.children,{node:t,parentNodeId:"root",onSort:e.props.onSort,onError:e.props.onError,sortIndex:t.hide||t.dummy?n:n++,key:t.name||t.id||"default",isDraggable:!(!e.props.onSort||t.nodes&&"Default"===t.name),setDndState:e.props.setDndState})}))}return this.props.onSort,u.createElement("div",{id:this.props.id,className:"mapstore-layers-container"},t)}}])&&i(r.prototype,n),c&&i(r,c),t}(u.Component);c(d,"propTypes",{filter:p.func,nodes:p.array,id:p.string,onSort:p.func,onError:p.func,setDndState:p.func}),c(d,"defaultProps",{filter:function(){return!0},nodes:[],id:"mapstore-layers",onSort:null,setDndState:function(){}}),e.exports=f(d)},2736:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(758).Button,y=r(2370),g=r(2145),b=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(o)))),"onConfirm",(function(){r.props.onConfirm()})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=d.createElement("span",{role:"footer"},d.createElement("div",{style:{float:"left"}}),d.createElement(m,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?d.createElement(g,{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?d.createElement(m,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):d.createElement("span",null)),r=this.props.body;return d.createElement(y,o({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),d.createElement(y.Header,{key:"dialogHeader",closeButton:!0},d.createElement(y.Title,null,this.props.titleText)),d.createElement(y.Body,null,r),d.createElement(y.Footer,null,t))}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(b,"propTypes",{className:f.string,show:f.bool,options:f.object,onConfirm:f.func,onClose:f.func,closeGlyph:f.string,style:f.object,buttonSize:f.string,includeCloseButton:f.bool,body:f.oneOfType([f.string,f.element]),titleText:f.oneOfType([f.string,f.element]),confirmText:f.oneOfType([f.string,f.element]),cancelText:f.oneOfType([f.string,f.element]),running:f.bool}),p(b,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"}),e.exports=b},2737:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(2738),y=r(0),g=r(2739),b=r(3406),h=r(3408),v=r(2740),O=r(2500),E=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"renderVisibility",(function(e){return r.props.groupVisibilityCheckbox&&!e?d.createElement(v,{node:r.props.node,key:"visibility",tooltip:"toc.toggleGroupVisibility",checkType:r.props.visibilityCheckType,propertiesChangeHandler:r.props.propertiesChangeHandler}):d.createElement(O,{key:"loadingerror",glyph:"exclamation-mark text-danger",tooltip:"toc.loadingerror",className:"toc-error"})})),r}var r,n,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=(t.children,t.onToggle,t.connectDragPreview),n=t.connectDragSource,a=t.connectDropTarget,l=i(t,["children","onToggle","connectDragPreview","connectDragSource","connectDropTarget"]),s=this.props.selectedNodes.filter((function(t){return t===e.props.node.id})).length>0?" selected":"",c=this.props.node.loadingError?" group-error":"",u=l.isDraggable?d.createElement(O,{key:"grabTool",tooltip:"toc.grabGroupIcon",className:"toc-grab",ref:"target",glyph:"menu-hamburger"}):d.createElement("span",{className:"toc-layer-tool toc-grab"}),p=d.createElement("div",{className:"toc-default-group-head"},u,this.renderVisibility(c),d.createElement(b,{tooltipOptions:this.props.tooltipOptions,tooltip:this.props.titleTooltip,node:this.props.node,currentLocale:this.props.currentLocale,onClick:this.props.onToggle,onSelect:this.props.onSelect})),f=d.createElement(h,{level:this.props.level+1,onSort:this.props.onSort,onError:this.props.onError,setDndState:this.props.setDndState,position:"collapsible"},this.props.children);return this.props.node.showComponent&&!this.props.node.hide?d.createElement(m,o({className:(this.props.isDragging||this.props.node.placeholder?"is-placeholder ":"")+"toc-default-group toc-group-"+this.props.level+s+c,sortableStyle:this.props.sortableStyle,style:this.props.style,type:"group"},l),r(a(this.props.isDraggable?n(p):p)),this.props.isDragging||this.props.node.placeholder?null:f):null}}])&&l(r.prototype,n),y&&l(r,y),t}(d.Component);f(E,"propTypes",{node:y.object,style:y.object,sortableStyle:y.object,onToggle:y.func,level:y.number,onSort:y.func,onError:y.func,propertiesChangeHandler:y.func,groupVisibilityCheckbox:y.bool,visibilityCheckType:y.string,currentLocale:y.string,selectedNodes:y.array,onSelect:y.func,titleTooltip:y.bool,tooltipOptions:y.object,setDndState:y.func,connectDragSource:y.func,connectDragPreview:y.func,connectDropTarget:y.func,isDraggable:y.bool,isDragging:y.bool,isOver:y.bool}),f(E,"defaultProps",{node:{},onToggle:function(){},style:{marginBottom:"16px",cursor:"pointer"},sortableStyle:{},propertiesChangeHandler:function(){},groupVisibilityCheckbox:!1,visibilityCheckType:"glyph",level:1,currentLocale:"en-US",joinStr:" - ",selectedNodes:[],onSelect:function(){},titleTooltip:!1,connectDragPreview:function(e){return e},connectDragSource:function(e){return e},connectDropTarget:function(e){return e},isDraggable:!1,isDragging:!1,isOver:!1}),e.exports=g("LayerOrGroup",E)},2738:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(0),i=r(1),a=r(2110),l=r(26),s=r(2678).CSSTransitionGroup,c=a({displayName:"Node",propTypes:{node:o.object,style:o.object,styler:o.func,className:o.string,type:o.string,onSort:o.func,isDraggable:o.bool,animateCollapse:o.bool},getDefaultProps:function(){return{node:null,style:{},styler:function(){},className:"",type:"node",onSort:null,animateCollapse:!0}},renderChildren:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return i.Children.map(this.props.children,(function(r){if(t(r)){var o=(r.type.inheritedPropTypes||["node"]).reduce((function(t,r){return e.props[r]?l(t,n({},r,e.props[r])):t}),{});return i.cloneElement(r,o)}return null}))},render:function(){var e=void 0===this.props.node.expanded||this.props.node.expanded,t=this.props.type,r=l({},this.props.style,this.props.styler(this.props.node)),n=e&&"Error"!==this.props.node.loadingError?this.renderChildren((function(e){return e&&"collapsible"===e.props.position})):[];return this.props.animateCollapse&&(n=i.createElement(s,{transitionName:"TOC-Node",transitionEnterTimeout:250,transitionLeaveTimeout:250},n)),i.createElement("div",{key:this.props.node.name,className:(e?t+"-expanded":t+"-collapsed")+" "+this.props.className,style:this.props.node.dummy?{padding:0}:r},this.renderChildren((function(e){return e&&"collapsible"!==e.props.position})),n)}});e.exports=c},2739:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(33),a=r(782),l=a.DragSource,s=a.DropTarget,c=r(407),u=c.compose,p=c.branch,f={beginDrag:function(e){return e.setDndState&&e.setDndState({node:e.node,parentNodeId:e.parentNodeId,newParentNodeId:e.parentNodeId,sortIndex:e.sortIndex}),{node:e.node,parentNodeId:e.parentNodeId,newParentNodeId:e.parentNodeId,sortIndex:e.sortIndex}},endDrag:function(e,t){var r=t.getItem(),i=r.sortIndex,a=r.newParentNodeId,l=r.illegalDrop;e.setDndState&&e.setDndState({node:null,illegalDrop:null}),l?e.onError&&e.onError(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:"notification.warning",autoDismiss:5,position:"tc"},l)):e.onSort&&e.onSort(e.node.id,a,i)}},d=function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging(),draggedItem:t.getItem()}},m={hover:function(e,t,r){var n=t.getItem(),o=n.sortIndex,a=e.sortIndex;if(t.isOver({shallow:!0})){var l=i.findDOMNode(r),s=l.getElementsByClassName("toc-default-group-head")[0],c=s||l;if(c){var u=c.getBoundingClientRect(),p=t.getClientOffset().y-u.top;if(s){var f=(u.bottom-u.top)/3;if(e.isDragging||e.node&&e.node.placeholder)return;if(n.newParentNodeId===e.parentNodeId&&o<a&&p<f)return;if(n.newParentNodeId===e.parentNodeId&&o>a&&p>2*f)return;p<f?(n.sortIndex=e.sortIndex,n.newParentNodeId=e.parentNodeId,"Default"===e.node.name&&(n.illegalDrop={message:"toc.error.defaultGroupOnTop",values:{groupTitle:e.node.title}})):(n.sortIndex=0,n.newParentNodeId=e.node.id,n.illegalDrop=null)}else{var d=(u.bottom-u.top)/2;if(o===a&&n.newParentNodeId===e.parentNodeId)return;if(n.newParentNodeId===e.parentNodeId&&o<a&&p<d)return;if(n.newParentNodeId===e.parentNodeId&&o>a&&p>d)return;n.sortIndex=e.sortIndex,n.newParentNodeId=e.parentNodeId,n.illegalDrop=null}e.setDndState&&e.setDndState(n)}}}},y=function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}};e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isDraggable;return t}),u(l(e,f,d),s(e,m,y)),u(s(e,m,y))).apply(void 0,r)}},2740:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(13).isFunction,m=r(2500),y=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"changeVisibility",(function(){r.props.propertiesChangeHandler(r.props.node.id,{visibility:!r.props.node.visibility})})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return"glyph"===this.props.checkType?p.createElement(m,{tooltip:this.props.tooltip,style:this.props.style,className:"visibility-check"+(this.props.node.visibility?" checked":""),"data-position":this.props.node.storeIndex,glyph:this.props.node.visibility?this.props.glyphChecked:this.props.glyphUnchecked,onClick:this.changeVisibility}):p.createElement("input",{className:"visibility-check",style:this.props.style,"data-position":this.props.node.storeIndex,type:d(this.props.checkType)?this.props.checkType(this.props.node):this.props.checkType,checked:this.props.node.visibility?"checked":"",onChange:this.changeVisibility})}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(y,"propTypes",{node:f.object,tooltip:f.string,propertiesChangeHandler:f.func,style:f.object,checkType:f.oneOfType([f.string,f.func]),glyphChecked:f.string,glyphUnchecked:f.string}),u(y,"defaultProps",{style:{},checkType:"glyph",glyphChecked:"eye-open",tooltip:"toc.toggleLayerVisibility",glyphUnchecked:"eye-close"}),e.exports=y},2741:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(0),y=r(2738),g=r(13),b=g.isObject,h=g.castArray,v=g.find,O=r(758),E=O.Grid,w=O.Row,S=O.Col,P=O.Glyphicon,T=r(2739),j=r(2740),A=r(3411),C=r(2742),x=r(2500),D=r(3415),_=r(3417),I=r(3418),F=r(2214)("tooltip")(I(P)),k=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"getTitle",(function(e){return(b(e.title)?e.title[r.props.currentLocale]||e.title.default:e.title)||e.name})),f(u(r),"renderOpacitySlider",(function(e){return r.props.activateOpacityTool?d.createElement(D,{opacity:r.props.node.opacity,disabled:!r.props.node.visibility,hideTooltip:e,onChange:function(e){return r.props.onUpdateNode(r.props.node.id,"layers",{opacity:e})}}):null})),f(u(r),"renderCollapsible",(function(){return d.createElement("div",{key:"legend",position:"collapsible",className:"collapsible-toc"},d.createElement(E,{fluid:!0},r.props.showFullTitleOnExpand?d.createElement(w,null,d.createElement(S,{xs:12,className:"toc-full-title"},r.getTitle(r.props.node))):null,r.props.activateLegendTool?d.createElement(w,null,d.createElement(S,{xs:12},d.createElement(C,i({node:r.props.node,currentZoomLvl:r.props.currentZoomLvl,scales:r.props.scales},r.props.legendOptions)))):null),r.renderOpacitySlider(r.props.hideOpacityTooltip))})),f(u(r),"renderVisibility",(function(){return"Error"===r.props.node.loadingError?d.createElement(x,{key:"loadingerror",glyph:"exclamation-mark text-danger",tooltip:"toc.loadingerror",className:"toc-error"}):d.createElement(j,{key:"visibilitycheck",tooltip:"Warning"===r.props.node.loadingError?"toc.toggleLayerVisibilityWarning":"toc.toggleLayerVisibility",node:r.props.node,checkType:r.props.visibilityCheckType,propertiesChangeHandler:r.props.propertiesChangeHandler})})),f(u(r),"renderToolsLegend",(function(e){return"Error"===r.props.node.loadingError||e?null:d.createElement(x,{node:r.props.node,tooltip:"toc.displayLegendAndTools",key:"toollegend",className:"toc-legend",ref:"target",glyph:"chevron-left",onClick:function(e){return r.props.onToggle(e.id,e.expanded)}})})),f(u(r),"renderIndicators",(function(){return h(r.props.indicators).map((function(e){return"dimension"===e.type&&v(r.props.node&&r.props.node.dimensions||[],e.condition)?e.glyph&&d.createElement(F,i({key:e.key,glyph:e.glyph},e.props)):null}))})),f(u(r),"renderNode",(function(e,t,n,o,a,l,s){var c="wms"===r.props.node.type&&!r.props.activateLegendTool&&!r.props.showFullTitleOnExpand||"wms"!==r.props.node.type&&!r.props.showFullTitleOnExpand,u=l?d.createElement("div",{style:{padding:0,height:10},className:"toc-default-layer-head"}):d.createElement("div",{className:"toc-default-layer-head"},e,r.renderVisibility(),d.createElement(_,{node:r.props.node,propertiesChangeHandler:r.props.propertiesChangeHandler}),d.createElement(A,{tooltipOptions:r.props.tooltipOptions,tooltip:r.props.titleTooltip,filterText:r.props.filterText,node:r.props.node,currentLocale:r.props.currentLocale,onClick:r.props.onSelect,onContextMenu:r.props.onContextMenu}),r.props.node.loading?d.createElement("div",{className:"toc-inline-loader"}):r.renderToolsLegend(c),r.props.indicators?r.renderIndicators():null);return d.createElement(y,i({className:(r.props.isDragging||r.props.node.placeholder?"is-placeholder ":"")+"toc-default-layer"+t+n+o+a,style:r.props.style,type:"layer"},s),s.isDraggable&&!l?r.props.connectDragPreview(u):u,l||!r.props.activateOpacityTool||r.props.node.expanded||!r.props.node.visibility||"Error"===r.props.node.loadingError?null:r.renderOpacitySlider(r.props.hideOpacityTooltip),l||c?null:r.renderCollapsible())})),f(u(r),"filterLayers",(function(e){return-1!==((b(e.title)?e.title[r.props.currentLocale]||e.title.default:e.title)||e.name).toLowerCase().indexOf(r.props.filterText.toLowerCase())})),r}var r,n,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=(t.children,t.propertiesChangeHandler,t.onToggle,t.connectDragSource),n=t.connectDropTarget,i=o(t,["children","propertiesChangeHandler","onToggle","connectDragSource","connectDropTarget"]),a=!this.props.node.visibility||this.props.node.invalid?" visibility":"",l=this.props.selectedNodes.filter((function(t){return t===e.props.node.id})).length>0?" selected":"",s="Error"===this.props.node.loadingError?" layer-error":"",c="Warning"===this.props.node.loadingError?" layer-warning":"",u=i.isDraggable?d.createElement(x,{key:"grabTool",tooltip:"toc.grabLayerIcon",className:"toc-grab",ref:"target",glyph:"menu-hamburger"}):d.createElement("span",{className:"toc-layer-tool toc-grab"}),p=!!this.props.node.dummy,f=!p&&this.filterLayers(this.props.node)?this.renderNode(u,a,l,s,c,p,i):null,m=d.createElement("div",{style:p?{opacity:0,boxShadow:"none"}:{},className:"toc-list-item"},!this.props.filterText||this.props.filterText&&p?this.renderNode(u,a,l,s,c,p,i):f);return!1!==i.node.showComponent&&!i.node.hide&&this.props.filter(this.props.node)?n(i.isDraggable&&!p?r(m):m):null}}])&&l(r.prototype,n),m&&l(r,m),t}(d.Component);f(k,"propTypes",{node:m.object,propertiesChangeHandler:m.func,onToggle:m.func,onContextMenu:m.func,onSelect:m.func,style:m.object,sortableStyle:m.object,activateLegendTool:m.bool,activateOpacityTool:m.bool,indicators:m.array,visibilityCheckType:m.string,currentZoomLvl:m.number,scales:m.array,additionalTools:m.array,legendOptions:m.object,currentLocale:m.string,selectedNodes:m.array,filterText:m.string,onUpdateNode:m.func,titleTooltip:m.bool,filter:m.func,showFullTitleOnExpand:m.bool,hideOpacityTooltip:m.bool,tooltipOptions:m.object,connectDragPreview:m.func,connectDragSource:m.func,connectDropTarget:m.func,isDraggable:m.bool,isDragging:m.bool,isOver:m.bool}),f(k,"defaultProps",{style:{},sortableStyle:{},propertiesChangeHandler:function(){},onToggle:function(){},onContextMenu:function(){},onSelect:function(){},activateLegendTool:!1,activateOpacityTool:!0,indicators:[],visibilityCheckType:"glyph",additionalTools:[],currentLocale:"en-US",joinStr:" - ",selectedNodes:[],filterText:"",onUpdateNode:function(){},filter:function(){return!0},titleTooltip:!1,showFullTitleOnExpand:!1,hideOpacityTooltip:!1,connectDragPreview:function(e){return e},connectDragSource:function(e){return e},connectDropTarget:function(e){return e}}),e.exports=T("LayerOrGroup",k)},2742:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(3414),m=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"canShow",(function(e){return e.visibility||!r.props.showOnlyIfVisible})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.node||{};return this.canShow(e)&&"wms"===e.type&&"background"!==e.group?p.createElement("div",{style:this.props.legendContainerStyle},p.createElement(d,{style:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales})):null}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(m,"propTypes",{node:f.object,legendContainerStyle:f.object,legendStyle:f.object,showOnlyIfVisible:f.bool,currentZoomLvl:f.number,scales:f.array}),u(m,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1}),e.exports=m},2743:function(e,t,r){var n=r(13).isEqual,o=r(407).shouldUpdate;e.exports=o((function(e,t){return!n(e.start,t.start)||e.disabled!==t.disabled}))(r(2307))},2744:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(0),m=r(1),y=function(e){function t(){return l(this,t),c(this,u(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,r=e.groupElement,n=e.layerElement,o=e.node,l=a(e,["groupElement","layerElement","node"]);return o.nodes?m.cloneElement(r,i({node:o},l),m.createElement(t,{groupElement:r,layerElement:n})):m.cloneElement(n,i({node:o},l))}}])&&s(r.prototype,n),o&&s(r,o),t}(m.Component);f(y,"propTypes",{node:d.object,groupElement:d.element.isRequired,layerElement:d.element.isRequired}),e.exports=y},2745:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(2175),u=c.ADD_FILTER_FIELD,p=c.REMOVE_FILTER_FIELD,f=c.UPDATE_FILTER_FIELD,d=c.UPDATE_EXCEPTION_FIELD,m=c.ADD_GROUP_FIELD,y=c.UPDATE_LOGIC_COMBO,g=c.REMOVE_GROUP_FIELD,b=c.CHANGE_CASCADING_VALUE,h=c.EXPAND_ATTRIBUTE_PANEL,v=c.EXPAND_SPATIAL_PANEL,O=c.EXPAND_CROSS_LAYER,E=c.SET_CROSS_LAYER_PARAMETER,w=c.SELECT_SPATIAL_METHOD,S=c.SELECT_SPATIAL_OPERATION,P=c.CHANGE_SPATIAL_ATTRIBUTE,T=c.CHANGE_SPATIAL_FILTER_VALUE,j=c.REMOVE_SPATIAL_SELECT,A=c.SHOW_SPATIAL_DETAILS,C=c.QUERY_FORM_RESET,x=c.SHOW_GENERATED_FILTER,D=c.CHANGE_DWITHIN_VALUE,_=c.ZONE_FILTER,I=c.ZONE_SEARCH,F=c.UPDATE_GEOMETRY,k=c.ZONE_CHANGE,L=c.ZONES_RESET,R=c.ZONE_SEARCH_ERROR,N=c.SIMPLE_FILTER_FIELD_UPDATE,M=c.ADD_SIMPLE_FILTER_FIELD,B=c.REMOVE_SIMPLE_FILTER_FIELD,G=c.REMOVE_ALL_SIMPLE_FILTER_FIELDS,U=c.UPDATE_FILTER_FIELD_OPTIONS,W=c.LOADING_FILTER_FIELD_OPTIONS,V=c.ADD_CROSS_LAYER_FILTER_FIELD,H=c.UPDATE_CROSS_LAYER_FILTER_FIELD,z=c.REMOVE_CROSS_LAYER_FILTER_FIELD,q=c.RESET_CROSS_LAYER_FILTER,Q=c.SET_AUTOCOMPLETE_MODE,Y=c.TOGGLE_AUTOCOMPLETE_MENU,K=c.LOAD_FILTER,X=r(2169),Z=X.END_DRAWING,J=X.CHANGE_DRAWING_STATUS,$=r(26),ee=r(3419),te=r(789),re=r(13).get,ne=r(410),oe=ne.set,ie=ne.arrayUpsert,ae=ne.arrayDelete,le={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[]},se=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$({},t,(s(e={},r.fieldName,r.fieldValue),s(e,"type",r.fieldType),e),{fieldOptions:$({},l({},t.fieldOptions),{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})});return"attribute"===r.fieldName&&(n.value="string"===r.fieldType?"":null,n.operator="="),"operator"===r.fieldName&&(n.value=null),n};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var r={rowId:(new Date).getTime(),groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return $({},e,{filterFields:e.filterFields?[].concat(i(e.filterFields),[r]):[r]});case p:return $({},e,{filterFields:e.filterFields.filter((function(e){return e.rowId!==t.rowId}))});case f:return $({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?se(e,t):e}))});case U:return $({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?$({},e,{options:$({},l({},e.options),s({},e.attribute,t.options))},{fieldOptions:$({},l({},e.fieldOptions),{valuesCount:t.valuesCount})}):e}))});case Y:return $({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?$({},e,{openAutocompleteMenu:t.status}):e}))});case Q:return $({},e,{autocompleteEnabled:t.status});case W:return $({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?$({},e,{loading:t.status}):e}))});case d:return $({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?$({},e,{exception:t.exceptionMessage}):e}))});case m:var a={id:(new Date).getTime(),logic:"OR",groupId:t.groupId,index:t.index+1};return $({},e,{groupFields:e.groupFields?[].concat(i(e.groupFields),[a]):[a]});case y:return $({},e,{groupFields:e.groupFields.map((function(e){return e.id===t.groupId?$({},e,{logic:t.logic}):e}))});case g:return $({},e,{filterFields:e.filterFields.filter((function(e){return e.groupId!==t.groupId})),groupFields:e.groupFields.filter((function(e){return e.id!==t.groupId}))});case b:return $({},e,{filterFields:e.filterFields.map((function(e){for(var r=0;r<t.attributes.length;r++)if(e.attribute===t.attributes[r].id)return $({},e,{value:null});return e}))});case h:return $({},e,{attributePanelExpanded:t.expand});case v:return $({},e,{spatialPanelExpanded:t.expand});case O:return $({},e,{crossLayerExpanded:t.expand});case E:return $({},e,{crossLayerFilter:oe(t.key,t.value,e.crossLayerFilter)});case V:return ie("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId,groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:t.rowId},e);case H:return oe("crossLayerFilter.collectGeometries.queryCollection.filterFields",(re(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.rowId?se(e,t):e})),e);case z:return ae("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId},e);case q:return $({},e,{crossLayerFilter:{attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute}});case w:var c;return $({},e,{spatialField:$({},e.spatialField,(c={},s(c,t.fieldName,t.method),s(c,"geometry",null),c))});case F:return $({},e,{spatialField:$({},e.spatialField,{geometry:t.geometry})},{toolbarEnabled:!0});case S:return $({},e,{spatialField:$({},e.spatialField,s({},t.fieldName,t.operation))});case P:return $({},e,{spatialField:$({},e.spatialField,{attribute:t.attribute}),crossLayerFilter:$({},e.crossLayerFilter,{attribute:t.attribute})});case J:return"queryform"===t.owner&&"start"===t.status?$({},e,{toolbarEnabled:!1}):e;case T:return $({},e,{toolbarEnabled:!0,spatialField:$({},e.spatialField,{value:t.value,collectGeometries:t.collectGeometries,geometry:t.srsName?l({},t.geometry,{projection:t.srsName}):t.geometry})});case Z:return"queryform"===t.owner?$({},e,{toolbarEnabled:!0,spatialField:$({},e.spatialField,{collectGeometries:t.collectGeometries,geometry:t.geometry})}):e;case j:var X=$({},le.spatialField,{attribute:e.spatialField.attribute,value:void 0});return $({},e,{spatialField:$({},e.spatialField,X)});case A:return $({},e,{showDetailsPanel:t.show});case C:var ne=$({},le.spatialField,{attribute:e.spatialField.attribute,value:void 0}),ce={attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute};return $({},e,le,{spatialField:ne,crossLayerFilter:ce});case x:return $({},e,{showGeneratedFilter:t.data});case D:return $({},e,{spatialField:$({},e.spatialField,{geometry:$({},e.spatialField.geometry,{distance:t.distance})})});case _:return $({},e,{spatialField:$({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id&&t.data.features&&t.data.features.length>0?$({},e,{values:t.data.features,open:!0,error:null}):e}))})});case I:return $({},e,{spatialField:$({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?$({},e,{busy:t.active}):e}))})});case k:var ue,pe,fe=e.spatialField.zoneFields.map((function(e){if(e.id===t.id){if(ue=e.multivalue?t.value.value:t.value.value[0],t.value.feature[0]){var r=t.value.feature[0],n=r.geometry_name;if(e.multivalue&&t.value.feature.length>1){for(var o=1;o<t.value.feature.length;o++){var i=t.value.feature[o];i&&(r=ee(r,i))}pe={coordinates:r.geometry.coordinates,geometryName:n,geometryType:r.geometry.type}}else pe={coordinates:r.geometry.coordinates,geometryName:n,geometryType:r.geometry.type}}return $({},e,{value:ue,open:!1,geometryName:pe?pe.geometryName:null})}return e.dependson&&t.id===e.dependson.id?$({},e,{disabled:!1,values:null,value:null,open:!1,dependson:$({},e.dependson,{value:ue})}):e})),de=te({type:"FeatureCollection",features:t.value.feature});return $({},e,{spatialField:$({},e.spatialField,{zoneFields:fe,geometry:de&&pe?{extent:de,type:pe.geometryType,coordinates:pe.coordinates}:null})});case L:return $({},e,{spatialField:$({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){var t=$({},e,{values:null,value:null,open:!1,error:null});return e.dependson?$({},t,{disabled:!0,open:!1,value:null,dependson:$({},e.dependson,{value:null})}):t})),geometry:null})});case R:var me;return $({},e,{spatialField:$({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?(me="object"!==o(t.error)?t.error.status&&t.error.statusText&&t.error.data?{status:t.error.status,statusText:t.error.statusText,data:t.error.data}:{message:t.error.message||"unknown error"}:t.error,$({},e,{error:me,busy:!1})):e}))})});case N:var ye=e.simpleFilterFields.reduce((function(e,r){return r.fieldId===t.id?e.push(l({},r,{},t.properties)):e.push(r),e}),[]);return l({},e,{simpleFilterFields:ye});case M:var ge=t.properties.fieldId?t.properties:l({},t.properties,{fieldId:(new Date).getTime()}),be=e.simpleFilterFields?[].concat(i(e.simpleFilterFields),[ge]):[ge];return l({},e,{simpleFilterFields:be});case B:return l({},e,{simpleFilterFields:e.simpleFilterFields.filter((function(e){return e.fieldId!==t.id}))});case G:return l({},e,{simpleFilterFields:[]});case K:var he=le.spatialField,ve=(he.attribute,n(he,["attribute"])),Oe=$({},le,{spatialField:l({},ve)}),Ee=t.filter||Oe,we=Ee.spatialField,Se=Ee.filterFields,Pe=Ee.groupFields,Te=Ee.crossLayerFilter,je=Ee.attributePanelExpanded,Ae=Ee.spatialPanelExpanded,Ce=Ee.crossLayerExpanded;return l({},e,{},{attributePanelExpanded:je,spatialPanelExpanded:Ae,crossLayerExpanded:Ce,spatialField:l({},we,{attribute:we&&we.attribute||e.spatialField&&e.spatialField.attribute}),filterFields:Se,groupFields:Pe,crossLayerFilter:l({},Te,{attribute:Te&&Te.attribute||e.crossLayerFilter&&e.crossLayerFilter.attribute})});default:return e}}},2746:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=r(2176),a=i.FEATURE_TYPE_SELECTED,l=i.FEATURE_TYPE_LOADED,s=i.FEATURE_TYPE_ERROR,c=i.FEATURE_LOADING,u=i.FEATURE_LOADED,p=i.FEATURE_ERROR,f=i.QUERY_CREATE,d=i.QUERY_RESULT,m=i.QUERY_ERROR,y=i.RESET_QUERY,g=i.UPDATE_QUERY,b=i.TOGGLE_SYNC_WMS,h=i.TOGGLE_LAYER_FILTER,v=r(2175).QUERY_FORM_RESET,O=r(267).RESET_CONTROLS,E=r(26),w=function(e){return["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((function(t){return{attribute:t,values:e.features.reduce((function(e,r){return-1===e.indexOf(r.properties[t])?[].concat(o(e),[r.properties[t]]).sort():e}),[])}})).reduce((function(e,t){return E(e,n({},t.attribute,t.values.map((function(e){return{id:e,name:e}}))))}),{})},S={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!0,isLayerFilter:!1};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return E({},e,{typeName:t.typeName,url:t.url});case l:return E({},e,{featureTypes:E({},e.featureTypes,n({},t.typeName,t.featureType))});case s:return E({},e,{featureTypes:E({},e.featureTypes,n({},t.typeName,{error:t.error}))});case c:return E({},e,{featureLoading:t.isLoading});case u:return E({},e,{featureLoading:!1,data:E({},e.data,n({},t.typeName,w(t.feature)))});case p:return E({},e,{featureLoading:!1,featureTypes:E({},e.data,n({},t.typeName,{error:t.error}))});case f:return E({},e,{isNew:!0,searchUrl:t.searchUrl,filterObj:t.filterObj});case g:return E({},e,{filterObj:E({},e.filterObj,t.updates)});case d:return E({},e,{isNew:!1,result:t.result,searchUrl:t.searchUrl,filterObj:t.filterObj,resultError:null});case m:return E({},e,{isNew:!1,result:null,resultError:t.error});case O:case v:return t.skip&&t.skip.indexOf("query")>=0?e:E({},e,{isNew:!1,result:null,filterObj:null,searchUrl:null});case y:return E({},e,{result:null,resultError:null});case b:return E({},e,{syncWmsFilter:!e.syncWmsFilter});case h:return E({},e,{isLayerFilter:!e.isLayerFilter});default:return e}}},2747:function(e,t,r){"use strict";r.r(t);var n=r(15),o=r(13),i=r(2263),a=r(269),l=r(161),s=r(267),c=r(2133),u=r(2168),p=r(2303),f=r(2193),d=r(2304),m=r(767),y=r(408),g=r(71),b=r.n(g),h=r(2308),v=r(80),O=r.n(v);function E(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function(e){return{recordSearchEpic:function(t,r){return t.ofType(i.TEXT_SEARCH).switchMap((function(t){var o=t.format,a=t.url,l=t.startPosition,s=t.maxRecords,c=t.text,u=t.options;return n.Observable.defer((function(){return e[o].textSearch(a,l,s,c,u,Object(y.layersSelector)(r.getState()))})).switchMap((function(e){return e.error?n.Observable.of(Object(i.recordsLoadError)(e)):n.Observable.of(Object(i.recordsLoaded)({url:a,startPosition:l,maxRecords:s,text:c},e))})).startWith(Object(i.setLoading)(!0)).catch((function(e){return n.Observable.of(Object(i.recordsLoadError)(e))}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(i.ADD_LAYERS_FROM_CATALOGS).filter((function(e){var t=e.layers,r=e.sources;return Object(o.isArray)(t)&&Object(o.isArray)(r)&&t.length&&t.length===r.length})).switchMap((function(t){var i=t.layers,a=t.sources,l=t.options,s=t.startPosition,c=void 0===s?1:s,u=t.maxRecords,p=void 0===u?4:u,d=r.getState(),y=l||Object(f.searchOptionsSelector)(d),g=Object(f.servicesSelector)(d),b=i.filter((function(e,t){return!!g[a[t]]})).map((function(t,r){var o=g[a[r]],l=o.type,s=o.url,u=i[r];return n.Observable.defer((function(){return e[l].textSearch(s,c,p,u,y).catch((function(){return{results:[]}}))})).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{format:l,url:s,text:u})}))}));return n.Observable.forkJoin(b).switchMap((function(e){return Object(o.isArray)(e)&&e.length?n.Observable.of(e.map((function(e){var t=e.format,r=e.url,i=e.text,a=w(e,["format","url","text"]),l=Object(m.currentMessagesSelector)(d),s=Object(h.getCatalogRecords)(t,a,y,l)||[],c=Object(o.head)(s.filter((function(e){return e.identifier===i}))),u=Object(h.extractOGCServicesReferences)(c),p=u.wms,g=u.wmts,b={},v={},E=Object(f.authkeyParamNameSelector)(d);if(p){var S=Object(h.buildSRSMap)(p.SRS);if(p.SRS.length>0&&!O.a.isAllowedSRS("EPSG:3857",S))return n.Observable.empty();b=Object(h.recordToLayer)(c,"wms",{removeParams:E,catalogURL:"csw"===t&&r?r+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+c.identifier:r},v)}else if(g){b={};var P=Object(h.buildSRSMap)(g.SRS);if(g.SRS.length>0&&!O.a.isAllowedSRS("EPSG:3857",P))return n.Observable.empty();b=Object(h.recordToLayer)(c,"wmts",{removeParams:E},v)}else{Object(h.extractEsriReferences)(c).esri&&(b=Object(h.esriToLayer)(c,v))}return c?b:i}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return Object(o.isString)(e)})).join(" "),r=[];return t&&(r=[Object(i.recordsNotFound)(t)]),r=[].concat(E(r),E(e.filter((function(e){return Object(o.isObject)(e)})).map((function(e){return Object(a.addLayer)(e)})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(i.ADD_SERVICE).switchMap((function(){var t=r.getState(),o=Object(f.newServiceSelector)(t),a=Object(f.servicesSelector)(t),s=Object(l.error)({title:"notification.warning",message:"catalog.notification.errorServiceUrl",autoDismiss:6,position:"tc"}),c=Object(l.error)({title:"notification.warning",message:"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}),u=s,p=null;return n.Observable.fromPromise(b.a.get(e[o.type].parseUrl(o.url)).then((function(e){return""!==o.title&&""!==o.url||(u=c),e.error||""===e.data?{notification:s,addNewService:p}:(""!==o.title&&""!==o.url&&(u=c,!a[o.title]||a[o.title]&&o.oldService===o.title?(u=Object(l.success)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}),p=Object(i.addCatalogService)(o)):u=Object(l.error)({title:"notification.warning",message:"catalog.notification.duplicatedServiceTitle",autoDismiss:6,position:"tc"})),{notification:u,addNewService:p})}))).switchMap((function(e){return null!==e.addNewService?n.Observable.of(e.notification,e.addNewService):n.Observable.of(e.notification)})).startWith(Object(i.savingService)(!0)).catch((function(){return n.Observable.of(Object(l.error)({title:"notification.warning",message:"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))})).concat(n.Observable.of(Object(i.savingService)(!1)))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(i.DELETE_SERVICE).switchMap((function(){var e=t.getState(),r=Object(f.selectedServiceSelector)(e),o=Object(f.servicesSelector)(e),a=o[r]?Object(l.success)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):Object(l.error)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),s=Object(i.deleteCatalogService)(r);return o[r]?n.Observable.of(a,s):n.Observable.of(a)}))},openCatalogEpic:function(e){return e.ofType(s.SET_CONTROL_PROPERTY).filter((function(e){return"metadataexplorer"===e.control&&e.value})).switchMap((function(){return n.Observable.of(Object(c.closeFeatureGrid)(),Object(u.purgeMapInfoResults)(),Object(u.hideMapinfoMarker)())}))},getMetadataRecordById:function(t,r){return t.ofType(i.GET_METADATA_RECORD_BY_ID).switchMap((function(){var t=r.getState(),o=Object(y.getSelectedLayer)(t);return n.Observable.fromPromise(e.csw.getRecordById(o.catalogURL)).switchMap((function(e){return e&&e.error?n.Observable.of(Object(l.error)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),Object(a.showLayerMetadata)({},!1)):e&&e.dc?n.Observable.of(Object(a.showLayerMetadata)(e.dc,!1)):n.Observable.empty()})).startWith(Object(a.showLayerMetadata)({},!0)).catch((function(){return n.Observable.of(Object(l.error)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),Object(a.showLayerMetadata)({},!1))}))}))},autoSearchEpic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(i.CHANGE_TEXT).debounce((function(){var e=o(),t=Object(f.delayAutoSearchSelector)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,r=o(),a=Object(f.pageSizeSelector)(r),l=Object(f.selectedCatalogSelector)(r),s=l.type,c=l.url;return n.Observable.of(Object(i.textSearch)({format:s,url:c,startPosition:1,maxRecords:a,text:t}))}))},catalogCloseEpic:function(e,t){return e.ofType(i.CATALOG_CLOSE).switchMap((function(){var e,r=t.getState(),a=Object(d.metadataSourceSelector)(r),l=Object(f.servicesSelector)(r);return(e=n.Observable).of.apply(e,E([Object(s.setControlProperties)("metadataexplorer","enabled",!1,"group",null),Object(i.changeCatalogMode)("view"),Object(i.resetCatalog)()].concat("backgroundSelector"===a?[Object(i.changeSelectedService)(Object(o.head)(Object(o.keys)(l))),Object(p.allowBackgroundsDeletion)(!0)]:[])))}))}}}},2751:function(e,t,r){var n=r(1),o=r(88).connect,i=r(26),a=r(2192),l=r(758).Glyphicon,s=r(431).ActionCreators,c=s.undo,u=s.redo,p=o((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).past.length>0)}}),{onClick:c})(r(3429)),f=o((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).future.length>0)}}),{onClick:u})(r(3430));e.exports={UndoPlugin:i(p,{Toolbar:{name:"undo",position:5,tool:!0,tooltip:"history.undoBtnTooltip",icon:n.createElement(l,{glyph:"step-backward"}),help:n.createElement(a,{msgId:"helptexts.historyundo"}),priority:1}}),RedoPlugin:i(f,{Toolbar:{name:"redo",position:6,tool:!0,tooltip:"history.redoBtnTooltip",icon:n.createElement(l,{glyph:"step-forward"}),help:n.createElement(a,{msgId:"helptexts.historyredo"}),priority:1}}),reducers:{}}},2752:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(2177).DropdownList,m=r(758),y=m.ButtonToolbar,g=m.Tooltip,b=m.Glyphicon,h=m.Grid,v=m.Row,O=m.Col,E=m.FormGroup,w=r(13),S=w.isEqual,P=w.round,T=w.get,j=r(2210),A=r(2103),C=r(2248),x=C.convertUom,D=C.getFormattedBearingValue,_=r(136),I=r(2116),F=r(2119),k=r(3467);r(3470);var L=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onLineClick",(function(){r.props.toggleMeasure({geomType:"LineString"})})),u(s(r),"onAreaClick",(function(){r.props.toggleMeasure({geomType:"Polygon"})})),u(s(r),"onBearingClick",(function(){r.props.toggleMeasure({geomType:"Bearing"})})),u(s(r),"onResetClick",(function(){r.props.toggleMeasure({geomType:null})})),u(s(r),"getToolTips",(function(){return{lineToolTip:f.createElement(g,{id:"tooltip-button.line"},r.props.lengthLabel),areaToolTip:f.createElement(g,{id:"tooltip-button.area"},r.props.areaLabel),bearingToolTip:f.createElement(g,{id:"tooltip-button.bearing"},r.props.bearingLabel)}})),u(s(r),"renderMeasurements",(function(){var e={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return f.createElement(h,{fluid:!0,style:{maxHeight:400}},r.props.lineMeasureEnabled&&f.createElement(v,null,f.createElement(E,{style:{display:"flex",alignItems:"center"}},f.createElement(O,{xs:6},f.createElement("span",null,r.props.lengthLabel,": "),f.createElement("span",{id:"measure-len-res",className:"measure-value"},f.createElement("h3",null,f.createElement("strong",null,f.createElement(j,{key:"len",numberParams:e,value:r.props.formatLength(r.props.uom.length.unit,r.props.measurement.len)})," ",r.props.uom.length.label)))),f.createElement(O,{xs:6},f.createElement(d,{value:r.props.uom.length.label,onChange:function(e){r.props.onChangeUom("length",e,r.props.uom)},data:r.props.uomLengthValues,textField:"label",valueField:"value"})))),r.props.areaMeasureEnabled&&f.createElement(v,null,f.createElement(E,{style:{display:"flex",alignItems:"center"}},f.createElement(O,{xs:6},f.createElement("span",null,r.props.areaLabel,": "),f.createElement("span",{id:"measure-area-res",className:"measure-value"},f.createElement("h3",null,f.createElement("strong",null,f.createElement(j,{key:"area",numberParams:e,value:r.props.formatArea(r.props.uom.area.unit,r.props.measurement.area)})," ",r.props.uom.area.label)))),f.createElement(O,{xs:6},f.createElement(d,{value:r.props.uom.area.label,onChange:function(e){r.props.onChangeUom("area",e,r.props.uom)},data:r.props.uomAreaValues,textField:"label",valueField:"value"})))),r.props.bearingMeasureEnabled&&f.createElement(v,null,f.createElement(E,{style:{display:"flex",alignItems:"center",minHeight:34}},f.createElement(O,{xs:6},f.createElement("span",null,r.props.bearingLabel,": "),f.createElement("span",{id:"measure-bearing-res",className:"measure-value"},f.createElement("h3",null,f.createElement("strong",null,r.props.formatBearing(r.props.measurement.bearing||0))))))))})),u(s(r),"renderPanel",(function(){return r.props.showResults?r.renderMeasurements():null})),u(s(r),"renderLabel",(function(e){return r.props.showButtonsLabels?f.createElement("span",{className:"option-text"},_.getMessageById(r.context.messages,e)):null})),u(s(r),"renderText",(function(e,t){return e?f.createElement("span",null,f.createElement("span",{className:"option-icon"},f.createElement(b,{glyph:e})),r.renderLabel(t)):r.renderLabel(t)})),u(s(r),"addAsAnnotation",(function(){var e=r.props.measurement.area||r.props.measurement.len||r.props.measurement.bearing,t=r.props.measurement.area&&r.props.uom.area.label||r.props.measurement.len&&r.props.uom.length.label||r.props.measurement.bearing&&""||"",n=(r.props.measurement.area?"area":r.props.measurement.len&&"length")||r.props.measurement.bearing&&"bearing"||"";r.props.onAddAnnotation(r.props.measurement.feature,e,t,n)})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"shouldComponentUpdate",value:function(e){return!S(e,this.props)}},{key:"render",value:function(){var e=this,t=(T(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),r=(T(this.props.measurement,-1!==t.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}));return f.createElement(F,{id:this.props.id,style:{overflow:"visible"},header:f.createElement("div",null,f.createElement(y,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},f.createElement(I,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return e.onLineClick()}},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return e.onAreaClick()}},{active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,"measureComponent.MeasureBearing"),onClick:function(){return e.onBearingClick()}}]}),f.createElement(I,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"refresh",visible:!!this.props.withReset,tooltip:this.props.resetButtonText,onClick:function(){return e.onResetClick()}},{glyph:"comment",tooltip:f.createElement(A,{msgId:"measureComponent.addAsAnnotation"}),onClick:function(){return e.addAsAnnotation()},disabled:!!(this.props.measurement.feature&&this.props.measurement.feature.properties&&this.props.measurement.feature.properties.disabled),visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel())},this.props.showCoordinateEditor&&f.createElement(h,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?f.createElement(v,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},f.createElement(k,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,items:[],isDraggable:!0,type:this.props.geomType,components:r})):f.createElement(v,null,f.createElement(O,{xs:12,className:"text-center",style:{padding:15}},f.createElement("i",null,f.createElement(A,{msgId:"measureComponent.selectTool"}))))))}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(L,"propTypes",{id:p.string,name:p.string,columnProperties:p.object,propertiesChangeHandler:p.func,lengthButtonText:p.oneOfType([p.string,p.element]),areaButtonText:p.oneOfType([p.string,p.element]),resetButtonText:p.oneOfType([p.string,p.element]),lengthLabel:p.oneOfType([p.string,p.element]),areaLabel:p.oneOfType([p.string,p.element]),bearingLabel:p.oneOfType([p.string,p.element]),uom:p.shape({length:p.shape({unit:p.string.isRequired,label:p.string.isRequired}),area:p.shape({unit:p.string.isRequired,label:p.string.isRequired})}),toggleMeasure:p.func,measurement:p.object,lineMeasureEnabled:p.bool,areaMeasureEnabled:p.bool,bearingMeasureEnabled:p.bool,showButtons:p.bool,showResults:p.bool,mapProjection:p.string,lineGlyph:p.string,areaGlyph:p.string,bearingGlyph:p.string,withReset:p.bool,showButtonsLabels:p.bool,inlineGlyph:p.bool,formatLength:p.func,formatArea:p.func,formatBearing:p.func,onChangeUom:p.func,uomLengthValues:p.array,uomAreaValues:p.array,format:p.string,onChangeFormat:p.func,onChangeCoordinates:p.func,onHighlightPoint:p.func,geomType:p.string,defaultOptions:p.object,onAddAnnotation:p.func,showAddAsAnnotation:p.bool,onMount:p.func,onUpdateOptions:p.func,showCoordinateEditor:p.bool,isCoordinateEditorEnabled:p.bool}),u(L,"contextTypes",{messages:p.object}),u(L,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft"},{value:"sqm",label:"m"},{value:"sqkm",label:"km"},{value:"sqmi",label:"mi"},{value:"sqnm",label:"nm"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,withReset:!1,lineGlyph:"1-measure-lenght",areaGlyph:"1-measure-area",bearingGlyph:"1-bearing",showButtonsLabels:!0,lengthLabel:f.createElement(A,{msgId:"measureComponent.lengthLabel"}),areaLabel:f.createElement(A,{msgId:"measureComponent.areaLabel"}),bearingLabel:f.createElement(A,{msgId:"measureComponent.bearingLabel"}),formatLength:function(e,t){return x(t,"m",e)},formatArea:function(e,t){return x(t,"sqm",e)},formatBearing:function(e){return D(P(e||0,6))},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){}}),e.exports=L},2765:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13),l=a.isNil,s=a.isEqual,c=a.isArray,u=a.isFunction,p=r(407),f=p.withState,d=p.withHandlers,m=p.compose,y=p.lifecycle,g=m(f("alertModal","onShowAlertModal",!1),f("showEditor","onShowEditor",!1)),b=m(d({onClose:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,n=e.onUpdateOriginalSettings,a=void 0===n?function(){}:n,l=e.onUpdateNode,p=void 0===l?function(){}:l,f=e.originalSettings,d=e.settings,m=e.onHideSettings,y=void 0===m?function(){}:m,g=e.onShowAlertModal,b=void 0===g?function(){}:g;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.keys(d.options).reduce((function(e,t){return o({},e,i({},t,"opacity"!==t||f[t]?f[t]:1))}),{});s(n,d.options)||e?(c(t)&&t.forEach((function(e){u(e)&&e()})),p(d.node,d.nodeType,o({},d.options,{},f)),y(),b(!1),a({}),r({})):b(!0)}},onSave:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,n=e.onUpdateOriginalSettings,o=void 0===n?function(){}:n,i=e.onHideSettings,a=void 0===i?function(){}:i,l=e.onShowAlertModal,s=void 0===l?function(){}:l;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];c(e)&&e.forEach((function(e){u(e)&&e()})),a(),s(!1),o({}),r({})}}}),y({componentWillMount:function(){var e=this.props,t=e.element,r=void 0===t?{}:t,n=e.onUpdateOriginalSettings,i=void 0===n?function(){}:n,a=e.onUpdateInitialSettings,l=void 0===a?function(){}:a;i({}),l(o({},r))},componentWillReceiveProps:function(e){var t=this.props,r=t.settings,n=void 0===r?{}:r,o=t.onRetrieveLayerData,i=void 0===o?function(){}:o;!n.expanded&&e.settings&&e.settings.expanded&&l(e.element.description)&&"wms"===e.element.type&&i(e.element)},componentWillUpdate:function(e){var t=this.props,r=t.settings,n=void 0===r?{}:r,i=t.onUpdateOriginalSettings,a=void 0===i?function(){}:i,l=t.onUpdateInitialSettings,s=void 0===l?function(){}:l,c=t.onSetTab,u=void 0===c?function(){}:c;!n.expanded&&e.settings&&e.settings.expanded&&(a({}),s(o({},e.element)),u("general"))}}));e.exports={settingsState:g,settingsLifecycle:b,updateSettingsLifecycle:m(g,b)}},2766:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(2145),y=r(13).get,g=r(758),b=g.FormControl,h=g.FormGroup,v=g.ControlLabel,O=g.InputGroup,E=g.Col,w=r(137),S=r(2103),P=r(3478).SimpleSelect,T=r(13),j=T.isString,A=T.isObject,C=T.find,x=r(136),D=r(26);r(3495);var _=r(758).Grid,I=r(788),F=I.createFromSearch,k=I.flattenGroups,L=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(o)))),"getLabelName",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[^\.\/]+/g,(function(e){return r.props.groups&&y(w.getGroupByName(e,r.props.groups),"title")||e})).replace(/\./g,"/").replace(/\${dot}/g,".")})),p(c(r),"updateEntry",(function(e,t){return r.props.onChange(e,t.target.value)})),p(c(r),"updateTranslation",(function(e,t){var n="default"===e&&j(r.props.element.title)?t.target.value:D({},A(r.props.element.title)?r.props.element.title:{default:r.props.element.title||""},p({},e,t.target.value));r.props.onChange("title",n)})),r}var n,d,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(d=[{key:"render",value:function(){var e=this,t=x.getSupportedLocales(),n=A(this.props.element.title)?D({},this.props.element.title):{default:this.props.element.title},i=this.props.pluginCfg.hideTitleTranslations,a=void 0!==i&&i,l=[{value:"title",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.title")},{value:"description",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.description")},{value:"both",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.both")},{value:"none",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.none")}],s=[{value:"top",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.top")},{value:"right",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.right")},{value:"bottom",label:x.getMessageById(this.context.messages,"layerProperties.tooltip.bottom")}];return f.createElement(_,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},f.createElement("form",{ref:"settings"},f.createElement(h,null,f.createElement(v,null,f.createElement(S,{msgId:"layerProperties.title"})),f.createElement(b,{defaultValue:n.default||"",key:"title",type:"text",onBlur:this.updateTranslation.bind(null,"default")})),a||f.createElement(h,null,f.createElement(v,null,f.createElement(S,{msgId:"layerProperties.titleTranslations"})),Object.keys(t).map((function(o){var i;try{i=r(3497)("./"+t[o].code+".png")}catch(e){i=!1}return i?f.createElement(O,{key:o},f.createElement(O.Addon,null,f.createElement("img",{src:i,alt:t[o].description})),f.createElement(b,{placeholder:t[o].description,defaultValue:n[t[o].code]||"",type:"text",onBlur:e.updateTranslation.bind(null,t[o].code)})):null}))),f.createElement(h,null,f.createElement(v,null,f.createElement(S,{msgId:"layerProperties.name"})),f.createElement(b,{defaultValue:this.props.element.name||"",key:"name",type:"text",disabled:!0,onBlur:this.updateEntry.bind(null,"name")})),f.createElement(h,null,f.createElement(v,null,f.createElement(S,{msgId:"layerProperties.description"})),this.props.element.capabilitiesLoading?f.createElement(m,{spinnerName:"circle"}):f.createElement(b,{defaultValue:this.props.element.description||"",key:"description",rows:"2",componentClass:"textarea",style:{resize:"vertical",minHeight:"33px"},onBlur:this.updateEntry.bind(null,"description")})),"layers"===this.props.nodeType?f.createElement("div",null,f.createElement("label",{key:"group-label",className:"control-label"},f.createElement(S,{msgId:"layerProperties.group"})),f.createElement(P,{key:"group-dropdown",options:(this.props.groups&&k(this.props.groups)||this.props.element&&this.props.element.group||[]).map((function(t){return A(t)?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{label:e.getLabelName(t.label)}):{label:e.getLabelName(t),value:t}})),defaultValue:{label:this.getLabelName(this.props.element&&this.props.element.group||"Default"),value:this.props.element&&this.props.element.group||"Default"},placeholder:this.getLabelName(this.props.element&&this.props.element.group||"Default"),onChange:function(t){e.updateEntry("group",{target:{value:t||"Default"}})},theme:"bootstrap3",createFromSearch:this.props.allowNew?F:void 0,hideResetButton:!this.props.allowNew,editable:this.props.allowNew,onValueChange:function(e){e&&e.newOption&&this.options.unshift({label:e.label,value:e.value}),this.onChange(e?e.value:null)}})):null,this.props.showTooltipOptions&&f.createElement("div",{style:{width:"100%"}},f.createElement(E,{xs:12,sm:8,className:"first-selectize"},f.createElement("br",null),f.createElement("label",{key:"tooltip-label",className:"control-label"},f.createElement(S,{msgId:"layerProperties.tooltip.label"})),f.createElement(P,{hideResetButton:!0,dropdownDirection:-1,key:"tooltips-dropdown",options:l,theme:"bootstrap3",value:C(l,(function(t){return t.value===(e.props.element.tooltipOptions||"title")})),onValueChange:function(t){e.updateEntry("tooltipOptions",{target:{value:t.value||"title"}})}})),f.createElement(E,{xs:12,sm:4,className:"second-selectize"},f.createElement("br",null),f.createElement("label",{key:"tooltip-placement-label",className:"control-label"},f.createElement(S,{msgId:"layerProperties.tooltip.labelPlacement"})),f.createElement(P,{hideResetButton:!0,dropdownDirection:-1,key:"tooltips-placement-dropdown",options:s,theme:"bootstrap3",value:C(s,(function(t){return t.value===(e.props.element.tooltipPlacement||"top")})),onValueChange:function(t){e.updateEntry("tooltipPlacement",{target:{value:t.value||"top"}})}})))))}}])&&a(n.prototype,d),g&&a(n,g),t}(f.Component);p(L,"propTypes",{onChange:d.func,element:d.object,settings:d.object,groups:d.array,nodeType:d.string,pluginCfg:d.object,showTooltipOptions:d.bool,allowNew:d.bool}),p(L,"contextTypes",{messages:d.object}),p(L,"defaultProps",{element:{},onChange:function(){},nodeType:"layers",showTooltipOptions:!0,pluginCfg:{},allowNew:!1}),e.exports=L},2769:function(e,t,r){var n,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(0),y=r(2177).DropdownList,g=r(2103),b=r(758),h=b.Grid,v=b.Row,O=b.Col,E=b.FormGroup,w=b.ControlLabel,S=b.FormControl,P=b.Checkbox,T=r(13),j=T.clamp,A=T.isNil;r(2379),e.exports=(o=n=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"state",{opacity:100}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.settings&&this.props.settings.options&&!A(this.props.settings.options.opacity)&&this.setState({opacity:Math.round(100*this.props.settings.options.opacity)})}},{key:"render",value:function(){var e,t,r=this;return d.createElement(h,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},"wms"===this.props.element.type&&d.createElement(v,null,d.createElement(O,{xs:12},d.createElement(E,null,d.createElement(w,null,d.createElement(g,{msgId:"layerProperties.format"})),d.createElement(y,{key:"format-dropdown",data:this.props.formats||["image/png","image/png8","image/jpeg","image/vnd.jpeg-png","image/gif"],value:this.props.element&&this.props.element.format||"image/png",onChange:function(e){r.props.onChange("format",e)}})))),d.createElement(v,null,d.createElement(O,{xs:12},d.createElement(E,null,d.createElement(w,null,this.props.opacityText," %"),d.createElement(S,{type:"number",min:0,max:100,value:this.state.opacity,onChange:function(e){var t=e.target.value,n=t&&j(Math.round(t),0,100);r.setState({opacity:n}),r.props.onChange("opacity",n&&n/100||0)}})))),"wms"===this.props.element.type&&d.createElement(v,null,d.createElement(O,{xs:12},d.createElement("hr",null),d.createElement(E,null,d.createElement(P,{key:"transparent",checked:this.props.element&&(void 0===this.props.element.transparent||this.props.element.transparent),onChange:function(e){r.props.onChange("transparent",e.target.checked)}},d.createElement(g,{msgId:"layerProperties.transparent"})),d.createElement(P,(f(e={key:"cache",value:"tiled"},"key","tiled"),f(e,"disabled",!!this.props.element.singleTile),f(e,"onChange",(function(e){return r.props.onChange("tiled",e.target.checked)})),f(e,"checked",!this.props.element||void 0===this.props.element.tiled||this.props.element.tiled),e),d.createElement(g,{msgId:"layerProperties.cached"})),d.createElement(P,(f(t={key:"singleTile",value:"singleTile"},"key","singleTile"),f(t,"checked",this.props.element&&void 0!==this.props.element.singleTile&&this.props.element.singleTile),f(t,"onChange",(function(e){return r.props.onChange("singleTile",e.target.checked)})),t),d.createElement(g,{msgId:"layerProperties.singleTile"}))))))}}])&&l(r.prototype,n),o&&l(r,o),t}(d.Component),f(n,"propTypes",{opacityText:m.node,element:m.object,formats:m.array,settings:m.object,onChange:m.func}),f(n,"defaultProps",{onChange:function(){},opacityText:d.createElement(g,{msgId:"opacity"})}),o)},2786:function(e,t,r){var n=r(1),o=r(88).connect,i=r(195).createSelector,a=r(407),l=a.compose,s=a.withState,c=a.defaultProps,u=a.branch,p=a.lifecycle,f=r(3613),d=r(2247),m=d.selectStyleTemplate,y=d.updateStatus,g=d.addStyle,b=d.createStyle,h=d.updateStyleCode,v=d.editStyleCode,O=d.deleteStyle,E=d.setDefaultStyle,w=r(2259).updateOptionsByOwner,S=r(269).updateSettingsParams,P=r(2306).getLayerCapabilities,T=r(2119),j=r(3675),A=r(2362),C=r(2161),x=r(2138),D=r(2231),_=r(2103),I=r(2520),F=I.templateIdSelector,k=I.statusStyleSelector,L=I.codeStyleSelector,R=I.geometryTypeSelector,N=I.formatStyleSelector,M=I.loadingStyleSelector,B=I.errorStyleSelector,G=I.layerPropertiesSelector,U=I.initialCodeStyleSelector,W=I.addStyleSelector,V=I.selectedStyleSelector,H=I.canEditStyleSelector,z=I.getAllStyles,q=I.styleServiceSelector,Q=I.getUpdatedLayer,Y=I.selectedStyleFormatSelector,K=r(2274),X=K.getEditorMode,Z=K.STYLE_OWNER_NAME,J=(0,K.getStyleTemplates)(),$=x((function(e){return!e.canEdit}),{glyph:"exclamation-mark",title:n.createElement(_,{msgId:"styleeditor.noPermission"})}),ee=function(e){return C(e,{size:150,style:{margin:"auto"}},(function(e){return n.createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},n.createElement(D,e))}))},te=l(c({inlineWidgets:f}),o(i([L,N,G,B,M,H],(function(e,t,r,n,o,i){return{code:e,mode:X(t),hintProperties:r,error:n.edit||null,loading:o,canEdit:i}})),{onChange:function(e){return v(e)}}),ee((function(e){var t=e.code,r=e.error;return!t&&!r})),$,x((function(e){var t=e.error;return t&&404===t.status}),{glyph:"exclamation-mark",title:n.createElement(_,{msgId:"styleeditor.styleNotFound"})}))((function(e){return n.createElement(T,null,n.createElement(j,e))})),re=l(c({templates:J}),o(i([F,W,R,H,q,M],(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.formats,a=void 0===i?[]:i,l=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:a,loading:l}})),{onSelect:m,onClose:g.bind(null,!1),onSave:b}),$,ee((function(e){return!e.geometryType})),s("filterText","onFilter",""),s("styleSettings","onUpdate",{}))(r(3690)),ne=l(o(i([k,z],(function(e,t){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles}})),{onSelect:S}),s("filterText","onFilter",""),A((function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r}),(function(){return n.createElement(re,null)}),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))(r(3692)),oe=l(s("showModal","onShowModal"),o(i([k,F,B,U,L,M,V,H,z,q,Y],(function(e,t,r,n,o,i,a,l,s){var c=s.defaultStyle,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},p=u.formats,f=void 0===p?["sld"]:p,d=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:i,selectedStyle:c===a?"":a,editEnabled:l,disableCodeEditing:-1===f.indexOf(d)}})),{onSelectStyle:y.bind(null,"template"),onEditStyle:y.bind(null,"edit"),onBack:y.bind(null,""),onReset:w.bind(null,Z,[{}]),onAdd:g.bind(null,!0),onUpdate:h,onDelete:O,onSetDefault:E}))(r(3693)),ie=l(o(i([Q],(function(e){return{layer:e}})),{onInit:P}),p({componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}))((function(){return n.createElement(T,{className:"ms-style-editor-container",footer:n.createElement("div",{style:{height:25}})},n.createElement(ne,{readOnly:!0}))}));e.exports={StyleSelector:u((function(e){return e.readOnly}),(function(){return ie}))(ne),StyleTemplates:re,StyleToolbar:oe,StyleCodeEditor:te}},2792:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1);e.exports=function(e){var t=e.type,r=e.patterns,a=e.paths,l=e.texts,s=e.backgroundColor,c=void 0===s?"#ffffff":s;return i.createElement("svg",{viewBox:"0 0 200 200"},i.createElement("defs",null,r&&r.filter((function(e){return e.icon})).map((function(e){return i.createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&i.createElement("path",e.icon))})),r&&r.filter((function(e){return e.image})).map((function(e){return i.createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&i.createElement("image",e.image))}))),i.createElement("path",{fill:c,d:"M0 0 L200 0 L200 200 L0 200Z"}),a&&a.map((function(e){var r=e.type,a=o(e,["type"]);return"polygon"===(r||t)&&i.createElement("path",n({},a,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(r||t)&&i.createElement("path",n({},a,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(r||t)&&i.createElement("path",a)})),l&&l.map((function(e){var t=e.text,r=o(e,["text"]);return i.createElement("text",n({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},r),t)})))}},2793:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=r(13),a=i.get,l=i.find,s=i.isNumber,c=i.round,u=r(2120).WIDGETS_REGEX,p=r(3697).findGroups,f=r(2224).sameToneRangeColors,d=function(e,t){var r=o(u.exec(e),2),n=r[0],i=r[1];return n?l(t,{id:i}):null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,r){var o=a(r,"mapSync")&&a(r,"dependenciesMap")||{},i=Object.keys(o).map((function(t){return d(o[t],e)}))||[];return[].concat(n(t),n(i.filter((function(e){return void 0!==e})).map((function(e){return[r.id,e.id]}))))}),[])};e.exports={shortenLabel:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!s(e))return e;var o=c(e),i=o.toString().length%3;if(o>=r){var a=o.toString().length-(0===i?i+3:i),l=a/3,u=o/Math.pow(10,a);switch(l){case 1:t=" K";break;case 2:t=" M";break;case 3:t=" B";break;case 4:t=" T";break;default:t=""}o=c(u,n)+t}else o=c(e,Math.abs(4-o.toString().length));return o},getWidgetDependency:function(e,t){var r=u.exec(e),n=r&&r[2],o=d(e,t);return n?a(o,n):o},getConnectionList:m,getWidgetsGroups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=p(m(e)),r={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},n=f(r.base,r.range,t.length+1,r.options);return t.map((function(e,t){return{color:n[t],widgets:e}}))}}},2794:function(e,t,r){var n=r(407).compose,o=r(88).connect,i=r(195).createSelector,a=r(268),l=a.mapInfoSelector,s=a.mapIdSelector,c=r(271).userSelector,u=r(3698);e.exports=function(){return n(o(i(s,l,c,(function(e,t,r){return{accessInfo:{mapId:e,mapInfo:t,user:r}}}))),u.apply(void 0,arguments))}},2795:function(e,t,r){var n=r(195).createSelector,o=r(88).connect,i=r(2140),a=o(n(i.rightPanelOpenSelector,i.bottomPanelOpenSelector,r(2144).isCesium,(function(e,t,r){return{enabled:!e&&!t&&!r}})));e.exports=a},2798:function(e,t,r){var n=r(407),o=n.compose,i=n.withProps,a=r(13).get,l=r(2275),s=r(2276),c=s.editableWidget,u=s.defaultIcons,p=s.withHeaderTools,f=r(196).getScales;e.exports=o(i((function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.dependenciesMap;return{layers:r[(void 0===n?{}:n).layers]||r.layers||[],scales:f(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",a(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}})),i((function(e){var t=e.layers;return{layers:(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),l,c(),u(),p())},2799:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withProps,c=r(2800),u=r(2277),p=r(15),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,a=void 0===n?[]:n,l=e.AggregationAttribute,s=e.AggregationFunctions;return r.map((function(e){return o({},a.reduce((function(t,r,n){return o({},t,i({},r,e[n]))}),{}),i({},"".concat(s[0],"(").concat(l,")"),e[e.length-1]))})).sort((function(e,t){var r=parseFloat(e[a]),n=parseFloat(t[a]);return isNaN(r)||isNaN(n)?e<t?-1:e>t?1:0:r-n}))},d=r(137).getWpsUrl,m=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&d(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r,n,o=e.layer,i=void 0===o?{}:o,a=e.options,l=void 0===a?{}:a,s=e.filter;return t.layer&&i.name===t.layer.name&&i.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(l,t.options)&&(r=s,n=t.filter,r===n)})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,a=e.onLoad,l=void 0===a?function(){}:a,s=e.onLoadError,u=void 0===s?function(){}:s;return c(d(r),o({featureType:r.name},n,{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:f(e.data),series:[{dataKey:"".concat(e.data.AggregationFunctions[0],"(").concat(e.data.AggregationAttribute,")")}],xAxis:{dataKey:e.data.GroupByAttributes[0]}}})).do(l).catch((function(e){return p.Observable.of({loading:!1,error:e,data:[]}).do(u)})).startWith({loading:!0})}))};e.exports=l(s((function(){return{dataStreamFactory:m}})),u)},2800:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13).castArray,l=function(e){var t=e.featureType,r=e.aggregationAttribute,n=e.groupByAttributes,o=void 0===n?[]:n,i=e.aggregateFunction,l=e.viewParams,s=e.filter,c=void 0===s?"":s;return'<?xml version="1.0" encoding="UTF-8"?>\n<wps:Execute service="WPS"   version="1.0.0"\n    xmlns="http://www.opengis.net/wps/1.0.0"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:ows="http://www.opengis.net/ows/1.1"\n    xmlns:wcs="http://www.opengis.net/wcs/1.1.1"\n    xmlns:wfs="http://www.opengis.net/wfs"\n    xmlns:wps="http://www.opengis.net/wps/1.0.0"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://www.opengis.net/wps/1.0.0  http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Aggregate</ows:Identifier>\n    <wps:DataInputs>\n        <wps:Input>\n            <ows:Identifier>features</ows:Identifier>\n            <wps:Reference method="POST" mimeType="text/xml" xlink:href="http://geoserver/wfs">\n                <wps:Body>\n                    <wfs:GetFeature '.concat(l?'viewParams="'.concat(l,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">\n                        <wfs:Query typeName="').concat(t,'">\n                        ').concat(c,"\n                        </wfs:Query>\n                    </wfs:GetFeature>\n                </wps:Body>\n            </wps:Reference>\n        </wps:Input>\n        <wps:Input>\n            <ows:Identifier>aggregationAttribute</ows:Identifier>\n            <wps:Data>\n                <wps:LiteralData>").concat(r,"</wps:LiteralData>\n            </wps:Data>\n        </wps:Input>\n        ").concat(a(i).map((function(e){return"<wps:Input>\n                    <ows:Identifier>function</ows:Identifier>\n                    <wps:Data>\n                        <wps:LiteralData>".concat(e,"</wps:LiteralData>\n                    </wps:Data>\n                    </wps:Input>")})),"\n        <wps:Input>\n            <ows:Identifier>singlePass</ows:Identifier>\n            <wps:Data>\n                <wps:LiteralData>false</wps:LiteralData>\n            </wps:Data>\n        </wps:Input>\n        ").concat(a(o).map((function(e){return"<wps:Input>\n            <ows:Identifier>groupByAttributes</ows:Identifier>\n            <wps:Data>\n                <wps:LiteralData>".concat(e,"</wps:LiteralData>\n            </wps:Data>\n        </wps:Input>")})),'\n    </wps:DataInputs>\n    <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n            <ows:Identifier>result</ows:Identifier>\n        </wps:RawDataOutput>\n    </wps:ResponseForm>\n</wps:Execute>')},s=r(71),c=r(15),u=r(2525).getWPSURL;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.Observable.defer((function(){return s.post(u(e),l(t),o({headers:{"Content-Type":"text/xml"}},r))}))}},2801:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withProps,c=r(2800),u=r(2277),p=r(15),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,a=void 0===n?[]:n,l=e.AggregationAttribute,s=e.AggregationFunctions;return r.map((function(e){return o({},a.reduce((function(t,r,n){return o({},t,i({},r,e[n]))}),{}),i({},"".concat(s[0],"(").concat(l,")"),e[e.length-1]))}))},d=r(137).getWpsUrl,m=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&d(r)&&n&&n.aggregateFunction&&n.aggregationAttribute})).distinctUntilChanged((function(e,t){var r,n,o=e.layer,i=void 0===o?{}:o,a=e.options,l=void 0===a?{}:a,s=e.filter;return t.layer&&i.name===t.layer.name&&i.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(l,t.options)&&(r=s,n=t.filter,r===n)})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,a=e.onLoad,l=void 0===a?function(){}:a,s=e.onLoadError,u=void 0===s?function(){}:s;return c(d(r),o({featureType:r.name},n,{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:f(e.data),series:[{dataKey:"".concat(e.data.AggregationFunctions[0],"(").concat(e.data.AggregationAttribute,")")}]}})).do(l).catch((function(e){return p.Observable.of({loading:!1,error:e,data:[]}).do(u)})).startWith({loading:!0})}))};e.exports=l(s((function(){return{dataStreamFactory:m}})),u)},2802:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(780),l=r(13).castArray,s=r(765).wfsToGmlVersion,c=function(e){return'service="WFS" version="'+e+'" '+("1.0.0"===e?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+"http://schemas.opengis.net/wfs/".concat(e,"1.0.0"===e?'/WFS-basic.xsd"':'/wfs.xsd"')},u=function(e){return'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"'};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wfsVersion,r=void 0===t?"1.1.0":t,n=e.gmlVersion,i=e.filterNS,p=e.wfsNS,f=void 0===p?"wfs":p,d=n;!d&&r?d=s(r):d||(d="3.1.1");var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewParams,n=e.resultType,o=e.outputFormat,i=e.startIndex,a=e.maxFeatures,l=function(e){return 0===r.indexOf("2.")?'count="'.concat(e,'"'):'maxFeatures="'.concat(e,'"')};return(0===r.indexOf("1.")?c(r):u(r))+(n?' resultType="'.concat(n,'"'):"")+(o?' outputFormat="'.concat(o,'"'):"")+(i||0===i?' startIndex="'.concat(i,'"'):"")+(a||0===a?" ".concat(l(a)):"")+(t?' viewParams="'.concat(t,'"'):"")},y=function(e){return l(e).map((function(e){return"<".concat("2.0"===r?"fes":"ogc",":PropertyName>").concat(e,"</").concat("2.0"===r?"fes":"ogc",":PropertyName>")})).join("")};return o({propertyName:y},a({gmlVersion:d,wfsVersion:r,filterNS:i||"2.0"===r?"fes":"ogc"}),{getFeature:function(e,t){return"<".concat(f,":GetFeature ").concat(m(t),">").concat(Array.isArray(e)?e.join(""):e,"</").concat(f,":GetFeature>")},sortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return"<".concat(f,":SortBy><").concat(f,":SortProperty>").concat(y(e),"<").concat(f,":SortOrder>").concat(t,"</").concat(f,":SortOrder></").concat(f,":SortProperty></").concat(f,":SortBy>")},query:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.srsName,i=void 0===o?"EPSG:4326":o;return"<".concat(f,":Query ").concat("2.0"===r?"typeNames":"typeName",'="').concat(e,'" srsName="').concat(i,'">')+"".concat(Array.isArray(t)?t.join(""):t)+"</".concat(f,":Query>")}})}},2803:function(e,t){e.exports={convertToNameValue:function(e){var t=e.name,r=e.value,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.map((function(e){return{name:e[t],value:e[r]}}))}}},2804:function(e,t,r){var n=r(3741),o=r(3742),i=r(3748),a=r(3749).default,l=r(3750),s=r(407).compose,c=r(3751).handlingUnsupportedProjection;e.exports=s(l,i(0),n,o,a,c)(r(3752))},2805:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,f=r(1),d=r(0),m=r(2103),y={width:"100%",height:"100%",textAlign:"center",verticalAlign:"center"},g=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.loading?f.createElement("div",{style:y},f.createElement(m,{msgId:"loading"})):f.createElement("div",{style:y},f.createElement(m,{msgId:"featuregrid.noFeaturesAvailable"}))}}])&&i(r.prototype,n),c&&i(r,c),t}(f.PureComponent);c=g,u="propTypes",p={loading:d.bool},u in c?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p,e.exports=g},2807:function(e,t,r){"use strict";r.r(t);var n=r(407),o=r(13),i=r(12),a=r.n(i),l=r(770);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,r=void 0===t?"type":t,i=e.dateProp,c=void 0===i?"date":i,u=e.setDateProp,p=void 0===u?"onSetDate":u;return Object(n.compose)(Object(n.withPropsOnChange)([c],(function(e){var t,n=e[c],i=e[r],u=e.useUTCOffset,p=void 0===u||u,f=n,d="1970-01-01",m="00:00:00";!Object(o.isDate)(n)&&Object(o.isString)(n)&&("time"===i&&(f=new Date("".concat(d,"T").concat(n))),"date"===i&&(-1!==n.indexOf("Z")&&(f=n.substr(0,n.length-1)),f=new Date("".concat(f,"T").concat(m,"Z"))),"date-time"===i&&(f=new Date(n)));var y=f;if(f){switch(i){case"time":m=Object(l.getUTCTimePart)(f);break;case"date":d=Object(l.getUTCDatePart)(f);break;default:m=Object(l.getUTCTimePart)(f),d=Object(l.getUTCDatePart)(f)}(y=new Date("".concat(d,"T").concat(m,"Z"))).setUTCMilliseconds(f.getUTCMilliseconds());var g=p?Object(l.getTimezoneOffsetMillis)(y):0;y=new Date(y.getTime()+g)}return s(t={},c,y),s(t,"defaultCurrentDate","date-time"===i?a()().startOf("day").toDate():void 0),t})),Object(n.withHandlers)(s({},p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[p],n=e[r],o=e.useUTCOffset,i=void 0===o||o;return(function(e,r){if(e){var o=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),a=i?Object(l.getTimezoneOffsetMillis)(e):0,s=new Date(o.getTime()-a);switch(n){case"time":s="".concat(Object(l.getUTCTimePart)(s),"Z");break;case"date":s="".concat(Object(l.getUTCDatePart)(s),"Z")}t(s,r)}else t(null)})}))))}},2808:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(3758),d=r(3762).featuresToGrid,m=r(3775),y=r(2152),g=y.isValidValueForPropertyName,b=y.isProperty;r(3777);var h=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,l(t).call(this,e))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.initPlugin({virtualScroll:this.props.virtualScroll,editingAllowedRoles:this.props.editingAllowedRoles,maxStoredPages:this.props.maxStoredPages})}},{key:"getChildContext",value:function(){var e=this;return{isModified:function(t,r){return e.props.changes.hasOwnProperty(t)&&e.props.changes[t].hasOwnProperty(r)},isProperty:function(t){return"geometry"===t||b(t,e.props.describeFeatureType)},isValid:function(t,r){return!e.props.describeFeatureType||g(t,r,e.props.describeFeatureType)}}}},{key:"render",value:function(){var e=this.props.gridComponent;return u.createElement(e,o({rowRenderer:m},this.props))}}])&&i(r.prototype,n),c&&i(r,c),t}(u.PureComponent);c(h,"propTypes",{autocompleteEnabled:p.bool,editingAllowedRoles:p.array,gridOpts:p.object,changes:p.object,selectBy:p.object,customEditorsOptions:p.object,features:p.array,showDragHandle:p.bool,gridComponent:p.func,describeFeatureType:p.object,columnSettings:p.object,gridOptions:p.object,actionOpts:p.object,initPlugin:p.func,tools:p.array,gridEvents:p.object,virtualScroll:p.bool,maxStoredPages:p.number}),c(h,"childContextTypes",{isModified:p.func,isValid:p.func,isProperty:p.func}),c(h,"defaultProps",{editingAllowedRoles:["ADMIN"],initPlugin:function(){},autocompleteEnabled:!1,gridComponent:f,changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5}),e.exports=d(h)},2809:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(2389),y=r(3765),g=r(3767).forceSelection,b=r(13).head,h=r(26),v=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=u(t).call(this,e),(r=!i||"object"!==n(i)&&"function"!=typeof i?l(o):i).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValue=function(){var e=c(u(t.prototype),"getValue",l(r)).call(l(r));return r.props.forceSelection?p({},r.props.column.key,g({oldValue:r.props.defaultOption,changedValue:e[r.props.column&&r.props.column.key],data:r.props.values,allowEmpty:r.props.allowEmpty})):r.props.allowEmpty?e:p({},r.props.column.key,g({oldValue:r.props.defaultOption,changedValue:e[r.props.column&&r.props.column.key],data:r.props.values,allowEmpty:r.props.allowEmpty}))},r}var r,d,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(d=[{key:"render",value:function(){var e=this.props.values.map((function(e){return{label:e,value:e}})),t=h({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props),{data:e,defaultOption:this.props.defaultOption||b(this.props.values)});return f.createElement(y,o({},t,{filter:this.props.filter}))}}])&&a(r.prototype,d),m&&a(r,m),t}(m);p(v,"propTypes",{column:d.object,dataType:d.string,defaultOption:d.string,forceSelection:d.bool,allowEmpty:d.bool,inputProps:d.object,isValid:d.func,onBlur:d.func,typeName:d.string,url:d.string,value:d.string,filter:d.string,values:d.array}),p(v,"defaultProps",{isValid:function(){return!0},dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0}),e.exports=v},2810:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(15),a=r(71),l=r(2811).getWpsPayload,s=r(26),c=r(2812).API,u=r(13),p=u.endsWith,f=u.head,d=u.isNil,m=r(55),y=function(e){var t=e.searchText,r=void 0===t?"":t,n=e.queriableAttributes,o=void 0===n?[]:n,i=e.predicate,a=void 0===i?"ILIKE":i,l=f(o),s=r.toLowerCase(),c="strToLowerCase(".concat(l,") ").concat(a," '%").concat(s,"%'");return d(l)?"":"("+c+")"};e.exports={createPagedUniqueAutompleteStream:function(e){return e.distinctUntilChanged((function(e){var t=e.value,r=e.currentPage,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(n.value!==t||n.currentPage!==r)})).throttle((function(e){return i.Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return i.Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=l({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return i.Observable.fromPromise(a.post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return i.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return i.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},createWFSFetchStream:function(e){return i.Observable.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.value;return t===n})).debounce((function(e){return i.Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,r=e.currentPage,n=arguments.length>1?arguments[1]:void 0,o=n.filterProps,i=n.currentPage;return t===o&&r===i}))).switchMap((function(e){if(e.performFetch){var t=m.parse(e.url,!0),r="";(p(t.pathname,"wfs")||p(t.pathname,"wms")||p(t.pathname,"ows")||p(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var a=m.format(s({},t,{search:null,pathname:r})),l=s({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:a,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:y,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return i.Observable.fromPromise(c.Utils.getService("wfs")(e.value,l).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return i.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return i.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})},singleAttributeFilter:y}},2811:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(762),i=r(780)({}).and;e.exports={getWpsPayload:function(e){var t=e.layerName,r=e.layerFilter,a=e.attribute,l=e.maxFeatures,s=e.startIndex,c=e.value,u=c?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+a+"</ogc:PropertyName>   <ogc:Literal>*"+c+"*</ogc:Literal></ogc:PropertyIsLike>":"",p=r&&!r.disabled&&o.isFilterValid(r)?o.toOGCFilterParts(r,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+t+'">'+(u.length>0||p.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+i.apply(void 0,n(p).concat([u]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+a+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+a+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+l+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},2812:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var o=r(2498),i=r(26),a=r(3774),l=r(772).generateTemplateString,s=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,s=e.predicate,c=l(n||"")(i),u=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=r?[r]:[]),u.length>0&&(t="(".concat(u.map((function(e){return a.map((function(t){return"".concat(t," ").concat(s," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t=t?t.concat(c):c||null},c={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(2579).geocode(e,t).then((function(e){return t.returnFullData?e:a.nominatimToGeoJson(e.data)}))},wfs:function(e,t){var r=t.url,a=t.typeName,l=t.queriableAttributes,c=void 0===l?[]:l,u=t.outputFormat,p=void 0===u?"application/json":u,f=t.predicate,d=void 0===f?"ILIKE":f,m=t.staticFilter,y=void 0===m?"":m,g=t.blacklist,b=void 0===g?[]:g,h=t.item,v=t.fromTextToFilter,O=void 0===v?s:v,E=t.returnFullData,w=void 0!==E&&E,S=n(t,["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"]),P=O({searchText:e,staticFilter:y,blacklist:b,item:h,queriableAttributes:c,predicate:d});return o.getFeatureSimple(r,i({maxFeatures:10,typeName:a,outputFormat:p,cql_filter:P},S)).then((function(e){return w?e:e.features}))}},u={setService:function(e,t){c[e]=t},getService:function(e){return c[e]?c[e]:null}};e.exports={API:{Services:c,Utils:u}}},2813:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=r(2161)(),c=r(2317),u=r(2385),p=r(2210),f=r(407).compose,d=r(13).get,m=r(3780).Textfit,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=void 0===t?"":t,n=e.uom,o=void 0===n?"":n,i=l(e,["value","uom"]);return b.createElement(m,a({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},i),b.createElement(p,{value:r}),b.createElement("span",{style:{fontSize:"75%"}},o))},g=f(s,c,u),b=r(1);e.exports=g((function(e){var t=e.series,r=void 0===t?[]:t,n=e.data,i=void 0===n?[]:n,a=e.options,l=void 0===a?{}:a,s=e.style,c=void 0===s?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:s;return b.createElement("div",{className:"counter-widget-view"},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataKey,r=arguments.length>1?arguments[1]:void 0;return b.createElement(y,{key:t,uom:d(l,"seriesOptions[".concat(r,"].uom")),value:i[0][t],style:o({textAlign:"center"},c)})})))}))},2814:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(1),i=r(2138),a=r(2103);e.exports=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i((function(e){var t=e.layers;return 0===(void 0===t?[]:t).length}),(n(e={},t?"tooltip":"title",o.createElement(a,{msgId:"widgets.errors.noLegend"})),n(e,"description",!t&&o.createElement(a,{msgId:"widgets.errors.noLegendDescription"})),e))}},2815:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(1),s=r(13).isNil,c=r(2239),u=r(758),p=u.Glyphicon,f=u.Grid,d=u.Row,m=u.Col,y=r(2743),g=r(2742);e.exports=function(e){var t=e.layers,r=void 0===t?[]:t,o=e.onChange,a=void 0===o?function(){}:o,u=e.legendProps,b=void 0===u?{}:u,h=e.currentZoomLvl,v=e.disableOpacitySlider,O=void 0===v||v,E=e.disableVisibility,w=void 0===E||E,S=e.scales;return l.createElement(c,{className:"compact-legend-grid",size:"sm",items:r.map((function(e){return{title:e.title,preview:w?null:l.createElement(p,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?l.createElement("div",null,l.createElement(f,{fluid:!0},l.createElement(d,null,l.createElement(m,{xs:12,className:"ms-legend-container"},l.createElement(g,n({node:i({},e),currentZoomLvl:h,scales:S},b))))),!O&&l.createElement("div",{className:"mapstore-slider",onClick:function(e){e.stopPropagation()}},l.createElement(y,{disabled:!e.visibility,start:[s(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:function(t){return a(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}}))):null}}))})}},2816:function(e,t){e.exports={SET_EDITING:"DASHBOARD:SET_EDITING",setEditing:function(e){return{type:"DASHBOARD:SET_EDITING",editing:e}},SET_EDITOR_AVAILABLE:"DASHBOARD:SET_AVAILABLE",setEditorAvailable:function(e){return{type:"DASHBOARD:SET_AVAILABLE",available:e}},SHOW_CONNECTIONS:"DASHBOARD:SHOW_CONNECTIONS",triggerShowConnections:function(e){return{type:"DASHBOARD:SHOW_CONNECTIONS",show:e}},TRIGGER_SAVE_MODAL:"DASHBOARD:TRIGGER_SAVE_MODAL",triggerSave:function(e){return{type:"DASHBOARD:TRIGGER_SAVE_MODAL",show:e}},TRIGGER_SAVE_AS_MODAL:"DASHBOARD:TRIGGER_SAVE_AS_MODAL",triggerSaveAs:function(e){return{type:"DASHBOARD:TRIGGER_SAVE_AS_MODAL",show:e}},SAVE_DASHBOARD:"DASHBOARD:SAVE_DASHBOARD",saveDashboard:function(e){return{type:"DASHBOARD:SAVE_DASHBOARD",resource:e}},SAVE_ERROR:"DASHBOARD:SAVE_ERROR",dashboardSaveError:function(e){return{type:"DASHBOARD:SAVE_ERROR",error:e}},DASHBOARD_SAVED:"DASHBOARD:DASHBOARD_SAVED",dashboardSaved:function(e){return{type:"DASHBOARD:DASHBOARD_SAVED",id:e}},LOAD_DASHBOARD:"DASHBOARD:LOAD_DASHBOARD",loadDashboard:function(e){return{type:"DASHBOARD:LOAD_DASHBOARD",id:e}},DASHBOARD_LOADED:"DASHBOARD:DASHBOARD_LOADED",DASHBOARD_RESET:"DASHBOARD:DASHBOARD_RESET",resetDashboard:function(){return{type:"DASHBOARD:DASHBOARD_RESET"}},dashboardLoaded:function(e,t){return{type:"DASHBOARD:DASHBOARD_LOADED",resource:e,data:t}},DASHBOARD_LOADING:"DASHBOARD:DASHBOARD_LOADING",dashboardLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:"DASHBOARD:DASHBOARD_LOADING",name:t,value:e}},DASHBOARD_LOAD_ERROR:"DASHBOARD:DASHBOARD_LOAD_ERROR",dashboardLoadError:function(e){return{type:"DASHBOARD:DASHBOARD_LOAD_ERROR",error:e}}}},2850:function(e,t,r){var n=r(1),o=r(758),i=o.Button,a=o.Row,l=o.Col,s=o.Glyphicon,c=r(2103);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,o=e.children;return n.createElement("div",{className:"mapstore-flex-container"},n.createElement("div",{className:"m-header bg-body widgets-builder-header"},n.createElement(a,null,n.createElement(l,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},n.createElement(i,{onClick:function(){return r()},className:"pull-left on-close-btn square-button no-border "},n.createElement(s,{glyph:"1-close"})),n.createElement("span",{style:{padding:"50px 0 0 0",fontSize:16}},n.createElement(c,{msgId:"widgets.builder.header.title"})),n.createElement("div",{style:{display:"flex"},className:"square-button pull-right no-border"},n.createElement(s,{glyph:"stats",className:"text-primary"})))),n.createElement(a,{className:"text-center"},n.createElement("div",{className:"m-padding-md"},o))))}},2851:function(e,t,r){var n=r(2525).getWPSURL,o=r(15).Observable,i=r(71),a=r(776).interceptOGCError;e.exports={describeProcess:function(e,t){return o.defer((function(){return i.get(n(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(a)}}},2852:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(15),l=r(407),s=l.compose,c=l.withState,u=l.mapPropsStream,p=r(2361).addSearch,f=r(2308).recordToLayer;e.exports=s(c("selected","setSelected",null),c("layer","setLayer",null),u((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected,r=e.layerValidationStream,n=void 0===r?function(e){return e}:r,o=e.setLayer,i=void 0===o?function(){}:o;return a.Observable.of(f(t)).let(n).switchMap((function(){return p(f(t))})).do((function(e){return i(e)})).mapTo({canProceed:!0}).catch((function(e){return a.Observable.of({error:e,canProceed:!1})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.error,n=arguments.length>1?arguments[1]:void 0;return o({error:r,canProceed:t},n)}))})))},2853:function(e,t,r){var n=r(407).defaultProps;e.exports=n({data:[{name:"A",variable:2,pv:2,amt:2},{name:"B",variable:.5,pv:.5,amt:.5},{name:"C",variable:3,pv:3,amt:3},{name:"D",variable:1,pv:1,amt:2}],series:[{dataKey:"variable",color:"#078aa3"}],xAxis:{dataKey:"name",show:!1}})},2854:function(e,t,r){var n=r(407),o=n.compose,i=n.withProps,a=r(13).find,l=function(e){return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return 0!==t.indexOf("gml:")})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return{label:t,value:t}}))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a(t,{name:e});return!r||"number"!==r.localType&&"int"!==r.localType?[{value:"Count",label:"COUNT"}]:[{value:"Count",label:"COUNT"},{value:"Sum",label:"SUM"},{value:"Average",label:"AVG"},{value:"StdDev",label:"STDDEV"},{value:"Min",label:"MIN"},{value:"Max",label:"MAX"}]};e.exports=o(i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.data,o=void 0===n?{}:n;return{options:l(r),aggregationOptions:s(o.options&&o.options.aggregationAttribute,r)}})))},2855:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(13),l=a.head,s=a.get,c=a.isNil,u=r(758),p=u.Row,f=u.Col,d=u.Form,m=u.FormGroup,y=u.FormControl,g=u.ControlLabel,b=u.Glyphicon,h=r(2103),v=r(2162),O=r(2307),E=r(3877),w=r(2283),S=r(2233),P=r(2482),T=[{name:"global.colors.random",schema:"qualitative",options:{base:190,range:360,options:{}}},{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}}],j=function(e){return"pie"!==e?T.filter((function(e){return"qualitative"!==e.schema})):T},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"widgets.".concat(e,".").concat(t.type||t.widgetType||"default")},C=i.createElement(h,{msgId:A("placeHolder")}),x=function(e){var t=i.createElement(h,{msgId:A("advancedOptions",e)});return i.createElement("span",null,i.createElement("span",{style:{cursor:"pointer"}},t),i.createElement("button",{className:"close"},e.panel?i.createElement(b,{glyph:"glyphicon glyphicon-collapse-down"}):i.createElement(b,{glyph:"glyphicon glyphicon-expand"})))};e.exports=function(e){var t=e.data,r=void 0===t?{options:{}}:t,a=e.onChange,u=void 0===a?function(){}:a,b=e.options,T=void 0===b?[]:b,D=e.formOptions,_=void 0===D?{showGroupBy:!0,showUom:!1,showColorRampSelector:!0,showLegend:!0,advancedOptions:!0}:D,I=e.aggregationOptions,F=void 0===I?[]:I,k=e.sampleChart;return i.createElement(p,null,i.createElement(w,{title:i.createElement(h,{msgId:"widgets.chartOptionsTitle"})}),i.createElement(f,{xs:12},i.createElement("div",{style:{marginBottom:"30px"}},k)),i.createElement(f,{xs:12},i.createElement(d,{className:"chart-options-form",horizontal:!0},_.showGroupBy?i.createElement(m,{controlId:"groupByAttributes",className:"mapstore-block-width"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("groupByAttributes",r)})),i.createElement(f,{sm:6},i.createElement(v,{value:r.options&&r.options.groupByAttributes,options:T,placeholder:C,onChange:function(e){u("options.groupByAttributes",e&&e.value)}}))):null,i.createElement(m,{controlId:"aggregationAttribute",className:"mapstore-block-width"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("aggregationAttribute",r)})),i.createElement(f,{sm:6},i.createElement(v,{value:r.options&&r.options.aggregationAttribute,options:T,placeholder:C,onChange:function(e){u("options.aggregationAttribute",e&&e.value)}}))),i.createElement(m,{controlId:"aggregateFunction",className:"mapstore-block-width"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("aggregateFunction",r)})),i.createElement(f,{sm:6},i.createElement(v,{value:r.options&&r.options.aggregateFunction,options:F,placeholder:C,onChange:function(e){u("options.aggregateFunction",e&&e.value)}}))),_.showUom?i.createElement(m,{controlId:"uom"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("uom",r)})),i.createElement(f,{sm:6},i.createElement(y,{value:s(r,"options.seriesOptions[0].uom"),type:"text",onChange:function(e){return u("options.seriesOptions.[0].uom",e.target.value)}}))):null,_.showColorRampSelector?i.createElement(m,{controlId:"colorRamp",className:"mapstore-block-width"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("colorRamp",r)})),i.createElement(f,{sm:6},i.createElement(E,{items:j(r.type),value:l(j(r.type).filter((function(e){return r.autoColorOptions&&e.name===r.autoColorOptions.name}))),samples:"pie"===r.type?5:1,onChange:function(e){u("autoColorOptions",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.options,{name:e.name}))}}))):null,_.showLegend?i.createElement(m,{controlId:"displayLegend"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("displayLegend",r)})),i.createElement(f,{sm:6},i.createElement(P,{checked:r.legend,onChange:function(e){u("legend",e)}}))):null,_.advancedOptions&&"bar"===r.type||"line"===r.type?i.createElement(S,{id:"displayCartesian",header:x(r),collapsible:!0,expanded:r.panel,onSwitch:function(e){u("panel",e)}},i.createElement(m,{controlId:"AdvancedOptions"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("displayCartesian",r)})),i.createElement(f,{sm:6},i.createElement(P,{checked:!(!r.cartesian&&!1!==r.cartesian)&&!r.cartesian,onChange:function(e){u("cartesian",!e)}})),i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("yAxis",r)})),i.createElement(f,{sm:6},i.createElement(P,{checked:!r.yAxis&&!1!==r.yAxis||!r.yAxis,onChange:function(e){u("yAxis",!e)}})),i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("xAxisAngle",r)})),i.createElement(f,{sm:6},i.createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},i.createElement(O,{key:"priority",format:{to:function(e){return parseInt(e,10)},from:function(e){return Number(e)}},onSlide:function(e){u("xAxisAngle",parseInt(e[0],10))},range:{min:0,max:90},start:[c(r.xAxisAngle)?0:r.xAxisAngle],step:15,tooltips:[!0]})))),i.createElement(m,{controlId:"yAxisLabel"},i.createElement(f,{componentClass:g,sm:6},i.createElement(h,{msgId:A("yAxisLabel",r)})),i.createElement(f,{sm:6},i.createElement(y,{value:r.yAxisLabel,type:"text",onChange:function(e){return u("yAxisLabel",e.target.value)}})))):null)))}},2856:function(e,t,r){var n=r(1),o=r(2103),i=r(407).defaultProps;e.exports=i({title:n.createElement(o,{msgId:"widgets.builder.wizard.selectALayer"})})(r(3884))},2857:function(e,t,r){var n=r(3885),o=r(407),i=o.compose,a=o.defaultProps,l=r(3886);e.exports=function(e){var t=e.loadPage,r=e.scrollSpyOptions,o=e.loadStreamOptions,s=e.hasMore,c=e.isScrolled;return i(n(t),a({hasMore:s,isScrolled:c}),l(r,o))}},2858:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.compose,a=o.withProps,l=o.withHandlers,s=r(88).connect,c=r(13),u=c.castArray,p=c.find,f=r(137).normalizeLayer,d=r(2120).onEditorChange;e.exports=i(a((function(e){var t=e.editorData,r=void 0===t?{}:t;return{layers:r.map&&r.map.layers}})),s((function(){return{}}),{setLayers:function(e){return d("map.layers",e)}}),l({addLayer:function(e){var t=e.layers,r=void 0===t?[]:t,o=e.setLayers,i=void 0===o?function(){}:o;return function(e){return i([].concat(n(r),[f(e)]))}},removeLayersById:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o(r.filter((function(t){return!p(u(e),(function(e){return e===t.id}))})))}}}))},2859:function(e,t,r){var n=r(88).connect,o=r(195).createSelector,i=r(2120).changeEditorSetting,a=r(2143).getEditorSettings;e.exports=n(o(a,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editNode;return{editNode:t}})),{setEditNode:function(e){return i("editNode",e)},closeNodeEditor:function(){return i("editNode",void 0)}})},2860:function(e,t,r){var n=r(407).withHandlers,o=r(137).belongsToGroup,i=r(13).findIndex;e.exports=n({changeLayerProperty:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,o=void 0===n?{}:n;return function(e,t,n){var a=i(o.layers||[],{id:e});r("map.layers[".concat(a,"].").concat(t),n)}},changeLayerPropertyByGroup:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,a=void 0===n?{}:n;return function(e,t,n){return a.layers.filter(o(e)).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return i(a.layers||[],{id:t})})).filter((function(e){return e>=0})).map((function(e){return r("map.layers[".concat(e,"].").concat(t),n)}))}},changeGroupProperty:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.map,o=void 0===n?[]:n;return function(e,t,n){var a=i(o.groups||[],{id:e});r("map.groups[".concat(a,"].").concat(t),n)}},updateMapEntries:function(e){var t=e.onChange,r=void 0===t?function(){}:t;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return r("map[".concat(t,"]"),e[t])}))}}})},2861:function(e,t,r){var n=r(137),o=r(407).withProps;e.exports=o((function(e){var t,r,o,i=e.map;return{nodes:(t=n.splitMapAndLayers(i),r=t.layers,o=void 0===r?{}:r,n.denormalizeGroups(o.flat||[],o.groups||[]).groups)}}))},2862:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(195).createSelector,l=r(2143),s=l.getFloatingWidgets,c=l.getFloatingWidgetsCurrentLayout,u=l.getCollapsedIds,p=l.getCollapsedState,f=r(13),d=f.find,m=f.findIndex,y=f.sortBy,g=function(e){return!e.dataGrid||!e.dataGrid.static},b=a(s,u,c,p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return y(e.filter(g).map((function(e){return m(t,(function(t){return t===e.id}))>=0?o({},e,{collapsed:!0}):e})),(function(e){var t=n[e.id]&&n[e.id].layout,o=d(r,{i:e.id})||t||{},i=o.x,a=void 0===i?0:i,l=o.y;return 100*(void 0===l?0:l)+a}))}));e.exports={trayWidgets:b}},2863:function(e,t,r){var n=r(407),o=n.compose,i=n.withProps,a=n.defaultProps,l=r(2794);e.exports={filterHiddenWidgets:o(a({toolsOptions:{seeHidden:"user.role===ADMIN"}}),l("toolsOptions",{asObject:!0}),i((function(e){var t=e.widgets,r=e.toolsOptions;return{widgets:(void 0===r?{seeHidden:!1}:r).seeHidden?t:t.filter((function(e){return!e.hide}))}})))}},2864:function(e,t,r){e.exports={gridTools:r(3949),toolbarEvents:r(3950),gridEvents:r(3951),pageEvents:r(3952)}},2865:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(758),y=m.Grid,g=m.Row,b=m.Col,h=m.Button,v=m.Glyphicon,O=m.Panel,E=m.Tooltip,w=r(2116),S=r(2114),P=r(3975),T=r(2394),j=r(3976),A=r(3977),C=r(3981),x=r(3982),D=r(2233),_=r(3983),I=r(136),F=r(2241),k=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getComboValues",(function(e,t){if(e&&e.dependson){var n=r.props.filterFields.filter((function(t){return t.attribute===e.dependson.field}))[0];if(n&&n.value){var o=t.filter((function(e){return e.attribute===n.attribute}))[0],i=o.values.filter((function(e){return e[o.valueId]===n.value}))[0][e.dependson.from],a=e.values.filter((function(t){return t[e.dependson.to]===i}));return e&&"list"===e.type?a.map((function(t){return{id:e.fidPrefix?e.fidPrefix+"."+t[e.valueId]:t[e.valueId],name:t[e.valueLabel]}})):null}}return e&&"list"===e.type?e.values.map((function(t){return{id:e.fidPrefix?e.fidPrefix+"."+t[e.valueId]:t[e.valueId],name:t[e.valueLabel]}})):null})),p(c(r),"getOperator",(function(e){switch(e&&e.type?e.type:""){case"list":return["="];case"string":return["=","like","ilike","isNull"];case"boolean":return["="];default:return["=",">","<",">=","<=","<>","><"]}})),p(c(r),"renderFilterField",(function(e){var t=r.props.attributes.filter((function(t){return t.attribute===e.attribute}))[0],n=r.getComboValues(t,r.props.attributes),o=e.exception?d.createElement(S,{placement:"bottom",overlay:d.createElement(E,{id:e.rowId+"tooltip"},d.createElement("strong",null,d.createElement(F.Message,{msgId:e.exception||""})))},d.createElement(h,{id:"remove-filter-field",className:"filter-buttons no-border",style:{backgroundColor:"red"},onClick:function(){return r.props.actions.onRemoveFilterField(e.rowId)}},d.createElement(v,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):d.createElement(S,{placement:"top",overlay:d.createElement(E,{id:e.rowId+"tooltip"},d.createElement("strong",null,d.createElement(F.Message,{msgId:"queryform.attributefilter.delete"})))},d.createElement(h,{id:"remove-filter-field",className:"filter-buttons no-border",onClick:function(){return r.props.actions.onRemoveFilterField(e.rowId)}},d.createElement(v,{glyph:r.props.removeButtonIcon})));return d.createElement("div",{key:e.rowId},d.createElement(g,{className:"filter-field-row filter-field-row"},d.createElement(b,{xs:12},d.createElement(P,{deleteButton:o,attributes:r.props.attributes,filterField:e,operatorOptions:r.getOperator(t),onUpdateField:r.props.actions.onUpdateFilterField,toggleMenu:r.props.actions.toggleMenu,maxFeaturesWPS:r.props.maxFeaturesWPS,onUpdateExceptionField:r.props.actions.onUpdateExceptionField,onChangeCascadingValue:r.props.actions.onChangeCascadingValue},d.createElement(T,{attType:"list",valueField:"id",textField:"name",fieldOptions:n||[],comboFilter:"contains"}),d.createElement(j,{attType:"date",dateEnabled:!0,operator:e.operator}),d.createElement(j,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:e.operator}),d.createElement(j,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:e.operator}),d.createElement(A,{operator:e.operator,attType:"number"}),r.props.autocompleteEnabled?d.createElement(x,{filterField:e,attType:"string"}):d.createElement(C,{operator:e.operator,attType:"string"}),d.createElement(T,{fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"})))))})),p(c(r),"renderGroupButtons",(function(e){var t=[];return e.index<=r.props.groupLevels&&t.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",tooltipId:"queryform.attributefilter.add_group",onClick:function(){return r.props.actions.onAddGroupField(e.id,e.index)}}),t.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:r.props.addButtonIcon,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return r.props.actions.onAddFilterField(e.id)}}),e.groupId&&t.push({key:"remove-group",className:"filter-buttons no-border",tooltipId:"queryform.attributefilter.delete",glyph:r.props.removeButtonIcon,onClick:function(){return r.props.actions.onRemoveGroupField(e.id)}}),d.createElement(w,{buttons:t,btnDefaultProps:{}})})),p(c(r),"renderGroupHeader",(function(e){return d.createElement(y,{fluid:!0},d.createElement(g,{className:"logicHeader filter-field-row"},d.createElement(b,{xs:12},d.createElement(g,{className:"filter-field-row"},d.createElement("div",{key:"filter-logic-header",className:"filter-logig-header-text m-label"},d.createElement("span",{className:"group_label_a"},d.createElement(F.Message,{msgId:"queryform.attributefilter.group_label_a"})),"",d.createElement(_,{options:r.props.logicComboOptions,valueField:"logic",value:e.logic,onSelect:function(t){return r.props.actions.onUpdateLogicCombo(e.id,t)},labelRenderer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return d.createElement(F.Message,{msgId:t})}}),"",d.createElement("span",{className:"group_label_b"},d.createElement(F.Message,{msgId:"queryform.attributefilter.group_label_b"})),d.createElement("span",{className:"pull-right"},r.renderGroupButtons(e)))))))})),p(c(r),"renderGroupField",(function(e){var t=r.props.filterFields.filter((function(t){return t.groupId===e.id})),n=r.props.groupFields.filter((function(t){return t.groupId===e.id})),i=[].concat(o(t),o(n)).map((function(e){return void 0!==e.rowId?r.renderFilterField(e):r.renderGroupField(e)}));return d.createElement(O,{className:"mapstore-conditions-group",key:e.id},r.renderGroupHeader(e),d.createElement("div",{className:"query-content"},i))})),p(c(r),"renderHeader",(function(){return I.getMessageById(r.context.messages,"queryform.attributefilter.attribute_filter_header")})),p(c(r),"updateLogicCombo",(function(e,t,n){var o=r.props.logicComboOptions.filter((function(e){return n===I.getMessageById(r.context.messages,e.name)}))[0].logic;r.props.actions.onUpdateLogicCombo(e,o)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return this.props.withContainer?d.createElement(D,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):d.createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(k,"propTypes",{groupLevels:f.number,withContainer:f.bool,autocompleteEnabled:f.bool,maxFeaturesWPS:f.number,groupFields:f.array,filterFields:f.array,attributes:f.array,fieldWidth:f.string,removeButtonIcon:f.string,addButtonIcon:f.string,logicComboOptions:f.array,attributePanelExpanded:f.bool,actions:f.object}),p(k,"contextTypes",{messages:f.object}),p(k,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}}}),e.exports=k},2867:function(e,t,r){var n=r(13).get,o={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number"};e.exports={describeFeatureTypeToAttributes:function(e){return n(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&o[e.type]})).map((function(e){return{label:e.name,attribute:e.name,type:o[e.type],valueId:"id",valueLabel:"name",values:[]}}))}}},2869:function(e,t,r){var n=r(4040);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},2870:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,f=r(0),d=r(1),m=r(758).Label,y=r(2210),g=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return d.createElement("h5",null,d.createElement(m,{bsSize:"lg",bsStyle:"info"},d.createElement("span",null,"Lat: "),d.createElement(y,{key:"latD",numberParams:{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lat}),d.createElement("span",null," Lng: "),d.createElement(y,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lng}),d.createElement("span",null," ")))}}])&&i(r.prototype,n),c&&i(r,c),t}(d.Component);c=g,u="propTypes",p={position:f.shape({lng:f.number,lat:f.number})},u in c?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p,e.exports=g},2871:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(2321),i=r(1),a=r(33),l=r(2397),s=r(2398),c={availableCRS:{"EPSG:4326":{label:"EPSG:4326"}},filterAllowedCRS:["EPSG:4326"],additionalCRS:{},projectionDefs:[]};describe("CRSSelector",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){a.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=a.render(i.createElement(l,n({enabled:!0},c)),document.getElementById("container"));o(e).toExist();var t=a.findDOMNode(e);o(t).toExist();var r=t.getElementsByTagName("select").item(0).childNodes;o(r.length).toBe(1)})),it("checks if a change of the combo fires the proper action",(function(){var e,t=a.render(i.createElement(l,n({enabled:!0},c,{onCRSChange:function(t){e=t}})),document.getElementById("container")),r=a.findDOMNode(t).getElementsByTagName("select").item(0);r.value="EPSG:4326",s.Simulate.change(r,{target:{value:"EPSG:4326"}}),o(e).toBe("EPSG:4326")}))}))},2877:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(2321),u=r(0),p=r(1),f=r(33),d=r(2395);describe("MousePosition",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){f.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks enabled",(function(){var e=f.render(p.createElement(d,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.id).toExist();var r=t.getElementsByTagName("button");c(r).toExist(),c(r.length).toBe(0)})),it("checks disabled",(function(){var e=f.render(p.createElement(d,{enabled:!1,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toNotExist()})),it("checks no position",(function(){var e=f.render(p.createElement(d,{enabled:!0}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(-1!==t.innerText.indexOf("...")).toBe(!0)})),it("checks no elevation",(function(){var e=f.render(p.createElement(d,{enabled:!0}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(0)})),it("checks elevation enabled",(function(){var e=f.render(p.createElement(d,{enabled:!0,showElevation:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(1),c(t.innerHTML).toContain("13")})),it("checks default templates degrees",(function(){var e=f.render(p.createElement(d,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.innerHTML).toContain("Lat:"),c(t.innerHTML).toContain("Lng:")})),it("checks default templates meters",(function(){var e=f.render(p.createElement(d,{enabled:!0,crs:"EPSG:3857",mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.innerHTML).toContain("Y:"),c(t.innerHTML).toContain("X:")})),it("checks custom template",(function(){var e,t,r,n=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return p.createElement("div",null,this.props.position.lng,",",this.props.position.lat)}}])&&i(r.prototype,n),c&&i(r,c),t}(p.Component);e=n,t="propTypes",r={position:u.object},t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;var m=f.render(p.createElement(d,{degreesTemplate:n,enabled:!0,mousePosition:{x:11,y:12,crs:"EPSG:4326"}}),document.getElementById("container"));c(m).toExist();var y=f.findDOMNode(m);c(y).toExist(),c(y.innerHTML).toContain("11"),c(y.innerHTML).toContain("12")})),it("checks custom elevation template",(function(){var e=f.render(p.createElement(d,{elevationTemplate:function(e){return p.createElement("div",null,"Z: ",e)},showElevation:!0,enabled:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.innerHTML).toContain("Z:"),c(t.innerHTML).toContain("13")})),it("checks copy to clipboard enabled",(function(){var e=f.render(p.createElement(d,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0}),document.getElementById("container"));c(e).toExist();var t=f.findDOMNode(e);c(t).toExist(),c(t.id).toExist();var r=t.getElementsByTagName("button");c(r).toExist(),c(r.length).toBe(1)})),it("checks copy to clipboard action",(function(){var e={onCopy:function(){}},t=c.spyOn(e,"onCopy"),r=f.render(p.createElement(d,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=f.findDOMNode(r).getElementsByTagName("button")[0];c.spyOn(window,"prompt").andReturn(!0),n.click(),c(t.calls.length).toBe(1)})),it("checks lat ang lag value",(function(){var e={onCopy:function(){}},t=c.spyOn(e,"onCopy"),r=f.render(p.createElement(d,{enabled:!0,mousePosition:{x:Math.floor(1.1),y:Math.floor(1.2),crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=f.findDOMNode(r).getElementsByTagName("button")[0];c.spyOn(window,"prompt").andReturn(!0),n.click(),c(t.calls.length).toBe(1)}))}))},2878:function(e,t,r){var n=r(2321),o=r(1),i=r(33),a=r(2556),l=r(2398),s=r(412).IntlProvider;describe("MousePositionLabelDM",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){i.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=i.render(o.createElement(a,null),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat:  ' Lng:  ' ");var r=l.scryRenderedDOMComponentsWithTag(e,"span");n(r.length).toBe(11),n(r[1].textContent).toBe("Lat: "),n(r[2].textContent).toBe(""),n(r[3].textContent).toBe(" "),n(r[4].textContent).toBe(""),n(r[5].textContent).toBe("' "),n(r[6].textContent).toBe("Lng: "),n(r[7].textContent).toBe(""),n(r[8].textContent).toBe(" "),n(r[9].textContent).toBe(""),n(r[10].textContent).toBe("' ")})),it("a position with defaults",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat: 13 32.000' Lng: 028 18.000' ")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat: 43 42.436' Lng: 010 28.501' ")}))}))},2879:function(e,t,r){var n=r(2321),o=r(1),i=r(33),a=r(2396),l=r(2398),s=r(412).IntlProvider;describe("MousePositionLabelDMS",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){i.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=i.render(o.createElement(a,null),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat:  ' '' Lng:  ' ''");var r=l.scryRenderedDOMComponentsWithTag(e,"span");n(r.length).toBe(16),n(r[1].textContent).toBe("Lat: "),n(r[2].textContent).toBe(""),n(r[3].textContent).toBe(" "),n(r[4].textContent).toBe(""),n(r[5].textContent).toBe("' "),n(r[6].textContent).toBe(""),n(r[7].textContent).toBe("''"),n(r[8].className).toBe("mouseposition-separator"),n(r[9].textContent).toBe(" Lng: "),n(r[10].textContent).toBe(""),n(r[11].textContent).toBe(" "),n(r[12].textContent).toBe(""),n(r[13].textContent).toBe("' "),n(r[14].textContent).toBe(""),n(r[15].textContent).toBe("''")})),it("a position with defaults",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat: 13 31' 60.00'' Lng: 028 18' 00.00''")})),it("position with no rounding but trunc of latD and lngD",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat: 43 42' 26.16'' Lng: 010 28' 30.05''")})),it("position with negative lat and lng correctly truncated ladD e lngD",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat: -00 00' 21.60'' Lng: -000 00' 21.60''")})),it("test sign changes when crossing greenwich meridian and equator parallel and latD lngD are 0",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("Lat: -00 00' 21.60'' Lng: -000 00' 21.60''");var r=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:.006,lat:.006}})),document.getElementById("container"));n(r).toExist();var l=i.findDOMNode(r);n(l).toExist(),n(l.textContent).toBe("Lat: 00 00' 21.60'' Lng: 000 00' 21.60''")}))}))},2880:function(e,t,r){var n=r(2321),o=r(1),i=r(33),a=r(2557),l=r(2398),s=r(412).IntlProvider;describe("MousePositionLabelDMSNW",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){i.unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=i.render(o.createElement(a,null),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe(" ' '' S  ' '' W");var r=l.scryRenderedDOMComponentsWithTag(e,"span");n(r.length).toBe(13),n(r[1].innerText).toBe(""),n(r[2].innerText).toBe(" "),n(r[3].innerText).toBe(""),n(r[4].innerText).toBe("' "),n(r[5].innerText).toBe(""),n(r[6].innerText).toBe("'' S "),n(r[7].innerText).toBe(""),n(r[8].innerText).toBe(" "),n(r[9].innerText).toBe(""),n(r[10].innerText).toBe("' "),n(r[11].innerText).toBe(""),n(r[12].innerText).toBe("'' W")})),it("a position with defaults",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("13 31' 60.00'' N 028 18' 00.00'' E")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=i.render(o.createElement(s,null,o.createElement(a,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));n(e).toExist();var t=i.findDOMNode(e);n(t).toExist(),n(t.textContent).toBe("43 42' 26.16'' N 010 28' 30.05'' E")}))}))},2881:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(7),y=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(o)))),"state",{is:"active"}),p(c(r),"onClick",(function(){return r.props.onClick?r.props.onClick.bind(c(r)):function(){}})),p(c(r),"onDisable",(function(){return r.props.onDisable?r.props.onDisable.bind(c(r)):function(){}})),p(c(r),"onConfirm",(function(){return r.props.onConfirm?r.props.onConfirm():r.props.confirming&&r.props.confirming.onClick?r.props.confirming.onClick():function(){}})),p(c(r),"isDisabled",(function(){return"disabled"===r.state.is})),p(c(r),"isConfirming",(function(){return"confirming"===r.state.is})),p(c(r),"isActive",(function(){return!r.isConfirming()&&!r.isDisabled()})),p(c(r),"handleClick",(function(){return r.isConfirming()&&r.props.disableAfterConfirmed?(r.onConfirm(),r.onDisable(),void r.setState({is:"disabled"})):r.isConfirming()?(r.onConfirm(),void r.setState({is:"active"})):(r.onClick(),void r.setState({is:"confirming"}))})),p(c(r),"handleBlur",(function(){r.setState({is:"active"})})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.children,r=e.buttonProps,n=e.confirming,i=e.disabled,a=this.props,l=a.text,s=a.style,c=a.className,u=void 0===c?"btn btn-sm btn-danger":c,p=this.isDisabled(),f=this.isConfirming();return p&&(l=i&&i.text||"Loading...",u=i&&i.className||"btn btn-sm btn-secondary",s=i&&i.style||{}),f&&(l=n&&n.text||"Confirm?",u=n&&n.className||"btn btn-sm btn-warning",s=n&&n.style||{}),d.createElement("button",o({className:m("confirm-button",u),style:s,onClick:this.handleClick,onBlur:this.handleBlur,disabled:p},r),t,t?" ":"",l)}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(y,"propTypes",{disableAfterConfirmed:f.bool,resetOnBlur:f.bool,onConfirm:f.func,onDisable:f.func,onClick:f.func,text:f.oneOfType([f.string,f.node]),className:f.string,style:f.object,confirming:f.shape({text:f.oneOfType([f.string,f.node]),className:f.string,style:f.object,onClick:f.func}),disabled:f.shape({text:f.oneOfType([f.string,f.node]),className:f.string,style:f.object}),children:f.node,buttonProps:f.object}),p(y,"defaultProps",{resetOnBlur:!0}),e.exports=y},2882:function(e,t){e.exports={SET_SEARCH_CONFIG_PROP:"SET_SEARCH_CONFIG_PROP",RESET_SEARCH_CONFIG:"RESET_SEARCH_CONFIG",UPDATE_SERVICE:"UPDATE_SERVICE",setSearchConfigProp:function(e,t){return{type:"SET_SEARCH_CONFIG_PROP",property:e,value:t}},restServiceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:"RESET_SEARCH_CONFIG",page:e}},updateService:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{type:"UPDATE_SERVICE",service:e,idx:t}}}},2892:function(e,t,r){"use strict";var n=r(0),o=r.n(n),i=r(407),a=r(88),l=r(195),s=r(413),c=r(268),u=r(408),p=r(2304),f=r(4005),d=r(4006),m=r.n(d),y=r(271),g=r(2144),b=r(13),h=function(e){return e.localConfig},v=r(47),O=r.n(v),E=r(198);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S=function(e){return e.context&&e.context.currentContext},P=(Object(l.createSelector)((function(){return Object(b.get)(O.a.getConfigProp("plugins"),"desktop")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{desktop:[].concat(w(e),["Context"])}})),Object(l.createSelector)((function(e){return Object(E.getMonitoredState)(e,function(e){return(h(e)||{}).monitorState}(e))}),(function(e){return JSON.stringify(e)})),r(196)),T=r.n(P);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var D=Object(l.createSelector)(y.userSelector,c.mapInfoLoadingSelector,c.mapSaveErrorsSelector,u.layersSelector,u.groupsSelector,p.backgroundListSelector,f.mapOptionsToSaveSelector,(function(e){return e.searchconfig&&e.searchconfig.textSearchConfig}),c.mapSelector,g.mapTypeSelector,S,(function(e,t,r,n,o,i,a,l,s,c,u){return{user:e,loading:t,errors:r,layers:n,groups:o,backgrounds:i,additionalOptions:a,textSearchConfig:l,map:s,mapType:c,context:u}})),_=Object(i.compose)(Object(a.connect)(D,{saveMap:s.saveMapResource}),Object(i.withProps)({category:"MAP"}),Object(i.getContext)({router:o.a.object}),Object(i.withHandlers)({onClose:function(e){var t=e.onClose,r=e.onResetMapSaveError;return function(){t(),r()}},onSave:function(e){var t=e.map,r=e.layers,n=e.groups,o=e.backgrounds,i=e.textSearchConfig,a=e.additionalOptions,l=e.saveMap,s=e.isMapSaveAs,c=e.user;return function(e){var u,p=T.a.saveMapConfiguration(t,r,n,o,i,a),f={owner:c&&c.name||null},d=e.metadata,m=(e.data,e.id),y=x(e,["metadata","data","id"]);return u=A(s?{data:p,metadata:A({attributes:f},d)}:{data:p,metadata:d,id:m},y),l(u)}}}),m.a)(r(4011));t.a=_},2896:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(2245),a=r(0),l=r.n(a);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){function t(){return c(this,t),p(this,f(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){if(this.label){var e=Math.floor(this.label.getClientRects()[0].width*Math.cos(Math.PI/180*this.props.angle)),t=Math.ceil(this.label.getClientRects()[0].height*Math.sin(Math.PI/180*this.props.angle));this.props.onUpdateLabelLength({marginLeft:e,marginBottom:t})}}},{key:"render",value:function(){var e=this,t=this.props,r=t.x,n=t.y,i=t.payload,a=t.angle;return o.a.createElement("g",{transform:"translate(".concat(r-(a>=75?10:0),",").concat(n+5,")")},o.a.createElement("text",{ref:function(t){e.label=t},x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-".concat(a,")")},i.value))}}])&&u(r.prototype,n),i&&u(r,i),t}(o.a.Component);m(y,"propTypes",{angle:l.a.number,onUpdateLabelLength:l.a.func,payload:l.a.object,x:l.a.number,y:l.a.number}),m(y,"defaultProps",{angle:0,payload:{}});var g=y,b=r(2793),h=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,a=e.threshold,l=e.payload,s=void 0===l?{}:l;return o.a.createElement("g",{transform:"translate(0,3)"},o.a.createElement("text",{style:{fill:"#666"},x:r-5,y:i,textAnchor:"end"},Object(b.shortenLabel)(s.value,a)))};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.xAxis,r=e.yAxis,n=e.cartesian,a=e.xAxisAngle,l=void 0===a?0:a,s=e.shortenChartLabelThreshold,c=e.onUpdateLabelLength,u=void 0===c?function(){}:c;return[t&&!1!==t.show?o.a.createElement(i.XAxis,v({key:"xaxis"},t,{interval:l>0?0:void 0,tick:l>0?o.a.createElement(g,{angle:l,onUpdateLabelLength:u}):void 0})):null,r?o.a.createElement(i.YAxis,v({key:"yaxis",tick:o.a.createElement(h,{threshold:s}),domain:[0,"auto"]},r)):null,!1!==n?o.a.createElement(i.CartesianGrid,v({key:"cartesiangrid"},n)):null]}},3390:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(0),m=r(1),y=r(88).connect,g=r(195).createSelector,b=r(758).Glyphicon,h=r(269),v=h.changeLayerProperties,O=h.changeGroupProperties,E=h.toggleNode,w=h.contextNode,S=h.moveNode,P=h.showSettings,T=h.hideSettings,j=h.updateSettings,A=h.updateNode,C=h.removeNode,x=h.browseData,D=h.selectNode,_=h.filterLayers,I=h.refreshLayerVersion,F=h.hideLayerMetadata,k=h.download,L=r(2369).openQueryBuilder,R=r(2306).getLayerCapabilities,N=r(409).zoomToExtent,M=r(161).error,B=r(408),G=B.groupsSelector,U=B.layersSelector,W=B.selectedNodesSelector,V=B.layerFilterSelector,H=B.layerSettingSelector,z=B.layerMetadataSelector,q=B.wfsDownloadSelector,Q=r(268),Y=Q.mapSelector,K=Q.mapNameSelector,X=r(767).currentLocaleSelector,Z=r(763).widgetBuilderAvailable,J=r(773).generalInfoFormatSelector,$=r(271).userSelector,ee=r(137),te=r(196),re=r(136),ne=r(2103),oe=r(26),ie=r(3392),ae=r(13),le=ae.isObject,se=ae.head,ce=r(267).setControlProperties,ue=r(2120).createWidget,pe=r(2263).getMetadataRecordById,fe=r(2193).activeSelector,de=r(2144).isCesium,me=function e(t,r){return t.reduce((function(t,n){var o=oe({},n);return o.nodes&&(o=oe({},o,{nodes:e(o.nodes,r)})),r.forEach((function(e){o=e.func(o)?oe({},o,e.options):oe({},o)})),t.push(o),t}),[])},ye=function(e,t,r){return-1!==((le(e.title)?e.title[r]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},ge=g([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},G,H,z,q,Y,X,W,V,U,K,fe,Z,J,de,$],(function(e,t,r,n,o,i,a,l,s,c,u,p,f,d,m,y){return{enabled:e,groups:t,settings:r,layerMetadata:n,wfsdownload:o,currentZoomLvl:i&&i.zoom,scales:te.getScales(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),currentLocale:a,selectedNodes:l,filterText:s,generalInfoFormat:d,selectedLayers:c.filter((function(e){return se(l.filter((function(t){return t===e.id})))})),noFilterResults:0===c.filter((function(e){return ye(e,s,a)})).length,selectedGroups:l.map((function(e){return ee.getNode(t,e)})).filter((function(e){return e&&e.nodes})),mapName:u,filteredGroups:me(t,[{options:{showComponent:!0},func:function(){return!s}},{options:{loadingError:!0},func:function(e){return se((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return s&&se((e.nodes||[]).filter((function(t){return ye(t,s,a)||t.nodes&&se(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return se((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&m})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&m}}]),catalogActive:p,activateWidgetTool:f,user:y}})),be=r(2735),he=r(3396),ve=r(3399),Oe=r(2737),Ee=r(2741),we=r(2744),Se=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),f(u(r),"getDefaultGroup",(function(){var e=r.props.groupNodeComponent||Oe;return m.createElement(e,i({onSort:!r.props.filterText&&r.props.activateSortLayer?r.props.onSort:null},r.props.groupOptions,{titleTooltip:r.props.activateTitleTooltip,propertiesChangeHandler:r.props.groupPropertiesChangeHandler,onToggle:r.props.onToggleGroup,style:r.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:r.props.visibilityCheckType,currentLocale:r.props.currentLocale,selectedNodes:r.props.selectedNodes,onSelect:r.props.activateToolsContainer?r.props.onSelectNode:null}))})),f(u(r),"getDefaultLayer",(function(){var e=r.props.layerNodeComponent||Ee;return m.createElement(e,i({},r.props.layerOptions,{titleTooltip:r.props.activateTitleTooltip,showFullTitleOnExpand:r.props.showFullTitleOnExpand,onToggle:r.props.onToggleLayer,activateOpacityTool:r.props.activateOpacityTool,onContextMenu:r.props.onContextMenu,propertiesChangeHandler:r.props.layerPropertiesChangeHandler,onSelect:r.props.activateToolsContainer?r.props.onSelectNode:null,visibilityCheckType:r.props.visibilityCheckType,activateLegendTool:r.props.activateLegendTool,currentZoomLvl:r.props.currentZoomLvl,scales:r.props.scales,currentLocale:r.props.currentLocale,selectedNodes:r.props.selectedNodes,filterText:r.props.filterText,onUpdateNode:r.props.updateNode,hideOpacityTooltip:r.props.hideOpacityTooltip}))})),f(u(r),"renderTOC",(function(){var e=r.getDefaultGroup(),t=r.getDefaultLayer(),n=[r.props.activateToolsContainer,r.props.activateFilterLayer,r.props.activateMapTitle].filter((function(e){return e})),o=n.length>0?" toc-body-sections-"+n.length:" toc-body-sections";return m.createElement("div",null,m.createElement(he,{title:r.props.mapName,showTitle:r.props.activateMapTitle,showFilter:r.props.activateFilterLayer&&(r.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:r.props.activateToolsContainer,onClear:function(){r.props.onSelectNode()},onFilter:r.props.onFilter,filterTooltipClear:m.createElement(ne,{msgId:"toc.clearFilter"}),filterPlaceholder:re.getMessageById(r.context.messages,"toc.filterPlaceholder"),filterText:r.props.filterText,toolbar:m.createElement(ve,{groups:r.props.groups,selectedLayers:r.props.selectedLayers,selectedGroups:r.props.selectedGroups,generalInfoFormat:r.props.generalInfoFormat,settings:r.props.settings,layerMetadata:r.props.layerMetadata,wfsdownload:r.props.wfsdownload,metadataTemplate:r.props.metadataTemplate,maxDepth:r.props.maxDepth,activateTool:{activateToolsContainer:r.props.activateToolsContainer,activateRemoveLayer:r.props.activateRemoveLayer,activateRemoveGroup:r.props.activateRemoveGroup,activateZoomTool:r.props.activateZoomTool,activateQueryTool:r.props.activateQueryTool,activateDownloadTool:r.props.activateDownloadTool,activateSettingsTool:r.props.activateSettingsTool,activateAddLayer:r.props.activateAddLayerButton&&!r.props.catalogActive,activateAddGroup:r.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:r.props.activateMetedataTool,activateWidgetTool:r.props.activateWidgetTool,activateLayerFilterTool:r.props.activateLayerFilterTool},options:{modalOptions:{},settingsOptions:r.props.settingsOptions},style:{chartStyle:r.props.chartStyle},text:{settingsText:m.createElement(ne,{msgId:"layerProperties.windowTitle"}),opacityText:m.createElement(ne,{msgId:"opacity"}),elevationText:m.createElement(ne,{msgId:"elevation"}),saveText:m.createElement(ne,{msgId:"save"}),closeText:m.createElement(ne,{msgId:"close"}),confirmDeleteText:m.createElement(ne,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:m.createElement(ne,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:m.createElement(ne,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:m.createElement(ne,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteCancelText:m.createElement(ne,{msgId:"cancel"}),addLayer:m.createElement(ne,{msgId:"toc.addLayer"}),addLayerTooltip:m.createElement(ne,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:m.createElement(ne,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:m.createElement(ne,{msgId:"toc.addGroup"}),addSubGroupTooltip:m.createElement(ne,{msgId:"toc.addSubGroup"}),createWidgetTooltip:m.createElement(ne,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:m.createElement(ne,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:m.createElement(ne,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:m.createElement(ne,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:m.createElement(ne,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:m.createElement(ne,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:m.createElement(ne,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:m.createElement(ne,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:m.createElement(ne,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:m.createElement(ne,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:m.createElement(ne,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:m.createElement(ne,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:m.createElement(ne,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:m.createElement(ne,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:m.createElement(ne,{msgId:"toc.layerFilterTooltip"})},onToolsActions:{onZoom:r.props.onZoomToExtent,onNewWidget:r.props.onNewWidget,onBrowseData:r.props.onBrowseData,onQueryBuilder:r.props.onQueryBuilder,onDownload:r.props.onDownload,onUpdate:r.props.updateNode,onRemove:r.props.removeNode,onClear:r.props.onSelectNode,onSettings:r.props.onSettings,onUpdateSettings:r.props.updateSettings,onRetrieveLayerData:r.props.retrieveLayerData,onHideSettings:r.props.hideSettings,onReload:r.props.refreshLayerVersion,onAddLayer:r.props.onAddLayer,onAddGroup:r.props.onAddGroup,onGetMetadataRecord:r.props.onGetMetadataRecord,onHideLayerMetadata:r.props.hideLayerMetadata,onShow:r.props.layerPropertiesChangeHandler}})}),m.createElement("div",{className:"mapstore-toc"+o},r.props.noFilterResults&&r.props.filterText?m.createElement("div",null,m.createElement("div",{className:"toc-filter-no-results"},m.createElement(ne,{msgId:"toc.noFilteredResults"}))):m.createElement(be,{onError:r.props.onError,onSort:!r.props.filterText&&r.props.activateSortLayer?r.props.onSort:null,filter:r.getNoBackgroundLayers,nodes:r.props.filteredGroups},m.createElement(we,{groupElement:e,layerElement:t}))))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.groups?this.renderTOC():m.createElement("div",null)}}])&&l(r.prototype,n),o&&l(r,o),t}(m.Component);f(Se,"propTypes",{id:d.number,buttonContent:d.node,groups:d.array,settings:d.object,layerMetadata:d.object,wfsdownload:d.object,metadataTemplate:d.oneOfType([d.string,d.array,d.object,d.func]),refreshMapEnabled:d.bool,groupStyle:d.object,groupPropertiesChangeHandler:d.func,layerPropertiesChangeHandler:d.func,onToggleGroup:d.func,onToggleLayer:d.func,onContextMenu:d.func,onBrowseData:d.func,onQueryBuilder:d.func,onDownload:d.func,onSelectNode:d.func,selectedNodes:d.array,onZoomToExtent:d.func,retrieveLayerData:d.func,onSort:d.func,onSettings:d.func,onRefreshLayer:d.func,onNewWidget:d.func,hideSettings:d.func,updateSettings:d.func,updateNode:d.func,removeNode:d.func,activateTitleTooltip:d.bool,showFullTitleOnExpand:d.bool,activateOpacityTool:d.bool,activateSortLayer:d.bool,activateFilterLayer:d.bool,activateMapTitle:d.bool,activateToolsContainer:d.bool,activateRemoveLayer:d.bool,activateRemoveGroup:d.bool,activateLegendTool:d.bool,activateZoomTool:d.bool,activateQueryTool:d.bool,activateDownloadTool:d.bool,activateSettingsTool:d.bool,activateMetedataTool:d.bool,activateWidgetTool:d.bool,maxDepth:d.number,visibilityCheckType:d.string,settingsOptions:d.object,chartStyle:d.object,currentZoomLvl:d.number,scales:d.array,layerOptions:d.object,spatialOperations:d.array,spatialMethodOptions:d.array,groupOptions:d.object,currentLocale:d.string,onFilter:d.func,filterText:d.string,generalInfoFormat:d.string,selectedLayers:d.array,selectedGroups:d.array,mapName:d.string,filteredGroups:d.array,noFilterResults:d.bool,onAddLayer:d.func,onAddGroup:d.func,onError:d.func,onGetMetadataRecord:d.func,hideLayerMetadata:d.func,activateAddLayerButton:d.bool,activateAddGroupButton:d.bool,activateLayerFilterTool:d.bool,catalogActive:d.bool,refreshLayerVersion:d.func,hideOpacityTooltip:d.bool,layerNodeComponent:d.func,groupNodeComponent:d.func}),f(Se,"contextTypes",{messages:d.object}),f(Se,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!1,activateWidgetTool:!1,activateLayerFilterTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null});var Pe,Te=y(ge,{groupPropertiesChangeHandler:O,layerPropertiesChangeHandler:v,retrieveLayerData:R,onToggleGroup:ee.toggleByType("groups",E),onToggleLayer:ee.toggleByType("layers",E),onContextMenu:w,onBrowseData:x,onQueryBuilder:L,onDownload:k,onSort:S,onSettings:P,onZoomToExtent:N,hideSettings:T,updateSettings:j,updateNode:A,removeNode:C,onSelectNode:D,onFilter:_,onAddLayer:ce.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:ce.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:pe,onError:M,hideLayerMetadata:F,onNewWidget:function(){return ue()},refreshLayerVersion:I})((Pe=Se,function(e){var t=e.addLayersPermissions,r=void 0===t||t,o=e.removeLayersPermissions,a=void 0===o||o,l=e.sortingPermissions,s=void 0===l||l,c=e.addGroupsPermissions,u=void 0===c||c,p=e.removeGroupsPermissions,f=void 0===p||p,d=e.user,y=n(e,["addLayersPermissions","removeLayersPermissions","sortingPermissions","addGroupsPermissions","removeGroupsPermissions","user"]),g=function(e,t){var r=d&&"ADMIN"===d.role||!1;return!(!e&&!r)&&t},b={activateAddLayerButton:g(r,e.activateAddLayerButton),activateRemoveLayer:g(a,e.activateRemoveLayer),activateSortLayer:g(s,e.activateSortLayer),activateAddGroupButton:g(u,e.activateAddGroupButton),activateRemoveGroup:g(f,e.activateRemoveGroup)};return m.createElement(Pe,i({},y,b))})),je={csw:r(2358),wms:r(769),wmts:r(2359),backgrounds:r(2360)};e.exports={TOCPlugin:oe(Te,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:m.createElement(ne,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:m.createElement(b,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:m.createElement("img",{src:ie}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:r(2745),query:r(2746)},epics:r(2747).default(je)}},3391:function(e,t,r){var n=r(71),o=r(55),i=r(26),a=r(275),l={describeCoverage:function(e,t){var r=o.parse(e,!0),l=o.format(i({},r,{query:i({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return n.get(l).then((function(e){var t;return a.parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))}};e.exports=l},3392:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="},3393:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(1),c=r(407),u=c.compose,p=c.branch,f=c.withState,d=r(34),m=r(824),y=function e(t,r,n){var o=t.findIndex((function(e){return e.id===r}));if(-1!==o){var i=t.slice();return n?i[o]=a({},i[o],{},n):i.splice(o,1),i}return t.map((function(t){return a({},t,{nodes:t.nodes&&e(t.nodes,r,n)})}))},g=p((function(e){var t=e.nodes;return d(t)}),u(f("dndState","setDndState",{node:null,parentNodeId:"",newParentNodeId:"",sortIndex:0,illegalDrop:null}),(function(e){return function(t){var r=t.dndState,i=t.nodes,l=o(t,["dndState","nodes"]),c=r.node,u=r.parentNodeId,p=r.newParentNodeId,f=r.illegalDrop,d=function e(t,r){var n=r.node,o=r.sortIndex,i=r.parentNodeId,l=r.newParentNodeId,s=r.illegalDrop;return t&&n?t.map((function(t){if(t.nodes&&t.id===l){var c=l===i?y(t.nodes,n.id,null):t.nodes.slice();return c.splice(o,0,a({},n,{},l===i?{}:{id:n.id+"__placeholder",placeholder:!0,hide:!!s})),a({},t,{nodes:c})}return a({},t,{nodes:e(t.nodes,r)})})):t}([{id:"root",nodes:i}],r)[0],g=function e(t,r){var n=r.node,o=r.newParentNodeId,i=r.parentNodeId;return a({},t,{nodes:m(t.nodes.map((function(a,l){return!a.nodes||a.placeholder||a.hide||n&&a.id===n.id?[a]:[e(a,r)].concat(t.nodes[l+1]&&(t.nodes[l+1].placeholder||n&&t.id===o&&o===i&&t.nodes[l+1].id===n.id)?[]:[{id:a.id+"__dummy",dummy:!0}])})))})}({id:"root",nodes:p!==u||f?y(d.nodes,c.id,{hide:!0}):d.nodes},r);return s.createElement(e,n({},l,{nodes:g.nodes}))}})));e.exports=g},3394:function(e,t,r){var n=r(3395);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3395:function(e,t,r){(e.exports=r(759)()).push([e.i,"",""])},3396:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758),m=d.Grid,y=d.Row,g=d.Col,b=d.Glyphicon,h=r(2499),v=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderTitle",(function(){return p.createElement(y,null,p.createElement(g,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},p.createElement("div",{className:"mapstore-toc-head-title",title:r.props.title},p.createElement(b,{glyph:"1-map"}),"",r.props.title)))})),u(s(r),"renderFilter",(function(){return p.createElement(y,null,p.createElement(g,{xs:12,className:"text-center"},p.createElement(h,{onFocus:r.props.onClear,filterPlaceholder:r.props.filterPlaceholder,tooltipClear:r.props.filterTooltipClear,filterText:r.props.filterText,onFilter:r.props.onFilter})))})),u(s(r),"renderTools",(function(){return p.createElement(y,null,p.createElement(g,{xs:12,className:"text-center"},r.props.toolbar))})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((function(e){return e})),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return p.createElement("div",{className:"mapstore-toc-head"+t},p.createElement(m,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(v,"propTypes",{title:f.string,filterText:f.string,filterPlaceholder:f.oneOfType([f.object,f.string]),showTitle:f.bool,showFilter:f.oneOfType([f.bool,f.number]),showTools:f.bool,toolbar:f.object,onFilter:f.func,onClear:f.func,filterTooltipClear:f.oneOfType([f.object,f.string])}),u(v,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:function(){},onClear:function(){},filterTooltipClear:"Clear"}),e.exports=v},3397:function(e,t,r){var n=r(3398);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3398:function(e,t,r){(e.exports=r(759)()).push([e.i,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""])},3399:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758),m=d.ButtonGroup,y=d.Button,g=d.Glyphicon,b=d.Tooltip,h=r(2114),v=r(2470),O=r(13).head,E=r(2736),w=r(3400),S=r(274).default,P=r(2103),T=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{showDeleteDialog:!1}),u(s(r),"isNestedGroup",(function(){var e=r.props.selectedGroups.map((function(e){return e.id.split(".")}));return O(e.reduce((function(e,t){return e[0]===t[0]?t:[!1]}),e[0]))})),u(s(r),"isLoading",(function(){return O(r.props.selectedLayers.filter((function(e){return e.loading})))})),u(s(r),"getStatus",(function(){var e=r.props,t=e.selectedLayers,n=e.selectedGroups,o=r.isNestedGroup(),i=0===t.length&0===n.length?"DESELECT":"";return i=1===t.length&0===n.length?"LAYER":i,i=o?"GROUP":i,i=t.length>1&0===n.length?"LAYERS":i,i=n.length>1&&!o?"GROUPS":i,i=r.props.selectedLayers.length>0&&r.props.selectedLayers.filter((function(e){return"Error"===e.loadingError})).length===r.props.selectedLayers.length?"".concat(i,"_LOAD_ERROR"):i})),u(s(r),"getSelectedGroup",(function(){return r.props.selectedGroups.length>0&&r.props.selectedGroups[r.props.selectedGroups.length-1]})),u(s(r),"getSelectedNodeDepth",(function(){return"DESELECT"===r.getStatus()?0:r.getSelectedGroup().id.split(".").length+1})),u(s(r),"addLayer",(function(){var e=r.getSelectedGroup();r.props.onToolsActions.onAddLayer(e&&e.id)})),u(s(r),"addGroup",(function(){var e=r.getSelectedGroup();r.props.onToolsActions.onAddGroup(e&&e.id)})),u(s(r),"browseData",(function(){r.props.onToolsActions.onBrowseData({url:r.props.selectedLayers[0].search.url||r.props.selectedLayers[0].url,name:r.props.selectedLayers[0].name,id:r.props.selectedLayers[0].id})})),u(s(r),"download",(function(){r.props.onToolsActions.onDownload({url:r.props.selectedLayers[0].search.url||r.props.selectedLayers[0].url,name:r.props.selectedLayers[0].name,id:r.props.selectedLayers[0].id})})),u(s(r),"checkBbox",(function(){var e=r.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),t=e.length>0?e.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"};return!!O(e)&&"differentCRS"!==t.crs&&t.crs})),u(s(r),"zoomTo",(function(){var e=r.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),t=e.length>1?e.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),e[0]):e[0];r.props.onToolsActions.onZoom(t.bounds,t.crs)})),u(s(r),"showSettings",(function(e){r.props.settings.expanded?r.props.onToolsActions.onHideSettings():"LAYER"===e||"LAYER_LOAD_ERROR"===e?r.props.onToolsActions.onSettings(r.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==r.props.selectedLayers[0].opacity?r.props.selectedLayers[0].opacity:1)}):"GROUP"===e&&r.props.onToolsActions.onSettings(r.props.selectedGroups[r.props.selectedGroups.length-1].id,"groups",{})})),u(s(r),"showMetadata",(function(){r.props.layerMetadata.expanded?r.props.onToolsActions.onHideLayerMetadata():r.props.onToolsActions.onGetMetadataRecord()})),u(s(r),"removeNodes",(function(){r.props.selectedLayers.forEach((function(e){r.props.onToolsActions.onRemove(e.id,"layers")})),r.props.selectedGroups.forEach((function(e){r.props.onToolsActions.onRemove(e.id,"groups")})),r.props.onToolsActions.onClear(),r.closeDeleteDialog()})),u(s(r),"reload",(function(){r.props.selectedLayers.forEach((function(e){r.props.onToolsActions.onShow(e.id,{visibility:!0}),r.props.onToolsActions.onReload(e.id)}))})),u(s(r),"closeDeleteDialog",(function(){r.setState({showDeleteDialog:!1})})),u(s(r),"displayDeleteDialog",(function(){r.setState({showDeleteDialog:!0})})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.getStatus(),r=this.checkBbox(),n=r&&S.defs(r),o=p.createElement(w,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?p.createElement(m,null,p.createElement(v,{transitionName:"toc-toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},!this.props.activateTool.activateAddLayer||"DESELECT"!==t&&"GROUP"!==t?null:p.createElement(h,{key:"addLayer",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-addLayer"},"GROUP"===t?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},p.createElement(y,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},p.createElement(g,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===t||"GROUP"===t)&&this.getSelectedNodeDepth()<=this.props.maxDepth?p.createElement(h,{key:"addGroup",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-addGroup"},"GROUP"===t?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},p.createElement(y,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},p.createElement(g,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===t||"GROUP"===t||"LAYERS"===t||"GROUPS"===t)&&r?p.createElement(h,{key:"zoomTo",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-zoomTo"},n?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:p.createElement(P,{msgId:"toc.epsgNotSupported",msgParams:{epsg:r||" "}}))},p.createElement(y,{bsStyle:"primary",className:"square-button-md",style:n?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:n?this.zoomTo:function(){}},p.createElement(g,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==t&&"GROUP"!==t&&"LAYER_LOAD_ERROR"!==t||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:p.createElement(h,{key:"settings",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===t?"LAYER":t])},p.createElement(y,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:function(){e.showSettings(t)}},p.createElement(g,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==t&&"LAYER_LOAD_ERROR"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:p.createElement(h,{key:"queryPanel",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},p.createElement(y,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},p.createElement(g,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:p.createElement(h,{key:"featuresGrid",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},p.createElement(y,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},p.createElement(g,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==t&&"LAYERS"!==t&&"LAYER_LOAD_ERROR"!==t&&"LAYERS_LOAD_ERROR"!==t)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==t&&"GROUPS"!==t&&"GROUP_LOAD_ERROR"!==t&&"GROUPS_LOAD_ERROR"!==t)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:p.createElement(h,{key:"removeNode",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},p.createElement(y,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},p.createElement(g,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===t||"LAYERS_LOAD_ERROR"===t?p.createElement(h,{key:"reload",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},p.createElement(y,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},p.createElement(g,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==t||this.props.selectedLayers.length||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.wfsdownload.expanded?null:p.createElement(h,{key:"widgets",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},p.createElement(y,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},p.createElement(g,{glyph:"stats"}))),this.props.activateTool.activateDownloadTool&&"LAYER"===t&&this.props.selectedLayers[0].search&&!this.props.settings.expanded&&!this.props.layerMetadata.expanded?p.createElement(h,{key:"downloadTool",placement:"top",overlay:p.createElement(b,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},p.createElement(y,{bsStyle:this.props.wfsdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},p.createElement(g,{glyph:"download"}))):null,this.props.activateTool.activateMetedataTool&&"LAYER"===t&&this.props.selectedLayers[0].catalogURL&&!this.props.settings.expanded&&!this.props.wfsdownload.expanded?p.createElement(h,{key:"layerMetadata",placement:"top",overlay:p.createElement(b,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},p.createElement(y,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:function(){return e.showMetadata()}},p.createElement(g,{glyph:"info-sign"}))):null),p.createElement(E,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),o):null}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(T,"propTypes",{groups:f.array,selectedLayers:f.array,generalInfoFormat:f.string,selectedGroups:f.array,onToolsActions:f.object,text:f.object,activateTool:f.object,options:f.object,style:f.object,settings:f.object,layerMetadata:f.object,wfsdownload:f.object,maxDepth:f.number,metadataTemplate:f.oneOfType([f.string,f.array,f.object,f.func])}),u(T,"defaultProps",{groups:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:function(){},onNewWidget:function(){},onBrowseData:function(){},onQueryBuilder:function(){},onUpdate:function(){},onRemove:function(){},onClear:function(){},onSettings:function(){},onUpdateSettings:function(){},onRetrieveLayerData:function(){},onHideSettings:function(){},onReload:function(){},onAddLayer:function(){},onAddGroup:function(){},onDownload:function(){},onGetMetadataRecord:function(){},onHideLayerMetadata:function(){},onShow:function(){}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0},options:{modalOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},wfsdownload:{},metadataTemplate:null}),e.exports=T},3400:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758).Glyphicon;r(3401);var m=r(2261),y=r(2149),g=r(3403),b=r(3404),h=r(3405),v=r(13),O=v.isArray,E=v.isString,w=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onDelete",(function(){r.props.hideLayerMetadata()})),u(s(r),"onClose",(function(){r.props.hideLayerMetadata()})),u(s(r),"getTemplate",(function(){var e=r.props.metadataTemplate||b;if(O(e)||E(e)){var t=O(e)?e.join("\n"):e;return p.createElement(g,{model:r.props.layerMetadata.metadataRecord,template:t,renderContent:h})}var n=e;return p.createElement(n,{model:r.props.layerMetadata.metadataRecord})})),u(s(r),"renderBodyTemplate",(function(){return r.props.layerMetadata.maskLoading?null:r.getTemplate()})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=p.createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?p.createElement(y,null,p.createElement(m,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},p.createElement("span",{role:"header"},p.createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),p.createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?p.createElement(d,{glyph:this.props.closeGlyph}):p.createElement("span",null,""))),p.createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(w,"propTypes",{id:f.string,layerMetadata:f.object,metadataTemplate:f.oneOfType([f.string,f.array,f.object,f.func]),hideLayerMetadata:f.func,closeGlyph:f.string,panelStyle:f.object,panelClassName:f.string,maskLoading:f.bool,layerMetadataPanelTitle:f.oneOfType([f.string,f.object])}),u(w,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""}),e.exports=w},3401:function(e,t,r){var n=r(3402);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3402:function(e,t,r){(e.exports=r(759)()).push([e.i,"\n.msgapi #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.msgapi .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .msgapi .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .msgapi .portal-dialog {\n        width: 100%;\n    }\n}\n",""])},3403:function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PropTypes=__webpack_require__(0),React=__webpack_require__(1),_require=__webpack_require__(13),isEqual=_require.isEqual,TemplateUtils=__webpack_require__(772),Template=function(_React$Component){function Template(){var _getPrototypeOf2,_this;_classCallCheck(this,Template);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Template)).call.apply(_getPrototypeOf2,[this].concat(args))),_defineProperty(_assertThisInitialized(_this),"renderContent",(function(){var model=_this.props.model,props=_this.props;return eval(_this.comp)})),_defineProperty(_assertThisInitialized(_this),"parseTemplate",(function(e){TemplateUtils.parseTemplate(e,(function(e,t){t?_this.props.onError(t.message):(_this.comp=e,_this.forceUpdate())}))})),_this}return _inherits(Template,_React$Component),_createClass(Template,[{key:"UNSAFE_componentWillMount",value:function(){this.parseTemplate(this.props.template)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.template!==this.props.template&&this.parseTemplate(e.template)}},{key:"shouldComponentUpdate",value:function(e){return!isEqual(e,this.props)}},{key:"render",value:function(){if(this.comp){var e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}]),Template}(React.Component);_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:function(){}}),module.exports=Template},3404:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(2103),d=r(758).Table,m=r(13).isArray,y=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.model;return u.createElement("div",{id:e.identifier},u.createElement(d,null,u.createElement("tbody",null,u.createElement("tr",null,u.createElement("td",null,u.createElement(f,{msgId:"toc.layerMetadata.identifier"})),u.createElement("td",null,e.identifier)),u.createElement("tr",null,u.createElement("td",null,u.createElement(f,{msgId:"toc.layerMetadata.title"})),u.createElement("td",null,e.title)),u.createElement("tr",null,u.createElement("td",null,u.createElement(f,{msgId:"toc.layerMetadata.abstract"})),u.createElement("td",null,e.abstract)),u.createElement("tr",null,u.createElement("td",null,u.createElement(f,{msgId:"toc.layerMetadata.subject"})),u.createElement("td",null,m(e.subject)?e.subject.map((function(e,t){return u.createElement("ul",{key:"meta"+t},u.createElement("li",{key:t},e))})):e.subject)),u.createElement("tr",null,u.createElement("td",null,u.createElement(f,{msgId:"toc.layerMetadata.type"})),u.createElement("td",null,e.type)),u.createElement("tr",null,u.createElement("td",null,u.createElement(f,{msgId:"toc.layerMetadata.creator"})),u.createElement("td",null,e.creator)))))}}])&&i(r.prototype,n),c&&i(r,c),t}(u.Component);c(y,"propTypes",{model:p.object}),c(y,"defaultProps",{model:{}}),e.exports=y},3405:function(module,exports,__webpack_require__){var Bootstrap=__webpack_require__(758),Message=__webpack_require__(2103),React=__webpack_require__(1),RenderTemplate=function RenderTemplate(comp,props){var model=props.model;return eval(comp)};module.exports=RenderTemplate},3406:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(3407),d=r(758).Tooltip,m=r(2114),y=r(788).getTitleAndTooltip,g=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=void 0===this.props.node.expanded||this.props.node.expanded,r=y(this.props),n=r.title,o=r.tooltipText;return this.props.tooltip&&o?u.createElement(m,{placement:this.props.node.tooltipPlacement||"top",overlay:u.createElement(d,{id:"tooltip-layer-group"},o)},u.createElement("div",{style:this.props.style},u.createElement("span",{className:"toc-group-title",onClick:this.props.onSelect?function(t){return e.props.onSelect(e.props.node.id,"group",t.ctrlKey)}:function(){}},n),u.createElement(f,{onClick:function(){return e.props.onClick(e.props.node.id,t)},expanded:t,node:this.props.node}))):u.createElement("div",{style:this.props.style},u.createElement("span",{className:"toc-group-title",onClick:this.props.onSelect?function(t){return e.props.onSelect(e.props.node.id,"group",t.ctrlKey)}:function(){}},n),u.createElement(f,{onClick:function(){return e.props.onClick(e.props.node.id,t)},expanded:t,node:this.props.node}))}}])&&i(r.prototype,n),c&&i(r,c),t}(u.Component);c(g,"propTypes",{node:p.object,onClick:p.func,onSelect:p.func,style:p.object,currentLocale:p.string,tooltip:p.bool,tooltipOptions:p.object}),c(g,"inheritedPropTypes",["node"]),c(g,"defaultProps",{onClick:function(){},onSelect:null,currentLocale:"en-US",style:{},tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}}),e.exports=g},3407:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(758),d=f.Glyphicon,m=f.Tooltip,y=r(2103),g=r(2114),b=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=void 0===this.props.node.expanded||this.props.node.expanded;return u.createElement(g,{placement:"bottom",overlay:u.createElement(m,{id:"toc-status-icon"},u.createElement(y,{msgId:e?"toc.statusIconOpen":"toc.statusIconClose"}))},u.createElement(d,{onClick:this.props.onClick,className:"toc-status-icon",glyph:e?"folder-open":"folder-close"}))}}])&&i(r.prototype,n),c&&i(r,c),t}(u.Component);c(b,"propTypes",{node:p.object,onClick:p.func}),c(b,"inheritedPropTypes",["node","expanded"]),c(b,"defaultProps",{node:null,onClick:function(){}}),e.exports=b},3408:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(0),p=r(1);r(3409);var f=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=[];if(this.props.children){var r=(this.props.node.nodes||[]).filter((function(t){return e.props.filter(t,e.props.node)})),n=0;t=r.map((function(t){return p.cloneElement(e.props.children,{node:t,parentNodeId:e.props.node?e.props.node.id:"",key:t.id,sortIndex:t.hide||t.dummy?n:n++,onSort:e.props.onSort,onError:e.props.onError,level:e.props.level,isDraggable:!!e.props.onSort,setDndState:e.props.setDndState})}))}return this.props.onSort,p.createElement("div",{className:"toc-group-children"},t)}}])&&i(r.prototype,n),c&&i(r,c),t}(p.Component);c(f,"propTypes",{node:u.object,filter:u.func,onSort:u.func,onError:u.func,setDndState:u.func,level:u.number}),c(f,"inheritedPropTypes",["node","filter","onSort"]),c(f,"defaultProps",{node:null,filter:function(){return!0},onSort:null,level:1}),e.exports=f},3409:function(e,t,r){var n=r(3410);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3410:function(e,t,r){(e.exports=r(759)()).push([e.i,".msgapi .toc-group-children {\n    margin-left: 15px;\n}\n\n.msgapi .TOC-Node-enter, .msgapi .TOC-Node-leave {\n    transition: all 250ms ease-out;\n    -o-transition: all 250ms ease-out;\n    -moz-transition: all 250ms ease-out;\n    -webkit-transition: all 250ms ease-out;\n    overflow: hidden;\n}\n.msgapi .TOC-Node-enter,.msgapi .TOC-Node-leave.TOC-Node-leave-active {\n    opacity: 0;\n    transform: scale(1, 0);\n    transform-origin: top;\n}\n.msgapi .TOC-Node-leave, .msgapi .TOC-Node-enter.TOC-Node-enter-active {\n    opacity: 1;\n    transform: scale(1, 1);\n    transform-origin: top;\n}\n",""])},3411:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(758).Tooltip,y=r(2114),g=r(788).getTitleAndTooltip;r(3412);var b=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getFilteredTitle",(function(e){var t=e.toLowerCase().split(r.props.filterText.toLowerCase());return r.props.filterText?t.reduce((function(e,n,i){return i===t.length-1?[].concat(o(e),[n]):[].concat(o(e),[n,d.createElement("strong",{key:i},r.props.filterText.toLowerCase())])}),[]):e})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=g(this.props),r=t.title,n=t.tooltipText;return this.props.tooltip&&n?d.createElement(y,{placement:this.props.node.tooltipPlacement||"top",overlay:d.createElement(m,{id:"tooltip-layer-title"},n)},d.createElement("div",{className:"toc-title",onClick:this.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},this.getFilteredTitle(r))):d.createElement("div",{className:"toc-title",onClick:this.props.onClick?function(t){return e.props.onClick(e.props.node.id,"layer",t.ctrlKey)}:function(){},onContextMenu:function(t){t.preventDefault(),e.props.onContextMenu(e.props.node)}},this.getFilteredTitle(r))}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(b,"propTypes",{node:f.object,onClick:f.func,onContextMenu:f.func,currentLocale:f.string,filterText:f.string,tooltip:f.bool,tooltipOptions:f.object}),p(b,"defaultProps",{onClick:function(){},onContextMenu:function(){},currentLocale:"en-US",filterText:"",tooltip:!1,tooltipOptions:{maxLength:807,separator:" - "}}),e.exports=b},3412:function(e,t,r){var n=r(3413);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3413:function(e,t,r){(e.exports=r(759)()).push([e.i,".msgapi .toc-title {\n    display: inline-block;\n    max-width: 150px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n",""])},3414:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(55),f=r(0),d=r(1),m=r(13).isArray,y=r(2103),g=r(197),b=r(26),h=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{error:!1}),u(s(r),"onImgError",(function(){r.setState((function(){return{error:!0}}))})),u(s(r),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var r=e.layer,n=t||m(r.url)&&Math.floor(Math.random()*r.url.length),o=m(r.url)?r.url[n]:r.url.replace(/[?].*$/g,""),i=p.parse(o),a=b({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeigth,width:e.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},r.legendParams||{},g.addAuthenticationToSLD(r.params||{},e.layer),r.params&&r.params.SLD_BODY?{SLD_BODY:r.params.SLD_BODY}:{},e.scales&&e.currentZoomLvl?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return g.addAuthenticationParameter(o,a),p.format({host:i.host,protocol:i.protocol,pathname:i.pathname,query:a})}return""})),u(s(r),"validateImg",(function(e){e.height<=1&&e.width<=2&&r.onImgError()})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?d.createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):d.createElement(y,{msgId:"layerProperties.legenderror"})}}])&&i(r.prototype,n),f&&i(r,f),t}(d.Component);u(h,"propTypes",{layer:f.object,legendHeigth:f.number,legendWidth:f.number,legendOptions:f.string,style:f.object,currentZoomLvl:f.number,scales:f.array}),u(h,"defaultProps",{legendHeigth:12,legendWidth:12,legendOptions:"forceLabels:on;fontSize:10",style:{maxWidth:"100%"}}),e.exports=h},3415:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(2743),d=r(13),m=d.isNil,y=d.isArray,g=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return u.createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip&&u.createElement(f,{disabled:this.props.disabled,start:[m(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){y(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}})||u.createElement(f,{disabled:this.props.disabled,start:[m(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}])&&i(r.prototype,n),c&&i(r,c),t}(u.Component);c(g,"propTypes",{opacity:p.number,disabled:p.bool,hideTooltip:p.bool,onChange:p.func}),c(g,"defaultProps",{opacity:1,onChange:function(){},visibility:!0}),e.exports=g},3417:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(0),y=r(758),g=y.Glyphicon,b=y.Tooltip,h=r(2103),v=r(2114),O=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onClick",(function(){var e=(r.props.node||{}).layerFilter;r.props.propertiesChangeHandler(r.props.node.id,{layerFilter:i({},e,{disabled:!e.disabled})})})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=(this.props.node||{}).layerFilter,t=(e||{}).disabled;return!!e&&d.createElement(v,{placement:"bottom",overlay:d.createElement(b,{id:"toc-filter-icon"},d.createElement(h,{msgId:t?"toc.filterIconDisabled":"toc.filterIconEnabled"}))},d.createElement(g,{onClick:this.onClick,className:"toc-filter-icon ".concat(t?"disabled":""),glyph:"filter-layer"}))}}])&&l(r.prototype,n),o&&l(r,o),t}(d.Component);f(O,"propTypes",{node:m.object,propertiesChangeHandler:m.func}),f(O,"inheritedPropTypes",["node"]),f(O,"defaultProps",{node:null,propertiesChangeHandler:function(){}}),e.exports=O},3418:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var o=r(1),i=r(2114),a=r(758).Tooltip;e.exports=function(e){return function(t){var r=t.tooltip,l=t.id,s=t.placement,c=n(t,["tooltip","id","placement"]);return o.createElement(i,{placement:s,overlay:o.createElement(a,{id:"fe-".concat(l)},r)},o.createElement(e,c))}}},3420:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(88).connect,y=r(195).createSelector,g=r(2192),b=r(267),h=b.toggleControl,v=b.setControlProperty,O=r(409).changeMapStyle,E=r(758),w=E.Button,S=E.Glyphicon,P=E.Panel,T=r(3421),j=r(13).partialRight,A=r(26),C=r(2140).mapLayoutValuesSelector,x=r(2135)(w),D=m(y([function(e){return e.controls.drawer&&e.controls.drawer.enabled},function(e){return e.controls.drawer&&e.controls.drawer.menu||"1"},function(e){return e.controls.queryPanel&&e.controls.queryPanel.enabled&&e.controls.drawer&&e.controls.drawer.width||e.controls.drawer&&e.controls.drawer.resizedWidth||void 0},function(e){return C(e,{height:!0})}],(function(e,t,r,n){return{show:e,activeKey:t,dynamicWidth:r,layout:n}})),{onToggle:h.bind(null,"drawer",null),onResize:v.bind(null,"drawer","resizedWidth"),onChoose:j(v.bind(null,"drawer","menu"),!0),changeMapStyle:O})(r(3422));r(3427);var _=m((function(e){return{disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:h.bind(null,"drawer",null)})((function(e){var t=e.id,r=void 0===t?"":t,n=e.menuButtonStyle,o=void 0===n?{}:n,i=e.buttonStyle,a=void 0===i?"primary":i,l=e.buttonClassName,s=void 0===l?"square-button ms-drawer-menu-button":l,c=e.toggleMenu,u=void 0===c?function(){}:c,p=e.disabled,d=void 0!==p&&p,m=e.glyph,y=void 0===m?"1-layer":m,g=e.tooltipId,b=void 0===g?"toc.drawerButton":g,h=e.tooltipPosition,v=void 0===h?"bottom":h;return f.createElement(x,{id:r,style:o,bsStyle:a,key:"menu-button",className:s,onClick:u,disabled:d,tooltipId:b,tooltipPosition:v},f.createElement(S,{glyph:y}))})),I=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getTools",(function(){return r.props.items.map((function(e,t){return A({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),p(c(r),"renderItems",(function(){return r.getTools().map((function(e,t){var n=e.panel||e.plugin,i=f.createElement(n,o({isPanel:!0},e.cfg,{items:e.items||[],groupStyle:{style:{marginBottom:"0px",cursor:"pointer"}}})),a=e.title?f.createElement("div",{className:"drawer-menu-head drawer-menu-head-"+e.name},f.createElement(g,{msgId:e.title})):null;return r.props.singleSection?f.createElement(P,{icon:e.icon,glyph:e.glyph,buttonConfig:e.buttonConfig,key:e.name,eventKey:t+1+"",header:a},i):f.createElement(T,{key:e.name,renderInModal:e.renderInModal||!1,eventKey:t+1+"",header:a},i)}))})),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return f.createElement("div",{id:this.props.id},f.createElement(_,o({},this.props,{id:"drawer-menu-button"})),f.createElement(D,o({single:this.props.singleSection},this.props.menuOptions,{title:f.createElement(g,{msgId:"menu"}),alignment:"left"}),this.renderItems()))}}])&&a(r.prototype,n),d&&a(r,d),t}(f.Component);p(I,"propTypes",{items:d.array,active:d.string,toggleMenu:d.func,id:d.string,glyph:d.string,buttonStyle:d.string,menuOptions:d.object,singleSection:d.bool,buttonClassName:d.string,menuButtonStyle:d.object,disabled:d.bool}),p(I,"contextTypes",{messages:d.object,router:d.object}),p(I,"defaultProps",{id:"mapstore-drawermenu",items:[],toggleMenu:function(){},glyph:"1-layer",buttonStyle:"primary",menuOptions:{},singleSection:!0,buttonClassName:"square-button ms-drawer-menu-button",disabled:!1});var F=m((function(e){return{active:e.controls&&e.controls.drawer&&e.controls.drawer.active,disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:h.bind(null,"drawer",null)})(I);e.exports={DrawerMenuPlugin:A(F,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",FloatingLegend:{priority:1,name:"drawer-menu",button:_}}),reducers:{}}},3421:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(758).Glyphicon,m=r(2370),y=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onHeaderClick",(function(){r.props.onHeaderClick(r.props.eventKey)})),u(s(r),"getHeight",(function(){return r.props.open&&r.refs.sectionContent?r.refs.sectionContent.scrollHeight+10:"0"})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e={maxHeight:this.getHeight(),overflow:this.props.open?"auto":"hidden",padding:this.props.open?null:"0"};return f.createElement("div",{className:"section"},f.createElement("div",{className:"sectionHeader",style:{width:"100%"},onClick:this.onHeaderClick},this.props.renderInModal?null:f.createElement(d,{glyph:"triangle-right",style:this.props.open?{transform:"rotate(90deg)"}:{}}),f.createElement("span",{className:this.headerClassName+" sectionTitle",ref:"sectionTitle"},this.props.header)),this.props.renderInModal?f.createElement(m,{ref:"modal",show:this.props.open,onHide:this.onHeaderClick},f.createElement(m.Header,{closeButton:!0},f.createElement(m.Title,null,this.props.header)),f.createElement(m.Body,null,this.props.children)):f.createElement("div",{ref:"sectionContent",className:"sectionContent",style:e},this.props.children))}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(y,"displayName","Section"),u(y,"propTypes",{key:p.string,eventKey:p.string,headerClassName:p.string,open:p.bool,onHeaderClick:p.func,renderInModal:p.bool,header:p.node}),u(y,"defaultProps",{headerClassName:"panel-heading"}),e.exports=y},3422:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(0),b=r(758),h=b.Glyphicon,v=b.Button,O=b.Tooltip,E=r(2114),w=r(2748).default,S=r(2749).Resizable,P=r(2103),T=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"getWidth",(function(){return r.props.dynamicWidth||r.props.width})),m(f(r),"renderChildren",(function(e,t){var n={key:e.key?e.key:t,ref:e.ref,open:r.props.activeKey&&r.props.activeKey===e.props.eventKey},o=e.props,i=(o.glyph,o.icon,o.buttonConfig,l(o,["glyph","icon","buttonConfig"]));return y.createElement(e.type,a({},n,i))})),m(f(r),"renderButtons",(function(){return r.props.children.map((function(e){var t=y.createElement(v,{key:e.props.eventKey,bsSize:"large",className:e.props.buttonConfig&&e.props.buttonConfig.buttonClassName?e.props.buttonConfig.buttonClassName:"square-button",onClick:r.props.onChoose.bind(null,e.props.eventKey,r.props.activeKey===e.props.eventKey),bsStyle:r.props.activeKey===e.props.eventKey?"default":"primary"},e.props.glyph?y.createElement(h,{glyph:e.props.glyph}):e.props.icon);if(e.props.buttonConfig&&e.props.buttonConfig.tooltip){var n=y.createElement(O,{key:"tooltip."+e.props.eventKey,id:"tooltip."+e.props.eventKey},y.createElement(P,{msgId:e.props.buttonConfig.tooltip}));return y.createElement(E,{placement:"bottom",key:"overlay-trigger."+e.props.eventKey,overlay:n},t)}return t}))})),m(f(r),"renderContent",(function(){var e=r.props.single?y.createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},y.createElement(h,{glyph:"1-close",className:"no-border btn-default",onClick:r.props.onToggle,style:{cursor:"pointer"}}),y.createElement("div",{className:"navButtons"},r.renderButtons())):y.createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},y.createElement("span",{className:"title"},r.props.title),y.createElement(h,{glyph:"1-close",className:"no-border btn-default",onClick:r.props.onToggle,style:{cursor:"pointer"}})),t=y.createElement("div",{className:"nav-content"},e,y.createElement("div",{className:"nav-body"},r.props.children.filter((function(e){return!r.props.single||r.props.activeKey===e.props.eventKey})).map(r.renderChildren)));return r.props.resizable?y.createElement(S,{axis:"x",resizeHandles:["e"],width:r.getWidth(),onResize:r.resize},t):t})),m(f(r),"resize",(function(e,t){var n=t.size;r.props.onResize(n.width)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){if(!this.props.overlapMap&&this.props.show){var e={left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")};this.props.changeMapStyle(e,"drawerMenu")}}},{key:"componentDidUpdate",value:function(e){if(!this.props.overlapMap&&e.show!==this.props.show){var t=this.props.show?{left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")}:{};this.props.changeMapStyle(t,"drawerMenu")}}},{key:"render",value:function(){var e=this;return y.createElement(w,{styles:{sidebar:i({},this.props.layout,{zIndex:1022,width:this.getWidth()}),overlay:{zIndex:1021},root:{right:this.props.show?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}},sidebarClassName:"nav-menu",onSetOpen:function(){e.props.onToggle()},open:this.props.show,docked:this.props.docked,sidebar:this.renderContent()},y.createElement("div",null))}}])&&c(r.prototype,n),o&&c(r,o),t}(y.Component);m(T,"propTypes",{title:g.node,alignment:g.string,activeKey:g.string,docked:g.bool,show:g.bool,onToggle:g.func,onChoose:g.func,single:g.bool,width:g.number,dynamicWidth:g.number,overlapMap:g.bool,changeMapStyle:g.func,layout:g.object,resizable:g.bool,onResize:g.func}),m(T,"defaultProps",{docked:!1,single:!1,width:300,overlapMap:!0,layout:{},resizable:!1,onResize:function(){}}),e.exports=T},3427:function(e,t,r){var n=r(3428);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3428:function(e,t,r){(e.exports=r(759)()).push([e.i,"/* Menu Button */\n.msgapi .drawer-menu-button {\n    position: absolute;\n    z-index:1000;\n    left: 30px;\n    top: 8px;\n    width:30px;\n    background: transparent;\n    outline: none;\n    border: transparent;\n    font-size: 14px;\n}\n\n.msgapi .drawer-menu-button:hover {\n    background: transparent;\n}\n\n.msgapi #drawer-menu-button:active{\n    box-shadow: none;\n}\n\n.msgapi #mapstore-drawermenu > div > div:nth-child(2) {\n    display: none;\n}\n\n.msgapi .nav-content #background-switcher .thumbnail {\n    border-radius: 0 !important;\n    margin-bottom: 40px;\n    width: 220px !important;\n}\n.msgapi .nav-content #background-switcher .thumbnail img {\n    border-radius: 0 !important;\n    height: 90px;\n    width: 220px !important;\n}\n\n.msgapi .nav-content #background-switcher .thumbnail .caption {\n    font-size: 14px !important;\n    text-align: left !important;\n    top: -20px !important;\n    position: absolute !important;\n}\n\n.msgapi .nav-content #background-switcher {\n    margin-top: 10px;\n}\n\n.msgapi #mapstore-drawermenu .panel {\n    border: none;\n    box-shadow: none;\n}\n\n.msgapi div.nav-menu {\n    -webkit-transform:   translate3d(300px, 0, 0);\n    -moz-transform: \t translate3d(300px, 0, 0);\n    -ms-transform: \t\t translate3d(300px, 0, 0);\n    -o-transform: \t\t translate3d(300px, 0, 0);\n    box-shadow: 2px 0px 15px #A7A7A7;\n}\n\n.msgapi .nav-menu  .navHeader {\n    height: 50px;\n}\n.msgapi .nav-menu > .nav-content .navHeader .title{\n    font-size: 16px;\n    position: absolute;\n    margin: 13px;\n    font-weight: bold;\n}\n.msgapi .nav-content  .section {\n    margin-bottom: 2px;\n}\n.msgapi .nav-content  .section .sectionHeader{\n    padding: 5px;\n    cursor: pointer;\n}\n.msgapi .nav-content .section .sectionHeader>.glyphicon{\n    /* Firefox */\n    -moz-transition: all .3s ease;\n    /* WebKit */\n    -webkit-transition: all .3s ease;\n    /* Opera */\n    -o-transition: all .3s ease;\n    /* Standard */\n    transition: all .3s ease;\n}\n.msgapi .nav-content  .section .sectionTitle{\n    padding-left: 10px;\n\n}\n.msgapi .nav-content  .section .sectionContent{\n    -moz-transition: max-height .3s ease;\n    -webkit-transition: max-height .3s ease;\n    -o-transition: max-height .3s ease;\n    transition: max-height .3s ease;\n\n    box-shadow: inset 0px 0px 10px rgba(0,0,0,.5);\n    padding: 5px;\n}\n\n.msgapi .navButtons {\n    float: right;\n}\n\n.msgapi #drawer-menu-button {\n     position: absolute;\n}\n",""])},3429:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(758),y=m.Button,g=m.Glyphicon,b=m.Tooltip,h=r(2114),v=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"onClick",(function(){r.props.onClick()})),p(c(r),"renderButton",(function(){return d.createElement(y,o({id:r.props.id,disabled:r.props.disabled},r.props.btnConfig,{onClick:r.onClick,bsStyle:r.props.buttonStyle,style:r.props.style}),d.createElement(g,{glyph:r.props.glyph}),r.props.text,r.props.help)})),p(c(r),"addTooltip",(function(e){var t=d.createElement(b,{id:"undo-btn-tooltip"},r.props.tooltip);return d.createElement(h,{placement:r.props.tooltipPlace,key:"overlay-trigger."+r.props.id,overlay:t},e)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(v,"propTypes",{id:f.string,btnConfig:f.object,text:f.oneOfType([f.string,f.element]),help:f.oneOfType([f.string,f.element]),onClick:f.func,tooltip:f.element,tooltipPlace:f.string,style:f.object,glyph:f.string,buttonStyle:f.string,disabled:f.bool}),p(v,"defaultProps",{id:"undo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-backward",buttonStyle:"primary",btnConfig:{className:"square-button"}}),e.exports=v},3430:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(758),y=m.Button,g=m.Glyphicon,b=m.Tooltip,h=r(2114),v=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"onClick",(function(){r.props.onClick()})),p(c(r),"renderButton",(function(){return d.createElement(y,o({id:r.props.id,disabled:r.props.disabled},r.props.btnConfig,{onClick:r.onClick,bsStyle:r.props.buttonStyle,style:r.props.style}),d.createElement(g,{glyph:r.props.glyph}),r.props.text,r.props.help)})),p(c(r),"addTooltip",(function(e){var t=d.createElement(b,{id:"redo-btn-tooltip"},r.props.tooltip);return d.createElement(h,{placement:r.props.tooltipPlace,key:"overlay-trigger."+r.props.id,overlay:t},e)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(v,"propTypes",{id:f.string,btnConfig:f.object,text:f.oneOfType([f.string,f.element]),help:f.oneOfType([f.string,f.element]),onClick:f.func,tooltip:f.element,tooltipPlace:f.string,style:f.object,glyph:f.string,buttonStyle:f.string,disabled:f.bool}),p(v,"defaultProps",{id:"redo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-forward",buttonStyle:"primary",btnConfig:{className:"square-button"}}),e.exports=v},3431:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(88).connect,l=r(758).Glyphicon,s=r(26),c=r(195).createSelector,u=r(2192),p=r(2328),f=p.changeMeasurement,d=p.changeUom,m=p.changeFormatMeasurement,y=p.changeCoordinates,g=p.addAnnotation,b=p.init,h=r(267),v=h.toggleControl,O=h.setControlProperty,E=r(3432).MeasureDialog,w=r(2478).highlightPoint,S=r(2144).isOpenlayers,P=r(2581),T=P.isCoordinateEditorEnabledSelector,j=P.showAddAsAnnotationSelector,A=r(763),C=A.showCoordinateEditorSelector,x=A.measureSelector,D=v.bind(null,"measure",null),_=a(c([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,isCoordinateEditorEnabled:T(e),showCoordinateEditor:C(e),showAddAsAnnotation:j(e)&&S(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format||"decimal"}},function(e){return x(e)}],(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({show:t},e)})),{toggleMeasure:f,onAddAnnotation:g,onChangeUom:d,onHighlightPoint:w,onChangeFormat:m,onInit:b,onChangeCoordinates:y,onClose:D,onMount:function(e){return O("measure","showCoordinateEditor",e)}},null,{pure:!1})(E);e.exports={MeasurePlugin:s(_,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:i.createElement(u,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:i.createElement(u,{msgId:"measureComponent.Measure"}),icon:i.createElement(l,{glyph:"1-ruler"}),action:function(){return O("measure","enabled",!0)}}}),reducers:{measurement:r(3473)},epics:r(3474)}},3432:function(e,t,r){var n=r(2752),o=r(3472);e.exports={MeasureComponent:n,MeasureDialog:o}},3467:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(0),b=r(758),h=b.Grid,v=b.Row,O=b.Col,E=b.FormGroup,w=b.ControlLabel,S=b.FormControl,P=b.MenuItem,T=b.DropdownButton,j=b.Glyphicon,A=r(2135),C=A(j),x=A(T),D=r(13),_=D.head,I=D.isNaN,F=r(2116),k=r(3468),L=r(2103),R=r(2350),N=R.validateCoords,M=R.coordToArray,B=r(2672),G=r(3469),U=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"getValidationStateText",(function(e){return e?null:"error"})),m(f(r),"getValidationStateRadius",(function(e){var t=parseFloat(e);return I(t)?"error":null})),m(f(r),"validateCoordinates",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props.components,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(e&&e.length){var o=e.filter(N);return t?o.length>r.props.componentsValidation[r.props.type].min||o.length>=r.props.componentsValidation[r.props.type].min&&!N(e[n]):o.length>=r.props.componentsValidation[r.props.type].min}return!1})),m(f(r),"validateCircle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props.components,t=(arguments.length>1&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.props.properties.radius);if(e&&e.length){var n=_(e);return!I(parseFloat(t))&&N(n)}return!1})),m(f(r),"validateText",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props.components,t=(arguments.length>1&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.props.properties.valueText);if(e&&e.length){var n=_(e);return!!t&&N(n)}return!1})),m(f(r),"isValid",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props.components,t=arguments.length>1?arguments[1]:void 0;return r[r.props.componentsValidation[r.props.type].validation](e,!1,t)})),m(f(r),"addCoordPolygon",(function(e){if("Polygon"===r.props.type){var t=e.filter(N);return e.concat([t.length?t[0]:{lat:"",lon:""}])}return e})),m(f(r),"change",(function(e,t,n){var o=r.props.components;o[e][t]=I(parseFloat(n))?"":parseFloat(n);var i=r.addCoordPolygon(o);r.props.onChange(i,r.props.properties.radius,r.props.properties.valueText,r.props.mapProjection),r.isValid(o)?(r.props.isMouseEnterEnabled||"LineString"===r.props.type||"Polygon"===r.props.type)&&r.props.onHighlightPoint(o[e]):((r.props.isMouseLeaveEnabled||"LineString"===r.props.type||"Polygon"===r.props.type)&&r.props.onHighlightPoint(null),r.props.onSetInvalidSelected("coords",o.map(M)))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"renderCircle",value:function(){var e=this;return y.createElement(v,{style:{flex:1,overflowY:"auto"}},y.createElement(O,{xs:12},y.createElement(E,{validationState:this.getValidationStateRadius(this.props.properties.radius)},y.createElement(w,null,y.createElement(L,{msgId:"annotations.editor.radius"})),y.createElement(G,l({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,r){e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map(M),r):""!==t?e.props.onChangeRadius(parseFloat(t),[],r):(e.props.onChangeRadius(null,e.props.components.map(M),r),e.props.onSetInvalidSelected("radius",e.props.components.map(M)))},step:1,type:"number"})))))}},{key:"renderText",value:function(){var e=this;return y.createElement(v,{style:{flex:1,overflowY:"auto"}},y.createElement(O,{xs:12},y.createElement(E,{validationState:this.getValidationStateText(this.props.properties.valueText)},y.createElement(w,null,y.createElement(L,{msgId:"annotations.editor.text"})),y.createElement(S,{value:this.props.properties.valueText,name:"text",placeholder:"text value",onChange:function(t){var r=t.target.value;e.isValid(e.props.components,r)||""!==r?e.props.onChangeText(r,e.props.components.map(M)):(e.props.onChangeText("",e.props.components.map(M)),e.props.onSetInvalidSelected("text",e.props.components.map(M)))},type:"text"}))))}},{key:"render",value:function(){var e=this,t=this.props,r=t.componentsValidation,n=t.type,o=a(this.props.components),l=o.filter(N).length===o.length,s=this[r[n].validation]()&&l,c=[{value:"decimal",text:y.createElement(L,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:y.createElement(L,{msgId:"annotations.editor.aeronautical"})}],u=[{glyph:s?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:s?"annotations.editor.valid":r[n].notValid,visible:!0},{Element:function(){return y.createElement(x,{noCaret:!0,title:y.createElement(C,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},c.map((function(t){var r=t.text,n=t.value;return y.createElement(P,{active:e.props.format===n,key:n,onClick:function(){return e.props.onChangeFormat(n)}},r)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",visible:!r[n].add||!r[n].max||this.props.components.length!==r[n].max,onClick:function(){var t=a(e.props.components);t=t.concat([{lat:"",lon:""}]),"Polygon"===e.props.type&&(t=e.addCoordPolygon(t)),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}],p=!!u.filter((function(e){return e.visible})).length;return y.createElement(h,{fluid:!0,style:{display:"flex",flexDirection:"column",flex:1}},y.createElement(v,{style:{display:"flex",alignItems:"center",marginBottom:8}},y.createElement(O,{xs:p?6:12},y.createElement("h5",null,y.createElement(L,{msgId:"annotations.editor.title."+this.props.type}))),y.createElement(O,{xs:6},y.createElement(F,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:u}))),"Circle"===this.props.type&&this.renderCircle(),"Text"===this.props.type&&this.renderText(),"Circle"===this.props.type&&y.createElement(v,{style:{flex:1,overflowY:"auto"}},y.createElement(O,{xs:12},y.createElement(w,null,y.createElement(L,{msgId:"annotations.editor.center"})))),!(!this.props.components||0===this.props.components.length)&&y.createElement(v,{style:{flex:1,overflowY:"auto"}},y.createElement(O,{xs:5,xsOffset:1},y.createElement(L,{msgId:"annotations.editor.lat"})),y.createElement(O,{xs:5},y.createElement(L,{msgId:"annotations.editor.lon"})),y.createElement(O,{xs:1})),y.createElement(v,{style:{flex:1,flexBasis:"auto",overflowY:"auto",overflowX:"hidden"}},this.props.components.map((function(t,o){return y.createElement(B,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:o,key:o+" key",isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[r[n].validation](),showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:r[n].remove,removeEnabled:e[r[n].validation](e.props.components,r[n].remove,o),onChange:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,r){var n=e.props.components.reduce((function(n,o,l){return t===l?[].concat(a(n),t>r?[i({},o),_(e.props.components.filter((function(e,t){return t===r})))]:[_(e.props.components.filter((function(e,t){return t===r}))),i({},o)]):r===l?a(n):[].concat(a(n),[i({},o)])}),[]).filter((function(e){return e}));if(e.isValid(n)){var o=e.addCoordPolygon(n);e.props.onChange(o)}else e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(M))},idx:o,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==o}));if(e.isValid(t)){var r=e.addCoordPolygon(t);e.props.isMouseEnterEnabled||"LineString"===e.props.type&&o!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[o]):e.props.onHighlightPoint(null),e.props.onChange(r)}else e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(M))}})}))),(!this.props.components||0===this.props.components.length)&&y.createElement(v,null,y.createElement(O,{xs:12,className:"text-center",style:{padding:15,paddingBottom:30}},y.createElement("i",null,y.createElement(L,{msgId:"annotations.editor.addByClick"})))))}}])&&c(r.prototype,n),o&&c(r,o),t}(y.Component);m(U,"propTypes",{components:g.array,measureOptions:g.object,onSetInvalidSelected:g.func,onChange:g.func,onChangeRadius:g.func,onHighlightPoint:g.func,onChangeText:g.func,onChangeFormat:g.func,format:g.string,aeronauticalOptions:g.object,componentsValidation:g.object,transitionProps:g.object,properties:g.object,mapProjection:g.string,type:g.string,isDraggable:g.bool,isMouseEnterEnabled:g.bool,isMouseLeaveEnabled:g.bool}),m(U,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onSetInvalidSelected:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point"}),e.exports=k(U)},3468:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=r(1),c=r(407),u=c.compose,p=c.branch;e.exports=u(p((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var r=t.onSort,o=t.isDraggable,a=t.items,c=void 0===a?[]:a,u=t.containerId,p=l(t,["onSort","isDraggable","items","containerId"]),f=c.map((function(e,t){return i({},e,{onSort:r,isDraggable:o,sortId:t,key:e.id||t,containerId:u})}));return s.createElement(e,n({},i({},p,{isDraggable:o}),{items:f}))}})))},3469:function(e,t,r){var n=r(1),o=r(758),i=o.FormControl,a=o.FormGroup,l=r(13).isNumber,s=r(2248).convertUom,c=r(80).getUnits,u=function(e,t,r){return l(parseFloat(e))&&!isNaN(parseFloat(e))?s(parseFloat(e),t,r):e},p=function(e,t,r){return l(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat(s(e,r,t).toFixed(4)):e},f=r(407),d=f.compose,m=f.withHandlers,y=f.withPropsOnChange,g=f.withState,b=f.withStateHandlers,h=f.defaultProps;e.exports=d(h({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),b((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),g("localValue","setLocalValue"),y(["value","localValue","uom","valueUom"],(function(e){var t=e.value,r=e.localValue,n=e.uom,o=e.valueUom;return{value:t===u(r,n,o)?r:p(t,n,o)}})),m({onChange:function(e){var t=e.uom,r=e.projection,n=e.valueUom,o=e.onChange,i=void 0===o?function(){}:o,a=e.setLocalValue,l=void 0===a?function(){}:a;return function(e){l(e),i(u(e,t,n),r)}}}))((function(e){var t=e.value,r=e.units,o=void 0===r?[]:r,l=e.uom,s=e.projection,u=void 0===s?"EPSG:3857":s,p=e.style,f=void 0===p?{display:"inline-flex",width:"100%"}:p,d=e.setUom,m=void 0===d?function(){}:d,y=e.onChange,g=void 0===y?function(){}:y,b=c(u);return n.createElement(a,{style:f},n.createElement(i,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return g(e.target.value,l)},step:1,type:"number"}),n.createElement(i,{componentClass:"select",placeholder:"select",value:l,onChange:function(e){return m(e.target.value)},style:{width:85}},o.filter((function(e){var t=e.originUom;return b===t})).map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))))}))},3470:function(e,t,r){var n=r(3471);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3471:function(e,t,r){(e.exports=r(759)()).push([e.i,'.msgapi .option-icon {\n    margin-right: 15px;\n}\n.msgapi #measure-result-panel button {\n    padding: 14px;\n}\n.msgapi #measure-result-panel .glyphicon {\n    margin: 0 15px 0 0;\n}\n.msgapi #measure-result-panel .option-text {\n    font-size: 14px;\n    text-transform: uppercase;\n    vertical-align: middle!important;\n    vertical-align: -webkit-baseline-middle!important;\n}\n.msgapi #measure-result-panel .option-icon {\n    font-size: 32px;\n    text-transform: uppercase;\n    vertical-align: middle;\n    vertical-align: middle!important;\n    vertical-align: -webkit-baseline-middle!important;\n    vertical-align: -moz-middle-with-baseline !important;\n}\n\n.msgapi .measure-value {\n    /* this is necessary to show the uom list correctly,\n     * otherwise the list will be hidden since it exceeds the modal\n     */\n    font-family: Menlo, Monaco, Consolas, Courier New, monospace;\n}\n\n.msgapi #measure .modal-body > div[role="body"] > div {\n    overflow: visible!important;\n}\n',""])},3472:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(0),m=r(1),y=r(2752),g=r(2472),b=r(2103),h=r(2261),v=r(758).Glyphicon,O=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onClose",(function(){r.props.onClose(!1)})),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.defaultOptions,t=e.showCoordinateEditor,r=i(e,["showCoordinateEditor"]);this.props.onMount(t||this.props.showCoordinateEditor),this.props.toggleMeasure({geomType:r.geomType||"LineString"}),this.props.onInit(r)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?m.createElement(g,{dock:!0,bsStyle:"primary",position:"right",title:m.createElement(b,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:660,open:this.props.show,onClose:this.onClose,style:this.props.style},m.createElement(y,o({id:"measure-panel"},this.props))):m.createElement(h,{id:"measure-dialog"},m.createElement("div",{key:"header",role:"header"},m.createElement(v,{glyph:"1-ruler"}),"",m.createElement(b,{key:"title",msgId:"measureComponent.Measure"}),m.createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?m.createElement(v,{glyph:this.props.closeGlyph}):m.createElement("span",null,""))),m.createElement("div",{key:"body",role:"body"},m.createElement(y,o({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}])&&l(r.prototype,n),d&&l(r,d),t}(m.Component);f(O,"propTypes",{show:d.bool,closeGlyph:d.string,onClose:d.func,onMount:d.func,onInit:d.func,showCoordinateEditor:d.bool,defaultOptions:d.object,style:d.object}),f(O,"contextTypes",{messages:d.object}),f(O,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},onInit:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",style:{height:"calc(100% - 30px)"}}),e.exports=O},3473:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2328),l=a.CHANGE_MEASUREMENT_TOOL,s=a.CHANGE_MEASUREMENT_STATE,c=a.CHANGE_UOM,u=a.RESET_GEOMETRY,p=a.CHANGED_GEOMETRY,f=a.CHANGE_FORMAT,d=a.CHANGE_COORDINATES,m=a.UPDATE_MEASURES,y=a.INIT,g=r(267),b=g.TOGGLE_CONTROL,h=g.RESET_CONTROLS,v=g.SET_CONTROL_PROPERTY,O=r(410).set,E=r(2429).isPolygon,w=r(13).dropRight,S=r(26),P={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},lengthFormula:"haversine",showLabel:!0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return S({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,len:0,area:0,bearing:0,feature:{properties:{disabled:!0}}});case s:var r=t.feature;return E(r)&&(r=O("geometry.coordinates[0]",w(r.geometry.coordinates[0]),r)),S({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit,feature:O("properties.disabled",e.feature.properties.disabled,r)});case m:var n=t.measures,a=n.point,g=n.len,T=n.area,j=n.bearing;return o({},e,{point:a,len:g,area:T,bearing:j});case u:var A=O("feature.properties.disabled",!0,e);return o({},A,{isDrawing:!0,updatedByUI:!1});case c:var C,x="length"===t.uom?"lenUnit":"lenArea",D=t.value,_=D.value,I=D.label;return S({},e,(i(C={},x,_),i(C,"uom",S({},t.previousUom,i({},t.uom,{unit:_,label:I}))),i(C,"updatedByUI",!0),C));case p:var F=t.feature;return o({},e,{feature:F=O("properties.disabled",!1,F),updatedByUI:!1,isDrawing:!1});case b:return"info"===t.control?o({},e,{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?o({},e,{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case v:return"measure"===t.control&&!1===t.value?o({},e,{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case h:return o({},e,{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""});case f:return o({},e,{format:t.format});case y:return o({},e,{},t.defaultOptions);case d:var k=t.coordinates.map((function(e){return[e.lon,e.lat]}));return o({},e,{feature:{type:"Feature",properties:{disabled:(k=e.areaMeasureEnabled?w(k):k).filter((function(e){return!isNaN(parseFloat(e[0]))&&!isNaN(parseFloat(e[1]))})).length!==k.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[k]:k}},updatedByUI:!0});default:return e}}},3474:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(15),l=r(2328).ADD_MEASURE_AS_ANNOTATION,s=r(2350),c=s.getStartEndPointsForLinestring,u=s.DEFAULT_ANNOTATIONS_STYLES,p=s.STYLE_TEXT,f=r(2248),d=f.convertUom,m=f.getFormattedBearingValue,y=f.validateFeatureCoordinates,g=r(267),b=g.toggleControl,h=g.SET_CONTROL_PROPERTY,v=r(2133).closeFeatureGrid,O=r(2168),E=O.purgeMapInfoResults,w=O.hideMapinfoMarker,S=r(80).transformLineToArcs,P=r(162),T=r(26),j=r(13),A=j.last,C=j.round,x=r(763).showCoordinateEditorSelector,D=r(2478),_=D.newAnnotation,I=D.setEditingFeature,F=function(e,t){return{length:C(d(t,"m",e)||0,2)+" "+e,area:C(d(t,"sqm",e)||0,2)+" "+e,bearing:m(C(t||0,6)).toString()}},k=function(e){return"LineString"===e.measurement.geomType};e.exports={addAnnotationFromMeasureEpic:function(e,t){return e.ofType(l).switchMap((function(e){var r=t.getState(),n=e.feature,i=e.value,l=e.uom,s=e.measureTool,f=P(),d=function(e,t,r,n,i,a){return T({},{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:"LineString"===e.type?A(e.coordinates):A(e.coordinates[0])},properties:{valueText:F(r,t)[i],isText:!0,isValidFeature:!0,id:P()},style:[o({},p,{id:P(),filtering:!0,title:"Text Style",type:"Text"})]},{type:"Feature",geometry:{coordinates:y(e),type:k(a)?"MultiPoint":e.type},properties:{isValidFeature:!0,useGeodesicLines:k(a),id:P(),geometryGeodesic:k(a)?{type:"LineString",coordinates:S(e.coordinates)}:null},style:[o({},u[e.type],{type:e.type,id:P(),geometry:k(a)?"lineToArc":null,title:"".concat(e.type," Style"),filtering:!0})].concat("LineString"===e.type?c():[])}],properties:{id:n,description:" "+F(r,t)[i]},style:{}})}(n.geometry,i,l,f,s,r);return a.Observable.of(b("annotations",null),_(),I(d))}))},openMeasureEpic:function(e,t){return e.ofType(h).filter((function(e){return"measure"===e.control&&e.value&&x(t.getState())})).switchMap((function(){return a.Observable.of(v(),E(),w())}))}}},3475:function(e,t,r){var n=r(88).connect,o=r(195).createSelector,i=r(407),a=i.compose,l=i.defaultProps,s=r(269),c=s.hideSettings,u=s.updateSettings,p=s.updateNode,f=s.updateSettingsParams,d=r(2306).getLayerCapabilities,m=r(2765).updateSettingsLifecycle,y=r(3476),g=r(3477),b=r(137),h=r(763),v=h.initialSettingsSelector,O=h.originalSettingsSelector,E=h.activeTabSettingsSelector,w=r(408),S=w.layerSettingSelector,P=w.layersSelector,T=w.groupsSelector,j=w.elementSelector,A=r(2140).mapLayoutValuesSelector,C=r(767).currentLocaleSelector,x=r(271).isAdminUserSelector,D=r(267).setControlProperty,_=r(2247).toggleStyleEditor,I=a(n(o([S,P,T,C,function(e){return A(e,{height:!0})},x,v,O,E,j],(function(e,t,r,n,o,i,a,l,s,c){return{settings:e,element:c,groups:r,currentLocale:n,dockStyle:o,isAdmin:i,initialSettings:a,originalSettings:l,activeTab:s}})),{onHideSettings:c,onUpdateSettings:u,onUpdateNode:p,onRetrieveLayerData:d,onUpdateOriginalSettings:D.bind(null,"layersettings","originalSettings"),onUpdateInitialSettings:D.bind(null,"layersettings","initialSettings"),onSetTab:D.bind(null,"layersettings","activeTab"),onUpdateParams:f,onToggleStyleEditor:_}),m,l({getDimension:b.getDimension,getTabs:g}))(y);e.exports={TOCItemsSettingsPlugin:I}},3476:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=r(1),a=r(0),l=r(758),s=l.Row,c=l.Col,u=l.Nav,p=l.NavItem,f=l.Glyphicon,d=r(2472),m=r(2116),y=r(2135)(p),g=r(2173),b=r(2149),h=r(13),v=h.head,O=h.isObject,E=h.isString,w=r(2103),S=function(e,t){var r=e.className,a=void 0===r?"":r,l=e.activeTab,p=void 0===l?"general":l,h=e.currentLocale,S=void 0===h?"en-US":h,P=e.width,T=void 0===P?500:P,j=e.groups,A=void 0===j?[]:j,C=e.element,x=void 0===C?{}:C,D=e.settings,_=void 0===D?{}:D,I=e.getTabs,F=void 0===I?function(){return[]}:I,k=e.onSave,L=void 0===k?function(){}:k,R=e.onClose,N=void 0===R?function(){}:R,M=e.onHideSettings,B=void 0===M?function(){}:M,G=e.onSetTab,U=void 0===G?function(){}:G,W=e.onUpdateParams,V=void 0===W?function(){}:W,H=e.onRetrieveLayerData,z=void 0===H?function(){}:H,q=e.onShowAlertModal,Q=void 0===q?function(){}:q,Y=e.realtimeUpdate,K=void 0===Y||Y,X=e.alertModal,Z=void 0!==X&&X,J=e.dockStyle,$=void 0===J?{}:J,ee=e.dock,te=void 0===ee||ee,re=e.showFullscreen,ne=e.draggable,oe=e.position,ie=void 0===oe?"left":oe,ae=e.tabsConfig,le=void 0===ae?{}:ae,se=F(e,t),ce=v(se.filter((function(e){return e.id===p&&e.toolbarComponent})).map((function(e){return e.toolbarComponent}))),ue=se&&se.map((function(e){return e&&e.onClose})).filter((function(e){return e}))||[],pe=[{glyph:"floppy-disk",tooltipId:"save",visible:!!L,onClick:function(){return L(ue)}}].concat(o(v(se.filter((function(e){return e.id===p&&e.toolbar})).map((function(e){return e.toolbar})))||[]));return i.createElement("div",null,i.createElement(d,{open:_.expanded,glyph:"wrench",title:x.title&&O(x.title)&&(x.title[S]||x.title.default)||E(x.title)&&x.title||"",className:a,onClose:function(){N?N(!1,ue):(ue.forEach((function(e){e()})),B())},size:T,style:$,showFullscreen:re,dock:te,draggable:ne,position:ie,header:[i.createElement(s,{key:"ms-toc-settings-toolbar",className:"text-center"},i.createElement(c,{xs:12},ce?i.createElement(ce,{buttons:pe}):i.createElement(m,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:pe})))].concat(o(se.length>1?[i.createElement(s,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},i.createElement(c,{xs:12},i.createElement(u,{bsStyle:"tabs",activeKey:p,justified:!0},se.map((function(e){return i.createElement(y,{key:"ms-tab-settings-"+e.id,tooltip:i.createElement(w,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){U(e.id),e.onClick&&e.onClick()}},i.createElement(f,{glyph:e.glyph}))})))))]:[]))},se.filter((function(e){return e.id&&e.id===p})).filter((function(e){return e.Component})).map((function(t){return i.createElement(t.Component,n({},e,le[t.id],{key:"ms-tab-settings-body-"+t.id,containerWidth:T,element:x,groups:A,nodeType:_.nodeType,settings:_,retrieveLayerData:z,onChange:function(e,t){return O(e)?V(e,K):V(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t),K)}}))}))),i.createElement(b,null,i.createElement(g,{fade:!0,show:Z,title:i.createElement(w,{msgId:"layerProperties.changedSettings"}),size:"xs",onClose:function(){return Q(!1)},buttons:[{bsStyle:"primary",text:i.createElement(w,{msgId:"close"}),onClick:function(){return N(!0,ue)}},{bsStyle:"primary",text:i.createElement(w,{msgId:"save"}),onClick:function(){return L(ue)}}]},i.createElement("div",{className:"ms-alert"},i.createElement("div",{className:"ms-alert-center"},i.createElement(w,{msgId:"layerProperties.changedSettingsAlert"}))))))};S.contextTypes={plugins:a.object,pluginsConfig:a.array,loadedPlugins:a.object},e.exports=S},3477:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s,c=r(1),u=r(2103),p=r(407).defaultProps,f=r(758).Glyphicon,d=r(26),m=r(833),y=r(834),g=r(432),b=r(424),h=r(273),v=r(198),O=r(2766),E=r(2769),w=r(3525),S=r(3600),P=r(2469),T={html:r(3610),json:JSON.parse(r(3611)),text:r(3612)},j=r(2786).StyleSelector,A=p({readOnly:!0})(j),C=p({formatCards:{TEXT:{titleId:"layerProperties.textFormatTitle",descId:"layerProperties.textFormatDescription",glyph:"ext-txt",body:function(){return c.createElement("div",null,c.createElement("div",null,c.createElement(u,{msgId:"layerProperties.exampleOfResponse"})),c.createElement("br",null),c.createElement(y,{response:T.text}))}},HTML:{titleId:"layerProperties.htmlFormatTitle",descId:"layerProperties.htmlFormatDescription",glyph:"ext-html",body:function(){return c.createElement("div",null,c.createElement("div",null,c.createElement(u,{msgId:"layerProperties.exampleOfResponse"})),c.createElement("br",null),c.createElement(m,{response:T.html}))}},PROPERTIES:{titleId:"layerProperties.propertiesFormatTitle",descId:"layerProperties.propertiesFormatDescription",glyph:"ext-json",body:function(){return c.createElement("div",null,c.createElement("div",null,c.createElement(u,{msgId:"layerProperties.exampleOfResponse"})),c.createElement("br",null),c.createElement(g,{response:T.json}))}},TEMPLATE:{titleId:"layerProperties.templateFormatTitle",descId:"layerProperties.templateFormatDescription",glyph:"ext-empty",body:function(e){var t=e.template,r=void 0===t?"":t,n=l(e,["template"]);return c.createElement("div",null,c.createElement("div",null,r&&"<p><br></p>"!==r?c.createElement(u,{msgId:"layerProperties.templatePreview"}):null),c.createElement("br",null),c.createElement("div",null,r&&"<p><br></p>"!==r?c.createElement(b,{html:r}):c.createElement("span",null,c.createElement("p",null,c.createElement(u,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}})),c.createElement("pre",null,c.createElement(u,{msgId:"layerProperties.templateFormatInfoAlertExample",msgParams:{properties:"{ properties.id }"}})),c.createElement("p",null,c.createElement("small",null,c.createElement(u,{msgId:"layerProperties.templateFormatInfoAlert1"})),"(",c.createElement(f,{glyph:"pencil"}),")")),c.createElement(S,a({template:r},n))))}}},defaultInfoFormat:h.getAvailableInfoFormat()})(r(3694)),x={},D=function(e,t,r){if(e){var n=x[e.name];return n||(n=v.getConfiguredPlugin(e,t,r))&&n.loaded&&(x[e.name]=n),n}return e};e.exports=function(e,t){var r=e.showFeatureInfoTab,n=void 0===r||r,a=l(e,["showFeatureInfoTab"]),u=t.plugins,f=t.pluginsConfig,m=t.loadedPlugins;return s||(s=d({},(v.getPluginItems({},u,f,"TOC",a.id,!0,m,(function(e){return"TOCItemSettings"===e.container}))||[]).reduce((function(e,t){return o({},e,i({},t.name,t))}),{}))),[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:O},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:"layers"===a.settings.nodeType,Component:E},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",onClose:function(){return s&&s.StyleEditor&&a.onToggleStyleEditor&&a.onToggleStyleEditor(null,!1)},onClick:function(){return s&&s.StyleEditor&&a.onToggleStyleEditor&&a.onToggleStyleEditor(null,!0)},visible:"layers"===a.settings.nodeType&&"wms"===a.element.type,Component:"style"===a.activeTab&&a.settings.options.thematic&&s.ThematicLayer&&D(s.ThematicLayer,m,c.createElement(P,{width:100,height:100}))||s.StyleEditor&&D(o({},s.StyleEditor,{cfg:o({},s.StyleEditor.cfg,{active:!0})}),m,c.createElement(P,{width:100,height:100}))||A,toolbar:[{glyph:"list",tooltipId:"toc.thematic.classify",visible:s.ThematicLayer&&a.isAdmin&&!a.settings.options.thematic&&a.element.search||!1,onClick:function(){return a.onUpdateParams&&a.onUpdateParams({thematic:{unconfigured:!0}})}},{glyph:"trash",tooltipId:"toc.thematic.remove_thematic",visible:s.ThematicLayer&&a.isAdmin&&a.settings.options.thematic||!1,onClick:function(){return a.onUpdateParams&&a.onUpdateParams({thematic:null})}}],toolbarComponent:s&&s.StyleEditor&&s.StyleEditor.ToolbarComponent&&(s.StyleEditor.cfg&&p(s.StyleEditor.cfg)(s.StyleEditor.ToolbarComponent)||s.StyleEditor.ToolbarComponent)},{id:"feature",titleId:"layerProperties.featureInfo",tooltipId:"layerProperties.featureInfo",glyph:"map-marker",visible:n&&"layers"===a.settings.nodeType&&"wms"===a.element.type&&!(a.element.featureInfo&&a.element.featureInfo.viewer),Component:C,toolbar:[{glyph:"pencil",tooltipId:"layerProperties.editCustomFormat",visible:!a.showEditor&&a.element&&a.element.featureInfo&&"TEMPLATE"===a.element.featureInfo.format||!1,onClick:function(){return a.onShowEditor&&a.onShowEditor(!a.showEditor)}}]},{id:"elevation",titleId:"layerProperties.elevation",tooltipId:"layerProperties.elevation",glyph:"1-vector",visible:"layers"===a.settings.nodeType&&"wms"===a.element.type&&a.element.dimensions&&a.getDimension&&a.getDimension(a.element.dimensions,"elevation"),Component:w}].filter((function(e){return e.visible}))}},3497:function(e,t,r){var n={"./de-DE.png":3498,"./de.png":3499,"./en-US.png":3500,"./en.png":3501,"./es-ES.png":3502,"./es.png":3503,"./fr-FR.png":3504,"./fr.png":3505,"./hr-HR.png":3506,"./it-IT.png":3507,"./jp.png":3508,"./nl-NL.png":3509,"./nl.png":3510,"./pt-PT.png":3511,"./pt.png":3512,"./us.png":3513,"./vi-VN.png":3514,"./vi.png":3515,"./zh-ZH.png":3516};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=3497},3498:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},3499:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYvTxcWb4+53h3z8GZpZff/79+v3n/7/fDAz/GHAAgABi+f37e3FxOZD1Dwz+/v3z9y+E/AMFv3//+Qumfv9et241QACxMDExAVWfOHkJJAEW/gUEP0EQDn78+AHE/gFOQJUAAcQiy8Ag8O+fLFj1n1+/QDp+/gQioK7fP378+vkDqOH39x9A/RJ/gE5lAAhAYhzcAACCQBDkgRXRjP034R0IaDTZTFZn0DItot37S94KLOINerEcI7aKHAHE8v/3r/9//zIA1f36/R+o4tevf1ANYNVA9P07RD9IJQMDQACxADHD3z8Ig4GMHz+AqqHagKp//fwLVA0U//v7LwMDQACx/LZiYFD7/5/53/+///79BqK/EMZ/UPACSYa/v/8DyX9A0oTxx2EGgABi+a/H8F/m339BoCoQ+g8kgRaCQvgPJJiBYmAuw39hxn+uDAABxMLwi+E/0PusRkwMvxhBGoDkH4b/v/+D2EDyz///QB1/QLb8+sP0lQEggFh+vGXYM2/SP6A2Zoaf30Ex/J+PgekHwz9gQDAz/P0FYrAyMfz7wcDAzPDtFwNAgAEAd3SIyRitX1gAAAAASUVORK5CYII="},3500:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woNChAfXTteVAAAAjRJREFUKM9VkklIlVEAhb9fHxkVDWLwQKw2URI0kQ2GmoYELcJFhFZQ+FBxHaRhIA20qKiWrzDSoAwMGsgicEIlizILi+ZNIERJhNp777/3/ve0sEV9q7M78J0TJBqGxb94D94BBhBguLK8B6V+M/njGwbwgJ23hLHSBCQahuV9pOsDTlZGHX1O1lq19TqFYUbJx07GhArDUJlMWul0SnZ0RD4KlXw0riDRMKyymq10DnoiD5EH40Sk2ZxxYpQW+PkLxbLxW7cwp7aWa13jnE++IAss8nC3SYQe7jdZIkH30RQZJ94GkGptxTXWk336FO/KqqjYfYs376fIGEOQqBtUaU0x1/o8kZ9tdhZCibeELHVPmWheSxCP/6dKgtcfvxPDp9hfItp6xIOmDJWn5tLdNEX8jGGy6jPzkx246glkDN5avDEQRcRW59P7EWIg2gcCnIPy0zl4J9ZczDB+dDGL9h3Hh5bsZyN/Fwnw3iOEBDs+TcLXr19krVUqldLMzIzS09MKW5olSX7jJtl1GzRLpImKcvVf7lY8/4r2Hr6jhSuOKCu//RLZY0/IuXCBWOcNwmSSRLhn9hJhiIwBie07Osnr7aMo+MarykHWFi1HkSXrS3U9bv02THwBoysrOPF7M7kLIiQICvMJCuNIomBVLgcP3WaosISlbW00Pm+l7kAxQX/HTX3oGqKrYBsvhwzWpXFRxMi9ah5WViHn2NXbTdHOs+Aj8BF5y5Zw7FwNAyev8gcAFF3B0hKD4gAAAABJRU5ErkJggg=="},3501:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGCSURBVHjaYvz48SMDEvj3j+Hfty/npKX/MTAY3L7NwMf3DxUABBALUBEfHx+Q/P//P1QPJ7t6UdG/P3+EpKQY2Nj+I4Fnz54BBBALRBFcNUj4378fDx78+/3739+/QBvhqhkZGf/8+QMQQCxoqiEkUPX/X7+BShiQjAc7+B9AALE8SEmRi4//++ED0Dyg2Qx///77+fPfr1//f/9+PWMGUBVQHCT15w+LkNCF3FyAAGJ5t3q1oJLSr8eP///+8//Pb5BLgMYDyV+/3q1Z8w/MAPrn/69f7AoKzxgYAAKIhcventvIiE1e/t+/vwx/QIYBbfi4dStQKa+LC9QGoIa/f1lFRAT27QMIIMa3b9/y8/PDXQ/ywI8ft1xdgQar7tsHDyWgLNDTd+7cAQggFqA/kL0LkQQ5A4j+/mVE8jEQAEMJIIBAGuCqIaKMDAxsMjJAJzEyMQFNhYlBZQECCKTh1atXyHH56927Q1u2/GJgcLh0iUFICOSEf//+gB0CBAABBgAC4UQezUonUAAAAABJRU5ErkJggg=="},3502:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},3503:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFnSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f0NIKPoFJH/9//ULyGaUlQXaABBALAx/Gf4zAt31F4i+ffj3/cN/XrFfzOx//v///f//LzACM/79ZmD8/e8TA0AAMYHdDVT958vXP38nMDB0s3x94/Tj5y+YahhiAKLfQKUAAcQEdtJfoDHMF2L+vPzDmFXLelf551tGFOOhev4A/QgQQExgHwAd8IdFT/Wz6j+GhlpmXSOW/2z///8Eq/sJ18Dw/zdQA0AAMQExxJjjdy9x2/76EfLz4MXdP/i+wsyGkkA3Aw3984cBIIAYfzIwMKel/bt3jwEaLNAwgZIQxp/fDH/+MqqovL14ESCAWICeZvr9h0FSEhSgwBgAygFDEMT+wwAhgQgc4kAEVAwQQIxfUSMSTxxDAECAAQAJWke8v4u1tAAAAABJRU5ErkJggg=="},3504:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},3505:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGzSURBVHjaYiyeepkBBv79+Zfnx/f379+fP38CyT9//jAyMiq5GP77wvDnJ8MfoAIGBoAAYgGqC7STApL///3/9++/pCTv////Qdz/QO4/IMna0vf/z+9/v379//37bUUTQACBNDD8Z/j87fffvyAVX79+/Q8GQDbQeKA9fM+e/Pv18/+vnwzCIkBLAAKQOAY5AIAwCEv4/4PddNUm3ji0QJyxW3rgzE0iLfqDGr2oYuu0l54AYvnz5x9Q6d+/QPQfyAQqAin9B3EOyG1A1UDj//36zfjr1y8GBoAAFI9BDgAwCMIw+P8Ho3GDO6XQ0l4MN8b2kUwYaLszqgKM/KHcDXwBxAJUD3TJ779A8h9Q5D8SAHoARP36+Rfo41+/mcA2AAQQy49ff0Cu//MPpAeI/0FdA1QNYYNVA/3wmwEYVgwMAAHE8uPHH5BqoD1//gJJLADoJKDS378Z//wFhhJAALF8A3rizz8uTmYg788fJkj4QOKREQyYxSWBhjEC/fcXZANAALF8+/anbcHlHz9+ffvx58uPX9KckkCn/gby/wLd8uvHjx96k+cD1UGiGQgAAgwA7q17ZpsMdUQAAAAASUVORK5CYII="},3506:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAYAAAB24g05AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3WAAAN1gGQb3mcAAAAB3RJTUUH4QoHCTAQC4tfhwAAARZJREFUKM+VkqtOA0EUhr+ZWWi3XS4hEBpAkCIICYKLRBIcOAQPUEHqeAEcDkOC4wVQqGLwWCyGFswGSLglTUvbmc7BYMhuFzjy5Fz//1ONUkkYGAIosiJIbdMaly/iTUDQa4MTtDiU978P0N5xsXvIx8Mjk+Mx9aVl5l5eKfcN6+dneG1+1KvnSiXxQmtkipvWGBPSJuc69BDmw08KvU7iAiUiSQ2sJd6vUtzapP/2TrN2yczpCcPlhT9qYC3h2iq23oBgiNGdbUwUpYqo05KqkAdrQWuUAul2MSbdDbV3UEu1sTr9xErYxHvhLlfi6DYiFyT3KRaPZRACG7OKKG+4uneI/IOD79FcxwK4TJaCTMyyIQTgC/dfW5JUkrXFAAAAAElFTkSuQmCC"},3507:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYmSYyMDwgwEE/jEw/GF4mvT0HyqQUlX9B5aEIIAAYmH4wlDtWg1SDwT//0lKSv7/D+T9/w+nYmL+//79/88fIPll0yaAAGJhYAGJP/n69O+/v0CAUAcHt2////ULqJpRVhZoA0AAsQCtAZoMVP0HiP7+RlcNBEDVYA0Mv38DNQAEEMj8vwx//wCt/AdC/zEBkgagYoAAYgF6FGj277+///wlpAEoz8AAEEAgDX/BZv/69wuoB48GRrCTAAKICajh9//fv/6CVP/++wu7BrDxQFf/YWAACCCwk0BKf0MQdg1/gBqAPv0L9ANAALEAY+33vz+S3JIgb/z5C45CBkZGRgY4UFICKQUjoJMAAoiRoZSB4RMojkHx/YPhbNVZoM3AOISQQPUK9vaQOIYAgAADAC5Wd4RRwnKfAAAAAElFTkSuQmCC"},3508:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAE2SURBVHjaYvz69SsDEvj37x+ERGbAwZ9//wACiAUoysXFBST///8P0QOm//+HU0jgxYsXAAHEAlP0H8HYt+//4SP/f//6b2b238sLrpqRkRFoCUAAsaCrXrv2/8KF///8+f/r9//Dh/8/ffI/OQWiAeJCgABigrseJPT27f/Vq////v3/1y8oWrzk/+PHcEv+/PkDEEBMEM/B3fj/40eo0t9g8suX/w8f/odZAVQMEEAsQAzj/2cQFf3PxARWCrYEaBXQLCkpqB/+/wcqBgggJrjxQPX/hYX/+/v///kLqhpIBgf/l5ODhxiQBAggFriToDoTEv5zcf3ftQuk2s7uf0wM3MdAAPQDQAAxvn37lo+PDy4KZUDcycj4/z9CBojv3r0LEEAgG969eweLSBDEBSCWAAQYACaTbJ/kuok9AAAAAElFTkSuQmCC"},3509:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},3510:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFXSURBVHjaYvzPgAD/UNlYEUAAkuTgCAAIBgJggq5VoAs1qM0vdzmMz362vezjokxPGimkEQ5WoAQEKuK71zwCCKyB4c//J8+BShn+/vv/+w/D399AEox+//8FJH/9/wUU+cUoKw20ASCAWBhEDf/LyDOw84BU//kDtgGI/oARmAHRDJQSFwVqAAggxo8fP/Ly8oKc9P8/AxjiAoyMjA8ePAAIIJZ///5BVIM0MOBWDpRlZPzz5w9AALH8gyvCbz7QBrCJAAHEyKDYX15r/+j1199//v35++/Xn7+///77DST/wMl/f4Dk378K4jx7O2cABBALw7NP77/+ev3xB0gOpOHfr99AdX9/gTVASKCGP//+8XCyMjC8AwggFoZfIHWSwpwQk4CW/AYjsKlA8u+ff////v33998/YPgBnQQQQIzAaGNg+AVGf5AYf5BE/oCjGEIyAQQYAGvKZ4C6+xXRAAAAAElFTkSuQmCC"},3511:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},3512:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAG8SURBVHjaYmSIZGD4wgAF/xgYWBj+boQysSKAAGJh+MRQnVoNUgEE///9ZfzLoPiX4e8fxj9/mP/8Yfr9+/+fP/9h5JdNmwACiIWBCaj4/5P3T7mY/xoJ/9UR/v0n8O+f17/Zlv/+//73/1+////+9f/XL6BqRllZoA0AAcQCNvv/339/C03+8v/8w7bk7+/vv/+7/P4S95ur+xdY9W+IBobfv4EaAAKICeiuv////vnz58PX3xxb/7BlN3/K7Ph1WoSR/fcfhl//f4KN/wW1BGg6QAAxMfxi+PP37++/v1kYfn//+usnE+cHCbWfTKz/mH7+ZgUpQmj48wdoA0AAsQA1/P0HZP458/qXqvNfjdnVItxy3wNvApUIvwPb8BvqJEawkwACiIXhDwPQ+F9/f+2890dY6/cnrycCb++z3frNfOwX01eEagZgKAHdzcAAEEAgG4DGA/W8+fO79+Rvdt5f2+b++sP+m+kdWDVEwx+gBmBY/wX6ASCAWBi+Mfz+80eSX/L3n99AzwBDm0H2NwtQHS/QapDBIPT3LwQBnQQQQIwMxgwM7xgYfjAArQKRTAyvP2OPYwgACDAAjtdGduN8tIgAAAAASUVORK5CYII="},3513:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHzSURBVHjaYkxOP8IAB//+Mfz7w8Dwi4HhP5CcJb/n/7evb16/APL/gRFQDiAAw3JuAgAIBEDQ/iswEERjGzBQLEru97ll0g0+3HvqMn1SpqlqGsZMsZsIe0SICA5gt5a/AGIEarCPtFh+6N/ffwxA9OvP/7//QYwff/6fZahmePeB4dNHhi+fGb59Y4zyvHHmCEAAAW3YDzQYaJJ93a+vX79aVf58//69fvEPlpIfnz59+vDhw7t37968efP3b/SXL59OnjwIEEAsDP+YgY53b2b89++/awvLn98MDi2cVxl+/vl6mituCtBghi9f/v/48e/XL86krj9XzwEEEENy8g6gu22rfn78+NGs5Ofr16+ZC58+fvyYwX8rxOxXr169fPny+fPn1//93bJlBUAAsQADZMEBxj9/GBxb2P/9+S/R8u3vzxuyaX8ZHv3j8/YGms3w8ycQARmi2eE37t4ACCDGR4/uSkrKAS35B3TT////wADOgLOBIaXIyjBlwxKAAGKRXjCB0SOEaeu+/y9fMnz4AHQxCP348R/o+l+//sMZQBNLEvif3AcIIMZbty7Ly6t9ZmXl+fXj/38GoHH/UcGfP79//BBiYHjy9+8/oUkNAAHEwt1V/vI/KBY/QSISFqM/GBg+MzB8A6PfYC5EFiDAABqgW776MP0rAAAAAElFTkSuQmCC"},3514:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},3515:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFsSURBVHjaYvzPgAD/UNlYEUAAmuTYAAAQhAEYqF/zFbe50RZ1cMmS9TLi0pJLRjZohAMTGFUN9HdnHgEE1sDw//+Tp0ClINW/f4NI9d////3+f+b3/1+////+9f/XL6A4o6ws0AaAAGIBm/0fRTVQ2v3Pf97f/4/9Aqv+DdHA8Ps3UANAALEAMSNQNdDGP3+ALvnf8vv/t9//9X/////7f+uv/4K//iciNABNBwggsJP+/IW4kuH3n//1v/8v+wVSDURmv/57//7/CeokoKFA0wECiAnkpL9/wH4CO+DNr/+VQA1A9PN/w6//j36CVIMRxEkAAQR20m+QpSBXgU0CuSTj9/93v/8v//V/xW+48UBD/zAwAAQQSAMzOMiABoBUswCd8ev/M7A669//OX7///Lr/x+gBlCoAJ0DEEAgDUy//zBISoKNAfoepJNRFmQkyJecfxj4/kDCEIiAigECiPErakTiiWMIAAgwAB4ZUlqMMhQQAAAAAElFTkSuQmCC"},3516:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFqSURBVHjaYrzOwPAPjJgYQEDAleHVbhADIvgHLPgHiQ0QQCxAlkR9NW8sw+cV/1gV/7Gb/hV4+vfzhj8Mv/78//Pn/+/f/8AkhH1t0yaAAAJp4I37zyz2lDfu79uqv/++/WYz+cuq/vvLxt8gdb+A5K9/v34B2SyyskBLAAII5JAva/7/+/z367a/f3/8ZuT9+//Pr78vQUrB6n4CSSj6/RuoASCAWEDO/fD3ddEfhv9/OE3/sKj8/n7k9/fDQNUIs/+DVf8HawAIIJCT/v38C3Hr95N/GDh/f94AVvT7N8RUBpjxQAVADQABBNLw/y/Ifwy/f/399ufTOpDBEPf8g5sN0QBEDAwAAQTWABEChgOSA9BVA00E2wAQQCANQBbEif/AzoCqgLkbbBYwWP/+//sXqBYggFhAkfL7D7OkJFCOCSj65zfUeFjwg8z++/ffX5AGoGKAAGI8jhSRyIw/SJH9D4aAYQoQYAA6rnMw1jU2vQAAAABJRU5ErkJggg=="},3525:function(e,t,r){var n,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(0),b=r(2307),h=r(3526),v=r(758).Grid,O=r(2103),E=r(137);r(2379),r(3598),e.exports=(o=n=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"renderElevationsChart",(function(e){return r.props.showElevationChart?y.createElement(h,{elevations:e,chartStyle:l({height:200,width:r.props.containerWidth-30},r.props.chartStyle)}):null})),m(f(r),"renderElevationsSlider",(function(e){var t=e.values,n=t.length-1,o=n-0,i=parseFloat(t[0]),a=parseFloat(t[t.length-1]),l=r.props.element&&r.props.element.params&&r.props.element.params[e.name]||t[0];return y.createElement("div",{id:"mapstore-elevation"},y.createElement(b,{snap:!0,start:[parseFloat(l)]||!1,range:r.calculateRange(t,0,n,o,i,a),behaviour:"tap",pips:{mode:"range",stepped:!0,density:10,format:{to:function(e){return parseFloat(e).toFixed(1)}}},tooltips:!r.props.showElevationChart,onChange:function(t){r.props.onChange("params",Object.assign({},m({},e.name,t[0])))}}))})),m(f(r),"calculateRange",(function(e,t,r,n,o,i){var a=[],l="",s={min:o,max:i};return e.forEach((function(e,r){a[r]=(r-t)/n*100,l=a[r]+"%",s[l]=parseFloat(e)})),s})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"shouldComponentUpdate",value:function(e){return this.props.element.id!==e.element.id}},{key:"render",value:function(){var e=this.props.getDimension(this.props.element.dimensions,"elevation");return y.createElement(v,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},y.createElement("label",{id:"mapstore-elevation-label",key:"elevation-label",className:"control-label",style:this.props.showElevationChart?{marginBottom:"10px"}:{marginBottom:"90px"}},this.props.elevationText,": (",e.units,")"),this.renderElevationsChart(e),y.createElement("div",null,y.createElement("div",{key:"elevation"},this.renderElevationsSlider(e))))}}])&&c(r.prototype,n),o&&c(r,o),t}(y.Component),m(n,"propTypes",{elevationText:g.node,element:g.object,getDimension:g.func,onChange:g.func,chartStyle:g.object,showElevationChart:g.bool,containerWidth:g.number}),m(n,"defaultProps",{onChange:function(){},showElevationChart:!0,containerWidth:500,elevationText:y.createElement(O,{msgId:"elevation"}),getDimension:E.getDimension}),o)},3526:function(e,t,r){var n,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(0),m=r(1),y=r(2245),g=y.LineChart,b=y.Line,h=y.XAxis,v=y.YAxis,O=y.CartesianGrid,E=y.Tooltip,w=r(3597);e.exports=(o=n=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"renderLineChart",(function(){return m.createElement(g,{margin:r.props.chartStyle.margin,width:r.props.chartStyle.width,height:r.props.chartStyle.height,data:r.formatData(r.props.elevations.values)},m.createElement(h,{hide:!0,dataKey:"name"}),m.createElement(v,{hide:!0}),m.createElement(E,{content:m.createElement(w,null)}),m.createElement(O,{strokeDasharray:"3 3",horizontal:!1}),m.createElement(b,{isAnimationActive:r.props.animated,type:"monotone",dataKey:"value",stroke:"#82ca9d",activeDot:{r:8}}))})),f(u(r),"formatData",(function(e){var t=[];return e.map((function(e){t.push({name:this.props.elevations.name,value:parseFloat(this.props.elevations.positive?e:-e)})}),u(r)),t})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return m.createElement("div",null,this.renderLineChart())}}])&&l(r.prototype,n),o&&l(r,o),t}(m.Component),f(n,"propTypes",{elevations:d.object,chartStyle:d.object,animated:d.bool}),f(n,"defaultProps",{elevations:{},chartStyle:{margin:{top:5,right:5,left:5,bottom:45},width:600,height:200},animated:!1}),o)},3597:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,f=r(0),d=r(1),m=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(this.props.active){var e=this.props.payload;return d.createElement("div",{className:"custom-tooltip"},d.createElement("p",{className:"label"},Math.abs(e[0].value)))}return null}}])&&i(r.prototype,n),c&&i(r,c),t}(d.Component);c=m,u="propTypes",p={type:f.string,payload:f.array,label:f.string,active:f.bool},u in c?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p,e.exports=m},3598:function(e,t,r){var n=r(3599);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3599:function(e,t,r){(e.exports=r(759)()).push([e.i,".msgapi #mapstore-elevation {\n    width: 100%;\n    /*margin-top: -46px;*/\n    height: 80px;\n    padding: 0 5px;\n}\n\n.msgapi label#mapstore-elevation-label {\n    margin-top: 10px;\n}\n\n.msgapi .custom-tooltip {\n    width: auto;\n    margin: 0;\n    line-height: 24px;\n    border: 1px solid #C1C1C1;\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 5px;\n}\n.msgapi .custom-tooltip  .label {\n  margin: 0;\n  color: #82CA9D;\n  font-weight: bold;\n  font-size: 16px;\n}\n",""])},3600:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(0),y=r(2517),g=r(2173),b=r(2149),h=r(2103),v=y.Quill,O=r(3607)(v),E=O.ResizeModule,w=O.IFrame,S=O.toolbarConfig;v.register({"formats/video":w,"modules/resizeModule":E});var P=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"state",{template:" "}),f(u(r),"close",(function(){r.props.onShowEditor(!r.props.showEditor),r.props.onChange("featureInfo",i({},r.props.element&&r.props.element.featureInfo||{},{template:r.state.template}))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({template:this.props.element&&this.props.element.featureInfo&&this.props.element.featureInfo.template||" "})}},{key:"render",value:function(){var e=this,t=this.props,r=t.showEditor,n=t.enableIFrameModule,o=void 0===n||n;return d.createElement(b,null,d.createElement(g,{fade:!0,show:r,title:d.createElement(h,{msgId:"layerProperties.editCustomFormat"}),size:"lg",showFullscreen:!0,clickOutEnabled:!1,onClose:function(){return e.close()},buttons:[{bsStyle:"primary",text:d.createElement(h,{msgId:"close"}),onClick:function(){return e.close()}}]},d.createElement("div",{id:"ms-template-editor",className:"ms-editor"},d.createElement(y,{bounds:"#ms-template-editor",ref:function(t){t&&(e.quill=t)},modules:o?{resizeModule:{},toolbar:S}:{},defaultValue:this.state.template,onChange:function(t){return e.setState({template:t})}}))))}}])&&l(r.prototype,n),o&&l(r,o),t}(d.Component);f(P,"propTypes",{showEditor:m.bool,element:m.object,onChange:m.func,onShowEditor:m.func,enableIFrameModule:m.bool}),f(P,"defaultProps",{showEditor:!1,element:{},enableIFrameModule:!1,onChange:function(){},onShowEditor:function(){}}),e.exports=P},3607:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(13),g=y.defaultsDeep,b=y.isObject,h=y.isString,v='<span class="glyphicon glyphicon-align-left" style="display: inline-block; margin-top: 4px;"></span>',O='<span class="glyphicon glyphicon-align-center" style="display: inline-block; margin-top: 4px;"></span>',E='<span class="glyphicon glyphicon-align-right" style="display: inline-block; margin-top: 4px;"></span>',w='<span class="glyphicon glyphicon-remove" style="display: inline-block; margin-top: 4px;"></span>';r(3608),e.exports=function(e){var t=e.import("blots/embed"),r=e.import("formats/link"),n=e.imports.parchment,o=new n.Attributor.Style("float","float"),f=new n.Attributor.Style("margin","margin"),y=new n.Attributor.Style("display","display"),S=new n.Attributor.Style("width","width"),P={iframeIcon:!0,modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},T=function e(t){d(this,e),m(this,"onCreate",(function(){})),m(this,"onDestroy",(function(){})),m(this,"onUpdate",(function(){})),this.overlay=t.overlay,this.domNode=t.domNode,this.options=t.options,this.requestUpdate=t.onUpdate},j=function(e){function t(){var e,r;d(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onCreate",(function(){r.display=document.createElement("div"),Object.assign(r.display.style,r.options.displayStyles),r.overlay.appendChild(r.display)})),m(u(r),"onDestroy",(function(){})),m(u(r),"onUpdate",(function(){if(r.display&&r.domNode){var e=r.getCurrentSize();if(r.display.innerHTML=e.join(" &times; "),e[0]>120&&e[1]>30)Object.assign(r.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"===r.domNode.style.float){var t=r.display.getBoundingClientRect();Object.assign(r.display.style,{right:"auto",bottom:"-".concat(t.height+4,"px"),left:"-".concat(t.width+4,"px")})}else{var n=r.display.getBoundingClientRect();Object.assign(r.display.style,{right:"-".concat(n.width+4,"px"),bottom:"-".concat(n.height+4,"px"),left:"auto"})}}})),m(u(r),"getCurrentSize",(function(){return"IMG"===r.domNode.tagName.toUpperCase()?[r.domNode.width,Math.round(r.domNode.width/r.domNode.naturalWidth*r.domNode.naturalHeight)]:[r.domNode.clientWidth,r.domNode.clientHeight]})),r}return p(t,e),t}(T),A=function(e){function t(){var e,r;d(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onCreate",(function(){r.boxes=[],r.addBox("nwse-resize"),r.addBox("nesw-resize"),r.addBox("nwse-resize"),r.addBox("nesw-resize"),r.positionBoxes()})),m(u(r),"onDestroy",(function(){r.setCursor("")})),m(u(r),"positionBoxes",(function(){var e="".concat(-parseFloat(r.options.handleStyles.width)/2,"px"),t="".concat(-parseFloat(r.options.handleStyles.height)/2,"px");[{left:e,top:t},{right:e,top:t},{right:e,bottom:t},{left:e,bottom:t}].forEach((function(e,t){Object.assign(r.boxes[t].style,e)}))})),m(u(r),"addBox",(function(e){var t=document.createElement("div");Object.assign(t.style,r.options.handleStyles),t.style.cursor=e,t.style.width="".concat(r.options.handleStyles.width,"px"),t.style.height="".concat(r.options.handleStyles.height,"px"),t.addEventListener("mousedown",r.handleMousedown,!1),r.overlay.appendChild(t),r.boxes.push(t)})),m(u(r),"handleMousedown",(function(e){r.dragBox=e.target,r.dragStartX=e.clientX,r.dragStartY=e.clientY,r.preDragWidth=r.domNode.width||r.domNode.naturalWidth||r.domNode.clientWidth,r.preDragHeight=r.domNode.height||r.domNode.naturalHeight||r.domNode.clientHeight,r.setCursor(r.dragBox.style.cursor),document.addEventListener("mousemove",r.handleDrag,!1),document.addEventListener("mouseup",r.handleMouseup,!1)})),m(u(r),"handleMouseup",(function(){r.setCursor(""),document.removeEventListener("mousemove",r.handleDrag),document.removeEventListener("mouseup",r.handleMouseup)})),m(u(r),"handleDrag",(function(e){if(r.domNode){var t=e.clientX-r.dragStartX,n=e.clientY-r.dragStartY;if(r.dragBox===r.boxes[0]||r.dragBox===r.boxes[3]){if("IMG"===r.domNode.tagName.toUpperCase())r.domNode.width=Math.round(r.preDragWidth-t);else if("ms-quill-iframe"===r.domNode.getAttribute("class")){var o=r.domNode.parentNode&&r.domNode.parentNode.children&&r.domNode.parentNode.children[0]||null;o&&(r.domNode.parentNode.parentNode.style.width=Math.round(r.preDragWidth-t)+"px",o.setAttribute("width",r.domNode.parentNode.parentNode.clientWidth),r.domNode.style.width=r.domNode.parentNode.parentNode.clientWidth+"px")}}else if("IMG"===r.domNode.tagName.toUpperCase())r.domNode.width=Math.round(r.preDragWidth+t);else if("ms-quill-iframe"===r.domNode.getAttribute("class")){var i=r.domNode.parentNode&&r.domNode.parentNode.children&&r.domNode.parentNode.children[0]||null;i&&(r.domNode.parentNode.parentNode.style.width=Math.round(r.preDragWidth+t)+"px",i.setAttribute("width",r.domNode.parentNode.parentNode.clientWidth),r.domNode.style.width=r.domNode.parentNode.parentNode.clientWidth+"px")}if("ms-quill-iframe"===r.domNode.getAttribute("class")){var a=r.domNode.parentNode&&r.domNode.parentNode.children&&r.domNode.parentNode.children[0]||null;a&&(r.domNode.parentNode.parentNode.style.height=Math.round(r.preDragHeight+n)+"px",a.setAttribute("height",r.domNode.parentNode.parentNode.clientHeight),r.domNode.style.height=r.domNode.parentNode.parentNode.clientHeight+"px")}r.requestUpdate()}})),m(u(r),"setCursor",(function(e){[document.body,"IMG"===r.domNode.tagName.toUpperCase()?r.domNode:r.domNode.parentNode.parentNode].forEach((function(t){t.style.cursor=e}))})),r}return p(t,e),t}(T),C=function(e){function t(){var e,r;d(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return m(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(i)))),"onCreate",(function(){r.toolbar=document.createElement("div"),Object.assign(r.toolbar.style,r.options.toolbarStyles),r.overlay.appendChild(r.toolbar),r._defineAlignments(),r._addToolbarButtons()})),m(u(r),"onDestroy",(function(){})),m(u(r),"onUpdate",(function(){})),m(u(r),"_defineAlignments",(function(){var e="IMG"===r.domNode.tagName.toUpperCase()?r.domNode:r.domNode.parentNode.parentNode;r.alignments=[{icon:v,apply:function(){y.add(e,"inline"),o.add(e,"left"),f.add(e,"0 1em 1em 0")},isApplied:function(){return"left"===o.value(e)}},{icon:O,apply:function(){y.add(e,"block"),o.remove(e),f.add(e,"auto")},isApplied:function(){return"auto"===f.value(e)}},{icon:E,apply:function(){y.add(e,"inline"),o.add(e,"right"),f.add(e,"0 0 1em 1em")},isApplied:function(){return"right"===o.value(e)}},{icon:w,apply:function(){if(y.add(e,"block"),o.add(e,"none"),f.add(e,"0"),S.add(e,"100%"),"ql-video"===e.getAttribute("class")){var t=e.querySelector("IFRAME")||null,r=e.querySelector(".ms-quill-iframe")||null;t&&r&&(e.style.width="100%",t.setAttribute("width","100%"),r.style.width="100%",e.style.height="200px",t.setAttribute("height",200),r.style.height="200px")}},isApplied:function(){return!1}}]})),m(u(r),"_addToolbarButtons",(function(){var e=[];r.alignments.forEach((function(t,n){var i=document.createElement("span");e.push(i),i.innerHTML=t.icon,i.addEventListener("click",(function(){e.forEach((function(e){e.style.filter=""})),t.isApplied()?(o.remove(r.domNode),f.remove(r.domNode),y.remove(r.domNode)):(r._selectButton(i),t.apply()),r.requestUpdate()})),Object.assign(i.style,r.options.toolbarButtonStyles),n>0&&(i.style.borderLeftWidth="0"),Object.assign(i.style,r.options.toolbarButtonSvgStyles),t.isApplied()&&r._selectButton(i),r.toolbar.appendChild(i)}))})),m(u(r),"_selectButton",(function(e){e.style.filter="invert(20%)"})),r}return p(t,e),t}(T),x={DisplaySize:j,Toolbar:C,Resize:A},D=["height","width"],_=function(e){function t(){return d(this,t),s(this,c(t).apply(this,arguments))}var n,o,u;return p(t,e),n=t,u=[{key:"create",value:function(e){var r="",n="100%",o=200;b(e)?(r=e.src||r,n=e.width||n,o=e.height||o):r=e||r;var i=l(c(t),"create",this).call(this,e);i.style.position="relative",e.domNodeStyle&&Object.assign(i.style,e.domNodeStyle),i.style.width=h(n)&&-1!==n.indexOf("%")?n:n+"px",i.style.height=h(o)&&-1!==o.indexOf("%")?o:o+"px";var a=document.createElement("IFRAME");a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("src",this.sanitize(r)),a.setAttribute("width",n),a.setAttribute("height",o);var s=document.createElement("DIV");return s.setAttribute("class","ms-quill-iframe"),s.style.overflow="hidden",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width=h(n)&&-1!==n.indexOf("%")?n:n+"px",s.style.height=h(o)&&-1!==o.indexOf("%")?o:o+"px",s.style.border="1px solid #ddd",i.appendChild(a),i.appendChild(s),i}},{key:"formats",value:function(e){return D.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"sanitize",value:function(e){return r.sanitize(e)}},{key:"value",value:function(e){var t=e.children&&e.children[0]&&e.children[0].children&&e.children[0].children[0];return t?{src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),domNodeStyle:i({},e.style)}:""}}],(o=[{key:"format",value:function(e,r){D.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):l(c(t.prototype),"format",this).call(this,e,r)}}])&&a(n.prototype,o),u&&a(n,u),t}(t);_.blotName="video",_.className="ql-video",_.tagName="DIV";return{ResizeModule:function t(r){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,t),m(this,"initializeModules",(function(){n.removeModules(),n.modules=n.moduleClasses.map((function(e){return new(x[e]||e)(n)})),n.modules.forEach((function(e){e.onCreate()})),n.onUpdate()})),m(this,"onUpdate",(function(){n.repositionElements(),n.modules.forEach((function(e){e.onUpdate()}))})),m(this,"removeModules",(function(){n.modules.forEach((function(e){e.onDestroy()})),n.modules=[]})),m(this,"handleClick",(function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()||e.target&&e.target.tagName&&"DIV"===e.target.tagName.toUpperCase()&&"ms-quill-iframe"===e.target.getAttribute("class")){if(n.domNode===e.target)return;n.domNode&&n.hide(),n.show(e.target)}else n.domNode&&n.hide()})),m(this,"show",(function(e){n.domNode=e,n.showOverlay(),n.initializeModules()})),m(this,"showOverlay",(function(){n.overlay&&n.hideOverlay(),n.quill.setSelection(null),n.setUserSelect("none"),document.addEventListener("keyup",n.checkImage,!0),n.quill.root.addEventListener("input",n.checkImage,!0);var e=n.quill.root.parentNode.querySelector(".ql-editor");if(e&&(e.style.overflow="hidden"),n.overlay=document.createElement("div"),Object.assign(n.overlay.style,n.options.overlayStyles),n.domNode&&"ms-quill-iframe"===n.domNode.getAttribute("class")){n.input=document.createElement("input"),n.input.style.position="absolute",n.input.style.left="8px",n.input.style.top="16px",n.input.style.width="calc(100% - 16px)";var t=n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].getAttribute("src")||"";n.input.setAttribute("value",t),n.overlay.appendChild(n.input),n.overlay.style.backgroundColor="rgba(0, 0, 0, 0.2)"}n.quill.root.parentNode.appendChild(n.overlay),n.repositionElements()})),m(this,"hideOverlay",(function(){if(n.overlay){n.input&&(n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].setAttribute("src",n.input.value),n.overlay.removeChild(n.input),n.input=void 0);var e=n.quill.root.parentNode.querySelector(".ql-editor");e&&(e.style.overflow="auto"),n.quill.root.parentNode.removeChild(n.overlay),n.overlay=void 0,document.removeEventListener("keyup",n.checkImage),n.quill.root.removeEventListener("input",n.checkImage),n.setUserSelect("")}})),m(this,"repositionElements",(function(){if(n.overlay&&n.domNode){var e=n.quill.root.parentNode,t="IMG"===n.domNode.tagName.toUpperCase()?n.domNode.getBoundingClientRect():n.domNode.parentNode.parentNode.getBoundingClientRect(),r=e.getBoundingClientRect();Object.assign(n.overlay.style,{left:"".concat(t.left-r.left-1+e.scrollLeft,"px"),top:"".concat(t.top-r.top+e.scrollTop,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}})),m(this,"hide",(function(){n.hideOverlay(),n.removeModules(),n.domNode=void 0})),m(this,"setUserSelect",(function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(t){n.quill.root.style[t]=e,document.documentElement.style[t]=e}))})),m(this,"checkImage",(function(t){n.domNode&&n.input!==t.target&&(46!==t.keyCode&&8!==t.keyCode||"IMG"!==n.domNode.tagName.toUpperCase()||e.find(n.domNode).deleteAt(0),n.hide())})),this.quill=r;var i=!1;if(o.modules&&(i=o.modules.slice()),this.options=g({},o,P),!1!==i&&(this.options.modules=i),this.quill.theme&&this.quill.theme.modules&&this.quill.theme.modules.toolbar&&this.quill.theme.modules.toolbar.container&&this.options.iframeIcon){var a=this.quill.theme.modules.toolbar.container.querySelector(".ql-video");a&&(a.innerHTML='<svg viewbox="0 1022 18 18"><g transform="translate(0,0) scale(3.5)"><path d="m 0.20913578,292.52935 -0.0448461,0.0228 c -0.0522035,0.0266 -0.10514577,0.0764 -0.12730166,0.11985 -0.03898753,0.0764 -0.03689917898,-0.0334 -0.036985428654,1.94049 -5.91591201e-5,1.35972 0.00218847865,1.849 0.00864824865,1.87539 0.02503373,0.10227 0.09520806,0.17792 0.19668092,0.21203 0.0202072,0.007 0.54764317,0.009 2.18732434,0.008 l 2.1606966,-0.001 0.044846,-0.0228 c 0.079823,-0.0406 0.1345603,-0.10935 0.1556385,-0.19546 0.00646,-0.0264 0.00872,-0.51567 0.00866,-1.87539 -7.44e-5,-1.97386 0.002,-1.86407 -0.036985,-1.94049 -0.022155,-0.0434 -0.075113,-0.0933 -0.1273161,-0.11985 l -0.044846,-0.0228 H 2.381244 Z m 0.0798849,0.757 H 2.381244 4.4734673 v 1.57107 1.57107 H 2.381244 0.28902068 v -1.57107 z m 2.34957572,0.33607 c -0.028878,0 -0.055626,0.007 -0.080256,0.0204 -0.024631,0.0136 -0.045009,0.0323 -0.061147,0.056 -0.016138,0.0238 -0.025064,0.0501 -0.026762,0.079 -0.032275,0.14948 -0.1758133,0.82556 -0.4306147,2.02822 -0.00679,0.017 -0.010194,0.0348 -0.010194,0.0535 0,0.0306 0.00764,0.0586 0.022928,0.0841 0.015288,0.0255 0.035682,0.0459 0.061162,0.0612 0.025481,0.0153 0.053499,0.0229 0.084076,0.0229 0.022083,0 0.043319,-0.004 0.063703,-0.0127 0.020385,-0.008 0.038221,-0.0204 0.053509,-0.0357 0.015288,-0.0153 0.027184,-0.0331 0.035678,-0.0535 0.00849,-0.0204 0.013592,-0.0416 0.01529,-0.0637 l 0.4255178,-2.00274 c 0.00849,-0.0221 0.013592,-0.045 0.015291,-0.0688 0,-0.0459 -0.016566,-0.0854 -0.04969,-0.11847 -0.033125,-0.0331 -0.072626,-0.0497 -0.1184901,-0.0497 z m -0.1025608,0.30066 c 0.00234,0.002 0.00489,0.003 0.00701,0.005 0.00425,0.003 0.00892,0.006 0.014013,0.008 -0.0051,-0.002 -0.010194,-0.004 -0.01529,-0.008 -0.0017,-0.002 -0.00361,-0.003 -0.00574,-0.005 z m -0.7892346,0.20894 c -0.022083,0 -0.048417,0.008 -0.078993,0.0255 l -0.050968,0.0382 c -0.3295431,0.2599 -0.5461142,0.43063 -0.64973332,0.51217 -0.0441656,0.0187 -0.0764407,0.0514 -0.0968248,0.0981 -0.0203841,0.0467 -0.0246402,0.0947 -0.0127495,0.14398 0.0118908,0.0493 0.038225,0.0858 0.0789933,0.10956 0.057755,0.0408 0.13887122,0.10235 0.24333972,0.18473 0.1044687,0.0824 0.1643489,0.13037 0.179637,0.14396 0.022083,0.017 0.053501,0.0412 0.094269,0.0726 0.040768,0.0314 0.077299,0.0603 0.1095742,0.0866 0.032275,0.0263 0.06285,0.0514 0.091728,0.0752 0.047563,0.034 0.1006454,0.0412 0.1592497,0.0217 0.058604,-0.0195 0.097249,-0.0565 0.1159341,-0.11084 0.016987,-0.0442 0.015701,-0.0896 -0.00383,-0.13632 -0.018887,-0.0452 -0.049313,-0.0772 -0.091223,-0.0962 l -0.03489,-0.0274 c -0.018685,-0.0136 -0.029739,-0.0221 -0.033137,-0.0255 -0.056056,-0.0408 -0.1375864,-0.10108 -0.2446029,-0.18091 -0.1070166,-0.0798 -0.1843053,-0.13759 -0.2318683,-0.17327 0.030576,-0.0221 0.1108352,-0.082 0.240784,-0.17963 0.1299487,-0.0977 0.2297443,-0.17284 0.29939,-0.2255 0.057755,-0.0238 0.093001,-0.0697 0.1057405,-0.1376 0.01274,-0.0679 -0.00467,-0.12314 -0.052231,-0.16561 -0.035672,-0.0357 -0.078129,-0.0527 -0.1273908,-0.051 -0.0034,-0.002 -0.0068,-0.003 -0.010194,-0.003 z m 1.2689006,0 c -0.0034,0 -0.0068,8.5e-4 -0.010194,0.003 -0.049262,-0.002 -0.091718,0.0153 -0.1273909,0.051 -0.047563,0.0425 -0.064971,0.0977 -0.052231,0.16561 0.01274,0.0679 0.047986,0.11382 0.1057406,0.1376 0.069646,0.0527 0.1694416,0.12782 0.29939,0.2255 0.1299488,0.0977 0.210208,0.15755 0.2407841,0.17963 -0.047563,0.0357 -0.1248516,0.0934 -0.2318683,0.17327 -0.1070167,0.0798 -0.1885466,0.14014 -0.2446028,0.18091 l -0.033137,0.0255 c -0.015288,0.0102 -0.024628,0.017 -0.028025,0.0204 -0.00522,0.004 -0.00795,0.007 -0.00826,0.008 -0.041191,0.019 -0.071164,0.0509 -0.089841,0.0955 -0.019535,0.0467 -0.020806,0.0922 -0.00382,0.13632 0.018685,0.0544 0.05733,0.0913 0.1159342,0.11084 0.058604,0.0195 0.1116868,0.0123 0.1592499,-0.0217 0.028877,-0.0238 0.059453,-0.0488 0.091728,-0.0752 0.032275,-0.0263 0.068806,-0.0552 0.1095742,-0.0866 0.040768,-0.0314 0.072186,-0.0556 0.094269,-0.0726 0.032275,-0.0272 0.076018,-0.0629 0.1312245,-0.10702 0.055207,-0.0442 0.10659,-0.0845 0.1541529,-0.12103 0.047563,-0.0365 0.093434,-0.0701 0.1375999,-0.10064 0.040768,-0.0238 0.067102,-0.0603 0.078993,-0.10956 0.011891,-0.0493 0.00763,-0.0973 -0.012749,-0.14398 -0.020384,-0.0467 -0.052659,-0.0794 -0.096824,-0.0981 -0.07814,-0.0612 -0.2947259,-0.23189 -0.6497489,-0.51217 -0.045864,-0.0408 -0.089179,-0.062 -0.1299468,-0.0637 z m -1.4396219,0.15034 c -0.0017,0.008 -0.00256,0.0178 -0.00256,0.028 v -0.0102 -0.0102 z m 1.6103431,0 0.00254,0.008 v 0.0102 0.0102 c 0,-0.0102 -8.416e-4,-0.0195 -0.00254,-0.028 z m -1.6128989,0.051 0.00256,0.0178 0.00254,0.0179 0.00765,0.0178 0.00764,0.0153 h -0.00254 c -0.0017,-0.003 -0.0034,-0.008 -0.0051,-0.0153 l -0.00256,-0.003 -0.0051,-0.0153 c -0.0017,-0.008 -0.00254,-0.0145 -0.00254,-0.0179 -0.0017,-0.007 -0.00256,-0.0127 -0.00256,-0.0178 z m 1.6154252,2.3e-4 c -2.25e-5,0.005 -8.494e-4,0.0109 -0.00252,0.0176 0,0.003 -8.416e-4,0.009 -0.00254,0.0179 l -0.0051,0.0153 -0.00256,0.003 c -0.0017,0.007 -0.0034,0.0119 -0.0051,0.0153 h -0.00254 l 0.00764,-0.0153 0.00765,-0.0178 0.00254,-0.0179 z m -1.50331,0.1552 c 0.00849,0.003 0.01869,0.007 0.030581,0.0102 -0.00679,-0.002 -0.011036,-0.003 -0.012735,-0.003 -0.0051,-0.002 -0.011052,-0.004 -0.017846,-0.008 z m 1.3912246,0 c -0.00679,0.003 -0.01275,0.006 -0.017846,0.008 -0.0017,0 -0.00594,8.6e-4 -0.012735,0.003 0.011891,-0.003 0.022087,-0.007 0.030581,-0.0102 z m -0.7975265,1.2256 c 0.0051,0.002 0.00934,0.004 0.012734,0.008 -0.0051,-0.003 -0.00934,-0.006 -0.012734,-0.008 z"/></g></svg>')}this.quill.theme&&this.quill.theme.tooltip&&this.quill.theme.tooltip.root&&this.quill.theme.tooltip.root.classList&&this.quill.theme.tooltip.root.classList.add&&this.options.iframeIcon&&this.quill.theme.tooltip.root.classList.add("ms-ql-iframe-tooltip"),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]},IFrame:_,toolbarConfig:{container:[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"],["video"]]},BaseModule:T,Toolbar:C,DisplaySize:j,Resize:A}}},3608:function(e,t,r){var n=r(3609);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3609:function(e,t,r){(e.exports=r(759)()).push([e.i,'\n\n.msgapi .ql-snow .ms-ql-iframe-tooltip[data-mode=video]::before {\n    content: "Enter iframe url:";\n}\n\n\n',""])},3610:function(e,t){e.exports='<html>\n  <head>\n    <title>Geoserver GetFeatureInfo output</title>\n  </head>\n    <style type="text/css">\n    \ttable.featureInfo, table.featureInfo td, table.featureInfo th {\n    \t\tborder:1px solid #ddd;\n    \t\tborder-collapse:collapse;\n    \t\tmargin:0;\n    \t\tpadding:0;\n    \t\tfont-size: 90%;\n    \t\tpadding:.2em .1em;\n    \t}\n    \ttable.featureInfo th {\n    \t    padding:.2em .2em;\n    \t\tfont-weight:bold;\n    \t\tbackground:#eee;\n    \t}\n    \ttable.featureInfo td{\n    \t\tbackground:#fff;\n    \t}\n    \ttable.featureInfo tr.odd td{\n    \t\tbackground:#eee;\n    \t}\n    \ttable.featureInfo caption{\n    \t\ttext-align:left;\n    \t\tfont-size:100%;\n    \t\tfont-weight:bold;\n    \t\tpadding:.2em .2em;\n    \t}\n    </style>\n  <body>\n    <table class="featureInfo">\n      <caption class="featureInfo">states</caption>\n      <tr>\n        <th>fid</th>\n          <th >STATE_NAME</th>\n          <th >STATE_FIPS</th>\n          <th >SUB_REGION</th>\n          <th >STATE_ABBR</th>\n          <th >LAND_KM</th>\n      </tr>\n      <tr>\n        <td>states.29</td>\n        <td>Wyoming</td>\n        <td>56</td>\n        <td>Mtn</td>\n        <td>WY</td>\n        <td>251500.801</td>\n      </tr>\n    </table>\n    <br/>\n  </body>\n</html>'},3611:function(e,t){e.exports='{\n  "type": "FeatureCollection",\n  "totalFeatures": "unknown",\n  "features": [\n      {\n    "type": "Feature",\n    "id": "states.29",\n    "geometry": {\n      "type": "MultiPolygon",\n      "coordinates": [\n        [\n          [\n            [-1.15831389980175E7, 5115884.78673627],\n            [-1.158334883525764E7, 5095927.61163692],\n            [-1.158318319185534E7, 5069757.00399456],\n            [-1.158292671174856E7, 5012817.65726345],\n            [-1.168119588467766E7, 5011501.68893432],\n            [-1.171952218348237E7, 5011805.51696107],\n            [-1.182245230349099E7, 5012358.03633596],\n            [-1.183643948618967E7, 5012535.77548496],\n            [-1.189613934986567E7, 5012118.79424704],\n            [-1.194496385588862E7, 5012366.44384074],\n            [-1.201338092624966E7, 5012844.6510808],\n            [-1.213912753436923E7, 5012116.58180143],\n            [-1.224530617975818E7, 5011994.45558498],\n            [-1.225209889508638E7, 5012037.8190659],\n            [-1.23620611786479E7, 5011845.33978484],\n            [-1.236213086464914E7, 5050542.48847943],\n            [-1.236206540878855E7, 5098070.44035716],\n            [-1.236180135895639E7, 5160419.97558219],\n            [-1.23615872915756E7, 5236675.5279452],\n            [-1.236185657342383E7, 5315010.76063796],\n            [-1.236166543785814E7, 5355424.25785557],\n            [-1.236158395199088E7, 5390784.55533999],\n            [-1.236198815306194E7, 5462754.83859328],\n            [-1.236211728367126E7, 5538995.97145504],\n            [-1.236212318360428E7, 5568867.31982516],\n            [-1.236232444924363E7, 5620854.95417318],\n            [-1.229288824894438E7, 5620316.91583206],\n            [-1.2288781895568E7, 5621314.94100872],\n            [-1.224456390139357E7, 5621970.64383454],\n            [-1.222273014174734E7, 5621455.36603028],\n            [-1.209203215399677E7, 5621150.43241323],\n            [-1.205128866376898E7, 5621546.67495262],\n            [-1.201067341359458E7, 5621492.04691732],\n            [-1.182865814246373E7, 5620919.18090556],\n            [-1.180215653392956E7, 5621084.9446589],\n            [-1.169794913408358E7, 5621495.03806919],\n            [-1.169313957548385E7, 5621693.24344854],\n            [-1.158383374295954E7, 5621104.15015297],\n            [-1.158379210946998E7, 5554761.48947335],\n            [-1.158396710370951E7, 5493626.06569343],\n            [-1.158382183177402E7, 5488039.68771347],\n            [-1.158379377926234E7, 5442710.58976854],\n            [-1.158361967557875E7, 5388962.94229949],\n            [-1.158375815702529E7, 5385191.61647555],\n            [-1.158342865133254E7, 5312442.79715209],\n            [-1.15834303211249E7, 5253508.54391938],\n            [-1.158312797738791E7, 5160957.12459852],\n            [-1.15831389980175E7, 5115884.78673627]\n          ]\n        ]\n      ]\n    },\n    "geometry_name": "the_geom",\n    "properties": {\n      "STATE_NAME": "Wyoming",\n      "STATE_FIPS": "56",\n      "SUB_REGION": "Mtn",\n      "STATE_ABBR": "WY",\n      "LAND_KM": 251500.801,\n      "WATER_KM": 1848.149,\n      "PERSONS": 453588,\n      "FAMILIES": 119825,\n      "HOUSHOLD": 168839,\n      "MALE": 227007,\n      "FEMALE": 226581,\n      "WORKERS": 164561,\n      "DRVALONE": 153679,\n      "CARPOOL": 28109,\n      "PUBTRANS": 2963,\n      "EMPLOYED": 207868,\n      "UNEMPLOY": 13112,\n      "SERVICE": 71419,\n      "MANUAL": 29157,\n      "P_MALE": 0.5,\n      "P_FEMALE": 0.5,\n      "SAMP_POP": 83202,\n      "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\n    }\n  }],\n  "crs": {\n    "type": "name",\n    "properties": {\n      "name": "urn:ogc:def:crs:EPSG::3857"\n    }\n  },\n  "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\n}'},3612:function(e,t){e.exports="Results for FeatureType 'http://www.openplans.org/topp:states':\n--------------------------------------------\nthe_geom = [GEOMETRY (Polygon) with 48 points]\nSTATE_NAME = Wyoming\nSTATE_FIPS = 56\nSUB_REGION = Mtn\nSTATE_ABBR = WY\nLAND_KM = 251500.801\nWATER_KM = 1848.149\nPERSONS = 453588.0\nFAMILIES = 119825.0\nHOUSHOLD = 168839.0\nMALE = 227007.0\nFEMALE = 226581.0\nWORKERS = 164561.0\nDRVALONE = 153679.0\nCARPOOL = 28109.0\nPUBTRANS = 2963.0\nEMPLOYED = 207868.0\nUNEMPLOY = 13112.0\nSERVICE = 71419.0\nMANUAL = 29157.0\nP_MALE = 0.5\nP_FEMALE = 0.5\nSAMP_POP = 83202.0\n--------------------------------------------"},3613:function(e,t,r){var n=r(1),o=r(3614).SketchPicker,i=r(2407);e.exports=[{type:"color",active:function(e){return"atom"===e.type&&i(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,i=e.onChange,a=void 0===i?function(){}:i;return n.createElement(o,{color:{hex:r||t.string},onChange:function(e){return a(e.hex)}})}}]},3675:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r(1),y=r(0),g=r(3676).Controlled,b=r(13),h=b.debounce,v=b.isEqual,O=b.endsWith,E=b.isFunction,w=r(2273),S=r(2119),P=r(2231),T=r(2265),j=r(2103),A=r(26);r(3677),r(3679),r(3680),r(3681),r(3683),r(3684),r(3685)(w),r(3686)(w);var C=function(e){function t(){var e,r;l(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return d(p(r=c(this,(e=u(t)).call.apply(e,[this].concat(o)))),"state",{}),d(p(r),"onRenderToken",(function(e){var t=e.lineCount();r.inlineWidgets&&r.inlineWidgets.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),r.inlineWidgets=[],e.doc.iter(0,t,(function(t){var n=t.lineNo();e.getLineTokens(n).forEach((function(t){r.inlineWidgets=r.props.inlineWidgets.reduce((function(o,i){var l=i.type,s=i.style,c=void 0===s?{}:s,u=i.active,p=void 0===u?function(){return!1}:u,f=i.className,d=void 0===f?"":f;if(p(t)){var m=r.getInlineWidget({className:d,token:t,onClick:function(){return r.setState({inlineWidgetType:l,token:t,lineNo:n})},style:E(c)&&c(t)||c});return e.addWidget({line:n,ch:t.start-1},m,!1),[].concat(a(o),[m])}return a(o)}),a(r.inlineWidgets))}))}))})),d(p(r),"onAutocomplete",(function(e){if(!(e&&e.state&&e.state.completionActive)){var t=e.getCursor(),n=e.getTokenAt(t);if(n.string&&(O(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=r.editor&&r.editor.getWrapperElement&&r.editor.getWrapperElement()||null;w.commands.autocomplete(e,null,{completeSingle:!1,container:o})}}})),d(p(r),"onUpdate",(function(){r.update.cancel(),r.update()})),d(p(r),"getInlineWidget",(function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,a=e.className,l=void 0===a?"":a,s=e.style,c=void 0===s?{}:s,u=document.createElement("div");return u.setAttribute("class","".concat(l," ms-style-editor-inline-widget")),A(u.style,c),u.onclick=function(){return r(i({},o))},u})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!v(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return m.createElement(S,{className:"ms-style-editor",style:this.props.style,header:m.createElement("div",{className:"ms-style-editor-head"},this.props.loading&&m.createElement(P,{className:"ms-style-editor-loader",size:20}),this.props.error&&m.createElement(T,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:m.createElement(j,{msgId:"styleeditor.validationErrorTitle"}),text:this.props.error.line?this.props.error.message:m.createElement(j,{msgId:"styleeditor.genericValidationError"})}))},m.createElement(g,{key:"style-editor",value:this.state.code,editorDidMount:function(t){e.onRenderToken(t),e.editor=t,t.on("inputRead",e.onAutocomplete),e.update=h((function(){e.props.onChange(e.state.code)}),e.props.waitTime),w.extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&m.createElement("div",{className:"ms-inline-widget-container"},m.createElement("div",null,m.createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),m.createElement("div",null,this.props.inlineWidgets.filter((function(t){return t.type===e.state.inlineWidgetType})).map((function(t){var r=t.Widget;return m.createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})})))))}}])&&s(r.prototype,n),o&&s(r,o),t}(m.Component);d(C,"propTypes",{mode:y.string,theme:y.string,style:y.object,code:y.string,onChange:y.func,waitTime:y.number,hintProperties:y.object,error:y.object,inlineWidgets:y.array,loading:y.bool}),d(C,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[]}),e.exports=C},3685:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=r(13),s=l.startsWith,c=l.trim;e.exports=function(e){e.defineMode("geocss",(function(t){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.indentUnit,l=o.propertyKeywords&&o||e.resolveMode("text/geocss"),u=l.propertyKeywords,p=void 0===u?{}:u,f=l.colorKeywords,d=void 0===f?{}:f,m=l.valueKeywords,y=void 0===m?{}:m,g=l.logicKeywords,b=void 0===g?{}:g,h=l.allowNested,v={},O=function(e,t){return r=t,e},E=function(e){return function(t,r){for(var n=!1,o=t.next();o;){if(o===e&&!n){")"===e&&t.backUp(1);break}n=!n&&"\\"===o,o=t.next()}return(o===e||!n&&")"!==e)&&(r.tokenize=null),O("string","string")}},w=function(e,t){for(var r=!1,n=e.next();n;){if(r&&"/"===n){t.tokenize=null;break}r="*"===n,n=e.next()}return["comment","comment"]},S=function(e,t){var r=e.next();if("@"===r)return e.eat("{")?[null,"interpolation"]:e.match(/^(sd|scale)\b/)?["filter",null]:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]);if("/"===r)return e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"];if('"'===r||"'"===r)return t.tokenize=E(r),t.tokenize(e,t);if("#"===r)return e.eatWhile(/[\w\\\-]/),O("atom","hash");if(/\d/.test(r)||"."===r&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),O("number","unit");if("-"===r){if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),O("number","unit");if(e.match(/^-[\w\\\-]+/))return e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?O("variable-2","variable-definition"):O("variable-2","variable");if(e.match(/^\w+-/))return O("meta","meta")}else{if(/[,+>*\/]/.test(r))return O(null,"select-op");if("."===r&&e.match(/^-?[_a-z][_a-z0-9-]*/i))return O("qualifier","qualifier");if(/[:;{}\[\]\(\)]/.test(r))return O(null,r);if(/[\w\\\-]/.test(r))return e.eatWhile(/[\w\\\-]/),O("property","word")}return O(null,null)};function P(e,t,r){this.type=e,this.indent=t,this.prev=r}var T=function(e,t,r,n){return e.context=new P(r,t.indentation()+(!1===n?0:i),e.context),r},j=function(e){return e.context.prev&&(e.context=e.context.prev),e.context.type},A=function(e,t,r){return v[r.context.type](e,t,r)},C=function(e,t,r,n){for(var o=n||1;o>0;o--)r.context=r.context.prev;return A(e,t,r)},x=function(e){var t=e.current().toLowerCase();n=y.hasOwnProperty(t)?"atom":d.hasOwnProperty(t)?"keyword":"variable"};return v.top=function(e,t,r){if("{"===e)return T(r,t,"block");if("}"===e&&r.context.prev)return j(r);if("hash"===e)n="builtin";else if("word"===e)n="tag";else{if("variable-definition"===e)return"maybeprop";if("interpolation"===e)return T(r,t,"interpolation");if(":"===e)return"pseudo";if(h&&"("===e)return T(r,t,"parens")}return r.context.type},v.block=function(e,t,r){if("word"===e){var o=t.current().toLowerCase();return p.hasOwnProperty(o)?(n="property","maybeprop"):b.hasOwnProperty(c(o))?(n="logic","maybeprop"):s(c(t.string),"[")?(n="filter","maybeprop"):(n+=" error","maybeprop")}return"meta"===e?"block":h||"hash"!==e&&"qualifier"!==e?v.top(e,t,r):(n="error","block")},v.maybeprop=function(e,t,r){return":"===e?T(r,t,"prop"):A(e,t,r)},v.prop=function(e,t,r){if(";"===e)return j(r);if("{"===e&&h)return T(r,t,"propBlock");if("}"===e||"{"===e)return C(e,t,r);if("("===e)return T(r,t,"parens");if("hash"!==e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"===e)x(t);else if("interpolation"===e)return T(r,t,"interpolation")}else n+=" error";return"prop"},v.propBlock=function(e,t,r){return"}"===e?j(r):"word"===e?(n="property","maybeprop"):r.context.type},v.parens=function(e,t,r){return"{"===e||"}"===e?C(e,t,r):")"===e?j(r):"("===e?T(r,t,"parens"):"interpolation"===e?T(r,t,"interpolation"):("word"===e&&x(t),"parens")},v.pseudo=function(e,t,o){return"word"===e?(n="variable-3",o.context.type):A(r,t,o)},v.at=function(e,t,r){return";"===e?j(r):"{"===e||"}"===e?C(e,t,r):("word"===e?n="tag":"hash"===e&&(n="builtin"),"at")},v.interpolation=function(e,t,r){return"}"===e?j(r):"{"===e||";"===e?C(e,t,r):("word"===e?n="variable":"variable"!==e&&"("!==e&&")"!==e&&(n="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new P("block",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var o=(t.tokenize||S)(e,t);return o&&"object"===a(o)&&(r=o[1],o=o[0]),n=o,t.state=v[t.state](r,e,t),n},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),o=r.indent;return"prop"!==r.type||"}"!==n&&")"!==n||(r=r.prev),r.prev&&("}"!==n||"block"!==r.type&&"top"!==r.type&&"interpolation"!==r.type?(")"===n&&"parens"===r.type||"{"===n&&("at"===r.type||"atBlock"===r.type))&&(o=Math.max(0,r.indent-i),r=r.prev):o=(r=r.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}));var t={colorKeywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valueKeywords:["round"],pseudoProperties:["mark","shield","stroke","fill","symbol","nth-mark","nth-shield","nth-stroke","nth-fill","nth-symbol"],logicKeywords:["and","or"]};e.defineMIME("text/geocss",o({},Object.keys(t).reduce((function(e,r){return o({},e,i({},r,t[r].reduce((function(e,t){return o({},e,i({},t,!0))}),{})))}),{}),{propertyKeywords:{mark:{values:{"symbol(circle)":!0}},"mark-composite":!0,"mark-mime":!0,"mark-geometry":!0,"mark-size":!0,"mark-rotation":!0,"mark-label-obstacle":!0,"mark-anchor":!0,"mark-offset":!0,"z-index":!0,stroke:!0,"stroke-composite":!0,"stroke-geometry":!0,"stroke-offset":!0,"stroke-mime":!0,"stroke-opacity":!0,"stroke-width":!0,"stroke-size":!0,"stroke-rotation":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-repeat":!0,"stroke-label-obstacle":!0,fill:!0,"fill-composite":!0,"fill-geometry":!0,"fill-mime":!0,"fill-opacity":!0,"fill-size":!0,"fill-rotation":!0,"fill-label-obstacle":!0,"graphic-margin":!0,random:!0,"random-seed":!0,"random-rotation":!0,"random-symbol-count":!0,"random-tile-size":!0,"fill-random":!0,"fill-random-seed":!0,"fill-random-rotation":!0,"fill-random-symbol-count":!0,"fill-random-tile-size":!0,label:!0,"label-geometry":!0,"label-anchor":!0,"label-offset":!0,"label-rotation":!0,"label-z-index":!0,shield:!0,"shield-mime":!0,"font-family":!0,"font-fill":!0,"font-style":!0,"font-weight":!0,"font-size":!0,"halo-radius":!0,"halo-color":!0,"halo-opacity":!0,"label-padding":!0,"label-group":!0,"label-max-displacement":!0,"label-min-group-distance":!0,"label-repeat":!0,"label-all-group":!0,"label-remove-overlaps":!0,"label-allow-overruns":!0,"label-follow-line":!0,"label-max-angle-delta":!0,"label-auto-wrap":!0,"label-force-ltr":!0,"label-conflict-resolution":!0,"label-fit-goodness":!0,"label-priority":!0,"shield-resize":!0,"shield-margin":!0,"label-underline-text":!0,"label-strikethrough-text":!0,"label-char-spacing":!0,"label-word-spacing":!0,"raster-channels":!0,"raster-composite":!0,"raster-geometry":!0,"raster-opacity":!0,"raster-contrast-enhancement":!0,"raster-contrast-enhancement-algorithm":!0,"raster-contrast-enhancement-min":!0,"raster-contrast-enhancement-max":!0,"raster-gamma":!0,"raster-z-index":!0,"raster-color-map":!0,"raster-color-map-type":!0,composite:!0,"composite-base":!0,geometry:!0,"sort-by":!0,"sort-by-group":!0,transform:!0,size:!0,rotation:!0},envKeywords:{sd:{localPart:"env"},scale:{localPart:"env"}},allowNested:!0,name:"geocss"}))}},3686:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(13).head,s={short:"number",float:"number",double:"number",long:"number",decimal:"number",int:"number"};e.exports=function(e){var t=e.Pos;e.registerHelper("hint","geocss",(function(r){var o=r.getCursor(),a=r.getTokenAt(o),c=r.getLineTokens(o.line),u=c&&l(c.filter((function(e){var t=e.type,r=e.start;return"property"===t&&r<a.start})).map((function(e){return e.string}))),p=e.innerMode(r.getMode(),a.state);if("geocss"!==p.mode.name)return null;var f=a.start,d=o.ch,m=a.string.slice(0,d-f);/[^\w$_-]/.test(m)&&(m="",f=d=o.ch);var y=e.resolveMode("text/geocss")||{},g=y.propertyKeywords,b=y.pseudoProperties,h=y.envKeywords,v=(e.getMode({},"text/geocss")||{}).hintProperties,O={},E=!1,w=p.state.state;"pseudo"===w||"variable-3"===a.type?O=i({},b):"prop"===w?(E=!0,O=g&&g[u]&&g[u].values&&i({},g[u].values)||{}):"variable-2"===a.type?O=i({},h):"filter"===a.type?(E=!0,O=i({},v)):"block"!==w&&"maybeprop"!==w||(O=i({},g));var S=Object.keys(O).reduce((function(e,t){var r=!m||0===t.lastIndexOf(m,0);return[].concat(n(e),n(r&&[t]||[]))}),[]);return(S=0===S.length&&E?Object.keys(O).reduce((function(e,t){return[].concat(n(e),[t])}),[]):n(S)).length>0?{list:S.map((function(e){return{text:e,displayText:e,render:function(e,t,r){var n,o,i=document.createElement("span"),a=(n=O[r.displayText]||{},o=n.localPart,("gml"===n.prefix?"geometry":s[o])||o||"");i.innerHTML=a&&'{<span class="cm-desc">'.concat(a,"</span>} ")||"";var l=document.createElement("span");l.innerText=r.displayText,e.appendChild(i),e.appendChild(l)}}})),from:t(o.line,f),to:t(o.line,d)}:null}))}},3687:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(1),l=r(2383);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,i=void 0===n?{}:n,s=e.contentStyle,c=void 0===s?{}:s,u=e.imageStyle,p=void 0===u?{}:u,f=e.glyph,d=void 0===f?"info-sign":f,m=e.iconFit,y=e.title,g=e.tooltip,b=e.tooltipId,h=e.description,v=e.content;return a.createElement("div",{className:"empty-state-container",style:o({height:m?"100%":void 0},r)},a.createElement("div",{key:"main-view",className:"empty-state-main-view",style:o({height:m?"100%":void 0},i)},d?a.createElement("div",{key:"glyph",className:"empty-state-image",style:o({height:m?"100%":void 0},p)},a.createElement(l,{iconFit:m,tooltip:g,tooltipId:b,glyph:d})):null,y?a.createElement("h1",{key:"title"},y):null,h?a.createElement("p",{key:"description",className:"empty-state-description"},h):null),a.createElement("div",{key:"content",className:"empty-state-content",style:c},v))}},3688:function(e,t,r){var n;function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(1),s=r(162),c=r(2792),u=r(3689),p=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tstroke: #999999;\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}",preview:l.createElement(c,{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]})},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:l.createElement(c,{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]})},{types:["raster"],title:"Base CSS",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:l.createElement(c,{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]})},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:l.createElement(c,{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]})}].map((function(e){return i({},e,{styleId:s()})})),f=[{types:["linestring","vector"],title:"Line",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#999999",strokeWidth:2}]})},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]})},{types:["linestring","vector"],title:"Section line",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]})},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333, #333333;\n\tstroke-width: 0.5, 7;\n\tstroke-dasharray: 1 0, 1 10;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]})},{types:["linestring","vector"],title:"Railway",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n\tz-index: 0, 1;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]})},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n\tz-index: 0, 1;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]})},{types:["linestring","vector"],title:"Red road",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n\tz-index: 0, 1;\n}",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:l.createElement(c,{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #000, #f2f2f2, symbol(square);\n    stroke-width: 4, 2;\n    stroke-dasharray: none, none, 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #333;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Fence",format:"css",preview:l.createElement(c,(n={type:"linestring"},a(n,"type","linestring"),a(n,"paths",[{stroke:"#000",strokeWidth:12},{stroke:"#f2f2f2",strokeWidth:8},{type:"point",transform:"translate(100, 40)",d:"M-15 -15 L15 -15 L15 15 L-15 15Z",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(35, 150) rotate(-60)",d:"M-15 -15 L15 -15 L15 15 L-15 15Z",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(165, 150) rotate(60)",d:"M-15 -15 L15 -15 L15 15 L-15 15ZZ",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(67.5, 92.5) rotate(-60)",d:"M-15 -15 L15 -15 L15 15 L-15 15Z",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(132.5, 92.5) rotate(60)",d:"M-15 -15 L15 -15 L15 15 L-15 15Z",stroke:"#777",strokeWidth:2,fill:"#ddd"}]),n))},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #33aaff, symbol('extshape://triangle');\n    /*stroke: #33aaff, symbol('extshape://emicircle');*/\n    /*stroke: #33aaff, symbol('extshape://triangleemicircle');*/\n    stroke-width: 1;\n    stroke-dasharray: none, 20 20;\n    :stroke {\n        size: 20;\n        fill: #33aaff;\n        stroke: #3a8bbe;\n        stroke-width: 0.5;\n    };\n }\n",types:["linestring","vector"],title:"Weather Symbol",format:"css",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#33aaff",strokeWidth:4},{type:"point",transform:"translate(67.5, 92.5) rotate(-60)",d:"M-15 0 L15 0 L0 -15Z",stroke:"#3a8bbe",strokeWidth:2,fill:"#33aaff"},{type:"point",transform:"translate(132.5, 92.5) rotate(60)",d:"M-15 0 L15 0 L0 -15Z",stroke:"#3a8bbe",strokeWidth:2,fill:"#33aaff"}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n    stroke: #333;\n    /*\n    replace "Label" with [myPropertyName]\n    to get a label from feature data\n    */\n    label: "Label";\n    label-anchor: 0.5 0.5;\n    /* label-group: true; */\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: "sans-serif";\n    /* font-weight: bold; */\n    /* font-style: italic; */\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n',types:["linestring","vector"],title:"Label",format:"css",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n    stroke: #333;\n    /*\n    replace "Label" with [myPropertyName]\n    to get a label from feature data\n    */\n    label: "Label";\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: true;\n    label-follow-line: true;\n    label-max-angle-delta: 90;\n    label-max-displacement: 400;\n    label-repeat: 150;\n    /* move label at the bottom of the line*/\n    /* label-offset: 20; */\n\n    font-fill: #000;\n    font-family: "sans-serif";\n    font-size: 20;\n    /* font-weight: bold; */\n    /* font-style: italic; */\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n',types:["linestring","vector"],title:"Label Follow Line",format:"css",preview:l.createElement(c,{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(100, 100) rotate(-60) translate(-120, -130)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(100, 100) rotate(-60) translate(-120, -130)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"#ddd"}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n    fill: symbol("shape://slash");\n    /* fill: symbol("shape://vertline"); */\n    /* fill: symbol("shape://horline"); */\n    /* fill: symbol("shape://slash"); */\n    /* fill: symbol("shape://backslash"); */\n    /* fill: symbol("shape://plus"); */\n    /* fill: symbol("shape://times"); */\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n',types:["polygon","vector"],title:"Line Pattern",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol(\"shape://dot\");\n    :fill {\n        size: 8;\n        stroke: black;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n\tmark: symbol("circle");\n    /* mark: symbol("square"); */\n    /* mark: symbol("circle"); */\n    /* mark: symbol("triangle"); */\n    /* mark: symbol("star"); */\n    /* mark: symbol("cross"); */\n    /* mark: symbol("x"); */\n    stroke: #333333;\n    stroke-width: 0.5;\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n',types:["polygon","vector"],title:"Marker",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n    fill: #ddd, symbol("square");\n    graphic-margin: 2;\n    /* mark: symbol("circle"); */\n    /* mark: symbol("triangle"); */\n    /* mark: symbol("star"); */\n    /* mark: symbol("cross"); */\n    /* mark: symbol("x"); */\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n',types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke:  #555555, #000000;\n    stroke-offset: 0, -5;\n    stroke-dasharray: 1 0, 8 4;\n    stroke-width: 0.5, 1;\n}\n",types:["polygon","vector"],title:"Section",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"transparent",stroke:"#555555",strokeWidth:2},{type:"point",fill:"transparent",stroke:"#000000",strokeDasharray:"32 16",d:"M30 30 L170 30 L170 170 L30 170Z",strokeWidth:4}]})},{code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol(\"shape://dot\");\n    :fill {\n      size: 8;\n      stroke: #333;\n      stroke-width: 2;\n    };\n    stroke: #333;\n    stroke-width: 0.5;\n    stroke-dasharray: 1;\n    fill-random: free;\n    fill-random-seed: 5;\n    fill-random-rotation: none;\n    fill-random-symbol-count: 200;\n    fill-random-tile-size: 100;\n}\n",types:["polygon","vector"],title:"Random Dots",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeDasharray:"4 4",strokeWidth:2},{fill:"url(#random_dots)"}],patterns:[{id:"random_dots",image:{xlinkHref:u,height:256,width:256}}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n    /*\n    replace "Label" with [myPropertyName]\n    to get a label from feature data\n    */\n    label: "Label";\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: "sans-serif";\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol("shape://slash");\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n',types:["polygon","vector"],title:"Label and Fill",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]})},{types:["point","vector"],title:"Square",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]})},{types:["point","vector"],title:"Circle",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(circle);\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]})},{types:["point","vector"],title:"Triangle",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(triangle);\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]})},{types:["point","vector"],title:"Star",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(star);\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]})},{types:["point","vector"],title:"Cross",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(cross);\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]})},{types:["point","vector"],title:"X",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(x);\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]})},{types:["point","vector"],title:"Line",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]})},{types:["point","vector"],title:"Plus",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]})},{types:["point","vector"],title:"Times",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]})},{types:["point","vector"],title:"Open arrow",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]})},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:l.createElement(c,{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]})},{code:'@styleTitle \'${styleTitle}\';\n@styleAbstract \'${styleAbstract}\';\n\n* {\n    /*\n    replace "Label" with [myPropertyName]\n    to get a label from feature data\n    */\n    label: "Label";\n    label-anchor: 0.5 2;\n    /* label-group: true; */\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: "sans-serif";\n    /* font-weight: bold; */\n    /* font-style: italic; */\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol("circle"), symbol("circle");\n    :mark {\n        size: 7, 3;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n',types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:l.createElement(c,{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2},{type:"point",d:"M 100, 100 m -4, 0 a 4,4 0 1,0 8,0 a 4,4 0 1,0 -8,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]})}].map((function(e){return i({},e,{styleId:s()})}));e.exports={baseTemplates:p,customTemplates:f}},3689:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAASdEVYdFNvZnR3YXJlAEdyZWVuc2hvdF5VCAUAABR7SURBVHhe7Z29TjQ504Y5VgTiAMhfUjKECIAIDoCARUKkJCAhQUDAsaBN2M/D9Me0bHf1bXeVf2buK5qemfbPVV1lm+Vh9/77f/7555/r6+vholXcIG9uboaLgKenp7wphDfKTdHVcPFL1642CdAFKja/vr5aDokWdIVglQBh+fHeCb8wBf5Nj6ngZRc/I+gKR90VmgBCu9GP3JueOO+d8AtT4N/0SA2eVrWLClkT/SicoPcObgD/psfOutq7vb0d3hAJu/kbHN6lEVrBkB+Ch4cHuvpja1zt5fVRPZBjyizT9/f3dAXSkasmDsHjvG8KVy/BSlYMusJBXLWSAEl5r7WOO+SmytTLJOgKB3HV2Y9B10RdT4Wnu7DpQlcy8wnQ7JrrMRWekmGjK5xGXEEJkCGll0dBF7rCacTVJgEeHx+RpsERCNNrM97y6u9BV1vjapMAQtNjol9L6hvsqDBJqz9dbY0rnUNwyTglSWkQusIp4ApKgKY8ZkiJLtlJ6zgOXeG04ApNAIv5R7GQEl2yhXV8SbzpCqcFVzpboCTksJWUMkXSHtcUusLJc1UnAXSVGS3QLUBXOHmu0hJATrJsFjbbThEaQ1c4FV1tEgD5ea1rUdbndQlOLNoseC9IXuVzd0V/wYuuQjp1tUmA2UEgeI0saVNlPH/kVb6pu+gqpFNXFc4AhLSDlAAuVxQX1j+MmnVUPOHRFU5TrmYSwMLR8manglfxhEdXOE250tkCub6NClWUpOBVLHVR6AqngKvMBPBGlpd8U+hOu2KpW0NXOOVdoQlgNLLomHSnHSW11OF/5sBBVx25SkgAC9FGzc4ilLpovJP+zAFddeRK5wwg4IYS5mLLVNwG0BWOlqsSCVDLkaO1U50MXeFouVolAPiP1npEvUTRFU4XrlYJoF54tJanMRZtZkBXOF24MtkCTc1cnsDsp7o2G4GucCxcTSZAeJvcEMLUBNZ4n+Z1V2UjS1c4rbkaEiDcroWNyt2ok9fd1EZWMdh0hdO+qyEB/v1l/boL3t/fj4+PhwuAz8/Pw8PD4QLG9TK8GkFXUTp1ZXIGMOL7+3t49Ruk/f394cIM18vwqjfoCqR+AoxDJQB+bUxq5WsfusIBJVROgIxQ4ZSpfMWgKxzc1SoBrq6u/ve//62vHefn58LlGOGjvvj4+ADrH11tmatVArhz8dnZ2fra8fr6KlyOET7K4Ofnx7TIeYwD6erf0dHR+rUMXW2Zq6JbIHko7iP3heHCHjyQVaArnCWurBLg4uIiXMWSwhZtQebt7a3Hkxxd4ai72iTA9fV1qkQBt/whrQmRm2rBu2UcSFeoDg4O1q8zwJ8JutoaV5sEuLu78+4RWtHCGw3So3eLEMjUIoc/E3S1Na6kLZDXihbCaHR7lIOUGnIZusJpylXRQ/Aao/mngtcwx+Xl5cnJyXBRELrCyXNVIQF6xMmtEtQe6csVE4DsNMoJYHG+yW5Td+eqDl3h2LnKSQBhNBZ7VrDN5+fn09PT4eKXpJ2rEXSFU8UVlADeyCxGk0QYP8fLy0v4pkf0Rl3oCqcFV3vIeWXhyMLMFnIdAYlflOwbHeAPN+jK0ZErKAFmkTsO55k684UPgQpuzHQF0pErnUNwasep5LVfYBHPgK5wCrhSPgQXRg7bkkVcC7rCqeIqJwG08nL5hJPCJj8BRiWQrnCquIokgHoiTjVovcB5yE9AXgmkK5w2XUUSQN11UoMLNSkWJ6QpulrTr6tVAiz8jW3dzF6oKa84RYk2RVdR+nW1SoDwN7aTCJvWHXpT0BVOF65yDsGzLKxMOwVd4Vi4MkkAOwrUS6MfcZSHrhCaToAwhGANWBIYxZ1xSegKZ+xqSIDoeaVACfHwesxe8qYCo1Kx6AqnfVdDAkTPK9lOcbSiCBINdmqk6Wq4AGjfVeUtUAEXs/SyjtMVDu6qs0NwiMpKvSPQVQiUAOU3bTit1SS6wmnBFZQA4YJiPXSV9qsUPLrCacFV5hYoez8anWH4Znb7YxopeHSFU95VPAGizakQneHstO3G41hY/OgKp0FX8QQI7zTVOsvsTJawsPjRFU6DrtAtkKB1dg51J1keusKp7irzDDBGmMOa2S8sIbooe29WOeFFoSucMq4UEqAu0UXZe7ORE1516CokOQFM1+iw8Wh3ZarU8l7oCqeWq+QEQNYdcDLh18LGo92VqVLLe6ErnFquTLZAyGQc4NcUaWeD+wdd4Vi40kkAMDWNwEPVwgaXrnAKuNJJgPL1aczyUJWsdnSFU8DV3uw/3Q+zsG4NSwUJGPhY0JVjy1ztef9kIRxEmIVgXmbMR7gl247iUk5XOL248rdA4CAQhKamBiTcojgwLegKp1lXJj8FmkU9QiU3poWhK5wMV1ACRBNLWFbKA67dYeyFpyHvQaErnBZcxRPAG0Q0sdQrUwHC2AtPA/ig0JWjX1fxBFgyiMIZHJJXjbKhK5wGXemfAZImaTErsBq1AF3hGLlSSIAlgVlSEnqErnDKuNokwNR/ufDGEQ5r1wLjoCucxl1tEiD6R7wc3jiShhXOCiTpxuhG1nR3S1c4jbvSPwOMSZrVmKQboxvZqd2tEGzT52AWusJRdGWbAA0iHPuEj3aTXXBVOQGy17IdhK5wcFdoAhjZT1rLhDHUXZE96Aqnuis0AbJ3XQsZCxLG0NSKTFc41V0pbIGMkniNrqDqxY+ucMq4UkgARe+uqZubm+HCgOrFj65wyrjaJMDj46OpUAQ30Ovr6+Eina+vr7zbwxvlpuhquPila1ebBFgotAxCKjuenp7yphDeKDdFV8PFL127UtgClUTFZnbx6wu6QrBKgLD8eO+EX5gC/6bHVPCyi58RdIWj7gpNAKHd6EfuTU+c9074hSnwb3qkBk+r2kWFrIl+FE7Qewc3gH/TY2dd7d3e3g5viITd/A0O79IIrWDID8HDwwNd/bE1rlZ/F2h4mUL1QI4ps0zf39/TFUhHrpo4BI/zvilcvQQrWTHoCgdx1UoCJOW91jrukJsqUy+ToCscxFVnPwZdE3U9FZ7uwqYLXcnMJ0Cza67HVHhKho2ucBpxBSVAhpReHgVd6AqnEVebBAB/ZwMcgTC9NuMtr/4edLU1rjYJIDQ9Jvq1pL7BjgqTtPrT1da40jkEl4xTkpQGoSucAq6gBGjKY4aU6JKdtI7j0BVOC67QBLCYfxQLKdElW1jHl8SbrnBacKWzBUpCDltJKVMk7XFNoSucPFd1EkBXmdEC3QJ0hZPnKi0B5CTLZmGz7RShMXSFU9HVJgGQn9e6FmV9XpfgxKLNgveC5FU+d1f0F7zoKqRTV5sEmB0EgtfIkjZVxvNHXuWbuouuQjp1VeEMQEg7SAngckVxYf3DqFlHxRMeXeE05WomASwcLW92KngVT3h0hdOUK50tkOvbqFBFSQpexVIXha5wCrjKTABvZHnJN4XutCuWujV0hVPeFZoARiOLjkl32lFSSx3+Zw4cdNWRq4QEsBBt1OwsQqmLxjvpzxzQVUeudM4AAm4oYS62TMVtAF3haLkqkQC1HDlaO9XJ0BWOlqtVAoD/aK1H1EsUXeF04WqVAOqFR2t5GmPRZgZ0hdOFK5Mt0NTM5QnMfqprsxHoCsfC1WQChLfJDSFMTWCN92led1U2snSF05qrIQHC7VrYqNyNOnndTW1kFYNNVzjtuxoS4N9f1q+74P39/fj4eLgA+Pz8PDw8HC5gXC/DqxF0FaVTVyZnACO+v7+HV79B2t/fHy7McL0Mr3qDrkDqJ8A4VALg18akVr72oSscUELlBMgIFU6ZylcMusLBXa0S4Orqavx/JD4/Pxcuxwgf9cXHxwdY/+hqy1ytEsCdi8/OztbXjtfXV+FyjPBRBj8/P6ZFzmMcSFf/jo6O1q9l6GrLXBXdAslDcR+5LwwX9uCBrAJd4SxxZZUAFxcX4SqWFLZoCzJvb289nuToCkfd1SYBrq+vUyUKuOUPaU2I3FQL3i3jQLpCdXBwsH6dAf5M0NXWuNokwN3dnXeP0IoW3miQHr1bhECmFjn8maCrrXElbYG8VrQQRqPboxyk1JDL0BVOU66KHoLXGM0/FbyGOS4vL09OToaLgtAVTp6rCgnQI05ulaD2SF+umABkp1FOAIvzTXabujtXdegKx85VTgIIo7HYs4JtPj8/n56eDhe/JO1cjaArnCquoATwRmYxmiTC+DleXl7CNz2iN+pCVzgtuNpDzisLRxZmtpDrCEj8omTf6AB/uEFXjo5cQQkwi9xxOM/UmS98CFRwY6YrkI5c6RyCUztOJa/9Aot4BnSFU8CV8iG4MHLYliziWtAVThVXOQmglZfLJ5wUNvkJMCqBdIVTxVUkAdQTcapB6wXOQ34C8kogXeG06SqSAOqukxpcqEmxOCFN0dWafl2tEmDhb2zrZvZCTXnFKUq0KbqK0q+rVQKEv7GdRNi07tCbgq5wunCVcwieZWFl2inoCsfClUkC2FGgXhr9iKM8dIXQdAKEIQRrwJLAKO6MS0JXOGNXQwJEzysFSoiH12P2kjcVGJWKRVc47bsaEiB6Xsl2iqMVRZBosFMjTVfDBUD7ripvgQq4mKWXdZyucHBXnR2CQ1RW6h2BrkKgBCi/acNprSbRFU4LrqAECBcU66GrtF+l4NEVTguuMrdA2fvR6AzDN7PbH9NIwaMrnPKu4gkQbU6F6Axnp203HsfC4kdXOA26iidAeKep1llmZ7KEhcWPrnAadIVugQSts3OoO8ny0BVOdVeZZ4AxwhzWzH5hCdFF2XuzygkvCl3hlHGlkAB1iS7K3puNnPCqQ1chyQlgukaHjUe7K1OllvdCVzi1XCUnALLugJMJvxY2Hu2uTJVa3gtd4dRyZbIFQibjAL+mSDsb3D/oCsfClU4CgKlpBB6qFja4dIVTwJVOApSvT2OWh6pktaMrnAKu9mb/6X6YhXVrWCpIwMDHgq4cW+Zqz/snC+EgwiwE8zJjPsIt2XYUl3K6wunFlb8FAgeBIDQ1NSDhFsWBaUFXOM26Mvkp0CzqESq5MS0MXeFkuIISIJpYwrJSHnDtDmMvPA15Dwpd4bTgKp4A3iCiiaVemQoQxl54GsAHha4c/bqKJ8CSQRTO4JC8apQNXeE06Er/DJA0SYtZgdWoBegKx8iVQgIsCcySktAjdIVTxtUmAab+y4U3jnBYuxYYB13hNO5qkwDRP+Ll8MaRNKxwViBJN0Y3sqa7W7rCadyV/hlgTNKsxiTdGN3ITu1uhWCbPgez0BWOoivbBGgQ4dgnfLSb7IKrygmQvZbtIHSFg7tCE8DIftJaJoyh7orsQVc41V2hCZC961rIWJAwhqZWZLrCqe5KYQtklMRrdAVVL350hVPGlUICKHp3Td3c3AwXBlQvfnSFU8bVJgEeHx9NhSK4gV5fXw8X6Xx9feXdHt4oN0VXw8UvXbvaJMBCoWUQUtnx9PSUN4XwRrkpuhoufunalcIWqCQqNrOLX1/QFYJVAoTlx3sn/MIU+Dc9poKXXfyMoCscdVdoAgjtRj9yb3rivHfCL0yBf9MjNXha1S4qZE30o3CC3ju4AfybHjvrau/29nZ4QyTs5m9weJdGaAVDfggeHh7o6o+tcbX6u0DDyxSqB3JMmWX6/v6erkA6ctXEIXic903h6iVYyYpBVziIq1YSICnvtdZxh9xUmXqZBF3hIK46+zHomqjrqfB0FzZd6EpmPgGaXXM9psJTMmx0hdOIKygBMqT08ijoQlc4jbjaJAD4OxvgCITptRlvefX3oKutcbVJAKHpMdGvJfUNdlSYpNWfrrbGlc4huGSckqQ0CF3hFHAFJUBTHjOkRJfspHUch65wWnCFJoDF/KNYSIku2cI6viTedIXTgiudLVAScthKSpkiaY9rCl3h5LmqkwC6yowW6BagK5w8V2kJICdZNgubbacIjaErnIquNgmA/LzWtSjr87oEJxZtFrwXJK/yubuiv+BFVyGdutokwOwgELxGlrSpMp4/8irf1F10FdKpqwpnAELaQUoAlyuKC+sfRs06Kp7w6AqnKVczCWDhaHmzU8GreMKjK5ymXOlsgVzfRoUqSlLwKpa6KHSFU8BVZgJ4I8tLvil0p12x1K2hK5zyrtAEMBpZdEy6046SWurwP3PgoKuOXCUkgIVoo2ZnEUpdNN5Jf+aArjpypXMGEHBDCXOxZSpuA+gKR8tViQSo5cjR2qlOhq5wtFytEgD8R2s9ol6i6AqnC1erBFAvPFrL0xiLNjOgK5wuXJlsgaZmLk9g9lNdm41AVzgWriYTILxNbghhagJrvE/zuquykaUrnNZcDQkQbtfCRuVu1MnrbmojqxhsusJp39WQAP/+sn7dBe/v78fHx8MFwOfn5+Hh4XAB43oZXo2gqyidujI5Axjx/f09vPoN0v7+/nBhhutleNUbdAVSPwHGoRIAvzYmtfK1D13hgBIqJ0BGqHDKVL5i0BUO7mqVAFdXV+P/I/H5+blwOUb4qC8+Pj7A+kdXW+ZqlQDuXHx2dra+dry+vgqXY4SPMvj5+TEtch7jQLr6d3R0tH4tQ1db5qroFkgeivvIfWG4sAcPZBXoCmeJK6sEuLi4CFexpLBFW5B5e3vr8SRHVzjqrjYJcH19nSpRwC1/SGtC5KZa8G4ZB9IVqoODg/XrDPBngq62xtUmAe7u7rx7hFa08EaD9OjdIgQytcjhzwRdbY0raQvktaKFMBrdHuUgpYZchq5wmnJV9BC8xmj+qeA1zHF5eXlycjJcFISucPJcVUiAHnFyqwS1R/pyxQQgO41yAlicb7Lb1N25qkNXOHauchJAGI3FnhVs8/n5+fT0dLj4JWnnagRd4VRxBSWANzKL0SQRxs/x8vISvukRvVEXusJpwdUecl5ZOLIws4VcR0DiFyX7Rgf4ww26cnTkCkqAWeSOw3mmznzhQ6CCGzNdgXTkSucQnNpxKnntF1jEM6ArnAKulA/BhZHDtmQR14KucCq4+u+//wNfz5pEKaQtOgAAAABJRU5ErkJggg=="},3690:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(1),l=r(13).head,s=r(758),c=s.Form,u=s.FormGroup,p=s.FormControl,f=s.ControlLabel,d=s.Alert,m=r(2119),y=r(2138),g=r(2231),b=r(3691),h=r(2214),v=h("filterPlaceholder")(r(2499)),O=h("placeholder")(p),E=r(2173),w=r(2149),S=r(2103),P=r(2260),T=y((function(e){return 0===e.items.length}),{title:a.createElement(S,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(r(2239)),j=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};e.exports=function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,s=void 0===n?{}:n,p=e.geometryType,y=void 0===p?"":p,h=e.templates,A=void 0===h?[]:h,C=e.filterText,x=e.availableFormats,D=void 0===x?["sld","css"]:x,_=e.formFields,I=void 0===_?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:a.createElement(S,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:a.createElement(S,{msgId:"styleeditor.abstractSettings"})}]:_,F=e.onFilter,k=void 0===F?function(){}:F,L=e.onSelect,R=void 0===L?function(){}:L,N=e.onClose,M=void 0===N?function(){}:N,B=e.onSave,G=void 0===B?function(){}:B,U=e.onUpdate,W=void 0===U?function(){}:U,V=e.loading;return a.createElement(m,{header:a.createElement("div",null,a.createElement(v,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:C,onFilter:k}),a.createElement("div",{className:"text-center"},a.createElement("small",null,V?a.createElement(g,{size:15,style:{display:"inline-block"}}):a.createElement(S,{msgId:"styleeditor.createStyleFromTemplate"}))))},a.createElement(T,{colProps:{},cardComponent:b,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;R({code:t,templateId:r,format:n||"css"}),W(o({},s,{title:l(A.filter((function(e){return e.styleId===r})).map((function(e){return e.title})))}))},items:A.filter((function(e){var t=e.title;return!C||C&&-1!==t.indexOf(C)})).filter((function(e){var t=e.types,r=e.format;return!t||l(t.filter((function(e){return e===y})))&&-1!==D.indexOf(r)})).map((function(e){return o({},e,{selected:e.styleId===t,disabled:V})}))}),a.createElement(w,null,a.createElement(E,{show:!!r,fitContent:!0,title:a.createElement(S,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return M()},buttons:[{text:a.createElement(S,{msgId:"save"}),bsStyle:"primary",disabled:!j(s),onClick:function(){return G(s)}}]},a.createElement(c,null,a.createElement(u,{controlId:"styleTitle",validationState:!j(s)&&"error"},I.map((function(e){var t=e.title,r=e.placeholder,n=e.key;return a.createElement("span",{key:n},a.createElement(f,null,t),a.createElement(O,{type:"text",defaultValue:s[n],placeholder:r,onChange:function(e){return W(o({},s,i({},n,e.target.value)))}}))}))),!j(s)&&a.createElement(d,{style:{margin:0},bsStyle:"danger"},a.createElement(P,{msgId:"styleeditor.titleRequired"}))))))}},3691:function(e,t,r){var n=r(1);e.exports=function(e){var t=e.disabled,r=e.selected,o=e.title,i=e.preview,a=e.previewSrc,l=e.onClick,s=void 0===l?function(){}:l;return n.createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return s()}},(i||a)&&n.createElement("div",{className:"ms-preview"},i||a&&n.createElement("img",{src:a})),n.createElement("small",null,o))}},3692:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(758).Glyphicon,l=r(2119),s=r(2138),c=r(2214)("filterPlaceholder")(r(2499)),u=r(2792),p=r(2103),f=r(2135)(a),d=s((function(e){return 0===e.items.length}),{title:i.createElement(p,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(r(2239));e.exports=function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,a=e.defaultStyle,s=e.availableStyles,p=void 0===s?[]:s,m=e.onSelect,y=e.formatColors,g=void 0===y?{sld:"#33ffaa",css:"#ffaa33"}:y,b=e.filterText,h=e.onFilter,v=void 0===h?function(){}:h;return i.createElement(l,{className:"ms-style-editor-list",header:i.createElement(c,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:b,onFilter:v})},i.createElement(d,{size:"sm",onItemClick:function(e){var t=e.name;return m({style:a===t?"":t},!0)},items:p.filter((function(e){var t=e.name,r=void 0===t?"":t,n=e.title,o=void 0===n?"":n,i=e._abstract,a=void 0===i?"":i;return!b||b&&(-1!==r.indexOf(b)||-1!==o.indexOf(b)||-1!==a.indexOf(b))})).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{title:e.label||e.title||e.name,description:e._abstract,selected:r===e.name,preview:e.format&&i.createElement(u,{backgroundColor:"#333333",texts:[{text:(l=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[l]||l||"").toUpperCase(),fill:g[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||i.createElement(f,{glyph:"geoserver"}),tools:t&&a===e.name?i.createElement(f,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null});var l}))}))}},3693:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=r(2173),l=r(2149),s=r(2103),c=r(758).Alert;e.exports=function(e){var t=e.status,r=e.buttons,u=void 0===r?[]:r,p=e.templateId,f=e.error,d=e.isCodeChanged,m=e.showModal,y=e.onShowModal,g=e.loading,b=e.selectedStyle,h=e.editEnabled,v=e.enableSetDefaultStyle,O=e.defaultStyles,E=void 0===O?["generic","point","line","polygon","raster"]:O,w=e.onBack,S=void 0===w?function(){}:w,P=e.onAdd,T=void 0===P?function(){}:P,j=e.onReset,A=void 0===j?function(){}:j,C=e.onDelete,x=void 0===C?function(){}:C,D=e.onSelectStyle,_=void 0===D?function(){}:D,I=e.onEditStyle,F=void 0===I?function(){}:I,k=e.onUpdate,L=void 0===k?function(){}:k,R=e.onSetDefault,N=void 0===R?function(){}:R,M=e.disableCodeEditing;return o.createElement("div",null,o.createElement(i,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!t,tooltipId:"styleeditor.backToList",disabled:!!g,onClick:function(){"edit"===t&&d?y({title:o.createElement(s,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:o.createElement(c,{bsStyle:"warning",style:{margin:0}},o.createElement(s,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:o.createElement(s,{msgId:"close"}),bsStyle:"primary",onClick:function(){y(null),S(),A()}}]}):(S(),A())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(t||!h),disabled:!!g,onClick:function(){return _()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(t||!h),disabled:!!g||-1!==E.indexOf(b)||M,onClick:function(){return F()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(f&&f.edit&&f.edit.status)||!!g||-1!==E.indexOf(b),visible:!("edit"!==t||!h),onClick:function(){return L()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==t||!p||!h),disabled:!!g,onClick:function(){return T()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!g||-1!==E.indexOf(b)||!b,visible:!(t||!h),onClick:function(){y({title:o.createElement(s,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:o.createElement(c,{bsStyle:"warning",style:{margin:0}},o.createElement(s,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:o.createElement(s,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){y(null),x(b)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!g||-1!==E.indexOf(b)||!b,visible:!(!v||t||!h),onClick:function(){return N()}}].concat(n(t?[]:u))}),o.createElement(l,null,o.createElement(a,{show:m,fitContent:!0,title:m&&m.title,onClose:function(){return y(null)},buttons:m&&m.buttons},m&&m.message)))}},3694:function(e,t,r){var n,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(0),b=r(3695),h=r(758).Glyphicon,v=r(2103);e.exports=(o=n=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"getInfoFormat",(function(e){return Object.keys(e).map((function(e){var t=r.props.formatCards[e]&&r.props.formatCards[e].body;return{id:e,head:{preview:y.createElement(h,{glyph:r.props.formatCards[e]&&r.props.formatCards[e].glyph||"ext-empty"}),title:r.props.formatCards[e]&&r.props.formatCards[e].titleId&&y.createElement(v,{msgId:r.props.formatCards[e].titleId})||"",description:r.props.formatCards[e]&&r.props.formatCards[e].descId&&y.createElement(v,{msgId:r.props.formatCards[e].descId})||"",size:"sm"},body:t&&y.createElement(t,l({template:r.props.element.featureInfo&&r.props.element.featureInfo.template||""},r.props))||null}}))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.getInfoFormat(this.props.defaultInfoFormat);return y.createElement("span",null,y.createElement(b,{fillContainer:!0,activePanel:this.props.element.featureInfo&&this.props.element.featureInfo.format,panels:t,onSelect:function(t){var r=e.props.element.featureInfo&&e.props.element.featureInfo.format&&t===e.props.element.featureInfo.format;e.props.onChange("featureInfo",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.props.element&&e.props.element.featureInfo||{},{format:r?"":t,viewer:e.props.element.featureInfo?e.props.element.featureInfo.viewer:void 0}))}}))}}])&&c(r.prototype,n),o&&c(r,o),t}(y.Component),m(n,"propTypes",{element:g.object,defaultInfoFormat:g.object,onChange:g.func,formatCards:g.object}),m(n,"defaultProps",{element:{},defaultInfoFormat:[],onChange:function(){},formatCards:{}}),o)},3695:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(758),a=i.Panel,l=i.Accordion,s=r(2521);e.exports=function(e){var t=e.activePanel,r=e.fillContainer,i=e.className,c=e.onSelect,u=e.panels,p=void 0===u?[]:u,f=r?"ms-fill-container ":"";return o.createElement(l,{activeKey:t,className:"ms-accordion "+f+i},p.map((function(e,r){return o.createElement(a,{key:r,eventKey:e.id,className:t===e.id?"ms-selected":"",header:e.head&&o.createElement("a",{role:"tab"},o.createElement(s,n({},e.head,{selected:t===e.id,onClick:function(){c(e.id)}})))||null,collapsible:!0},e.body)})))}},3696:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=r(1),m=r(88).connect,y=r(195).createSelector,g=r(407),b=g.compose,h=g.defaultProps,v=g.withProps,O=g.withPropsOnChange,E=r(268).mapIdSelector,w=r(2143),S=w.getVisibleFloatingWidgets,P=w.dependenciesSelector,T=w.getFloatingWidgetsLayout,j=w.isTrayEnabled,A=r(2120),C=A.editWidget,x=A.updateWidgetProperty,D=A.deleteWidget,_=A.changeLayout,I=A.exportCSV,F=A.exportImage,k=A.toggleCollapse,L=r(2794),R=r(2795),N=r(3699).heightProvider,M=r(2209).default,B=r(0),G=b(m(y(E,S,T,P,(function(e,t,r,n){return{id:e,widgets:t,layouts:r,dependencies:n}})),{editWidget:C,updateWidgetProperty:x,exportCSV:I,toggleCollapse:k,exportImage:F,deleteWidget:D,onLayoutChange:_}),b(N({debounceTime:20,closest:!0,querySelector:".fill"}),(function(e){return function(t){return d.createElement(M,null,(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return d.createElement(e,f({width:n},t))}))}}),v((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=r-120,o=4,i=Math.floor(n/o-20);return{rowHeight:i,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1},style:{left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((r-100)/(i+10))*(i+10),width:"calc(100% - ".concat(t&&t>800?570:70,"px)"),position:"absolute",zIndex:50}}}))),b(h({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0}}),L("toolsOptions",{asObject:!0}),b(m(y(j,(function(e){return{tray:e}}))),O(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,r=e.tray;return{toolsOptions:t?u({},t,{showCollapse:t.showCollapse&&r}):t}}))),O(["widgets","toolsOptions"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.toolsOptions,o=void 0===n?{}:n;return{widgets:r.filter((function(e){return!e.hide||o.seeHidden}))}}))))(r(3700)),U=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.enabled?d.createElement(G,this.props):null}}])&&i(r.prototype,n),c&&i(r,c),t}(d.Component);p(U,"propTypes",{enabled:B.bool,shortenChartLabelThreshold:B.number}),p(U,"defaultProps",{enabled:!0,shortenChartLabelThreshold:1e3});var W=R(U);e.exports={WidgetsPlugin:W,reducers:{widgets:r(3791)},epics:r(3792)}},3697:function(e,t){var r=function(e,t,r){var n,o,i=[],a=[],l=e;for(i.push(l);i.length>0;)if(!r[l=i.shift()])for(r[l]=!0,a.push(l),n=0;n<t.length;n+=1)(o=t[n])[0]!==l||r[o[1]]?o[1]!==l||r[o[0]]||i.push(o[0]):i.push(o[1]);return a};e.exports={bfs:r,findGroups:function(e){for(var t={},n=[],o=0,i=e.length;o<i;o+=1){var a=e[o],l=a[0],s=a[1],c=null;t[l]?t[s]||(c=s):c=l,c&&n.push(r(c,e,t))}return n}}},3698:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(407).withPropsOnChange,i=r(13),a=i.get,l=i.castArray,s=i.mapValues,c=i.isString,u=i.isArray,p=function e(t){var r=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var i=l(t),s=o;return i.length>1&&"__OR__"===i[0]&&(s=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if(u(i))return e({accessInfo:r,postProcessValue:n,reduceFun:o})(i);var l=!1;i&&c(i)&&i.startsWith("!")&&(l=!0,i=i.substr(1));var s=function(e){return l?!e:e},p=c(i)&&i.split(":");if(p&&p[0]){var f=p[0].split(/\!\=\=?/),d=p[0].split(/\=\=?\=?/);return f.length>1?s(n(a(r,f[0]),i)!==f[1]):d.length>1?s(n(a(r,d[0]),i)===d[1]):s(n(a(r,p[0]),i))}return i})).reduce(s||function(e,t){return e&&t})}};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.asObject,i=void 0!==r&&r,a=t.postProcessValue,l=void 0===a?function(e){return e}:a,c=t.reduceFun,u=t.accessInfo,f=void 0===u?"accessInfo":u;return o([e,f],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n({},e,i?s(t[e],p({accessInfo:t[f],postProcessValue:l,reduceFun:c})):p({accessInfo:t[f],postProcessValue:l,reduceFun:c})(t[e]))}))}},3699:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(2481),a=r(407),l=a.compose,s=a.defaultProps,c=a.withStateHandlers,u=r(2209).default;e.exports={widthProvider:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return l(s({useDefaultWidthProvider:!t}),(function(e){return function(t){return o.createElement(u,null,(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.width;return o.createElement(e,n({width:i},t))}))}}))},heightProvider:function(e){return l(c((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),i(e))}}},3700:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=r(1),c=r(407),u=c.pure,p=c.branch,f=r(13),d=f.find,m=f.mapValues,y=r(3701),g=y.Responsive,b=p((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),y.WidthProvider)(g),h=r(3706)(r(3707)),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return d(e.widgets,(function(e){return e===t.id}))}))};r(3789);var O=function(e){return e<480?e-34:e};e.exports=u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,o=e.className,a=void 0===o?"":o,c=e.toolsOptions,u=void 0===c?{}:c,p=e.rowHeight,f=void 0===p?208:p,y=e.breakpoints,g=void 0===y?{lg:1200,md:996,sm:768,xs:480,xxs:0}:y,E=e.cols,w=void 0===E?{lg:6,md:6,sm:4,xs:2,xxs:1}:E,S=e.widgets,P=void 0===S?[]:S,T=e.layouts,j=e.dependencies,A=e.verticalCompact,C=void 0!==A&&A,x=e.compactMode,D=e.useDefaultWidthProvider,_=void 0===D||D,I=e.measureBeforeMount,F=e.width,k=e.showGroupColor,L=e.groups,R=void 0===L?[]:L,N=e.canEdit,M=void 0===N||N,B=e.getWidgetClass,G=void 0===B?function(){}:B,U=e.onWidgetClick,W=void 0===U?function(){}:U,V=e.updateWidgetProperty,H=void 0===V?function(){}:V,z=e.deleteWidget,q=void 0===z?function(){}:z,Q=e.toggleCollapse,Y=void 0===Q?function(){}:Q,K=e.editWidget,X=void 0===K?function(){}:K,Z=e.onLayoutChange,J=void 0===Z?function(){}:Z,$=l(e,["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","editWidget","onLayoutChange"]),ee=P.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),te=function(e){return"table"===e.widgetType&&ee.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return s.createElement(b,{key:t||"widgets-view",useDefaultWidthProvider:_,measureBeforeMount:I,width:_?void 0:O(F),isResizable:M,isDraggable:M,draggableHandle:".draggableHandle",onLayoutChange:J,preventCollision:!0,style:r,className:"widget-container ".concat(a," ").concat(M?"":"no-drag"),rowHeight:f,autoSize:!0,verticalCompact:C,compactMode:x,breakpoints:g,cols:w,layouts:T?JSON.parse(JSON.stringify(m(T,(function(e){return e.map((function(e){var t=d(P,{id:e.i});return t?i({},e,{static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},P.map((function(e){return s.createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return W(e)},className:G(e)},s.createElement(h,n({"data-grid":e.dataGrid},$,e,{quickFilters:te(e)?e.quickFilters:void 0,toolsOptions:u,groups:v(R,e),showGroupColor:k,dependencies:j,enableColumnFilters:te(e),canEdit:M,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return H.apply(void 0,[e.id].concat(r))},toggleCollapse:function(){return Y(e)},onDelete:function(){return q(e)},onEdit:function(){return X(e)}})))})))}))},3706:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407).withProps,l=r(13),s=l.get,c=l.head,u=function(e){return s(c(e,(function(e){return e.color})),"color")};e.exports=a((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,i=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&u(t)?o({},i,{borderTop:"3px solid ".concat(u(t))}):i}}))},3707:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(407).compose,l=r(3708),s=r(3718),c=r(3719),u=r(2798),p=r(3720),f=r(3721),d=r(2799),m=r(2801),y=r(3722),g=r(2527),b=r(2528),h=r(2529),v=r(3727),O=r(3729),E=r(3730),w=a(h,g,b,d,l)(r(3731)),S=a(p)(r(3738)),P=a(h,O,E("center"),E("zoom"),v,f)(r(3740)),T=a(h,b,g,y,c)(r(3753)),j=a(h,g,b,m,s)(r(3779)),A=a(h,u)(r(3788));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,a=void 0===r?function(){}:r,l=e.exportCSV,s=void 0===l?function(){}:l,c=e.exportImage,u=void 0===c?function(){}:c,p=e.onDelete,f=void 0===p?function(){}:p,d=e.onEdit,m=void 0===d?function(){}:d,y=o(e,["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"]);return"text"===y.widgetType?i.createElement(S,n({},y,{toggleCollapse:a,onDelete:f,onEdit:m})):"table"===y.widgetType?i.createElement(T,n({},y,{toggleCollapse:a,exportCSV:s,dependencies:t,onDelete:f,onEdit:m})):"counter"===y.widgetType?i.createElement(j,n({},y,{toggleCollapse:a,dependencies:t,onDelete:f,onEdit:m})):"map"===y.widgetType?i.createElement(P,n({},y,{toggleCollapse:a,dependencies:t,onDelete:f,onEdit:m})):"legend"===y.widgetType?i.createElement(A,n({},y,{toggleCollapse:a,dependencies:t,onDelete:f,onEdit:m})):i.createElement(w,n({},y,{toggleCollapse:a,exportCSV:s,dependencies:t,exportImage:u,onDelete:f,onEdit:m}))}},3708:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.compose,a=o.branch,l=o.withState,s=o.withProps,c=o.withHandlers,u=r(2275),p=r(2276),f=p.editableWidget,d=p.exportableWidget,m=p.defaultIcons,y=p.withHeaderTools;e.exports=i(u,i(l("showTable","setShowTable",!1),c({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),s((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat(n(r),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),f(),d(),m(),a((function(e){return!e.showTable}),y()))},3709:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(407),a=i.compose,l=i.withPropsOnChange,s=r(2116),c=function(e){return"tools"===e.target},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(c).length>0};e.exports=function(){return a(l(["topLeftItems","widgetTools"],(function(e){var t=e.topLeftItems,r=void 0===t?[]:t,i=e.widgetTools;return{topLeftItems:u(i)?[].concat(n(r),[o.createElement(s,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:i.filter(c)})]):r}})))}},3710:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.compose,a=o.withProps;e.exports=function(){return i(a((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.toolsOptions,i=void 0===o?{}:o,a=e.updateProperty,l=void 0===a?function(){}:a,s=e.dataGrid,c=void 0===s?{}:s;return{widgetTools:i.showPin?[].concat(n(r),[{glyph:"pushpin",bsStyle:c.static&&"primary",glyphClassName:c.static?"active":void 0,tooltipId:c.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",onClick:function(){return l("dataGrid.static",!c.static)}}]):r}})))}},3711:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.compose,a=o.withProps;e.exports=function(){return i(a((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.toolsOptions,i=void 0===o?{}:o,a=e.canEdit,l=e.updateProperty,s=void 0===l?function(){}:l,c=e.hide,u=void 0!==c&&c;return{widgetTools:i.showHide?[].concat(n(r),[{glyph:"lock",target:"menu",active:u,textId:u?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:u?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:a,onClick:function(){return s("hide",!u)}}]):r}})))}},3712:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.compose,a=o.withProps;e.exports=function(){return i(a((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat(n(r),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i},target:"icons"}]):r}})))}},3713:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2103),a=r(407).withProps,l=r(2135),s=function(e){var t=e.target,r=e.visible;return(void 0===r||r)&&"menu"===t},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(s).length>0},u=r(758),p=u.Glyphicon,f=u.ButtonToolbar,d=u.DropdownButton,m=l(u.MenuItem);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=void 0===t?"widget-menu":t,l=e.menuIcon,u=void 0===l?"option-vertical":l;return a((function(e){var t=e.widgetTools,a=e.topRightItems,l=void 0===a?[]:a;return{topRightItems:c(t)?[].concat(n(l),[o.createElement(f,null,o.createElement(d,{pullRight:!0,bsStyle:"default",className:r,title:o.createElement(p,{glyph:u}),noCaret:!0,id:"dropdown-no-caret"},t.filter(s).map((function(e,t){var r=e.onClick,n=void 0===r?function(){}:r,a=e.disabled,l=void 0!==a&&a,s=e.glyph,c=e.glyphClassName,u=e.text,f=e.textId,d=e.tooltipId,y=e.active;return o.createElement(m,{active:y,tooltipId:d,onSelect:n,disabled:l,eventKey:t},o.createElement(p,{className:c,glyph:s}),f?o.createElement(i,{msgId:f}):u)}))))]):l}}))}},3714:function(e,t,r){var n=r(1),o=r(407),i=o.compose,a=o.withPropsOnChange,l=r(2116),s=function(e){return"icons"===e.target},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(s).length>0};e.exports=function(){return i(a(["icons","widgetTools"],(function(e){var t=e.icons,r=void 0===t?[]:t,o=e.widgetTools;return{icons:c(o)?n.createElement(l,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:o.filter(s)}):r}})))}},3715:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407).withProps;e.exports=function(){return o((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,l=e.onEdit,s=void 0===l?function(){}:l,c=e.toggleDeleteConfirm,u=void 0===c?function(){}:c;return{widgetTools:a?[].concat(n(r),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return s()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return u(!0)}}]):r}}))}},3716:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407).withProps;e.exports=function(){return o((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.data,i=e.id,a=e.title,l=e.exportCSV,s=void 0===l?function(){}:l,c=e.exportImage,u=void 0===c?function(){}:c;return{widgetTools:[].concat(n(r),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return s({data:o,title:a})}},{glyph:"download",target:"menu",glyphClassName:"exportImage",textId:"widgets.widget.menu.exportImage",disabled:!o||!o.length,onClick:function(){return u({widgetDivId:"widget-chart-".concat(i),title:a})}}])}}))}},3717:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.compose,a=o.withProps;e.exports=function(){return i(a((function(e){var t=e.widgetTools,r=void 0===t?[]:t,o=e.dataGrid,i=void 0===o?{}:o,a=e.toggleCollapse,l=void 0===a?function(){}:a,s=e.toolsOptions;return{widgetTools:(void 0===s?{}:s).showCollapse?[].concat(n(r),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!i.static,onClick:function(){return l()}}]):r}})))}},3718:function(e,t,r){var n=r(407).compose,o=r(2276),i=o.editableWidget,a=o.defaultIcons,l=o.withHeaderTools;e.exports=n(r(2275),i(),a(),l())},3719:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withPropsOnChange,c=r(13).get,u=r(2276),p=u.editableWidget,f=u.withHeaderTools,d=u.defaultIcons;e.exports=l(s(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,i=void 0===n?function(){}:n;return{gridEvents:o({},r,{onAddFilter:function(e){return i("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,o,a){return i('options.columnSettings["'.concat(c(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),r(2275),p(),d(),f())},3720:function(e,t,r){var n=r(2275),o=r(407).compose,i=r(2276),a=i.editableWidget,l=i.hidableWidget,s=i.defaultIcons,c=i.withHeaderTools;e.exports=o(n,a(),l(),s(),c())},3721:function(e,t,r){var n=r(2275),o=r(407).compose,i=r(2276),a=i.editableWidget,l=i.defaultIcons,s=i.withHeaderTools;e.exports=o(n,a(),l(),s())},3722:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13),l=a.includes,s=a.merge,c=r(407),u=c.compose,p=c.withProps,f=c.createEventHandler,d=c.withHandlers,m=c.withStateHandlers,y=c.defaultProps,g=r(765).getFeatureTypeProperties,b=r(2277),h=r(3723),v=r(3724),O=r(3725),E=r(3726),w=function(e){var t=f(),r=t.handler,n=t.stream;return v(e).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return h(e).let(r?O(t.withLatestFrom(e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pagination,r=void 0===t?{}:t;return{pagination:r}})),(function(e,t){return o({pagesRange:e},t)}))):E).startWith({})}(e,n.startWith({startPage:0,endPage:1})),(function(e,t){return o({},e,{},t,{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};e.exports=u(y({virtualScroll:!0,size:20,maxStoredPages:5}),m({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),d({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),p((function(){return{dataStreamFactory:w}})),b,p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,a=e.columnSettings,c=void 0===a?{}:a;return{columnSettings:s(n?g(n).filter((function(e){return!l(r.propertyName||[],e.name)})).reduce((function(e,t){return o({},e,i({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},c)}})))},3723:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(15);e.exports=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r,n,o=e.layer,i=void 0===o?{}:o,a=e.options,l=void 0===a?{}:a,s=e.filter,c=e.sortOptions;return(t.layer&&i.name===t.layer.name&&i.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(l,t.options)&&(r=s,n=t.filter,r===n)&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions))})).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{features:[],pages:[],pagination:{}})}))}},3724:function(e,t,r){var n=r(15),o=r(2240).describeFeatureType,i=r(137).getSearchUrl;e.exports=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return i(t)===i(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return o({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return n.Observable.of({loading:!1,error:e})}))}))}},3725:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(15),l=r(2240).getLayerJSONFeature,s=r(2152),c=s.getCurrentPaginationOptions,u=s.updatePages;e.exports=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,i=t.size,s=void 0===i?20:i,p=t.maxStoredPages,f=void 0===p?5:p,d=t.filter,m=t.options,y=void 0===m?{}:m,g=t.pages,b=t.features,h=void 0===b?[]:b,v=t.onLoad,O=void 0===v?function(){}:v,E=t.onLoadError,w=void 0===E?function(){}:E;return e.switchMap((function(e,t){var r=e.pagesRange,i=e.pagination,p=void 0===i?{}:i;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),l(n,d,o({},c(r,g,s),{timeout:15e3,totalFeatures:p.totalFeatures,propertyName:y.propertyName,viewParams:y.viewParams})).do((function(e){return O(o({},u(e,r,{pages:g,features:h},o({},c(r,g,s),{size:s,maxStoredPages:f})),{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return a.Observable.of({loading:!1,error:e}).do(w)})).startWith({loading:!0})}))}))}}},3726:function(e,t,r){var n=r(15),o=r(2240).getLayerJSONFeature;e.exports=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,i=e.options,a=void 0===i?{}:i,l=e.filter,s=e.onLoad,c=void 0===s?function(){}:s,u=e.onLoadError,p=void 0===u?function(){}:u;return o(r,l,{timeout:15e3,params:{propertyName:a.propertyName,viewParams:a.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return n.Observable.of({loading:!1,error:e,data:[]}).do(p)}))}))}},3727:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(275),l=r(15).Observable,s=r(407),c=s.mapPropsStream,u=s.compose,p=s.branch,f=s.withPropsOnChange,d=r(13),m=d.isEmpty,y=d.isEqual,g=r(2384),b=g.composeFilterObject,h=g.getLayerInCommon,v=r(3728),O=r(762),E=r(137).getWpsUrl,w=r(410).set,S=r(196);e.exports=u(p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=e.map,o=h({dependencies:r,map:n});return t&&!m(o)}),u(f(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||S.createRegisterHooks()}})),c((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(e.dependencies.quickFilters,t.dependencies.quickFilters)&&y(e.dependencies.filter,t.dependencies.filter)&&y(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,i=e.map,s=e.filter,c=e.hookRegister,u=h({dependencies:n,map:i});if(!t||m(u))return l.of({loading:!1});var p={};n.quickFilters&&(p=o({},p,{},b(s,n.quickFilters,n.options))),n.filter&&(p=o({},p,{},O.composeAttributeFilters([p,n.filter])));var f=u.name;if(!m(p)){var d=O.toOGCFilter(f,p,"1.1.0");return v(E(u),{wfsGetFeature:d}).switchMap((function(e){var t,r,n;if(a.parseString(e.data,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return l.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},i=c.getHook(S.ZOOM_TO_EXTENT_HOOK);return i&&i(o,{crs:"EPSG:4326",maxZoom:21}),l.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return l.of({error:"error getting bounds from filter",details:e})}))}return l.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w("loading",r,n)}))})))))},3728:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t=e.wfsGetFeature;return'<?xml version="1.0" encoding="UTF-8"?>\n<wps:Execute service="WPS"   version="1.0.0"\n    xmlns="http://www.opengis.net/wps/1.0.0"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:ows="http://www.opengis.net/ows/1.1"\n    xmlns:wcs="http://www.opengis.net/wcs/1.1.1"\n    xmlns:wfs="http://www.opengis.net/wfs"\n    xmlns:wps="http://www.opengis.net/wps/1.0.0"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://www.opengis.net/wps/1.0.0  http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n    <ows:Identifier>gs:Bounds</ows:Identifier>\n    <wps:DataInputs>\n        <wps:Input>\n            <ows:Identifier>features</ows:Identifier>\n            <wps:Reference method="POST" mimeType="text/xml" xlink:href="http://geoserver/wfs">\n                <wps:Body>\n                    '.concat(t,'\n                </wps:Body>\n            </wps:Reference>\n        </wps:Input>\n    </wps:DataInputs>\n    <wps:ResponseForm>\n        <wps:RawDataOutput mimeType="application/json">\n            <ows:Identifier>bounds</ows:Identifier>\n        </wps:RawDataOutput>\n    </wps:ResponseForm>\n</wps:Execute>')},l=r(71),s=r(15),c=r(2525).getWPSURL;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.Observable.defer((function(){return l.post(c(e),a(t),o({headers:{"Content-Type":"text/xml"}},r))}))}},3729:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withPropsOnChange,c=r(13),u=c.find,p=c.isEmpty,f=c.isEqual,d=r(762),m=r(414).optionsToVendorParams,y=r(410).arrayUpdate,g=r(2384).composeFilterObject;e.exports=l(s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!f(n,a.dependencies)||!f(i,a.map)||l!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,i=e.filter,a=void 0===i?{}:i,l=e.map,s=void 0===l?{layers:[]}:l,c=n&&n.layer&&n.layer.name,f=u(s.layers,{name:c})||{},b={},h={},v=void 0;return t&&!p(f)&&(n.quickFilters&&(b=o({},b,{},g(a,n.quickFilters,n.options))),n.filter&&(b=o({},b,{},d.composeAttributeFilters([b,n.filter]))),!p(b)&&d.toCQLFilter(b))?(v=d.toCQLFilter(b),h=y(!1,o({},f,{params:m({params:{CQL_FILTER:v}},f&&f.params&&f.params.CQL_FILTER)}),{name:c},s.layers),{map:o({},s,{layers:h})}):(h=s.layers.map((function(e){return o({},e,{params:o({},e.params,{CQL_FILTER:null})})})),{map:o({},s,{layers:h})})})))},3730:function(e,t,r){var n=r(410).set,o=r(407),i=o.shallowEqual,a=o.branch,l=o.withPropsOnChange;e.exports=function(e){return a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),l((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=arguments.length>1?arguments[1]:void 0,l=a.mapSync,s=a.dependencies;return s&&i(o[e],s[e])||r===l}),(function(t){var r=t.map,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i;return{mapStateSource:"__dependency_system__",map:a[e]&&o?n(e,a[e],r):r}})))}},3731:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(3732),l=r(3733),s=r(2278),c=r(758).Glyphicon,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?i.createElement(c,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};e.exports=function(e){var t=e.id,r=e.title,c=e.description,p=e.headerStyle,f=e.data,d=void 0===f?[]:f,m=e.series,y=void 0===m?[]:m,g=e.loading,b=e.icons,h=e.showTable,v=e.topRightItems,O=e.confirmDelete,E=void 0!==O&&O,w=e.onDelete,S=void 0===w?function(){}:w,P=e.toggleTableView,T=void 0===P?function(){}:P,j=e.toggleDeleteConfirm,A=void 0===j?function(){}:j,C=o(e,["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","onDelete","toggleTableView","toggleDeleteConfirm"]);return i.createElement(s,{id:"widget-chart-".concat(t),headerStyle:p,title:r,icons:b,topLeftItems:u({loading:g,title:r,description:c,showTable:h,toggleTableView:T}),confirmDelete:E,onDelete:S,toggleDeleteConfirm:A,topRightItems:v},h?i.createElement(a,n({data:d},C)):i.createElement(l,n({id:t,isAnimationActive:!g,loading:g,data:d,series:y,iconFit:!0},C)))}},3732:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=r(1),s=r(758).Table;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=a(e,["data"]),i=Object.keys(r.reduce((function(e,t){return o({},e,{},t)}),{}));return l.createElement("div",{className:"mapstore-widget-table"},l.createElement(s,{striped:!0},l.createElement("thead",null,l.createElement("tr",null,i.map((function(e,t){return l.createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),l.createElement("tbody",null,r.map((function(e){return l.createElement("tr",null,i.map((function(t){return l.createElement("td",null,e[t])})))})))))}},3733:function(e,t,r){var n=r(2161)()(r(2317)(r(2385)(r(2386)))),o=r(2209).default,i=r(1);e.exports=function(e){return i.createElement("div",{className:"mapstore-widget-chart"},i.createElement(o,null,i.createElement(n,e)))}},3734:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r(13),y=m.castArray,g=m.isNil,b=m.isEqual,h=r(0),v=r(1),O=r(2245),E=O.LineChart,w=O.Line,S=r(2896).default,P=function(e){function t(){var e,r;l(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return d(p(r=c(this,(e=u(t)).call.apply(e,[this].concat(o)))),"state",{marginLeft:0,marginBottom:0}),r}var r,n,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){b(e.xAxisAngle,this.props.xAxisAngle)||this.setState({marginLeft:0,marginBottom:0})}},{key:"render",value:function(){var e=this,t=this.props,r=t.autoColorOptions,n=t.colorGenerator,l=t.data,s=t.isAnimationActive,c=t.height,u=t.margin,p=t.series,f=t.width,m=a(t,["autoColorOptions","colorGenerator","data","isAnimationActive","height","margin","series","width"]),b=y(p),h=n(b.length,r),O=m.yAxisLabel?[m.yAxisLabel]:[],P=m.yAxis,T=g(m.xAxisAngle)?[]:["angle".concat(m.xAxisAngle)],j=(h||["linechart"]).concat(O,P,T).join(""),A=this.state.marginLeft,C=this.state.marginBottom;return v.createElement(E,{key:j,width:f,height:c,data:l,margin:m.xAxisAngle?{top:20,right:30,left:A+5,bottom:C+20}:u},b.map((function(e,t){e.color;var r=a(e,["color"]);return v.createElement(w,i({key:"line-".concat(t),name:m.yAxisLabel?m.yAxisLabel:null,isAnimationActive:s,stroke:h[t]},r))})),S(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},m,{onUpdateLabelLength:function(t){var r=t.marginLeft,n=t.marginBottom;e.setState((function(e){return{marginBottom:e.marginBottom<n?n:e.marginBottom,marginLeft:e.marginLeft<r?r:e.marginLeft}}))}})),m.children)}}])&&s(r.prototype,n),m&&s(r,m),t}(v.Component);d(P,"propTypes",{autoColorOptions:h.object,colorGenerator:h.func,data:h.array,isAnimationActive:h.bool,height:h.number,margin:h.object,series:h.array,xAxisAngle:h.number,width:h.number}),d(P,"defaultProps",{height:300,series:[],width:600}),e.exports=P},3735:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(407).pure,l=r(2245),s=l.PieChart,c=l.Pie,u=l.Cell,p=r(2803).convertToNameValue;e.exports=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isAnimationActive,r=e.width,a=void 0===r?600:r,l=e.height,f=void 0===l?300:l,d=e.data,m=e.series,y=void 0===m?[]:m,g=e.xAxis,b=e.colorGenerator,h=e.maxCols,v=void 0===h?3:h,O=o(e,["isAnimationActive","width","height","data","series","xAxis","colorGenerator","maxCols"]),E=Array.isArray(y)?y:[y],w=Math.min(v,E.length),S=b(d.length),P=a/w,T=f/Math.floor((E.length||1)/w),j=E.map((function(e,t){return{cx:(t%w+.5)*P,cy:(Math.floor(t/w)+.5)*T}})),A=d.map((function(e,t){return i.createElement(u,{key:"cell-".concat(t),fill:S[t]})}));return i.createElement(s,{width:a,height:f,data:d},E.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return i.createElement(c,n({key:"pie-".concat(r),isAnimationActive:t},j[r],{data:p({name:g&&g.dataKey||e.name,value:e.dataKey||e.value},d)},e,{outerRadius:Math.min(P/2,T/2)}),A)})),O.children)}))},3736:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r(13),y=m.castArray,g=m.isNil,b=m.isEqual,h=r(0),v=r(1),O=r(2245),E=O.BarChart,w=O.Bar,S=r(2896).default,P=function(e){function t(){var e,r;l(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return d(p(r=c(this,(e=u(t)).call.apply(e,[this].concat(o)))),"state",{marginLeft:0,marginBottom:0}),r}var r,n,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){b(e.xAxisAngle,this.props.xAxisAngle)||this.setState({marginLeft:0,marginBottom:0})}},{key:"render",value:function(){var e=this,t=this.props,r=t.autoColorOptions,n=t.colorGenerator,l=t.data,s=(t.isAnimationActive,t.height),c=t.margin,u=t.series,p=t.width,f=a(t,["autoColorOptions","colorGenerator","data","isAnimationActive","height","margin","series","width"]),m=y(u),b=n(m.length),h=g(f.xAxisAngle)?[]:["angle".concat(f.xAxisAngle)],O=f.yAxisLabel?[f.yAxisLabel]:[],P=f.yAxis,T=(b||["linechart"]).concat(O,P,h).join(""),j=this.state.marginLeft,A=this.state.marginBottom;return v.createElement(E,{key:T,autoColorOptions:r,width:p,height:s,data:l,margin:f.xAxisAngle?{top:20,right:30,left:j,bottom:A+20}:c},m.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.color,a(e,["color"])),r=arguments.length>1?arguments[1]:void 0;return v.createElement(w,i({key:"bar-".concat(r),name:f.yAxisLabel?f.yAxisLabel:null,fill:b[r]},t))})),S(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},f,{onUpdateLabelLength:function(t){var r=t.marginLeft,n=t.marginBottom;e.setState((function(e){return{marginBottom:e.marginBottom<n?n:e.marginBottom,marginLeft:e.marginLeft<r?r:e.marginLeft}}))}})),f.children)}}])&&s(r.prototype,n),m&&s(r,m),t}(v.Component);d(P,"propTypes",{autoColorOptions:h.object,colorGenerator:h.func,data:h.array,isAnimationActive:h.bool,height:h.number,margin:h.object,series:h.array,xAxisAngle:h.number,width:h.number}),d(P,"defaultProps",{height:300,series:[],width:600}),e.exports=P},3737:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=r(1),s=r(2245),c=s.Sector,u=s.Cell,p=s.PieChart,f=s.Pie,d=s.Tooltip,m=r(2803).convertToNameValue,y=function(e){var t=e.customCellHeight,r=e.height,n=e.rows;return t||(r-20)/n},g=function(e){return e.width/e.cols},b=function(e){var t=e.data,r=e.cols;return Math.ceil(t.length/r)},h=function(e){var t=e.width,r=e.height,n=e.data,o=void 0===n?[]:n,i=e.customCellHeight,a=Math.floor(Math.sqrt(o.length));a=Math.min(a,o.length,20);var l=g({width:t,cols:a}),s=b({data:o,cols:a});return function(e){var t=e.cols,r=e.rows,n=e.cellWidth,o=e.cellHeight,i=e.height,a=e.width,l=e.data,s=void 0===l?[]:l;if(2*o<n){var c=Math.min(s.length,Math.ceil(s.length/(i/n*2)));return{cols:c,rows:b({data:s,cols:c}),cellWidth:g({width:a,cols:c}),cellHeight:y({height:i,rows:b({data:s,cols:c})})}}return{cols:t,rows:r,cellWidth:n,cellHeight:o}}({data:o,height:r,width:t,cols:a,rows:s,cellWidth:l,cellHeight:y({customCellHeight:i,height:r,rows:s})})};e.exports=function(e){var t=e.data,r=e.xAxis,s=void 0===r?{}:r,y=e.colorGenerator,g=e.series,b=void 0===g?[]:g,v=e.width,O=void 0===v?500:v,E=e.height,w=void 0===E?500:E,S=e.useActive,P=void 0!==S&&S,T=e.customCellHeight,j=e.tooltip,A=e.legend,C=e.maxValue,x=e.isAnimationActive,D=Array.isArray(b)?b:[b],_=h({width:O,height:w,data:t,customCellHeight:T}),I=_.cols,F=_.rows,k=_.cellWidth,L=_.cellHeight,R=t.map((function(e,t){return{cx:(t%I+.5)*k,cy:Math.floor(t/I)*L+5}})),N=D[0]||{},M=isNaN(C)?m({name:s&&s.dataKey||N.name,value:N.dataKey||N.value},t).reduce((function(e,t){return Math.max(t.value,e)}),Number.NEGATIVE_INFINITY):C,B=y(2),G=[{value:M,color:B[0]}];return l.createElement(p,{width:k*I,height:L*F+20},j?l.createElement(d,{content:function(e){var t=e.payload,r=e.label;return l.createElement("div",{style:{backgroundColor:"#FFF",padding:5,border:"1px solid #CCCCCC"}},"".concat(r||t&&t[0]&&t[0].name||""," : ").concat(t&&t[0]&&(t[0].realValue||t[0].value)))}}):null,m({name:s&&s.dataKey||N.name,value:N.dataKey||N.value},t).map((function(e,t){var r=O/I,s=e.value,p=G.map((function(e,t,r){var n=a(r).splice(0,t+1).reduce((function(e,t){return{value:e.value+t.value}})).value;return s>n-e.value&&s<=n})).findIndex((function(e){return e})),d=G.map((function(e){return e.value})).reduce((function(e,t){return e+t})),m=[{value:s,realValue:s,name:e.name},{value:0,realValue:s,name:e.name},{value:d-s,realValue:s,name:e.name}],y={startAngle:180,endAngle:0,cx:R[t]&&R[t].cx||0,cy:R[t]&&R[t].cy+L||0},g={innerRadius:r/2*.5,outerRadius:r/2*.9};return[l.createElement(f,n({key:"pie-".concat(t),isAnimationActive:x,activeIndex:p,activeShape:P?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,o=e.outerRadius,i=e.startAngle,a=e.endAngle,s=e.fill;return l.createElement("g",null,l.createElement(c,{cx:t,cy:r,innerRadius:n,outerRadius:1.2*o,startAngle:i,endAngle:a,fill:s}))}:void 0,data:G.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({realValue:s,name:e.name},t)})),fill:"#8884d8"},g,y),G.map((function(e,t){return l.createElement(u,{key:"cell-".concat(t),fill:G[t].color})}))),l.createElement(f,n({isAnimationActive:x,stroke:"none",activeIndex:1,activeShape:function(t){var n=t.cx,o=t.cy,i=t.midAngle,a=t.outerRadius,s=Math.PI/180,c=Math.sin(-s*i),u=Math.cos(-s*i),p=n+(a+.1*r)*u,f=o+(a+.1*r)*c;return l.createElement("g",{width:r},l.createElement("circle",{cx:n,cy:o,r:.05*r,fill:B[1],stroke:"none"}),l.createElement("path",{d:"M".concat(n,",").concat(o,"L").concat(p,",").concat(f),strokeWidth:.06*r,stroke:"#999999",strokeLinecap:"round"}),l.createElement("path",{d:"M".concat(n,",").concat(o,"L").concat(p,",").concat(f),strokeWidth:.05*r,stroke:B[1],fill:B[1],strokeLinecap:"round"}),A?l.createElement("text",{textAnchor:"middle",width:r,x:n,y:o-1.5*a},e.value.toFixed(2)):null,A?l.createElement("text",{style:{fill:"#000000",stroke:"#000000",fontSize:.1*r},textAnchor:"middle",width:r,x:n,y:o},e.name):null)},data:m,outerRadius:g.innerRadius,fill:"none"},y,{legend:!0}))]})))}},3738:function(e,t,r){var n=r(1),o=r(2278),i=r(3739)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return n.createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})}));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,a=e.icons,l=e.topLeftItems,s=e.id,c=e.title,u=e.text,p=e.headerStyle,f=e.topRightItems,d=e.confirmDelete,m=void 0!==d&&d,y=e.onDelete,g=void 0===y?function(){}:y;return n.createElement(o,{id:"widget-text-".concat(s),title:c,confirmDelete:m,onDelete:g,toggleDeleteConfirm:r,headerStyle:p,icons:a,topLeftItems:l,topRightItems:f},n.createElement(i,{text:u}))}},3739:function(e,t,r){var n=r(1),o=r(2103),i=r(2138);e.exports=i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconFit;return{iconFit:t,tooltip:n.createElement(o,{msgId:"widgets.errors.notext"})}}))},3740:function(e,t,r){var n=r(1),o=r(2278),i=r(2119),a=r(13).omit,l=(0,r(407).withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t;return function(e){return r("map",e)}}})(r(2804)),s=r(2262);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,c=e.toggleDeleteConfirm,u=void 0===c?function(){}:c,p=e.id,f=e.title,d=e.map,m=e.icons,y=e.hookRegister,g=e.mapStateSource,b=e.topRightItems,h=e.confirmDelete,v=void 0!==h&&h,O=e.loading,E=void 0!==O&&O,w=e.onDelete,S=void 0===w?function(){}:w,P=e.headerStyle;return n.createElement(o,{id:"widget-text-".concat(p),title:f,confirmDelete:v,onDelete:S,toggleDeleteConfirm:u,headerStyle:P,icons:m,topRightItems:b},n.createElement(i,{footer:n.createElement("div",{style:{height:"30px",overflow:"hidden"}},E?n.createElement("span",{style:{float:"right"}},n.createElement(s,null)):null)},n.createElement(l,{updateProperty:r,id:p,map:a(d,"mapStateSource"),mapStateSource:g,hookRegister:y,layers:d&&d.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}}})))}},3741:function(e,t,r){var n=r(88).connect,o=r(195).createSelector,i=r(2144).mapTypeSelector;e.exports=n(o(i,(function(e){return{mapType:e}})))},3742:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407).withPropsOnChange;e.exports=a(["mapType","plugins"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapType,n=e.plugins;return{plugins:o({},r(3743)("./"+t+".js")(),{},n)}}))},3743:function(e,t,r){var n={"./cesium.js":3744,"./leaflet.js":3745,"./openlayers.js":3746,"./sink.js":3747};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=3743},3744:function(e,t,r){var n=r(407).createSink;e.exports=function(){return r(2464),{Map:r(2582),Layer:r(2583),Feature:n((function(){}))}}},3745:function(e,t,r){e.exports=function(){return r(2466),{Map:r(2404),Layer:r(2405),Feature:r(2406),Locate:r(2424),MeasurementSupport:r(2425),Overview:r(2426),ScaleBar:r(2427),DrawSupport:r(2593)}}},3746:function(e,t,r){e.exports=function(){return r(2467),{Map:r(2571).default,Layer:r(2448).default,Feature:r(2449).default,Locate:r(2568).default,MeasurementSupport:r(2459).default,Overview:r(2460).default,ScaleBar:r(2461).default,DrawSupport:r(2648).default}}},3747:function(e,t,r){var n=r(407).createSink;e.exports=function(){return{Map:n((function(){})),Layer:n((function(){})),Feature:n((function(){}))}}},3748:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.withStateHandlers,s=a.withProps,c=a.compose,u=r(2481);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return c(l((function(){return{resize:0}}),{onResize:function(e){var t=e.resize,r=void 0===t?0:t;return function(){return{resize:r+1}}}}),u({debounceTime:e}),s((function(e){return{options:o({},e.options,{resize:e.resize})}})))}},3749:function(e,t,r){"use strict";r.r(t),r.d(t,"getProjectionDefs",(function(){return l}));var n=r(407),o=r(47),i=r.n(o),a=r(13),l=Object(n.withProps)((function(e){var t=e.projectionDefs;return{projectionDefs:Object(a.isArray)(t)&&t.length?t:i.a.getConfigProp("projectionDefs")||[]}}));t.default=l},3750:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withHandlers,c=a.withPropsOnChange;e.exports=l(s({onMapViewChanges:function(e){var t=e.map,r=void 0===t?{}:t,n=e.onMapViewChanges,i=void 0===n?function(){}:n;return function(e,t,n,a,l,s){i(o({},r,{center:e,bbox:o({},r.bbox,{},n),zoom:t,size:a,mapStateSource:l,projection:s}))}}}),c(["onMapViewChanges","eventHandlers"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapViewChanges,r=void 0===t?function(){}:t,n=e.eventHandlers,i=void 0===n?{}:n;return{eventHandlers:o({},i,{onMapViewChanges:r})}})))},3751:function(e,t,r){"use strict";r.r(t),r.d(t,"fetchingProjection",(function(){return f})),r.d(t,"handlingUnsupportedProjection",(function(){return d}));var n=r(407),o=r(2138),i=r.n(o),a=r(2103),l=r.n(a),s=r(1),c=r.n(s),u=r(47),p=r.n(u),f=Object(n.withProps)((function(e){var t=e.map;return{projection:e.projection||(t.data&&t.data.map?t.data.map.projection:t&&t.projection)}})),d=Object(n.compose)(f,i()((function(e){var t=e.projectionDefs,r=void 0===t?p.a.getConfigProp("projectionDefs")||[]:t,n=e.projection;return n&&0===r.concat([{code:"EPSG:4326"},{code:"EPSG:3857"},{code:"EPSG:900913"}]).filter((function(e){return e.code===n})).length}),(function(e){var t=e.projection;return{glyph:"1-map",style:{width:"100%",height:"100%",display:"flex"},title:c.a.createElement(l.a,{msgId:"map.errors.loading.title"}),mainViewStyle:{margin:"auto"},imageStyle:{height:120,width:120,margin:"auto"},description:c.a.createElement(l.a,{msgId:"map.errors.loading.projectionError",msgParams:{projection:t}})}})))},3752:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(0),b=r(13).isString,h=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(a)))),"getTool",(function(e){var t=r.props.plugins;return b(e)?{name:e,impl:t.tools[e]}:l({name:e.name,impl:t.tools[e.name]},e)})),m(f(r),"renderLayers",(function(){var e=r.props.map&&r.props.map.projection||"EPSG:3857",t=r.props.plugins.Layer;return r.props.layers.map((function(n,o){return y.createElement(t,{type:n.type,srs:e,position:o,key:n.id||n.name,options:n},r.renderLayerContent(n,e))}))})),m(f(r),"renderLayerContent",(function(e,t){if(e.features&&"vector"===e.type){var n=r.props.plugins.Feature;return e.features.map((function(r){var o;return y.createElement(n,(m(o={key:r.id,msId:r.id,type:r.type,crs:t,geometry:r.geometry,features:r.features},"msId",r.id),m(o,"featuresCrs",e.featuresCrs||"EPSG:4326"),m(o,"layerStyle",e.style),m(o,"style",r.style||e.style||null),m(o,"properties",r.properties),o))}))}return null})),m(f(r),"renderTools",(function(){return r.props.tools.map((function(e){var t=r.getTool(e),n=t.impl,a=t.name,l=i(t,["impl","name"]);return y.createElement(n,o({key:a},l))}))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.plugins.Map,t=this.props.map&&this.props.map.projection||"EPSG:3857";return this.props.map?y.createElement(e,o({projectionDefs:this.props.projectionDefs,style:this.props.styleMap,id:this.props.id,zoomControl:!1,center:{x:0,y:0},zoom:1,hookRegister:this.props.hookRegister,mapStateSource:this.props.mapStateSource||this.props.id},this.props.options,this.props.map,{projection:t},this.props.eventHandlers),this.renderLayers(),this.renderTools()):null}}])&&c(r.prototype,n),a&&c(r,a),t}(y.Component);m(h,"propTypes",{id:g.string,options:g.object,map:g.object,mapStateSource:g.string,eventHandlers:g.object,styleMap:g.object,layers:g.array,hookRegister:g.object,projectionDefs:g.array,plugins:g.any,tools:g.array,getLayerProps:g.func}),m(h,"defaultProps",{id:"__base_map__",options:{},map:{},styleMap:{},tools:[],projectionDefs:[],eventHandlers:{onMapViewChanges:function(){},onClick:function(){},onMouseMove:function(){},onLayerLoading:function(){},onLayerError:function(){}}}),e.exports=h},3753:function(e,t,r){var n=r(1),o=r(2103),i=r(2119),a=r(2262),l=r(2805),s=r(2161),c=r(2317),u=r(3754).getWidgetFilterRenderers,p=c(s((function(e){return!e.describeFeatureType}))(r(2808))),f=r(2278);e.exports=u((function(e){var t=e.id,r=e.title,s=e.loading,c=e.confirmDelete,u=void 0!==c&&c,d=e.enableColumnFilters,m=void 0!==d&&d,y=e.headerStyle,g=e.icons,b=e.topRightItems,h=e.toggleDeleteConfirm,v=void 0===h?function(){}:h,O=e.onDelete,E=void 0===O?function(){}:O,w=e.gridEvents,S=void 0===w?function(){}:w,P=e.pageEvents,T=void 0===P?{moreFeatures:function(){}}:P,j=e.describeFeatureType,A=e.filterRenderers,C=e.columnSettings,x=e.features,D=e.size,_=e.pages,I=e.error,F=e.pagination,k=void 0===F?{}:F,L=e.virtualScroll,R=void 0===L||L;return n.createElement(f,{id:"widget-chart-".concat(t),title:r,headerStyle:y,icons:g,confirmDelete:u,onDelete:E,toggleDeleteConfirm:v,topRightItems:b},n.createElement(i,{footer:k.totalFeatures?n.createElement("div",{style:{height:"30px",overflow:"hidden"}},s?n.createElement("span",{style:{float:"right"}},n.createElement(a,null)):null,void 0===I&&n.createElement("span",{style:{float:"left",margin:"5px"}},n.createElement(o,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:k.totalFeatures}}))):null},n.createElement(p,{emptyRowsView:function(){return n.createElement(l,{loading:s})},gridEvents:S,sortable:!1,defaultSize:!1,columnSettings:C,pageEvents:T,virtualScroll:R,enableColumnFilters:m,filterRenderers:A,features:x,pages:_,error:I,size:D,rowKey:"id",describeFeatureType:j,pagination:k})))}))},3754:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withPropsOnChange,c=a.withProps,u=a.mapPropsStream,p=r(13).find,f=r(2152).getAttributeFields,d=r(2530).getFilterRenderer,m=l(u((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&p(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return o({},e,{value:n})}))}))),y=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return l(c({quickFilterStream$:o,attributeName:n,options:t}),m)(d(r,{name:n}))},g=l(u((function(e){return e.map((function(t){return o({},t,{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),b=l(g,s(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:f(t).reduce((function(e,t){var a=t.localType,l=t.name;return o({},e,i({},l,y({options:r,localType:a,attributeName:l,quickFilterStream$:n})))}),{})}:{}})));e.exports={getWidgetFilterRenderers:b}},3755:function(e,t,r){var n=r(2387),o=r(407),i=o.compose,a=o.withHandlers,l=o.defaultProps;e.exports=i(l({onValueChange:function(){}}),a({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({value:r,operator:"=",type:e.type,attribute:n})}}}))(n)},3756:function(e,t,r){var n=r(2387),o=r(407),i=o.compose,a=o.withHandlers,l=o.defaultProps,s=r(13).trim;e.exports=i(l({onValueChange:function(){},placeholderMsgId:"featuregrid.filter.placeholders.string"}),a({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({rawValue:r,value:s(r)?s(r):void 0,operator:"ilike",type:"string",attribute:n})}}}))(n)},3757:function(e,t,r){var n=r(2387),o=r(13).trim,i=r(407),a=i.compose,l=i.withHandlers,s=i.withState,c=i.defaultProps,u=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/;e.exports=a(c({onValueChange:function(){}}),s("valid","setValid",!0),l({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r);var i,a="=",l=u.exec(r);l?("!=="===(a=l[1]||"=")|"!="===a?a="<>":"==="===a|"=="===a&&(a="="),i=parseFloat(l[2])):i=parseFloat(r,10),isNaN(i)&&""!==o(r)?e.setValid(!1):e.setValid(!0),e.onChange({value:isNaN(i)?void 0:i,rawValue:r,operator:a,type:"number",attribute:n})}}}),c({placeholderMsgId:"featuregrid.filter.placeholders.number",tooltipMsgId:"featuregrid.filter.tooltips.number"}))(n)},3758:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(3759)(r(3760)),a=r(2209).default;e.exports=function(e){return o.createElement(a,null,(function(t){var r=t.width,a=t.height;return o.createElement("div",{className:e.className},o.createElement(i,n({},e,{minHeight:a,minWidth:r,enableCellAutoFocus:!1})))}))}},3759:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(407),a=i.compose,l=i.branch,s=i.withHandlers,c=i.mapPropsStream,u=i.createEventHandler,p=r(15);e.exports=l((function(e){return e.virtualScroll}),a(c((function(e){var t=u(),r=t.handler,i=t.stream;return e.combineLatest(i.throttle((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return p.Observable.timer(e)})).scan((function(e){return e+1}),0).map((function(e){return{scrollToTopCounter:e}})).startWith({}),(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},t,{scrollToTop:r})}))})),s({onGridSort:function(e){var t=e.onGridSort,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){return o(0),r.apply(void 0,arguments)}},onAddFilter:function(e){var t=e.onAddFilter,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){o(1e3),r.apply(void 0,arguments)}}})))},3760:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(0),u=r(2388),p=r(33),f=function(e){function t(e){var r,o,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,l=i(t).call(this,e),r=!l||"object"!==n(l)&&"function"!=typeof l?a(o):l,s(a(r),"scrollListener",(function(){r.props.isFocused||(r.scroll=r.canvas.scrollTop);var e=Math.ceil(r.canvas.clientHeight/r.props.rowHeight),t=Math.floor(r.canvas.scrollTop/r.props.rowHeight),n=t+e;r.props.onGridScroll&&r.props.onGridScroll({firstRowIdx:t,lastRowIdx:n})})),s(a(r),"setCanvasListener",(function(){r.canvas=p.findDOMNode(a(r)).querySelector(".react-grid-Canvas"),r.canvas&&r.canvas.addEventListener("scroll",r.scrollListener)})),r}var r,c,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,(c=[{key:"componentDidMount",value:function(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentWillUnmount",value:function(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.virtualScroll,n=t.displayFilters,o=t.scrollToTopCounter;e.displayFilters!==n&&this.onToggleFilter(),r&&(this.canvas&&this.canvas!==p.findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),o!==e.scrollToTopCounter&&this.canvas&&(this.canvas.scrollTop=0))}}])&&o(r.prototype,c),u&&o(r,u),t}(u);s(f,"propTypes",{displayFilters:c.bool}),e.exports=f},3762:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(2152),c=s.featureTypeToGridColumns,u=s.getToolColumns,p=s.getRow,f=s.getRowVirtual,d=s.getGridEvents,m=s.applyAllChanges,y=s.createNewAndEditingFilter,g=r(3763),b=r(407),h=b.compose,v=b.withPropsOnChange,O=b.withHandlers,E=b.defaultProps,w=b.createEventHandler,S=r(13).isNil,P=r(2530).getFilterRenderer,T=r(3768).getFormatter,j=r(3769).manageFilterRendererState,A=r(2277),C=r(3770),x=r(2152).getRowIdx,D=h(E({sortable:!0,autocompleteEnabled:!1,initPlugin:function(){},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!0,editors:C,dataStreamFactory:function(e){var t=w(),r=t.handler,n=t.stream;return function(e){return e.distinctUntilChanged((function(e,t){var r=e.features,n=e.pages,o=e.isFocused,i=t.features,a=t.pages,l=t.isFocused;return r===i&&o===l&&n===a})).switchMap((function(e){var t=e.size,r=e.pageEvents,n=e.isFocused,o=e.pages,i=e.pagination,a=e.vsOverScan,l=void 0===a?20:a,s=e.scrollDebounce,c=void 0===s?50:s;return e.onGridScroll$.debounceTime(c).filter((function(){return!n})).map((function(e){for(var r=e.firstRowIdx,n=e.lastRowIdx,a=r-l<0?0:r-l,s=n+l>i.totalFeatures-1?i.totalFeatures-1:n+l,c=Math.floor(a/t),u=Math.floor(s/t),p=!1,f=c;f<=u&&!p;f++)-1===x(f*t,o,t)&&(p=!0);return p&&{startPage:c,endPage:u}})).filter((function(e){return e})).do((function(e){return r.moreFeatures(e)}))}))}(e.filter((function(e){return e.virtualScroll})).map((function(e){return a({},e,{onGridScroll$:n})}))).startWith({}).map((function(e){return a({},e,{onGridScroll:r})}))},virtualScroll:!0}),v("showDragHandle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showDragHandle,r=void 0!==t&&t;return{className:r?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),v(["enableColumnFilters"],(function(e){return{displayFilters:e.enableColumnFilters}})),v(["editingAllowedRoles","virtualScroll"],(function(e){return{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}})),v(["autocompleteEnabled"],(function(e){return{autocompleteEnabled:e.autocompleteEnabled}})),v(["url"],(function(e){return{url:e.url}})),v(["typeName"],(function(e){return{typeName:e.typeName}})),v(["features","newFeatures","changes"],(function(e){return{rows:(e.newFeatures?[].concat(o(e.newFeatures),o(e.features)):e.features).filter(e.focusOnEdit?y(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):function(){return!0}).map((function(t){return m(t,e.changes)})).map((function(e){return a({},e,{get:function(t){return"id"===t||"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]}})}))}})),v(["newFeatures","changes","focusOnEdit"],(function(e){return{isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}})),v(["features","newFeatures","isFocused","virtualScroll"],(function(e){return{rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}})),O({rowGetter:function(e){return e.virtualScroll&&function(t){return f(t,e.rows,e.pages,e.size)}||function(t){return p(t,e.rows)}}}),v(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(function(e){return{columns:u(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts).concat(c(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:function(t){var r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},n={attribute:t.name,url:e.url,typeName:e.typeName},o=e.customEditorsOptions&&e.customEditorsOptions.rules||[],i={type:t.localType,props:e},a=g.getCustomEditor(n,o,i);return S(a)?e.editors(t.localType,r):a},getFilterRenderer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.localType,n=void 0===r?"":r,o=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[o]?e.filterRenderers[o]:j(P(n))},getFormatter:function(e){return T(e)}}))}})),v(["gridOpts","describeFeatureType","actionOpts","mode","select","columns"],(function(e){var t=d(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),r=t.onRowsSelected,o=void 0===r?function(){}:r,i=t.onRowsDeselected,l=void 0===i?function(){}:i,s=t.onRowsToggled,c=void 0===s?function(){}:s,u=n(t,["onRowsSelected","onRowsDeselected","onRowsToggled"]),p=e.gridOpts;return p=a({},p,{enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:"EDIT"===e.mode,selectBy:{keys:{rowKey:"id",values:e.select.map((function(e){return e.id}))}},onRowsSelected:o,onRowsDeselected:l}}),u.onRowClick=function(e,t){e>=0&&c([{rowIdx:e,row:t}])},a({},u,{},p)})),A);e.exports={featuresToGrid:D}},3763:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13).find,l=r(26)({},r(3764)),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce((function(r,n){var o=new RegExp(e[n]);return r&&o.test(t[n])}),!0)},c=function(e,t,r){if(l[t]){if(l[t][e])return l[t][e](r);if(l[t].defaultEditor)return l[t].defaultEditor(r)}return null};e.exports={get:function(){return l},register:function(e){var t=e.name,r=e.editors;r&&(l[t]=r)},remove:function(e){if(t=e,-1!==Object.keys(l).indexOf(t))try{return delete l[e],!0}catch(e){return!1}var t;return!1},clean:function(){l={}},getCustomEditor:function(e){var t=e.attribute,r=e.url,n=e.typeName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,u=l.type,p=l.props,f=a(i,(function(e){return s(e.regex,{attribute:t,url:r,typeName:n})}));return f?c(u,f.editor,o({},p,{},f.editorProps||{})):null}}},3764:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(2809),a={DropDownEditor:{string:function(e){return o.createElement(i,n({dataType:"string"},e))}}};e.exports=a},3765:function(e,t,r){var n=r(1),o=r(2531),i=r(3766)((function(e){var t=e.toggle,r=e.select,i=e.focus,a=e.change,l=e.value,s=e.busy,c=e.data,u=e.loading,p=void 0!==u&&u,f=e.filter,d=e.open;return n.createElement(o,{pagination:{paginated:!1},onFocus:i,onToggle:t,onChange:a,onSelect:r,selectedValue:l,dropUp:!1,busy:s,data:c,open:d,loading:p,filter:f})}));e.exports=i},3766:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=(0,a.compose)((0,a.withStateHandlers)((function(e){return{open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel}}),{select:function(e){return function(){return o({},e,{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return o({},e,{selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return o({},e,{selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?o({},e,{currentPage:1,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return o({},e,{open:!!e.changingPage||!e.open})}}}));e.exports=l},3767:function(e,t){e.exports={forceSelection:function(e){var t=e.oldValue,r=e.changedValue,n=e.data;return e.allowEmpty&&""===r?"":-1!==n.indexOf(r)?r:t}}},3768:function(e,t,r){var n=r(1);e.exports={getFormatter:function(e){return"boolean"===e.localType?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return void 0!==t?n.createElement("span",null,t.toString()):void 0}:void 0}}},3769:function(e,t,r){var n=r(407).withState;e.exports={manageFilterRendererState:n("value","onValueChange",(function(e){return e.value}))}},3770:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(2389),a=r(3771),l=r(3772),s=r(2809),c={defaultEditor:function(e){return o.createElement(i,e)},int:function(e){return o.createElement(a,n({dataType:"int",inputProps:{step:1,type:"number"}},e))},number:function(e){return o.createElement(a,n({dataType:"number",inputProps:{step:1,type:"number"}},e))},string:function(e){return e.autocompleteEnabled?o.createElement(l,n({dataType:"string"},e)):o.createElement(i,n({dataType:"string"},e))},boolean:function(e){return o.createElement(s,n({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))}};e.exports=function(e,t){return c[e]?c[e](t):c.defaultEditor(t)}},3771:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(2389),y=function(e,t){return Object.keys(e).reduce((function(r,n){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,p({},n,(o=t(e[n]),isNaN(o)?null:o)));var o}),{})},g={int:function(e){return parseInt(e,10)},number:function(e){return parseFloat(e,10)}},b=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=c(t).call(this,e),(r=!i||"object"!==n(i)&&"function"!=typeof i?a(o):i).validate=function(e){try{return!(!g[r.props.dataType]&&!g.number)&&r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValue=function(){var e=s(c(t.prototype),"getValue",a(r)).call(a(r));try{return y(e,g[r.props.dataType]||g.number)}catch(t){return e}},r}var r,u,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,(u=[{key:"render",value:function(){var e=this;return f.createElement("input",o({},this.props.inputProps,{ref:function(t){e.input=t},type:"number",className:"form-control",defaultValue:this.props.value}))}}])&&i(r.prototype,u),p&&i(r,p),t}(m);p(b,"propTypes",{value:d.oneOfType([d.string,d.number]),onBlur:d.func,inputProps:d.object,dataType:d.string,isValid:d.func,column:d.object}),p(b,"defaultProps",{isValid:function(){return!0},dataType:"number"}),e.exports=b},3772:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(2389),m=r(3773).AutocompleteCombobox,y=r(47).getParsedUrl,g=r(2810).createPagedUniqueAutompleteStream,b=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=c(t).call(this,e),(r=!i||"object"!==n(i)&&"function"!=typeof i?a(o):i).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValue=function(){return s(c(t.prototype),"getValue",a(r)).call(a(r))},r}var r,u,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,(u=[{key:"render",value:function(){return p.createElement(m,o({},this.props,{url:y(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:g}))}}])&&i(r.prototype,u),f&&i(r,f),t}(d);u(b,"propTypes",{column:f.object,dataType:f.string,inputProps:f.object,isValid:f.func,onBlur:f.func,autocompleteStreamFactory:f.func,url:f.string,typeName:f.string,value:f.string}),u(b,"defaultProps",{isValid:function(){return!0},dataType:"string"}),e.exports=b},3773:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(1),l=r(13).isArray,s=r(2531),c=r(407),u=c.setObservableConfig,p=c.mapPropsStreamWithConfig,f=c.compose,d=c.withStateHandlers,m=r(2526).default;u(m);var y=p(m)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return{data:l(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((function(e){return{label:e,value:e}})):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy}}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,l=e.value,c=e.valuesCount,u=e.loadNextPage,p=e.loadPrevPage,f=e.maxFeatures,d=e.currentPage,m=e.busy,y=e.data,g=e.loading,b=void 0!==g&&g,h=Math.ceil(c/f);return a.createElement(s,{pagination:{firstPage:1===d,lastPage:d===h,paginated:!0,loadPrevPage:p,loadNextPage:u},busy:m,dropUp:!1,data:y,open:t,onFocus:o,onToggle:r,onChange:i,onSelect:n,selectedValue:l,loading:b})})),g=f(d((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory}}),{select:function(e){return function(){return o({},e,{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return o({},e,{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return o({},e,{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?o({},e,{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return o({},e,{open:!!e.changingPage||!e.open})}},loadNextPage:function(e){return function(){return o({},e,{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}},loadPrevPage:function(e){return function(){return o({},e,{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}}}))(y);e.exports={AutocompleteCombobox:g}},3774:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={nominiatimIndexToBboxIndex:function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}},nominatimToGeoJson:function(e){return null===e?[]:e.map((function(e){return{properties:n({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[i.nominiatimIndexToBboxIndex(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},nominatimToLayer:function(e,t){return{type:"vector",visibility:!0,name:e||"Search Results",styleName:"marker",features:i.nominatimToGeoJson(t)}}};e.exports=i},3775:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(3776),d=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,l(t).call(this,e))).setScrollLeft=function(e){return r.refs.row.setScrollLeft(e)},r}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.renderBaseRow(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:f},this.props))}}])&&i(r.prototype,n),u&&i(r,u),t}(u.Component);c(d,"propTypes",{columns:p.array,row:p.object,renderBaseRow:p.func.isRequired}),e.exports=d},3776:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(1),p=r(0),f=r(2388).Cell,d=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,l(t).call(this,e))).setScrollLeft=function(e){return r.refs.cell.setScrollLeft(e)},r}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),n=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return u.createElement(f,o({},this.props,{ref:"cell",className:n}))}}])&&i(r.prototype,n),c&&i(r,c),t}(u.Component);c(d,"propTypes",{value:p.any,rowData:p.object,column:p.object}),c(d,"contextTypes",{isModified:p.func,isProperty:p.func,isValid:p.func}),e.exports=d},3777:function(e,t,r){var n=r(3778);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3778:function(e,t,r){(e.exports=r(759)()).push([e.i,'\n.msgapi .feature-grid-drag-handle-show .drag-handle {\n    display: inline;\n}\n\n.msgapi .feature-grid-drag-handle-hide .drag-handle {\n    display: none;\n}\n.msgapi .empty-row .react-grid-Cell {\n    background-color: "gray";\n    opacity: 0.5;\n}\n.msgapi .empty-row:hover .react-grid-Cell {\n    background-color: "gray";\n    opacity: 0.5;\n}\n.msgapi .empty-row .react-grid-Cell__value .glyphicon-exclamation-mark {\n    opacity: 0;\n}\n',""])},3779:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(2813),l=r(2278),s=r(758).Glyphicon,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?i.createElement(s,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};e.exports=function(e){var t=e.id,r=e.title,s=e.description,u=e.data,p=void 0===u?[]:u,f=e.series,d=void 0===f?[]:f,m=e.loading,y=e.showTable,g=e.confirmDelete,b=void 0!==g&&g,h=e.headerStyle,v=e.icons,O=e.topRightItems,E=e.toggleTableView,w=void 0===E?function(){}:E,S=e.toggleDeleteConfirm,P=void 0===S?function(){}:S,T=e.onDelete,j=void 0===T?function(){}:T,A=o(e,["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","toggleTableView","toggleDeleteConfirm","onDelete"]);return i.createElement(l,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,icons:v,topLeftItems:c({loading:m,title:r,description:s,showTable:y,toggleTableView:w}),confirmDelete:b,onDelete:j,toggleDeleteConfirm:P,headerStyle:h,topRightItems:O},i.createElement(a,n({id:t,isAnimationActive:!m,loading:m,data:p,series:d,iconFit:!0},A)))}},3788:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var o=r(1),i=r(2278),a=r(2814)()(r(2815));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,l=e.id,s=e.title,c=e.icons,u=e.headerStyle,p=e.confirmDelete,f=void 0!==p&&p,d=e.topRightItems,m=e.onDelete,y=void 0===m?function(){}:m,g=n(e,["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","onDelete"]);return o.createElement(i,{id:"widget-text-".concat(l),title:s,confirmDelete:f,onDelete:y,toggleDeleteConfirm:r,headerStyle:u,icons:c,topRightItems:d},o.createElement(a,g))}},3791:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(2120),s=l.EDIT_NEW,c=l.INSERT,u=l.EDIT,p=l.UPDATE_PROPERTY,f=l.UPDATE_LAYER,d=l.DELETE,m=l.EDITOR_CHANGE,y=l.EDITOR_SETTING_CHANGE,g=l.CHANGE_LAYOUT,b=l.CLEAR_WIDGETS,h=l.DEFAULT_TARGET,v=l.ADD_DEPENDENCY,O=l.REMOVE_DEPENDENCY,E=l.LOAD_DEPENDENCIES,w=l.RESET_DEPENDENCIES,S=l.TOGGLE_COLLAPSE,P=l.TOGGLE_COLLAPSE_ALL,T=l.TOGGLE_TRAY,j=l.toggleCollapse,A=r(40).MAP_CONFIG_LOADED,C=r(2816),x=C.DASHBOARD_LOADED,D=C.DASHBOARD_RESET,_=r(817),I=r(13),F=I.get,k=I.find,L=I.omit,R=I.mapValues,N=I.castArray,M=r(410),B=M.arrayUpsert,G=M.compose,U=M.arrayDelete,W={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case y:return _("builder.settings.".concat(r.key),r.value,t);case s:return _("builder.editor",r.widget,_("builder.settings",r.settings||W.settings,t));case u:return _("builder.editor",i({},r.widget,{widgetType:r.widget&&r.widget.widgetType||"chart"}),_("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case m:return _("builder.editor.".concat(r.key),r.value,t);case c:var o=B("containers[".concat(r.target,"].widgets"),i({id:r.id},r.widget,{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);return o;case p:return B("containers[".concat(r.target,"].widgets"),_(r.key,r.value,k(F(t,"containers[".concat(r.target,"].widgets")),{id:r.id})),{id:r.id},t);case f:if(r.layer){var a=F(t,"containers[".concat(h,"].widgets"));if(a)return _("containers[".concat(h,"].widgets"),a.map((function(e){return F(e,"layer.id")===r.layer.id?_("layer",r.layer,e):e})),t)}return t;case d:return U("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t);case x:var l=r.data;return _("containers[".concat(h,"]"),i({},l),t);case A:var C=r.config||{},I=C.widgetsConfig;return _("containers[".concat(h,"]"),i({},I),t);case g:return _("containers[".concat(r.target,"].layout"),r.layout)(_("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case b:case D:return _("containers[".concat(h,"]"),W.containers[h],t);case v:var M=r.key,V=r.value;return _("dependencies[".concat(M,"]"),V,t);case O:var H=r.key;return _("dependencies[".concat(H,"]"),null,t);case E:var z=r.dependencies;return _("dependencies",z,t);case w:return _("dependencies",W.dependencies,t);case S:var q=r.widget,Q=void 0===q?{}:q;if(Q.dataGrid&&Q.dataGrid.static)return t;var Y=F(t,"containers[".concat(r.target,"].collapsed[").concat(Q.id));if(Y){var K=[].concat(n(F(t,"containers[".concat(r.target,"].layout"),[])),n(N(F(Y,"layout",[])))),X=R(F(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(n(e),n(N(F(Y,"layouts[".concat(t,"]"),[]))))}));return L(G(_("containers[".concat(r.target,"].layout"),K),_("containers[".concat(r.target,"].layouts"),X))(t),"containers[".concat(r.target,"].collapsed[").concat(Q.id,"]"))}return _("containers[".concat(r.target,"].collapsed[").concat(Q.id,"]"),{layout:k(F(t,"containers[".concat(r.target,"].layout"),[]),{i:Q.id}),layouts:R(F(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return k(e,{i:Q.id})}))},t);case P:var Z=F(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),J=Z.filter((function(e){return F(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),$=Z.filter((function(e){return!F(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ee=0===$.length;return ee?J.reduce((function(t,r){return e(t,j(r))}),t):$.length>0?$.reduce((function(t,r){return e(t,j(r))}),t):t;case T:return _("tray",r.value,t);default:return t}}},3792:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(15),s=r(13),c=s.endsWith,u=s.has,p=s.get,f=s.includes,d=s.isEqual,m=s.omit,y=s.omitBy,g=r(2120),b=g.EXPORT_CSV,h=g.EXPORT_IMAGE,v=g.INSERT,O=g.TOGGLE_CONNECTION,E=g.WIDGET_SELECTED,w=g.EDITOR_SETTING_CHANGE,S=g.onEditorChange,P=g.updateWidgetLayer,T=g.clearWidgets,j=g.loadDependencies,A=g.toggleDependencySelector,C=g.DEPENDENCY_SELECTOR_KEY,x=g.WIDGETS_REGEX,D=r(40).MAP_CONFIG_LOADED,_=r(2143),I=_.availableDependenciesSelector,F=_.isWidgetSelectionActive,k=_.getDependencySelectorConfig,L=r(269),R=L.CHANGE_LAYER_PROPERTIES,N=L.LAYER_LOAD,M=L.LAYER_ERROR,B=r(408).getLayerFromId,G=r(2522).pathnameSelector,U=r(413),W=U.MAP_CREATED,V=U.SAVING_MAP,H=U.MAP_ERROR,z=r(2816).DASHBOARD_LOADED,q=r(771).LOCATION_CHANGE,Q=r(2817).saveAs,Y=r(3795),K=r(3858),X=r(3862),Z=function(e){return e.ofType(V,W,H).startWith({type:D}).switchMap((function(t){return t.type===V?l.Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===q}))},J=function(e,t,r,n){return l.Observable.of(S("mapSync",e),S("dependenciesMap",function(e,t,r){var n,o=r.dependenciesMap,l=r.mappings,s=["layer","filter","quickFilters","options"],u=["layers","viewport","zoom","center"],p=(x.exec(t)||[])[1],d=y(o,(function(e){return-1===e.indexOf(p)})),g=Object.keys(l).filter((function(e){return void 0!==l[e]})).reduce((function(e,r){return!c(t,"map")&&f(s,r)?i({},e,a({},r,"".concat(t,".").concat(l[r]))):c(t,"map")?f(u,r)?i({},e,a({},r,"map"===t?l[r]:"".concat(t,".").concat(l[r]))):i({},e,a({},r,"".concat(t.replace(".map",""),".").concat(l[r]))):e}),{});return e?i({},d,{},g,(a(n={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),a(n,"mapSync","".concat(t.replace(".map",""),".mapSync")),n)):m(d,[Object.keys(l)])}(e,t,r)))};e.exports={exportWidgetData:function(e){return e.ofType(b).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return K.json2csv(r,(function(e,t){return e?null:Q(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(D,z,v).map((function(){return I(o())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d(n(e),n(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return j(e.reduce((function(e,t){var r,n,o=t.replace(".map","");return c(t,"map")?i({},e,(a(r={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),a(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),a(r,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),a(r,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),a(r,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),a(r,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),r)):i({},e,(a(n={},"".concat(t,".filter"),"".concat(t,".filter")),a(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),a(n,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),a(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),a(n,"".concat(t,".layer"),"".concat(t,".layer")),a(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(O).switchMap((function(t){var r=t.active,o=t.availableDependencies,i=void 0===o?[]:o,a=t.options;return r&&i.length>0?1===i.length?J(r,i[0],a):l.Observable.of(A(r,{availableDependencies:i})).merge(e.ofType(E).filter((function(){return F(n())})).switchMap((function(e){var t=e.widget,o=p(k(n()),"availableDependencies").filter((function(e){return(x.exec(e)||[])[1]===t.id}));return J(r,o[0],a,t.dependeciesMap).concat(l.Observable.of(A(!1,{})))})).takeUntil(e.ofType(q).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===w&&r===C}))))):J(r,i[0],a)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(D).switchMap((function(){var t=G(n()).split("/"),r=t[t.length-1];return e.let(Z).filter((function(){var e=G(n()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?l.Observable.of(T()):l.Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(h).do((function(e){var t,r,n=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),l=document.querySelector("#".concat(n," .recharts-wrapper svg")),s=l.outerHTML?l.outerHTML:(t=l,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);X(a,s,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),Y.downloadCanvasDataURL(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(R).switchMap((function(e){var r,o=e.layer,i=e.newProperties,a=t.getState(),s=B(a,o);return(r=l.Observable).of.apply(r,n(u(i,"layerFilter")&&s?[P(s)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(N,M).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,o=e.layerId,i=t.getState(),a=B(i,o);return(r=l.Observable).of.apply(r,n(a&&a.previousLoadingError!==a.loadingError?[P(a)]:[]))}))})).mergeAll()}}},3795:function(e,t,r){var n=r(2817),o=r(3796),i=r(3797),a=r(3826),l=r(3828),s=r(417).Promise,c=new DOMParser,u=r(26),p=r(3856).hint,f={MIME_LOOKUPS:{avi:"video/avi",gpx:"application/gpx+xml",kmz:"application/vnd.google-earth.kmz",kml:"application/vnd.google-earth.kml+xml",zip:"application/zip",json:"application/json",geojson:"application/json"},recognizeExt:function(e){return e.split(".").slice(-1)[0]},download:function(e,t,r){var o=new Blob([e],{type:r});n.saveAs(o,t)},downloadCanvasDataURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;f.download(o(e),t,r)},shpToGeoJSON:function(e){return[].concat(i.parseZip(e))},kmlToGeoJSON:function(e){var t=function(e){return[].slice.call(e.documentElement.getElementsByTagName("StyleMap")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("Style")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("LineStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("PointStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("PolyStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("IconStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("LabelStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("ListStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("BallonStyle")).map((function(e){return e.parentNode.removeChild(e)})),[].slice.call(e.documentElement.getElementsByTagName("styleUrl")).map((function(e){return e.parentNode.removeChild(e)})),e}(e);return[].concat(a.kml(t)).map((function(e){return u({},e,{fileName:t.getElementsByTagName("name")[0].innerHTML})}))},gpxToGeoJSON:function(e,t){return[].concat(a.gpx(e)).map((function(r){return u({},r,{fileName:e.getElementsByTagName("name")[0]&&e.getElementsByTagName("name")[0].innerHTML||t})}))},readZip:function(e){return new s((function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(){r(n.error.name)},n.readAsArrayBuffer(e)}))},readKml:function(e){return new s((function(t,r){var n=new FileReader;n.onload=function(){t(c.parseFromString(n.result,"text/xml"))},n.onerror=function(){r(n.error.name)},n.readAsText(e)}))},readJson:function(e){return new s((function(t,r){var n=new FileReader;n.onload=function(){try{t(JSON.parse(n.result))}catch(e){r(e)}},n.onerror=function(){r(n.error.name)},n.readAsText(e)}))},readKmz:function(e){var t=new l;return new s((function(r,n){t.loadAsync(e).then((function(e){e.filter((function(e){return-1!==e.indexOf("kml")})).forEach((function(e){return e.async("string").then((function(e){r(c.parseFromString(e,"text/xml"))})).catch((function(e){n(e.message)}))}))}))}))},readGeoJson:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new s((function(r,n){var o=new FileReader;o.onload=function(){try{var e=JSON.parse(o.result);r({geoJSON:e,errors:p(e).filter((function(e){return t||"message"!==e.level}))})}catch(e){n(e)}},o.onerror=function(){n(o.error.name)},o.readAsText(e)}))},checkShapePrj:function(e){var t=new l;return new s((function(r){t.loadAsync(e).then((function(e){var t=e.files,n=void 0===t?{}:t,o=Object.keys(n).filter((function(e){return!n[e].dir&&0!==e.indexOf("__MACOSX")&&e.indexOf(".shp")===e.length-4})).map((function(e){return e.slice(0,-4)})).reduce((function(e,t){return e.concat(!n["".concat(t,".prj")]&&t||[])}),[]);r(o)}))}))}};e.exports=f},3824:function(e,t){},3827:function(e,t){},3867:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(2473),y=r(88).connect,g=r(195).createSelector,b=r(407).compose,h=r(267).setControlProperty,v=r(2140).mapLayoutValuesSelector,O=r(763).widgetBuilderSelector,E=r(2143),w=E.dependenciesSelector,S=E.availableDependenciesSelector,P=r(2120).toggleConnection,T=r(3868),j=b(y(g(w,S,(function(e,t){return u({dependencies:e},t)})),{toggleConnection:P}),T)(r(3869)),A=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){return f.createElement(m,{open:this.props.enabled,size:this.props.dockSize,zIndex:this.props.zIndex,position:this.props.position,bsStyle:"primary",hideHeader:!0,style:u({},this.props.layout,{background:"white"})},f.createElement(j,{enabled:this.props.enabled,onClose:this.props.onClose,typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"map"!==t&&"legend"!==t},shortenChartLabelThreshold:this.props.shortenChartLabelThreshold}))}}])&&i(r.prototype,n),c&&i(r,c),t}(f.Component);p(A,"propTypes",{id:d.string,enabled:d.bool,limitDockHeight:d.bool,fluid:d.bool,zIndex:d.number,dockSize:d.number,position:d.string,onMount:d.func,onUnmount:d.func,onClose:d.func,dimMode:d.string,src:d.string,style:d.object,layout:d.object,shortenChartLabelThreshold:d.number}),p(A,"defaultProps",{id:"widgets-builder-plugin",enabled:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",shortenChartLabelThreshold:1e3,onMount:function(){},onUnmount:function(){},onClose:function(){},layout:{}});var C=y(g(O,(function(e){return v(e,{height:!0})}),(function(e,t){return{enabled:e,layout:t}})),{onMount:function(){return h("widgetBuilder","available",!0)},onUnmount:function(){return h("widgetBuilder","available",!1)},onClose:h.bind(null,"widgetBuilder","enabled",!1,!1)})(A);e.exports={WidgetsBuilderPlugin:C,epics:r(3932)}},3868:function(e,t,r){var n=r(407),o=n.compose,i=n.withProps,a=n.withHandlers,l=r(88).connect,s=r(267).setControlProperty,c=r(2133).openFeatureGrid,u=r(2120).onEditorChange,p=r(2143).returnToFeatureGridSelector;e.exports=o(l((function(e){return{returnToFeatureGrid:p(e)}}),{backToWidgetList:function(){return u("widgetType",void 0)},closeWidgetBuilder:function(){return s("widgetBuilder","enabled",!1,!1)},openFeatureGridTable:function(){return c()}}),a({backFromWizard:function(e){var t=e.backToWidgetList,r=void 0===t?function(){}:t,n=e.closeWidgetBuilder,o=void 0===n?function(){}:n,i=e.openFeatureGridTable,a=void 0===i?function(){}:i,l=e.returnToFeatureGrid;return function(){l?(o(),a()):r()}}}),i((function(e){var t=e.returnToFeatureGrid,r=e.backFromWizard;return{exitButton:{onClick:void 0===r?function(){}:r,glyph:"arrow-left",tooltipId:t?"widgets.builder.wizard.backToFeatureGrid":"widgets.builder.wizard.backToWidgetTypeSelection"}}})))},3869:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(88).connect,l=r(195).createSelector,s=r(407),c=s.compose,u=s.branch,p=s.renderComponent,f=s.withProps,d=l(r(2143).getEditingWidget,(function(e){return{widgetType:e&&e.widgetType}})),m=r(3870),y={chart:r(3872),text:r(3889),table:r(3893),map:r(3898),counter:r(3925),legend:r(3928)};e.exports=c(a(d),f((function(e){var t=e.typeFilter,r=void 0===t?function(){return!0}:t,n=e.availableDependencies,o=void 0===n?[]:n;return{typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e)&&!("legend"===e.type&&0===o.length)}}})),u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return!t}),p(m),(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.onClose,a=void 0===r?function(){}:r,l=o(e,["widgetType","onClose"]),s=y[t];return i.createElement(s,n({},l,{onClose:a,widgetType:t}))}})))()},3870:function(e,t,r){var n=r(1),o=r(2103),i=r(2120).onEditorChange,a=r(88).connect,l=r(2119),s=r(2195),c=a((function(){return{}}),{onSelect:function(e){return i("widgetType",e)}})(r(3871));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,i=void 0===r?function(){}:r,a=e.typeFilter;return n.createElement(l,{className:"bg-body",header:n.createElement(s,{onClose:i},n.createElement(o,{msgId:"widgets.selectWidgetType"}))},t?n.createElement(c,{typeFilter:a}):null)}},3871:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(2103),l=r(2239),s=r(2383),c=[{title:i.createElement(a,{msgId:"widgets.types.chart.title"}),type:"chart",caption:i.createElement(a,{msgId:"widgets.types.chart.caption"}),glyph:"stats",className:"ms-widget-selector-chart"},{title:i.createElement(a,{msgId:"widgets.types.text.title"}),type:"text",glyph:"sheet",caption:i.createElement(a,{msgId:"widgets.types.text.caption"}),className:"ms-widget-selector-text"},{title:i.createElement(a,{msgId:"widgets.types.table.title"}),type:"table",glyph:"features-grid",caption:i.createElement(a,{msgId:"widgets.types.table.caption"}),className:"ms-widget-selector-table"},{title:i.createElement(a,{msgId:"widgets.types.counter.title"}),type:"counter",glyph:"counter",caption:i.createElement(a,{msgId:"widgets.types.counter.caption"}),className:"ms-widget-selector-counter"},{title:i.createElement(a,{msgId:"widgets.types.map.title"}),type:"map",glyph:"1-map",caption:i.createElement(a,{msgId:"widgets.types.map.caption"}),className:"ms-widget-selector-map"},{title:i.createElement(a,{msgId:"widgets.types.legend.title"}),type:"legend",glyph:"list",caption:i.createElement(a,{msgId:"widgets.types.legend.caption"}),className:"ms-widget-selector-legend"}];e.exports=function(e){var t=e.widgetTypes,r=void 0===t?c:t,a=e.typeFilter,u=void 0===a?function(){return!0}:a,p=e.onSelect,f=void 0===p?function(){}:p;return i.createElement(l,{key:"content",onItemClick:function(e){f(e.type)},items:r&&r.filter(u).map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{preview:i.createElement(s,{glyph:e.glyph,padding:20})})}))})}},3872:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(88).connect,l=r(407),s=l.compose,c=l.renameProps,u=l.branch,p=l.renderComponent,f=r(2119),d=r(2120),m=d.insertWidget,y=d.onEditorChange,g=d.setPage,b=d.openFilterEditor,h=d.changeEditorSetting,v=r(2546),O=r(2547),E=r(2548),w=r(2392),S=r(2281),P=r(2319),T=r(2242),j=T.wizardStateToProps,A=T.wizardSelector,C=a(A,{setPage:g,setValid:function(e){return h("valid",e)},onEditorChange:y,insertWidget:m},j)(s(v,c({editorData:"data",onEditorChange:"onChange"}))(r(3875))),x=r(2195),D=s(a(A,{openFilterEditor:b,setPage:g,onChange:y,insertWidget:m},j),E,S(),P((function(e){return 1===e.step})))(r(3882)),_=s(a(A),w,u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),p(O(r(2551)))));e.exports=_((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,a=void 0===r?function(){}:r,l=e.exitButton,s=e.editorData,c=e.toggleConnection,u=e.availableDependencies,p=void 0===u?[]:u,d=e.dependencies,m=o(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return i.createElement("div",{className:"mapstore-chart-advance-options"},i.createElement(f,{header:i.createElement(x,{onClose:a},i.createElement(D,{exitButton:l,editorData:s,toggleConnection:c,availableDependencies:p,onClose:a}))},t?i.createElement(C,n({dependencies:d},m)):null))}))},3873:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(412).FormattedDate,m=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?f.createElement(d,o({value:this.props.value},this.props.dateParams)):f.createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&a(r.prototype,n),u&&a(r,u),t}(f.Component);u(m,"propTypes",{value:p.object,dateParams:p.object}),u(m,"contextTypes",{intl:p.object}),u(m,"defaultProps",{value:new Date}),e.exports=m},3874:function(e,t,r){var n=r(15).Observable,o=r(2240).describeFeatureType,i=r(2851).describeProcess;e.exports=function(e){return n.forkJoin(o({layer:e}),i(e.url,"gs:Aggregate"))}},3875:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(2282).wizardHandlers,a=r(2161)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),l=r(2550)((function(e){var t=e.featureTypeProperties;return 0===(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t;return 0!==r.indexOf("gml:")})).length}))(r(3876)),s=r(2854)(r(2855)),c=r(2320),u=r(2853),p=r(2799),f=r(2529),d=r(2527),m=r(2528),y=r(2385),g=r(2317),b=r(407),h=b.compose,v=b.lifecycle,O=h(f,d,m,p,a,g,y)(r(2386)),E=u(r(2386)),w={width:430,height:200},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},P=i(r(2284)),T=function(e){var t=e.data,r=void 0===t?{}:t,i=e.layer,a=e.dependencies,l=void 0===a?{}:a,s=e.setValid,c=void 0===s?function(){}:s,u=e.shortenChartLabelThreshold;return S(r.options)?o.createElement(O,n({key:"preview-chart",onLoad:function(){return c(!0)},onLoadError:function(){return c(!1)},isAnimationActive:!1,dependencies:l,dependenciesMap:r.dependenciesMap},w,{type:r.type,legend:r.legend,cartesian:r.cartesian,layer:r.layer||i,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,autoColorOptions:r.autoColorOptions,options:r.options,yAxis:r.yAxis,xAxisAngle:r.xAxisAngle,yAxisLabel:r.yAxisLabel,shortenChartLabelThreshold:u})):o.createElement(E,n({key:"sample-chart",isAnimationActive:!1},w,{type:r.type,autoColorOptions:r.autoColorOptions,legend:r.legend,cartesian:r.cartesian,yAxis:r.yAxis,shortenChartLabelThreshold:u}))},j=h(v({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o;n&&!S(r.options)&&i(!1)}}));e.exports=j((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,i=void 0===n?function(){}:n,a=e.setPage,u=void 0===a?function(){}:a,p=e.setValid,f=void 0===p?function(){}:p,d=e.data,m=void 0===d?{}:d,y=e.layer,g=void 0===y?{}:y,b=e.step,h=void 0===b?0:b,v=e.types,O=e.featureTypeProperties,E=e.dependencies,w=e.shortenChartLabelThreshold;return o.createElement(P,{step:h,setPage:u,onFinish:i,isStepValid:function(e){return 0===e?m.chartType:1!==e||S(m.options)},hideButtons:!0},o.createElement(l,{key:"type",featureTypeProperties:O,type:m.type,onSelect:function(e){r("type",e)}}),o.createElement(s,{dependencies:E,key:"chart-options",featureTypeProperties:O,types:v,data:m,onChange:r,layer:m.layer||g,sampleChart:T({data:m,layer:m.layer||g,dependencies:E,setValid:function(e){return f(e&&S(m.options))},shortenChartLabelThreshold:w})}),o.createElement(c,{key:"widget-options",data:m,onChange:r,layer:m.layer||g,sampleChart:T({data:m,layer:m.layer||g,dependencies:E,setValid:function(e){return f(e&&S(m.options))},shortenChartLabelThreshold:w})}))}))},3876:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(1),s=r(407).shouldUpdate,c=r(2239),u=r(2103),p=r(2853)(r(2386)),f=r(758).Row,d={legend:!1,tooltip:!1,cartesian:!1,width:100,height:100,popup:!1},m=r(2283),y=[{type:"bar"},{type:"pie"},{type:"line"}].map((function(e){var t=e.type;return{type:t,title:l.createElement(u,{msgId:"widgets.chartType.".concat(t,".title")}),description:l.createElement(u,{msgId:"widgets.chartType.".concat(t,".description")}),caption:l.createElement(u,{msgId:"widgets.chartType.".concat(t,".caption")})}}));e.exports=s((function(e,t){var r=e.types,n=e.type,o=t.types;return n!==t.type&&r!==o}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelect,r=void 0===t?function(){}:t,o=e.onNextPage,a=void 0===o?function(){}:o,s=e.types,g=void 0===s?y:s,b=e.type;return l.createElement(f,null,l.createElement(m,{key:"title",title:l.createElement(u,{msgId:"widgets.selectChartType.title"})}),l.createElement(c,{key:"content",onItemClick:function(e){r(e.type),a()},items:g&&y.map((function(e){return i({},e,{selected:e.type===b,preview:l.createElement(p,n({},d,{type:e.type,autoColorOptions:e.type===b?{base:0,s:0,v:0}:void 0}))})}))}))}))},3877:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(0),b=r(2224),h=r(3878),v=r(2177).DropdownList,O=r(13).head,E=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"getValue",(function(){return O(r.getItems().filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===r.props.value||e.name===(r.props.value&&r.props.value.name)})))})),m(f(r),"getItems",(function(){return r.props.items.map((function(e){var t=e.options,n=void 0===t?{}:t,o=l(e,["options"]);return a({},o,{options:n,ramp:r.props.rampFunction?r.props.rampFunction(o,n):(b.sameToneRangeColors(n.base,n.range,r.props.samples+1,n.options)||["#AAA"]).splice(1)})}))})),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.getItems();return y.createElement(v,{className:"color-range-selector",data:t,disabled:this.props.disabled,valueComponent:function(e){return y.createElement(h,o({},e,{data:t}))},itemComponent:h,value:this.getValue(),onChange:function(t){e.props.onChange(t)}})}}])&&c(r.prototype,n),i&&c(r,i),t}(y.Component);m(E,"propTypes",{value:g.oneOfType([g.string,g.object]),samples:g.number,onChange:g.func,items:g.array,rampFunction:g.func,disabled:g.bool}),m(E,"contextTypes",{messages:g.object}),m(E,"defaultProps",{samples:5,onChange:function(){},items:[{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4,s:1,v:.5}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}},{name:"global.colors.random",schema:"qualitative",options:{base:190,range:340,options:{base:10,range:360,s:.67,v:.67}}}],disabled:!1}),e.exports=E},3878:function(e,t,r){var n=r(1),o=r(0),i=r(3879),a=r(2103),l=function(e){var t=e.item,r=t&&(t.ramp||i[t.name]&&i[t.name][5])||[];return n.createElement("div",{className:"color-ramp-item"},r.map((function(e){return n.createElement("div",{className:"color-cell",key:t&&t.name+"-"+e,style:{backgroundColor:e}})})),n.createElement("div",{className:"colorname-cell"},t&&(t.label||t.name)?n.createElement(a,{msgId:t.label||t.name,msgParams:{number:r.length}}):t))};l.propTypes={item:o.oneOfType([o.string,o.object])},e.exports=l},3879:function(e,t,r){var n=r(26);e.exports=n({},r(3880),{Earth:{3:["#3e2f8d","#d3e1b2","#f1e8dd"],4:["#3e2f8d","#a4cef4","#676c52","#f1e8dd"],5:["#3e2f8d","#87b2f1","#d3e1b2","#615742","#f1e8dd"],6:["#3e2f8d","#739cd3","#cbe1da","#8e9f79","#7e6d4f","#f1e8dd"],7:["#3e2f8d","#6a8dc7","#a4cef4","#d3e1b2","#676c52","#89795d","#f1e8dd"],8:["#3e2f8d","#6783c7","#94c0fb","#e1e9ca","#a3b990","#524d3d","#908169","#f1e8dd"],9:["#3e2f8d","#657bc7","#87b2f1","#b9dae8","#d3e1b2","#7b8965","#615742","#948671","#f1e8dd"],10:["#3e2f8d","#6375c7","#7ca6e0","#a4cef4","#eceec1","#afc79c","#676c52","#716349","#988b78","#f1e8dd"],11:["#3e2f8d","#6271c7","#739cd3","#99c4f9","#cbe1da","#d3e1b2","#8e9f79","#585743","#7e6d4f","#9b8f7e","#f1e8dd"],12:["#3e2f8d","#616dc7","#6c93c7","#8fbcfe","#aed6f1","#f1f0be","#bbd5a9","#788562","#504a3b","#847252","#9b8f7e","#f1e8dd"]},Land:{3:["#c3e2df","#2f412c","#e7e9dd"],4:["#c3e2df","#5d7a65","#3f3633","#e7e9dd"],5:["#c3e2df","#868f65","#2f412c","#5c4e4b","#e7e9dd"],6:["#c3e2df","#979f72","#446553","#302f26","#6e5d56","#e7e9dd"],7:["#c3e2df","#a5ac7d","#5d7a65","#2f412c","#3f3633","#7b695a","#e7e9dd"],8:["#c3e2df","#b0b788","#768562","#3c5a46","#2d3123","#4f4342","#84715c","#e7e9dd"],9:["#c3e2df","#b8c091","#868f65","#4b6e5f","#2f412c","#322d28","#5c4e4b","#8c775d","#e7e9dd"],10:["#c3e2df","#bfc697","#8f986c","#5d7a65","#37553e","#2b3221","#3f3633","#665651","#917c5e","#e7e9dd"],11:["#c3e2df","#c4cc9d","#979f72","#6f8263","#446553","#2f412c","#302f26","#4a3f3d","#6e5d56","#96805f","#e7e9dd"],12:["#c3e2df","#c8d0a1","#9ea576","#7d8861","#4e7265","#35513a","#2a3320","#352e2a","#534745","#756359","#9d896a","#e7e9dd"]},Water:{3:["#1f373d","#4cc1b2","#dee2b6"],4:["#1f373d","#309590","#85dfce","#dee2b6"],5:["#1f373d","#2a8180","#4cc1b2","#a1f3dc","#dee2b6"],6:["#1f373d","#2f6f79","#30a8a2","#76d1c6","#c1fdf6","#dee2b6"],7:["#1f373d","#306573","#309590","#4cc1b2","#85dfce","#c8f3dc","#dee2b6"],8:["#1f373d","#305f6b","#2a8b86","#2fb2aa","#6eccbd","#8deccd","#c8e6bb","#dee2b6"],9:["#1f373d","#2f5b66","#2a8180","#32a09a","#4cc1b2","#7dd5ce","#a1f3dc","#c8dda3","#dee2b6"],10:["#1f373d","#2f5862","#2d777c","#309590","#2eb8af","#69cab8","#85dfce","#b3f8eb","#c8d690","#dee2b6"],11:["#1f373d","#2f555f","#2f6f79","#2c8e89","#30a8a2","#4cc1b2","#76d1c6","#8ae8cd","#c1fdf6","#c8d181","#dee2b6"],12:["#1f373d","#2f535c","#306977","#298883","#329c97","#30bab1","#66c8b4","#80d7cf","#92efd0","#c8faf0","#cad285","#dee2b6"]},CDA:{3:["#18c6ca","#fed873","#ffffff"],4:["#18c6ca","#fffbc3","#e3ce9b","#ffffff"],5:["#18c6ca","#e9feb4","#fed873","#d0c6b0","#ffffff"],6:["#18c6ca","#cffea9","#fef5af","#efd28b","#c8c2b6","#ffffff"],7:["#18c6ca","#bafea1","#fffbc3","#fed873","#e3ce9b","#ccc8c1","#ffffff"],8:["#18c6ca","#affe9d","#f0feb8","#fef3a8","#f3d486","#d8c9a8","#d3d0ca","#ffffff"],9:["#18c6ca","#affe9d","#e9feb4","#fef7b5","#fed873","#e7cf96","#d0c6b0","#dad8d2","#ffffff"],10:["#18c6ca","#a3fe9a","#d8feac","#fffbc3","#feee9b","#f7d580","#e3ce9b","#ccc4b3","#dad8d2","#ffffff"],11:["#18c6ca","#97fe96","#cffea9","#f7febb","#fef5af","#fed873","#efd28b","#dccaa4","#c8c2b6","#e1dfdb","#ffffff"],12:["#18c6ca","#97fe96","#c5fea5","#f0feb8","#fef9bc","#feee9b","#f7d580","#e7cf96","#d8c9a8","#c4c1b9","#e1dfdb","#ffffff"]},Simple:{3:["#000000","#7fff00","#bf7f3f"],4:["#000000","#38ff38","#ffd400","#bf7f3f"],5:["#000000","#7fff7f","#7fff00","#ff9f00","#bf7f3f"],6:["#000000","#aaffaa","#00ff00","#ffff00","#ff7f00","#bf7f3f"],7:["#000000","#8dd48d","#38ff38","#7fff00","#ffd400","#f47f0a","#bf7f3f"]}})},3882:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTypeSelection";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},l=function(e){switch(e){case 0:return"widgets.builder.wizard.configureChartOptions";case 1:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,c=e.editorData,u=void 0===c?{}:c,p=e.valid,f=e.setPage,d=void 0===f?function(){}:f,m=e.onFinish,y=void 0===m?function(){}:m,g=e.stepButtons,b=void 0===g?[]:g,h=e.openFilterEditor,v=void 0===h?function(){}:h;return o.createElement(i,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return d(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:a(r)}].concat(n(b),[{visible:r>0,onClick:v,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return d(Math.min(r+1,2))},visible:!(1!==r),disabled:1===r&&!p,glyph:"arrow-right",tooltipId:l(r)},{onClick:function(){return y(Math.min(r+1,1))},visible:2===r,glyph:"floppy-disk",tooltipId:s(r,u)}])})}},3883:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.selected,a=e.stepButtons,l=void 0===a?[]:a,s=e.onProceed,c=void 0===s?function(){}:s;return o.createElement(i,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[].concat(n(l),[{onClick:c,disabled:!t,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",visible:r,glyph:"arrow-right"}])})}},3884:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(407),l=a.compose,s=a.mapPropsStream,c=r(13).isNil,u=r(2103),p=r(15),f={csw:r(2358),wms:r(769),wmts:r(2359),backgrounds:r(2360)},d=r(2119),m=r(2262),y=r(2857),g=r(2161),b=r(2138),h=r(2552),v=r(3887),O=r(2308).getCatalogRecords,E=r(2383),w=i.createElement(E,{glyph:"geoserver",padding:20}),S=l(g((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),b((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:i.createElement(u,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(r(2239)),P=function(e){var t=e.records,r=e.result,n=void 0===r?{}:r;return{items:(t||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title,caption:e.identifier,description:e.description,preview:e.thumbnail?i.createElement("img",{src:"thumbnail"}):w,record:e}})),total:n&&n.numberOfRecordsMatched}},T={querySelector:".ms2-border-layout-body",pageSize:10};e.exports=l(h("searchText","setSearchText",""),y({loadPage:function(e){var t=e.text,r=e.catalog,n=void 0===r?{}:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p.Observable.fromPromise(f[n.type].textSearch(n.url,10*o+("csw"===n.type?1:0),10,t)).map((function(e){return{result:e,records:O(n.type,e||[],{url:n&&n.url})}})).map(P)},scrollSpyOptions:T}),s((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.catalog,n=t.loadFirst,o=void 0===n?function(){}:n;return e.debounceTime(500).startWith({searchText:"",catalog:r}).distinctUntilKeyChanged("searchText").do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.catalog;return o({text:t,catalog:r})})).ignoreElements()})))})))((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,a=e.selected,l=e.onRecordSelected,s=e.loading,p=e.searchText,f=e.items,y=void 0===f?[]:f,g=e.total,b=e.catalog,h=e.services,O=e.title,E=e.showCatalogSelector;return i.createElement(d,{className:"compat-catalog",header:i.createElement(v,{services:h||[b],showCatalogSelector:E,title:O,searchText:p,onSearchTextChange:r}),footer:i.createElement("div",{className:"catalog-footer"},i.createElement("span",null,s?i.createElement(m,null):null),c(g)?null:i.createElement("span",{className:"res-info"},i.createElement(u,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:y.length,total:g}})))},i.createElement(S,{items:y.map((function(e){return e===a||a&&e&&e.record&&a.identifier===e.record.identifier?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{selected:!0}):e})),loading:s,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.record;return l(t,b)}}))}))},3885:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}var u=r(407),p=u.mapPropsStream,f=u.createEventHandler,d=r(15),m=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.dataProp,u=void 0===i?"items":i,p=n.throttleTime,f=void 0===p?500:p;return e.switchMap((function(e){return r(e,0).startWith({loading:!0}).concat(d.Observable.of({loading:!1})).concat(t.throttleTime(f).distinct().exhaustMap((function(t){return r(e,t).startWith({loading:!0}).concat(d.Observable.of({loading:!1}))}))).scan((function(e,t){var r=e[u],n=s(e,[u].map(c)),i=t[u],p=s(t,[u].map(c));return a(l({},u,i?[].concat(o(r||[]),o(i)):r||[]),n,{},p)})).map((function(e){return a({},e)}))})).catch((function(e){return d.Observable.of({loading:!1,error:e})}))};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return d.Observable.empty()};return p((function(t){var r=f(),n=r.handler,o=r.stream,i=f(),l=i.handler,s=i.stream;return t.combineLatest(m(s,o,e).startWith({}),(function(e,t){return a({},e,{},t,{onLoadMore:n,loadFirst:l})}))}))}},3886:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(0),y=r(33);r(15),e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataProp,r=void 0===t?"items":t,n=e.querySelector,i=e.closest,p=void 0!==i&&i,g=e.loadingProp,b=void 0===g?"loading":g,h=e.skip,v=void 0===h?0:h,O=e.pageSize,E=void 0===O?10:O,w=e.offsetSize,S=void 0===w?200:w;return function(e){var t,i;return i=t=function(t){function i(){var e,t;o(this,i);for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return f(c(t=l(this,(e=s(i)).call.apply(e,[this].concat(u)))),"findScrollDomNode",(function(){if(!t.isMounded)return null;var e=y.findDOMNode(c(t));return e&&p&&n?e.closest(n||"*"):e&&(n?e.querySelector(n):e)})),f(c(t),"onScroll",(function(){var e=t.findScrollDomNode();e&&t.props.isScrolled({div:e,offset:S})&&(!r||t.props[r]&&t.props[r].length)&&(!b||!t.props[b])&&t.props.hasMore(t.props)&&t.props.onLoadMore(r?Math.ceil((t.props[r].length-v)/E):null)})),t}return u(i,t),a(i,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findScrollDomNode();e&&(e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}},{key:"componentDidUpdate",value:function(e){var t=this;!this.findScrollDomNode()||r&&this.props[r]&&this.props[r]===e[r]||setTimeout((function(){return t.onScroll()}),300)}},{key:"componentWillUnmount",value:function(){this.isMounded=!1;var e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){return d.createElement(e,this.props)}}]),i}(d.Component),f(t,"propTypes",{hasMore:m.func,onLoadMore:m.func,isScrolled:m.func}),f(t,"defaultProps",{onLoadMore:function(){},hasMore:function(){return!0},isScrolled:function(e){var t=e.div,r=e.offset;return t.scrollTop+t.clientHeight>=t.scrollHeight-r}}),i}}},3887:function(e,t,r){var n=r(1),o=r(758),i=o.Col,a=o.FormGroup,l=o.FormControl,s=o.Grid,c=o.Row,u=r(2103),p=r(3888),f=r(2214)("placeholder")(l);e.exports=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,o=e.searchText,l=e.title,d=void 0===l?n.createElement(u,{msgId:"catalog.title"}):l,m=e.catalog,y=e.services,g=e.isValidServiceSelected,b=e.showCatalogSelector;return n.createElement(s,{className:"catalog-form",fluid:!0},n.createElement(c,null,n.createElement(i,{xs:12},n.createElement("h4",{className:"text-center"},d),b?n.createElement(a,null,n.createElement(p,{servieces:y,catalog:m,isValidServiceSelected:g})):null,n.createElement(a,{controlId:"catalog-form"},n.createElement(f,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:o,onChange:function(e){return r(e.currentTarget.value)}})))))}},3888:function(e,t,r){var n=r(1),o=r(758),i=o.InputGroup,a=o.Glyphicon,l=r(2214)(["placeholder","clearValueText","noResultsText"])(r(2162));e.exports=function(e){var t=e.isValidServiceSelected,r=e.services,o=e.selectedService,s=e.onChangeCatalogMode,c=void 0===s?function(){}:s,u=e.onChangeSelectedService,p=void 0===u?function(){}:u;return n.createElement(i,null,n.createElement(l,{clearValueText:"catalog.clearValueText",noResultsText:"catalog.noResultsText",clearable:!0,options:r,value:o,onChange:function(e){return p(e&&e.value?e.value:"")},placeholder:"catalog.servicePlaceholder"}),t?n.createElement(i.Addon,{className:"btn",onClick:function(){return c("edit",!1)}},n.createElement(a,{glyph:"pencil"})):null,n.createElement(i.Addon,{className:"btn",onClick:function(){return c("edit",!0)}},n.createElement(a,{glyph:"plus"})))}},3889:function(e,t,r){var n=r(1),o=r(88).connect,i=r(407),a=i.compose,l=i.withProps,s=r(2120),c=s.onEditorChange,u=s.insertWidget,p=s.setPage,f=r(2242),d=f.wizardSelector,m=f.wizardStateToProps,y=r(2119),g=r(2281),b=r(2195),h=a(o(d,{setPage:p,insertWidget:u,onResetChange:c},m),l((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),g())(r(3890)),v=o(d,{onChange:c},m)(r(3891));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,o=void 0===r?function(){}:r;return n.createElement(y,{header:n.createElement(b,{onClose:o},n.createElement(h,null))},t?n.createElement(v,null):null)}},3890:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,l=e.editorData,s=void 0===l?{}:l,c=e.stepButtons,u=void 0===c?[]:c,p=e.onFinish,f=void 0===p?function(){}:p;return o.createElement(i,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(n(u),[{onClick:function(){return f(Math.min(r+1,1))},visible:0===r,glyph:"floppy-disk",tooltipId:a(r,s)}])})}},3891:function(e,t,r){var n=r(1),o=r(2282).wizardHandlers,i=r(3892),a=o(r(2284));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,o=e.onFinish,l=void 0===o?function(){}:o,s=e.setPage,c=void 0===s?function(){}:s,u=e.step,p=void 0===u?0:u,f=e.editorData,d=void 0===f?{}:f;return n.createElement(a,{step:p,setPage:c,onFinish:l,hideButtons:!0},n.createElement(i,{key:"widget-options",data:d,onChange:r}))}},3892:function(e,t,r){var n=r(1),o=r(758),i=o.Col,a=o.Form,l=o.FormGroup,s=o.FormControl,c=r(2214),u=c("placeholder")(s),p=r(2517),f=c("placeholder")(p);e.exports=function(e){var t=e.data,r=void 0===t?{}:t,o=e.onChange,s=void 0===o?function(){}:o;return n.createElement("div",null,n.createElement(i,{key:"form",xs:12},n.createElement(a,null,n.createElement(l,{controlId:"title"},n.createElement(i,{sm:12},n.createElement(u,{style:{marginBottom:10},placeholder:"widgets.builder.wizard.titlePlaceholder",value:r.title,type:"text",onChange:function(e){return s("title",e.target.value)}}))))),n.createElement(f,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},placeholder:"widgets.builder.wizard.textPlaceholder",value:r&&r.text||"",onChange:function(e){return s("text",e)}}))}},3893:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(88).connect,l=r(13).get,s=r(765).isGeometryType,c=r(407),u=c.compose,p=c.renameProps,f=c.branch,d=c.renderComponent,m=c.mapPropsStream,y=r(2265),g=r(2103),b=r(2119),h=r(2120),v=h.insertWidget,O=h.onEditorChange,E=h.setPage,w=h.openFilterEditor,S=h.changeEditorSetting,P=r(2546),T=r(2547),j=r(2548),A=r(2392),C=r(2281),x=r(2319),D=r(2242),_=D.wizardStateToProps,I=D.wizardSelector,F=a(I,{setPage:E,setValid:function(e){return S("valid",e)},onEditorChange:O,insertWidget:v},_)(u(P,p({editorData:"data",onEditorChange:"onChange"}),m((function(e){return e.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.featureTypeProperties;return t===n})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.data,a=void 0===i?{}:i;o&&r.length>0&&!l(a,"options.propertyName")&&o("options.propertyName",r.filter((function(e){return!s(e)})).map((function(e){return e.name})))})).ignoreElements())})))(r(3894))),k=r(2195),L=u(a(I,{openFilterEditor:w,setPage:E,onChange:O,insertWidget:v},_),j,C(),x((function(e){return 0===e.step})))(r(3897)),R=u(a(I),A,f((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),d(T(r(2551)))));e.exports=R((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,a=void 0===r?function(){}:r,s=e.editorData,c=void 0===s?{}:s,u=e.exitButton,p=e.toggleConnection,f=e.availableDependencies,d=void 0===f?[]:f,m=e.dependencies,h=o(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return i.createElement(b,{header:i.createElement(k,{onClose:a},i.createElement(L,{editorData:c,exitButton:u,toggleConnection:p,availableDependencies:d,onClose:a}),0===l(c,"options.propertyName.length")?i.createElement(y,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:i.createElement(g,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?i.createElement(F,n({editorData:c,dependencies:m},h)):null)}))},3894:function(e,t,r){var n=r(1),o=r(2282).wizardHandlers,i=r(3895),a=r(2320),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},s=o(r(2284)),c=r(407),u=(0,c.compose)((0,c.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o;n&&!l(r.options)&&i(!1)}}));e.exports=u((function(e){var t=e.onChange,r=void 0===t?function(){}:t,o=e.onFinish,c=void 0===o?function(){}:o,u=e.setPage,p=void 0===u?function(){}:u,f=e.data,d=void 0===f?{}:f,m=e.layer,y=void 0===m?{}:m,g=e.step,b=void 0===g?0:g,h=e.types,v=e.featureTypeProperties,O=e.dependencies;return n.createElement(s,{step:b,setPage:p,onFinish:c,isStepValid:function(e){return 1!==e||l(d.options)},hideButtons:!0},n.createElement(i,{dependencies:O,key:"chart-options",featureTypeProperties:v,types:h,data:d,onChange:r,layer:d.layer||y}),n.createElement(a,{key:"widget-options",data:d,onChange:r,layer:d.layer||y}))}))},3895:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=r(1),s=r(765).isGeometryType,c=r(13),u=c.uniq,p=c.castArray,f=c.includes,d=r(758),m=d.Row,y=d.Col,g=d.Form,b=d.Button,h=r(2103),v=r(2283),O=r(2550),E=r(407),w=E.withProps,S=E.withHandlers,P=E.compose,T=P(w((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=void 0===t?[]:t,n=e.options,i=void 0===n?{}:n;return{attributes:r.filter((function(e){return!s(e)})).map((function(e){return o({},e,{label:e.name,attribute:e.name,hide:i.propertyName&&i.propertyName.indexOf(e.name)<0})}))}})),O((function(e){var t=e.attributes;return 0===(void 0===t?[]:t).length})),S({onChange:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.options,o=void 0===n?{}:n;return function(e,t){return r("options.propertyName",function(e,t,r){var n=p(t);return r?e.filter((function(e){return!f(n,e)})):u([].concat(a(e),a(n)))}(o&&o.propertyName||[],e,t))}}}))(r(3896));e.exports=function(e){var t=e.data,r=void 0===t?{options:{}}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.featureTypeProperties,a=e.sampleChart;return l.createElement(m,null,l.createElement(v,{title:l.createElement(h,{msgId:"widgets.builder.wizard.configureTableOptions"})}),l.createElement(y,{xs:12},l.createElement("div",null,a)),l.createElement(y,{xs:12},l.createElement(g,{className:"chart-options-form",horizontal:!0},l.createElement(T,{options:r.options,onChange:o,attributes:i}),r.options&&r.options.columnSettings?l.createElement(b,{style:{float:"right"},onClick:function(){return o("options.columnSettings",void 0)}},l.createElement(h,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))}},3896:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2388),a=r(2103);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,l=e.titleMsg,s=void 0===l?"featuregrid.columns":l,c=e.onChange,u=void 0===c?function(){}:c,p=e.attributes,f=void 0===p?[]:p;return o.createElement("div",{className:"bg-body data-attribute-selector",style:r},o.createElement("h4",{className:"text-center"},o.createElement("strong",null,o.createElement(a,{msgId:s}))),o.createElement(i,{rowKey:"id",columns:[{name:"",key:"attribute"}],rowGetter:function(e){return f[e]},rowsCount:f.length,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:function(e){return u(e.map((function(e){return f[e.rowIdx].name})),!1)},onRowsDeselected:function(e){return u(e.map((function(e){return f[e.rowIdx].name})),!0)},selectBy:{indexes:f.reduce((function(e,t,r){return[].concat(n(e),n(t.hide?[]:[r]))}),[])}}}))}},3897:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=function(e){return e&&e.options&&e.options.propertyName&&0!==e.options.propertyName.length},l=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTableOptions";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},s=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":"widgets.builder.errors.checkAtLeastOneAttribute"},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,u=e.step,p=void 0===u?0:u,f=e.stepButtons,d=void 0===f?[]:f,m=e.editorData,y=void 0===m?{}:m,g=e.setPage,b=void 0===g?function(){}:g,h=e.onFinish,v=void 0===h?function(){}:h;return o.createElement(i,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return b(Math.max(0,p-1))},visible:p>0,glyph:"arrow-left",tooltipId:l(p)}].concat(n(d),[{visible:p>=0,onClick:r,disabled:!a(y),glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return b(Math.min(p+1,2))},visible:0===p,disabled:0===p&&!a(y),glyph:"arrow-right",tooltipId:s(0,a(y))},{onClick:function(){return v(Math.min(p+1,1))},visible:1===p,glyph:"floppy-disk",tooltipId:c(p,y)}])})}},3898:function(e,t,r){var n=r(1),o=r(88).connect,i=r(2120).onEditorChange,a=r(2242),l=a.wizardSelector,s=a.wizardStateToProps,c=r(2852),u=r(2858),p=r(3899),f=r(2859),d=r(3903),m=r(2119),y=r(2195),g=r(407),b=g.compose,h=g.branch,v=g.renderComponent,O=g.withState,E=g.withHandlers,w=g.withProps,S=r(3904),P=p(r(3905)),T=r(3906),j=b(o(l,{onResetChange:i}),h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editorData,r=void 0===t?{}:t;return!r.map}),v(T)),O("layerSelectorOpen","toggleLayerSelector",!1),h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerSelectorOpen,r=void 0!==t&&t;return r}),v(b(u,E({onLayerChoice:function(e){var t=e.toggleLayerSelector,r=void 0===t?function(){}:t,n=e.addLayer,o=void 0===n?function(){}:n;return function(e){o(e),r(!1)}}}),c)(r(3911)))),w((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",onClick:function(){r("map",void 0)}}}}))),A=o(l,{onChange:i},s)(r(3912)),C=b(j,w((function(e){var t=e.editorData;return{map:(void 0===t?{}:t).map}})),d,S,f);e.exports=C((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,o=void 0===r?function(){}:r,i=e.toggleLayerSelector,a=void 0===i?function(){}:i,l=e.editorData,s=void 0===l?{}:l,c=e.editNode,u=e.setEditNode,p=e.closeNodeEditor,f=e.selectedGroups,d=void 0===f?[]:f,g=e.exitButton,b=e.selectedLayers,h=void 0===b?[]:b,v=e.selectedNodes,O=e.onNodeSelect,E=void 0===O?function(){}:O,w=e.availableDependencies,S=void 0===w?[]:w,T=e.toggleConnection,j=void 0===T?function(){}:T;return n.createElement(m,{className:"map-selector",header:n.createElement(y,{onClose:o},n.createElement(P,{exitButton:g,editorData:s,availableDependencies:S,toggleConnection:j,selectedNodes:v,selectedLayers:h,selectedGroups:d,onNodeSelect:E,toggleLayerSelector:a}))},t?n.createElement(A,{setEditNode:u,editNode:c,closeNodeEditor:p,onNodeSelect:E,selectedNodes:v}):null)}))},3899:function(e,t,r){var n=r(407),o=n.compose,i=n.branch,a=n.withProps,l=r(88).connect,s=r(2120),c=s.insertWidget,u=s.setPage,p=s.onEditorChange,f=r(2858),d=r(2859),m=r(3900),y=r(3901).default,g=r(2242),b=g.wizardSelector,h=g.wizardStateToProps,v=r(3902),O=r(2319),E=r(2281);e.exports=o(l(b,{setPage:u,onChange:p,insertWidget:c},h),f,d,m,y,i((function(e){return!!e.editNode}),a((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.setEditNode,o=void 0===n?function(){}:n;return{buttons:[{visible:1===r.length,tooltipId:"close",glyph:"1-close",onClick:function(){return o(!1)}}]}})),a((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.epsgSupported,o=void 0!==n&&n,i=e.onRemoveSelected,a=void 0===i?function(){}:i,l=e.setEditNode,s=void 0===l?function(){}:l,c=e.zoomTo,u=void 0===c?function(){}:c;return{tocButtons:[{visible:r.length>0,glyph:"zoom-to",tooltipId:1===r.length?"toc.toolZoomToLayerTooltip":"toc.toolZoomToLayersTooltip",disabled:!o,onClick:o?function(){return u(r)}:function(){}},{visible:1===r.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){return s(r[0])}},{onClick:function(){return a()},visible:r.length>0,glyph:"trash",tooltipId:"toc.toolTrashLayerTooltip"}]}}))),v,E(void 0,{tooltipId:"widgets.builder.wizard.backToMapSelection"}),O((function(e){return 0===e.step})))},3900:function(e,t,r){var n=(0,r(407).withHandlers)({onRemoveSelected:function(e){var t=e.selectedLayers,r=void 0===t?[]:t,n=e.removeLayersById,o=void 0===n?function(){}:n,i=e.onNodeSelect,a=void 0===i?function(){}:i;return function(){o(r),r.forEach((function(e){return a(e,"layer",!1)}))}}});e.exports=n},3901:function(e,t,r){"use strict";r.r(t);var n=r(407),o=r(88),i=r(13),a=r(274),l=r.n(a),s=r(80),c=r.n(s),u=r(196),p=r.n(u),f=r(2120);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=Object(n.compose)(Object(o.connect)((function(){return{}}),{setMap:function(e){return Object(f.onEditorChange)("map",e)}}),Object(n.withHandlers)({isEpsgSupported:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.selectedNodes,o=void 0===n?[]:n;return function(){var e=r.map.layers,t=o.map((function(t){return e.find((function(e){return e.id===t}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),n=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"},a=!!Object(i.head)(t)&&"differentCRS"!==n.crs&&n.crs;return a&&l.a.defs(a)}},zoomTo:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.setMap,o=void 0===n?function(){}:n;return function(e){var t=r.map,n=r.map.layers,a=e.map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),l=a.length>1?a.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),a[0]):a[0],s=0,u=function(e){if(Object(i.isArray)(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if(Object(i.isObject)(e)){var t=Object(i.mapValues)(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(l.bounds),f=c.a.reprojectBbox(u,l.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(f){var d=c.a.reproject(p.a.getCenterForExtent(u,l.crs),l.crs,"EPSG:4326");if("EPSG:4326"===l.crs&&u&&u[0]<=-180&&u[1]<=-90&&u[2]>=180&&u[3]>=90)s=1;else{var y=c.a.reprojectBbox(u,l.crs,t.projection||"EPSG:4326");s=p.a.getZoomForExtent(y,t.size,0,21,null)}var g={minx:f[0],miny:f[1],maxx:f[2],maxy:f[3]},b=m({},t.bbox,{bounds:g});o(m({},r.map,{center:d,zoom:s,bbox:b,mapStateSource:"tool"}))}}}}),Object(n.withProps)((function(e){var t=e.isEpsgSupported;return{epsgSupported:(void 0===t?function(){}:t)()}})));t.default=g},3902:function(e,t,r){var n=r(407),o=n.withProps,i=n.compose,a=r(2549);e.exports=i(o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),o((function(e){var t=e.editorData;return{canConnect:!0,connected:!!(void 0===t?{}:t).mapSync}})),a({center:"center",zoom:"zoom",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"}))},3903:function(e,t,r){var n=r(2143).isWidgetSelectionActive,o=r(2362),i=r(88).connect,a=r(195).createSelector,l=r(407).compose,s=r(1),c=r(2103);e.exports=l(i(a(n,(function(e){return{widgetSelectionActive:e}}))),o((function(e){return e.widgetSelectionActive}),(function(){return s.createElement("div",{style:{margin:"auto"}},s.createElement(c,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}))},3904:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.withProps,a=o.compose,l=o.withStateHandlers,s=r(13).findIndex,c=function(e,t){return(t.layers||[]).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.group,n=void 0===r?"Default":r;return n===e})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t}))};e.exports=a(l((function(){return{selectedLayers:[],selectedGroups:[]}}),{onNodeSelect:function(e,t){var r=e.selectedLayers,o=void 0===r?[]:r,i=e.selectedGroups,a=void 0===i?[]:i,l=t.map,u=void 0===l?{}:l;return function(e,t,r){return{selectedLayers:"group"===t?s(a,(function(t){return t===e}))>=0?o.filter((function(t){return s(c(e,u),(function(e){return e===t}))<0})):r?[].concat(n(o),n(c(e,u))):n(c(e,u)):s(o,(function(t){return t===e}))>=0?o.filter((function(t){return t!==e})):r?[].concat(n(o),[e]):[e],selectedGroups:"group"===t?s(a,(function(t){return t===e}))>=0?a.filter((function(t){return t!==e})):r?[].concat(n(a),[e]):[e]:r?a:[]}}}}),i((function(e){var t=e.selectedLayers,r=e.selectedGroups;return{selectedNodes:[].concat(n(t),n(r))}})))},3905:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,l=e.buttons,s=e.tocButtons,c=void 0===s?[]:s,u=e.stepButtons,p=void 0===u?[]:u,f=e.editorData,d=void 0===f?{}:f,m=e.setPage,y=void 0===m?function(){}:m,g=e.onFinish,b=void 0===g?function(){}:g,h=e.toggleLayerSelector,v=void 0===h?function(){}:h;return o.createElement(i,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:l||[].concat(n(0===r?c:[]),[{onClick:function(){return y(Math.max(r-1,0))},visible:1===r,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.configureMapOptions"}],n(p),[{onClick:function(){return v(!0)},visible:0===r,glyph:"plus",tooltipId:"widgets.builder.wizard.addLayer"},{onClick:function(){return y(Math.min(r+1,2))},visible:0===r,glyph:"arrow-right",tooltipId:"widgets.builder.wizard.configureWidgetOptions"},{onClick:function(){return b(Math.min(r+1,1))},visible:1===r,glyph:"floppy-disk",tooltipId:a(r,d)}])})}},3906:function(e,t,r){var n=r(407),o=n.compose,i=n.withProps,a=r(88).connect,l=r(2120).onEditorChange,s=r(137).normalizeMap,c=r(4289).default;e.exports=o(a((function(){return{}}),{onMapSelected:function(e){var t=e.map;return l("map",s(t))},onResetChange:l}),i((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("map",void 0),r("widgetType",void 0)}}]}})))(c)},3907:function(e,t,r){var n=r(407).compose,o=r(3908),i=o.withSearchTextState,a=o.withEmptyMapVirtualScroll,l=o.searchOnTextChange;e.exports=n(i,a,l)},3908:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s,c,u,p,f=r(1),d=r(15),m=r(407),y=m.compose,g=m.withProps,b=m.mapPropsStream,h=r(13).castArray,v=r(2103),O=r(280).getResources,E=r(2383),w=r(2552),S=r(2857),P=f.createElement(E,{glyph:"geoserver",padding:20}),T=function(e){var t=e.results,r=e.totalCount;return{items:(""!==t&&h(t)||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,title:e.name,description:e.description,preview:e.thumbnail?f.createElement("img",{src:decodeURIComponent(e.thumbnail)}):P,map:e}})),total:r}},j=function(e){var t=e.text,r=void 0===t?"*":t,n=e.options,o=void 0===n?{}:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O({category:"MAP",query:r,options:a({params:{start:10*i,limit:10}},o)}).map(T).catch((function(e){return d.Observable.of({error:e,items:[],total:0})}))},A={querySelector:".ms2-border-layout-body",pageSize:10},C=y(S((u=(s={loadPage:j,scrollSpyOptions:A,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}).loadPage,p=s.scrollSpyOptions,a({},o(s,["loadPage","scrollSpyOptions"]),{scrollSpyOptions:a({skip:1},p),loadPage:(c=u,function(e,t){return 0===t&&e&&!e.text?c(e,t).map((function(e){var t=e.items,r=e.total;return a({},o(e,["items","total"]),{total:r,items:[{id:"EMPTY_MAP",title:f.createElement(v,{msgId:"widgets.selectMap.emptyMap.title"}),description:f.createElement(v,{msgId:"widgets.selectMap.emptyMap.description"}),preview:P,map:{id:"new.json"}}].concat(n(t))})})):c(e,t)}),hasMore:function(e){var t=e.total,r=e.items;return r&&r.length>=1&&"EMPTY_MAP"===r[0].id?t>r.length+1:t>r.length}}))),g((function(e){var t=e.items;return{skip:t&&t[0]&&"EMPTY_MAP"===t[0].id?1:0}})));e.exports={withSearchTextState:w("searchText","setSearchText",""),withVirtualScroll:S({loadPage:j,scrollSpyOptions:A,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}),withEmptyMapVirtualScroll:C,searchOnTextChange:b((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.loadFirst,n=void 0===r?function(){}:r;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText",(function(e,t){return e===t})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.options;return n({text:t,options:r})})).ignoreElements()})))}))}},3909:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(407).compose,l=r(13).isNil,s=r(2103),c=r(3910),u=r(2119),p=r(2262),f=r(2161),d=r(2138),m=a(f((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),d((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:i.createElement(s,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(r(2239));e.exports=function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,a=e.selected,f=e.skip,d=void 0===f?0:f,y=e.onSelected,g=e.loading,b=e.searchText,h=e.items,v=void 0===h?[]:h,O=e.total,E=e.title,w=void 0===E?i.createElement(s,{msgId:"maps.title"}):E;return i.createElement(u,{className:"map-catalog",header:i.createElement(c,{title:w,searchText:b,onSearchTextChange:r}),footer:i.createElement("div",{className:"catalog-footer"},i.createElement("span",null,g?i.createElement(p,null):null),l(O)?null:i.createElement("span",{className:"res-info"},i.createElement(s,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:v.length-d,total:O}})))},i.createElement(m,{items:v.map((function(e){return e===a||a&&e&&e.map&&a.id===e.map.id?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{selected:!0}):e})),loading:g,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map;return y(t)}}))}},3910:function(e,t,r){var n=r(1),o=r(758),i=o.Col,a=o.FormGroup,l=o.FormControl,s=o.Grid,c=o.Row,u=r(2214)("placeholder")(l);e.exports=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,o=e.searchText,l=e.title;return n.createElement(s,{className:"catalog-form",fluid:!0},n.createElement(c,null,n.createElement(i,{xs:12},l&&n.createElement("h4",{className:"text-center"},l),n.createElement(a,{controlId:"catalog-form"},n.createElement(u,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:o,onChange:function(e){return r(e.currentTarget.value)}})))))}},3911:function(e,t,r){var n=r(1),o=r(88).connect,i=r(195).createSelector,a=r(2119),l=r(2193).selectedCatalogSelector,s=r(2116),c=r(2195),u=r(2265),p=r(2241),f=p.Message,d=p.HTML,m=r(407),y=(0,m.compose)((0,m.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),o(i(l,(function(e){return{catalog:e}})))))(r(2856));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,o=e.setSelected,i=void 0===o?function(){}:o,l=e.onLayerChoice,p=void 0===l?function(){}:l,m=e.toggleLayerSelector,g=void 0===m?function(){}:m,b=e.selected,h=e.canProceed,v=e.layer,O=e.catalog,E=e.catalogServices;return n.createElement(a,{className:"bg-body layer-selector",header:n.createElement(c,{onClose:r},n.createElement(s,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return g(!1)},tooltipId:"close",glyph:"1-close"},{onClick:function(){return p(v)},disabled:!b||!h,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",glyph:"plus"}]}),b&&!h?n.createElement(u,{glyph:"exclamation-mark",bsStyle:"warning",title:n.createElement(f,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:n.createElement(d,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},n.createElement(y,{services:E,selected:b,catalog:O,onRecordSelected:function(e){return i(e)}}))}},3912:function(e,t,r){var n=r(1),o=r(2320),i=(0,r(2282).wizardHandlers)(r(2284)),a=r(3913),l=r(3923);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,s=e.onFinish,c=void 0===s?function(){}:s,u=e.setPage,p=void 0===u?function(){}:u,f=e.step,d=void 0===f?0:f,m=e.selectedNodes,y=void 0===m?[]:m,g=e.onNodeSelect,b=void 0===g?function(){}:g,h=e.editorData,v=void 0===h?{}:h,O=e.editNode,E=e.setEditNode,w=void 0===E?function(){}:E,S=e.closeNodeEditor,P=void 0===S?function(){}:S;return n.createElement(i,{step:d,setPage:p,onFinish:c,hideButtons:!0},n.createElement(a,{editNode:O,setEditNode:w,closeNodeEditor:P,onNodeSelect:b,selectedNodes:y,onChange:r,preview:n.createElement(l,{onChange:r,layers:v.map&&v.map.layers,map:v.map,options:{style:{margin:10,height:"calc(100% - 20px)"}}}),map:v.map}),n.createElement(o,{key:"widget-options",data:v,onChange:r}))}},3913:function(e,t,r){var n=r(1),o=r(407),i=o.compose,a=o.withProps,l=r(2283),s=r(2138),c=r(3914),u=r(2103),p=s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t;return!r.layers||0===(r.layers||[]).filter((function(e){return"background"!==e.group})).length}),(function(){return{glyph:"1-layer",title:n.createElement(u,{msgId:"widgets.selectMap.TOC.noLayerTitle"}),description:n.createElement(u,{msgId:"widgets.selectMap.TOC.noLayerDescription"})}}))(r(3915)),f=r(3917),d=f(r(3922)),m=i(f,a((function(e){var t=e.selectedNode;return{title:t&&t.title}})),c("title"))(l);e.exports=function(e){var t=e.preview,r=e.map,o=void 0===r?{}:r,i=e.onChange,a=void 0===i?function(){}:i,s=e.selectedNodes,c=void 0===s?[]:s,f=e.onNodeSelect,y=void 0===f?function(){}:f,g=e.editNode,b=e.closeNodeEditor,h=void 0===b?function(){}:b;return n.createElement("div",null,n.createElement(l,{title:n.createElement(u,{msgId:"widgets.builder.wizard.configureMapOptions"})}),n.createElement("div",{key:"sample",style:{marginTop:10}},n.createElement(l,{title:n.createElement(u,{msgId:"widgets.builder.wizard.preview"})}),n.createElement("div",{style:{width:"100%",height:"200px"}},t)),g?[n.createElement(m,{map:o,editNode:g}),n.createElement(d,{closeNodeEditor:h,editNode:g,map:o,onChange:a})]:[n.createElement(l,{title:n.createElement(u,{msgId:"layers"})}),n.createElement(p,{selectedNodes:c,onSelect:y,onChange:a,map:o})])}},3914:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(0),s=r(13).castArray,c=r(407),u=c.getContext,p=c.mapProps,f=c.compose,d=r(136).getLocalizedProp;e.exports=function(e){return f(u({locale:l.string}),p((function(t){var r=t.locale,o=n(t,["locale"]);return i({},o,{},s(e).reduce(function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return i({},r,a({},n,e[n]&&d(t,e[n])))}}(o,r),{}))})))}},3915:function(e,t,r){var n=r(1),o=r(407).compose,i=r(2735),a=r(2744),l=r(2737),s=r(2741),c=r(2860),u=r(3916),p=o(r(2861),u,c);e.exports=p((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.changeLayerPropertyByGroup,r=void 0===t?function(){}:t,o=e.changeLayerProperty,c=void 0===o?function(){}:o,u=e.changeGroupProperty,p=void 0===u?function(){}:u,f=e.onSort,d=e.onSelect,m=e.selectedNodes,y=e.nodes,g=void 0===y?[]:y;return n.createElement(i,{onSort:f,selectedNodes:m,onSelect:d,nodes:g},n.createElement(a,{groupElement:n.createElement(l,{onSort:f,selectedNodes:m,onSelect:d,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(n){return r(e,n,t[n])}))},onToggle:function(e,t){return p(e,"expanded",!t)},groupVisibilityCheckbox:!0}),layerElement:n.createElement(s,{selectedNodes:m,onSelect:d,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(r){return c(e,r,t[r])}))},onUpdateNode:function(e,t,r){return Object.keys(r).map((function(t){return c(e,t,r[t])}))},onToggle:function(e,t){return c(e,"expanded",!t)}})}))}))},3916:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13).head,l=r(407).withProps,s=function(e){var t=e.nodes,r=e.filterText;e.currentLocale;return function e(t,r){return t.reduce((function(t,n){var i=o({},n);return i.nodes&&(i=o({},i,{nodes:e(i.nodes,r)})),r.forEach((function(e){i.nodes&&e.func(i)?i=o({},i,{},e.options):i.nodes&&(i=o({},i))})),t.push(i),t}),[])}(t,[{options:{showComponent:!0},func:function(){return!r}},{options:{loadingError:!0},func:function(e){return a(e.nodes.filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return r&&a(e.nodes.filter((function(e){return!0})))}}])};e.exports=l((function(e){return{nodes:s(e)}}))},3917:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withProps,c=a.withState,u=a.withHandlers,p=r(13).get,f=r(2552),d=r(137).splitMapAndLayers,m=r(2861),y=r(3918),g=r(3919),b=r(2766),h=r(2769),v=g(r(3920)),O=r(2860),E=r(2765).settingsLifecycle,w=s((function(e){return{tabs:e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:b},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:h},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:v}]}}));e.exports=l(m,y,c("settings","onUpdateSettings",{}),s((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t,n=e.selectedNode,i=e.settings,a=void 0===i?{}:i;return{element:n,settings:o({},a,{nodeType:n.nodes?"groups":"layers",options:{opacity:a.opacity>=0?a.opacity:n.opacity>=0?n.opacity:1}}),groups:p(d(r),"layers.groups")}})),l(O,u({onUpdateNode:function(e){var t=e.changeLayerProperty,r=void 0===t?function(){}:t,n=e.changeGroupProperty,o=void 0===n?function(){}:n,i=e.editNode;return function(e,t,n){"layers"===t&&Object.keys(n).map((function(e){return r(i,e,n[e])})),"groups"===t&&Object.keys(n).map((function(e){return o(i,e,n[e])}))}}}),u({onUpdateParams:function(e){var t=e.settings,r=void 0===t?{}:t,n=e.onUpdateNode,i=void 0===n?function(){}:n;return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&i(r.node,r.nodeType,o({},r.props,{},e))}}})),E,f("activeTab","setActiveTab","general"),w)},3918:function(e,t,r){var n=r(13).isMatch,o=r(407).withProps,i=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,o=0;o<t.length;o++)if(n(t[o],r))return t[o];for(var i=0;i<t.length;i++){var a=e(t[i].nodes,r);if(void 0!==a)return a}return null};e.exports=o((function(e){var t=e.nodes,r=void 0===t?{}:t,n=e.editNode;return{selectedNode:n&&i(r,{id:n})}}))},3919:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.createEventHandler,s=a.mapPropsStream,c=r(2361).getLayerCapabilities,u=r(15);e.exports=s((function(e){var t=l(),r=t.stream,n=t.handler;return e.pluck("element").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.id===t.id})).switchMap((function(){return r.switchMap((function(e){return c(e).map((function(e){return{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}})).startWith({capabilitiesLoading:!0})})).catch((function(e){return u.Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o({},t,{retrieveLayerData:n,element:o({},t.element,{},e)})}))}))},3920:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(2103),m=r(2162),y=r(758),g=y.Button,b=y.Glyphicon,h=y.Alert,v=r(13).findIndex,O=r(758).Grid;r(2553);var E=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderLegend",(function(){return null})),u(s(r),"renderItemLabel",(function(e){return p.createElement("div",null,p.createElement("div",{key:"item-title"},e.title||e.name),p.createElement("div",null,p.createElement("small",{className:"text-muted",key:"item-key-description"},e.name)))})),u(s(r),"renderError",(function(){return r.props.element&&r.props.element.capabilities&&r.props.element&&r.props.element.capabilities.error?p.createElement(h,{bsStyle:"danger"},p.createElement(d,{msgId:"layerProperties.styleListLoadError"})):null})),u(s(r),"updateEntry",(function(e,t){var n=t.target.value;r.props.onChange(e,n)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((function(t){return{label:e.renderItemLabel(t),value:t.name}})));return(this.props.element.style&&this.props.element.availableStyles&&v(this.props.element.availableStyles,(function(t){return t.name===e.props.element.style})))>=0||!this.props.element.style||t.push({label:this.props.element.style,value:this.props.element.style}),p.createElement(O,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},p.createElement("form",{ref:"style"},p.createElement(m.Creatable,{key:"styles-dropdown",options:t,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:function(){!e.props.element||e.props.element.capabilities&&e.props.element.availableStyles||e.props.retrieveLayerData(e.props.element)},promptTextCreator:function(e){return p.createElement(d,{msgId:"layerProperties.styleCustom",msgParams:{value:e}})},onChange:function(t){e.updateEntry("style",{target:{value:t&&t.value||""}})}}),p.createElement("br",null),this.renderLegend(),this.renderError(),p.createElement(g,{bsStyle:"primary",style:{float:"right"},onClick:function(){return e.props.retrieveLayerData(e.props.element)}},p.createElement(b,{glyph:"refresh"}),"",p.createElement(d,{msgId:"layerProperties.stylesRefreshList"})),p.createElement("br",null)))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(E,"propTypes",{retrieveLayerData:f.func,onChange:f.func,element:f.object,groups:f.array}),u(E,"defaultProps",{element:{},retrieveLayerData:function(){},onChange:function(){}}),e.exports=E},3922:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=r(1),l=r(2103),s=r(2135),c=r(758),u=c.Row,p=c.Col,f=c.Nav,d=c.NavItem,m=c.Glyphicon,y=s(d);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,r=e.element,s=void 0===r?{}:r,c=e.tabs,d=void 0===c?[]:c,g=e.activeTab,b=e.width,h=e.groups,v=e.setActiveTab,O=void 0===v?function(){}:v,E=e.onUpdateParams,w=void 0===E?function(){}:E,S=e.onRetrieveLayerData,P=void 0===S?function(){}:S,T=e.realtimeUpdate,j=i(e,["settings","element","tabs","activeTab","width","groups","setActiveTab","onUpdateParams","onRetrieveLayerData","realtimeUpdate"]);return a.createElement(u,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a.createElement(p,{xs:12},a.createElement(f,{bsStyle:"tabs",activeKey:g,justified:!0},d.map((function(e){return a.createElement(y,{key:"ms-tab-settings-"+e.id,tooltip:a.createElement(l,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){return O(e.id)}},a.createElement(m,{glyph:e.glyph}))})))),a.createElement(p,{xs:12},d.filter((function(e){return e.id&&e.id===g})).filter((function(e){return e.Component})).map((function(e){return a.createElement(e.Component,n({},j,{key:"ms-tab-settings-body-"+e.id,containerWidth:b,element:s,groups:h,nodeType:t.nodeType,settings:t,retrieveLayerData:P,onChange:function(e,t){return w(o({},e,t),T)}}))}))))}},3923:function(e,t,r){var n=r(3924);e.exports=n(r(2804))},3924:function(e,t,r){var n=r(407),o=n.compose,i=n.withHandlers;e.exports=o(i({onMapViewChanges:function(e){var t=e.onChange,r=void 0===t?function(){}:t;return function(e){r("map",e),r("mapStateSource",e.mapStateSource)}}}))},3925:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(88).connect,l=r(407),s=l.compose,c=l.renameProps,u=l.branch,p=l.renderComponent,f=r(2119),d=r(2120),m=d.insertWidget,y=d.onEditorChange,g=d.setPage,b=d.openFilterEditor,h=d.changeEditorSetting,v=r(2546),O=r(2547),E=r(2548),w=r(2392),S=r(2281),P=r(2319),T=r(2242),j=T.wizardStateToProps,A=T.wizardSelector,C=a(A,{setPage:g,setValid:function(e){return h("valid",e)},onEditorChange:y,insertWidget:m},j)(s(v,c({editorData:"data",onEditorChange:"onChange"}))(r(3926))),x=r(2195),D=s(a(A,{openFilterEditor:b,setPage:g,onChange:y,insertWidget:m},j),E,S(),P((function(e){return 0===e.step})))(r(3927)),_=s(a(A),w,u((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),p(O(r(2551)))));e.exports=_((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,a=void 0===r?function(){}:r,l=e.exitButton,s=e.editorData,c=e.toggleConnection,u=e.availableDependencies,p=void 0===u?[]:u,d=e.dependencies,m=o(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return i.createElement(f,{header:i.createElement(x,{onClose:a},i.createElement(D,{exitButton:l,editorData:s,toggleConnection:c,availableDependencies:p,onClose:a}))},t?i.createElement(C,n({formOptions:{showColorRamp:!1,showUom:!0,showGroupBy:!1,showLegend:!1},dependencies:d},m)):null)}))},3926:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(13).isNil,a=r(407),l=a.compose,s=a.lifecycle,c=r(2282).wizardHandlers,u=r(2161)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),p=r(2854)(r(2550)((function(e){var t=e.options;return 0===(void 0===t?[]:t).length}))(r(2855))),f=r(2320),d=r(2801),m=r(2527),y=r(2528),g=r(2529),b=r(2385),h=r(2317),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute},O=l(s({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.valid,r=e.data,n=void 0===r?[]:r,o=e.options,a=void 0===o?{}:o,l=e.setValid,s=void 0===l?function(){}:l,c=e.error,u=!i(n[0])&&!c;!!t!=!!u&&v(a)&&s(u)}})),E=l(g,m,y,d,O,u,h,b),w={style:{width:450,height:100}},S=c(r(2284)),P=r(2813),T=E(P),j=function(e){var t=e.data,r=void 0===t?{}:t,i=e.layer,a=e.dependencies,l=void 0===a?{}:a,s=e.valid,c=e.setValid,u=void 0===c?function(){}:c;return v(r.options)?o.createElement(T,n({},w,{valid:s,dependenciesMap:r.dependenciesMap,dependencies:l,setValid:u,type:r.type,legend:r.legend,layer:r.layer||i,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,options:r.options})):o.createElement(P,n({},w,{data:[{data:42}],options:r.options,series:[{dataKey:"data"}]}))},A=l(s({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o;n&&!v(r.options)&&i(!1)}}));e.exports=A((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,i=void 0===n?function(){}:n,a=e.setPage,l=void 0===a?function(){}:a,s=e.setValid,c=void 0===s?function(){}:s,u=e.valid,d=e.formOptions,m=e.data,y=void 0===m?{}:m,g=e.layer,b=void 0===g?{}:g,h=e.step,O=void 0===h?0:h,E=e.types,w=e.featureTypeProperties,P=e.dependencies;return o.createElement(S,{step:O,setPage:l,onFinish:i,isStepValid:function(e){return 1!==e||v(y.options)},hideButtons:!0},o.createElement(p,{dependencies:P,key:"chart-options",formOptions:d,featureTypeProperties:w,types:E,data:y,onChange:r,layer:y.layer||b,sampleChart:o.createElement(j,{data:y,valid:u,layer:y.layer||b,dependencies:P,setValid:function(e){return c(e&&v(y.options))}})}),o.createElement(f,{key:"widget-options",data:y,onChange:r,layer:y.layer||b,sampleChart:o.createElement(j,{data:y,valid:u,layer:y.layer||b,dependencies:P,setValid:function(e){return c(e&&v(y.options))}})}))}))},3927:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=function(e){switch(e){case 0:return"widgets.builder.wizard.backToTypeSelection";case 1:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},l=function(e){switch(e){case 0:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,c=e.step,u=void 0===c?0:c,p=e.stepButtons,f=void 0===p?[]:p,d=e.editorData,m=void 0===d?{}:d,y=e.valid,g=e.setPage,b=void 0===g?function(){}:g,h=e.onFinish,v=void 0===h?function(){}:h;return o.createElement(i,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return b(Math.max(0,u-1))},visible:u>0,glyph:"arrow-left",tooltipId:a(u)}].concat(n(f),[{visible:0===u,onClick:r,disabled:!y,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return b(Math.min(u+1,2))},visible:0===u,disabled:0===u&&!y,glyph:"arrow-right",tooltipId:l(u)},{onClick:function(){return v(Math.min(u+1,1))},visible:1===u,glyph:"floppy-disk",tooltipId:s(u,m)}])})}},3928:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=r(1),a=r(88).connect,l=r(13).get,s=r(407),c=s.compose,u=s.renameProps,p=s.mapPropsStream,f=s.withProps,d=r(2265),m=r(2103),y=r(2119),g=r(2120),b=g.insertWidget,h=g.onEditorChange,v=g.setPage,O=g.openFilterEditor,E=r(3929),w=r(2392),S=r(2281),P=r(2319),T=r(2549),j=f((function(e){var t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData;return{valid:r.length>0&&n.mapSync}})),A=r(2242),C=A.wizardStateToProps,x=A.wizardSelector,D=c(a(x,{setPage:v,onEditorChange:h,insertWidget:b},C),j,u({editorData:"data",onEditorChange:"onChange"}))(r(3930)),_=r(2195),I=c(a(x,{openFilterEditor:O,setPage:v,onChange:h,insertWidget:b},C),E,j,a((function(){return{}}),{onLayerChoice:function(e){return h("layer",e)},onResetChange:h}),f((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),S((function(e){return 0===e.step})),P((function(e){return 0===e.step})))(r(3931)),F=c(a(x),w,E,T({layers:"layers",zoom:"zoom",viewport:"viewport"}),p((function(e){return e.merge(e.filter((function(e){var t=e.editorData;return!(void 0===t?{}:t).mapSync})).take(1).distinctUntilChanged().do((function(e){var t=e.toggleConnection;return(void 0===t?function(){}:t)(e.availableDependencies)})).ignoreElements())})));e.exports=F((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,a=void 0===r?function(){}:r,s=e.editorData,c=void 0===s?{}:s,u=e.exitButton,p=e.toggleConnection,f=e.availableDependencies,g=void 0===f?[]:f,b=e.dependencies,h=o(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return i.createElement(y,{header:i.createElement(_,{onClose:a},i.createElement(I,{editorData:c,exitButton:u,toggleConnection:p,availableDependencies:g,onClose:a}),0===l(c,"options.propertyName.length")?i.createElement(d,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:i.createElement(m,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?i.createElement(D,n({availableDependencies:g,editorData:c,dependencies:b},h)):null)}))},3929:function(e,t,r){var n=r(407),o=n.withProps,i=n.compose;e.exports=i(o((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),o((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.availableDependencies;return{canConnect:(void 0===n?[]:n).length>0,connected:!!r.mapSync}})))},3930:function(e,t,r){var n=r(1),o=r(407).compose,i=r(2138),a=r(2282).wizardHandlers,l=r(758),s=l.Row,c=l.Col,u=r(2798),p=r(2320),f=a(r(2284)),d=r(2283),m=r(2103),y=r(2814),g=o(u,i((function(e){return!e.valid}),{title:n.createElement(m,{msgId:"widgets.builder.errors.noMapAvailableForLegend"}),description:n.createElement(m,{msgId:"widgets.builder.errors.noMapAvailableForLegendDescription"})}),y(!1))(r(2815));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,o=e.onFinish,i=void 0===o?function(){}:o,a=e.setPage,l=void 0===a?function(){}:a,u=e.step,y=void 0===u?0:u,b=e.dependencies,h=e.valid,v=e.data,O=void 0===v?{}:v;return n.createElement(f,{step:y,setPage:l,onFinish:i,hideButtons:!0},n.createElement(s,null,n.createElement(d,{title:n.createElement(m,{msgId:"widgets.builder.wizard.preview"})}),n.createElement(c,{xs:12},n.createElement("div",{style:{marginBottom:"30px"}},n.createElement(g,{valid:h,dependencies:b,dependenciesMap:O.dependenciesMap,key:"widget-options",onChange:r})))),n.createElement(p,{key:"widget-options",onChange:r}))}},3931:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2116),a=function(e){switch(e){case 1:return"widgets.builder.wizard.backToPreview";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},l=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":void 0},s=function(e){return e.mapSync},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,u=e.editorData,p=void 0===u?{}:u,f=e.valid,d=e.stepButtons,m=void 0===d?[]:d,y=e.onFinish,g=void 0===y?function(){}:y,b=e.setPage,h=void 0===b?function(){}:b;return o.createElement(i,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return h(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:a(r)}].concat(n(m),[{onClick:function(){return h(Math.min(r+1,1))},visible:0===r,disabled:0===r&&!s(p)||!f,glyph:"arrow-right",tooltipId:l(0,f)},{onClick:function(){return g(Math.min(r+1,1))},visible:1===r,glyph:"floppy-disk",tooltipId:c(r,p)}])})}},3932:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(15),s=r(2120),c=s.NEW,u=s.INSERT,p=s.EDIT,f=s.OPEN_FILTER_EDITOR,d=s.NEW_CHART,m=s.editNewWidget,y=s.onEditorChange,g=r(2133).closeFeatureGrid,b=r(2169).drawSupportReset,h=r(2175),v=h.QUERY_FORM_SEARCH,O=h.loadFilter,E=r(267),w=E.setControlProperty,S=E.TOGGLE_CONTROL,P=r(269).ADD_LAYER,T=r(771).LOCATION_CHANGE,j=r(2176).featureTypeSelected,A=r(2143),C=A.getWidgetLayer,x=A.getEditingWidgetFilter,D=r(2199).wfsFilter,_=r(763).widgetBuilderAvailable,I=function(e){var t=C(e);return[t.search&&t.search.url,t.name]};e.exports={openWidgetEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(c,p,d).filter((function(){return _(n())})).switchMap((function(){return l.Observable.of(w("widgetBuilder","enabled",!0),w("metadataexplorer","enabled",!1))}))},closeWidgetEditorOnFinish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(u,P).filter((function(){return _(n())})).switchMap((function(){return l.Observable.of(w("widgetBuilder","enabled",!1))}))},initEditorOnNew:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(c).filter((function(){return _(n())})).switchMap((function(e){return l.Observable.of(m(i({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0},e,{type:void 0}),{step:0}))}))},initEditorOnNewChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(d).filter((function(){return _(n())})).switchMap((function(e){return l.Observable.of(g(),m(i({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0,widgetType:"chart",filter:D(n())},e,{type:void 0}),{step:0}),y("returnToFeatureGrid",!0))}))},handleWidgetsFilterPanel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(f).filter((function(){return _(o())})).switchMap((function(){return l.Observable.of(j.apply(void 0,n(I(o()))),O(x(o())),w("widgetBuilder","enabled",!1),w("queryPanel","enabled",!0)).concat(l.Observable.race(e.ofType(v).take(1),e.ofType(S).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).take(1)).switchMap((function(e){return(e.filterObj?l.Observable.of(y("filter",e.filterObj)):l.Observable.empty()).merge(l.Observable.of(w("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(T,p).merge(e.ofType(S).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"widgetBuilder"===t&&!1==!r})))).concat(l.Observable.of(b(),w("queryPanel","enabled",!1)))}))}}},3933:function(e,t,r){var n=r(3934),o=r(2795);e.exports={WidgetsTrayPlugin:o(n),epics:r(3937)}},3934:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(88).connect,m=r(407),y=m.compose,g=m.withProps,b=m.withState,h=m.lifecycle,v=m.mapPropsStream,O=r(195).createSelector,E=r(2135),w=r(758),S=w.Glyphicon,P=E(w.Button),T=r(2143).getVisibleFloatingWidgets,j=r(2120),A=j.toggleCollapseAll,C=j.toggleTray,x=r(2862).trayWidgets,D=r(2863).filterHiddenWidgets,_=r(2119),I=r(3935),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expanded,r=e.onClick,n=void 0===r?function(){}:r;return p.createElement(P,{tooltipId:t?"widgets.tray.collapseTray":"widgets.tray.expandTray",bsSize:"xsmall",bsStyle:"default",style:{borderColor:"transparent"},onClick:n},p.createElement(S,{glyph:t?"chevron-right":"chevron-left"}))},k=y(d(O(T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{onClick:function(){return A()}}),D,g((function(e){var t=e.widgets;return{shouldExpand:0===(void 0===t?[]:t).length}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,r=void 0===t?function(){}:t,n=e.shouldExpand,o=void 0!==n&&n;return p.createElement(P,{tooltipId:o?"widgets.tray.expandAll":"widgets.tray.collapseAll",bsStyle:o?"primary":"success active",bsSize:"xsmall",onClick:r},p.createElement(S,{glyph:"list"}))})),L=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return this.props.enabled?p.createElement("div",{className:"widgets-tray",style:{marginBottom:32,marginRight:80,bottom:0,right:0,position:"absolute"}},p.createElement(_,{columns:[p.createElement(F,{key:"collapse-tray",toolsOptions:this.props.toolsOptions,expanded:this.props.expanded,onClick:function(){return e.props.setExpanded(!e.props.expanded)}}),p.createElement(k,{key:"collapse-all",toolsOptions:this.props.toolsOptions})].concat(o(this.props.items.map((function(e){return e.tool}))||[]))},this.props.expanded?p.createElement(I,{toolsOptions:this.props.toolsOptions}):null)):null}}])&&a(r.prototype,n),u&&a(r,u),t}(p.Component);u(L,"propTypes",{enabled:f.bool,toolsOptions:f.object,items:f.array,expanded:f.bool,setExpanded:f.func}),u(L,"defaultProps",{enabled:!0,items:[],expanded:!1,setExpanded:function(){}}),e.exports=y(b("expanded","setExpanded",!1),d(O(x,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{toggleTray:C}),D,g((function(e){var t=e.widgets,r=void 0===t?[]:t;return{hasCollapsedWidgets:r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collapsed;return t})).length>0,hasTrayWidgets:r.length>0}})),h({componentDidMount:function(){this.props.toggleTray&&this.props.toggleTray(!0)},componentWillUnmount:function(){this.props.toggleTray&&this.props.toggleTray(!1)}}),v((function(e){return e.merge(e.distinctUntilKeyChanged("hasCollapsedWidgets").do((function(e){var t=e.setExpanded;return(void 0===t?function(){}:t)(e.hasCollapsedWidgets)})).ignoreElements())})),g((function(e){var t=e.enabled,r=e.hasTrayWidgets;return{enabled:t&&r}})))(L)},3935:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.defaultProps,c=a.withProps,u=r(195).createSelector,p=r(88).connect,f=r(2863).filterHiddenWidgets,d=r(2120).toggleCollapse,m=r(2862).trayWidgets;e.exports=l(p(u(m,(function(e){return{widgets:e}})),{onClick:d}),s({btnGroupProps:{className:"widgets-toolbar",style:{marginLeft:2,marginRight:2}}}),f,c((function(e){var t=e.btnGroupProps,r=void 0===t?{}:t,n=e.btnDefaultProps,i=void 0===n?{}:n;return{btnGroupProps:o({bsSize:"xsmall"},r),btnDefaultProps:o({bsSize:"xsmall"},i||{})}})))(r(3936))},3936:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(407),l=a.compose,s=a.withPropsOnChange,c=r(2116),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.type,n=t&&"chart"!==t?t:r;switch(n){case"text":return"sheet";case"table":return"features-grid";case"pie":return"pie-chart";case"line":return"1-line";case"map":return"1-map";case"counter":return"counter";default:return"stats"}};e.exports=l(s(["btnGroupProps"],(function(e){var t=e.btnGroupProps;return{btnGroupProps:o({},t,{className:"widgets-bar"+(t&&t.className?" ".concat(t.className):"")})}})),s(["widgets","onClick"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.onClick,o=void 0===n?function(){}:n;return{buttons:r.map((function(e){return{glyph:u(e),tooltip:e.title,className:e.collapsed?"btn-tray":"btn-tray active",onClick:function(){return o(e)}}}))}})))(c)},3937:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(15),a=r(13).get,l=r(2194),s=l.setCollapsed,c=l.SET_COLLAPSED,u=r(2120),p=u.TOGGLE_COLLAPSE,f=u.INSERT,d=u.TOGGLE_COLLAPSE_ALL,m=u.UPDATE_PROPERTY,y=u.toggleCollapseAll,g=u.DELETE,b=r(40).MAP_CONFIG_LOADED,h=r(161).info,v=r(2143).getVisibleFloatingWidgets,O=r(269).CHANGE_LAYER_PROPERTIES,E=r(2211),w=E.isVisible,S=E.hasLayers,P=function(e){return(v(e)||[]).filter((function(e){return!a(e,"dataGrid.static")})).length>0},T=function(e){return function(t){return t.take(1).switchMap((function(){return i.Observable.of(h(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{autoDismiss:8,position:"tr",uid:"timeline-collapsed"})))})).merge(t)}};e.exports={collapseTimelineOnWidgetsEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return i.Observable.merge(e.ofType(p,d,b,m,f).filter((function(){return P(n())&&w(n())}))).switchMap((function(){return i.Observable.of(s(!0))})).let(T({title:"widgets.tray.notifications.collapsed.timelineTitle",message:"widgets.tray.notifications.collapsed.message"}))},collapseWidgetsOnTimelineEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return i.Observable.merge(e.ofType(c).filter((function(e){return!e.collapsed})),e.ofType(O).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProperties,r=void 0===t?{}:t;return r.dimensions}))).filter((function(){return P(n())&&S(n())&&w(n())})).switchMap((function(){return i.Observable.of(y())})).let(T({title:"widgets.tray.notifications.collapsed.widgetsTitle",message:"widgets.tray.notifications.collapsed.message"}))},expandTimelineIfCollapsedOnTrayUnmount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return(e.ofType(g,m,b).filter((function(){return!w(n())&&S(n())})).filter((function(){return!P(n())})).switchMap((function(){return i.Observable.of(s(!1))})))}}},3938:function(e,t,r){var n=r(161),o=n.hide,i=n.dispatchAction,a=r(3939).clearNotificationOnLocationChange,l=r(88).connect;e.exports={NotificationsPlugin:l((function(e){return{notifications:e&&e.notifications}}),{onRemove:o,onDispatch:i})(r(3940)),reducers:{notifications:r(3946)},epics:{clearNotificationOnLocationChange:a}}},3939:function(e,t,r){var n=r(15),o=r(161).clear,i=r(771).LOCATION_CHANGE;e.exports={clearNotificationOnLocationChange:function(e){return e.ofType(i).switchMap((function(){return n.Observable.of(o())}))}}},3940:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(1),g=r(3941),b=r(0),h=r(412),v=h.injectIntl,O=h.intlShape,E=h.defineMessages,w=r(136),S=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"system",(function(){return r.refs.notify})),m(f(r),"updateNotifications",(function(e){var t=e.map((function(e){return e.uid})),n=r.system().state.notifications||[];n.forEach((function(e){t.indexOf(e.uid)<0&&r.system().removeNotification(e.uid)})),e.forEach((function(e){if(n.indexOf(e.uid)<0){var t,o=e.message,i=w.getMessageById(r.context.messages,o);if(e.values)t=(0,r.props.intl.formatMessage)(t=E({id:o,defaultMessage:i}),e.values);else t=i||o;r.system().addNotification(l({},e,{title:w.getMessageById(r.context.messages,e.title)||e.title,message:t,action:e.action&&{label:w.getMessageById(r.context.messages,e.action.label)||e.action.label,callback:e.action.dispatch?function(){r.props.onDispatch(e.action.dispatch)}:e.action.callback},onRemove:function(){r.props.onRemove(e.uid),e.onRemove&&e.onRemove()}}))}}))})),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.updateNotifications(this.props.notifications)}},{key:"componentDidUpdate",value:function(){var e=(this.props||[]).notifications;this.updateNotifications(e)}},{key:"render",value:function(){var e=this.props,t=(e.notifications,e.onRemove,i(e,["notifications","onRemove"]));return y.createElement(g,o({ref:"notify"},t))}}])&&c(r.prototype,n),a&&c(r,a),t}(y.Component);m(S,"propTypes",{notifications:b.array,intl:O.isRequired,onRemove:b.func,onDispatch:b.func}),m(S,"contextTypes",{messages:b.object}),m(S,"defaultProps",{notifications:[],onRemove:function(){},onDispatch:function(){}}),e.exports=v(S)},3946:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=r(161),c=s.SHOW_NOTIFICATION,u=s.HIDE_NOTIFICATION,p=s.CLEAR_NOTIFICATIONS;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c:t.type;var r=l(t,["type"]);return[].concat(a(e),[o({},r)]);case u:return e.filter((function(e){return e.uid!==t.uid}));case p:return[];default:return e}}},3947:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a=r(1),l=r(88).connect,s=r(195),c=s.createSelector,u=s.createStructuredSelector,p=r(200).bindActionCreators,f=r(13),d=f.get,m=f.pick,y=r(407),g=y.compose,b=y.lifecycle,h=r(2808),v=r(2199),O=v.paginationInfo,E=v.describeSelector,w=v.wfsURLSelector,S=v.typeNameSelector,P=r(2183),T=P.modeSelector,j=P.changesSelector,A=P.newFeaturesSelector,C=P.hasChangesSelector,x=P.selectedFeaturesSelector,D=P.getDockSize,_=r(2152).toChangesMap,I=r(3948),F=I.getPanels,k=I.getHeader,L=I.getFooter,R=I.getDialogs,N=I.getEmptyRowsView,M=I.getFilterRenderers,B=r(2119),G=[],U={},W=r(2864),V=W.gridTools,H=W.gridEvents,z=W.pageEvents,q=W.toolbarEvents,Q=r(2133),Y=Q.initPlugin,K=Q.sizeChange,X=Q.setUp,Z=r(2209).default,J=r(2140).mapLayoutValuesSelector,$=l(c(D,(function(e){return J(e,{transform:!0})}),(function(e,t){return{size:e,dockStyle:t}})))(r(792).default),ee=g(l(c((function(e){return d(e,"featuregrid.open")}),(function(e){return d(e,"queryform.autocompleteEnabled")}),(function(e){return w(e)}),(function(e){return S(e)}),(function(e){return d(e,"featuregrid.features")||G}),E,(function(e){return d(e,"featuregrid.attributes")}),(function(e){return d(e,"featuregrid.tools")}),x,T,j,A,C,(function(e){return d(e,"featuregrid.focusOnEdit")||[]}),(function(e){return d(e,"featuregrid.enableColumnFilters")}),u(O),(function(e){return d(e,"featuregrid.pages")}),(function(e){return d(e,"featuregrid.pagination.size")}),(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:G,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:G,f=arguments.length>12?arguments[12]:void 0,d=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0,g=arguments.length>16?arguments[16]:void 0,b=arguments.length>17?arguments[17]:void 0;return{open:e,autocompleteEnabled:t,url:r,typeName:n,hasChanges:f,newFeatures:p,features:o,describe:i,attributes:a,tools:l,select:s,mode:c,focusOnEdit:d,enableColumnFilters:m,changes:_(u),pagination:y,pages:g,size:b}})),(function(e){return{onMount:p(X,e),gridEvents:p(H,e),pageEvents:p(z,e),initPlugin:p((function(e){return Y(e)}),e),toolbarEvents:p(q,e),gridTools:V.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{events:p(t.events,e)})})),onSizeChange:function(){return e(K.apply(void 0,arguments))}}})),b({componentDidMount:function(){this.props.onMount(m(this.props,["showFilteredObject","showTimeSync","timeSync"]))}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tools:U,dialogs:U,select:G},t={dimMode:"none",defaultSize:.35,fluid:!0,isVisible:e.open,maxDockSize:.7,minDockSize:.1,position:"bottom",setDockSize:function(){},zIndex:1030};return a.createElement($,i({},t,{onSizeChange:function(r){e.onSizeChange(r,t)}}),e.open&&a.createElement(Z,null,(function(t){var r=t.height;return(a.createElement(B,{className:"feature-grid-container",key:"feature-grid-container",height:r-94,header:k(),columns:F(e.tools),footer:L(e)},R(e.tools),a.createElement(h,{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin,customEditorsOptions:e.customEditorsOptions,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName,filterRenderers:M(e.describe),enableColumnFilters:e.enableColumnFilters,emptyRowsView:N(),focusOnEdit:e.focusOnEdit,newFeatures:e.newFeatures,changes:e.changes,mode:e.mode,select:e.select,key:"feature-grid-container",columnSettings:e.attributes,gridEvents:e.gridEvents,pageEvents:e.pageEvents,describeFeatureType:e.describe,features:e.features,minHeight:600,tools:e.gridTools,pagination:e.pagination,pages:e.pages,virtualScroll:e.virtualScroll,maxStoredPages:e.maxStoredPages,vsOverScan:e.vsOverScan,scrollDebounce:e.scrollDebounce,size:e.size})))})))}));e.exports={FeatureEditorPlugin:ee,epics:r(3965),reducers:{featuregrid:r(3972)}}},3948:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(1),s=r(88).connect,c=r(200).bindActionCreators,u=r(195),p=u.createSelector,f=u.createStructuredSelector,d=r(763),m=d.widgetBuilderAvailable,y=d.wfsDownloadAvailable,g=r(2199),b=g.paginationInfo,h=g.featureLoadingSelector,v=g.resultsSelector,O=g.isSyncWmsActive,E=g.featureCollectionResultSelector,w=r(2183),S=w.getTitleSelector,P=w.modeSelector,T=w.selectedFeaturesCount,j=w.hasChangesSelector,A=w.hasGeometrySelector,C=w.isSimpleGeomSelector,x=w.hasNewFeaturesSelector,D=w.isSavingSelector,_=w.isSavedSelector,I=w.isDrawingSelector,F=w.canEditSelector,k=w.getAttributeFilter,L=w.hasSupportedGeometry,R=w.editingAllowedRolesSelector,N=w.timeSyncActive,M=w.showTimeSync,B=r(271).userRoleSelector,G=r(2144).isCesium,U=r(2140).mapLayoutValuesSelector,W=r(2183),V=W.chartDisabledSelector,H=W.showAgainSelector,z=W.showPopoverSyncSelector,q=W.selectedLayerNameSelector,Q=r(2133),Y=Q.deleteFeatures,K=Q.toggleTool,X=Q.clearChangeConfirmed,Z=Q.closeFeatureGridConfirmed,J=Q.closeFeatureGrid,$=r(2864),ee=$.toolbarEvents,te=$.pageEvents,re=r(2152).getAttributeFields,ne=r(2530).getFilterRenderer,oe=r(2199),ie=oe.isDescribeLoaded,ae=oe.isFilterActive,le=s(f({loading:h}))(r(2805)),se=s(f({saving:D,saved:_,mode:P,hasChanges:j,hasNewFeatures:x,hasGeometry:A,syncPopover:function(e){return{showAgain:H(e),showPopoverSync:z(e),dockSize:U(e,{dockSize:!0}).dockSize+3.2+"%"}},isDrawing:I,showChartButton:function(e){return!V(e)&&m(e)},isSimpleGeom:C,selectedCount:T,disableToolbar:function(e){return e&&e.featuregrid&&e.featuregrid.disableToolbar||!ie(e,q(e))},displayDownload:y,disableDownload:function(e){return 0===(v(e)||[]).length},isDownloadOpen:function(e){return e&&e.controls&&e.controls.wfsdownload&&e.controls.wfsdownload.enabled},isSyncActive:O,isColumnsOpen:function(e){return e&&e.featuregrid&&e.featuregrid.tools&&e.featuregrid.tools.settings},disableZoomAll:function(e){return e&&e.featuregrid.virtualScroll||0===E(e).features.length},isSearchAllowed:function(e){return!G(e)},isEditingAllowed:function(e){return(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["ADMIN"];return-1!==t.indexOf(e)}(B(e),R(e))||F(e))&&!G(e)},hasSupportedGeometry:L,isFilterActive:ae,showTimeSyncButton:M,timeSync:N}),(function(e){return{events:c(ee,e)}}))(r(3953)),ce=s(p(S,(function(e){return{title:e}})),{onClose:ee.onClose})(r(3958)),ue=s(p(f(b),h,(function(e){return e&&e.featuregrid&&!!e.featuregrid.virtualScroll}),(function(e,t,r){return i({},e,{loading:t,virtualScroll:r})})),te)(r(3959)),pe=s(p(T,(function(e){return{count:e}})),{onClose:function(){return K("deleteConfirm",!1)},onConfirm:function(){return Y()}})(r(3960)),fe=s(p(T,(function(e){return{count:e}})),{onClose:function(){return K("clearConfirm",!1)},onConfirm:function(){return X()}})(r(3961)),de=s((function(){}),{onClose:function(){return Z()},onConfirm:function(){return J()}})(r(3962)),me={settings:r(3963)},ye={deleteConfirm:pe,featureCloseConfirm:de,clearConfirm:fe},ge={settings:{style:{padding:"0 12px",overflow:"auto",flex:"0 0 14em",boxShadow:"inset 0px 0px 10px rgba(0, 0, 0, 0.4)",height:"100%",minWidth:195}}};e.exports={getPanels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&me[t]})).map((function(e){var t=me[e];return l.createElement(t,n({key:e},ge[e]||{}))}))},getHeader:function(){return l.createElement(ce,null,l.createElement(se,null))},getFooter:function(e){return e.focusOnEdit&&e.hasChanges||e.newFeatures.length>0?null:l.createElement(ue,null)},getEmptyRowsView:function(){return le},getFilterRenderers:p((function(e){return e}),(function(e){return e?re(e).reduce((function(e,t){return i({},e,a({},t.name,s(p((function(e){return k(e,t.name)}),P,(function(e,t){var r={value:e&&(e.rawValue||e.value)};return"EDIT"===t?i({},r,{},{disabled:!0,tooltipMsgId:"featuregrid.filter.tooltips.editMode"}):r})))(ne(t.localType,{name:t.name}))))}),{}):{}})),getDialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&ye[t]})).map((function(e){var t=ye[e];return l.createElement(t,{key:e})}))}}},3949:function(e,t,r){var n=r(1),o=r(2353),i=r(409).zoomToExtent,a=r(2103),l=r(758),s=l.Glyphicon,c=l.Tooltip,u=r(2114);e.exports=[{name:"",key:"geometry",width:35,frozen:!0,events:{onClick:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n.crs;return e.geometry?i(o(e),a||"EPSG:4326"):{type:"NONE"}}},formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t?n.createElement(s,{glyph:"zoom-to"}):n.createElement(u,{placement:"top",overlay:n.createElement(c,{id:"fe-save-features"},n.createElement(a,{msgId:"featuregrid.missingGeometry"}))},n.createElement(s,{glyph:"exclamation-mark"}))}}]},3950:function(e,t,r){var n=r(267).toggleControl,o=r(2133),i=o.toggleTool,a=o.toggleEditMode,l=o.toggleViewMode,s=o.closeFeatureGridConfirm,c=o.saveChanges,u=o.hideSyncPopover,p=o.setTimeSync,f=o.toggleShowAgain,d=o.createNewFeatures,m=o.startEditingFeature,y=o.startDrawingFeature,g=o.deleteGeometry,b=o.openAdvancedSearch,h=o.zoomAll,v=r(2120).createChart,O=r(2176).toggleSyncWms;e.exports={createFeature:function(){return d([{}])},saveChanges:function(){return c()},clearFeatureEditing:function(){return i("clearConfirm",!0)},deleteGeometry:function(){return g()},deleteFeatures:function(){return i("deleteConfirm",!0)},download:function(){return n("wfsdownload")},settings:function(){return i("settings")},switchEditMode:function(){return a()},startEditingFeature:function(){return m()},startDrawingFeature:function(){return y()},switchViewMode:function(){return l()},onClose:function(){return s()},showQueryPanel:function(){return b()},zoomAll:function(){return h()},sync:function(){return O()},setTimeSync:p,hideSyncPopover:function(){return u()},toggleShowAgain:function(){return f()},chart:function(){return v()}}},3951:function(e,t,r){var n=r(2133),o=n.sort,i=n.selectFeatures,a=n.deselectFeatures,l=n.featureModified,s=n.disableToolbar,c=n.updateFilter;e.exports={onGridSort:function(e,t){return o(e,t)},onAddFilter:function(e){return c(e)},onTemporaryChanges:function(e){return s(e)},onGridRowsUpdated:function(e,t){var r,n,o=e.fromRow,i=e.toRow,a=e.updated,s=(r=o,n=i,Array.from({length:n+1-r},(function(e,t){return t+r}))).map((function(e){return t(e)})).filter((function(e){return Object.keys(a||{}).filter((function(t){return e.properties[t]!==a[t]})).length>0}));return l(s,a)},onRowsToggled:function(e,t){return i(e.map((function(e){return t(e.rowIdx)})),!1)},onRowsSelected:function(e,t){return i(e.map((function(e){return t(e.rowIdx)})),!0)},onRowsDeselected:function(e,t){return a(e.map((function(e){return t(e.rowIdx)})))}}},3952:function(e,t,r){var n=r(2133),o=n.changePage,i=n.moreFeatures;e.exports={onPageChange:function(e,t){return o(e,t)},moreFeatures:i}},3953:function(e,t,r){var n=r(1),o=r(758),i=o.ButtonGroup,a=o.Glyphicon,l=o.Checkbox;r(3954);var s=r(2103),c=r(3956)(r(3957)),u=function(e,t){return e?"featuregrid.toolbar.stopDrawGeom":t?"featuregrid.toolbar.drawGeom":"featuregrid.toolbar.addGeom"},p=function(e){var t=e.saving,r=e.saved;return t||r?"featuregrid.toolbar.saving":"featuregrid.toolbar.saveChanges"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.events,r=void 0===t?{}:t,o=e.syncPopover,f=void 0===o?{showPopoverSync:!0,dockSize:"32.2%"}:o,d=e.mode,m=void 0===d?"VIEW":d,y=e.showChartButton,g=void 0===y||y,b=e.selectedCount,h=e.hasChanges,v=e.hasGeometry,O=e.hasNewFeatures,E=e.isSimpleGeom,w=e.isDrawing,S=void 0!==w&&w,P=e.isEditingAllowed,T=e.saving,j=void 0!==T&&T,A=e.saved,C=void 0!==A&&A,x=e.isDownloadOpen,D=e.isColumnsOpen,_=e.disableToolbar,I=e.isSearchAllowed,F=e.disableDownload,k=e.displayDownload,L=e.isSyncActive,R=void 0!==L&&L,N=e.hasSupportedGeometry,M=void 0===N||N,B=e.disableZoomAll,G=void 0!==B&&B,U=e.isFilterActive,W=void 0!==U&&U,V=e.showTimeSyncButton,H=void 0!==V&&V,z=e.timeSync,q=void 0!==z&&z;return n.createElement(i,{id:"featuregrid-toolbar",className:"featuregrid-toolbar featuregrid-toolbar-margin"},n.createElement(c,{id:"edit-mode",keyProp:"edit-mode",tooltipId:"featuregrid.toolbar.editMode",disabled:_,visible:"VIEW"===m&&P,onClick:r.switchEditMode,glyph:"pencil"}),n.createElement(c,{id:"search",keyProp:"search",tooltipId:"featuregrid.toolbar.advancedFilter",active:W,disabled:_||!I,visible:"VIEW"===m,onClick:r.showQueryPanel,glyph:"filter"}),n.createElement(c,{id:"zoom-all",keyProp:"zoom-all",tooltipId:"featuregrid.toolbar.zoomAll",disabled:_||G,visible:"VIEW"===m,onClick:r.zoomAll,glyph:"zoom-to"}),n.createElement(c,{id:"back-view",keyProp:"back-view",tooltipId:"featuregrid.toolbar.quitEditMode",disabled:_,visible:"EDIT"===m&&!h&&!O,onClick:r.switchViewMode,glyph:"arrow-left"}),n.createElement(c,{id:"add-feature",keyProp:"add-feature",tooltipId:"featuregrid.toolbar.addNewFeatures",disabled:_,visible:"EDIT"===m&&!O&&!h&&M,onClick:r.createFeature,glyph:"row-add"}),n.createElement(c,{id:"draw-feature",keyProp:"draw-feature",tooltipId:u(S,E),disabled:_,visible:"EDIT"===m&&1===b&&(!v||v&&!E)&&M,onClick:r.startDrawingFeature,active:S,glyph:"pencil-add"}),n.createElement(c,{id:"remove-features",keyProp:"remove-features",tooltipId:"featuregrid.toolbar.deleteSelectedFeatures",disabled:_,visible:"EDIT"===m&&b>0&&!h&&!O,onClick:r.deleteFeatures,glyph:"trash-square"}),n.createElement(c,{id:"save-feature",keyProp:"save-feature",tooltipId:p({saving:j,saved:C}),disabled:j||C||_,visible:"EDIT"===m&&h||O,active:C,onClick:r.saveChanges,glyph:"floppy-disk"}),n.createElement(c,{id:"cancel-editing",keyProp:"cancel-editing",tooltipId:"featuregrid.toolbar.cancelChanges",disabled:_,visible:"EDIT"===m&&h||O,onClick:r.clearFeatureEditing,glyph:"remove-square"}),n.createElement(c,{id:"delete-geometry",keyProp:"delete-geometry",tooltipId:"featuregrid.toolbar.deleteGeometry",disabled:_,visible:"EDIT"===m&&v&&1===b&&M,onClick:r.deleteGeometry,glyph:"polygon-trash"}),n.createElement(c,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:_||F,active:x,visible:k&&"VIEW"===m,onClick:r.download,glyph:"features-grid-download"}),n.createElement(c,{id:"grid-settings",keyProp:"grid-settings",tooltipId:"featuregrid.toolbar.hideShowColumns",disabled:_,active:D,visible:b<=1&&"VIEW"===m,onClick:r.settings,glyph:"features-grid-set"}),n.createElement(c,{id:"grid-map-chart",keyProp:"grid-map-chart",tooltipId:"featuregrid.toolbar.createNewChart",disabled:_,visible:"VIEW"===m&&g,onClick:r.chart,glyph:"stats"}),n.createElement(c,{id:"grid-map-filter",keyProp:"grid-map-filter",tooltipId:"featuregrid.toolbar.syncOnMap",disabled:_,active:R,visible:"VIEW"===m,onClick:r.sync,glyph:"map-filter",renderPopover:f.showPopoverSync,popoverOptions:!_&&{placement:"top",content:n.createElement("span",null,n.createElement("p",null,n.createElement(s,{msgId:"featuregrid.toolbar.synchPopoverText"})),n.createElement("p",null,n.createElement(l,{checked:f.showAgain,onClick:r.toggleShowAgain},n.createElement(s,{msgId:"featuregrid.toolbar.notShowAgain"})))),props:{id:"sync-popover",title:n.createElement("div",null,n.createElement(s,{msgId:"featuregrid.toolbar.synchPopoverTitle"}),n.createElement("button",{onClick:function(){f.showAgain&&localStorage.setItem("showPopoverSync",!1),r.hideSyncPopover()},className:"close"},n.createElement(a,{className:"pull-right",glyph:"1-close"}))),style:{bottom:f.dockSize}}}}),n.createElement(c,{id:"timeSync-button",keyProp:"fg-timeSync-button",tooltipId:q?"featuregrid.toolbar.disableTimeSync":"featuregrid.toolbar.enableTimeSync",visible:H,active:q,onClick:function(){return r.setTimeSync&&r.setTimeSync(!q)},glyph:"time"}))}},3954:function(e,t,r){var n=r(3955);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3955:function(e,t,r){(e.exports=r(759)()).push([e.i,"\n.msgapi .featuregrid-toolbar {\n    margin-top: 5px;\n    margin-bottom: 5px;\n}\n\n.msgapi #featuregrid-toolbar .btn {\n    overflow: hidden;\n}\n",""])},3956:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=r(407),s=l.compose,c=l.branch,u=l.withProps,p=r(2135),f=r(2709);e.exports=s(u((function(e){var t=e.renderPopover,r=e.popoverOptions,n=a(e,["renderPopover","popoverOptions"]);return o(t?{renderPopover:t,popoverOptions:r}:{},n)})),c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r}),f,p))},3957:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=r(1),f=r(758),d=f.Button,m=f.Glyphicon,y={width:0,padding:0,borderWidth:0},g={},b=function(e){return e?g:y};e.exports=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.id,n=e.visible,a=e.onClick,l=e.glyph,s=e.active,c=e.className,u=void 0===c?"square-button":c,f=i(e,["disabled","id","visible","onClick","glyph","active","className"]);return p.createElement(d,o({},f,{bsStyle:s?"success":"primary",disabled:t,id:"fg-".concat(r),style:b(n),className:u,onClick:function(){return!t&&a()}}),p.createElement(m,{glyph:l}))}}])&&l(r.prototype,n),f&&l(r,f),t}(p.Component)},3958:function(e,t,r){var n=r(1),o=r(758),i=o.Button,a=o.Grid,l=o.Row,s=o.Col,c=o.Glyphicon;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onDownloadToggle:function(){}};return n.createElement(a,{className:"bg-body data-grid-top-toolbar",fluid:!0,style:{width:"100%"}},n.createElement(l,{className:"flex-center"},n.createElement(s,{xs:4},e.children),n.createElement(s,{xs:4},n.createElement("div",{className:"text-center text-primary"},n.createElement("strong",null,e.title))),n.createElement(s,{xs:4},n.createElement(i,{onClick:e.onClose,style:{float:"right"},className:"square-button no-border featuregrid-top-toolbar-margin"},n.createElement(c,{glyph:"1-close"})))))}},3959:function(e,t,r){var n=r(1),o=r(2103),i=r(758),a=i.Button,l=i.Glyphicon,s=i.Grid,c=i.Row,u=i.Col,p=r(2145),f=r(2152).toPage;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,onPageChange:function(){}},t=f(e),r=t.page,i=void 0===r?0:r,d=t.size,m=void 0===d?0:d,y=t.resultSize,g=void 0===y?0:y,b=t.maxPages,h=void 0===b?0:b,v=t.total,O=void 0===v?0:v;return n.createElement(s,{className:"bg-body data-grid-bottom-toolbar",fluid:!0,style:{width:"100%"}},n.createElement(c,{className:"featuregrid-toolbar-margin"},n.createElement(u,{md:3},n.createElement("span",null,n.createElement(o,{msgId:e.virtualScroll?"featuregrid.resultInfoVirtual":"featuregrid.resultInfo",msgParams:{start:i*m+1,end:i*m+g,total:O}}))),e.virtualScroll?null:n.createElement(u,{className:"text-center",md:6},n.createElement(a,{key:"first-page",onClick:function(){return e.onPageChange(0)},disabled:0===i,className:"no-border first-page"},n.createElement(l,{glyph:"step-backward"})),n.createElement(a,{key:"prev-page",onClick:function(){return e.onPageChange(i-1)},disabled:0===i,className:"no-border prev-page"},n.createElement(l,{glyph:"chevron-left"})),n.createElement("span",{key:"page-info"},n.createElement(o,{msgId:"featuregrid.pageInfo",msgParams:{page:i+1,totalPages:h+1}})),n.createElement(a,{key:"next-page",onClick:function(){return e.onPageChange(i+1)},className:"no-border next-page",disabled:i>=h},n.createElement(l,{glyph:"chevron-right"})),n.createElement(a,{key:"last-page",onClick:function(){return e.onPageChange(h)},className:"no-border last-page",disabled:i>=h},n.createElement(l,{glyph:"step-forward"})))," ",n.createElement(u,{md:3},e.loading?n.createElement("span",{style:{float:"right"}},n.createElement(o,{msgId:"loading"}),n.createElement(p,{spinnerName:"circle",style:{float:"right"},noFadeIn:!0})):null)))}},3960:function(e,t,r){var n=r(1),o=r(2357),i=r(2149),a=r(2103);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,l=e.saving,s=void 0!==l&&l,c=e.count,u=e.onConfirm,p=void 0===u?function(){}:u;return n.createElement(i,null,n.createElement(o,{show:!0,onClose:r,onConfirm:p,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:n.createElement(a,{msgId:"featuregrid.deleteButton"}),confirmButtonDisabled:s},n.createElement(a,{msgId:"featuregrid.delete",msgParams:{count:c}})))}},3961:function(e,t,r){var n=r(1),o=r(2357),i=r(2149),a=r(2103);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,l=e.saving,s=void 0!==l&&l,c=e.onConfirm,u=void 0===c?function(){}:c;return n.createElement(i,null,n.createElement(o,{draggable:!1,show:!0,onClose:r,onConfirm:u,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:n.createElement(a,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:s,closeText:n.createElement(a,{msgId:"featuregrid.noButton"})},n.createElement(a,{msgId:"featuregrid.clear"})))}},3962:function(e,t,r){var n=r(1),o=r(2357),i=r(2149),a=r(2103);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,l=e.saving,s=void 0!==l&&l,c=e.onConfirm,u=void 0===c?function(){}:c;return n.createElement(i,null,n.createElement(o,{show:!0,onClose:r,onConfirm:u,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:n.createElement(a,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:s,closeText:n.createElement(a,{msgId:"featuregrid.noButton"})},n.createElement(a,{msgId:"featuregrid.featureClose"})))}},3963:function(e,t,r){var n=r(88).connect,o=r(3964),i=r(2183).getCustomizedAttributes,a=r(2133).customizeAttribute;e.exports=n((function(e){return{attributes:i(e)}}),{onChange:function(e,t){return a(e,"hide",t)}})(o)},3964:function(e,t,r){var n=r(1),o=r(758).Checkbox,i=r(2103);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,a=e.titleMsg,l=void 0===a?"featuregrid.columns":a,s=e.onChange,c=void 0===s?function(){}:s,u=e.attributes,p=void 0===u?[]:u;return n.createElement("div",{className:"bg-body data-attribute-selector",style:r},n.createElement("h4",{className:"text-center"},n.createElement("strong",null,n.createElement(i,{msgId:l}))),n.createElement("div",null,p.map((function(e){return n.createElement(o,{key:e.attribute||e.name,checked:!e.hide,onChange:function(){return c(e.attribute,!e.hide)}},e.label||e.attribute)}))))}},3965:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(15),l=r(13),s=l.get,c=l.head,u=l.isEmpty,p=l.find,f=l.castArray,d=l.includes,m=l.reduce,y=r(771).LOCATION_CHANGE,g=r(71),b=r(2353),h=r(797).fidFilter,v=r(2152),O=v.getDefaultFeatureProjection,E=v.getPagesToLoad,w=r(196).isSimpleGeomType,S=r(26),P=r(2169),T=P.changeDrawingStatus,j=P.GEOMETRY_CHANGED,A=P.drawSupportReset,C=r(3966),x=r(765).findGeometryProperty,D=r(2168),_=D.FEATURE_INFO_CLICK,I=D.HIDE_MAPINFO_MARKER,F=r(2176),k=F.query,L=F.QUERY,R=F.QUERY_CREATE,N=F.QUERY_RESULT,M=F.LAYER_SELECTED_FOR_SEARCH,B=F.FEATURE_TYPE_LOADED,G=F.UPDATE_QUERY,U=F.featureTypeSelected,W=F.createQuery,V=F.updateQuery,H=F.TOGGLE_SYNC_WMS,z=F.QUERY_ERROR,q=F.FEATURE_LOADING,Q=r(2175),Y=Q.reset,K=Q.QUERY_FORM_SEARCH,X=Q.loadFilter,Z=r(409).zoomToExtent,J=r(269),$=J.BROWSE_DATA,ee=J.changeLayerProperties,te=J.refreshLayerVersion,re=J.CHANGE_LAYER_PARAMS,ne=r(2168),oe=ne.closeIdentify,ie=ne.hideMapinfoMarker,ae=r(2133),le=ae.SORT_BY,se=ae.CHANGE_PAGE,ce=ae.SAVE_CHANGES,ue=ae.SAVE_SUCCESS,pe=ae.DELETE_SELECTED_FEATURES,fe=ae.featureSaving,de=ae.changePage,me=ae.saveSuccess,ye=ae.saveError,ge=ae.clearChanges,be=ae.setLayer,he=ae.clearSelection,ve=ae.toggleViewMode,Oe=ae.toggleTool,Ee=ae.CLEAR_CHANGES,we=ae.START_EDITING_FEATURE,Se=ae.TOGGLE_MODE,Pe=ae.MODES,Te=ae.geometryChanged,je=ae.DELETE_GEOMETRY,Ae=ae.deleteGeometryFeature,Ce=ae.SELECT_FEATURES,xe=ae.DESELECT_FEATURES,De=ae.START_DRAWING_FEATURE,_e=ae.CREATE_NEW_FEATURE,Ie=ae.CLEAR_CHANGES_CONFIRMED,Fe=ae.FEATURE_GRID_CLOSE_CONFIRMED,ke=ae.openFeatureGrid,Le=ae.closeFeatureGrid,Re=ae.OPEN_FEATURE_GRID,Ne=ae.CLOSE_FEATURE_GRID,Me=ae.CLOSE_FEATURE_GRID_CONFIRM,Be=ae.OPEN_ADVANCED_SEARCH,Ge=ae.ZOOM_ALL,Ue=ae.UPDATE_FILTER,We=ae.START_SYNC_WMS,Ve=ae.STOP_SYNC_WMS,He=ae.startSyncWMS,ze=ae.storeAdvancedSearchFilter,qe=ae.fatureGridQueryResult,Qe=ae.LOAD_MORE_FEATURES,Ye=ae.SET_TIME_SYNC,Ke=r(267),Xe=Ke.TOGGLE_CONTROL,Ze=Ke.resetControls,Je=Ke.setControlProperty,$e=Ke.toggleControl,et=r(763),tt=et.queryPanelSelector,rt=et.showCoordinateEditorSelector,nt=et.drawerEnabledControlSelector,ot=r(2403).setHighlightFeaturesPath,it=r(2183),at=it.selectedFeaturesSelector,lt=it.changesMapSelector,st=it.newFeaturesSelector,ct=it.hasChangesSelector,ut=it.hasNewFeaturesSelector,pt=it.selectedFeatureSelector,ft=it.selectedFeaturesCount,dt=it.selectedLayerIdSelector,mt=it.isDrawingSelector,yt=it.modeSelector,gt=it.isFeatureGridOpen,bt=it.timeSyncActive,ht=it.hasSupportedGeometry,vt=it.queryOptionsSelector,Ot=it.getAttributeFilters,Et=r(161),wt=Et.error,St=Et.warning,Pt=r(2199),Tt=Pt.describeSelector,jt=Pt.isDescribeLoaded,At=Pt.getFeatureById,Ct=Pt.wfsURL,xt=Pt.wfsFilter,Dt=Pt.featureCollectionResultSelector,_t=Pt.isSyncWmsActive,It=Pt.featureLoadingSelector,Ft=r(408).getSelectedLayer,kt=r(776).interceptOGCError,Lt=r(2152),Rt=Lt.gridUpdateToQueryUpdate,Nt=Lt.updatePages,Mt=r(2393).queryFormUiStateSelector,Bt=r(762).composeAttributeFilters,Gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=s(e,"featuregrid.pagination"),i=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*i:o.page*i,maxFeatures:i}},Ut=function(e,t){return o({},e,{pagination:t})},Wt=function(e,t,r){var n=r.insert,o=r.update,i=r.propertyChange,a=r.getPropertyName;return(0,r.transaction)(t.map((function(e){return n(e)})),Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(r){return o([i(a(r),e[t][r]),h("ogc",t)])}))})))},Vt=function(e,t){return a.Observable.defer((function(){return g.post(e,t,{headers:{"Content-Type":"application/xml"}})})).let(kt)},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featuregrid;return ee(t.selectedLayer,{filterObj:void 0})};e.exports={featureGridBrowseData:function(e,t){return e.ofType($).switchMap((function(r){var n=r.layer,o=s(t.getState(),"query.typeName");return a.Observable.of(Je("drawer","enabled",!1),be(n.id),ke()).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,i=r.id,l=s(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]')),c=function(){return W(n,l||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return jt(t.getState(),o)?a.Observable.of(c(),U(n,o)):a.Observable.of(U(n,o)).merge(e.ofType(B).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName;return t===o})).map(c))}(e,t,n)).merge(a.Observable.of(Y()).filter((function(){return o!==n.name})))}))},featureGridLayerSelectionInitialization:function(e){return e.ofType(M).switchMap((function(e){return a.Observable.of(be(e.id))}))},featureGridStartupQuery:function(e,t){return e.ofType(R).switchMap((function(){return a.Observable.of(de(0)).concat(yt(t.getState())===Pe.VIEW?a.Observable.of(ve()):a.Observable.empty())}))},featureGridSort:function(e,t){return e.ofType(le).switchMap((function(r){var n=r.sortBy,i=r.sortOrder;return a.Observable.of(k(Ct(t.getState()),Ut(o({},xt(t.getState()),{sortOptions:{sortBy:n,sortOrder:i}}),Gt(t.getState())),vt(t.getState()))).merge(e.ofType(N).map((function(e){return qe(s(e,"result.features",[]),[s(e,"filterObj.pagination.startIndex")])})).takeUntil(e.ofType(z)).take(1))}))},featureGridUpdateFilter:function(e,t){return e.ofType(R).switchMap((function(){return e.ofType(Ue).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.update,n=void 0===r?{}:r,i=Ft(t.getState()),a=i.id,l=s(t.getState(),'featuregrid.advancedFilters["'.concat(a,'"]'));if(l){var c=Ot(t.getState())||{},u=m(c,(function(e,t,r){return Rt(o({attribute:r},t),e)}),{}),p=Bt([l,u]),f=o({},l,{},p);return V(f)}return V(Rt(n,xt(t.getState())))}))}))},featureGridChangePage:function(e,t){return e.ofType(se).merge(e.ofType(G).debounceTime(500).map((function(e){return o({},e,{page:0})}))).switchMap((function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,i=e.getState();return a.Observable.of(k(Ct(i),Ut(o({},xt(i)),Gt(i,{page:r,size:n})),vt(i)))}}(t)(r).merge(e.ofType(N).map((function(e){return qe(s(e,"result.features",[]),[s(e,"filterObj.pagination.startIndex")])})).take(1).takeUntil(e.ofType(z)))}))},featureGridReloadPageOnSaveSuccess:function(e,t){return e.ofType(ue).switchMap((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,i=r.size;return a.Observable.of(k(Ct(t.getState()),Ut(o({},xt(t.getState())),Gt(t.getState(),{page:n,size:i})),vt(t.getState())),te(dt(t.getState()))).merge(e.ofType(N).map((function(e){return a.Observable.of(ge(),qe(s(e,"result.features",[]),[s(e,"filterObj.pagination.startIndex")]))})).mergeAll().takeUntil(e.ofType(z)).take(2))}))},savePendingFeatureGridChanges:function(e,t){return e.ofType(ce).switchMap((function(){return a.Observable.of(fe()).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return Vt(n,Wt(e,t,C(r)))}(lt(t.getState()),st(t.getState()),Tt(t.getState()),Ct(t.getState())).map((function(){return me()})).catch((function(e){return a.Observable.of(ye(),wt({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))})))}))},deleteSelectedFeatureGridFeatures:function(e,t){return e.ofType(pe).switchMap((function(){return a.Observable.of(fe()).concat((e=at(t.getState()),r=Tt(t.getState()),n=Ct(t.getState()),Vt(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,C(r)))).map((function(){return me()})).catch((function(e){return a.Observable.of(ye(),wt({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))})).concat(a.Observable.of(Oe("deleteConfirm"),he())));var e,r,n}))},handleEditFeature:function(e,t){return e.ofType(we).switchMap((function(){var e=t.getState(),r=Tt(e),n=O(),o=x(r).localType,i={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},l=S({},pt(e),{type:"Feature"}),s=lt(e);return s[l.id]&&s[l.id]&&s[l.id].geometry&&(l.geometry=s[l.id].geometry),a.Observable.of(T("drawOrEdit",o,"featureGrid",[l],i))}))},handleDrawFeature:function(e,t){return e.ofType(De).switchMap((function(){var e=t.getState(),r=Tt(e),n=O(),o=x(r).localType,i=S({},pt(e),{type:"Feature"}),l=lt(e);l[i.id]&&(l[i.id].geometry||null===l[i.id].geometry)&&(i.geometry=l[i.id].geometry),i._new&&(i.geometry=c(st(e)).geometry);var s={featureProjection:n,stopAfterDrawing:!0,editEnabled:!mt(e),drawEnabled:mt(e)};return a.Observable.of(T("drawOrEdit",o,"featureGrid",[i],s))}))},resetEditingOnFeatureGridClose:function(e,t){return e.ofType(Re).switchMap((function(){return e.ofType(Se).filter((function(){return yt(t.getState())===Pe.EDIT})).take(1).switchMap((function(){return e.ofType(y,Ne).take(1).switchMap((function(){return a.Observable.of(A())}))}))}))},closeRightPanelOnFeatureGridOpen:function(e,t){return e.ofType(Re).switchMap((function(){var e=[Je("metadataexplorer","enabled",!1),Je("annotations","enabled",!1),Je("details","enabled",!1)];return rt(t.getState())&&e.push(Je("measure","enabled",!1)),a.Observable.from(e)}))},onFeatureGridGeometryEditing:function(e,t){return e.ofType(j).filter((function(e){return"featureGrid"===e.owner})).switchMap((function(e){var r=t.getState(),n={featureProjection:O(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=S({},c(e.features),{id:pt(r).id,_new:pt(r)._new,type:"Feature"}),i="enterEditMode"===e.enableEdit?a.Observable.of(T("drawOrEdit",o.geometry.type,"featureGrid",[o],n)):a.Observable.empty();return a.Observable.of(Te([o])).concat(i)}))},deleteGeometryFeature:function(e,t){return e.ofType(je).switchMap((function(){var e=t.getState();return a.Observable.from([Ae(at(e)),A()])}))},triggerDrawSupportOnSelectionChange:function(e,t){return e.ofType(Ce,xe,Ee,Se).filter((function(){return yt(t.getState())===Pe.EDIT&&ht(t.getState())})).switchMap((function(e){return function(e,t){var r,n,o=O(),i=S({},pt(e),{type:"Feature"});if(!u(i)){n=x(Tt(e)).localType;var l=lt(e);if(l[i.id]&&(l[i.id].geometry||null===l[i.id].geometry)&&(i.geometry=l[i.id].geometry),i._new&&!i.geometry){var s=p(st(e),{id:i.id});s&&s.geometry&&(i.geometry=s.geometry)}if(t&&(i.geometry=At(e,i.id)?At(e,i.id).geometry:null),r={featureProjection:o,stopAfterDrawing:w(n),editEnabled:!!i.geometry,drawEnabled:!1,ftId:i.id},1===ft(e))return null===i.geometry||"empty_row"===i.id?a.Observable.from([A()]):a.Observable.from([T("drawOrEdit",n,"featureGrid",[i],r)])}return a.Observable.from([T("clean","","featureGrid",[],{})])}(t.getState(),e.type===Ee)}))},onFeatureGridCreateNewFeature:function(e){return e.ofType(_e).switchMap((function(){return a.Observable.of(A())}))},setHighlightFeaturesPath:function(e,t){return e.ofType(Se).switchMap((function(e){return e.mode===Pe.VIEW?a.Observable.of(A(),ot("featuregrid.select")):e.mode!==Pe.EDIT||ht(t.getState())?a.Observable.of(ot()):a.Observable.of(A(),ot("featuregrid.select"),St({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))}))},resetGridOnLocationChange:function(e){return e.ofType(Re).switchMap((function(){return e.ofType(y).take(1).switchMap((function(){return a.Observable.of(ve(),Le())})).takeUntil(e.ofType(Ne))}))},resetQueryPanel:function(e,t){return e.ofType(y).switchMap((function(){return tt(t.getState())?a.Observable.of(Je("queryPanel","enabled",!1)):a.Observable.empty()}))},autoCloseFeatureGridEpicOnDrowerOpen:function(e,t){return e.ofType(Re).switchMap((function(){return e.ofType(Xe).filter((function(e){return e.control&&"drawer"===e.control&&gt(t.getState())})).switchMap((function(){return a.Observable.of(Le())})).takeUntil(e.ofType(Ne,y))}))},askChangesConfirmOnFeatureGridClose:function(e,t){return e.ofType(Me).switchMap((function(){var e=t.getState();return ct(e)||ut(e)?a.Observable.of(Oe("featureCloseConfirm",!0)):a.Observable.of(Le())}))},onClearChangeConfirmedFeatureGrid:function(e){return e.ofType(Ie).switchMap((function(){return a.Observable.of(ge(),Oe("clearConfirm",!1))}))},onCloseFeatureGridConfirmed:function(e){return e.ofType(Fe).switchMap((function(){return a.Observable.of(Je("drawer","enabled",!1),Oe("featureCloseConfirm",!1))}))},removeWmsFilterOnGridClose:function(e,t){return e.ofType(Re).exhaustMap((function(){return e.ofType(Ne).delay(50).filter((function(){return _t(t.getState())})).switchMap((function(){return a.Observable.of(Ht(t.getState()))})).takeUntil(e.ofType(y,_,Be))}))},autoReopenFeatureGridOnFeatureInfoClose:function(e){return e.ofType(Re).exhaustMap((function(){return a.Observable.race(e.ofType(_).take(1),e.ofType(Ne).take(1)).exhaustMap((function(t){return t.type===Ne?a.Observable.empty():e.ofType(I).switchMap((function(){return a.Observable.of(ke())}))})).takeUntil(e.ofType(y,Xe).filter((function(e){return e.type===y||e.control&&"drawer"===e.control})).merge(e.ofType(Ne).withLatestFrom(e.ofType(_,I).scan((function(e,t){switch(t.type){case _:return!1;case I:return!0;default:return!1}}),!0).startWith(!0),(function(e,t){return t})).filter((function(e){return e}))))}))},onOpenAdvancedSearch:function(e,t){return e.ofType(Be).switchMap((function(){return a.Observable.of(X(s(t.getState(),'featuregrid.advancedFilters["'.concat(dt(t.getState()),'"]'))),Le(),Je("queryPanel","enabled",!0)).merge(a.Observable.race(e.ofType(K).mergeMap((function(e){return a.Observable.of(W(e.searchUrl,e.filterObj),ze(S({},Mt(t.getState()),e.filterObj)),Je("queryPanel","enabled",!1),ke())})),e.ofType(Xe).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).mergeMap((function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[T("clean","","featureGrid",[],{})]:[];return a.Observable.from(e.concat(ke()))}))).takeUntil(e.ofType(Re,y)))}))},onFeatureGridZoomAll:function(e,t){return e.ofType(Ge).filter((function(){return!s(t.getState(),"featuregird.virtualScroll",!1)})).switchMap((function(){return a.Observable.of(Z(b(Dt(t.getState())),"EPSG:4326"))}))},resetControlsOnEnterInEditMode:function(e){return e.ofType(Se).filter((function(e){return e.mode===Pe.EDIT})).map((function(){return Ze(["query"])}))},closeIdentifyWhenOpenFeatureGrid:function(e){return e.ofType(Re).switchMap((function(){return a.Observable.of(oe())}))},startSyncWmsFilter:function(e,t){return e.ofType(H).filter((function(){return _t(t.getState())})).mapTo(He())},stopSyncWmsFilter:function(e,t){return e.ofType(H).filter((function(){return!_t(t.getState())})).switchMap((function(){return a.Observable.from([Ht(t.getState()),{type:Ve}])}))},syncMapWmsFilter:function(e,t){return e.ofType(R,G).filter((function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===R||!r})).switchMap((function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,i=(n||{}).filterObj;return a.Observable.merge(a.Observable.of(_t(t.getState())).filter((function(e){return e})),e.ofType(We)).mergeMap((function(){return a.Observable.of(function(e,t){return ee(e,{filterObj:t})}(o,i))}))}))},virtualScrollLoadFeatures:function(e,t){var r=t.getState;return e.ofType(Qe).filter((function(){return!It(r())})).switchMap((function(t){var n=r(),i=t.pages,l=i.startPage,c=i.endPage,u=n.featuregrid,p=u.pages,f=u.pagination,d=s(f,"size"),m=E(l,c,p,d),y=m[1]-m[0]+1;return a.Observable.of(k(Ct(n),Ut(o({},xt(n)),{startIndex:m[0]*d,maxFeatures:y*d}),vt(n))).filter((function(){return m.length>0})).merge(e.ofType(N).filter((function(){return m.length>0})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,i=r().featuregrid,a=i.features,u=i.maxStoredPages,f=s(o,"pagination.startIndex"),m=Nt(n,{endPage:c,startPage:l},{pages:p,features:a||[]},{size:d,startIndex:f,maxStoredPages:u}),y=m.pages,g=m.features;return qe(g,y)})).take(1).takeUntil(e.ofType(z))).merge(e.ofType(q).filter((function(){return m.length>0})).filter((function(e){return!e.isLoading})).withLatestFrom(e.ofType(Qe)).map((function(e){return e[1]})).take(1).takeUntil(e.ofType(z)))}))},replayOnTimeDimensionChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(re).filter((function(e){var t=e.layer,r=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return(d(f(r),dt(n()))&&d(Object.keys(i),"time")&&bt(n()))})).merge(e.ofType(Ye)).filter((function(){return gt(n())})).withLatestFrom(e.ofType(L),(function(e,t){return t})).switchMap((function(e){return a.Observable.of(W(e.searchUrl,e.filterObj))}))},hideFeatureGridOnDrawerOpenMobile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(Xe).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control;return"drawer"===t&&r().browser&&r().browser.mobile&&nt(r())})).switchMap((function(){return a.Observable.of(ie(),ke())}))},hideDrawerOnFeatureGridOpenMobile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(_).filter((function(){return r().browser&&r().browser.mobile&&nt(r())})).mapTo($e("drawer","enabled"))}}},3966:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=r(13).get,c=r(3967),u=c.insert,p=c.feature,f=c.attribute,d=r(3968).transaction,m=r(3969),y=m.deleteFeaturesByFilter,g=m.deleteFeature,b=r(3971),h=b.update,v=b.propertyChange,O=r(765),E=O.getPropertyDesciptor,w=O.getValue,S=O.findGeometryProperty,P=O.featureTypeSchema,T=r(2802),j=function(e,t){return t&&t.length>0?[e].concat(l(t)):e},A=function(e){this.version=e},C=function(e){return s(e,"featureTypes[0].typeName")},x=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(C(e)):C(e)},D=function(e,t){return e.geometry_name||S(t).name},_=function(e,t){return"geometry"===e||e===D({},t)?D({},t):e};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,i=t.wfsNS,l=void 0===i?"wfs":i,s=a(t,["wfsVersion","wfsNS"]);if("1.1.0"!==n)throw new A(n);var c=function(t){return p(e.targetPrefix,C(e),Object.keys(t.properties||[]).filter((function(t){return E(t,e)})).map((function(r){return f(e.targetPrefix,r,w(t.properties[r],r,e))})).concat(t.geometry?f(e.targetPrefix,D(t,e),w(t.geometry,D(t,e),e)):[]))},m=function(e){return e.features?e.features.map(c):c(e)};return o({},T(o({},s,{wfsVersion:n,wfsNS:l})),{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return u(l,Array.isArray(j(e,r))?j(e,r).map(m):m(e))},getPropertyName:function(t){return _(t,e)},deleteByFilter:function(t){return y(l,t,x(e))},deleteFeature:function(t){return g(l,t,x(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return h(l,x(e),j(t,n))},propertyChange:function(t,r){return v(l,t,w(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return d(j(t,o),P(e),n,l)}})}},3967:function(e,t){var r=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},n=r,o=r;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:o,attribute:n}},3968:function(e,t){e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,i=r.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},3969:function(e,t,r){var n=r(3970).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,r){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},3970:function(e,t,r){var n=r(797),o=n.filter,i=n.fidFilter;e.exports={fidFilter:i,filter:o}},3971:function(e,t){e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},3972:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(26),s=r(13),c=s.head,u=s.get,p=r(2133),f=p.SELECT_FEATURES,d=p.DESELECT_FEATURES,m=p.TOGGLE_FEATURES_SELECTION,y=p.CLEAR_SELECTION,g=p.SET_FEATURES,b=p.FEATURES_MODIFIED,h=p.CREATE_NEW_FEATURE,v=p.SAVING,O=p.SAVE_SUCCESS,E=p.SAVE_ERROR,w=p.CLEAR_CHANGES,S=p.CHANGE_PAGE,P=p.DOCK_SIZE_FEATURES,T=p.SET_LAYER,j=p.TOGGLE_TOOL,A=p.CUSTOMIZE_ATTRIBUTE,C=p.SET_SELECTION_OPTIONS,x=p.TOGGLE_MODE,D=p.MODES,_=p.GEOMETRY_CHANGED,I=p.HIDE_SYNC_POPOVER,F=p.TOGGLE_SHOW_AGAIN_FLAG,k=p.DELETE_GEOMETRY_FEATURE,L=p.START_DRAWING_FEATURE,R=p.SET_PERMISSION,N=p.DISABLE_TOOLBAR,M=p.OPEN_FEATURE_GRID,B=p.CLOSE_FEATURE_GRID,G=p.UPDATE_FILTER,U=p.INIT_PLUGIN,W=p.SIZE_CHANGE,V=p.STORE_ADVANCED_SEARCH_FILTER,H=p.GRID_QUERY_RESULT,z=p.LOAD_MORE_FEATURES,q=p.SET_UP,Q=p.SET_TIME_SYNC,Y=r(2176),K=Y.FEATURE_TYPE_LOADED,X=Y.QUERY_CREATE,Z=r(2169).CHANGE_DRAWING_STATUS,J=r(2349),$={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!0,showAgain:!1,showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),mode:D.VIEW,changes:[],pagination:{page:0,size:20},select:[],multiselect:!1,drawing:!1,newFeatures:[],features:[],dockSize:.35},ee=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return ee(e,t)})).length>0},re=function(e,t,r,n){return e.map((function(e){return te(e,t)?function(e,t,r){return i({},e,r?{properties:i({},e.properties,{},t),geometry:r.geometry}:{properties:i({},e.properties,{},t)})}(e,r,n):e}))};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return l({},e,{showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case z:case S:return l({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case f:var r=t.features.filter((function(e){return"empty_row"!==e.id}));return e.multiselect&&t.append?l({},e,{select:t.append?[].concat(n(e.select),n(r)):r}):r&&e.select&&e.select[0]&&r[0]&&1===e.select.length&&ee(r[0],e.select[0])?e:l({},e,{select:(r||[]).splice(0,1)});case m:var o=e.select.filter((function(e){return!te(e,t.features)})),s=t.features.filter((function(t){return!te(t,e.select)})),p=o.concat(s||[]);return l({},e,{select:p});case d:return l({},e,{select:e.select.filter((function(e){return!te(e,t.features)}))});case C:return l({},e,{multiselect:t.multiselect});case q:return l({},e,t.options||{});case y:return l({},e,{select:[],changes:[]});case g:return l({},e,{features:t.features});case P:return l({},e,{dockSize:t.dockSize});case T:return l({},e,{selectedLayer:t.id});case j:return l({},e,{tools:i({},e.tools,a({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case A:return l({},e,{attributes:i({},e.attributes,a({},t.name,i({},e.attributes&&e.attributes[t.name]||{},a({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case x:return l({},e,{showPopoverSync:localStorage&&null!==localStorage.getItem("showPopoverSync")?"true"===localStorage.getItem("showPopoverSync"):t.mode!==D.EDIT,tools:t.mode===D.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===D.EDIT,drawing:!1});case b:var Y=t.features.filter((function(e){return e._new}))||[];return l({},e,{newFeatures:Y.length>0?re(e.newFeatures,Y,t.updated,null):e.newFeatures,changes:[].concat(n(e&&e.changes||[]),n(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:t.updated}}))))});case v:return l({},e,{saving:!0,loading:!0});case O:return l({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case w:return l({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[],select:[]});case h:var ne=J.v1();return l({},e,{newFeatures:t.features.map((function(e){return i({},e,{_new:!0,id:ne,type:"Feature",geometry:null})})),select:t.features.map((function(e){return i({},e,{_new:!0,id:ne,type:"Feature",geometry:null})}))});case E:return l({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case _:var oe=t.features.filter((function(e){return e._new}))||[];return l({},e,{newFeatures:oe.length>0?re(e.newFeatures,oe,null,{geometry:i({},c(oe).geometry)}):e.newFeatures,changes:[].concat(n(e&&e.changes||[]),n(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:c(t.features).geometry}}})))),drawing:!1});case k:var ie=t.features.filter((function(e){return e._new}))||[];return l({},e,{newFeatures:ie.length>0?re(e.newFeatures,ie,null,{geometry:null}):e.newFeatures,changes:[].concat(n(e&&e.changes||[]),n(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:null}}}))))});case K:return l({},e,{localType:u(t,"featureType.original.featureTypes[0].properties[1].localType")});case L:return l({},e,{drawing:!e.drawing});case M:return l({},e,{open:!0});case B:return l({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:D.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[],select:[]});case N:return l({},e,{disableToolbar:t.disabled});case R:return l({},e,{canEdit:t.permission.canEdit});case Z:return"clean"===t.status?l({},e,{drawing:!1}):e;case G:var ae=t.update||{},le=ae.attribute;return le?l({},e,{filters:i({},e.filters,a({},le,t.update))}):e;case X:return l({},e,{filters:{}});case W:var se=t.dockProps&&t.dockProps.maxDockSize,ce=t.dockProps&&t.dockProps.minDockSize,ue=se&&ce&&ce<=t.size&&se>=t.size&&t.size||se&&se<t.size&&se||ce&&ce>t.size&&ce||t.size;return l({},e,{dockSize:ue});case V:return l({},e,{advancedFilters:l({},e.advancedFilters,a({},e.selectedLayer,t.filterObj))});case H:return l({},e,{features:t.features||[],pages:t.pages||[]});case I:return l({},e,{showPopoverSync:!1});case F:return l({},e,{showAgain:!e.showAgain});case Q:return l({},e,{timeSync:t.value});default:return e}}},3973:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(88).connect,m=r(2748).default,y=r(195).createSelector,g=r(269),b=g.changeLayerProperties,h=g.changeGroupProperties,v=g.toggleNode,O=g.sortNode,E=g.showSettings,w=g.hideSettings,S=g.updateSettings,P=g.updateNode,T=g.removeNode,j=r(2192),A=r(2306).getLayerCapabilities,C=r(2369),x=C.storeCurrentFilter,D=C.discardCurrentFilter,_=C.applyFilter,I=r(409).zoomToExtent,F=r(267).toggleControl,k=r(408),L=k.groupsSelector,R=k.selectedLayerLoadingErrorSelector,N=r(268).mapSelector,M=r(2523).isDashboardAvailable,B=r(2393),G=B.crossLayerFilterSelector,U=B.availableCrossLayerFilterLayersSelector,W=B.storedFilterSelector,V=B.appliedFilterSelector,H=r(13).isEqual,z=r(137),q=r(3974),Q=r(3997),Y=r(3998),K=Y.featureTypeSelectedEpic,X=Y.wfsQueryEpic,Z=Y.viewportSelectedEpic,J=Y.redrawSpatialFilterEpic,$=r(4e3),ee=r(200).bindActionCreators,te=r(2140).mapLayoutValuesSelector,re=r(4001),ne=r(2173),oe=r(2149),ie=r(2175),ae=ie.addGroupField,le=ie.addFilterField,se=ie.removeFilterField,ce=ie.updateFilterField,ue=ie.updateExceptionField,pe=ie.updateLogicCombo,fe=ie.removeGroupField,de=ie.changeCascadingValue,me=ie.expandAttributeFilterPanel,ye=ie.expandSpatialFilterPanel,ge=ie.expandCrossLayerFilterPanel,be=ie.selectSpatialMethod,he=ie.selectViewportSpatialMethod,ve=ie.selectSpatialOperation,Oe=ie.removeSpatialSelection,Ee=ie.changeSpatialFilterValue,we=ie.showSpatialSelectionDetails,Se=ie.setCrossLayerFilterParameter,Pe=ie.addCrossLayerFilterField,Te=ie.updateCrossLayerFilterField,je=ie.removeCrossLayerFilterField,Ae=ie.resetCrossLayerFilter,Ce=ie.search,xe=ie.reset,De=ie.changeDwithinValue,_e=ie.zoneGetValues,Ie=ie.zoneSearch,Fe=ie.zoneChange,ke=ie.toggleMenu,Le=r(2176).initQueryPanel,Re=r(2169).changeDrawingStatus,Ne=xe.bind(null,"query"),Me=d((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:c({layers:U(e),crossLayerFilter:G(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:(N(e)||{}).zoom,projection:(N(e)||{}).projection}}),(function(e){return{attributeFilterActions:ee({onAddGroupField:ae,onAddFilterField:le,onRemoveFilterField:se,onUpdateFilterField:ce,onUpdateExceptionField:ue,onUpdateLogicCombo:pe,onRemoveGroupField:fe,onChangeCascadingValue:de,toggleMenu:ke,onExpandAttributeFilterPanel:me},e),spatialFilterActions:ee({onChangeSpatialFilterValue:Ee,onExpandSpatialFilterPanel:ye,onSelectSpatialMethod:be,onSelectViewportSpatialMethod:he,onSelectSpatialOperation:ve,onChangeDrawingStatus:Re,onRemoveSpatialSelection:Oe,onShowSpatialSelectionDetails:we,onChangeDwithinValue:De,zoneFilter:_e,zoneSearch:Ie,zoneChange:Fe},e),queryToolbarActions:ee({onQuery:Ce,onReset:Ne,onSaveFilter:x,onRestoreFilter:D,storeAppliedFilter:_,onChangeDrawingStatus:Re},e),crossLayerFilterActions:ee({expandCrossLayerFilterPanel:ge,setCrossLayerFilterParameter:Se,addCrossLayerFilterField:Pe,updateCrossLayerFilterField:Te,removeCrossLayerFilterField:je,resetCrossLayerFilter:Ae},e)}}))(q),Be=y([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},L,function(e){return e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}}},function(e){return e.controls&&e.controls.queryPanel&&e.controls.queryPanel.enabled||!1},function(e){return te(e,{height:!0})},M,V,W,function(e){return e&&e.query&&e.query.isLayerFilter},R],(function(e,t,r,n,o,i,a,l,s,c){return{enabled:e,groups:t,settings:r,querypanelEnabled:n,layout:i?{}:o,appliedFilter:a,storedFilter:l,advancedToolbar:s,loadingError:c}})),Ge=function(e){function t(e){var r,o,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,l=i(t).call(this,e),r=!l||"object"!==n(l)&&"function"!=typeof l?a(o):l,u(a(r),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),u(a(r),"renderSidebar",(function(){return f.createElement(m,{open:r.props.querypanelEnabled,sidebar:r.renderQueryPanel(),sidebarClassName:"query-form-panel-container",styles:{sidebar:c({},r.props.layout,{zIndex:1024,width:600}),overlay:{zIndex:1023,width:0},root:{right:r.props.querypanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},f.createElement("div",null))})),u(a(r),"onToggle",(function(){r.props.advancedToolbar&&!H(r.props.appliedFilter,r.props.storedFilter)?r.setState((function(){return{showModal:!0}})):r.props.onToggleQuery()})),u(a(r),"restoreAndClose",(function(){r.setState((function(){return{showModal:!1}})),r.props.onRestoreFilter(),r.props.onToggleQuery()})),u(a(r),"storeAndClose",(function(){r.setState((function(){return{showModal:!1}})),r.props.onSaveFilter(),r.props.onToggleQuery()})),u(a(r),"renderQueryPanel",(function(){return f.createElement("div",{className:"mapstore-query-builder"},f.createElement(Me,{header:f.createElement(Q,{loadingError:r.props.loadingError,onToggleQuery:r.onToggle}),spatialOperations:r.props.spatialOperations,spatialMethodOptions:r.props.spatialMethodOptions,toolsOptions:r.props.toolsOptions,featureTypeErrorText:f.createElement(j,{msgId:"layerProperties.featureTypeError"}),appliedFilter:r.props.appliedFilter,storedFilter:r.props.storedFilter,advancedToolbar:r.props.advancedToolbar,loadingError:r.props.loadingError}),f.createElement(oe,null,f.createElement(ne,{fade:!0,show:r.state.showModal,title:f.createElement(j,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return r.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:f.createElement(j,{msgId:"yes"}),onClick:r.storeAndClose},{bsStyle:"primary",text:f.createElement(j,{msgId:"no"}),onClick:r.restoreAndClose}]},f.createElement("div",{className:"ms-alert"},f.createElement("div",{className:"ms-alert-center"},f.createElement(j,{msgId:r.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),r.state={showModal:!1},r}var r,s,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,(s=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.querypanelEnabled&&!1===this.props.querypanelEnabled&&this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&o(r.prototype,s),p&&o(r,p),t}(f.Component);u(Ge,"propTypes",{id:p.number,buttonContent:p.node,groups:p.array,settings:p.object,querypanelEnabled:p.bool,groupStyle:p.object,groupPropertiesChangeHandler:p.func,layerPropertiesChangeHandler:p.func,onToggleGroup:p.func,onToggleLayer:p.func,onToggleQuery:p.func,onZoomToExtent:p.func,retrieveLayerData:p.func,onSort:p.func,onInit:p.func,onSettings:p.func,hideSettings:p.func,updateSettings:p.func,updateNode:p.func,removeNode:p.func,activateRemoveLayer:p.bool,activateLegendTool:p.bool,activateZoomTool:p.bool,activateSettingsTool:p.bool,visibilityCheckType:p.string,settingsOptions:p.object,layout:p.object,toolsOptions:p.object,appliedFilter:p.object,storedFilter:p.object,advancedToolbar:p.bool,onSaveFilter:p.func,onRestoreFilter:p.func}),u(Ge,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},querypanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){}});var Ue=d(Be,{groupPropertiesChangeHandler:h,layerPropertiesChangeHandler:b,retrieveLayerData:A,onToggleGroup:z.toggleByType("groups",v),onToggleLayer:z.toggleByType("layers",v),onToggleQuery:F.bind(null,"queryPanel",null),onSort:z.sortUsing(z.sortLayers,O),onSettings:E,onInit:Le,onZoomToExtent:I,hideSettings:w,updateSettings:S,updateNode:P,removeNode:T,onSaveFilter:x,onRestoreFilter:D})(Ge);e.exports={QueryPanelPlugin:Ue,reducers:{queryform:r(2745),query:r(2746),layerFilter:r(4002)},epics:c({featureTypeSelectedEpic:K,wfsQueryEpic:X,viewportSelectedEpic:Z,redrawSpatialFilterEpic:J},$,{},r(4003),{},re)}},3974:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(2865),m=r(3984),y=r(3990),g=r(3991)(r(3992)),b=r(2119),h=r(2145);r(3995);var v=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return f.createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText);var e=f.createElement("div",{className:"m-header"},this.props.header,f.createElement(y,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError}));return this.props.attributes.length>0?f.createElement(b,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},f.createElement(d,{autocompleteEnabled:this.props.autocompleteEnabled,maxFeaturesWPS:this.props.maxFeaturesWPS,attributes:this.props.attributes,groupLevels:this.props.groupLevels,filterFields:this.props.filterFields,groupFields:this.props.groupFields,removeButtonIcon:this.props.removeButtonIcon,addButtonIcon:this.props.addButtonIcon,attributePanelExpanded:this.props.attributePanelExpanded,actions:this.props.attributeFilterActions}),this.props.toolsOptions.hideSpatialFilter?null:f.createElement(m,{useMapProjection:this.props.useMapProjection,spatialField:this.props.spatialField,spatialOperations:this.props.spatialOperations,spatialMethodOptions:this.props.spatialMethodOptions,spatialPanelExpanded:this.props.spatialPanelExpanded,showDetailsPanel:this.props.showDetailsPanel,actions:this.props.spatialFilterActions,zoom:this.props.zoom,projection:this.props.projection}),this.props.toolsOptions.hideCrossLayer?null:f.createElement(g,o({spatialOperations:this.props.spatialOperations,crossLayerExpanded:this.props.crossLayerExpanded,searchUrl:this.props.searchUrl,featureTypeName:this.props.featureTypeName},this.props.crossLayerFilterOptions,this.props.crossLayerFilterActions))):f.createElement("div",{style:{margin:"0 auto",width:"60px"}},f.createElement(h,{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&a(r.prototype,n),u&&a(r,u),t}(f.Component);u(v,"propTypes",{params:p.object,featureTypeConfigUrl:p.string,useMapProjection:p.bool,attributes:p.array,featureTypeError:p.string,featureTypeErrorText:p.node,groupLevels:p.number,maxFeaturesWPS:p.number,filterFields:p.array,groupFields:p.array,spatialField:p.object,removeButtonIcon:p.string,addButtonIcon:p.string,attributePanelExpanded:p.bool,spatialPanelExpanded:p.bool,crossLayerExpanded:p.bool,showDetailsPanel:p.bool,toolbarEnabled:p.bool,searchUrl:p.string,showGeneratedFilter:p.oneOfType([p.bool,p.string]),filterType:p.string,featureTypeName:p.string,ogcVersion:p.string,attributeFilterActions:p.object,spatialFilterActions:p.object,queryToolbarActions:p.object,resultTitle:p.string,pagination:p.object,sortOptions:p.object,spatialOperations:p.array,spatialMethodOptions:p.array,crossLayerFilterOptions:p.object,crossLayerFilterActions:p.object,hits:p.bool,maxHeight:p.number,allowEmptyFilter:p.bool,autocompleteEnabled:p.bool,emptyFilterWarning:p.bool,header:p.node,zoom:p.number,projection:p.string,toolsOptions:p.object,appliedFilter:p.object,storedFilter:p.object,advancedToolbar:p.bool,loadingError:p.bool}),u(v,"defaultProps",{params:{},featureTypeConfigUrl:null,useMapProjection:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,spatialPanelExpanded:!0,showDetailsPanel:!1,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,autocompleteEnabled:!0,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,attributeFilterActions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){}},spatialFilterActions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeDwithinValue:function(){}},crossLayerFilterOptions:{},crossLayerFilterActions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{}}),e.exports=v},3975:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(758),m=d.Row,y=d.Col,g=r(2394),b=r(26),h=r(136),v=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderOperatorField",(function(){return f.createElement(g,{fieldOptions:r.props.operatorOptions,fieldName:"operator",fieldRowId:r.props.filterField.rowId,fieldValue:r.props.filterField.operator,onUpdateField:r.updateFieldElement})})),u(s(r),"renderValueField",(function(e){return f.cloneElement(f.Children.toArray(r.props.children).filter((function(t){return t.props.attType===e.type}))[0],b({fieldName:"value",fieldRowId:r.props.filterField.rowId,fieldValue:r.props.filterField.value,fieldException:r.props.filterField.exception,onUpdateField:r.updateFieldElement,toggleMenu:r.props.toggleMenu,maxFeaturesWPS:r.props.maxFeaturesWPS,onUpdateExceptionField:r.updateExceptionFieldElement},e.fieldOptions||{}))})),u(s(r),"updateExceptionFieldElement",(function(e,t){r.props.onUpdateExceptionField(e,t)})),u(s(r),"updateFieldElement",(function(e,t,n,o,i){var a;if("attribute"===t?(a=r.props.attributes.filter((function(e){return e.attribute===n}))[0],r.props.onUpdateField(e,t,n,a&&a.type||o,i)):r.props.onUpdateField(e,t,n,"boolean"===o?"string":o,i),"value"===t){var l=r.props.attributes.filter((function(e){return e.dependson&&e.dependson.field===r.props.filterField.attribute}));l.length>0&&r.props.onChangeCascadingValue(l)}})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return f.createElement("div",{className:"container-fluid"},f.createElement(m,{className:"filter-field-row"},f.createElement(y,{xs:4},f.createElement(g,{valueField:"id",textField:"name",fieldOptions:this.props.attributes.map((function(e){return{id:e.attribute,name:e.label}})),placeholder:h.getMessageById(this.context.messages,"queryform.attributefilter.combo_placeholder"),fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),f.createElement(y,{xs:this.props.deleteButton?2:3},t?this.renderOperatorField():null),f.createElement(y,{xs:5},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?f.createElement(y,{xs:1},this.props.deleteButton):null))}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(v,"propTypes",{attributes:p.array,filterField:p.object,operatorOptions:p.array,onUpdateField:p.func,maxFeaturesWPS:p.number,toggleMenu:p.func,deleteButton:p.node,onUpdateExceptionField:p.func,onChangeCascadingValue:p.func}),u(v,"contextTypes",{messages:p.object}),u(v,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}}),e.exports=v},3976:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(12);r(2806)(d);var m=r(2807).default,y=r(2103),g=r(770).getDateTimeFormat,b=r(2177).DateTimePicker,h=r(758),v=h.Row,O=h.Col,E=m({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(b);r(2379);var w=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"updateValueState",(function(e){e.startDate&&e.endDate&&e.startDate>e.endDate?r.props.onUpdateExceptionField(r.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):r.props.onUpdateExceptionField(r.props.fieldRowId,null),r.props.onUpdateField(r.props.fieldRowId,r.props.fieldName,e,r.props.attType)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,r=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?p.createElement("div",null,p.createElement(v,null,p.createElement(O,{xs:6},this.props.showLabels&&p.createElement(y,{msgId:"queryform.from"}),p.createElement(E,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:g(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:r})}})),p.createElement(O,{xs:6},this.props.showLabels&&p.createElement(y,{msgId:"queryform.to"}),p.createElement(E,{type:this.props.attType,defaultValue:r,value:r,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:g(this.context.locale,this.props.attType),onChange:function(r){return e.updateValueState({startDate:t,endDate:r})}})))):p.createElement(v,null,p.createElement(O,{xs:12},this.props.showLabels&&p.createElement(y,{msgId:"queryform.date"}),p.createElement(E,{type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:g(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}})))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(w,"propTypes",{attType:f.string,dateEnabled:f.bool,fieldName:f.string,fieldRowId:f.number,fieldValue:f.object,fieldException:f.string,operator:f.string,onUpdateField:f.func,onUpdateExceptionField:f.func,showLabels:f.bool,timeEnabled:f.bool}),u(w,"contextTypes",{locale:f.string}),u(w,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1}),e.exports=w},3977:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(0),m=r(1),y=r(758),g=y.Tooltip,b=y.Row,h=y.Col,v=r(2114),O=r(136);r(3978)();var E=r(2177).NumberPicker,w=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"renderPicker",(function(e){var t=r.props.label?m.createElement("label",null,r.props.label):null,n=r.props.lowLabel?m.createElement("label",null,r.props.lowLabel):null,o=r.props.upLabel?m.createElement("label",null,r.props.upLabel):null;return"><"===r.props.operator?m.createElement("div",null,m.createElement(b,null,m.createElement(h,{xs:6},n,m.createElement(E,i({style:e,value:r.props.fieldValue&&null!==r.props.fieldValue.lowBound&&void 0!==r.props.fieldValue.lowBound?r.props.fieldValue.lowBound:null,onChange:function(e){return!isNaN(e)&&r.changeNumber({lowBound:e,upBound:r.props.fieldValue&&null!==r.props.fieldValue.upBound&&void 0!==r.props.fieldValue.upBound?r.props.fieldValue.upBound:null})}},r.props.options))),m.createElement(h,{xs:6},o,m.createElement(E,i({style:e,value:r.props.fieldValue&&null!==r.props.fieldValue.upBound&&void 0!==r.props.fieldValue.upBound?r.props.fieldValue.upBound:null,onChange:function(e){return!isNaN(e)&&r.changeNumber({upBound:e,lowBound:r.props.fieldValue&&null!==r.props.fieldValue.lowBound&&void 0!==r.props.fieldValue.lowBound?r.props.fieldValue.lowBound:null})}},r.props.options))))):m.createElement(b,null,m.createElement(h,{xs:12},t,m.createElement(E,i({style:e,value:r.props.fieldValue&&null!==r.props.fieldValue.lowBound&&void 0!==r.props.fieldValue.lowBound?r.props.fieldValue.lowBound:r.props.fieldValue,onChange:function(e){return!isNaN(e)&&r.changeNumber(e)}},r.props.options))))})),f(u(r),"changeNumber",(function(e){"><"===r.props.operator?null!==e.lowBound&&void 0!==e.lowBound&&null!==e.upBound&&void 0!==e.upBound&&e.lowBound>=e.upBound?r.props.onUpdateExceptionField(r.props.fieldRowId,O.getMessageById(r.context.messages,"queryform.attributefilter.numberfield.wrong_range")):r.props.fieldException&&r.props.onUpdateExceptionField(r.props.fieldRowId,null):r.props.isRequired&&null==e?r.props.onUpdateExceptionField(r.props.fieldRowId,O.getMessageById(r.context.messages,"queryform.attributefilter.numberfield.isRequired")):r.props.fieldException&&r.props.onUpdateExceptionField(r.props.fieldRowId,null),r.props.onUpdateField(r.props.fieldRowId,r.props.fieldName,e,r.props.attType)})),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.style,{borderColor:"#FF0000"})),m.createElement(v,{placement:"bottom",overlay:this.props.fieldException?m.createElement(g,{id:this.props.fieldRowId+"_tooltip"},m.createElement("strong",null,this.props.fieldException)):m.createElement("noscript",null)},this.renderPicker(e))}}])&&l(r.prototype,n),d&&l(r,d),t}(m.Component);f(w,"propTypes",{operator:d.string,fieldName:d.string,fieldRowId:d.number,attType:d.string,fieldValue:d.oneOfType([d.number,d.object]),fieldException:d.oneOfType([d.object,d.bool,d.string]),onUpdateField:d.func,onUpdateExceptionField:d.func,isRequired:d.bool,label:d.string,lowLabel:d.string,upLabel:d.string,options:d.shape({format:d.string,min:d.number,max:d.number,step:d.number,precision:d.number}),style:d.object}),f(w,"contextTypes",{messages:d.object}),f(w,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}}),e.exports=w},3981:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(758),d=f.FormControl,m=f.Tooltip,y=r(136),g=r(2114),b=r(2260),h=r(0),v=r(762).isLikeOrIlike,O=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderField",(function(){var e=y.getMessageById(r.context.messages,"queryform.attributefilter.text_placeholder"),t=p.createElement(m,{id:"textField-tooltip"+r.props.fieldRowId},p.createElement(b,{msgId:"queryform.attributefilter.tooltipTextField"})),n=p.createElement(d,{disabled:"isNull"===r.props.operator,placeholder:e,onChange:r.changeText,type:"text",value:r.props.fieldValue||""});return v(r.props.operator)?p.createElement(g,{key:"textField-overlay"+r.props.fieldRowId,placement:"top",overlay:t},n):n})),u(s(r),"changeText",(function(e){r.props.onUpdateField(r.props.fieldRowId,r.props.fieldName,e.target.value,r.props.attType)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?p.createElement("label",null,this.props.label):p.createElement("span",null);return p.createElement("div",{className:"textField"},e,this.renderField())}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(O,"propTypes",{operator:h.string,fieldName:h.string,fieldRowId:h.number,attType:h.string,fieldValue:h.string,label:h.string,fieldException:h.oneOfType([h.object,h.string]),onUpdateField:h.func,onUpdateExceptionField:h.func,style:h.object}),u(O,"contextTypes",{messages:h.object}),u(O,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}}),e.exports=O},3982:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(26),m=r(2532),y=r(2531),g=r(762).isLikeOrIlike,b=r(2260),h=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getOptions",(function(){return r.props.filterField&&r.props.filterField.options&&r.props.filterField.options[r.props.filterField.attribute]&&r.props.filterField.options[r.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),u(s(r),"getPagination",(function(e){if(!r.props.filterField.options)return{};var t=Math.ceil(r.props.filterField.fieldOptions.valuesCount/r.props.maxFeaturesWPS),n=1===r.props.filterField.fieldOptions.currentPage||!r.props.filterField.fieldOptions.currentPage,o=r.props.filterField.fieldOptions.currentPage===t||!r.props.filterField.fieldOptions.currentPage;return d({},r.props.pagination,{paginated:0!==e.length&&!(n&&1===e.length),firstPage:n,lastPage:o,loadPrevPage:function(){return r.props.onUpdateField(r.props.filterField.rowId,"value",r.props.filterField.value,"string",{currentPage:r.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return r.props.onUpdateField(r.props.filterField.rowId,"value",r.props.filterField.value,"string",{currentPage:r.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),u(s(r),"getTooltip",(function(){return d({},r.props.tooltip,{enabled:g(r.props.filterField.operator),id:r.props.filterField.rowId,message:f.createElement(b,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:r.props.filterField.rowId,placement:"top"})})),u(s(r),"renderField",(function(){var e;r.props.filterField&&r.props.filterField.value&&"*"!==r.props.filterField.value&&(e={value:r.props.filterField.value,label:r.props.filterField.value});var t=r.getOptions()?r.getOptions().slice(0):[];return f.createElement(y,{busy:r.props.filterField.loading,data:r.props.filterField.loading?[]:t,disabled:"isNull"===r.props.filterField.operator,itemComponent:r.props.itemComponent,open:r.props.filterField.openAutocompleteMenu,onChange:function(e){return r.handleChange(e)},onFocus:function(){return r.handleFocus(t)},onSelect:function(){return r.handleSelect()},onToggle:function(){return r.handleToggle(t)},pagination:r.getPagination(t),selectedValue:e&&e.value,tooltip:r.getTooltip()})})),u(s(r),"handleSelect",(function(){r.selected=!0})),u(s(r),"handleChange",(function(e){r.selected?(r.selected=!1,e&&""!==e.value&&r.props.onUpdateField(r.props.filterField.rowId,"value",e.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):r.props.onUpdateField(r.props.filterField.rowId,"value","string"==typeof e?e:e.value,"string",{currentPage:1,delayDebounce:1e3})})),u(s(r),"handleFocus",(function(e){r.loadWithoutfilter(e)})),u(s(r),"handleToggle",(function(){r.props.toggleMenu(r.props.filterField.rowId,!r.props.filterField.openAutocompleteMenu)})),u(s(r),"loadWithoutfilter",(function(e){0!==e.length||r.props.filterField.value||r.props.onUpdateField(r.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.label?f.createElement("label",null,this.props.label):f.createElement("span",null);return f.createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(h,"propTypes",{disabled:p.bool,filterField:p.object,label:p.string,itemComponent:p.oneOfType([p.object,p.func]),maxFeaturesWPS:p.number,onUpdateField:p.func,pagination:p.object,textField:p.string,tooltip:p.object,toggleMenu:p.func,valueField:p.string}),u(h,"contextTypes",{messages:p.object}),u(h,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:m,toggleMenu:function(){},filterField:{fieldOptions:{}}}),e.exports=h},3983:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(13).find,d=r(0),m=r(758).Glyphicon,y=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{open:!1}),u(s(r),"getSelected",(function(){return f(r.props.options,r.getFindFunciton())})),u(s(r),"getValue",(function(e){return r.props.valueField&&e&&e[r.props.valueField]?e[r.props.valueField]:e})),u(s(r),"getLabel",(function(e){return r.props.labelField&&e&&e[r.props.labelField]?e[r.props.labelField]:r.getValue(e)})),u(s(r),"getFindFunciton",(function(){return r.props.valueField?u({},r.props.valueField,r.props.value):r.props.value})),u(s(r),"renderLabel",(function(e){return r.props.labelRenderer?r.props.labelRenderer(e):r.getLabel(e)})),u(s(r),"handleOutsideClick",(function(e){r.node&&r.node.contains&&!r.node.contains(e.target)&&r.state.open?r.handleClick():document&&!r.node&&r.handleOutsideClick&&document.removeEventListener("click",r.handleOutsideClick,!1)})),u(s(r),"handleClick",(function(){document&&!r.state.open?document.addEventListener("click",r.handleOutsideClick,!1):document.removeEventListener("click",r.handleOutsideClick,!1);var e=!r.state.open;r.setState({open:e})})),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return p.createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},p.createElement("span",{onClick:this.handleClick},p.createElement("strong",null,this.renderLabel(this.getSelected())),p.createElement(m,{glyph:"chevron-down"})),this.state.open&&p.createElement("div",{className:"m-options"},p.createElement("ul",null,this.props.options.map((function(t,r){return p.createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&i(r.prototype,n),d&&i(r,d),t}(p.Component);u(y,"propTypes",{options:d.array,value:d.any,onSelect:d.func,valueField:d.string,labelField:d.string,labelRenderer:d.any}),u(y,"defaultProps",{onSelect:function(){},options:[]}),e.exports=y},3984:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(13).find,m=r(0),y=r(758),g=y.Row,b=y.Col,h=y.Panel,v=y.Glyphicon,O=y.FormControl,E=r(2394),w=r(3985),S=r(3986).AutocompleteWFSCombobox,P=r(3988),T=r(2810).createWFSFetchStream,j=r(3989),A=r(136),C=r(2233),x=r(2241),D=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"getMethodFromId",(function(e){return d(r.props.spatialMethodOptions,(function(t){return t&&t.id===e}))||null})),p(c(r),"renderHeader",(function(){var e=A.getMessageById(r.context.messages,"queryform.spatialfilter.spatial_filter_header");return f.createElement("span",null,f.createElement("span",{style:{cursor:"pointer"},onClick:r.props.actions.onExpandSpatialFilterPanel.bind(null,!r.props.spatialPanelExpanded)},e),f.createElement("button",{onClick:r.props.actions.onExpandSpatialFilterPanel.bind(null,!r.props.spatialPanelExpanded),className:"close"},r.props.spatialPanelExpanded?f.createElement(v,{glyph:"glyphicon glyphicon-collapse-down"}):f.createElement(v,{glyph:"glyphicon glyphicon-expand"})))})),p(c(r),"renderSpatialHeader",(function(){var e=r.getMethodFromId(r.props.spatialField.method);return f.createElement("div",null,f.createElement(g,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},f.createElement(b,{xs:6},f.createElement("div",null,f.createElement(x.Message,{msgId:"queryform.spatialfilter.filterType"}))),f.createElement(b,{xs:6},f.createElement(E,{itemComponent:function(e){return f.createElement(P,o({customItemClassName:r.getMethodFromId(e.item)&&r.getMethodFromId(e.item).customItemClassName||""},e))},fieldOptions:r.props.spatialMethodOptions.map((function(e){return A.getMessageById(r.context.messages,e.name)||e.name})),placeholder:A.getMessageById(r.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:A.getMessageById(r.context.messages,e?e.name:"")||e&&e.name||"",onUpdateField:r.updateSpatialMethod}))))})),p(c(r),"renderDwithin",(function(){return f.createElement(g,{className:"container-fluid filter-field-fixed-row"},f.createElement(b,{xs:6,className:"filter-text-desc"},f.createElement(x.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),f.createElement(b,{xs:6},f.createElement(O,{type:"number",min:"0",defaultValue:"0",disabled:!r.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(e){return r.props.actions.onChangeDwithinValue(e.target.value,name)}})))})),p(c(r),"renderZoneFields",(function(){return r.props.spatialField.method&&"ZONE"===r.props.spatialField.method&&r.props.spatialField.zoneFields&&r.props.spatialField.zoneFields.length>0?r.props.spatialField.zoneFields.map((function(e){return f.createElement(j,{key:e.id,open:e.open,zoneId:e.id,url:e.url,typeName:e.typeName,wfs:e.wfs,busy:e.busy,label:e.label,values:e.values,value:e.value,valueField:e.valueField,textField:e.textField,searchText:e.searchText,searchMethod:e.searchMethod,searchAttribute:e.searchAttribute,sort:e.sort,error:e.error,disabled:e.disabled,dependsOn:e.dependson,groupBy:e.groupBy,multivalue:e.multivalue,onSearch:r.props.actions.zoneSearch,onFilter:r.props.actions.zoneFilter,onChange:r.props.actions.zoneChange})})):null})),p(c(r),"renderRoiPanel",(function(){var e=r.getMethodFromId(r.props.spatialField.method),t=e&&e.filterProps&&e.filterProps.valueField&&r.props.spatialField&&r.props.spatialField.value&&r.props.spatialField.value[e.filterProps.valueField];return f.createElement(h,null,f.createElement("div",{className:"container-fluid"},f.createElement(g,{className:"filter-field-row filter-field-fixed-row"},f.createElement(b,{xs:6},f.createElement("span",null,e&&e.name||e.id)),f.createElement(b,{xs:6},f.createElement(S,{originalValue:t,key:r.props.spatialField.method,options:e,autocompleteStreamFactory:T,valueField:e&&e.filterProps&&e.filterProps.valueField,textField:e&&e.filterProps&&e.filterProps.valueField,url:e&&e.url,filter:"contains",onChangeSpatialFilterValue:r.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var e;(e=r.props.actions).onChangeDrawingStatus.apply(e,arguments)},filterProps:e&&e.filterProps})))))})),p(c(r),"renderSpatialPanel",(function(e,t,n){return f.createElement(h,{className:"spatial-panel"},r.props.spatialMethodOptions.length>1?r.renderSpatialHeader():f.createElement("span",null),r.renderZoneFields(),r.props.spatialField.method&&r.getMethodFromId(r.props.spatialField.method)&&"wfsGeocoder"===r.getMethodFromId(r.props.spatialField.method).type?r.renderRoiPanel():null,r.props.spatialOperations.length>1?f.createElement(h,null,f.createElement("div",null,e),n&&"DWITHIN"===n.id?r.renderDwithin():null,f.createElement(g,null,f.createElement(b,{xs:12},t))):f.createElement("span",null))})),p(c(r),"renderButtons",(function(){var e=[],t=r.props.spatialField.geometry&&(r.props.spatialField.method&&"BBOX"===r.props.spatialField.method||"Circle"===r.props.spatialField.method),n=r.props.spatialField.geometry&&r.props.spatialField.geometry.coordinates;return t&&e.push({glyph:"pencil",onClick:function(){return r.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),n&&e.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",onClick:function(){return r.resetSpatialFilter()}}),e})),p(c(r),"updateSpatialMethod",(function(e,t,n){r.props.actions.onShowSpatialSelectionDetails(!1);var o=r.props.spatialMethodOptions.filter((function(e){return n===(A.getMessageById(r.context.messages,e.name)||e.name)}))[0].id,i=r.getMethodFromId(o);if(r.props.actions.onSelectSpatialMethod(o,t),"wfsGeocoder"!==r.getMethodFromId(o).type)switch(o){case"ZONE":r.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":r.changeDrawingStatus("clean","","queryform",[]),r.props.actions.onSelectViewportSpatialMethod();break;default:r.changeDrawingStatus("start",o,"queryform",[],{geodesic:i&&i.geodesic,stopAfterDrawing:!0})}else r.changeDrawingStatus("clean","","queryform",[])})),p(c(r),"updateSpatialOperation",(function(e,t,n){var o=r.props.spatialOperations.filter((function(e){return n===A.getMessageById(r.context.messages,e.name)}))[0].id;r.props.actions.onSelectSpatialOperation(o,t)})),p(c(r),"resetSpatialFilter",(function(){r.changeDrawingStatus("clean","","queryform",[]),r.props.actions.onRemoveSpatialSelection(),r.props.actions.onShowSpatialSelectionDetails(!1)})),p(c(r),"changeDrawingStatus",(function(e,t,n,o,i){r.props.actions.onChangeDrawingStatus(e,void 0!==t?t:r.props.spatialField.method,n,o,i)})),r}var r,n,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],r=f.createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(r=this.props.spatialField.geometry?null:f.createElement("span",null,f.createElement("div",{className:"m-label m-caption text-center"},f.createElement(x.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var n=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?f.createElement(w,{useMapProjection:this.props.useMapProjection,enableGeodesic:n&&n.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):f.createElement("span",null),i=f.createElement(g,{className:"filter-field-row inline-form filter-field-fixed-row"},f.createElement(b,{xs:6},f.createElement(x.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),f.createElement(b,{xs:6},f.createElement(E,{fieldOptions:this.props.spatialOperations.map((function(t){return A.getMessageById(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:A.getMessageById(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return f.createElement("div",{className:"query-filter-container"},this.props.withContainer?f.createElement(C,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,r,t)):this.renderSpatialPanel(i,r,t),o)}}])&&a(r.prototype,n),m&&a(r,m),t}(f.Component);p(D,"propTypes",{useMapProjection:m.bool,spatialField:m.object,spatialOperations:m.array,spatialMethodOptions:m.array,spatialPanelExpanded:m.bool,showDetailsPanel:m.bool,withContainer:m.bool,actions:m.object,zoom:m.number,projection:m.string}),p(D,"contextTypes",{messages:m.object}),p(D,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}}),e.exports=D},3985:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(758),m=d.Row,y=d.Col,g=d.FormControl,b=r(2233),h=r(2241),v=r(26),O=r(80),E=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onUpdateBBOX",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(r.tempExtent[t]=!isNaN(parseFloat(e))&&parseFloat(e)||0);var o=[];for(var i in r.tempExtent)i&&o.push(r.tempExtent[i]);var a=O.reprojectBbox(o,"EPSG:4326",r.props.projection),l={type:r.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:r.props.geometry.projection};r.props.onChangeDrawingStatus(n,void 0,"queryform",[l])})),u(s(r),"onUpdateCircle",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(r.tempCircle[t]=parseFloat(e));var o=isNaN(parseFloat(r.tempCircle.x))||isNaN(parseFloat(r.tempCircle.y))?[r.tempCircle.x,r.tempCircle.y]:O.reproject([r.tempCircle.x,r.tempCircle.y],"EPSG:4326",r.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:r.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(r.tempCircle.radius)?0:r.tempCircle.radius,projection:r.props.geometry.projection};r.props.onChangeDrawingStatus(n,void 0,"queryform",[a],{geodesic:r.props.enableGeodesic})})),u(s(r),"onModifyGeometry",(function(){"BBOX"===r.props.type?r.onUpdateBBOX(null,null,"endDrawing"):"Circle"===r.props.type&&r.onUpdateCircle(null,null,"endDrawing"),r.props.onShowPanel(!1)})),u(s(r),"onClosePanel",(function(){r.resetGeom(),r.props.onShowPanel(!1)})),u(s(r),"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),u(s(r),"getStepCircle",(function(e,t){var n=r.getStep(e);return"radius"===t&&!r.isWGS84()&&1e4*n||n})),u(s(r),"getBBOXDimensions",(function(e){var t=O.reprojectBbox(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),u(s(r),"getCircleDimensions",(function(e){var t=O.reproject(e.center,e.projection,"EPSG:4326"),n=O.reproject(e.center,e.projection,r.props.projection),o=O.reproject([e.center[0]+e.radius,e.center[1]],e.projection,r.props.projection),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y));return{x:t.x,y:t.y,radius:i}})),u(s(r),"renderCoordinateField",(function(e,t){return p.createElement("div",null,p.createElement("div",{className:"detail-field-title"},t),p.createElement(g,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+t,step:r.isWGS84()?r.getStep(r.props.zoom):1,defaultValue:r.roundValue(e,r.isWGS84()?1e6:100),onChange:function(e){return r.onUpdateBBOX(e.target.value,t)}}))})),u(s(r),"renderCircleField",(function(e,t){return p.createElement(g,{type:"number",id:"queryform_circle_"+t,defaultValue:r.roundValue(e,r.isWGS84()&&"radius"!==t?1e6:100),step:r.getStepCircle(r.props.zoom,t),onChange:function(e){return r.onUpdateCircle(e.target.value,t)}})})),u(s(r),"renderDetailsContent",(function(){var e,t=r.props.geometry;if("BBOX"===r.props.type){var n=r.getBBOXDimensions(t);e=p.createElement("div",null,p.createElement("div",{className:"container-fluid"},p.createElement(m,null,p.createElement(y,{xs:4},p.createElement("span",null)),p.createElement(y,{xs:4},r.renderCoordinateField(n.north,"north")),p.createElement(y,{xs:4},p.createElement("span",null))),p.createElement(m,null,p.createElement(y,{xs:4},r.renderCoordinateField(n.west,"west")),p.createElement(y,{xs:4},p.createElement("span",null)),p.createElement(y,{xs:4},r.renderCoordinateField(n.est,"est"))),p.createElement(m,null,p.createElement(y,{xs:4},p.createElement("span",null)),p.createElement(y,{xs:4},r.renderCoordinateField(n.sud,"sud")),p.createElement(y,{xs:4},p.createElement("span",null)))),p.createElement("span",null,p.createElement("hr",{width:"90%"}),p.createElement("div",null,p.createElement("h5",null,p.createElement(h.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===r.props.type){var o=r.getCircleDimensions(t),i=O.getUnits(r.props.projection);e=p.createElement("div",null,p.createElement("div",{className:"container-fluid"},p.createElement(m,null,p.createElement(y,{xs:2},p.createElement("span",null)),p.createElement(y,{xs:2},p.createElement("span",{className:"details-circle-attribute-name"},"x:")),p.createElement(y,{xs:4},r.renderCircleField(o.x,"x")),p.createElement(y,{xs:4},p.createElement("span",null))),p.createElement(m,null,p.createElement(y,{xs:2},p.createElement("span",null)),p.createElement(y,{xs:2},p.createElement("span",{className:"details-circle-attribute-name"},"y:")),p.createElement(y,{xs:4},r.renderCircleField(o.y,"y")),p.createElement(y,{xs:4},p.createElement("span",null))),p.createElement(m,null,p.createElement(y,{xs:2},p.createElement("span",null)),p.createElement(y,{xs:2},p.createElement("span",{className:"details-circle-attribute-name"},p.createElement(h.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"":i}}),":")),p.createElement(y,{xs:4},r.renderCircleField(o.radius,"radius")),p.createElement(y,{xs:4},p.createElement("span",null)))),p.createElement("span",null,p.createElement("hr",{width:"90%"}),p.createElement("div",null,p.createElement("h5",null,p.createElement(h.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return e})),u(s(r),"isWGS84",(function(){return"EPSG:4326"===r.props.projection})),u(s(r),"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),u(s(r),"resetGeom",(function(){"BBOX"===r.props.type?r.resetBBOX():"Circle"===r.props.type&&r.resetCircle()})),u(s(r),"resetBBOX",(function(){for(var e in r.extent){if(e)document.getElementById("queryform_bbox_"+e).value=r.roundValue(r.extent[e],r.isWGS84()?1e6:100),r.onUpdateBBOX(r.extent[e],e)}})),u(s(r),"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=r.roundValue(r.circle.radius,100),r.onUpdateCircle(r.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=r.roundValue(r.circle.x,r.isWGS84()?1e6:100),r.onUpdateCircle(r.circle.x,"x"),document.getElementById("queryform_circle_y").value=r.roundValue(r.circle.y,r.isWGS84()?1e6:100),r.onUpdateCircle(r.circle.y,"y")})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=v({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=v({},this.circle))}},{key:"render",value:function(){var e=this;return p.createElement(b,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:p.createElement(h.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(E,"propTypes",{useMapProjection:f.bool,geometry:f.object,type:f.string,onShowPanel:f.func,onChangeDrawingStatus:f.func,zoom:f.number,projection:f.string,enableGeodesic:f.bool}),u(E,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}}),e.exports=E},3986:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(1),a=r(13).isArray,l=r(3987),s=r(772).generateTemplateString,c=r(407),u=c.setObservableConfig,p=c.mapPropsStreamWithConfig,f=c.compose,d=c.withStateHandlers,m=c.withPropsOnChange,y=c.withHandlers,g=r(2526).default,b=r(762).escapeCQLStrings;u(g);var h=p(g)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{data:a(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:a(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,a=e.change,s=e.changed,c=e.originalValue,u=e.value,p=e.valuesCount,f=e.onChangeDrawingStatus,d=e.loadNextPage,m=e.loadPrevPage,y=e.maxFeatures,g=e.currentPage,b=e.itemComponent,h=e.features,v=e.busy,O=e.data,E=e.loading,w=void 0!==E&&E,S=e.valueField,P=e.textField,T=e.filter,j=e.srsName,A=e.style,C=Math.ceil(p/y);return i.createElement(l,{pagination:{firstPage:1===g,lastPage:C<=g,paginated:!0,loadPrevPage:m,loadNextPage:d,currentPage:g},srsName:j,busy:v,dropUp:!1,data:O,open:t,onChangeDrawingStatus:f,valueField:S,textField:P,itemComponent:b,filter:T,onFocus:o,onToggle:r,onChange:a,onSelect:n,features:h,style:A,selectedValue:s?u:c||u,loading:w})})),v=f(m(["valueField"],(function(){return{value:void 0}})),d((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,r){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[r]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),y({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.onChangeSpatialFilterValue,n=void 0===r?function(){}:r,o=e.select,i=void 0===o?function(){}:o;return function(e,r,o,a){r&&n({geometry:r.geometry,value:e,feature:r,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:s(t.crossLayer.cqlTemplate||"",b)(r)}}:void 0}),i(!0)}}}))(h);e.exports={AutocompleteWFSCombobox:v}},3987:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(0),d=r(1),m=r(13).head,y=r(2177).Combobox,g=r(758),b=g.Glyphicon,h=g.Tooltip,v=r(136),O=r(2114),E=r(2532),w=function(e){function t(){var e,r,n=this;i(this,t);for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(u)))),"state",{}),p(c(r),"renderWithTooltip",(function(e){if(r.props.tooltip.customizedTooltip){var t=r.props.tooltip.customizedTooltip;return d.createElement(t,null,e)}var n=d.createElement(h,{id:r.props.tooltip.id},"this.props.tooltip.message");return d.createElement(O,{key:r.props.tooltip.overlayTriggerKey,placement:r.props.tooltip.placement,overlay:n},e)})),p(c(r),"renderPagination",(function(){var e=r.props.pagination.firstPage,t=r.props.pagination.lastPage;return d.createElement("div",{className:"autocomplete-toolbar"},!e&&d.createElement(b,{className:r.props.prevPageIcon,glyph:r.props.prevPageIcon,onClick:function(){return r.props.pagination.loadPrevPage()}}),!t&&d.createElement(b,{className:r.props.nextPageIcon,glyph:r.props.nextPageIcon,onClick:function(){return r.props.pagination.loadNextPage()}}))})),p(c(r),"renderField",(function(){var e,t={emptyList:function(){return r.props.busy?"Loading...":v.getMessageById(r.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:v.getMessageById(r.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:v.getMessageById(r.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},i=[];(r.props.data&&r.props.data.length>0&&(i=r.props.data.map((function(e){return e}))),r.props.pagination&&r.props.pagination.paginated&&i.length>0)&&i.push((p(e={},r.props.textField,""),p(e,r.props.valueField,""),p(e,"disabled",!0),p(e,"pagination",r.renderPagination()),e));var a=!1,l=r.props.loading?[]:i,s=d.createElement(y,{dropUp:r.props.dropUp,busy:r.props.busy,data:l,disabled:r.props.disabled,itemComponent:function(e){return d.createElement(n.props.itemComponent,o({textField:r.props.textField,valueField:r.props.valueField},e))},messages:r.props.messages||t,open:r.props.open,filter:!1,onChange:function(e){r.props.onChange(e,r.props.valueField),a=!0},onFocus:function(){return r.props.onFocus(r.props.data)},onSelect:function(e){var t=m(r.props.features.filter((function(t){return t.properties[r.props.valueField].toLowerCase()===e[r.props.valueField].toLowerCase()})));r.props.onSelect(e,t,r.props.srsName,r.props.style)},onToggle:function(e){var t=m(r.props.features.filter((function(e){return e.properties[r.props.valueField].toLowerCase()===r.props.selectedValue.toLowerCase()})));!e||r.props.selectedValue||r.props.selectedValue||a||r.props.onChange("",r.props.valueField),r.props.onToggle(e,t,r.props.pagination.currentPage),t&&!e&&r.props.onSelect(r.props.selectedValue,t,r.props.srsName,r.props.style),a=!1},textField:r.props.textField,valueField:r.props.valueField,value:r.props.selectedValue});return r.props.tooltip&&r.props.tooltip.enabled?r.renderWithTooltip(s):s})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.label?d.createElement("label",null,this.props.label):d.createElement("span",null);return d.createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&a(r.prototype,n),f&&a(r,f),t}(d.Component);p(w,"propTypes",{busy:f.bool,data:f.array,disabled:f.bool,dropUp:f.bool,features:f.array,filter:f.string,itemComponent:f.oneOfType([f.object,f.func]),label:f.string,loading:f.bool,messages:f.object,onChange:f.func,onFocus:f.func,onSelect:f.func,onToggle:f.func,onChangeDrawingStatus:f.func,style:f.style,open:f.bool,pagination:f.object,nextPageIcon:f.string,prevPageIcon:f.string,selectedValue:f.string,srsName:f.string,textField:f.string,tooltip:f.object,valueField:f.string}),p(w,"contextTypes",{messages:f.object}),p(w,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:E,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"}),e.exports=w},3988:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c,u,p,f=r(1),d=r(0),m=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return f.createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&i(r.prototype,n),c&&i(r,c),t}(f.Component);c=m,u="propTypes",p={item:d.string,textField:d.string,customItemClassName:d.string,valueField:d.string},u in c?Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[u]=p,e.exports=m},3989:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(13).isEqual,m=r(2394),y=r(762),g=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{open:!1}),u(s(r),"getFilter",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n={filterFields:[{attribute:r.props.searchAttribute,operator:t,value:e,type:"list"}]};r.props.dependsOn&&(n.groupFields=[{id:1,logic:"AND",index:0}],n.filterFields[0].groupId=1,r.props.multivalue?(n.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),r.props.dependsOn.value instanceof Array?r.props.dependsOn.value.forEach((function(e){n.filterFields.push({attribute:r.props.dependsOn.field,operator:r.props.dependsOn.operator||"=",value:e,groupId:2,type:"list"})})):n.filterFields.push({attribute:r.props.dependsOn.field,operator:r.props.dependsOn.operator||"=",value:r.props.dependsOn.value,groupId:2,type:"list"})):n.filterFields.push({attribute:r.props.dependsOn.field,operator:r.props.dependsOn.operator||"=",value:r.props.dependsOn.value,groupId:1,type:"list"}));var o=y.toOGCFilter(r.props.typeName,n,r.props.wfs,r.props.sort||{sortBy:r.props.searchAttribute,sortOrder:"ASC"});return o})),u(s(r),"changeZoneValue",(function(e,t,n){var o;r.setState({open:!1}),o=r.props.multivalue?{value:n.map((function(e){return e.id})),feature:n.map((function(e){return e.feature}))}:{value:[n],feature:[r.values.filter((function(e){return e.id===n}))[0].feature]},r.props.onChange(r.props.zoneId,o)})),r}var r,p,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(p=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!d(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var r=t;e.props.valueField.split(".").forEach((function(e){r=r?r[e]:null}));var n=t;return e.props.textField.split(".").forEach((function(e){n=n?n[e]:null})),{id:r,name:n,feature:t}})));var t=this.props.label?f.createElement("label",null,this.props.label):f.createElement("span",null),r=this.props.error;return r&&(r="object"!==n(r)?r:r.status+" "+r.statusText+": "+r.data),f.createElement("div",{className:"zone-combo"},t,f.createElement(m,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:r,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var r=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,r,e.props.zoneId)}}}))}}])&&i(r.prototype,p),g&&i(r,g),t}(f.Component);u(g,"propTypes",{zoneId:p.number,url:p.string,typeName:p.string,wfs:p.string,busy:p.bool,values:p.array,value:p.oneOfType([p.object,p.number,p.string,p.array]),label:p.string,searchText:p.string,searchMethod:p.string,searchAttribute:p.string,sort:p.object,error:p.oneOfType([p.object,p.string]),comboFilter:p.oneOfType([p.bool,p.string,p.func]),groupBy:p.oneOfType([p.string,p.func]),multivalue:p.bool,open:p.bool,disabled:p.bool,dependsOn:p.object,valueField:p.string,textField:p.string,onSearch:p.func,onFilter:p.func,onChange:p.func,onSelect:p.func}),u(g,"contextTypes",{messages:p.object}),u(g,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}}),e.exports=g},3990:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(0),u=r(1),p=r(758).Button,f=r(13).isEqual,d=r(2370),m=r(762),y=m.checkOperatorValidity,g=m.setupCrossLayerFilterDefaults,b=m.isCrossLayerFilterValid,h=m.isFilterEmpty,v=r(2116),O=function(e){function t(e){var r,o,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,l=i(t).call(this,e),r=!l||"object"!==n(l)&&"function"!=typeof l?a(o):l,s(a(r),"getCurrentFilter",(function(){return{featureTypeName:r.props.featureTypeName,groupFields:r.props.groupFields,filterFields:r.props.sendFilters&&r.props.sendFilters.attributeFilter&&r.props.filterFields.filter((function(e){return y(e.value,e.operator)}))||[],spatialField:r.props.sendFilters&&r.props.sendFilters.spatialFilter&&r.props.spatialField||{attribute:r.props.spatialField&&r.props.spatialField.attribute},pagination:r.props.pagination,filterType:r.props.filterType,ogcVersion:r.props.ogcVersion,sortOptions:r.props.sortOptions,crossLayerFilter:r.props.sendFilters&&r.props.sendFilters.crossLayerFilter&&g(r.props.crossLayerFilter)||null,hits:r.props.hits}})),s(a(r),"isCurrentFilterChanged",(function(){var e=r.getCurrentFilter(),t={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter},n=r.props.appliedFilter||{},o={groupFields:n.groupFields,filterFields:n.attributePanelExpanded&&n.filterFields||[],spatialField:n.spatialPanelExpanded&&n.spatialField||{attribute:r.props.spatialField&&r.props.spatialField.attribute},crossLayerFilter:n.crossLayerExpanded&&n.crossLayerFilter&&n.crossLayerFilter.operation?g(n.crossLayerFilter):null};return!f(t,o)})),s(a(r),"search",(function(){var e=r.getCurrentFilter();r.props.actions.onQuery(r.props.searchUrl,e,r.props.params),r.props.advancedToolbar&&r.props.actions.storeAppliedFilter()})),s(a(r),"reset",(function(){if(r.props.actions.onChangeDrawingStatus("clean","","queryform",[]),r.props.actions.onReset(),r.props.advancedToolbar){var e={featureTypeName:r.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:r.props.spatialField&&r.props.spatialField.attribute},pagination:r.props.pagination,filterType:r.props.filterType,ogcVersion:r.props.ogcVersion,sortOptions:r.props.sortOptions,crossLayerFilter:null,hits:r.props.hits};r.props.actions.onQuery(r.props.searchUrl,e,r.props.params),r.props.advancedToolbar&&r.props.actions.storeAppliedFilter()}})),s(a(r),"restorePersistedFilter",(function(){r.props.actions.onRestoreFilter()})),r}var r,c,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,(c=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,r=this.props.allowEmptyFilter&&!this.props.advancedToolbar,n=this.props.filterFields.filter((function(e){return e.value||0===e.value})).length>0,o=h(this.props),i=h(this.props.appliedFilter),a=this.isCurrentFilterChanged(),l=n||this.props.spatialField.geometry||b(this.props.crossLayerFilter),s=!f(this.props.appliedFilter,this.props.storedFilter),c=r||o&&this.props.appliedFilter&&!i,m=t||!this.props.toolbarEnabled||o&&!c||!o&&(!l||!a),y=this.props.emptyFilterWarning&&o&&a,g=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,O=[{tooltipId:y?"queryform.emptyfilter":g,disabled:m,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:y?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var E=!s||this.props.loadingError||a,w=!s||!this.props.storedFilter||!this.props.toolbarEnabled,S=!this.props.appliedFilter||this.props.appliedFilter&&i||!this.props.toolbarEnabled;O=O.concat([{tooltipId:"queryform.save",disabled:E,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:w,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:S,onClick:this.reset}])}else O=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(O);return u.createElement("div",{className:"container-fluid query-toolbar"},u.createElement(v,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:O}),u.createElement(d,{show:!!this.props.showGeneratedFilter,bsSize:"large"},u.createElement(d.Header,null,u.createElement(d.Title,null,this.props.resultTitle)),u.createElement(d.Body,null,u.createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),u.createElement(d.Footer,null,u.createElement(p,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}])&&o(r.prototype,c),m&&o(r,m),t}(u.Component);s(O,"propTypes",{filterType:c.string,params:c.object,filterFields:c.array,groupFields:c.array,spatialField:c.object,sendFilters:c.object,crossLayerFilter:c.object,toolbarEnabled:c.bool,searchUrl:c.string,showGeneratedFilter:c.oneOfType([c.bool,c.string]),featureTypeName:c.string,actions:c.object,ogcVersion:c.string,titleMsgId:c.string,queryBtnMsgId:c.string,resultTitle:c.string,queryBtnGlyph:c.string,pagination:c.object,sortOptions:c.object,hits:c.bool,allowEmptyFilter:c.bool,emptyFilterWarning:c.bool,appliedFilter:c.object,storedFilter:c.object,advancedToolbar:c.bool,loadingError:c.bool}),s(O,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}}),e.exports=O},3991:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13),l=a.get,s=a.find,c=r(15).Observable,u=r(2240),p=u.describeFeatureType,f=u.getLayerWFSCapabilities,d=r(765).findGeometryProperty,m=r(2867).describeFeatureTypeToAttributes,y=r(407),g=y.compose,b=y.withProps,h=y.withPropsOnChange,v=y.withHandlers,O=y.defaultProps,E=r(2277),w=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.searchUrl;return t===n})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?c.of(t):e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded;return t})).take(1)})).switchMap((function(e){var t=e.featureTypeName,r=e.searchUrl;return f({layer:{name:t,url:r,search:{type:"wfs",url:r}}}).do((function(e){if(t=l(e,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!s(t,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._;return"queryCollection"===t})))throw new Error("nocrosslayerfunctionalities");var t})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return c.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})},S=function(e,t){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return o&&r.name===(o&&o.name)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!!t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return c.defer((function(){return p({layer:r})})).do((function(e){var r=l(d(e.data||{}),"name");r&&t("geometryName",r)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t;return m(r)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return c.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return c.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})};e.exports=g(h(["crossLayerFilter"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=void 0===t?{}:t;return{queryCollection:l(r,"collectGeometries.queryCollection"),operation:l(r,"operation"),distance:l(r,"distance")}})),b((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=void 0===t?[]:t,n=e.queryCollection,o=void 0===n?{}:n;return{layer:s(r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t===o.typeName}))}})),v({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){r("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&r("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){return r("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e){return r("operation",e)}}}),O({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.setQueryCollectionParameter,n=void 0===r?function(){}:r;return w(e).combineLatest(S(e,n),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o({},t,{},e)})).startWith({})}}),E)},3992:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(1),i=r(2103),a=r(2233),l=r(758),s=l.Row,c=l.Col,u=r(2162),p=r(3993),f=r(2865),d=r(3994).isSameUrl,m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.search,n=t.url;return d(e,n)||d(e,r&&r.url)},y=function(e){return(e||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return"BBOX"!==t}))};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded,r=void 0===t||t,l=e.spatialOperations,d=e.expandCrossLayerFilterPanel,g=void 0===d?function(){}:d,b=e.layers,h=void 0===b?[]:b,v=e.errorObj,O=e.loadingAttributes,E=e.loadingCapabilities,w=e.searchUrl,S=e.queryCollection,P=void 0===S?{}:S,T=e.attributes,j=void 0===T?[]:T,A=e.operation,C=e.updateLogicCombo,x=void 0===C?function(){}:C,D=e.resetCrossLayerFilter,_=void 0===D?function(){}:D,I=e.setOperation,F=void 0===I?function(){}:I,k=e.setQueryCollectionParameter,L=void 0===k?function(){}:k,R=e.addCrossLayerFilterField,N=void 0===R?function(){}:R,M=e.updateCrossLayerFilterField,B=void 0===M?function(){}:M,G=e.removeCrossLayerFilterField,U=void 0===G?function(){}:G,W=P.typeName,V=P.geometryName,H=P.filterFields,z=P.groupFields,q=void 0===z?[{id:1,logic:"OR",index:0}]:z;return o.createElement(a,{loading:E,expanded:r&&!E&&!v,error:v,errorMsgId:"queryPanel",buttons:n(W?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return _()}}]:[]),onSwitch:g,title:o.createElement(i,{msgId:"queryform.crossLayerFilter.title"})},o.createElement(s,{className:"inline-form filter-field-fixed-row"},o.createElement(c,{xs:6},o.createElement("div",null,o.createElement(i,{msgId:"queryform.crossLayerFilter.targetLayer"}))),o.createElement(c,{xs:6},o.createElement(u,{clearable:!1,disabled:E||!!v,isLoading:O,options:h.filter((function(e){return m(w,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:o.createElement(i,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:W,onChange:function(e){L("typeName",e&&e.value)}}))),W&&V?o.createElement(s,{className:"inline-form filter-field-fixed-row"},o.createElement(c,{xs:6},o.createElement("div",null,o.createElement(i,{msgId:"queryform.crossLayerFilter.operation"}))),o.createElement(c,{xs:6},o.createElement(p,{value:A,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return F(t)},spatialOperations:y(l)}))):null,W&&V&&A?o.createElement(s,{className:"filter-field-fixed-row"},o.createElement(c,{xs:12},o.createElement(f,{autocompleteEnabled:!1,withContainer:!1,attributes:j,groupLevels:-1,filterFields:H,actions:{onUpdateLogicCombo:x,onAddFilterField:N,onUpdateFilterField:B,onRemoveFilterField:U},groupFields:q,filterField:!0}))):null)}},3993:function(e,t,r){var n=r(1),o=r(2103),i=r(2177).DropdownList,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;return n.createElement("span",null,t&&t.name?n.createElement(o,{msgId:t.name}):null)};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,r=void 0===t?[]:t,o=e.onChange,l=void 0===o?function(){}:o,s=e.value;return n.createElement(i,{valueField:"id",className:"geometry-operation-selector",onChange:l,data:r,valueComponent:a,value:s,itemComponent:a})}},3994:function(e,t,r){"use strict";r.r(t),r.d(t,"urlParts",(function(){return l})),r.d(t,"sameQueryParams",(function(){return s})),r.d(t,"isSameUrl",(function(){return c}));var n=r(55),o=r.n(n),i=r(13);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o=a(r,6),i=o[1],l=o[3],s=o[4],c=o[5],u=0===c.indexOf("/")?c.split("/")[1]:"";return{protocol:i,domain:l,port:s,rootPath:c,applicationRootPath:u}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return Object(i.isEqual)(Object(i.sortBy)(r),Object(i.sortBy)(n))},c=function(e,t){var r=Object(i.isArray)(e)?e[0]:e,n=Object(i.isArray)(t)?t[0]:t;if(r===n)return!0;if(!r||!n)return!1;if(!Object(i.isString)(r)||!Object(i.isString)(n))return!1;var a=o.a.parse(r),c=o.a.parse(n),u=l(r),p=l(n),f=u.protocol===p.protocol,d=u.domain===p.domain,m=u.port===p.port,y=a.pathname===c.pathname,g=s(a.query,c.query);return f&&m&&d&&y&&g}},3995:function(e,t,r){var n=r(3996);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},3996:function(e,t,r){(e.exports=r(759)()).push([e.i,"",""])},3997:function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(1),i=r(2103),a=r(758),l=a.Button,s=a.Glyphicon,c=r(2663)((function(e){return o.createElement("div",n({className:"square-button pull-right no-border",style:{display:"flex"}},e),o.createElement(s,{glyph:"exclamation-mark",className:"text-danger"}))}));e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,r=e.onToggleQuery,n=void 0===r?function(){}:r;return o.createElement("div",{className:"mapstore-block-width"},o.createElement(l,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",onClick:function(){return n()}},o.createElement(s,{glyph:"arrow-left"})),t&&o.createElement(c,{popover:{text:o.createElement(i,{msgId:"queryform.loadingError"})}})||o.createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},o.createElement(s,{glyph:"filter",className:"text-primary"})))}},3998:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=r(15),s=r(71),c=r(2175),u=c.changeSpatialAttribute,p=c.SELECT_VIEWPORT_SPATIAL_METHOD,f=c.updateGeometrySpatialField,d=r(409).CHANGE_MAP_VIEW,m=r(2176),y=m.FEATURE_TYPE_SELECTED,g=m.QUERY,b=m.UPDATE_QUERY,h=m.featureLoading,v=m.featureTypeLoaded,O=m.featureTypeError,E=m.querySearchResponse,w=m.queryError,S=r(2199),P=S.paginationInfo,T=S.isDescribeLoaded,j=S.layerDescribeSelector,A=r(268).mapSelector,C=r(2193).authkeyParamNameSelector,x=r(408).getSelectedLayer,D=r(80),_=r(3999).addTimeParameter,I=r(47),F=r(26),k=r(2393),L=k.spatialFieldMethodSelector,R=k.spatialFieldSelector,N=k.spatialFieldGeomTypeSelector,M=k.spatialFieldGeomCoordSelector,B=k.spatialFieldGeomSelector,G=k.spatialFieldGeomProjSelector,U=r(2169).changeDrawingStatus,W=r(2176).INIT_QUERY_PANEL,V=r(2240),H=V.getJSONFeatureWA,z=V.getLayerJSONFeature,q=r(2867).describeFeatureTypeToAttributes,Q=r(161),Y=r(13).find,K=r(762),X=r(780),Z=r(796),J=r(795).read,$=X({gmlVersion:"3.1.1"}),ee=Z($),te=$.filter,re=$.and,ne=function(e){return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return{label:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:q(e)}};e.exports={featureTypeSelectedEpic:function(e,t){return e.ofType(y).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var r=t.getState();if(T(r,e.typeName)){var n=ne(j(r,e.typeName)),o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return l.Observable.of(u(o))}return l.Observable.defer((function(){return s.get(I.filterUrlParams(e.url,C(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===a(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var r=ne(t.data),n=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return l.Observable.from([v(e.typeName,r),u(n)])}try{JSON.parse(t.data)}catch(t){return l.Observable.from([O(e.typeName,"Error from WFS: "+t.message),Q.error({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return l.Observable.from([O(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return l.Observable.of(O(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(g).switchMap((function(r){var s,c,u=(c=t.getState(),(s=c.query&&c.query.featureTypes&&c.query.featureTypes[c.query.typeName]&&c.query.featureTypes[c.query.typeName].attributes&&c.query.featureTypes[c.query.typeName].attributes[0]&&c.query.featureTypes[c.query.typeName].attributes[0].attribute||null)?{sortBy:s,sortOrder:"A"}:{}),p=P.totalFeatures(t.getState()),f=I.filterUrlParams(r.searchUrl,C(t.getState())),d=x(t.getState())||{},m=d.layerFilter,y=d.params,g=Y(Object.keys(y||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()})),v=g?[ee(J(g))]:[],O=(v.length>0||K.isFilterValid(m)&&!m.disabled)&&te(re.apply(void 0,v.concat(i(K.isFilterValid(m)&&!m.disabled?K.toOGCFilterParts(m,"1.1.0","ogc"):[]),i(K.isFilterValid(r.filterObj)?K.toOGCFilterParts(r.filterObj,"1.1.0","ogc"):[]))))||r.filterObj,S=_(f,r.queryOptions||{},t.getState()),T=S.url,j=S.options,A=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r.filterObj.pagination,{totalFeatures:p,sortOptions:u},j);return l.Observable.merge(("object"===a(O)&&H(T,O,A)||z(d,O,A)).map((function(e){return E(e,r.searchUrl,r.filterObj,r.queryOptions)})).catch((function(e){return l.Observable.of(w(e))})).startWith(h(!0)).concat(l.Observable.of(h(!1)))).takeUntil(e.ofType(b))}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(W).switchMap((function(){var e=t.getState(),r=R(e),n={type:"Feature",geometry:{type:N(e),coordinates:M(e)}},o=B(e)?U("drawOrEdit",r.method||"","queryform",[n],{featureProjection:G(e),drawEnabled:!1,editEnabled:!1}):U("clean",r.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return l.Observable.of(o)}))},viewportSelectedEpic:function(e,t){return e.ofType(p,d).switchMap((function(e){var r=e.type===d?e:A(t.getState());if((e.type===p||e.type===d&&"Viewport"===L(t.getState()))&&r.bbox&&r.bbox.bounds&&r.bbox.crs){var n=Object.keys(r.bbox.bounds).reduce((function(e,t){return F({},e,o({},t,parseFloat(r.bbox.bounds[t])))}),{});return l.Observable.of(f(D.getViewportGeometry(n,r.bbox.crs)))}return l.Observable.empty()}))}}},3999:function(e,t,r){"use strict";r.r(t),r.d(t,"addTimeParameter",(function(){return p}));var n=r(55),o=r(13),i=r(2183),a=r(408),l=r(768);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e,t,r){var s=Object(i.selectedLayerIdSelector)(r),u=Object(l.layerDimensionSelectorCreator)({id:s},"time")(r),p=Object(a.getLayerFromId)(r,s)||{},f=Object(o.get)(p,'params["time"]');if(Object(i.timeSyncActive)(r)&&u&&f){var d=Object(n.parse)(e)||{};return{url:Object(n.format)(c({},d,{query:c({},d.query,{time:f})})),options:t}}return{url:e,options:t}}},4e3:function(e,t,r){var n=r(15),o=r(71),i=r(2175),a=i.UPDATE_FILTER_FIELD,l=i.updateFilterFieldOptions,s=i.loadingFilterFieldOptions,c=i.setAutocompleteMode,u=i.toggleMenu,p=r(2176).FEATURE_TYPE_SELECTED,f=r(2811).getWpsPayload,d=r(13),m=d.isArray,y=d.startsWith,g=r(161).error,b=r(2199).typeNameSelector,h=r(2393),v=h.maxFeaturesWPSSelector,O=h.appliedFilterSelector,E=h.storedFilterSelector,w=r(47).getParsedUrl,S=r(2193).authkeyParamNameSelector;e.exports={isAutoCompleteEnabled:function(e,t){return e.ofType(p).switchMap((function(e){var r=w(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},S(t.getState()));return null===r?n.Observable.of(c(!1)):n.Observable.fromPromise(o.post(r,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return y(e,"<ows:ExceptionReport")?n.Observable.of(c(!1)):n.Observable.of(c(!0))})).catch((function(){return n.Observable.of(c(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(a).debounce((function(e){return n.Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var r=t.getState(),i=v(r),a=r.queryform&&r.queryform.filterFields&&r.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0];if("selected"===e.fieldOptions.selected)return n.Observable.from([l(a,[],0)]);var p=f({attribute:a.attribute,layerName:b(r),layerFilter:O(r)||E(r),maxFeatures:i,startIndex:(e.fieldOptions.currentPage-1)*i,value:e.fieldValue}),d=w(r.query.url,{outputFormat:"json"},S(t.getState()));return null===d?n.Observable.of(c(!1)):n.Observable.fromPromise(o.post(d,p,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var r=m(t.values)?t.values:[t.values],o=t.size;return n.Observable.from([l(a,r,o),u(e.rowId,!0)])})).startWith(s(!0,a)).catch((function(){return n.Observable.from([l(a,[],0),g({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),u(e.rowId,!0)])})).concat([s(!1,a)])}))}}},4001:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(15),l=r(13),s=l.get,c=l.head,u=r(771).LOCATION_CHANGE,p=r(267),f=p.TOGGLE_CONTROL,d=p.setControlProperty,m=r(2175),y=m.QUERY_FORM_SEARCH,g=m.loadFilter,b=m.reset,h=m.search,v=r(269).changeLayerProperties,O=r(2369),E=O.OPEN_QUERY_BUILDER,w=O.initLayerFilter,S=O.DISCARD_CURRENT_FILTER,P=O.APPLY_FILTER,T=O.storeAppliedFilter,j=r(2176),A=j.featureTypeSelected,C=j.toggleLayerFilter,x=j.initQueryPanel,D=r(408).getSelectedLayer,_=r(2169).changeDrawingStatus,I=r(762);e.exports={handleLayerFilterPanel:function(e,t){var r=t.getState;return e.ofType(E).switchMap((function(){var t=D(r()),n=t||{},i=n.url,l=n.name,p=n.layerFilter,m=t&&t.search&&t.search.url;return a.Observable.of(A(m||i,l),g(p),w(p),d("queryPanel","enabled",!0)).merge(a.Observable.of(C()).filter((function(){return!s(r(),"query.isLayerFilter")})),e.ofType(y).switchMap((function(e){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=e.spatialField,n=e.filterFields;return!!(n&&c(n)||r&&r.method&&r.operation&&r.geometry||t&&t.collectGeometries&&t.operation)}(e.filterObj)?o({},s(r(),"queryform",{})):void 0;return n&&(n.filterFields=n.attributePanelExpanded&&n.filterFields||[],n.spatialField=n.spatialPanelExpanded&&n.spatialField||null,n.crossLayerFilter=n.crossLayerExpanded&&I.setupCrossLayerFilterDefaults(n.crossLayerFilter)||null),a.Observable.of(function(e,t){return v(e,{layerFilter:t})}(t.id,n))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(f).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).merge(e.ofType(u)))}}(e)).concat(a.Observable.from([C(),b(),_("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var r=t.getState;return e.ofType(S).switchMap((function(){var e={typeName:s(r(),"state.query.typeName")},t=s(r(),"state.query.url"),n=s(r(),"layerFilter.persisted");return a.Observable.of(_("clean","","queryform",[]),g(n),h(t,n,e),x())}))},onApplyFilter:function(e,t){var r=t.getState;return e.ofType(P).map((function(){var e=o({},s(r(),"queryform",{}));return T(e)}))}}},4002:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2369),l=a.APPLIED_FILTER,s=a.STORE_CURRENT_APPLIED_FILTER,c=a.INIT_LAYER_FILTER,u=a.DISCARD_CURRENT_FILTER,p=r(2175).QUERY_FORM_RESET,f={};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return o({},f,{persisted:t.filter,applied:t.filter});case u:return o({},e,{applied:e.persisted});case l:return o({},e,{applied:t.filter});case s:return o({},e,{persisted:e.applied});case p:return o({},e,{applied:void 0});default:return e}}},4003:function(e,t,r){var n=r(15).Observable,o=r(2353),i=r(2169).changeDrawingStatus,a=r(409).zoomToExtent,l=r(2175).CHANGE_SPATIAL_FILTER_VALUE;e.exports={updateSpatialFilterValue:function(e){return e.ofType(l).switchMap((function(e){var t=e.feature,r=e.srsName,l=e.style,s=e.options;return n.of(i("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:r},l)).concat(t&&s&&s.autoZoom?[a(o(t),r)]:[])}))}}},4004:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(407),a=r(88),l=r(195),s=r(758),c=r(2103),u=r.n(c),p=r(268),f=r(271),d=r(198),m=r(267),y=r(40),g=r(2892);t.default=Object(d.createPlugin)("Save",{component:Object(i.compose)(Object(a.connect)(Object(l.createSelector)((function(e){return e.controls&&e.controls.mapSave&&e.controls.mapSave.enabled}),p.mapInfoSelector,(function(e,t){return{show:e,resource:t}})),{onClose:m.toggleControl.bind(null,"mapSave",!1),onResetMapSaveError:y.mapSaved}))(g.a),containers:{BurgerMenu:{name:"save",position:30,text:o.a.createElement(u.a,{msgId:"save"}),icon:o.a.createElement(s.Glyphicon,{glyph:"floppy-open"}),action:m.toggleControl.bind(null,"mapSave",null),selector:Object(l.createSelector)(f.isLoggedIn,p.mapInfoSelector,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.canEdit,n=t.id;return{style:e&&n&&r?{}:{display:"none"}}}))}}})},4005:function(e,t,r){var n=r(195).createStructuredSelector,o=r(2193),i=o.servicesSelector,a=o.selectedServiceSelector,l=r(2143),s=l.getFloatingWidgets,c=l.getCollapsedState,u=l.getFloatingWidgetsLayout,p=r(773).mapInfoConfigurationSelector,f=n({catalogServices:n({services:i,selectedService:a}),widgetsConfig:n({widgets:s,layouts:u,collapsed:c}),mapInfoConfiguration:p});e.exports={mapOptionsToSaveSelector:f}},4006:function(e,t,r){var n=r(4007),o=r(4009),i=r(4010),a=r(407),l=a.compose,s=a.branch,c=a.renderNothing;e.exports=l(s((function(e){return!e.show}),c),n,o(),i)},4007:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(1),l=r(407),s=l.compose,c=l.withStateHandlers,u=l.withState,p=l.branch,f=l.withHandlers,d=l.renderComponent,m=r(410).set,y=r(2103),g=r(4008);e.exports=s(c((function(e){var t=e.resource,r=void 0===t?{}:t;return{originalData:r,metadata:{name:r.name,description:r.description},resource:{id:r.id,attributes:r.attributes,metadata:{name:r.name,description:r.description},createdAt:r.creation,modifiedAt:r.lastUpdate}}}),{onUpdate:function(e){var t=e.resource;return function(e,r){return{hasChanges:!0,resource:m(e,r,t)}}},onUpdateLinkedResource:function(e){var t=e.linkedResources,r=void 0===t?{}:t;return function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{linkedResources:m(e,o({category:n,data:t},i),r)}}}}),u("confirmClose","onCloseConfirm",!1),p((function(e){return e.confirmClose}),d((function(e){var t=e.onCloseConfirm,r=e.onClose;return a.createElement(g,{show:!0,confirmText:a.createElement(y,{msgId:"saveDialog.close"}),cancelText:a.createElement(y,{msgId:"saveDialog.cancel"}),onConfirm:function(){return r()},onClose:function(){return t(!1)}},a.createElement(y,{msgId:"map.details.fieldsChanged"}),a.createElement("br",null),a.createElement(y,{msgId:"map.details.sureToClose"}))}))),f({onClose:function(e){var t=e.hasChanges,r=e.onClose,n=void 0===r?function(){}:r,o=e.onCloseConfirm,i=void 0===o?function(){}:o;return function(){return t?i(!0):n()}}}),f({onSave:function(e){var t=e.onSave,r=void 0===t?function(){}:t,n=e.category,i=void 0===n?"DASHBOARD":n,a=e.data,l=e.linkedResources;return function(e){return r(o({category:i,linkedResources:l,data:a},e))}}}))},4008:function(e,t,r){var n=r(1),o=r(2370),i=r(2103),a=r(758).Button;e.exports=function(e){var t=e.title,r=void 0===t?n.createElement(i,{msgId:"warning"}):t,l=e.cancelText,s=void 0===l?n.createElement(i,{msgId:"no"}):l,c=e.confirmText,u=void 0===c?n.createElement(i,{msgId:"yes"}):c,p=e.onClose,f=void 0===p?function(){}:p,d=e.onConfirm,m=void 0===d?function(){}:d,y=e.show,g=e.children,b=e.className,h=void 0===b?"":b,v=e.buttonSize,O=e.running,E=void 0!==O&&O,w=n.createElement("span",{role:"footer"},n.createElement("div",{style:{float:"left"}}),n.createElement(a,{disabled:E,className:h,key:"confirmButton",bsStyle:"primary",bsSize:v,onClick:function(){m()}},u),n.createElement(a,{key:"cancelButton",bsSize:v,disabled:E,onClick:f},s));return n.createElement(o,{show:y,onHide:f},n.createElement(o.Header,{key:"dialogHeader",closeButton:!0},n.createElement(o.Title,null,r)),n.createElement(o.Body,null,g),n.createElement(o.Footer,null,w))}},4009:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(15),l=r(407),s=l.mapPropsStream,c=l.compose,u=l.withStateHandlers,p=r(53),f=function(e){return s((function(t){return t.combineLatest(t.take(1).switchMap((function(t){var r=t.user;return a.Observable.defer((function(){return e.getAvailableGroups(r)})).map((function(e){return{availableGroups:e}})).startWith({loading:!0})})).startWith({}).catch((function(){return a.Observable.of({})})),(function(e,t){return o({},e,{},t)}))}))},d=function(e){return s((function(t){return t.combineLatest(t.distinctUntilKeyChanged("resource").pluck("resource").filter((function(e){return e.id})).pluck("id").distinctUntilChanged().switchMap((function(t){return a.Observable.defer((function(){return e.getResourcePermissions(t)})).map((function(e){return{rules:e}})).startWith({loading:!0})})).startWith({}).catch((function(){return a.Observable.of({})})),(function(e,t){return o({},e,{},t)}))}))},m=u((function(){return{}}),{onUpdateRules:function(){return function(e){return{rules:e}}}});e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return c(f(e),d(e),m)}},4010:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(407),i=o.withStateHandlers,a=o.withProps,l=o.compose;e.exports=l(i((function(){return{}}),{onError:function(){return function(e){return{formErrors:e}}}}),a((function(e){var t=e.errors,r=void 0===t?[]:t,o=e.formErrors,i=void 0===o?[]:o;return{errors:[].concat(n(r),n(i))}})))},4011:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(0),m=r(1),y=r(13).get,g=r(2149),b=r(2173),h=r(758).Grid,v=r(2103),O=r(4012),E=r(4013),w=r(4016)(r(4017)),S=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onCloseMapPropertiesModal",(function(){r.props.onClose()})),f(u(r),"onSave",(function(){r.props.onSave(i({},r.props.resource,{permission:r.props.rules}))})),f(u(r),"isValidForm",(function(){return y(r.props.resource,"metadata.name")})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var r=e.role,n=e.name;if("ADMIN"===r)return!0;var o=t&&t.attributes&&t.attributes.owner;return!o||o===n}(this.props.user,this.props.resource);return m.createElement(g,{key:"saveDialog"},m.createElement(b,{loading:this.props.loading,title:m.createElement(v,{msgId:"saveDialog.title"}),show:this.props.show,clickOutEnabled:!0,bodyClassName:"ms-flex modal-properties-container",buttons:[{text:m.createElement(v,{msgId:"close"}),onClick:this.onCloseMapPropertiesModal,disabled:this.props.resource.loading},{text:m.createElement("span",null,m.createElement(v,{msgId:"save"})),onClick:function(){e.onSave()},disabled:!this.isValidForm()||this.props.loading||!this.props.canSave}],showClose:!this.props.resource.loading,onClose:this.onCloseMapPropertiesModal},m.createElement(h,{fluid:!0},m.createElement("div",{className:"ms-map-properties"},m.createElement(O,{errors:this.props.errors}),m.createElement(E,{resource:this.props.resource,onUpdateLinkedResource:this.props.onUpdateLinkedResource,linkedResources:this.props.linkedResources,onMetadataChanged:this.props.metadataChanged,onError:this.props.onError,nameFieldFilter:this.props.nameFieldFilter,onUpdate:this.props.onUpdate}),!!t&&m.createElement(w,{rules:this.props.rules,onUpdateRules:this.props.onUpdateRules,availableGroups:this.props.availableGroups})))))}}])&&l(r.prototype,n),o&&l(r,o),t}(m.Component);f(S,"propTypes",{show:d.bool,loading:d.bool,canSave:d.bool,errors:d.array,rules:d.array,onSave:d.func,onUpdateRules:d.func,nameFieldFilter:d.func,resource:d.object,linkedResources:d.object,style:d.object,modalSize:d.string,onError:d.func,onUpdate:d.func,onUpdateLinkedResource:d.func,onClose:d.func,metadataChanged:d.func,availablePermissions:d.arrayOf(d.string),availableGroups:d.arrayOf(d.object),user:d.object}),f(S,"contextTypes",{messages:d.object}),f(S,"defaultProps",{id:"MetadataModal",modalSize:"",resource:{},linkedResources:{},onUpdateRules:function(){},nameFieldFilter:function(){},metadataChanged:function(){},metadata:{name:"",description:""},options:{},style:{},onClose:function(){},onError:function(){},onUpdate:function(){},onUpdateLinkedResource:function(){},onSave:function(){},availablePermissions:["canRead","canWrite"],availableGroups:[],canSave:!0,user:{}}),e.exports=S},4012:function(e,t,r){var n=r(1),o={FORMAT:"map.errorFormat",SIZE:"map.errorSize",409:"dashboard.errors.resourceAlreadyExists"},i=r(2103),a=r(758).Row,l=function(e){return"string"==typeof e?e:e.statusText},s=function(e){return"string"==typeof e?void 0:e};e.exports=function(e){var t=e.errors,r=void 0===t?[]:t;return n.createElement(a,null,r.length>0?n.createElement("div",{className:"dropzone-errorBox alert-danger"},r.map((function(e){return n.createElement("div",{key:"error"+l(e),className:"error"+l(e)},function(e){var t,r="string"==typeof(t=e)?t:t.status;return n.createElement(i,{msgId:o[r]||"Error:"+l(e),msgParams:s(e)})}(e))}))):null)}},4013:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(1),u=r(2103),p=r(758),f=p.Row,d=p.Col,m=r(4014),y=r(4015),g=r(162);e.exports=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.resource,r=e.linkedResources,n=void 0===r?{}:r,o=e.onError,i=void 0===o?function(){}:o,a=e.onUpdate,l=void 0===a?function(){}:a,s=e.nameFieldFilter,p=void 0===s?function(){}:s,b=e.onUpdateLinkedResource,h=void 0===b?function(){}:b;return c.createElement(f,null,c.createElement(d,{xs:12},c.createElement(y,{resource:t,thumbnail:n&&n.thumbnail&&n.thumbnail.data||t&&t.attributes&&t.attributes.thumbnail,onError:i,onRemove:function(){return h("thumbnail","NODATA","THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(g())})},onUpdate:function(e){return h("thumbnail",e,"THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(g())})}})),c.createElement(d,{xs:12},c.createElement(m,{role:"body",ref:"mapMetadataForm",onChange:l,resource:t,nameFieldText:c.createElement(u,{msgId:"saveDialog.name"}),descriptionFieldText:c.createElement(u,{msgId:"saveDialog.description"}),nameFieldFilter:p,createdAtFieldText:c.createElement(u,{msgId:"saveDialog.createdAt"}),modifiedAtFieldText:c.createElement(u,{msgId:"saveDialog.modifiedAt"}),namePlaceholderText:"saveDialog.namePlaceholder",descriptionPlaceholderText:"saveDialog.descriptionPlaceholder"})))}}])&&i(r.prototype,n),p&&i(r,p),t}(c.Component)},4014:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(12),m=r(758),y=m.FormControl,g=m.FormGroup,b=m.ControlLabel,h=r(47),v=r(2214)("placeholder")(y),O=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"renderDate",(function(e){if(!e)return"";var t=h.getConfigProp("forceDateFormat"),n=h.getConfigProp("forceTimeFormat"),o=t?d(e).format(t):r.context.intl?r.context.intl.formatDate(e):"",i=n?d(e).format(n):r.context.intl?r.context.intl.formatTime(e):"";return"".concat(o," ").concat(i)||""})),u(s(r),"changeName",(function(e){r.props.onChange("metadata.name",r.props.nameFieldFilter(e.target.value)||e.target.value)})),u(s(r),"changeDescription",(function(e){r.props.onChange("metadata.description",e.target.value)})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return p.createElement("form",{ref:"metadataForm",onSubmit:this.handleSubmit},p.createElement(g,null,p.createElement(b,null,this.props.nameFieldText),p.createElement(v,{key:"mapName",type:"text",onChange:this.changeName,disabled:this.props.resource.saving,placeholder:this.props.namePlaceholderText,defaultValue:this.props.resource?this.props.resource.name:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.name||""})),p.createElement(g,null,p.createElement(b,null,this.props.descriptionFieldText),p.createElement(v,{key:"mapDescription",type:"text",onChange:this.changeDescription,disabled:this.props.resource.saving,placeholder:this.props.descriptionPlaceholderText,defaultValue:this.props.resource?this.props.resource.description:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.description||""})),this.props.resource&&this.props.resource.createdAt&&p.createElement(g,null,p.createElement(b,null,this.props.createdAtFieldText),p.createElement(b,null,this.props.resource&&this.renderDate(this.props.resource.createdAt)||"")),this.props.resource&&this.props.resource.createdAt&&p.createElement(g,null,p.createElement(b,null,this.props.modifiedAtFieldText),p.createElement(b,null,this.props.resource&&this.renderDate(this.props.resource.modifiedAt||this.props.resource.createdAt)||"")))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(O,"propTypes",{resource:f.object,onChange:f.func,nameFieldText:f.node,descriptionFieldText:f.node,nameFieldFilter:f.func,namePlaceholderText:f.string,descriptionPlaceholderText:f.string,createdAtFieldText:f.string,modifiedAtFieldText:f.string}),u(O,"contextTypes",{intl:f.object}),u(O,"defaultProps",{onChange:function(){},resource:{},nameFieldText:"Name",descriptionFieldText:"Description",nameFieldFilter:function(){},namePlaceholderText:"Map Name",descriptionPlaceholderText:"Map Description"}),e.exports=O},4015:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(758).Glyphicon,m=r(2693),y=r(2145),g=r(2103),b=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{}),u(s(r),"onRemoveThumbnail",(function(e){null!==e&&e.stopPropagation(),r.files=null,r.props.onError([]),r.props.onRemove()})),u(s(r),"getThumbnailUrl",(function(){return r.props.thumbnail&&"NODATA"!==r.props.thumbnail?decodeURIComponent(r.props.thumbnail):null})),u(s(r),"isImage",(function(e){return e&&"image/png"===e[0].type||e&&"image/jpeg"===e[0].type||e&&"image/jpg"===e[0].type})),u(s(r),"getDataUri",(function(e,t){var r=e;if(r&&r.length>0){var n=r[0],o=new FileReader;return o.onload=function(e){return t(e.target.result)},o.readAsDataURL(n)}return t(null)})),u(s(r),"onDrop",(function(e){var t=r.isImage(e),n=[];r.getDataUri(e,(function(o){t&&o&&o.length<5e5?(r.props.onError([],r.props.resource.id),r.files=e,r.props.onUpdate(o,e&&e[0].preview)):(t||n.push("FORMAT"),o&&o.length>=5e5&&n.push("SIZE"),r.props.onError(n,r.props.resource.id),r.files=e,r.props.onUpdate(null,null))}))})),u(s(r),"getThumbnailDataUri",(function(e){r.getDataUri(r.files,e)})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.props.loading?f.createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",f.createElement(y,{spinnerName:"circle",overrideSpinnerClassName:"spinner"})):f.createElement("div",{className:"dropzone-thumbnail-container",style:{pointerEvents:this.props.resource.saving?"none":"auto"}},f.createElement("label",{className:"control-label"},f.createElement(g,{msgId:"map.thumbnail"})),f.createElement(m,{multiple:!1,className:"dropzone alert alert-info",rejectClassName:"alert-danger",onDrop:this.onDrop},this.getThumbnailUrl()?f.createElement("div",null,f.createElement("img",{src:this.getThumbnailUrl()}),f.createElement("div",{className:"dropzone-content-image-added"},this.props.message,f.createElement("br",null),this.props.suggestion),f.createElement("div",{className:"dropzone-remove",onClick:this.onRemoveThumbnail},f.createElement(d,{glyph:this.props.glyphiconRemove}))):f.createElement("div",{className:"dropzone-content-image"},this.props.message,f.createElement("br",null),this.props.suggestion)))}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(b,"propTypes",{glyphiconRemove:p.string,style:p.object,loading:p.bool,resource:p.object,thumbnail:p.string,onError:p.func,onUpdate:p.func,onRemove:p.func,message:p.oneOfType([p.string,p.element]),suggestion:p.oneOfType([p.string,p.element])}),u(b,"contextTypes",{messages:p.object}),u(b,"defaultProps",{loading:!1,glyphiconRemove:"remove-circle",resource:{},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemove:function(){},message:f.createElement(g,{msgId:"map.message"}),suggestion:f.createElement(g,{msgId:"map.suggestion"})}),e.exports=b},4016:function(e,t,r){var n=r(407),o=n.compose,i=n.withState;e.exports=o(i("newGroup","onNewGroupChoose"),i("newPermission","onNewPermissionChoose"))},4017:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(26),m=r(13),y=r(2162),g=r(2145),b=r(758),h=b.Table,v=b.Button,O=b.Glyphicon,E=r(2103),w=r(136);r(2553);var S=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onGroupChange",(function(e){r.props.onNewGroupChoose(m.find(r.props.availableGroups,(function(t){return t.id===e.value})))})),u(s(r),"onAddPermission",(function(){r.isPermissionPresent(r.props.newGroup.groupName)?r.props.onUpdateRules(r.props.rules.map((function(e){return e.group&&e.group.groupName===r.props.newGroup.groupName?"canWrite"===r.props.newPermission?d({},e,{canRead:!0,canWrite:!0}):d({},e,{canRead:!0,canWrite:!1}):e}),s(r)).filter((function(e){return e.canRead||e.canWrite}))):r.props.onUpdateRules(r.props.rules.concat([{canRead:!0,canWrite:"canWrite"===r.props.newPermission,group:r.props.newGroup}]))})),u(s(r),"onChangePermission",(function(e,t){r.props.onUpdateRules(r.props.rules.filter((function(r){return!("delete"===t&&r.group&&r.group.groupName===e)})).map((function(r){return r.group&&r.group.groupName===e?d({},r,"canWrite"===t?{canRead:!0,canWrite:!0}:"canRead"===t?{canRead:!0,canWrite:!1}:{canRead:!1,canWrite:!1}):r})).filter((function(e){return e.canRead||e.canWrite})))})),u(s(r),"getSelectableGroups",(function(){return r.props.availableGroups&&r.props.availableGroups.filter((function(e){return!r.isPermissionPresent(e.groupName)})).map((function(e){return{label:e.groupName,value:e.id}}))})),u(s(r),"getPermissionLabel",(function(e){switch(e){case"canRead":return w.getMessageById(r.context.messages,"map.permissions.canView");case"canWrite":return w.getMessageById(r.context.messages,"map.permissions.canWrite");default:return e}})),u(s(r),"getAvailablePermissions",(function(){return r.props.availablePermissions.map((function(e){return{value:e,label:r.getPermissionLabel(e)}}))})),u(s(r),"renderPermissionRows",(function(){var e=r.props.rules.filter((function(e){return e.group}));return 0===e.length?p.createElement("tr",null,p.createElement("td",{colSpan:"3"},p.createElement(E,{msgId:"map.permissions.noRules"}))):e.map((function(e,t){var n=e.canWrite,o=e.group;return p.createElement("tr",{key:t,className:t/2==0?"even":"odd"},p.createElement("td",null,o.groupName),p.createElement("td",{style:{width:"150px"}},p.createElement(y,{ref:"permChoice"+t,onChange:function(e){r.onChangePermission.call(s(r),o.groupName,e.value)},clearable:!1,options:r.getAvailablePermissions(),value:n?"canWrite":"canRead"})),p.createElement("td",{style:{width:"50px"}},p.createElement(v,{key:"deleteButton"+t,ref:"deleteButton",bsStyle:"danger",disabled:r.props.disabled,onClick:r.onChangePermission.bind(s(r),o.groupName,"delete")},p.createElement(O,{glyph:"1-close"}))))}))})),u(s(r),"isPermissionPresent",(function(e){return r.props.rules&&m.findIndex(r.props.rules,(function(t){return t.group&&t.group.groupName===e}))>=0})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return p.createElement("div",null,p.createElement(h,{className:"permissions-table",stripped:!0,condensed:!0,hover:!0},p.createElement("thead",null,p.createElement("tr",null,p.createElement("th",{colSpan:"3"},p.createElement(E,{msgId:"map.permissions.title"})))),p.createElement("tbody",null,this.props.loading?p.createElement("tr",null,p.createElement("td",{colSpan:"3"},p.createElement("div",null,p.createElement(g,{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:"circle"})))):this.renderPermissionRows(),p.createElement("tr",null,p.createElement("th",{colSpan:"3"},p.createElement(E,{msgId:"map.permissions.addRule"}))),p.createElement("tr",{key:"addRowKey"},p.createElement("td",null,p.createElement(y,{noResultsText:w.getMessageById(this.context.messages,"map.permissions.noResult"),ref:"newGroup",isLoading:!this.getSelectableGroups(),clearable:!1,placeholder:w.getMessageById(this.context.messages,"map.permissions.selectGroup"),options:this.getSelectableGroups(),value:this.props.newGroup&&this.props.newGroup.id,onChange:this.onGroupChange})),p.createElement("td",{style:{width:"150px"}},p.createElement(y,{ref:"newChoice",clearable:!1,options:this.getAvailablePermissions(),value:this.props.newPermission||m.head(this.props.availablePermissions),onChange:function(t){e.props.onNewPermissionChoose(t&&t.value)}})),p.createElement("td",{style:{width:"50px"}},p.createElement(v,{ref:"buttonAdd",disabled:this.props.disabled||!this.props.newGroup||this.isPermissionPresent(this.props.newGroup&&this.props.newGroup.groupName),bsSize:"small",bsStyle:"success",onClick:this.onAddPermission},p.createElement(O,{style:{fontSize:"22px"},glyph:"plus"})))))))}},{key:"disablePermission",value:function(e,t){return e||!t}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(S,"propTypes",{id:f.string,user:f.object,loading:f.bool,onUpdateRules:f.func,buttonSize:f.string,disabled:f.bool,style:f.object,fluid:f.bool,onErrorCurrentMap:f.func,onUpdateCurrentMap:f.func,onNewGroupChoose:f.func,onNewPermissionChoose:f.func,availablePermissions:f.arrayOf(f.string),availableGroups:f.arrayOf(f.object),updatePermissions:f.func,rules:f.arrayOf(f.object),newGroup:f.object,newPermission:f.string}),u(S,"contextTypes",{messages:f.object}),u(S,"defaultProps",{disabled:!1,id:"PermissionEditor",onUpdateRules:function(){},onNewGroupChoose:function(){},onNewPermissionChoose:function(){},user:{name:"Guest"},style:{},buttonSize:"small",onErrorCurrentMap:function(){},onUpdateCurrentMap:function(){},availablePermissions:["canRead","canWrite"],availableGroups:[],updatePermissions:function(){},rules:[]}),e.exports=S},4018:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(407),a=r(88),l=r(195),s=r(758),c=r(13),u=r(2103),p=r.n(u),f=r(268),d=r(271),m=r(198),y=r(267),g=r(40),b=r(2892);function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.default=Object(m.createPlugin)("SaveAs",{component:Object(i.compose)(Object(a.connect)(Object(l.createSelector)((function(e){return e.controls&&e.controls.mapSaveAs&&e.controls.mapSaveAs.enabled}),f.mapInfoSelector,(function(e,t){var r=t||{};r.id,r.attributes,r.name,r.description;return{show:e,resource:h(r,["id","attributes","name","description"])}})),{onClose:y.toggleControl.bind(null,"mapSaveAs",!1),onResetMapSaveError:g.mapSaved}),Object(i.withProps)({isMapSaveAs:!0}))(b.a),containers:{BurgerMenu:{name:"saveAs",position:31,text:o.a.createElement(p.a,{msgId:"saveAs"}),icon:o.a.createElement(s.Glyphicon,{glyph:"floppy-open"}),action:y.toggleControl.bind(null,"mapSaveAs",null),selector:function(e){return e&&e.controls&&e.controls.saveAs&&e.controls.saveAs.allowedRoles?-1!==Object(c.indexOf)(e.controls.saveAs.allowedRoles,e&&e.security&&e.security.user&&e.security.user.role)?{}:{style:{display:"none"}}:{style:Object(d.isLoggedIn)(e)?{}:{display:"none"}}}}}})},4019:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(0),d=r(88).connect,m=r(26),y=r(195).createSelector,g=r(758),b=g.Glyphicon,h=g.Panel,v=r(2209).default,O=r(269).changeLayerProperties,E=r(2263),w=E.addService,S=E.deleteService,P=E.textSearch,T=E.changeCatalogFormat,j=E.changeCatalogMode,A=E.changeUrl,C=E.changeTitle,x=E.changeAutoload,D=E.changeType,_=E.changeServiceFormat,I=E.changeSelectedService,F=E.addLayer,k=E.addLayerError,L=E.focusServicesList,R=E.changeText,N=E.changeMetadataTemplate,M=E.toggleAdvancedSettings,B=E.toggleThumbnail,G=E.toggleTemplate,U=E.catalogClose,W=r(409).zoomToExtent,V=r(2303),H=V.addBackgroundProperties,z=V.updateThumbnail,q=V.removeThumbnail,Q=V.clearModalParameters,Y=V.backgroundAdded,K=r(767),X=K.currentLocaleSelector,Z=K.currentMessagesSelector,J=r(408).layersSelector,$=r(267),ee=$.setControlProperty,te=$.toggleControl,re=r(2193),ne=re.resultSelector,oe=re.serviceListOpenSelector,ie=re.newServiceSelector,ae=re.newServiceTypeSelector,le=re.selectedServiceTypeSelector,se=re.searchOptionsSelector,ce=re.servicesSelector,ue=re.servicesSelectorWithBackgrounds,pe=re.formatsSelector,fe=re.loadingErrorSelector,de=re.selectedServiceSelector,me=re.modeSelector,ye=re.layerErrorSelector,ge=re.activeSelector,be=re.savingSelector,he=re.authkeyParamNameSelector,ve=re.searchTextSelector,Oe=re.groupSelector,Ee=re.pageSizeSelector,we=re.loadingSelector,Se=r(268).projectionSelector,Pe=r(2140).mapLayoutValuesSelector,Te=r(2304),je=Te.metadataSourceSelector,Ae=Te.modalParamsSelector,Ce=r(2103),xe=r(2473);r(4020);var De=r(2308),_e=d(y([function(e){return J(e)},function(e){return Ae(e)},function(e){return he(e)},function(e){return ne(e)},function(e){return be(e)},function(e){return oe(e)},function(e){return ie(e)},function(e){return ae(e)},function(e){return le(e)},function(e){return se(e)},function(e){return X(e)},function(e){return Z(e)},function(e){return Ee(e)},function(e){return we(e)},function(e){return Se(e)}],(function(e,t,r,n,o,i,a,l,s,c,u,p,f,d,m){return{layers:e,modalParams:t,authkeyParamNames:r,saving:o,openCatalogServiceList:i,format:l,newService:a,currentLocale:u,pageSize:f,loading:d,crs:m,records:n&&De.getCatalogRecords(s,n,c,p)||[]}})),{onUpdateThumbnail:z,onAddBackgroundProperties:H,onZoomToExtent:W,onFocusServicesList:L,onPropertiesChange:O,onAddBackground:Y,removeThumbnail:q,onToggle:te.bind(null,"backgroundSelector",null),onLayerChange:ee.bind(null,"backgroundSelector"),onStartChange:ee.bind(null,"backgroundSelector","start")})(r(4022)),Ie=function(e){function t(){return i(this,t),l(this,s(t).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=p.createElement(_e,o({layerBaseConfig:t,zoomToLayer:this.props.zoomToLayer,searchOnStartup:this.props.searchOnStartup,active:this.props.active},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services,servicesWithBackgrounds:void 0}));return p.createElement("div",{id:"catalog-root",className:this.props.active?"catalog-active":"",style:{width:"100%",height:"100%",pointerEvents:"none"}},p.createElement(v,null,(function(t){var n=t.width;return p.createElement(xe,{open:e.props.active,size:e.props.width/n>1?n:e.props.width,position:"right",bsStyle:"primary",title:p.createElement(Ce,{msgId:"catalog.title"}),onClose:function(){return e.props.toggleControl()},glyph:"folder-open",style:e.props.dockStyle,noResize:!0},p.createElement(h,{id:e.props.id,style:e.props.panelStyle,className:e.props.panelClassName},r))})))}}])&&a(r.prototype,n),u&&a(r,u),t}(p.Component);u(Ie,"propTypes",{id:f.string,source:f.string,active:f.bool,searchOnStartup:f.bool,formats:f.array,wrap:f.bool,wrapWithPanel:f.bool,panelStyle:f.object,panelClassName:f.string,toggleControl:f.func,closeGlyph:f.string,buttonStyle:f.object,services:f.object,servicesWithBackgrounds:f.object,selectedService:f.string,style:f.object,dockProps:f.object,zoomToLayer:f.bool,width:f.number,dockStyle:f.object,group:f.string}),u(Ie,"defaultProps",{id:"mapstore-metadata-explorer",active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",toggleControl:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:660,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});var Fe=d(y([se,pe,ne,fe,de,me,ce,ue,ye,ge,function(e){return Pe(e,{height:!0})},ve,Oe,je],(function(e,t,r,n,o,i,a,l,s,c,u,p,f,d){return{searchOptions:e,formats:t,result:r,loadingError:n,selectedService:o,mode:i,services:a,servicesWithBackgrounds:l,layerError:s,active:c,dockStyle:u,searchText:p,group:f,source:d}})),{clearModal:Q,onSearch:P,onLayerAdd:F,toggleControl:U,onChangeFormat:T,onChangeServiceFormat:_,onChangeUrl:A,onChangeType:D,onChangeTitle:C,onChangeMetadataTemplate:N,onChangeText:R,onChangeAutoload:x,onChangeSelectedService:I,onChangeCatalogMode:j,onAddService:w,onToggleAdvancedSettings:M,onToggleThumbnail:B,onToggleTemplate:G,onDeleteService:S,onError:k})(Ie),ke={csw:r(2358),wms:r(769),wmts:r(2359),backgrounds:r(2360)};e.exports={MetadataExplorerPlugin:m(Fe,{Toolbar:{name:"metadataexplorer",position:10,exclusive:!0,panel:!0,tooltip:"catalog.tooltip",wrap:!0,title:"catalog.title",help:p.createElement(Ce,{msgId:"helptexts.metadataexplorer"}),icon:p.createElement(b,{glyph:"folder-open"}),priority:1},BurgerMenu:{name:"metadataexplorer",position:5,text:p.createElement(Ce,{msgId:"catalog.title"}),icon:p.createElement(b,{glyph:"folder-open"}),action:ee.bind(null,"metadataexplorer","enabled",!0,!0),priority:2,doNotHide:!0}}),reducers:{catalog:r(4033)},epics:r(2747).default(ke)}},4020:function(e,t,r){var n=r(4021);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},4021:function(e,t,r){(e.exports=r(759)()).push([e.i,".msgapi div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.msgapi div.record-grid .record-item{\n    height: auto;\n}\n.msgapi div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.msgapi #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.msgapi #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n.msgapi #catalog-root {\n    position: static!important;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .msgapi div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.msgapi #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""])},4022:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r(13),y=m.isNil,g=m.has,b=m.omit,h=r(26),v=r(0),O=r(1),E=r(758),w=E.FormControl,S=E.FormGroup,P=E.Alert,T=E.Pagination,j=E.Checkbox,A=E.Button,C=E.Panel,x=E.Form,D=E.Col,_=E.InputGroup,I=E.ControlLabel,F=E.Glyphicon,k=E.Tooltip,L=r(2517),R=r(2162),N=r(2145),M=r(2119),B=r(136),G=r(2103),U=r(2114),W=r(4023),V=r(2233),H=r(2231);r(2553),r(4031);var z=function(e){function t(){var e,r;l(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return d(p(r=c(this,(e=u(t)).call.apply(e,[this].concat(i)))),"state",{catalogURL:null}),d(p(r),"onSearchTextChange",(function(e){r.props.onChangeText(e.target.value)})),d(p(r),"onKeyDown",(function(e){13===e.keyCode&&r.search({services:r.props.services,selectedService:r.props.selectedService,searchText:r.props.searchText})})),d(p(r),"renderResult",(function(){return r.props.result?0===r.props.result.numberOfRecordsMatched?O.createElement("div",null,O.createElement(G,{msgId:"catalog.noRecordsMatched"})):r.renderRecords():r.props.loadingError?r.renderError():null})),d(p(r),"renderError",(function(e){return O.createElement(P,{bsStyle:"danger"},O.createElement(G,{msgId:e||"catalog.error"}))})),d(p(r),"renderLoading",(function(){return O.createElement("div",{className:"catalog-results loading"},O.createElement(H,{size:176}))})),d(p(r),"renderSaving",(function(){return r.props.saving?O.createElement(N,{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null})),d(p(r),"renderPagination",(function(){if(r.props.result){var e=r.props.result.numberOfRecordsMatched,t=r.props.result.numberOfRecordsReturned,n=r.props.searchOptions.startPosition,o=r.props.pageSize,i=Math.floor(n/o),a=Math.ceil(e/o);return O.createElement("div",{className:"catalog-pagination"},O.createElement(T,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:a,maxButtons:5,activePage:i+1,onSelect:r.handlePage}),O.createElement("div",{className:"push-right"},O.createElement(G,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+t-1,total:e}})))}return null})),d(p(r),"renderRecords",(function(){var e,t="",n=!1,i=!1;if(r.props.services&&r.props.services[r.props.selectedService]){var l=r.props.services[r.props.selectedService];y(l.metadataTemplate)||y(l.showTemplate)||(n=l.showTemplate,t=l.metadataTemplate),y(l.hideThumbnail)||(i=l.hideThumbnail)}return O.createElement("div",{className:"catalog-results"},O.createElement(W,o({},r.props.gridOptions,(d(e={crs:r.props.crs,key:"records",hideThumbnail:i,records:r.props.records.map((function(e){return n&&t?a({},e,{metadataTemplate:t}):e})),clearModal:r.props.clearModal,onUpdateThumbnail:r.props.onUpdateThumbnail,layers:r.props.layers,modalParams:r.props.modalParams,onAddBackgroundProperties:r.props.onAddBackgroundProperties,source:r.props.source,authkeyParamNames:r.props.authkeyParamNames,catalogURL:r.isValidServiceSelected()&&r.props.services[r.props.selectedService].url||"",catalogType:r.props.services[r.props.selectedService]&&r.props.services[r.props.selectedService].type,showTemplate:r.props.services[r.props.selectedService].showTemplate,onLayerAdd:r.props.onLayerAdd,onPropertiesChange:r.props.onPropertiesChange,onZoomToExtent:r.props.onZoomToExtent,zoomToLayer:r.props.zoomToLayer,onError:r.props.onError,showGetCapLinks:r.props.showGetCapLinks,addAuthentication:r.props.addAuthentication,currentLocale:r.props.currentLocale,recordItem:r.props.recordItem},"hideThumbnail",r.props.hideThumbnail),d(e,"hideIdentifier",r.props.hideIdentifier),d(e,"hideExpand",r.props.hideExpand),d(e,"onAddBackground",r.props.onAddBackground),d(e,"defaultFormat",r.props.services[r.props.selectedService]&&r.props.services[r.props.selectedService].format),d(e,"formatOptions",r.props.formatOptions),d(e,"layerBaseConfig",r.props.layerBaseConfig),d(e,"onAdd",(function(){r.search({services:r.props.services,selectedService:r.props.selectedService})})),e))))})),d(p(r),"renderButtons",(function(){var e=[];return"view"===r.props.mode&&(r.props.includeSearchButton&&e.push(O.createElement(A,{bsStyle:"primary",style:r.props.buttonStyle,onClick:function(){return r.search({services:r.props.services,selectedService:r.props.selectedService,searchText:r.props.searchText})},className:r.props.buttonClassName,key:"catalog_search_button",disabled:r.props.loading||!r.isValidServiceSelected()},O.createElement(G,{msgId:"catalog.search"}))),r.props.includeResetButton&&e.push(O.createElement(A,{style:r.props.buttonStyle,onClick:r.reset,key:"catalog_reset_button"},O.createElement(G,{msgId:"catalog.reset"})))),"edit"===r.props.mode&&(e.push(O.createElement(A,{style:r.props.buttonStyle,disabled:r.props.saving,onClick:function(){return r.props.onAddService()},key:"catalog_add_service_button"},r.renderSaving()," ",O.createElement(G,{msgId:"save"}))),r.props.newService.isNew||e.push(O.createElement(A,{style:r.props.buttonStyle,onClick:function(){return r.props.onDeleteService()},key:"catalog_delete_service_button"},O.createElement(G,{msgId:"catalog.delete"}))),e.push(O.createElement(A,{style:r.props.buttonStyle,disabled:r.props.saving,onClick:function(){return r.props.onChangeCatalogMode("view")},key:"catalog_back_view_button"},O.createElement(G,{msgId:"cancel"})))),e})),d(p(r),"renderTextSearch",(function(){var e=O.createElement(w,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:r.props.searchText,placeholder:B.getMessageById(r.context.messages,"catalog.textSearchPlaceholder"),onChange:r.onSearchTextChange,onKeyDown:r.onKeyDown});return r.props.wrapOptions?O.createElement(C,{collapsible:!0,defaultExpanded:!1,header:B.getMessageById(r.context.messages,"catalog.options")},e):e})),d(p(r),"renderFormats",(function(){return r.props.formats.map((function(e){return O.createElement("option",{value:e.name,key:e.name},e.label)}))})),d(p(r),"getServices",(function(){return(g(r.props.services,"default_map_backgrounds")?["default_map_backgrounds"]:[]).concat(Object.keys(b(r.props.services,"default_map_backgrounds"))).map((function(e){return h({},r.props.services[e],{label:B.getMessageById(r.context.messages,r.props.services[e].title),value:e})}))})),d(p(r),"isValidServiceSelected",(function(){return void 0!==r.props.services[r.props.selectedService]})),d(p(r),"search",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.services,n=e.selectedService,o=e.start,i=void 0===o?1:o,a=e.searchText,l=void 0===a?"":a,s=t[n].url,c=t[n].type;r.props.onSearch({format:c,url:s,startPosition:i,maxRecords:r.props.pageSize,text:l||""})})),d(p(r),"isViewMode",(function(e){return"view"===e})),d(p(r),"reset",(function(){r.refs.catalogURL&&(r.refs.catalogURL.refs.input.value=""),r.refs.searchText&&(r.refs.searchText.refs.input.value=""),r.props.onReset()})),d(p(r),"handlePage",(function(e){if(e){var t=(e-1)*r.props.pageSize+1;r.search({services:r.props.services,selectedService:r.props.selectedService,start:t,searchText:r.props.searchText})}})),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e=this,t=!y(this.props.newService.showTemplate)&&this.props.newService.showTemplate;return this.isViewMode(this.props.mode)?O.createElement(M,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:O.createElement(x,null,O.createElement(S,{controlId:"labelService",key:"labelService"},O.createElement(I,null,O.createElement(G,{msgId:"catalog.service"}))),O.createElement(S,{controlId:"service",key:"service"},O.createElement(_,null,O.createElement(R,{clearValueText:B.getMessageById(this.context.messages,"catalog.clearValueText"),noResultsText:B.getMessageById(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(t){return e.props.onChangeSelectedService(t&&t.value?t.value:"")},placeholder:B.getMessageById(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&"default_map_backgrounds"!==this.props.selectedService?O.createElement(_.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!1)}},O.createElement(F,{glyph:"pencil"})):null,O.createElement(_.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!0)}},O.createElement(F,{glyph:"plus"})))),O.createElement(S,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),O.createElement(S,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult()):O.createElement(M,{bodyClassName:"ms2-border-layout-body catalog",header:O.createElement(x,{horizontal:!0},O.createElement(S,null,O.createElement(D,{xs:12},O.createElement(I,null,O.createElement(G,{msgId:"catalog.url"})),O.createElement(w,{ref:"url",type:"text",style:{textOverflow:"ellipsis"},placeholder:B.getMessageById(this.context.messages,"catalog.urlPlaceholder"),value:this.props.newService&&this.props.newService.url,onChange:function(t){return e.props.onChangeUrl(t.target.value)}}))),O.createElement(S,{controlId:"title",key:"title"},O.createElement(D,{xs:12,sm:3,md:3},O.createElement(I,null,O.createElement(G,{msgId:"catalog.type"})),O.createElement(w,{onChange:function(t){return e.props.onChangeType(t.target.value)},value:this.props.newService&&this.props.newService.type,componentClass:"select"},this.renderFormats())),O.createElement(D,{xs:12,sm:9,md:9},O.createElement(I,null,O.createElement(G,{msgId:"catalog.serviceTitle"})),O.createElement(w,{ref:"title",type:"text",style:{textOverflow:"ellipsis"},placeholder:B.getMessageById(this.context.messages,"catalog.serviceTitlePlaceholder"),value:this.props.newService&&this.props.newService.title,onChange:function(t){return e.props.onChangeTitle(t.target.value)}}))))},O.createElement(x,null,O.createElement(V,{useToolbar:!0,title:O.createElement(G,{msgId:"catalog.advancedSettings"}),expanded:!y(this.props.newService.showAdvancedSettings)&&this.props.newService.showAdvancedSettings,onSwitch:this.props.onToggleAdvancedSettings},O.createElement("div",null,O.createElement(S,{controlId:"autoload",key:"autoload"},O.createElement(D,{xs:12},O.createElement(j,{value:"autoload",onChange:function(t){return e.props.onChangeAutoload(t.target.checked)},checked:!y(this.props.newService.autoload)&&this.props.newService.autoload},O.createElement(G,{msgId:"catalog.autoload"})))),O.createElement(S,{controlId:"thumbnail",key:"thumbnail"},O.createElement(D,{xs:12},O.createElement(j,{onChange:function(){return e.props.onToggleThumbnail()},checked:!!y(this.props.newService.hideThumbnail)||!this.props.newService.hideThumbnail},O.createElement(G,{msgId:"catalog.showPreview"})))),!y(this.props.newService.type)&&"csw"===this.props.newService.type&&O.createElement(S,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},O.createElement(D,{xs:12},O.createElement(j,{onChange:function(){return e.props.onToggleTemplate()},checked:t},O.createElement(G,{msgId:"catalog.showTemplate"})),O.createElement("br",null)),t&&O.createElement(D,{xs:12},O.createElement("span",null,O.createElement("p",null,O.createElement(G,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"",O.createElement(U,{placement:"top",key:"overlay-trigger."+this.props.id,overlay:O.createElement(k,{id:"metadata-tooltip"},O.createElement(G,{msgId:"catalog.templateMetadataAvailable"}))},O.createElement(F,{glyph:"question-sign"}))),O.createElement("pre",null,O.createElement(G,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),O.createElement(D,{xs:12},t&&O.createElement(L,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:this.props.newService.metadataTemplate||"",onChange:function(t){t&&"<p><br></p>"!==t?e.props.onChangeMetadataTemplate(t):e.props.onChangeMetadataTemplate("")}}))),O.createElement(S,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},O.createElement(D,{xs:6},O.createElement(I,null,"Format")),O.createElement(D,{xs:6},O.createElement(R,{value:this.props.newService&&this.props.newService.format,clearable:!0,options:this.props.formatOptions,onChange:function(t){return e.props.onChangeServiceFormat(t&&t.value)}}))))),O.createElement(S,{controlId:"buttons",key:"butStons"},O.createElement(D,{xs:12},this.renderButtons()))))}}])&&s(r.prototype,n),i&&s(r,i),t}(O.Component);d(z,"propTypes",{active:v.bool,addAuthentication:v.bool,buttonClassName:v.string,buttonStyle:v.object,currentLocale:v.string,formats:v.array,format:v.string,crs:v.string,gridOptions:v.object,includeSearchButton:v.bool,includeResetButton:v.bool,loadingError:v.object,layerError:v.string,mode:v.string,newService:v.object,onAddService:v.func,onChangeAutoload:v.func,onChangeCatalogMode:v.func,onChangeServiceFormat:v.func,onChangeMetadataTemplate:v.func,onChangeTitle:v.func,onChangeText:v.func,onChangeType:v.func,onChangeUrl:v.func,onChangeFormat:v.func,onChangeSelectedService:v.func,onDeleteService:v.func,onToggleTemplate:v.func,onToggleAdvancedSettings:v.func,onToggleThumbnail:v.func,onPropertiesChange:v.func,onError:v.func,onLayerAdd:v.func,onReset:v.func,onSearch:v.func,onZoomToExtent:v.func,onAddBackground:v.func,pageSize:v.number,records:v.array,authkeyParamNames:v.array,recordItem:v.element,result:v.object,saving:v.bool,searchOptions:v.object,selectedService:v.string,services:v.object,showGetCapLinks:v.bool,wrapOptions:v.bool,zoomToLayer:v.bool,hideIdentifier:v.bool,hideExpand:v.bool,source:v.string,onAddBackgroundProperties:v.func,modalParams:v.object,layers:v.array,onUpdateThumbnail:v.func,clearModal:v.func,formatOptions:v.array,layerBaseConfig:v.object}),d(z,"contextTypes",{messages:v.object}),d(z,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",formats:[{name:"csw",label:"CSW"}],format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",newService:{title:"",type:"wms",url:"",format:"image/png"},onAddService:function(){},onChangeAutoload:function(){},onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeMetadataTemplate:function(){},onChangeTitle:function(){},onChangeText:function(){},onChangeType:function(){},onChangeUrl:function(){},onChangeServiceFormat:function(){},onChangeSelectedService:function(){},onToggleTemplate:function(){},onToggleAdvancedSettings:function(){},onToggleThumbnail:function(){},onDeleteService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},onZoomToExtent:function(){},changeLayerProperties:function(){},pageSize:4,records:[],saving:!1,loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],layerBaseConfig:{},crs:"EPSG:3857"}),e.exports=z},4023:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(758),y=m.Grid,g=m.Row,b=m.Col,h=r(4024).default,v=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return p(c(r=l(this,(e=s(t)).call.apply(e,[this].concat(a)))),"renderRecordItem",(function(e){var t=r.props.recordItem||h;return f.createElement(b,o({},r.props.column,{key:e.identifier}),f.createElement(t,{crs:r.props.crs,clearModal:r.props.clearModal,layers:r.props.layers,modalParams:r.props.modalParams,onUpdateThumbnail:r.props.onUpdateThumbnail,onAddBackgroundProperties:r.props.onAddBackgroundProperties,onAddBackground:r.props.onAddBackground,source:r.props.source,onLayerAdd:r.props.onLayerAdd,onPropertiesChange:r.props.onPropertiesChange,onZoomToExtent:r.props.onZoomToExtent,zoomToLayer:r.props.zoomToLayer,hideThumbnail:r.props.hideThumbnail,hideIdentifier:r.props.hideIdentifier,hideExpand:r.props.hideExpand,onError:r.props.onError,catalogURL:r.props.catalogURL,catalogType:r.props.catalogType,showTemplate:r.props.showTemplate,record:e,authkeyParamNames:r.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:r.props.showGetCapLinks,addAuthentication:r.props.addAuthentication,currentLocale:r.props.currentLocale,defaultFormat:r.props.defaultFormat,formatOptions:r.props.formatOptions,layerBaseConfig:r.props.layerBaseConfig}))})),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return f.createElement(y,{className:"record-grid",fluid:!0,style:this.props.style},f.createElement(g,null,e.map(this.renderRecordItem)))}return null}}])&&a(r.prototype,n),d&&a(r,d),t}(f.Component);p(v,"propTypes",{crs:d.string,recordItem:d.element,catalogURL:d.string,catalogType:d.string,onZoomToExtent:d.func,zoomToLayer:d.bool,onLayerAdd:d.func,onPropertiesChange:d.func,onError:d.func,records:d.array,authkeyParamNames:d.array,style:d.object,showGetCapLinks:d.bool,addAuthentication:d.bool,column:d.object,currentLocale:d.string,hideThumbnail:d.bool,hideIdentifier:d.bool,hideExpand:d.bool,source:d.string,onAddBackgroundProperties:d.func,modalParams:d.object,layers:d.object,onUpdateThumbnail:d.func,clearModal:d.func,onAddBackground:d.func,showTemplate:d.bool,defaultFormat:d.string,formatOptions:d.array,layerBaseConfig:d.object}),p(v,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"}),e.exports=v},4024:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(0),a=r.n(i),l=r(13),s=r(758),c=r(2308),u=r(80),p=r.n(u),f=r(424),d=r.n(f),m=r(772),y=r(136),g=r.n(y),b=r(2103),h=r.n(b),v=r(4025),O=r.n(v),E=r(2521),w=r.n(E),S=r(2116),P=r.n(S),T=r(2135),j=r.n(T),A=r(4030),C=r.n(A),x=r(2687),D=r.n(x),_=r(2688);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?U(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=j()(s.Button),z=function(e){function t(){var e,r;N(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return V(U(r=B(this,(e=G(t)).call.apply(e,[this].concat(i)))),"state",{visibleExpand:!1}),V(U(r),"getTitle",(function(e){return Object(l.isObject)(e)?e[r.props.currentLocale]||e.default:e||""})),V(U(r),"renderThumb",(function(e,t){var n=e||C.a;return o.a.createElement(s.Image,{className:"preview",src:n,alt:t&&r.getTitle(t.title)})})),V(U(r),"renderButtons",(function(e,t){if(!e||!e.references)return null;var n=Object(c.extractOGCServicesReferences)(e),i=n.wms,a=n.wmts,l=Object(c.extractEsriReferences)(e).esri,u=e&&e.background,p=[];if(u&&p.push(t?o.a.createElement(h.a,{msgId:"catalog.backgroundAlreadyAdded"}):o.a.createElement(H,V({key:"wms-button",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:r.props.buttonSize,onClick:function(){var e=R({},u,{id:u.name,visibility:!1});r.props.onLayerAdd(e),r.props.onAddBackground(e.id)}},"key","addlayer"),o.a.createElement(s.Glyphicon,{glyph:"plus"}))),i||a){var f=i?"wms":"wmts";p.push(o.a.createElement(H,V({key:"".concat(f,"-button"),tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:r.props.buttonSize,onClick:function(){var t=r.makeLayer(f,i||a);t&&("backgroundSelector"===r.props.source?r.props.onAddBackgroundProperties({identifier:e.identifier,editing:!1,layer:t},!0):r.addLayer(t))}},"key","add".concat(f,"layer")),o.a.createElement(s.Glyphicon,{glyph:"plus"})))}if(l&&p.push(o.a.createElement(H,V({key:"wmts-button",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:r.props.buttonSize,onClick:function(){r.addLayer(Object(c.esriToLayer)(r.props.record,r.props.layerBaseConfig))}},"key","addwmtsLayer"),o.a.createElement(s.Glyphicon,{glyph:"plus"}))),r.props.showGetCapLinks){var d=Object(c.getRecordLinks)(e);d.length>0&&p.push(o.a.createElement(O.a,{key:"sharing-links",popoverContainer:U(r),links:d,onCopy:r.props.onCopy,buttonSize:r.props.buttonSize,addAuthentication:r.props.addAuthentication}))}return p})),V(U(r),"renderDescription",(function(e){if(!e)return null;var t=g.a.getMessageById(r.context.messages,"catalog.notAvailable");return r.state.fullText&&e.metadataTemplate?o.a.createElement("div",{className:"catalog-metadata ql-editor"},o.a.createElement(d.a,{html:Object(m.parseCustomTemplate)(e.metadataTemplate,e.metadata,(function(e){return"".concat(Object(l.trim)(e.substring(2,e.length-1))," ").concat(t)}))})):e.metadataTemplate?"":Object(l.isArray)(e.description)?e.description.join(", "):e.description})),V(U(r),"isLinkCopied",(function(e){return r.state[e]})),V(U(r),"setLinkCopiedStatus",(function(e,t){r.setState(V({},e,t))})),V(U(r),"makeLayer",(function(e,t){var n=Object(c.buildSRSMap)(t.SRS);return t.SRS.length>0&&!p.a.isAllowedSRS(r.props.crs,n)?(r.props.onError("catalog.srs_not_allowed"),null):Object(c.recordToLayer)(r.props.record,e,R({removeParams:r.props.authkeyParamNames},"wms"===e?{catalogURL:"csw"===r.props.catalogType&&r.props.catalogURL?r.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+r.props.record.identifier:null,format:r.props.defaultFormat}:{format:r.props.defaultFormat}),r.props.layerBaseConfig)})),V(U(r),"addLayer",(function(e){if(e&&(r.props.onLayerAdd(e),r.props.record.boundingBox&&r.props.zoomToLayer)){var t=r.props.record.boundingBox.extent,n=r.props.record.boundingBox.crs;r.props.onZoomToExtent(t,n)}})),V(U(r),"displayExpand",(function(){return(r.descriptionRuler?r.descriptionRuler.clientWidth:0)>(r.sideCardDesc?r.sideCardDesc.clientWidth:0)})),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=g.a.getMessageById(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&Object(m.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(t){return"".concat(Object(l.trim)(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"renderBackgroundDialog",value:function(){var e=this;return o.a.createElement(_.default,k({onClose:this.props.clearModal,onSave:function(t){e.addLayer(t),e.props.onAddBackground(t.id)},updateThumbnail:this.props.onUpdateThumbnail,defaultFormat:this.props.defaultFormat,formatOptions:this.props.formatOptions},this.props.modalParams))}},{key:"render",value:function(){var e=this,t=this.props.record,r=Object(c.extractOGCServicesReferences)(t),n=r.wms,i=r.wmts,a=Object(c.extractEsriReferences)(t).esri,s=t&&t.background,u=s&&Object(l.head)((this.props.layers||[]).filter((function(e){return e.id===s.name||e.type===s.type&&e.source===s.source&&e.name===s.name})));return t?o.a.createElement("div",null,this.props.modalParams&&this.props.modalParams.identifier===t.identifier&&!this.props.modalParams.editing?this.renderBackgroundDialog():null,o.a.createElement(w.a,{style:{transform:"none",opacity:u?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(t&&t.thumbnail||s&&D.a[s.source][s.name],t),title:t&&this.getTitle(t.title),description:o.a.createElement("div",{className:!0,ref:function(t){e.sideCardDesc=t}},this.renderDescription(t)),caption:o.a.createElement("div",null,!this.props.hideIdentifier&&o.a.createElement("div",{className:"identifier"},t&&t.identifier),o.a.createElement("div",null,!n&&!i&&!a&&!s&&o.a.createElement("small",{className:"text-danger"},o.a.createElement(h.a,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&o.a.createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(t){e.descriptionRuler=t}},this.renderDescription(t))),tools:o.a.createElement(P.a,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[].concat(F((t&&this.renderButtons(t,u)||[]).map((function(e){return{Element:function(){return e}}}))),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return e.setState({fullText:!e.state.fullText})}}])})})):null}}])&&M(r.prototype,n),i&&M(r,i),t}(o.a.Component);V(z,"propTypes",{addAuthentication:a.a.bool,authkeyParamNames:a.a.array,buttonSize:a.a.string,catalogURL:a.a.string,catalogType:a.a.string,crs:a.a.string,currentLocale:a.a.string,hideThumbnail:a.a.bool,hideExpand:a.a.bool,hideIdentifier:a.a.bool,layerBaseConfig:a.a.object,onCopy:a.a.func,onError:a.a.func,onLayerAdd:a.a.func,onAddBackground:a.a.func,onZoomToExtent:a.a.func,record:a.a.object,showGetCapLinks:a.a.bool,zoomToLayer:a.a.bool,onPropertiesChange:a.a.func,onLayerChange:a.a.func,layers:a.a.array,onAdd:a.a.func,source:a.a.string,modalParams:a.a.object,onAddBackgroundProperties:a.a.func,onUpdateThumbnail:a.a.func,deletedId:a.a.string,clearModal:a.a.func,showTemplate:a.a.bool,defaultFormat:a.a.string,formatOptions:a.a.array}),V(z,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onUpdateThumbnail:function(){},onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onZoomToExtent:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){}}),V(z,"contextTypes",{messages:a.a.object}),t.default=z},4025:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,f,d,m=r(1),y=r(0),g=r(4026),b=r(2103),h=r(758),v=h.Popover,O=h.Button,E=h.Glyphicon,w=r(2114),S=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=i(e,["links","buttonSize"]),a=t.map((function(e,t){return m.createElement(g,o({key:t,url:e.url,labelId:e.labelId},n))})),l=m.createElement(v,{className:"links-popover",id:"links-popover"},m.createElement("h5",null,m.createElement(b,{msgId:"catalog.share"})),a);return m.createElement(w,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:l},m.createElement(O,{bsSize:r,className:"square-button-md",bsStyle:"primary"},m.createElement(E,{glyph:"link"})))}}])&&l(r.prototype,n),p&&l(r,p),t}(m.Component);p=S,f="propTypes",d={links:y.array,onCopy:y.func,messages:y.object,locale:y.string,buttonSize:y.string,popoverContainer:y.object,addAuthentication:y.bool},f in p?Object.defineProperty(p,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):p[f]=d,e.exports=S},4026:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(2103),m=r(758),y=m.FormControl,g=m.FormGroup,b=m.Button,h=m.Glyphicon,v=m.Tooltip,O=r(2114),E=r(2868),w=r(197),S=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"state",{showCopiedToolTip:!1}),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?w.addAuthenticationToUrl(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=f.createElement(v,{id:"tooltip"},f.createElement(d,{msgId:r})),o=f.createElement(E,{text:t,onCopy:this.props.onCopy},f.createElement(O,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},f.createElement(b,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},f.createElement(h,{glyph:"paperclip"}),"",this.props.labelId&&f.createElement(d,{msgId:this.props.labelId}))));return f.createElement("div",{className:"link-sharing"},f.createElement(g,{bsSize:this.props.bsSize},f.createElement(y,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(S,"propTypes",{url:p.string.isRequired,labelId:p.string,onCopy:p.func,bsSize:p.string,addAuthentication:p.bool}),u(S,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1}),e.exports=S},4030:function(e,t,r){e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"},4033:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2263),l=a.RECORD_LIST_LOADED,s=a.RECORD_LIST_LOAD_ERROR,c=a.CHANGE_CATALOG_FORMAT,u=a.ADD_LAYER_ERROR,p=a.RESET_CATALOG,f=a.CHANGE_SELECTED_SERVICE,d=a.CHANGE_CATALOG_MODE,m=a.CHANGE_TITLE,y=a.CHANGE_TEXT,g=a.CHANGE_AUTOLOAD,b=a.CHANGE_TYPE,h=a.CHANGE_URL,v=a.CHANGE_SERVICE_FORMAT,O=a.FOCUS_SERVICES_LIST,E=a.ADD_CATALOG_SERVICE,w=a.DELETE_CATALOG_SERVICE,S=a.SAVING_SERVICE,P=a.CHANGE_METADATA_TEMPLATE,T=a.SET_LOADING,j=a.TOGGLE_THUMBNAIL,A=a.TOGGLE_TEMPLATE,C=a.TOGGLE_ADVANCED_SETTINGS,x=r(40).MAP_CONFIG_LOADED,D=r(410).set,_=r(13).isNil,I=r(26),F={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,pageSize:4,services:{},selectedService:"",newService:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return o({},e,{saving:t.status});case l:return I({},e,{result:t.result,searchOptions:t.searchOptions,loadingError:null,layerError:null,loading:!1});case p:return I({},e,{result:null,loadingError:null,searchOptions:null});case s:return I({},e,{result:null,searchOptions:null,loadingError:t.error,loading:!1,layerError:null});case c:return I({},e,{result:null,loadingError:null,format:t.format,layerError:null});case u:return I({},e,{layerError:t.error});case d:return I({},e,{newService:t.isNew?F:I({},e.services&&e.services[e.selectedService||""]||{},{oldService:e.selectedService||""}),mode:t.mode,result:null,loadingError:null,layerError:null});case x:return e&&!_(e.default)?t.config&&!_(t.config.catalogServices)?I({},e,{services:t.config.catalogServices.services,selectedService:t.config.catalogServices.selectedService}):I({},e,{services:e.default.services,selectedService:e.default.selectedService}):e;case O:return D("openCatalogServiceList",t.status,e);case y:return D("searchOptions.text",t.text,e);case m:return D("newService.title",t.title,e);case h:return D("newService.url",t.url,e);case g:return D("newService.autoload",t.autoload,e);case v:return D("newService.format",t.format,e);case b:var r=t.newType.toLowerCase(),n={};return"csw"!==r&&(n={showTemplate:!1,metadataTemplate:""}),I({},e,{newService:I({},e.newService,o({type:r},n))});case E:var a;if(t.service.isNew){var k=I({},t.service);delete k.isNew,a=I({},e.services,i({},t.service.title,k))}else{var L=I({},e.services);delete L[t.service.oldService],a=I({},L,i({},t.service.title,t.service))}return""!==t.service.title&&""!==t.service.url?I({},e,{services:a,selectedService:t.service.title,mode:"view",result:null,loadingError:null,searchOptions:I({},e.searchOptions,{text:""}),layerError:null}):e;case f:return t.service!==e.selectedService?I({},e,{selectedService:t.service,result:null,loadingError:null,layerError:null}):e;case w:var R,N="";return delete(R=I({},e.services))[t.service],Object.keys(R).length&&(N=R[Object.keys(R)[0]].title),I({},e,{services:R,selectedService:N,mode:"view",result:null,loadingError:null,layerError:null});case j:return D("newService.hideThumbnail",!e.newService.hideThumbnail,e);case T:return D("loading",t.loading,e);case P:return D("newService.metadataTemplate",t.metadataTemplate,e);case A:var M=D("newService.showTemplate",!e.newService.showTemplate,e);return M.newService.showTemplate&&(M=D("newService.metadataTemplate",M.newService.metadataTemplate||"<p>${description}</p>",M)),M;case C:return D("newService.showAdvancedSettings",!e.newService.showAdvancedSettings,e);default:return e}}},4034:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(758),m=d.Grid,y=d.Row,g=d.Col,b=r(2302),h=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getPanels",(function(){return r.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,r){return{name:t.name+r,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[r]:{}}})))}),[])})),u(s(r),"getTools",(function(){return r.props.items.sort((function(e,t){return e.position-t.position}))})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return f.createElement(b,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return f.createElement(m,{fluid:!0},f.createElement(y,null,e.children.map((function(e,t){return f.createElement(g,u({key:t,xs:12,xsOffset:0,sm:6,smOffset:3},"smOffset",0),e)}))))},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return f.createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(h,"propTypes",{className:p.string,style:p.object,items:p.array,id:p.string,mapType:p.string}),u(h,"defaultProps",{items:[],className:"grid-home-container",style:{},id:"mapstore-grid-home",mapType:"leaflet"}),e.exports={GridContainerPlugin:h,reducers:{}}},4035:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(1),d=r(0),m=r(88).connect,y=r(195).createSelector,g=r(407),b=g.compose,h=g.branch,v=g.toClass,O=r(26),E=r(13),w=E.isArray,S=E.isString,P=r(2231),T=r(2119),j=r(2161),A=r(2138),C=r(2260),x=r(2520),D=x.statusStyleSelector,_=x.loadingStyleSelector,I=x.getUpdatedLayer,F=x.errorStyleSelector,k=x.canEditStyleSelector,L=x.styleServiceSelector,R=r(271).userRoleSelector,N=r(2247).initStyleService,M=r(269).updateSettingsParams,B=r(2786),G=B.StyleSelector,U=B.StyleToolbar,W=B.StyleCodeEditor,V=r(2274).isSameOrigin,H=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||w(this.props.editingAllowedRoles)&&S(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&V(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return f.createElement(T,{className:"ms-style-editor-container",header:this.props.showToolbar?f.createElement("div",{className:"ms-style-editor-container-header"},this.props.header,f.createElement("div",{className:"text-center"},f.createElement(U,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:f.createElement("div",{style:{height:25}})},this.props.isEditing?f.createElement(W,null):f.createElement(G,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&l(r.prototype,n),o&&l(r,o),t}(f.Component);p(H,"propTypes",{layer:d.object,header:d.node,isEditing:d.bool,showToolbar:d.node.bool,onInit:d.func,styleService:d.object,userRole:d.string,editingAllowedRoles:d.array,enableSetDefaultStyle:d.bool,canEdit:d.bool}),p(H,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"]});var z=b(v,h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active;return!t}),(function(){return function(){return null}})),m(y([D,_,I,F,R,k,L],(function(e,t,r,n,o,i,a){return{isEditing:"edit"===e,loading:t,layer:r,error:!(!n||!n.availableStyles),userRole:o,canEdit:i,styleService:a}})),{onInit:N,onUpdateParams:M},(function(e,t,r){return o({},r,{},e,{},t,{styleService:r.styleService?o({},r.styleService,{isStatic:!0}):o({},e.styleService)})})),A((function(e){return e.error}),{glyph:"exclamation-mark",title:f.createElement(C,{msgId:"styleeditor.missingAvailableStyles"}),description:f.createElement(C,{msgId:"styleeditor.missingAvailableStylesMessage"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}),j((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return f.createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},f.createElement(P,e))})))(H);e.exports={StyleEditorPlugin:O(z,{TOC:{priority:1,container:"TOCItemSettings",ToolbarComponent:U}}),reducers:{styleeditor:r(4036)},epics:r(4037)}},4036:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2247),l=a.UPDATE_TEMPORARY_STYLE,s=a.UPDATE_STATUS,c=a.ERROR_STYLE,u=a.ADD_STYLE,p=a.RESET_STYLE_EDITOR,f=a.LOADING_STYLE,d=a.LOADED_STYLE,m=a.INIT_STYLE_SERVICE,y=a.SET_EDIT_PERMISSION;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return o({},e,{service:t.service,canEdit:t.canEdit});case y:return o({},e,{canEdit:t.canEdit});case l:return o({},e,{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case s:return""===t.status?o({},e,{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):o({},e,{status:t.status});case p:return{service:e.service&&o({},e.service)||{},canEdit:e.canEdit};case u:return o({},e,{addStyle:t.add});case f:return o({},e,{loading:!t.status||t.status,error:{}});case d:return o({},e,{loading:!1,enabled:!0});case c:var r=t.error&&t.error.statusText||"",n=r.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),a=n&&2===n.length&&n.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),a=parseFloat(r[1]);return n&&!isNaN(a)&&o({},e,i({},n,a))||o({},e)}),{message:r})||{message:r};return o({},e,{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status)),error:o({},e.error,i({},t.status||"global",o({status:t.error&&t.error.status||404},a)))});default:return e}}},4037:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=r(15),s=r(13),c=s.get,u=s.head,p=s.isArray,f=s.template,d=r(161),m=d.success,y=d.error,g=r(269),b=g.UPDATE_NODE,h=g.updateNode,v=g.updateSettingsParams,O=r(2259),E=O.updateAdditionalLayer,w=O.removeAdditionalLayer,S=O.updateOptionsByOwner,P=r(2306).getDescribeLayer,T=r(2361).getLayerCapabilities,j=r(267).setControlProperty,A=r(137),C=A.findGeoServerName,x=A.formatCapabitiliesOptions,D=r(2247),_=D.SELECT_STYLE_TEMPLATE,I=D.updateTemporaryStyle,F=D.TOGGLE_STYLE_EDITOR,k=D.resetStyleEditor,L=D.UPDATE_STATUS,R=D.loadingStyle,N=D.LOADED_STYLE,M=D.loadedStyle,B=D.CREATE_STYLE,G=D.updateStatus,U=D.selectStyleTemplate,W=D.errorStyle,V=D.UPDATE_STYLE_CODE,H=D.EDIT_STYLE_CODE,z=D.DELETE_STYLE,q=D.setEditPermissionStyleEditor,Q=D.SET_DEFAULT_STYLE,Y=D.initStyleService,K=r(4288).default,X=r(4038),Z=r(2520),J=Z.temporaryIdSelector,$=Z.codeStyleSelector,ee=Z.formatStyleSelector,te=Z.languageVersionStyleSelector,re=Z.statusStyleSelector,ne=Z.selectedStyleSelector,oe=Z.enabledStyleEditorSelector,ie=Z.loadingStyleSelector,ae=Z.styleServiceSelector,le=Z.getUpdatedLayer,se=r(408),ce=se.getSelectedLayer,ue=se.layerSettingSelector,pe=r(2274),fe=pe.generateTemporaryStyleId,de=pe.generateStyleId,me=pe.STYLE_OWNER_NAME,ye=pe.getNameParts,ge=r(763),be=ge.initialSettingsSelector,he=ge.originalSettingsSelector,ve=function(e){var t=e.status,r=e.styleName,n=e.baseUrl;return"edit"===t?l.Observable.defer((function(){return K.getStyleCodeByName({baseUrl:n,styleName:r})})).switchMap((function(e){return l.Observable.of(U({languageVersion:e.languageVersion,code:e.code,templateId:"",format:e.format,init:!0}))})).catch((function(e){return l.Observable.of(W("edit",e))})):l.Observable.empty()},Oe=function(e){var t=e.styleName,r=e.baseUrl,n=e.onSuccess$,o=e.onError$;return l.Observable.defer((function(){return K.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return n||l.Observable.empty()})).catch((function(){return o||l.Observable.empty()}))},Ee=function(e){var t=e.baseUrl,r=e.update,n=e.code,o=e.format,i=e.styleName,s=e.status,c=e.languageVersion,u=e.options,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l.Observable.defer((function(){return K[r?"updateStyle":"createStyle"]({baseUrl:t,code:n,format:o,styleName:i,languageVersion:c,options:u})})).switchMap((function(){var e;return p(f)&&(e=l.Observable).of.apply(e,[M()].concat(a(f)))||f})).catch((function(e){var t;return(t=l.Observable).of.apply(t,[W(s,e),M()].concat(a(d)))})).startWith(R(s))};e.exports={toggleStyleEditorEpic:function(e,t){return e.ofType(F).filter((function(){return!ie(t.getState())})).switchMap((function(e){var r=t.getState(),n=ue(r),i=!!c(n,"options.availableStyles");if(!e.enabled)return function(e){var t=J(e),r=ae(e).baseUrl,n=void 0===r?"":r;return l.Observable.of(k(),w({owner:me})).merge(t?Oe({styleName:t,baseUrl:n}):l.Observable.empty())}(r);if(oe(r)&&i)return l.Observable.empty();var a=e.layer||ce(r);if(!a||a&&!a.url)return l.Observable.empty();var s=C(a);if(!s)return l.Observable.empty();var u=a.url.split(s),p="".concat(u[0]).concat(s),f=ae(r);return l.Observable.defer((function(){return f.isStatic?new Promise((function(e){return e(null)})):K.getStyleService({baseUrl:p})})).switchMap((function(e){var t,r=f.isStatic?[]:[Y(e)];return(t=T(a).switchMap((function(e){var t=x(e);if(!t.availableStyles)return l.Observable.of(W("availableStyles",{status:401}),M());return l.Observable.defer((function(){return K.getStylesInfo({baseUrl:p,styles:t&&t.availableStyles||[]})})).switchMap((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l.Observable.of(E(a.id,me,"override",{}),v({availableStyles:e}),h(a.id,"layer",o({},t,{availableStyles:e})),M())}(e)}))}))).startWith.apply(t,r).catch((function(e){return l.Observable.of(W("global",e),M())}))})).startWith(R("global"))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(L).filter((function(e){return!!e.status})).switchMap((function(r){var n=t.getState(),o=le(n),i=o&&o.params||{},s=o&&!o.describeFeatureType&&P(o.url,o,{query:i}),c=ne(n)||o.availableStyles&&o.availableStyles[0]&&o.availableStyles[0].name,u=ae(n).baseUrl,p=void 0===u?"":u;return s&&function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=l.Observable).of.apply(r,[R("global")].concat(a(o))).merge(e.ofType(b).filter((function(){var e=ce(t.getState());return n(e)})).switchMap((function(){var e=ce(t.getState());return i(e)})).catch((function(e){return l.Observable.of(W("global",e),M())})).takeUntil(e.ofType(N)))}(e,t,(function(e){return e&&e.describeLayer}),[s],(function(e){return l.Observable.concat(ve({status:r.status,styleName:c,baseUrl:p}),l.Observable.of(q(!(e&&e.describeLayer&&401===e.describeLayer.error)),M()))}))||ve({status:r.status,styleName:c,baseUrl:p})}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(_,H).switchMap((function(e){var r=t.getState(),n=J(r),o=le(r),i=ye(o.name).workspace,a=e.format&&e.format!==ee(r),l=n||"".concat(i?"".concat(i,":"):"").concat(fe()),s=e.format||ee(r),c=re(r),u=ae(r).baseUrl,p=void 0===u?"":u,f=te(r),d="sld"===s&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},m=f.version!==d.version?{params:{raw:!0}}:{},g=d,b=function(t){return Ee({update:!0,code:e.code,format:s,styleName:t,status:c,baseUrl:p,languageVersion:g,options:m},[S(me,[{style:t,_v_:Date.now(),singleTile:!0}]),I({temporaryId:t,templateId:e.templateId||"",code:e.code,format:s,init:e.init,languageVersion:g})],"edit"===c?[]:[y({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},h=("css"===s?"* { stroke: #888888; }":"sld"===s&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",v=function(e){return Ee({code:h,format:s,styleName:e,status:c,baseUrl:p},b(e),[y({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),I({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return a&&n&&Oe({styleName:n,baseUrl:p,onSuccess$:v("".concat(i?"".concat(i,":"):"").concat(fe())),onError$:b(l)})||n&&b(l)||v(l)}))},createStyleEpic:function(e,t){return e.ofType(B).switchMap((function(e){var r=t.getState(),n=$(r),o=le(r),i=ye(o.name).workspace,s="".concat(i?"".concat(i,":"):"").concat(de(e.settings)),c=ee(r),p=e.settings||{},d=p.title,m=void 0===d?"":d,g=p._abstract,b=void 0===g?"":g,h=ae(r).baseUrl,O=void 0===h?"":h;return Ee({code:f(n)({styleTitle:m,styleAbstract:b}),format:c,styleName:s,status:status,baseUrl:O},l.Observable.of(S(me,[{}]),v({style:s||""},!0),G(""),M()).merge(function(e){var t=e.baseUrl,r=e.layer,n=e.styleName,o=e.format,i=e.title,s=e._abstract;return l.Observable.defer((function(){return X.updateAvailableStyles({baseUrl:t,layerName:r.name,styles:[{name:n}]})})).switchMap((function(){var e={filename:"".concat(n,".").concat(o),format:o,name:n,title:i,_abstract:s},t=u(r.availableStyles),c=r.availableStyles&&[t,e].concat(a(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return l.Observable.of(v({availableStyles:c},!0),M())})).catch((function(){return l.Observable.of(M())})).startWith(R("global"))}({layer:o,styleName:s,format:c,title:m,_abstract:b,baseUrl:O})),[y({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5})])}))},updateStyleCodeEpic:function(e,t){return e.ofType(V).switchMap((function(){var e=t.getState(),r=ee(e),n=te(e),o=$(e),i=ne(e),a=J(e),l=le(e),s=ae(e).baseUrl;return Ee({update:!0,code:o,format:r,styleName:i,status:"global",baseUrl:void 0===s?"":s,options:{params:{raw:!0}}},[h(l.id,"layer",{_v_:Date.now()}),I({temporaryId:a,templateId:"",code:o,format:r,init:!0,languageVersion:n}),m({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5})],[y({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5})])}))},deleteStyleEpic:function(e,t){return e.ofType(z).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,n=t.getState(),i=le(n),a=ae(n).baseUrl,s=void 0===a?"":a,c=he(n),u=be(n);return l.Observable.defer((function(){return X.removeStyles({baseUrl:s,layerName:i.name,styles:[{name:r}]})})).switchMap((function(){var e=i.availableStyles&&i.availableStyles.filter((function(e){return e.name!==r}))||[];return l.Observable.concat(l.Observable.of(v({style:"",availableStyles:e},!0),M(),j("layersettings","originalSettings",o({},c,{style:""})),j("layersettings","initialSettings",o({},u,{style:""}))),Oe({styleName:r,baseUrl:s,onSuccess$:l.Observable.of(m({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:l.Observable.of(y({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return l.Observable.of(M())})).startWith((function(){return l.Observable.of(R("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(Q).switchMap((function(){var e=t.getState(),r=ae(e).baseUrl,n=void 0===r?"":r,o=le(e),i=ne(e);return l.Observable.defer((function(){return X.updateDefaultStyle({baseUrl:n,layerName:o.name,styleName:i})})).switchMap((function(){var e=o.availableStyles.filter((function(e){var t=e.name;return i===t})),t=o.availableStyles.filter((function(e){var t=e.name;return i!==t})),r=[].concat(a(e),a(t));return l.Observable.of(v({availableStyles:r},!0),m({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),M())})).startWith(R("global")).catch((function(){return l.Observable.of(y({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),M())}))}))}}},4038:function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(71),s=r(13).uniqBy,c=r(2274).getNameParts,u={getLayer:function(e,t,r){var n=e+"layers/"+t+".json";return l.get(n,r).then((function(e){return e.data&&e.data.layer}))},removeStyles:function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,o=void 0===n?[]:n,a=e.options,s=void 0===a?{}:a,u=c(r),p=u.name,f=u.workspace,d="".concat(t,"rest/").concat(f&&"workspaces/".concat(f,"/")||"","layers/").concat(p,".json");return l.get(d,s).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style||[],n=o.map((function(e){return e.name}));return{layer:i({},t,{styles:{"@class":"linked-hash-set",style:r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}))}})}})).then((function(e){return l.put(d,e).then((function(){return e}))}))},updateAvailableStyles:function(e){var t=e.baseUrl,r=e.layerName,o=e.styles,a=void 0===o?[]:o,s=e.options,u=void 0===s?{}:s,p=c(r),f=p.name,d=p.workspace,m="".concat(t,"rest/").concat(d&&"workspaces/".concat(d,"/")||"","layers/").concat(f,".json");return l.get(m,u).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style||{};return{layer:i({},t,{styles:{"@class":"linked-hash-set",style:[].concat(n(r),n(a))}})}})).then((function(e){return l.put(m,e).then((function(){return e}))}))},updateDefaultStyle:function(e){var t=e.baseUrl,r=e.layerName,o=e.styleName,a=e.options,u=void 0===a?{}:a,p=c(r),f=p.name,d=p.workspace,m="".concat(t,"rest/").concat(d&&"workspaces/".concat(d,"/")||"","layers/").concat(f,".json");return l.get(m,u).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style||{},a=t.defaultStyle||{},l=s([a].concat(n(r)),"name");return{layer:i({},t,{defaultStyle:{name:o},styles:{"@class":"linked-hash-set",style:l}})}})).then((function(e){return l.put(m,e).then((function(){return e}))}))}};e.exports=u},4039:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(88).connect,y=r(268),g=y.mapSelector,b=y.projectionDefsSelector,h=r(2103),v=r(758).Tooltip,O=r(195).createSelector,E=r(26),w=r(0),S=r(2402),P=S.changeMousePositionCrs,T=S.changeMousePositionState,j=function(e,t,r){return t.showCenter&&e?e.center:t.showOnClick?r.clickPoint&&r.clickPoint.latlng?{x:r.clickPoint.latlng.lng,y:r.clickPoint.latlng.lat,crs:"EPSG:4326"}:{crs:"EPSG:4326"}:t.position},A=O([function(e){return e},g,function(e){return e.mousePosition||{}},function(e){return e.mapInfo||{}}],(function(e,t,r,n){return{enabled:r.enabled,mousePosition:j(t,r,n),projectionDefs:b(e),crs:r.crs||"EPSG:4326"}})),C=m((function(e){return{pressed:e.mousePosition&&e.mousePosition.enabled,active:e.mousePosition&&e.mousePosition.enabled,tooltip:d.createElement(v,{id:"showMousePositionCoordinates"},d.createElement(h,{msgId:"showMousePositionCoordinates"})),tooltipPlace:"left",pressedStyle:"success active",defaultStyle:"primary",glyphicon:"mouse",btnConfig:{bsSize:"small"}}}),{onClick:T})(r(2479)),x=r(2395),D=function(e){function t(){var e,n;a(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return f(u(n=s(this,(e=c(t)).call.apply(e,[this].concat(i)))),"getTemplate",(function(e){return r(4041)("./"+e)})),n}var n,m,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(m=[{key:"render",value:function(){var e=this.props,t=e.degreesTemplate,r=e.projectedTemplate,n=i(e,["degreesTemplate","projectedTemplate"]);return d.createElement(x,o({degreesTemplate:this.getTemplate(t),projectedTemplate:this.getTemplate(r),toggle:d.createElement(C,null)},n))}}])&&l(n.prototype,m),y&&l(n,y),t}(d.Component);f(D,"propTypes",{degreesTemplate:w.string,projectedTemplate:w.string}),f(D,"defaultProps",{degreesTemplate:"MousePositionLabelDMS",projectedTemplate:"MousePositionLabelYX"});var _=m(A,{onCRSChange:P})(D);e.exports={MousePositionPlugin:E(_,{MapFooter:{name:"mousePosition",position:2,tool:!0,priority:1}}),reducers:{mousePosition:r(4057)}}},4040:function(e,t,r){(e.exports=r(759)()).push([e.i," .msgapi #mapstore-mouseposition {\n    z-index: 10;\n    top: -10px;\n    right: 45%;\n    position: absolute;\n    margin: 8px;\n    text-shadow: -1px -1px 1px #000,\n                  1px -1px 1px #000,\n                 -1px  1px 1px #000,\n                  1px  1px 1px #000;\n}\n\n.msgapi #mapstore-mouseposition .label {\n    max-width: 350px;\n    min-width: 200px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    vertical-align: middle;\n\n}\n\n.msgapi #mapstore-mouseposition .label-info {\n    background-color:rgba(91,192,222,0);\n    color: white;\n    font-size: 110%;\n}\n\n.msgapi #mapstore-mouseposition h5 {\n    display: inline-block;\n}\n\n\n.msgapi #mapstore-mousepositionsettings .form-group {\n    margin-bottom: 0 !important;\n}\n\n.msgapi #mapstore-mousepositionsettings select, .msgapi #mapstore-mousepositionsettings button {\n    width: 60% !important;\n    float: right;\n    height: 35px;\n}\n\n.msgapi #mapstore-mousepositionsettings label {\n    width: 100% !important;\n}\n\n\n.msgapi #mapstore-mouseposition .label-info {\n    white-space: normal;\n    color: black;\n    font-size: 110%;\n    padding: 0;\n}\n\n.msgapi #mapstore-mouseposition {\n    bottom: 5px;\n    right: 264px;\n    top: auto;\n    margin: 0;\n    text-shadow: none;\n    background-color: white;\n    width: 160px;\n    height: 46px;\n    padding-left: 5px;\n    padding-top: 2px;\n}\n\n.msgapi #mapstore-mouseposition h5 {\n    margin-top: 5px;\n}\n\n.msgapi .mouseposition-separator {\n    display: block;\n}\n\n.msgapi #mapstore-mouseposition-mobile {\n        bottom: 25px;\n        right: 30px;\n        z-index: 10;\n        position: absolute;\n        text-shadow: -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000, 1px 1px 1px #000;\n    }\n\n.msgapi #mapstore-mouseposition-mobile .label {\n        display: inline-block;\n        max-width: 280px;\n        min-width: 200px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        vertical-align: middle;\n}\n\n.msgapi #mapstore-mouseposition-mobile .label-info {\n        background-color:rgba(91,192,222,0);\n        color: white;\n        font-size: 90%;\n}\n\n.msgapi #mapstore-mouseposition .form-group {\n    float: right;\n}\n\n.msgapi #mapstore-mouseposition .form-group .control-label {\n    display: none;\n}\n\n.msgapi #mapstore-mouseposition .form-group select {\n    width: 90px;\n    font-size: 11px;\n    padding: 2px;\n}\n",""])},4041:function(e,t,r){var n={"./CRSSelector":2397,"./CRSSelector.jsx":2397,"./MousePosition":2395,"./MousePosition.jsx":2395,"./MousePositionLabelDD":2870,"./MousePositionLabelDD.jsx":2870,"./MousePositionLabelDM":2556,"./MousePositionLabelDM.jsx":2556,"./MousePositionLabelDMS":2396,"./MousePositionLabelDMS.jsx":2396,"./MousePositionLabelDMSNW":2557,"./MousePositionLabelDMSNW.jsx":2557,"./MousePositionLabelYX":2555,"./MousePositionLabelYX.jsx":2555,"./__tests__/CRSSelector-test":2871,"./__tests__/CRSSelector-test.js":2871,"./__tests__/MousePosition-test":2877,"./__tests__/MousePosition-test.js":2877,"./__tests__/MousePositionLabelDM-test":2878,"./__tests__/MousePositionLabelDM-test.js":2878,"./__tests__/MousePositionLabelDMS-test":2879,"./__tests__/MousePositionLabelDMS-test.js":2879,"./__tests__/MousePositionLabelDMSNW-test":2880,"./__tests__/MousePositionLabelDMSNW-test.js":2880,"./mousePosition.css":2869};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=4041},4044:function(e,t){},4057:function(e,t,r){var n=r(2402),o=n.CHANGE_MOUSE_POSITION,i=n.CHANGE_MOUSE_POSITION_CRS,a=n.CHANGE_MOUSE_POSITION_STATE,l=r(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0,position:null,crs:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return l({},e,{enabled:t.enabled});case o:return l({},e,{position:t.position});case i:return l({},e,{crs:t.crs});default:return e}}},4058:function(e,t,r){var n,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(0),g=r(1),b=r(88).connect,h=r(195).createSelector,v=r(26),O=r(2703),E=r(2192),w=r(13),S=w.get,P=w.isArray,T=r(4059),j=T.searchEpic,A=T.searchOnStartEpic,C=T.searchItemSelected,x=T.zoomAndAddPointEpic,D=r(798).defaultIconStyle,_=r(2560),I=_.resultsPurge,F=_.resetSearch,k=_.addMarker,L=_.searchTextChanged,R=_.textSearch,N=_.selectSearchItem,M=_.cancelSelectedItem,B=_.changeActiveSearchTool,G=_.zoomAndAddPoint,U=_.changeFormat,W=_.changeCoord,V=_.updateResultsStyle,H=r(267).toggleControl,z=r(2259).removeAdditionalLayer,q=b(h([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchservicesconfig||null}],(function(e,t){return{enabledSearchServicesConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:S(e,"activeSearchTool","addressSearch"),format:S(e,"format","decimal"),selectedItems:e&&e.selectedItems}})),{onSearch:R,onChangeCoord:W,onChangeActiveSearchTool:B,onClearCoordinatesSearch:z,onChangeFormat:U,onToggleControl:H,onZoomToPoint:G,onPurgeResults:I,onSearchReset:F,onSearchTextChange:L,onCancelSelectedItem:M})(r(4069)),Q=r(268).mapSelector,Y=r(4072),K=b(h([Q,function(e){return e.search||null}],(function(e,t){return{mapConfig:e,results:t?t.results:null}})),{onItemClick:N,addMarker:k})(r(4073)),X=r(4075),Z=b((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:V})((o=n=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(f(r=u(this,(e=p(t)).call.apply(e,[this].concat(o)))),"getServiceOverrides",(function(e){return r.props.selectedItems&&r.props.selectedItems[r.props.selectedItems.length-1]&&S(r.props.selectedItems[r.props.selectedItems.length-1],e)})),m(f(r),"getSearchOptions",(function(){var e=r.props,t=e.searchOptions,n=e.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?v({},t,{services:n.services}):v({},t,{services:t.services.concat(n.services)}):t})),m(f(r),"getCurrentServices",(function(){var e=r.props.selectedServices,t=r.getSearchOptions();return e&&e.length>0?v({},t,{services:e}):t})),m(f(r),"getSearchAndToggleButton",(function(){var e=g.createElement(q,l({key:"searchBar"},r.props,{searchOptions:r.getCurrentServices(),placeholder:r.getServiceOverrides("placeholder"),placeholderMsgId:r.getServiceOverrides("placeholderMsgId")}));return!0===r.props.withToggle?[g.createElement(X,null)].concat(r.props.enabled?[e]:null):P(r.props.withToggle)?g.createElement("span",null,g.createElement(Y,{query:"("+r.props.withToggle[0]+")"},g.createElement(X,null),r.props.enabled?e:null),g.createElement(Y,{query:"("+r.props.withToggle[1]+")"},e)):e})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},D,{},this.props.resultsStyle))}},{key:"render",value:function(){return g.createElement("span",null,g.createElement(O,{id:"search-help",key:"seachBar-help",helpText:g.createElement(E,{msgId:"helptexts.searchBar"})},this.getSearchAndToggleButton()),g.createElement(K,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&c(r.prototype,n),o&&c(r,o),t}(g.Component),m(n,"propTypes",{splitTools:y.bool,showOptions:y.bool,isSearchClickable:y.bool,fitResultsToMapSize:y.bool,searchOptions:y.object,resultsStyle:y.object,selectedItems:y.array,selectedServices:y.array,userServices:y.array,withToggle:y.oneOfType([y.bool,y.array]),enabled:y.bool,textSearchConfig:y.object}),m(n,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),o));e.exports={SearchPlugin:v(Z,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:j,searchOnStartEpic:A,searchItemSelected:C,zoomAndAddPointEpic:x},reducers:{search:r(4076),mapInfo:r(2676)}}},4059:function(e,t,r){"use strict";r.r(t),r.d(t,"searchEpic",(function(){return j})),r.d(t,"searchItemSelected",(function(){return A})),r.d(t,"zoomAndAddPointEpic",(function(){return C})),r.d(t,"searchOnStartEpic",(function(){return x}));var n=r(15),o=r(789),i=r.n(o),a=r(4060),l=r.n(a),s=r(26),c=r.n(s),u=r(13),p=r(408),f=r(2259),d=r(2168),m=r(409),y=r(2560),g=r(80),b=r.n(g),h=r(798),v=r(772),O=r(2812),E=r(2498);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){return e.ofType(y.TEXT_SEARCH_STARTED).debounceTime(250).switchMap((function(t){return n.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=O.API.Utils.getService(e.type);if(!r){var o=new Error("Service Missing");return o.msgId="search.service_missing",o.serviceType=e.type,n.Observable.of(o).do((function(e){throw e}))}return n.Observable.defer((function(){return r(t.searchText,e.options).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return P({},t,{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return Object(u.sortBy)([].concat(w(e),w(t)),["__PRIORITY__"])})).map((function(e){return Object(y.searchResultLoaded)(e.slice(0,t.maxResults||15),!1)})).startWith(Object(y.searchTextLoading)(!0)).takeUntil(e.ofType(y.TEXT_SEARCH_RESULTS_PURGE,y.TEXT_SEARCH_RESET,y.TEXT_SEARCH_ITEM_SELECTED)).concat([Object(y.searchTextLoading)(!1)]).catch((function(e){var t=P({msgId:"search.generic_error"},e,{message:e.message,stack:e.stack});return n.Observable.from([Object(y.searchResultError)(t),Object(y.searchTextLoading)(!1)])}))}))},A=function(e){return e.ofType(y.TEXT_SEARCH_ITEM_SELECTED).switchMap((function(e){var t=n.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=Object(v.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return n.Observable.fromPromise(O.API.Utils.getService(t.__SERVICE__.geomService.type)("",c()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return c()({},t,{geometry:b.a.mergeToPolyGeom(e)})})))}return n.Observable.of(e.item)})).concatMap((function(e){var t=e.bbox||e.properties.bbox||i()(e),r=[Object(m.zoomToExtent)([t[0],t[1],t[2],t[3]],"EPSG:4326",21),Object(y.addMarker)(e)];if(e.__SERVICE__&&!Object(u.isNil)(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var n=l()(e).geometry.coordinates,o={lng:n[0],lat:n[1]},a=e.__SERVICE__.options.typeName;if(n){var s=null,c=[],p={};return"single_layer"===e.__SERVICE__.launchInfoPanel&&(c=[a],s=e.id,p=T({},e.__SERVICE__.options.typeName,{info_format:"application/json"})),[Object(d.featureInfoClick)({latlng:o},a,c,p,s),Object(d.showMapinfoMarker)()].concat(r)}}return r})),r=e.item,o=r&&r.__SERVICE__&&r.__SERVICE__.then,a=o?n.Observable.of(Object(y.selectNestedService)(o.map((function(e){return P({},e,{options:P({item:r},e.options)})})),{text:Object(v.generateTemplateString)(r.__SERVICE__.displayName||"")(r),placeholder:r.__SERVICE__.nestedPlaceholder&&Object(v.generateTemplateString)(r.__SERVICE__.nestedPlaceholder||"")(r),placeholderMsgId:r.__SERVICE__.nestedPlaceholderMsgId&&Object(v.generateTemplateString)(r.__SERVICE__.nestedPlaceholderMsgId||"")(r)},Object(v.generateTemplateString)(r.__SERVICE__.searchTextTemplate||"")(r))):n.Observable.empty(),s=r.__SERVICE__&&r.__SERVICE__.searchTextTemplate,p=s?n.Observable.of(Object(y.searchTextChanged)(Object(v.generateTemplateString)(s)(r))):n.Observable.empty();return n.Observable.of(Object(y.resultsPurge)()).concat(t,a,p)}))},C=function(e,t){return e.ofType(y.ZOOM_ADD_POINT).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},o=t.getState();return n.Observable.from([Object(f.updateAdditionalLayer)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:o.search&&o.search.style||h.defaultIconStyle}),Object(m.zoomToPoint)(e.pos,e.zoom,e.crs)])}))},x=function(e,t){return e.ofType(y.SEARCH_LAYER_WITH_FILTER).switchMap((function(e){var r=e.layer,o=e.cql_filter,i=t.getState();if(0===Object(p.queryableLayersSelector)(i).filter((function(e){return e.name===r})).length)return n.Observable.of(Object(y.nonQueriableLayerError)());var a=Object(p.getLayerFromName)(i,r);return a&&o?n.Observable.defer((function(){return Object(E.getFeatureSimple)(a.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:o}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&P({},e.features[0],{typeName:r})}))})).switchMap((function(e){var t=e.type,r=e.geometry,i=e.typeName,a=l()({type:t,geometry:r}).geometry.coordinates,s={lng:a[0],lat:a[1]};return a?n.Observable.of(Object(d.featureInfoClick)({latlng:s},i,[i],T({},i,{cql_filter:o})),Object(d.showMapinfoMarker)()):n.Observable.empty()})).catch((function(){return n.Observable.of(Object(y.serverError)())})):n.Observable.empty()}))}},4069:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d,m=r(0),y=r(1),g=r(758),b=g.FormControl,h=g.FormGroup,v=g.Glyphicon,O=g.Row,E=g.Col,w=r(136),S=r(2675),P=r(2673),T=r(2116),j=r(2145),A=r(13).isNumber,C=r(26),x=r(2103),D=(d=0,function(e,t){clearTimeout(d),d=setTimeout(e,t)});r(4070);var _=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"onChange",(function(e){var t=e.target.value;r.props.onSearchTextChange(t),r.props.typeAhead&&D((function(){r.search()}),r.props.delay)})),f(u(r),"onKeyDown",(function(e){switch(e.keyCode){case 13:r.search();break;case 8:!r.props.searchText&&r.props.selectedItems&&r.props.selectedItems.length>0&&r.props.onCancelSelectedItem(r.props.selectedItems[r.props.selectedItems.length-1])}})),f(u(r),"onFocus",(function(){r.props.typeAhead&&r.props.searchText&&r.search()})),f(u(r),"onBlur",(function(){r.props.hideOnBlur&&D((function(){r.props.onPurgeResults()}),r.props.blurResetDelay)})),f(u(r),"getSpinnerStyle",(function(){return C({},{position:"absolute"},(r.props.splitTools,i({},{right:"69px",zIndex:1,top:"13px"})))})),f(u(r),"getGlyphicon",(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return y.createElement(v,{glyph:e,key:t,onClick:r,className:n})})),f(u(r),"getError",(function(e){return e?y.createElement(x,{msgId:e.msgId||"search.generic_error",msgParams:{message:e.message,serviceType:e.serviceType}}):null})),f(u(r),"getActiveTool",(function(){var e=r.props.activeSearchTool;return r.props.showAddressSearchOption&&!r.props.showCoordinatesSearchOption&&(e="addressSearch"),!r.props.showAddressSearchOption&&r.props.showCoordinatesSearchOption&&(e="coordinatesSearch"),e})),f(u(r),"renderAddonBefore",(function(){return r.props.selectedItems&&r.props.selectedItems.map((function(e,t){return y.createElement("span",{key:"selected-item"+t,className:"input-group-addon"},y.createElement("div",{className:"selectedItem-text"},e.text))}))})),f(u(r),"renderSearchToolbar",(function(){var e=r.getActiveTool(),t=[];return r.props.showAddressSearchOption&&r.props.showCoordinatesSearchOption&&(t.push({active:"addressSearch"===e,onClick:function(){r.props.onClearCoordinatesSearch({owner:"search"}),r.props.onChangeActiveSearchTool("addressSearch")},glyph:r.props.searchIcon,text:y.createElement(x,{msgId:"search.addressSearch"})}),t.push({active:"coordinatesSearch"===e,onClick:function(){void 0!==r.props.searchText&&""!==r.props.searchText&&r.clearSearch(),r.props.onChangeActiveSearchTool("coordinatesSearch")},glyph:"search-coords",text:y.createElement(x,{msgId:"search.coordinatesSearch"})})),y.createElement("span",{className:"search-toolbar-options"},r.props.loading&&y.createElement(j,{style:r.getSpinnerStyle(),spinnerName:"pulse",noFadeIn:!0}),y.createElement(T,{btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:r.props.removeIcon,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,visible:"addressSearch"===e&&(""!==r.props.searchText||r.props.selectedItems&&r.props.selectedItems.length>0)||"coordinatesSearch"===e&&(A(r.props.coordinate.lon)||A(r.props.coordinate.lat)),onClick:function(){"addressSearch"===e?r.clearSearch():r.clearCoordinates()}},{glyph:r.props.searchIcon,className:"square-button-md no-border "+(r.props.isSearchClickable||"addressSearch"!==e?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,visible:"addressSearch"===e&&(!(""!==r.props.searchText||r.props.selectedItems&&r.props.selectedItems.length>0)||!r.props.splitTools)||"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&r.areValidCoordinates()&&r.zoomToPoint(),r.props.isSearchClickable&&r.search()}},{tooltip:r.getError(r.props.error),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!r.props.error,onClick:r.clearSearch},{buttonConfig:{title:y.createElement(v,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[].concat(t,[{onClick:function(){r.props.enabledSearchServicesConfig||r.props.onToggleControl("searchservicesconfig")},glyph:"cog",text:y.createElement(x,{msgId:"search.searchservicesbutton"})}]),visible:r.props.showOptions,Element:S}]}),r.props.showOptions&&"coordinatesSearch"===e?y.createElement(T,{btnGroupProps:{className:"btn-group-menu-options-format"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{buttonConfig:{title:y.createElement(v,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===r.props.format,onClick:function(){r.props.onChangeFormat("decimal")},text:y.createElement(x,{msgId:"search.decimal"})},{active:"aeronautical"===r.props.format,onClick:function(){r.props.onChangeFormat("aeronautical")},text:y.createElement(x,{msgId:"search.aeronautical"})}],visible:r.props.showOptions&&"coordinatesSearch"===e,Element:S}]}):null)})),f(u(r),"renderCoordinateTool",(function(){return"addressSearch"!==r.getActiveTool()&&r.props.showCoordinatesSearchOption&&y.createElement("div",{className:"coordinateEditor"},y.createElement(O,{className:"entryRow"},y.createElement(E,{xs:"3",className:"coordinateLabel"},y.createElement(x,{msgId:"latitude"})),y.createElement(E,{xs:"9"},y.createElement(P,{format:r.props.format,aeronauticalOptions:r.props.aeronauticalOptions,coordinate:"lat",idx:1,value:r.props.coordinate.lat,constraints:r.props.constraintsCoordEditor,onChange:function(e){return r.changeCoord("lat",e)},onKeyDown:function(e){r.areValidCoordinates()&&13===e.keyCode&&r.zoomToPoint()}}))),y.createElement(O,{className:"entryRow"},y.createElement(E,{xs:"3",className:"coordinateLabel"},y.createElement(x,{msgId:"longitude"})),y.createElement(E,{xs:"9"},y.createElement(P,{format:r.props.format,aeronauticalOptions:r.props.aeronauticalOptions,coordinate:"lon",idx:2,value:r.props.coordinate.lon,constraints:r.props.constraintsCoordEditor,onChange:function(e){return r.changeCoord("lon",e)},onKeyDown:function(e){r.areValidCoordinates()&&13===e.keyCode&&r.zoomToPoint()}}))))})),f(u(r),"renderInputSearch",(function(){var e=r.getActiveTool(),t="search.addressSearch";if(!r.props.placeholder&&r.context.messages){var n=w.getMessageById(r.context.messages,r.props.placeholderMsgId||t);n&&(t=n)}else t=r.props.placeholder;return"addressSearch"===e&&y.createElement(b,{className:"searchInput",key:"search-input",placeholder:t,type:"text",inputRef:function(e){r.input=e},style:{textOverflow:"ellipsis"},value:r.props.searchText,ref:"input",onKeyDown:r.onKeyDown,onBlur:r.onBlur,onFocus:r.onFocus,onChange:r.onChange})})),f(u(r),"search",(function(){var e=r.props.searchText;void 0!==e&&""!==e||r.props.selectedItems&&0!==r.props.selectedItems.length?void 0!==e&&""!==e&&r.props.onSearch(e,r.props.searchOptions,r.props.maxResults):r.props.onSearchReset()})),f(u(r),"zoomToPoint",(function(){r.props.onZoomToPoint({x:parseFloat(r.props.coordinate.lon),y:parseFloat(r.props.coordinate.lat)},r.props.defaultZoomLevel,"EPSG:4326")})),f(u(r),"focusToInput",(function(){var e=r.input;e&&e.focus instanceof Function&&setTimeout((function(){return e.focus()}),200)})),f(u(r),"clearSearch",(function(){r.props.onSearchReset()})),f(u(r),"clearCoordinates",(function(){r.props.onClearCoordinatesSearch({owner:"search"}),r.props.onChangeCoord("lat",""),r.props.onChangeCoord("lon","")})),f(u(r),"changeCoord",(function(e,t){var n=isNaN(parseFloat(t))?"":parseFloat(t);r.props.onChangeCoord(e,n),r.areValidCoordinates()||r.props.onClearCoordinatesSearch({owner:"search"})})),f(u(r),"areValidCoordinates",(function(){return A(r.props.coordinate.lon)&&A(r.props.coordinate.lat)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(e){this.props.autoFocusOnSelect&&this.props.selectedItems&&(e.selectedItems&&e.selectedItems.length<this.props.selectedItems.length||!e.selectedItems&&1===this.props.selectedItems.length)&&this.focusToInput()}},{key:"render",value:function(){return y.createElement("div",{id:"map-search-bar",style:this.props.style,className:"MapSearchBar"+(this.props.className?" "+this.props.className:"")},y.createElement(h,null,y.createElement("div",{className:"input-group"},this.renderAddonBefore(),this.renderInputSearch(),this.renderCoordinateTool(),this.renderSearchToolbar())))}}])&&l(r.prototype,n),o&&l(r,o),t}(y.Component);f(_,"propTypes",{autoFocusOnSelect:m.bool,blurResetDelay:m.number,className:m.string,delay:m.number,error:m.object,hideOnBlur:m.bool,isSearchClickable:m.bool,loading:m.bool,maxResults:m.number,onCancelSelectedItem:m.func,onPurgeResults:m.func,onSearch:m.func,onSearchReset:m.func,onSearchTextChange:m.func,optionsIcon:m.string,placeholder:m.string,placeholderMsgId:m.string,removeIcon:m.string,searchIcon:m.string,searchOptions:m.object,searchText:m.string,selectedItems:m.array,splitTools:m.bool,style:m.object,typeAhead:m.bool,activeSearchTool:m.string,aeronauticalOptions:m.object,constraintsCoordEditor:m.object,coordinate:m.object,defaultZoomLevel:m.number,enabledSearchServicesConfig:m.bool,format:m.string,onChangeActiveSearchTool:m.func,onChangeCoord:m.func,onChangeFormat:m.func,onClearCoordinatesSearch:m.func,onToggleControl:m.func,onZoomToPoint:m.func,showAddressSearchOption:m.bool,showCoordinatesSearchOption:m.bool,showOptions:m.bool}),f(_,"contextTypes",{messages:m.object}),f(_,"defaultProps",{onSearch:function(){},onSearchReset:function(){},onPurgeResults:function(){},onSearchTextChange:function(){},onCancelSelectedItem:function(){},selectedItems:[],placeholderMsgId:"search.addressSearch",removeIcon:"1-close",optionsIcon:"cog",searchIcon:"search",delay:1e3,blurResetDelay:300,autoFocusOnSelect:!0,splitTools:!0,isSearchClickable:!0,maxResults:15,typeAhead:!0,searchText:"",hideOnBlur:!0,onChangeActiveSearchTool:function(){},onZoomToPoint:function(){},onToggleControl:function(){},onChangeFormat:function(){},onClearCoordinatesSearch:function(){},onChangeCoord:function(){},defaultZoomLevel:12,coordinate:{},aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},constraintsCoordEditor:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}},activeSearchTool:"addressSearch",format:"decimal",showOptions:!0,showCoordinatesSearchOption:!0,showAddressSearchOption:!0,enabledSearchServicesConfig:!1}),e.exports=_},4070:function(e,t,r){var n=r(4071);"string"==typeof n&&(n=[[e.i,n,""]]);r(760)(n,{});n.locals&&(e.exports=n.locals)},4071:function(e,t,r){(e.exports=r(759)()).push([e.i,".msgapi .MapSearchBar {\n    left: 65px;\n    position: absolute;\n    right: 55px;\n    top: 10px;\n}\n.msgapi .MapSearchBar .input-group-addon{\n    background-color:white;\n    border-top: 1px solid lightgrey;\n    border-bottom: 1px solid lightgrey;\n}\n.msgapi .MapSearchBar .input-group{\n    box-shadow: 2px 2px 4px #A7A7A7;\n    border-radius: 4px;\n}\n\n/* hide the clearing x in IE 11 and Edge */\n.msgapi .MapSearchBar input::-ms-clear,\n.msgapi .MapSearchBar input::-ms-reveal {\n    display: none;\n}\n\n/*.searchclear {\n    top:0;\n    bottom:0;\n    height:14px;\n    margin:auto;\n    font-size:14px;\n    cursor:pointer;\n}*/\n.msgapi .search-result-list{\n    position: absolute;\n    top: 50px;\n    left: 45px;\n    right: 55px;\n    background: rgba(255,255,255,0.9);\n    border-radius: 10px;\n    max-height: 80%;\n    overflow: auto;\n}\n\n.msgapi .search-result-list .search-result{\n    padding: 15px;\n    border-bottom: 1px solid lightgray;\n    cursor: pointer;\n}\n.msgapi .search-result-list .search-result:hover{\n    background-color: rgba(204,204,204,0.9);\n}\n.msgapi .search-result-list .search-result .icon{\n    height: 100%;\n    margin-right: 5px;\n    display: block;\n    vertical-align: middle;\n    float: left;\n}\n\n.msgapi .search-result-list .search-result:last-child{\n    border-bottom: none;\n    border-radius: 0 0 10px 10px;\n}\n\n.msgapi .search-result-list .search-result:first-child{\n    border-radius:10px 10px 0 0;\n}\n\n.msgapi #mapstore-navbar .MapSearchBar {\n    top: 0;\n    left: -500px;\n}\n\n.msgapi #mapstore-navbar .search-result-list{\n    top: 35px;\n    left: -500px;\n}\n\n.msgapi .search-toggle {\n    display: none;\n}\n\n@media (max-width: 768px ) {\n    .msgapi #mapstore-navbar .search-toggle {\n        display: inline-block;\n    }\n    .msgapi #mapstore-navbar .MapSearchBar {\n        width: 400px;\n        top: 50px;\n        left: auto;\n    }\n\n    .msgapi #mapstore-navbar .search-result-list{\n        top: 85px;\n        left: auto;\n        width: 400px;\n    }\n}\n\n/* Small devices (tablets, 768px and up) */\n@media (min-width: 768px ) {\n    .msgapi .MapSearchBar {\n        width: 500px;\n        right: auto;\n    }\n    .msgapi .search-result-list{\n        width: 500px;\n        right: auto;\n    }\n}\n\n/* Medium devices (desktops, 992px and up) */\n@media (min-width: 992px) {\n    .msgapi .MapSearchBar {\n        width: 500px;\n        right: auto;\n    }\n    .msgapi .search-result-list{\n        width: 500px;\n        right: auto;\n    }\n}\n\n/* Large devices (large desktops, 1200px and up) */\n@media (min-width: 1200px) {\n    .msgapi .MapSearchBar {\n        width: 500px;\n        position:absolute;\n    }\n    .msgapi .search-result-list{\n        width: 500px;\n        right: auto;\n    }\n}\n\n/* Maps Search */\n.msgapi .maps-search.MapSearchBar{\n    width: 90%;\n    left: 0px;\n    position: relative;\n    right: 0px;\n    top: 0px;\n    margin-left: auto;\n    margin-right: auto;\n}\n.msgapi .maps-search.MapSearchBar .input-group {\n    width: 100%;\n\n}\n@media (min-width: 768px) {\n    .msgapi .maps-search.MapSearchBar {\n        width: 580px;\n    }\n}\n\n/* User Search */\n.msgapi .user-search.MapSearchBar{\n    width: 90%;\n    left: 0px;\n    position: relative;\n    right: 0px;\n    top: 0px;\n    margin-left: auto;\n    margin-right: auto;\n}\n.msgapi .user-search.MapSearchBar .input-group {\n    width: 100%;\n\n}\n.msgapi .MapSearchBar.user-search input {\n    z-index: 0\n}\n@media (min-width: 768px) {\n    .msgapi .user-search.MapSearchBar {\n        width: 580px;\n    }\n}\n\n.msgapi .input-group-addon .selectedItem-text {\n    font-size: 14px;\n    overflow: hidden;\n    max-width: 400px;\n    text-overflow: ellipsis;\n}\n",""])},4073:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(4074),m=r(2241),y=r(26),g=function(e){function t(){var e,r;o(this,t);for(var i=arguments.length,c=new Array(i),p=0;p<i;p++)c[p]=arguments[p];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(c)))),"onItemClick",(function(e){r.props.onItemClick(e,r.props.mapConfig)})),u(s(r),"renderResults",(function(){return r.props.results.map((function(e,t){var n=r.findService(e)||{};return f.createElement(d,{subTitle:n.subTitle,idField:n.idField,displayName:n.displayName,key:e.osm_id||"res_"+t,item:e,onItemClick:r.onItemClick})}))})),u(s(r),"findService",(function(e){var t=r.props.searchOptions&&r.props.searchOptions.services;if(null!==e.__SERVICE__)if(t&&"string"==typeof e.__SERVICE__){for(var o=0;o<t.length;o++)if(t[o]&&t[o].id===e.__SERVICE__)return t[o];for(var i=0;i<t.length;i++)if(t[i]&&t[i].type===e.__SERVICE__)return t[i]}else if("object"===n(e.__SERVICE__))return e.__SERVICE__;return null})),r}var r,p,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(p=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=f.createElement(m.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=y({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?f.createElement("div",{className:"search-result-list",style:y({padding:"10px",textAlign:"center"},t)},e):f.createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&i(r.prototype,p),g&&i(r,g),t}(f.Component);u(g,"propTypes",{results:p.array,searchOptions:p.object,mapConfig:p.object,fitToMapSize:p.bool,containerStyle:p.object,sizeAdjustment:p.object,onItemClick:p.func,addMarker:p.func,afterItemClick:p.func,notFoundMessage:p.oneOfType([p.object,p.string])}),u(g,"defaultProps",{sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){}}),e.exports=g},4074:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(0),f=r(1),d=r(13).get,m=r(772).generateTemplateString,y=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"onClick",(function(){var e=r.props.item;r.props.onItemClick(e)})),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return f.createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},f.createElement("div",{className:"icon"}," ",f.createElement("img",{src:e.icon})),f.createElement("div",{className:"text-result-title"},d(e,this.props.displayName)||m(this.props.displayName||"")(e)),f.createElement("small",{className:"text-info"},this.props.subTitle&&d(e,this.props.subTitle)||m(this.props.subTitle||"")(e)))}}])&&i(r.prototype,n),p&&i(r,p),t}(f.Component);u(y,"propTypes",{subTitle:p.string,item:p.object,displayName:p.string,idField:p.string,icon:p.string,onItemClick:p.func}),u(y,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon"}),e.exports=y},4075:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(0),p=r(1),f=r(88).connect,d=r(758),m=d.Button,y=d.Glyphicon,g=r(267).toggleControl,b=function(e){function t(){return o(this,t),a(this,l(t).apply(this,arguments))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return p.createElement(m,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button search-toggle"},p.createElement(y,{glyph:"search"}))}}])&&i(r.prototype,n),c&&i(r,c),t}(p.Component);c(b,"propTypes",{pressed:u.bool,onToggle:u.func}),c(b,"defaultProps",{pressed:!1,onToggle:function(){}}),e.exports=f((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:g.bind(null,"search",null)})(b)},4076:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=r(2560),s=l.TEXT_SEARCH_RESULTS_LOADED,c=l.TEXT_SEARCH_RESULTS_PURGE,u=l.TEXT_SEARCH_RESET,p=l.TEXT_SEARCH_ADD_MARKER,f=l.TEXT_SEARCH_TEXT_CHANGE,d=l.TEXT_SEARCH_LOADING,m=l.TEXT_SEARCH_ERROR,y=l.TEXT_SEARCH_NESTED_SERVICES_SELECTED,g=l.TEXT_SEARCH_CANCEL_ITEM,b=l.TEXT_SEARCH_SET_HIGHLIGHTED_FEATURE,h=l.UPDATE_RESULTS_STYLE,v=l.CHANGE_SEARCH_TOOL,O=l.CHANGE_FORMAT,E=l.CHANGE_COORD,w=r(267).RESET_CONTROLS,S=r(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return S({},e,{loading:t.loading});case m:return S({},e,{error:t.error});case f:return S({},e,{searchText:t.searchText,error:null});case s:var r=t.results;return!0===t.append&&e&&e.results&&(r=[].concat(a(e.results),a(t.results))),S({},e,{results:r,error:null});case c:return S({},e,{results:null,error:null});case p:return S({},e,{markerPosition:t.markerPosition,markerLabel:t.markerLabel});case b:return S({},e,{highlightedFeature:t.highlightedFeature});case u:return{style:e.style||{}};case w:return null;case y:return S({},e,{selectedServices:t.services,searchText:t.searchText,selectedItems:(e.selectedItems||[]).concat(t.items)});case g:return S({},{selectedItems:e.selectedItems&&e.selectedItems.filter((function(e){return e!==t.item})),searchText:""===e.searchText&&t.item&&t.item.text?t.item.text.substring(0,t.item.text.length):e.searchText});case h:return S({},e,{style:t.style});case v:return o({},e,{activeSearchTool:t.activeSearchTool});case O:return o({},e,{format:t.format});case E:return o({},e,{coordinate:o({},e.coordinate,i({},t.coord,t.val))});default:return e}}},4077:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(88).connect,y=r(758),g=y.Glyphicon,b=y.Button,h=r(2881),v=r(2261),O=r(2149),E=r(2192),w=r(13).isEqual,S=r(267).toggleControl,P=r(2882),T=P.setSearchConfigProp,j=P.updateService,A=P.restServiceConfig,C=r(4078),x=r(4079),D=r(4080),_=r(4081),I=r(0),F=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"canProceed",(function(){var e=r.props,t=e.page,n=e.pages,o=e.service;return n[t].validate(o)})),f(u(r),"isDirty",(function(){var e=r.props,t=e.service,n=e.initServiceValues;return!w(t,n)})),f(u(r),"renderFooter",(function(){var e=r.props,t=e.page,n=e.pages;return 0===t?d.createElement("span",{role:"footer"},d.createElement(b,{onClick:r.addService,bsStyle:"primary"},d.createElement(E,{msgId:"search.addbtn"}))):t===n.length-1?d.createElement("span",{role:"footer"},d.createElement(b,{onClick:r.prev,bsStyle:"primary"},d.createElement(E,{msgId:"search.prevbtn"})),d.createElement(b,{disabled:!r.canProceed(),onClick:r.update,bsStyle:"success"},d.createElement(E,{msgId:"search.savebtn"}))):d.createElement("span",{role:"footer"},1===t&&r.isDirty()?d.createElement(h,{onConfirm:r.prev,bsStyle:"primary",confirming:{text:d.createElement(E,{msgId:"search.cancelconfirm"})},text:d.createElement(E,{msgId:"search.cancelbtn"})}):d.createElement(b,{onClick:r.prev,bsStyle:"primary"},d.createElement(E,{msgId:1===t?"search.cancelbtn":"search.prevbtn"})),d.createElement(b,{disabled:!r.canProceed(),onClick:r.next,bsStyle:"primary"},d.createElement(E,{msgId:"search.nextbtn"})))})),f(u(r),"onClose",(function(){r.props.toggleControl("searchservicesconfig"),r.props.restServiceConfig(0)})),f(u(r),"addService",(function(){var e=r.props.newService;r.props.onPropertyChange("init_service_values",e),r.props.onPropertyChange("service",e),r.props.onPropertyChange("page",1)})),f(u(r),"prev",(function(){var e=r.props.page;e>1?r.props.onPropertyChange("page",e-1):1===e&&r.props.restServiceConfig(0)})),f(u(r),"next",(function(){var e=r.props,t=e.page;t<e.pages.length-1&&r.props.onPropertyChange("page",t+1)})),f(u(r),"update",(function(){var e=r.props,t=e.service,n=e.editIdx;r.props.updateService(t,n)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.enabled,r=e.pages,n=e.page,o=e.id,a=e.panelStyle,l=e.panelClassName,s=e.titleText,c=e.closeGlyph,u=e.onPropertyChange,p=e.service,f=e.textSearchConfig,m=void 0===f?{}:f,y=e.containerClassName,b=r&&r[n]||null;return t?d.createElement(O,null,d.createElement(v,{id:o,style:i({},a,{display:t?"block":"none"}),containerClassName:y,className:l,draggable:!1,modal:!0},d.createElement("span",{role:"header"},d.createElement("span",null,s),this.isDirty()?d.createElement(h,{className:"close",confirming:{text:d.createElement(E,{msgId:"search.cancelconfirm"}),className:"btn btn-sm btn-warning services-config-editor-confirm-close"},onConfirm:this.onClose,bsStyle:"primary",text:d.createElement(g,{glyph:c})}):d.createElement("button",{onClick:this.onClose,className:"close"},c?d.createElement(g,{glyph:c}):d.createElement("span",null,""))),d.createElement("div",{role:"body",className:"services-config-editor"},d.createElement(b.Element,{services:m.services,override:m.override,onPropertyChange:u,service:p})),this.renderFooter())):null}}])&&l(r.prototype,n),o&&l(r,o),t}(d.Component);f(F,"propTypes",{id:I.string,enabled:I.bool,panelStyle:I.object,panelClassName:I.string,containerClassName:I.string,closeGlyph:I.string,titleText:I.oneOfType([I.string,I.element]),toggleControl:I.func,pages:I.arrayOf(I.shape({Element:I.func.isRequired,validate:I.func.isRequired})),page:I.number,service:I.object,initServiceValues:I.object,onPropertyChange:I.func,newService:I.object.isRequired,updateService:I.func,restServiceConfig:I.func,textSearchConfig:I.object,editIdx:I.number}),f(F,"defaultProps",{id:"search-services-config-editor",enabled:!1,panelStyle:{minWidth:"400px",zIndex:2e3,position:"absolute",top:"100px",minHeight:"300px",left:"calc(50% - 150px)",backgroundColor:"white"},panelClassName:"toolbar-panel",containerClassName:"",closeGlyph:"1-close",titleText:d.createElement(E,{msgId:"search.configpaneltitle"}),closePanel:function(){},onPropertyChange:function(){},page:0,newService:{type:"wfs",name:"",displayName:"",subTitle:"",priority:1,options:{url:"",typeName:"",queriableAttributes:"",sortBy:"",maxFeatures:5,srsName:"EPSG:4326"}}});var k=m((function(e){var t=e.controls,r=void 0===t?{}:t,n=e.searchconfig,o=void 0===n?{}:n;return{enabled:r.searchservicesconfig&&r.searchservicesconfig.enabled||!1,pages:[C,x,D,_],page:o&&o.page||0,service:o&&o.service,initServiceValues:o&&o.init_service_values,textSearchConfig:o&&o.textSearchConfig,editIdx:o&&o.editIdx}}),{toggleControl:S,onPropertyChange:T,restServiceConfig:A,updateService:j})(F);e.exports={SearchServicesConfigPlugin:k,reducers:{searchconfig:r(4082)}}},4078:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(758),d=f.FormGroup,m=f.Checkbox,y=f.ControlLabel,g=f.Glyphicon,b=r(2103),h=r(2881),v=r(0);var O=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"getOptions",(function(){return 0===r.props.services.length?p.createElement("div",{className:"search-service-name"},p.createElement(b,{msgId:"search.serviceslistempty"})):r.props.services.map((function(e,t){return p.createElement("div",{className:"search-service-item",key:t},p.createElement("span",{className:"search-service-name"},e.name),p.createElement(h,{className:"list-remove-btn",onConfirm:function(){return r.remove(t)},text:p.createElement(g,{glyph:"remove-circle"}),confirming:{className:"text-warning list-remove-btn",text:p.createElement(b,{msgId:"search.confirmremove"})}}),p.createElement(g,{onClick:function(){return r.edit(e,t)},glyph:"pencil"}))}))})),u(s(r),"edit",(function(e,t){r.props.onPropertyChange("init_service_values",e),r.props.onPropertyChange("service",e),r.props.onPropertyChange("editIdx",t),r.props.onPropertyChange("page",1)})),u(s(r),"toggleOverride",(function(){var e=r.props,t=e.services,n=e.override;r.props.onPropertyChange("textSearchConfig",{services:t,override:!n})})),u(s(r),"remove",(function(e){var t=r.props,n=t.services,o=t.override,i=n.filter((function(t,r){return r!==e}));r.props.onPropertyChange("textSearchConfig",{services:i,override:o})})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.override;return p.createElement("form",null,p.createElement(d,null,p.createElement(y,null,p.createElement(b,{msgId:"search.serviceslistlabel"})),p.createElement("div",{className:"services-list"},this.getOptions())),p.createElement(m,{checked:e,onChange:this.toggleOverride},p.createElement(b,{msgId:"search.overriedservice"})))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(O,"propTypes",{services:v.array,override:v.bool,service:v.object,onPropertyChange:v.func}),u(O,"contextTypes",{messages:v.object}),u(O,"defaultProps",{services:[],override:!1,onPropertyChange:function(){}}),e.exports={Element:O,validate:function(){return!0}}},4079:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(758),d=f.FormGroup,m=f.ControlLabel,y=f.FormControl,g=r(2103),b=r(26),h=r(0);var v=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"updateProp",(function(e,t){var n=t.target.value;"queriableAttributes"===e&&(n=n.split(","));var o=b({},r.props.service.options,u({},e,n));r.props.onPropertyChange("service",b({},r.props.service,{options:o}))})),u(s(r),"updateName",(function(e){var t=e.target.value;r.props.onPropertyChange("service",b({},r.props.service,{name:t}))})),u(s(r),"updateMaxFeatures",(function(e){var t=b({},r.props.service.options,{maxFeatures:parseFloat(e[0],10)});r.props.onPropertyChange("service",b({},r.props.service,{options:t}))})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.service,t=e.options,r=void 0===t?{}:t;return p.createElement("form",null,p.createElement("span",{className:"wfs-required-props-title"},p.createElement(g,{msgId:"search.s_wfs_props_label"})),p.createElement(d,null,p.createElement(m,null,p.createElement(g,{msgId:"search.s_name"})),p.createElement(y,{value:e.name,key:"name",type:"text",onChange:this.updateName})),p.createElement(d,null,p.createElement(m,null,p.createElement(g,{msgId:"search.s_url"})),p.createElement(y,{value:r.url,key:"url",type:"text",onChange:this.updateProp.bind(null,"url")})),p.createElement(d,null,p.createElement(m,null,p.createElement(g,{msgId:"search.s_layer"})),p.createElement(y,{value:r.typeName,key:"typeName",type:"text",onChange:this.updateProp.bind(null,"typeName")})),p.createElement(d,null,p.createElement(m,null,p.createElement(g,{msgId:"search.s_attributes"})),p.createElement(y,{value:([r.queriableAttributes]||!1).join(","),key:"queriableAttributes",type:"text",onChange:this.updateProp.bind(null,"queriableAttributes")})))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(v,"propTypes",{service:h.object,onPropertyChange:h.func}),u(v,"defaultProps",{service:{},onPropertyChange:function(){}}),e.exports={Element:v,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.name,o=void 0===n?"":n,i=r.url,a=void 0===i?"":i,l=r.typeName,s=void 0===l?"":l,c=r.queriableAttributes,u=void 0===c?"":c;return o.length>0&&a.length>0&&s.length>0&&u.length>0}}},4080:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(1),m=r(758),y=m.FormGroup,g=m.ControlLabel,b=m.FormControl,h=m.Label,v=r(2307),O=r(26),E=r(0),w=r(2162),S=r(2103),P=r(136);var T=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return f(u(r=s(this,(e=c(t)).call.apply(e,[this].concat(o)))),"updateProp",(function(e,t){var n=t.target.value;r.props.onPropertyChange("service",O({},r.props.service,f({},e,n)))})),f(u(r),"updatePriority",(function(e){r.props.onPropertyChange("service",O({},r.props.service,{priority:parseFloat(e[0],10)}))})),f(u(r),"updateLaunchInfoPanel",(function(e){var t=e&&e.value?e.value:"";"no_info"===t&&(t=void 0),r.props.onPropertyChange("service",i({},r.props.service,{launchInfoPanel:t}))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.service,t=this.props.launchInfoPanelOptions||[{label:P.getMessageById(this.context.messages,"search.s_launch_info_panel.no_info"),value:"no_info"},{label:P.getMessageById(this.context.messages,"search.s_launch_info_panel.all_layers"),value:"all_layers"},{label:P.getMessageById(this.context.messages,"search.s_launch_info_panel.single_layer"),value:"single_layer"}];return d.createElement("form",null,d.createElement("span",{className:"wfs-required-props-title"},d.createElement(S,{msgId:"search.s_result_props_label"})),d.createElement(y,null,d.createElement(g,null,d.createElement(S,{msgId:"search.s_title"})),d.createElement(b,{value:e.displayName,key:"displayName",type:"text",placeholder:'e.g. "${properties.name}"',onChange:this.updateProp.bind(null,"displayName")})),d.createElement(y,null,d.createElement(g,null,d.createElement(S,{msgId:"search.s_description"})),d.createElement(b,{value:e.subTitle,key:"subTitle",type:"text",onChange:this.updateProp.bind(null,"subTitle")})),d.createElement(y,null,d.createElement(g,null,d.createElement(S,{msgId:"search.s_priority"}),d.createElement(h,{key:"priority-label",className:"slider-label"},parseInt(e.priority||1,10))),d.createElement(v,{key:"priority",start:[e.priority||1],step:1,range:{min:1,max:10},onSlide:this.updatePriority}),d.createElement("span",{className:"priority-info"},d.createElement(S,{msgId:"search.s_priority_info"}))),d.createElement(y,null,d.createElement(g,null,d.createElement(S,{msgId:"search.s_launch_info_panel.label"})),d.createElement(w,{options:t,clearable:!1,value:e&&e.launchInfoPanel||this.props.launchInfoPanelDefault,onChange:this.updateLaunchInfoPanel}),d.createElement("span",{className:"priority-info with-top-margin"},d.createElement(S,{msgId:"search.s_launch_info_panel.".concat(e&&e.launchInfoPanel||this.props.launchInfoPanelDefault,"_description")}))))}}])&&l(r.prototype,n),o&&l(r,o),t}(d.Component);f(T,"propTypes",{service:E.object,launchInfoPanelOptions:E.array,launchInfoPanelDefault:E.string,onPropertyChange:E.func}),f(T,"contextTypes",{messages:E.object}),f(T,"defaultProps",{service:{},launchInfoPanelDefault:"no_info",onPropertyChange:function(){}}),e.exports={Element:T,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.displayName&&e.displayName.length>0}}},4081:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r(1),f=r(758),d=f.FormGroup,m=f.ControlLabel,y=f.FormControl,g=f.Label,b=r(2103),h=r(2307),v=r(26),O=r(0);var E=function(e){function t(){var e,r;o(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return u(s(r=a(this,(e=l(t)).call.apply(e,[this].concat(i)))),"updateProp",(function(e,t){var n=t.target.value,o=v({},r.props.service.options,u({},e,n));r.props.onPropertyChange("service",v({},r.props.service,{options:o}))})),u(s(r),"updateMaxFeatures",(function(e){var t=v({},r.props.service.options,{maxFeatures:parseInt(e[0],10)});r.props.onPropertyChange("service",v({},r.props.service,{options:t}))})),r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.service.options,t=void 0===e?{}:e;return p.createElement("form",null,p.createElement("span",{className:"wfs-required-props-title"},p.createElement(b,{msgId:"search.s_wfs_opt_props_label"})),p.createElement(d,null,p.createElement(m,null,p.createElement(b,{msgId:"search.s_sort"})),p.createElement(y,{value:t.sortBy,key:"sortBy",type:"text",onChange:this.updateProp.bind(null,"sortBy")})),p.createElement(d,null,p.createElement(m,null,p.createElement(b,{msgId:"search.s_max_features"})),p.createElement(h,{key:"maxFeatures",start:[t.maxFeatures||1],range:{min:1,max:50},onSlide:this.updateMaxFeatures}),p.createElement(g,{key:"maxFeatures-labeel",className:"slider-label"},t.maxFeatures||1)))}}])&&i(r.prototype,n),f&&i(r,f),t}(p.Component);u(E,"propTypes",{service:O.object,onPropertyChange:O.func}),u(E,"defaultProps",{service:{},onPropertyChange:function(){}}),e.exports={Element:E,validate:function(){return!0}}},4082:function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(2882),i=o.SET_SEARCH_CONFIG_PROP,a=o.RESET_SEARCH_CONFIG,l=o.UPDATE_SERVICE,s=r(267).RESET_CONTROLS,c=r(40).MAP_CONFIG_LOADED,u=r(26);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return u({},e,n({},t.property,t.value));case c:var r=t.config.map.text_serch_config;return u({},e,{textSearchConfig:r});case s:case a:return u({},e,{service:void 0,page:t.page,init_service_values:void 0,editIdx:void 0});case l:var o=(e.textSearchConfig&&e.textSearchConfig.services||[]).slice(),p=u({},t.service,{priority:parseInt(t.service.priority,10)});return-1!==t.idx?o[t.idx]=p:o.push(p),u({},e,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:o,override:e.textSearchConfig&&e.textSearchConfig.override||!1}});default:return e}}},4284:function(e,t,r){"use strict";r.r(t);var n=r(407),o=r(1),i=r.n(o),a=r(0),l=r.n(a),s=r(412),c=r(12),u=r.n(c),p=r(2177),f=r(2806),d=r.n(f),m=r(758),y=r(13),g=r(2114),b=r.n(g);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?S(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){for(var t=u()().startOf("day"),r=u()().startOf("day").add(1,"d"),n=[],o=t.date();t.date()===o&&t.isBefore(r);)n.push({date:t.toDate(),label:t.format("LT")}),t=t.add(e||30,"m");return n},A=function(e){function t(){var e,r;v(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return T(S(r=E(this,(e=w(t)).call.apply(e,[this].concat(o)))),"state",{focusedItemIndex:0,times:[]}),T(S(r),"handleKeyDown",(function(e){var t=e.key,n=r.state,o=n.focusedItemIndex,i=n.times;if("Enter"===t){var a=i[o];r.props.onSelect(a),e.preventDefault()}else if("ArrowDown"===t){e.preventDefault();var l=o+1;r.scrollDown(l),l<i.length&&r.setState({focusedItemIndex:l})}else if("ArrowUp"===t){e.preventDefault();var s=o-1;r.scrollUp(s),s>-1&&r.setState({focusedItemIndex:s})}})),T(S(r),"scrollDown",(function(e){var t=r.itemsRef[e];t&&t.offsetTop>r.listRef.offsetHeight&&(r.listRef.scrollTop=t.offsetTop-r.listRef.offsetTop)})),T(S(r),"scrollUp",(function(e){var t=r.itemsRef[e];if(t){var n=r.listRef.scrollTop,o=t.offsetTop;n&&o<n&&(r.listRef.scrollTop=t.offsetTop-r.listRef.offsetTop)}})),T(S(r),"attachListRef",(function(e){return r.listRef=e})),T(S(r),"itemsRef",{}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.setState({times:j()})}},{key:"render",value:function(){var e=this,t=this.state,r=t.focusedItemIndex,n=t.times;return i.a.createElement("ul",{id:"rw_1_time_listbox",style:{position:"relative"},ref:this.attachListRef,tabIndex:"0",className:"rw-list",role:"listbox","aria-labelledby":"rw_1_input","aria-live":"false","aria-hidden":"true","aria-activedescendant":"rw_1_time_listbox__option__11"},n.map((function(t,n){return i.a.createElement("li",{key:t.label,onMouseDown:e.props.onMouseDown,onClick:function(){return e.props.onSelect(t)},ref:function(t){e.itemsRef[n]=t},role:"option",tabIndex:"0","aria-selected":"false",className:"rw-list-option ".concat(r===n?"rw-state-focus":""),id:"rw_1_time_listbox__option__0"},t.label)})))}}])&&O(r.prototype,n),o&&O(r,o),t}(o.Component);T(A,"propTypes",{onSelect:l.a.func,onMouseDown:l.a.func}),T(A,"defaultProps",{onSelect:function(){},onMouseDown:function(){}});var C=A;function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?L(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d()(u.a);var M="function"==typeof u()().locale?"locale":"lang";function B(e,t,r){return e?u()(t,r)[M](e):u()(t,r)}var G=function(e,t){var r=u()(e);return r.hours(t.getHours()).minute(t.getMinutes()).seconds(t.getSeconds()).milliseconds(t.getMilliseconds()),r.toDate()},U="lll",W="L",V="LT",H=function(e){function t(){var e,r;_(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return N(L(r=F(this,(e=k(t)).call.apply(e,[this].concat(o)))),"state",{open:"",focused:!1,inputValue:"",operator:"",date:null}),N(L(r),"getFormat",(function(){var e=r.props,t=e.format,n=e.time,o=e.calendar;return t||(!n&&o?W:n&&!o?V:U)})),N(L(r),"renderInput",(function(e,t,n,o,a,l,s){return n?i.a.createElement(b.a,{placement:"top",overlay:i.a.createElement(m.Tooltip,{id:"tooltip"},n)},i.a.createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:r.handleInputBlur,placeholder:o,"aria-expanded":l||s,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(t).concat(e),className:"rw-input",onChange:r.handleValueChange})):i.a.createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:r.handleInputBlur,placeholder:o,"aria-expanded":l||s,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(t).concat(e),className:"rw-input",onChange:r.handleValueChange})})),N(L(r),"inputFlush",!1),N(L(r),"ignoreBlur",!1),N(L(r),"handleWidgetFocus",(function(){r.setState({focused:!0}),r.ignoreBlur=!1})),N(L(r),"handleWidgetBlur",(function(){r.ignoreBlur||r.setState({open:"",focused:!1})})),N(L(r),"handleMouseDown",(function(){r.ignoreBlur=!0})),N(L(r),"toggleCalendar",(function(){r.setState((function(e){return{open:"date"!==e.open?"date":""}}))})),N(L(r),"toggleTime",(function(){r.setState((function(e){return{open:"time"!==e.open?"time":""}}))})),N(L(r),"handleInputBlur",(function(){if(r.inputFlush){var e=r.parse(r.state.inputValue),t=r.format(e);r.setState({inputValue:t,date:e}),r.inputFlush=!1,r.props.onChange(e,"".concat(r.state.operator).concat(t))}})),N(L(r),"setDateFromValueProp",(function(e,t){if(Object(y.isDate)(e)){var n=r.format(e);r.setState((function(r){return{date:e,inputValue:n,operator:t||r.operator}}))}})),N(L(r),"parse",(function(e){var t=r.props.culture,n=r.getFormat();if(e){var o=B(t,e,n);if(o.isValid())return o.toDate()}return null})),N(L(r),"format",(function(e){if(!e)return"";var t=r.props.culture,n=r.getFormat(),o=B(t,e);return o.isValid()?o.format(n):""})),N(L(r),"close",(function(){r.setState({open:""})})),N(L(r),"open",(function(){var e=r.props,t=e.calendar,n=e.time;return!t&&n?r.setState({open:"time"}):t&&!n?r.setState({open:"date"}):""})),N(L(r),"handleKeyDown",(function(e){var t=r.state.open,n="time"===t,o="date"===t;if(!e.defaultPrevented)if("Escape"!==e.key){if(e.altKey&&"ArrowDown"===e.key)return e.preventDefault(),void r.open();if(e.altKey&&"ArrowUp"===e.key)return e.preventDefault(),void r.close();if(n&&r.timeRef.handleKeyDown(e),o&&r.calRef.refs.inner.handleKeyDown(e),!n&&!o&&"Enter"===e.key){var i=r.parse(r.state.inputValue),a=r.format(i);r.setState({inputValue:a,date:i}),r.inputFlush=!1,r.props.onChange(i,"".concat(r.state.operator).concat(a))}}else r.close()})),N(L(r),"handleValueChange",(function(e){var t=e.target.value,n=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(t);r.setState({inputValue:n[2],operator:n[1]||""}),r.inputFlush=!0})),N(L(r),"handleCalendarChange",(function(e){var t=G(e,new Date),n=r.format(t);r.setState({date:t,inputValue:n,open:""}),r.props.onChange(t,"".concat(r.state.operator).concat(n))})),N(L(r),"handleTimeSelect",(function(e){var t=r.state.date||new Date,n=G(t,e.date),o=r.format(n);r.setState({date:n,inputValue:o,open:""}),r.props.onChange(n,"".concat(r.state.operator).concat(o))})),N(L(r),"attachTimeRef",(function(e){return r.timeRef=e})),N(L(r),"attachCalRef",(function(e){return r.calRef=e})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,r=e.operator;this.setDateFromValueProp(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value||e.operator!==this.props.operator){var t=this.props,r=t.value,n=t.operator;this.setDateFromValueProp(r,n)}}},{key:"render",value:function(){var e=this,t=this.state,r=t.open,n=t.inputValue,o=t.operator,a=t.focused,l=this.props,s=l.calendar,c=l.time,u=l.toolTip,f=l.placeholder,d=l.tabIndex,m=Object.keys(this.props).reduce((function(t,r){return["placeholder","calendar","time","onChange","value"].includes(r)||(t[r]=e.props[r]),t}),{}),y="date"===r,g="time"===r;return i.a.createElement("div",{tabIndex:"-1",onKeyDown:this.handleKeyDown,onBlur:this.handleWidgetBlur,onFocus:this.handleWidgetFocus,className:"rw-datetimepicker rw-widget ".concat(s&&c?"rw-has-both":""," ").concat(s||c?"":"rw-has-neither"," ").concat(a?"rw-state-focus":"")},this.renderInput(n,o,u,f,d,y,g),s||c?i.a.createElement("span",{className:"rw-select"},s?i.a.createElement("button",{tabIndex:"-1",title:"Select Date",type:"button","aria-disabled":"false","aria-label":"Select Date",className:"rw-btn-calendar rw-btn",onClick:this.toggleCalendar},i.a.createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-calendar"})):"",c?i.a.createElement("button",{tabIndex:"-1",title:"Select Time",type:"button","aria-disabled":"false","aria-label":"Select Time",className:"rw-btn-time rw-btn",onClick:this.toggleTime},i.a.createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-clock-o"})):""):"",i.a.createElement("div",{className:"rw-popup-container rw-popup-animating",style:{display:g?"block":"none",overflow:g?"visible":"hidden",height:"216px"}},i.a.createElement("div",{className:"rw-popup rw-widget",style:{transform:g?"translateY(0)":"translateY(-100%)",position:g?"":"absolute"}},i.a.createElement(C,D({ref:this.attachTimeRef,onMouseDown:this.handleMouseDown},m,{onClose:this.close,onSelect:this.handleTimeSelect})))),i.a.createElement("div",{className:"rw-calendar-popup rw-popup-container ".concat(y?"":"rw-popup-animating"),style:{display:y?"block":"none",overflow:y?"visible":"hidden",height:"375px"}},i.a.createElement("div",{className:"rw-popup",style:{transform:y?"translateY(0)":"translateY(-100%)",padding:"0",borderRadius:"4px",position:y?"":"absolute"}},i.a.createElement(p.Calendar,D({tabIndex:"-1",ref:this.attachCalRef,onMouseDown:this.handleMouseDown,onChange:this.handleCalendarChange},m)))))}}])&&I(r.prototype,n),o&&I(r,o),t}(o.Component);N(H,"propTypes",{format:l.a.string,type:l.a.string,placeholder:l.a.string,onChange:l.a.func,calendar:l.a.bool,time:l.a.bool,value:l.a.any,operator:l.a.string,culture:l.a.string,toolTip:l.a.string,tabIndex:l.a.string}),N(H,"defaultProps",{placeholder:"Type date...",calendar:!0,time:!0,onChange:function(){},value:null});var z=H,q=r(136),Q=r.n(q),Y=r(770),K=r(2387),X=r.n(K),Z=r(2807);r(2379);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?re(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=Object(Z.default)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(z),ae=function(e){function t(){var e,r;$(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return oe(re(r=ee(this,(e=te(t)).call.apply(e,[this].concat(o)))),"renderInput",(function(){if(!1===r.props.column.filterable)return i.a.createElement("span",null);var e,t=Object(Y.getDateTimeFormat)(r.context.locale,r.props.type),n=Q.a.getMessageById(r.context.messages,r.props.placeholderMsgId)||"Insert date",o=r.props.intl&&r.props.intl.formatMessage({id:"".concat(r.props.tooltipMsgId)},{format:t})||"Insert date in ".concat(t," format"),a="header-filter-"+r.props.column.key;e=r.props.value&&null===r.props.value.startDate||!r.props.value?null:r.props.value&&r.props.value.startDate||r.props.value;var l=r.props.value?e:null,s=r.props.value&&r.props.value.operator;return i.a.createElement(ie,{key:a,disabled:r.props.disabled,format:t,placeholder:n,value:l,toolTip:o,operator:s,type:r.props.type,time:"date-time"===r.props.type||"time"===r.props.type,calendar:"date-time"===r.props.type||"date"===r.props.type,onChange:function(e,t){return r.handleChange(e,t)}})})),oe(re(r),"handleChange",(function(e,t){r.props.onChange({value:e,stringValue:t,attribute:r.props.column&&r.props.column.name})})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),t}(X.a);oe(ae,"propTypes",{type:l.a.string,disabled:l.a.boolean,onChange:l.a.func,intl:s.intlShape}),oe(ae,"contextTypes",{messages:l.a.object,locale:l.a.string}),oe(ae,"defaultProps",{value:null,type:"date-time",column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});var le=Object(n.getContext)({intl:s.intlShape})(ae);t.default=Object(n.compose)(Object(n.defaultProps)({onValueChange:function(){},value:null}),Object(n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute,o=t.stringValue,i=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(o),a=i[1],l=i[1]||"=";"!=="===a|"!="===a?l="<>":"==="===a|"=="===a&&(l="="),e.onValueChange(r),e.onChange({value:{startDate:r,operator:a},operator:l,type:e.type,attribute:n})}}}),Object(n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.date",tooltipMsgId:"featuregrid.filter.tooltips.date"}))(le)},4288:function(e,t,r){"use strict";r.r(t);var n=r(71),o=r.n(n),i=r(26),a=r.n(i),l=r(13);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c={},u=function(e){return e.map((function(e){return Object(l.mapKeys)(e,(function(e,t){return Object(l.camelCase)(t)}))}))},p=r(2274);function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=[{regex:/gt-css/,format:"css"}],b={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},h=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?b.sldse:b.sld:b[e]||b.sld},v=function(e,t){var r=e.options,n=void 0===r?{}:r,o=e.format,i=e.baseUrl,a=e.name,l=e.workspace,s=e.languageVersion,c=t?{name:encodeURIComponent(a)}:{};return{options:m({},n,{params:m({},n.params,{},c),headers:m({},n.headers||{},{"Content-Type":h(o,s)})}),url:"".concat(i,"rest/").concat(l&&"workspaces/".concat(l,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},O=function(e){var t=e.geoserverBaseUrl,r=e.workspace,n=e.name,o=e.fileName;return"".concat(t,"rest/").concat(r&&"workspaces/".concat(r,"/")||"","styles/").concat(o||"".concat(encodeURIComponent(n),".json"))},E={saveStyle:function(e,t,r,n){var i=e+"styles/"+encodeURI(t),l=a()({},n);return l.headers=a()({},l.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),o.a.put(i,r,l)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return c[t]?new Promise((function(e){return e(c[t])})):o.a.all([o.a.get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return Object(l.get)(t,"about.resource")})).catch((function(){return null})),o.a.get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return Object(l.get)(t,"about.resource")})).catch((function(){return null}))]).then((function(e){var r=s(e,2),n=r[0],o=r[1],i={version:n&&u(n),manifest:o&&u(o)};return n&&o?(c[t]=i,c[t]):i}))}({baseUrl:t}).then((function(e){var r=e.version,n=e.manifest;if(!r)return null;var o=(n||[]).map((function(e){var t=e.name;return Object(l.head)(g.filter((function(e){var r=e.regex;return t.match(r)})).map((function(e){return e.format})))})).filter((function(e){return e})),i=Object(l.head)(r.filter((function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()})))||{};return{baseUrl:t,version:i.version,formats:[].concat(f(o),["sld"]),availableUrls:[]}}))},getStyle:function(e){var t=e.options,r=e.format,n=e.baseUrl,i=e.styleName,a=Object(p.getNameParts)(i),l=a.name,s=a.workspace,c=v({options:t,format:r,baseUrl:n,name:l,workspace:s});return o.a.get(c.url,c.options)},createStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,s=e.languageVersion,c=Object(p.getNameParts)(l),u=c.name,f=c.workspace,d=v({options:n,format:a,baseUrl:t,name:u,workspace:f,languageVersion:s},!0);return o.a.post(d.url,r,d.options)},updateStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,s=e.languageVersion,c=Object(p.getNameParts)(l),u=c.name,f=c.workspace,d=v({options:n,format:a,baseUrl:t,name:u,workspace:f,languageVersion:s});return o.a.put(d.url,r,d.options)},deleteStyle:function(e){var t=e.baseUrl,r=e.options,n=e.format,i=void 0===n?"sld":n,a=e.styleName,l=Object(p.getNameParts)(a),s=l.name,c=l.workspace,u=v({options:r,format:i,baseUrl:t,name:s,workspace:c});return o.a.delete(u.url,u.options)},getStylesInfo:function(e){var t=e.baseUrl,r=e.styles,n=void 0===r?[]:r,i=[],l=n.length;return new Promise((function(e){n&&0!==n.length?n.forEach((function(r,s){var c=r.name;return o.a.get(O(m({},Object(p.getNameParts)(c),{geoserverBaseUrl:t}))).then((function(t){var r=t.data;i[s]=a()({},n[s],r&&r.style&&m({},r.style,{name:Object(p.stringifyNameParts)(r.style)})||{}),0===--l&&e(i.filter((function(e){return e})))})).catch((function(){i[s]=a()({},n[s]),0===--l&&e(i.filter((function(e){return e})))}))})):e([])}))},getStyleCodeByName:function(e){var t=e.baseUrl,r=e.styleName,n=e.options,i=Object(p.getNameParts)(r),a=i.name,l=i.workspace,s=O({name:a,workspace:l,geoserverBaseUrl:t});return o.a.get(s,n).then((function(e){return e.data&&e.data.style&&e.data.style.filename?o.a.get(O({workspace:l,geoserverBaseUrl:t,fileName:e.data.style.filename})).then((function(t){var r=t.data;return m({},e.data.style,{code:r})})):null}))}};t.default=E},4289:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(2119),a=r.n(i),l=r(2116),s=r.n(l),c=r(2850),u=r.n(c),p=r(3907),f=r.n(p),d=r(2103),m=r.n(d),y=r(3909),g=r.n(y),b=r(407),h=r(53),v=r.n(h),O=r(71),E=r.n(O),w=r(47),S=r.n(w),P=r(137);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=Object(b.compose)(Object(b.withState)("selected","setSelected",null),Object(b.withHandlers)({onMapChoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapSelected,r=void 0===t?function(){}:t,n=e.selectedSource,o=void 0===n?{}:n,i=e.includeMapId,a=void 0!==i&&i;return function(e){return("string"==typeof e.id?E.a.get(e.id).then((function(e){return e.data})):v.a.getData(e.id,{baseURL:o.baseURL})).then((function(t){var r=t.version||"string"==typeof e.id?S.a.normalizeConfig(t.map):S.a.convertFromLegacy(t);return j({},r&&r.map||{},{},a?{id:e.id}:{},{layers:Object(P.excludeGoogleBackground)(r.layers.map((function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e})))})})).then((function(e){return r({map:e})}))}}}),Object(b.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=arguments.length>1?arguments[1]:void 0;return j({canProceed:t},r)}))})));function x(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var D=f()(g.a);t.default=C((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,i=void 0===n?function(){}:n,l=e.onMapChoice,c=void 0===l?function(){}:l,p=e.stepButtons,f=void 0===p?[]:p,d=e.selected;return o.a.createElement(a.a,{className:"bg-body layer-selector",header:o.a.createElement(u.a,{onClose:r},o.a.createElement(s.a,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(x(f),[{tooltipId:"widgets.builder.wizard.useThisMap",onClick:function(){return c(d)},visible:!0,disabled:!d,glyph:"arrow-right"}])}))},o.a.createElement(D,{title:o.a.createElement(m.a,{msgId:"widgets.builder.wizard.selectAMap"}),selected:d,onSelected:function(e){return i(e)}}))}))},837:function(e,t,r){var n=r(2577);e.exports={plugins:{IdentifyPlugin:r(2659),TOCPlugin:r(3390),MapPlugin:r(2580),ToolbarPlugin:r(2677),DrawerMenuPlugin:r(3420),ZoomAllPlugin:r(2683),MapLoadingPlugin:r(2684),OmniBarPlugin:r(2685),BackgroundSelectorPlugin:r(2686),FullScreenPlugin:r(2694),ZoomInPlugin:r(2696),ZoomOutPlugin:r(2699),ExpanderPlugin:r(2700),BurgerMenuPlugin:r(2701),UndoPlugin:r(2751),RedoPlugin:r(2751),ScaleBoxPlugin:r(2702),MapFooterPlugin:r(2705),PrintPlugin:r(2706),MeasurePlugin:r(3431),TOCItemsSettingsPlugin:r(3475),WidgetsPlugin:r(3696),WidgetsBuilderPlugin:r(3867),WidgetsTrayPlugin:r(3933),NotificationsPlugin:r(3938),FeatureEditorPlugin:r(3947),QueryPanelPlugin:r(3973),SavePlugin:r(4004).default,SaveAsPlugin:r(4018).default,MetadataExplorerPlugin:r(4019),GridContainerPlugin:r(4034),StyleEditorPlugin:r(4035),TimelinePlugin:r(2707),PlaybackPlugin:r(2713),MousePositionPlugin:r(4039),SearchPlugin:r(4058),SearchServicesConfigPlugin:r(4077),AddReducersAndEpics:{reducers:{security:r(2714),maps:r(2715),currentMap:r(2716),maplayout:r(2717)},epics:n}},requires:{ReactSwipe:r(2718).default,SwipeHeader:r(2734)}}}}]);