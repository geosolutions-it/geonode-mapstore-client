(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[1255],{85148:(e,r,t)=>{"use strict";t.d(r,{Qw:()=>p,jo:()=>v,m$:()=>m,AF:()=>b,WT:()=>O,ns:()=>h,RP:()=>j,aK:()=>w,oP:()=>P});var n=t(75110),i=t(22222),u=t(27361),o=t.n(u),a=t(13311),c=t.n(a);function f(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){g(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var p=function(e,r){return function(t){return o()(t,"dimension.data[".concat(r,"][").concat(e,"]"))}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return c()(e.dimensions||[],{name:r})},v=function(e,r){return function(t){return p(e.id,r)(t)||y(e,r)}},m=function(e){return(0,n.l2)(e).reduce((function(r,t){var n=v(t,"time")(e);return n?s(s({},r),{},g({},t.id,n)):r}),{})},b=function(e){return(0,n.l2)(e).filter((function(r){var t=o()(e,"timeline.settings.showHiddenLayers"),n=y(r,"time");return(t||r.visibility)&&n}))},O=function(e){var r=o()(e,"dimension.currentTime");return r&&r.split("/")[0]},h=function(e){return o()(e,"dimension.offsetTime")},j=function(e){return!!h(e)},w=((0,i.P1)(m,(function(e){return Object.keys(e).reduce((function(r,t){return[].concat(f(r),f(e[t]&&e[t].values||[]))}),[]).sort()||[]})),function(e){return function(r){return f(o()(v(e,"time")(r),"values",[])).sort()}}),P=function(e,r){var t=p(r,"time")(e),n=t&&t.domain&&t.domain.split("--");if(n&&2===n.length)return n&&{start:n[0],end:n[1]};var i=t&&t.domain&&t.domain.split(",");return i&&i.length>0?{start:i[0],end:i[i.length-1]}:null}},31255:(e,r,t)=>{"use strict";t.d(r,{u$:()=>w,PI:()=>P,_w:()=>F,eO:()=>S,kG:()=>q,P3:()=>A,bq:()=>k,LB:()=>x,b4:()=>T,M0:()=>E,Li:()=>M,Rd:()=>z,g5:()=>L,Sj:()=>C,o:()=>G,eK:()=>R,jY:()=>_,ND:()=>N,OK:()=>V,tU:()=>K,ou:()=>Q,DK:()=>U,Gl:()=>W,uz:()=>$,Ci:()=>H,Ae:()=>B,gz:()=>Y,He:()=>J,P4:()=>X,kd:()=>Z,TC:()=>ee,nq:()=>re,Vf:()=>te});var n=t(91175),i=t.n(n),u=t(27361),o=t.n(u),a=t(13218),c=t.n(a),f=t(75110),l=t(78889),d=t(8316),s=t(52259),g=t(96958),p=t(85148),y=t(74621),v=t(93152),m=t(24260);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){h(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function h(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var j=f.CA,w=function(e){return o()(e,"featuregrid.selectedLayer")},P=function(e){return o()(e,"featuregrid.chartDisabled",!1)},F=function(e){return e&&e.featuregrid&&e.featuregrid.select},S=function(e){return e&&e.featuregrid&&e.featuregrid.changes},q=function(e){return e&&e.featuregrid&&e.featuregrid.newFeatures},A=function(e){return i()(F(e))},D=function(e){var r=(0,m.Qs)(e);if(r){var t=(0,l.findGeometryProperty)(r);return t&&t.localType}return null},I=["Geometry","GeometryCollection"],k=function(e){return!i()(I.filter((function(r){return D(e)===r})))},x=function(e){return S(e)&&S(e).length>0},T=function(e){return q(e)&&q(e).length>0},E=function(e){return e&&e.featuregrid&&e.featuregrid.filters},M=function(e){return j(e,w(e))},z=function(e){return e&&e.featuregrid&&e.featuregrid.open},L=function(e,r){return o()(E(e),r)},C=function(e){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title||e.name}(j(e,w(e)));return c()(r)?r[(0,d.Pz)(e)]||r.default||"":r},G=function(e){return((0,m.L)(e)||[]).map((function(r){var t=function(e,r){return o()(e,"featuregrid.attributes[".concat(r.name||r.attribute,"]"))}(e,r);return t?O(O({},r),t):r}))},R=function(e){return e&&e.featuregrid&&e.featuregrid.mode},_=function(e){return(F(e)||[]).length},N=function(e){return(0,g.rK)(S(e))},V=function(e){return function(e){var r=A(e);if(r){var t=(0,g.rK)(S(e));return!((!t[r.id]||null===t[r.id].geometry)&&(t[r.id]&&null===t[r.id].geometry||r._new&&i()(q(e))&&null===i()(q(e)).geometry||(!r._new||!i()(q(e))||null===i()(q(e)).geometry)&&null===r.geometry))}return!1}(e)},K=function(e){return o()(e,"featuregrid.showAgain",!1)},Q=function(e){if(o()(e,"featuregrid.showTimeSync",!1)){var r=w(e);return(0,p.jo)({id:r},"time")(e)}return null},U=function(e){return o()(e,"featuregrid.timeSync",!1)},W=function(e){return o()(e,"featuregrid.showPopoverSync",!0)},$=function(e){return e&&e.featuregrid&&e.featuregrid.saving},H=function(e){return e&&e.featuregrid&&e.featuregrid.saved},B=function(e){return e&&e.featuregrid&&e.featuregrid.drawing},Y=function(e){return o()(e,"featuregrid.multiselect",!1)},J=function(e){return(0,s.isSimpleGeomType)(D(e))},X=function(e){return e.featuregrid&&e.featuregrid.dockSize},Z=function(e){var r=j(e,w(e));return r&&r.name||""},ee=function(e){var r=function(e){return o()(j(e,w(e)),"params")}(e);return{viewParams:r&&(r.VIEWPARAMS||r.viewParams||r.viewparams),cqlFilter:r&&(r.CQL_FILTER||r.cqlFilter||r.cql_filter)}},re=function(e){var r=(0,y.L3)(e),t=function(e){return o()(e,"featuregrid.editingAllowedRoles",["ADMIN"])}(e)||["ADMIN"],n=function(e){return e&&e.featuregrid&&e.featuregrid.canEdit}(e);return(-1!==t.indexOf(r)||n)&&!(0,v.c0)(e)},te=function(e){return o()(e,"featuregrid.pagination")}},24260:(e,r,t)=>{"use strict";t.d(r,{qj:()=>b,Bu:()=>O,UM:()=>h,X1:()=>j,L:()=>w,HY:()=>P,Mz:()=>F,F0:()=>S,dc:()=>q,b0:()=>A,hk:()=>D,Qs:()=>I,gy:()=>k,M7:()=>x,VD:()=>T});var n=t(14293),i=t.n(n),u=t(27361),o=t.n(u),a=t(91175),c=t.n(a),f=t(1469),l=t.n(f),d=t(30998),s=t.n(d);function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){y(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var v=function(e){return o()(e,"query.filterObj.featureTypeName")},m=function(e){return function(r){return o()(r,'query.featureTypes["'.concat(e,'"]'))}},b=function(e,r){return o()(m(r)(e),"original")},O=function(e){return e&&e.query&&e.query.searchUrl},h=function(e){return e&&e.query&&e.query.url},j=function(e){return e&&e.query&&e.query.filterObj},w=function(e){return o()(m(v(e))(e),"attributes")},P=function(e){return o()(e,"query.typeName")},F=function(e){return o()(e,"query.result.features")},S=function(e){var r=o()(e,"query.result");return p(p({},r),{},{features:(r&&r.features||[]).filter((function(e){return!i()(e.geometry)}))})},q=function(e,r){var t=e&&e.query&&e.query.result&&e.query.result.features;return c()(t.filter((function(e){return e.id===r})))},A={startIndex:function(e){return o()(e,"query.filterObj.pagination.startIndex")},maxFeatures:function(e){return o()(e,"query.filterObj.pagination.maxFeatures")},resultSize:function(e){return o()(e,"query.result.features.length")},totalFeatures:function(e){return o()(e,"query.result.totalFeatures")}},D=function(e,r){var t=m(r)(e);return!!(t&&t.attributes&&t.geometry&&t.original)},I=function(e){return b(e,v(e))},k=function(e){return o()(e,"query.featureLoading")},x=function(e){return o()(e,"query.syncWmsFilter",!1)},T=function(e){var r=o()(e,"query.filterObj.crossLayerFilter"),t=o()(e,"query.filterObj.spatialField"),n=o()(e,"query.filterObj.filterFields");return!!(n&&c()(n)||t&&(t.method&&t.operation&&t.geometry||l()(t)&&s()(t,(function(e){return e.method&&e.operation&&e.geometry}))>-1)||r&&r.collectGeometries&&r.operation)}},74621:(e,r,t)=>{"use strict";t.d(r,{np:()=>n,L3:()=>i,jl:()=>u,y8:()=>o,qg:()=>a}),t(27418),t(27361);var n=function(e){return e&&e.security&&e.security.user},i=function(e){return n(e)&&n(e).role},u=function(e){return e&&e.security&&e.security.user},o=function(e){return e.security&&e.security.token},a=function(e){return"ADMIN"===i(e)}},96958:(e,r,t)=>{"use strict";t.d(r,{t3:()=>S,WQ:()=>A,dM:()=>D,rK:()=>I,Lo:()=>T,gP:()=>L,S9:()=>C,AV:()=>G,Sc:()=>R,a3:()=>_,IC:()=>N,wT:()=>V,cZ:()=>K,ek:()=>Q,Qc:()=>U,Cf:()=>$,dJ:()=>H,DR:()=>B,f1:()=>Y});var n=t(6557),i=t.n(n),u=t(92742),o=t.n(u),a=t(19873),c=t.n(a),f=t(30998),l=t.n(f),d=t(27361),s=t.n(d),g=t(1469),p=t.n(g),y=t(14293),v=t.n(y),m=t(47037),b=t.n(m),O=t(78889);function h(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return j(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){F(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function F(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var S=function(e,r,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0;return l()(e,(function(e){return e<=t&&t<e+r}))}(r,t,e);return-1===n?n:n*t+e-r[n]},q={id:"empty_row",get:function(){}},A=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return r[S(e,t,n)]||P({},q)},D=function(e,r){return r[e]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p()(e)?e.reduce((function(e,r){return P(P({},e),{},F({},r.id,P(P({},e[r.id]),r.updated)))}),{}):{}},k=function(e,r){var t=Object.keys(r).filter((function(e){return"geometry"!==e})).reduce((function(e,t){return P(P({},e),{},F({},t,r[t]))}),{}),n=Object.keys(r).filter((function(e){return"geometry"===e})).reduce((function(e,t){return P(P({},e),{},F({},t,r[t]))}),{});return P(P(P({},e),n),{},{properties:P(P({},e&&e.properties||{}),t)})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=l()(e,r);return n>=0?e.map((function(e,r){return r===n?t:e})):[].concat(h(e),[t])},T=function(e){return((0,O.getFeatureTypeProperties)(e)||[]).filter((function(e){return!(0,O.isGeometryType)(e)}))},E=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return r.map((function(r){return t<=r&&r<=n?0:Math.abs(r-e)})).reduce((function(e,r,t,n){return r>n[e]&&t||e}),0)},M=function(e,r){return r.filter((function(r,t){return t!==e}))},z=function(e,r,t){return e.filter((function(e,n){return n<r||n>=r+t}))},L=function(e,r,t,n){for(var i,u,o=e;o<=r&&void 0===i;o++)-1===S(o*n,t,n)&&(i=o);for(var a=r;a>=e&&void 0===u;a--)-1===S(a*n,t,n)&&(u=a);return[i,u].filter((function(e){return void 0!==e}))},C=function(e,r,t){var n=e.startPage,i=e.endPage,u=L(n,i,r,t),o=u[1]-u[0]+1;return{startIndex:u[0]*t,maxFeatures:o*t}},G=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.editable,i=void 0!==n&&n,u=t.sortable,o=void 0===u||u,a=t.resizable,c=void 0===a||a,f=t.filterable,l=void 0===f||f,d=t.defaultSize,s=void 0===d?200:d,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},p=g.getEditor,y=void 0===p?function(){}:p,v=g.getFilterRenderer,m=void 0===v?function(){}:v,b=g.getFormatter,O=void 0===b?function(){}:b;return T(e).filter((function(e){return!(r[e.name]&&r[e.name].hide)})).map((function(e){return{sortable:o,key:e.name,width:r[e.name]&&r[e.name].width||s||void 0,name:r[e.name]&&r[e.name].label||e.name,resizable:c,editable:i,filterable:l,editor:y(e),formatter:O(e),filterRenderer:m(e,e.name)}}))},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},u=(0,O.findGeometryProperty)(t);return e.map((function(e){return P(P({},e),{},{events:e.events&&Object.keys(e.events).reduce((function(i,u){return P(P({},i),{},F({},u,(function(i,o){return e.events[u](r(o.rowIdx),o,t,n)})))}),{})},"geometry"===e.key&&u?{filterRenderer:i(P(P({},u),{},{localType:"geometry"}),u.name),filterable:!0,geometryPropName:u.name}:{})}))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(u,o){return P(P({},u),{},F({},o,(function(){for(var u=arguments.length,a=new Array(u),c=0;c<u;c++)a[c]=arguments[c];return e[o].apply(e,a.concat([r,t,n,i]))})))}),{})},N=function(e,r){return!!(0,O.getPropertyDesciptor)(e,r)},V=function(e,r,t){return(0,O.isValidValueForPropertyName)(e,(i=t,"geometry"===(n=r)?function(e){return s()((0,O.findGeometryProperty)(e),"name")}(i):n),t);var n,i},K=function(){return"EPSG:4326"},Q=function(e,r,t){return function(n){return r.length>0?n._new:!e||e&&!!t[n.id]}},U=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k(e,r[e.id]||{})},W=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,$=function(e,r){if("string"===r)return{newVal:o()(e),operator:"ilike"};var t,n=W.exec(e),i="=";return n?("!=="===(i=n[1]||"=")|"!="===i?i="<>":"==="===i|"=="===i&&(i="="),t=parseFloat(n[2])):t=parseFloat(e,10),{newVal:t,operator:i}},H=function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.attribute,n=r.operator,u=r.value,o=r.type,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(null===(e=a.groupFields)||void 0===e?void 0:e.filter((function(e){return t!==e.id&&1!==e.id})))||[];if(("string"===o||"number"===o)&&b()(u)&&-1!==(null==u?void 0:u.indexOf(","))){var f,l=(null==u?void 0:u.split(",").filter(i()))||[],d=(null===(f=a.filterFields)||void 0===f?void 0:f.filter((function(e){return t!==e.attribute})))||[];return P(P({},a),{},{groupFields:c.concat([{id:t,logic:"OR",groupId:1,index:0}]),filterFields:d.concat(l.map((function(e){var r=$(e,o),n=r.operator,i=r.newVal;return{attribute:t,rowId:Date.now(),type:o,groupId:t,operator:n,value:i}}))),spatialField:a.spatialField,spatialFieldOperator:a.spatialFieldOperator})}return P(P({},a),{},{groupFields:c.concat([{id:1,logic:"AND",groupId:1,index:0}]),filterFields:"geometry"===o?a.filterFields:v()(u)?(a.filterFields||[]).filter((function(e){return e.attribute!==t})):x(a.filterFields||[],{attribute:t},{attribute:t,rowId:Date.now(),type:o,groupId:1,operator:n,value:u}),spatialField:"geometry"===o?u:a.spatialField,spatialFieldOperator:p()(u)?"OR":""})},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.startIndex,t=void 0===r?0:r,n=e.maxFeatures,i=void 0===n?1:n,u=e.totalFeatures,o=void 0===u?0:u,a=e.resultSize;return{page:Math.ceil(t/i),resultSize:a,size:i,total:o,maxPages:Math.ceil(o/i)-1}},Y=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.endPage,n=r.startPage,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=i.pages,o=i.features,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=a.size,l=a.maxStoredPages,d=a.startIndex,g=L(n,t,u,f),p=g[1]-g[0]+1,y=s()(e,"features",[]);y.length!==p*f&&(y=y.concat(c()(Array(p*f-y.length>0?p*f-y.length:y.length),!1)));var v=u,m=o,b=v.length+p-Math.max(l,t-n+1);if(b>0)for(var O=n*f,h=t*f,j=O+(h-O)/2,w=0;w<b;w++){var P=E(j,u,O,h),F=P*f;v=M(P,v),m=z(o,F,f)}for(var S=[],q=0;q<p;q++)S.push(d+f*q);return{pages:v.concat(S),features:m.concat(y)}}}}]);