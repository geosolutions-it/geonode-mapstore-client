(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[86246],{690825:(e,t,r)=>{"use strict";r.d(t,{H:()=>v,k:()=>O});var o=r(580416),n=r(501157),i=r(432420),l=r(375875),a=r.n(l),p=r(472500),u=r.n(p),c=r(727418),s=r.n(c),f=r(505055),d=r.n(f);const b=function(e,t){var r=u().parse(e,!0),o=u().format(s()({},r,{query:s()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return a().get(o).then((function(e){var t;return d().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))};var y=r(624262),m=r(227361),h=r.n(m),g=r(838848);function v(e,t,r){return function(l){return n.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?i.v$(e,r.name).then((function(e){return r.geometryType=(0,g.mI)(e),l((0,o.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return l((0,o.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&b(e,r.name).then((function(e){var n=h()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=n&&"string"==typeof n?["1"]:n.map((function(e,t){return t+1+""})),l((0,o.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return l((0,o.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),l((0,o.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return l((0,o.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function O(e,t){var r=(0,y.Fh)(e);return function(i){return i((0,o.tV)(e.id,"id",{capabilitiesLoading:!0})),n.ZP.getCapabilities(r,t).then((function(t){var r=n.ZP.parseLayerCapabilities(t,e);i(r?(0,o.tV)(e.id,"id",(0,y.IA)(r)):(0,o.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i((0,o.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},615402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var o=r(675263),n=r.n(o),i=r(124852),l=r.n(i);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=r(868195).FormattedHTMLMessage,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(n){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function a(){return p(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return this.context.intl?l().createElement(b,{id:this.props.msgId,values:this.props.msgParams}):l().createElement("span",null,this.props.msgId||"")}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l().Component);d(y,"propTypes",{msgId:n().string.isRequired,msgParams:n().object}),d(y,"contextTypes",{intl:n().object});const m=y},704201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var o=r(124852),n=r.n(o),i=r(727418),l=r.n(i),a=r(86638),p=r(675263),u=r.n(p),c=r(757588),s=r(950966),f=r(200020),d=r(805346);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},y.apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function v(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,r,o,i,p=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(i){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function u(){return m(this,u),p.apply(this,arguments)}return t=u,(r=[{key:"render",value:function(){var e=this,t=l()({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=l()({},t,{borderColor:"#FF0000"}));var r=this.props.multivalue?f.Multiselect:f.DropdownList,o=null!==this.props.valueField&&null!==this.props.textField?n().createElement(r,y({dropUp:this.props.dropUp},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,a.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):n().createElement(r,y({dropUp:this.props.dropUp},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,a.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?n().createElement(s.Z,{placement:"bottom",overlay:n().createElement(c.Tooltip,{id:this.props.fieldRowId+"_tooltip"},n().createElement("strong",null,this.props.fieldException))},o):o}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n().Component);w(F,"propTypes",{dropUp:u().bool,busy:u().bool,style:u().object,valueField:u().string,textField:u().string,placeholder:u().object,itemComponent:u().oneOfType([u().object,u().func]),fieldOptions:u().array,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().oneOfType([u().number,u().string,u().array]),fieldException:u().oneOfType([u().object,u().string]),comboFilter:u().oneOfType([u().bool,u().string,u().func]),groupBy:u().oneOfType([u().string,u().func]),multivalue:u().bool,disabled:u().bool,options:u().object,onSelect:u().func,onToggle:u().func,onSearch:u().func,onUpdateField:u().func,onClick:u().func,onUpdateExceptionField:u().func}),w(F,"contextTypes",{messages:u().object}),w(F,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:n().createElement(d.Z,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}});const E=F},531071:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Xe});var o=r(124852),n=r.n(o),i=r(675263),l=r.n(i),a=r(757588),p=r(80717),u=r(950966),c=r(704201),s=r(727418),f=r.n(s),d=r(86638);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function g(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,r,o,i,l=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(i){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function a(){var e;y(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return w(v(e=l.call.apply(l,[this].concat(r))),"renderOperatorField",(function(){return n().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),w(v(e),"renderValueField",(function(t){return n().cloneElement(n().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],f()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),w(v(e),"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),w(v(e),"updateFieldElement",(function(t,r,o,n,i){var l;if("attribute"===r){var a=(l=e.props.attributes.filter((function(e){return e.attribute===o}))[0])&&l.type||n;e.props.onUpdateField(t,r,o,a,i),"array"===a&&e.props.onUpdateField(t,"operator","contains",a,i)}else e.props.onUpdateField(t,r,o,"boolean"===n?"string":n,i);if("value"===r){var p=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));p.length>0&&e.props.onChangeCascadingValue(p)}})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return n().createElement("div",{className:"filter-field-row"},n().createElement("div",{className:"filter-field-attribute"},n().createElement(c.Z,{dropUp:this.props.dropUp,valueField:"id",textField:"name",fieldOptions:this.props.attributes.map((function(e){return{id:e.attribute,name:e.label}})),placeholder:(0,d.S$)(this.context.messages,"queryform.attributefilter.combo_placeholder"),fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),n().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),n().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?n().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(n().Component);w(F,"propTypes",{dropUp:l().bool,attributes:l().array,filterField:l().object,operatorOptions:l().array,onUpdateField:l().func,maxFeaturesWPS:l().number,toggleMenu:l().func,deleteButton:l().node,onUpdateExceptionField:l().func,onChangeCascadingValue:l().func}),w(F,"contextTypes",{messages:l().object}),w(F,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const E=F;var P=r(730381),j=r.n(P),T=r(93054),x=r.n(T),S=r(143146),C=r(805346),R=r(55237),_=r(200020);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function N(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}x()(j());var Z=(0,S.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(_.DateTimePicker),q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,r,o,i,l=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(o);if(i){var r=D(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return N(this,e)});function a(){var e;U(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return L(B(e=l.call.apply(l,[this].concat(r))),"updateValueState",(function(t){t.startDate&&t.endDate&&t.startDate>t.endDate?e.props.onUpdateExceptionField(e.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,r=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?n().createElement("div",{className:"query-field"},n().createElement("div",{className:"query-field-value date-filter-left"},this.props.showLabels&&n().createElement(C.Z,{msgId:"queryform.from"}),n().createElement(Z,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,R.V$)(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:r})}})),n().createElement("div",{className:"query-field-value date-filter-right"},this.props.showLabels&&n().createElement(C.Z,{msgId:"queryform.to"}),n().createElement(Z,{type:this.props.attType,defaultValue:r,value:r,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,R.V$)(this.context.locale,this.props.attType),onChange:function(r){return e.updateValueState({startDate:t,endDate:r})}}))):n().createElement("div",null,this.props.showLabels&&n().createElement(C.Z,{msgId:"queryform.date"}),n().createElement(Z,{type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:(0,R.V$)(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}}))}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(n().Component);L(q,"propTypes",{attType:l().string,dateEnabled:l().bool,fieldName:l().string,fieldRowId:l().number,fieldValue:l().object,fieldException:l().string,operator:l().string,onUpdateField:l().func,onUpdateExceptionField:l().func,showLabels:l().bool,timeEnabled:l().bool}),L(q,"contextTypes",{locale:l().string}),L(q,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1});const M=q;var A=r(509886);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},H.apply(this,arguments)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function J(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.n(A)()();var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(p,e);var t,r,o,i,l=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(o);if(i){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return J(this,e)});function p(){var e;K(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ee(Q(e=l.call.apply(l,[this].concat(r))),"renderPicker",(function(t){var r=e.props.label?n().createElement("label",null,e.props.label):null,o=e.props.lowLabel?n().createElement("label",null,e.props.lowLabel):null,i=e.props.upLabel?n().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?n().createElement("div",{className:"query-field"},n().createElement("div",{className:"query-field-value"},o,n().createElement(_.NumberPicker,H({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),n().createElement("div",{className:"query-field-value"},i,n().createElement(_.NumberPicker,H({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):n().createElement("div",null,r,n().createElement(_.NumberPicker,H({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),ee(Q(e),"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,d.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,d.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=p,(r=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=W(W({},this.props.style),{},{borderColor:"#FF0000"})),n().createElement(u.Z,{placement:"bottom",overlay:this.props.fieldException?n().createElement(a.Tooltip,{id:this.props.fieldRowId+"_tooltip"},n().createElement("strong",null,this.props.fieldException)):n().createElement("noscript",null)},this.renderPicker(e))}}])&&z(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(n().Component);ee(te,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().oneOfType([l().number,l().object]),fieldException:l().oneOfType([l().object,l().bool,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,isRequired:l().bool,label:l().string,lowLabel:l().string,upLabel:l().string,options:l().shape({format:l().string,min:l().number,max:l().number,step:l().number,precision:l().number}),style:l().object}),ee(te,"contextTypes",{messages:l().object}),ee(te,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const re=te;var oe=r(615402),ne=r(47805);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function ue(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(p,e);var t,r,o,i,l=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(o);if(i){var r=se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ue(this,e)});function p(){var e;le(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return fe(ce(e=l.call.apply(l,[this].concat(r))),"renderField",(function(){var t,r=(0,d.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),o=n().createElement(a.Tooltip,{id:"textField-tooltip"+e.props.fieldRowId},n().createElement(oe.Z,{msgId:null!==(t=e.props.tooltipMessage)&&void 0!==t?t:"queryform.attributefilter.tooltipTextField"})),i=n().createElement(a.FormControl,{disabled:"isNull"===e.props.operator,placeholder:r,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,ne.isLikeOrIlike)(e.props.operator)?n().createElement(u.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:o},i):i})),fe(ce(e),"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return t=p,(r=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"textField"},e,this.renderField())}}])&&ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(n().Component);fe(de,"propTypes",{operator:l().string,fieldName:l().string,fieldRowId:l().number,attType:l().string,fieldValue:l().string,label:l().string,tooltipMessage:l().string,fieldException:l().oneOfType([l().object,l().string]),onUpdateField:l().func,onUpdateExceptionField:l().func,style:l().object}),fe(de,"contextTypes",{messages:l().object}),fe(de,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const be=de;var ye=r(848384),me=r(749902);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}function we(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fe(e)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(a,e);var t,r,o,i,l=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(o);if(i){var r=Ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return we(this,e)});function a(){var e;ge(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Pe(Fe(e=l.call.apply(l,[this].concat(r))),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),Pe(Fe(e),"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),o=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,n=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return f()({},e.props.pagination,{paginated:0!==t.length&&!(o&&1===t.length),firstPage:o,lastPage:n,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),Pe(Fe(e),"getTooltip",(function(){return f()({},e.props.tooltip,{enabled:(0,ne.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:n().createElement(oe.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),Pe(Fe(e),"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return n().createElement(me.Z,{dropUp:e.props.dropUp,busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),Pe(Fe(e),"handleSelect",(function(){e.selected=!0})),Pe(Fe(e),"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),Pe(Fe(e),"handleFocus",(function(t){e.loadWithoutfilter(t)})),Pe(Fe(e),"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),Pe(Fe(e),"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?n().createElement("label",null,this.props.label):n().createElement("span",null);return n().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&ve(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(n().Component);Pe(je,"propTypes",{dropUp:l().bool,disabled:l().bool,filterField:l().object,label:l().string,itemComponent:l().oneOfType([l().object,l().func]),maxFeaturesWPS:l().number,onUpdateField:l().func,pagination:l().object,textField:l().string,tooltip:l().object,toggleMenu:l().func,valueField:l().string}),Pe(je,"contextTypes",{messages:l().object}),Pe(je,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:ye.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const Te=je;var xe=r(112346),Se=r(313311),Ce=r.n(Se);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function Ve(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(p,e);var t,r,o,i,l=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(o);if(i){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ve(this,e)});function p(){var e;_e(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Be(ke(e=l.call.apply(l,[this].concat(r))),"state",{open:!1}),Be(ke(e),"getSelected",(function(){return Ce()(e.props.options,e.getFindFunciton())})),Be(ke(e),"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),Be(ke(e),"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),Be(ke(e),"getFindFunciton",(function(){return e.props.valueField?Be({},e.props.valueField,e.props.value):e.props.value})),Be(ke(e),"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),Be(ke(e),"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),Be(ke(e),"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return t=p,(r=[{key:"render",value:function(){var e=this;return n().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},n().createElement("span",{onClick:this.handleClick},n().createElement("strong",null,this.renderLabel(this.getSelected())),n().createElement(a.Glyphicon,{glyph:"chevron-down"})),this.state.open&&n().createElement("div",{className:"m-options"},n().createElement("ul",null,this.props.options.map((function(t,r){return n().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&Ie(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(n().Component);Be(De,"propTypes",{options:l().array,value:l().any,onSelect:l().func,valueField:l().string,labelField:l().string,labelRenderer:l().any}),Be(De,"defaultProps",{onSelect:function(){},options:[]});const Le=De;var Ze=r(838167),qe=r(282467);function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Ae(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ge(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function Ke(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ze(e)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(s,e);var t,r,o,i,l=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ye(o);if(i){var r=Ye(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ke(this,e)});function s(){var e;$e(this,s);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Je(ze(e=l.call.apply(l,[this].concat(r))),"getComboValues",(function(t,r){if(t&&t.dependson){var o=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(o&&o.value){var n=r.filter((function(e){return e.attribute===o.attribute}))[0],i=n.values.filter((function(e){return e[n.valueId]===o.value}))[0][t.dependson.from],l=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?l.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),Je(ze(e),"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;case"array":return e.props.arrayOperators;default:return e.props.defaultOperators}})),Je(ze(e),"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],o=e.getComboValues(r,e.props.attributes),i=t.exception?n().createElement(u.Z,{placement:"bottom",overlay:n().createElement(a.Tooltip,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(Ze.ZP.Message,{msgId:t.exception||""})))},n().createElement(qe.Z,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.Glyphicon,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):n().createElement(u.Z,{placement:"top",overlay:n().createElement(a.Tooltip,{id:t.rowId+"tooltip"},n().createElement("strong",null,n().createElement(Ze.ZP.Message,{msgId:"queryform.attributefilter.delete"})))},n().createElement(qe.Z,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},n().createElement(a.Glyphicon,{glyph:e.props.removeButtonIcon})));return n().createElement(E,{dropUp:e.props.dropUp,key:t.rowId,deleteButton:i,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},n().createElement(c.Z,{dropUp:e.props.dropUp,attType:"list",valueField:"id",textField:"name",fieldOptions:o||[],comboFilter:"contains"}),n().createElement(M,{attType:"date",dateEnabled:!0,operator:t.operator}),n().createElement(M,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator}),n().createElement(be,{attType:"array",operator:t.operator}),n().createElement(M,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),n().createElement(re,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?n().createElement(Te,{dropUp:e.props.dropUp,filterField:t,attType:"string"}):n().createElement(be,{tooltipMessage:e.props.textFieldTooltipMessageId,operator:t.operator,attType:"string"}),n().createElement(c.Z,{dropUp:e.props.dropUp,fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),Je(ze(e),"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),n().createElement(p.Z,{buttons:r,btnDefaultProps:{}})})),Je(ze(e),"renderGroupHeader",(function(t){return n().createElement("div",{className:"logicHeader filter-logic-header"},n().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},n().createElement("span",{className:"group_label_a"},n().createElement(Ze.ZP.Message,{msgId:"queryform.attributefilter.group_label_a"}))," ",n().createElement(Le,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return n().createElement(Ze.ZP.Message,{msgId:t})}})," ",n().createElement("span",{className:"group_label_b"},n().createElement(Ze.ZP.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),Je(ze(e),"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),o=e.props.groupFields.filter((function(e){return e.groupId===t.id})),i=[].concat(Ae(r),Ae(o)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return n().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),n().createElement("div",{className:"query-content"},i))})),Je(ze(e),"renderHeader",(function(){return(0,d.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),Je(ze(e),"updateLogicCombo",(function(t,r,o){var n=e.props.logicComboOptions.filter((function(t){return o===(0,d.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,n)})),e}return t=s,(r=[{key:"render",value:function(){var e=this;return this.props.withContainer?n().createElement(xe.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):n().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&We(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(n().Component);Je(Qe,"propTypes",{dropUp:l().bool,groupLevels:l().number,withContainer:l().bool,autocompleteEnabled:l().bool,maxFeaturesWPS:l().number,groupFields:l().array,filterFields:l().array,attributes:l().array,fieldWidth:l().string,removeButtonIcon:l().string,addButtonIcon:l().string,removeGroupButtonIcon:l().string,buttonStyle:l().string,logicComboOptions:l().array,attributePanelExpanded:l().bool,actions:l().object,arrayOperators:l().array,listOperators:l().array,stringOperators:l().array,booleanOperators:l().array,defaultOperators:l().array,comboOptions:l().object,textFieldTooltipMessageId:l().string}),Je(Qe,"contextTypes",{messages:l().object}),Je(Qe,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","<>","like","ilike","isNull"],arrayOperators:["contains"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><"],textFieldTooltipMessageId:"queryform.attributefilter.tooltipTextField"});const Xe=Qe},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var o=r(124852),n=r.n(o),i=r(496259),l=r(532425);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(e){var t=e.width,r=e.height,o=e.className,a=void 0===o?"loader-container":o,u=e.contentStyle,c=void 0===u?{}:u;return n().createElement("div",{className:a},n().createElement(i.Z,null,(function(e){var o=e.width,i=void 0===o?200:o,a=e.height,u=void 0===a?200:a,s=t||(u>0?Math.min(i,u):i),f=r||(u>0?Math.min(i,u):i),d=Math.min(s,f);return n().createElement(l.Z,{size:d,style:p({padding:d/10,margin:"auto",display:"flex"},c)})})))}},143146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var o=r(867076),n=r(747037),i=r.n(n),l=r(647960),a=r.n(l),p=r(730381),u=r.n(p),c=r(55237);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,r=void 0===t?"type":t,n=e.dateProp,l=void 0===n?"date":n,p=e.setDateProp,f=void 0===p?"onSetDate":p;return(0,o.compose)((0,o.withPropsOnChange)([l],(function(e){var t,o=e[l],n=e[r],p=e.useUTCOffset,f=void 0===p||p,d=o,b="1970-01-01",y="00:00:00";!a()(o)&&i()(o)&&("time"===n&&(d=new Date("".concat(b,"T").concat(o))),"date"===n&&(-1!==o.indexOf("Z")&&(d=o.substr(0,o.length-1)),d=new Date("".concat(d,"T").concat(y,"Z"))),"date-time"===n&&(d=new Date(o)));var m=d;if(d){switch(n){case"time":y=(0,c.kN)(d);break;case"date":b=(0,c.oD)(d);break;default:y=(0,c.kN)(d),b=(0,c.oD)(d)}(m=new Date("".concat(b,"T").concat(y,"Z"))).setUTCMilliseconds(d.getUTCMilliseconds());var h=f?(0,c.$4)(m):0;m=new Date(m.getTime()+h)}return s(t={},l,m),s(t,"defaultCurrentDate","date-time"===n?u()().startOf("day").toDate():void 0),t})),(0,o.withHandlers)(s({},f,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[f],o=e[r],n=e.useUTCOffset,i=void 0===n||n;return function(e,r){if(e){var n=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),l=i?(0,c.$4)(e):0,a=new Date(n.getTime()-l);switch(o){case"time":a="".concat((0,c.kN)(a),"Z");break;case"date":a="".concat((0,c.oD)(a),"Z")}t(a,r)}else t(null)}}))))}}}]);