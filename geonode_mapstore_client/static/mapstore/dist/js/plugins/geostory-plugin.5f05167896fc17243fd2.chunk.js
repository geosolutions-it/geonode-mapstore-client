(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2933,717,3546,6755],{62770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(67294),o=n.n(r),i=n(45697),a=n.n(i),c=n(41609),l=n.n(c),s=n(81763),u=n.n(s),p=n(90079);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(i){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),h(g(t=a.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),h(g(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),h(g(t),"useLegendOptions",(function(){return!l()(t.props.node.legendOptions)&&u()(t.props.node.legendOptions.legendHeight)&&u()(t.props.node.legendOptions.legendWidth)})),h(g(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=o().createRef(),t}return t=c,n=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(p.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],n&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o().Component);h(O,"propTypes",{node:a().object,legendContainerStyle:a().object,legendStyle:a().object,showOnlyIfVisible:a().bool,currentZoomLvl:a().number,scales:a().array,WMSLegendOptions:a().string,scaleDependent:a().bool,language:a().string,legendWidth:a().number,legendHeight:a().number}),h(O,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const w=O},90079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(8575),o=n(1469),i=n.n(o),a=n(27418),c=n.n(a),l=n(45697),s=n.n(l),u=n(67294),p=n.n(u),f=n(33044),d=n(5346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function v(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(s,e);var t,n,o,a,l=(o=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(a){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function s(){var e;m(this,s);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return w(h(e=l.call.apply(l,[this].concat(n))),"state",{error:!1}),w(h(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),w(h(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,o=t||i()(n.url)&&Math.floor(Math.random()*n.url.length),a=i()(n.url)?n.url[o]:n.url.replace(/[?].*$/g,""),l=r.parse(a),s=(0,f.clearNilValuesForParams)(n.params),u=c()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,f.addAuthenticationToSLD)(s||{},e.layer),s&&s.SLD_BODY?{SLD_BODY:s.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,f.addAuthenticationParameter)(a,u),r.format({host:l.host,protocol:l.protocol,pathname:l.pathname,query:u})}return""})),w(h(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=s,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?p().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):p().createElement(d.Z,{msgId:"layerProperties.legenderror"})}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(p().Component);w(E,"propTypes",{layer:s().object,legendHeight:s().number,legendWidth:s().number,legendOptions:s().string,style:s().object,currentZoomLvl:s().number,scales:s().array,scaleDependent:s().bool,language:s().string}),w(E,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const P=E},42872:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var r=n(67294),o=n.n(r),i=n(45697),a=n.n(i),c=n(88798),l=n(15402),s=n(5346),u=n(80681);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(i){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function c(){var e;f(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(b(e=a.call.apply(a,[this].concat(n))),"onTouchStart",(function(t){var n=t.touches[0];e.startX=n.pageX,e.startY=n.pageY,e.setState({scrolling:!1})})),v(b(e),"onTouchMove",(function(t){var n=t.touches[0],r=t.currentTarget;if(e.state.scrolling)t.stopPropagation();else if(Math.abs(e.startY-n.pageY)>Math.abs(e.startX-n.pageX))t.stopPropagation();else{var o=e.startX<n.pageX?"left":"right";(r&&"left"===o&&r.clientWidth<r.scrollWidth&&0!==r.scrollLeft||r&&"right"===o&&r.clientWidth+r.scrollLeft!==r.scrollWidth)&&(e.setState({scrolling:!0}),t.stopPropagation())}})),v(b(e),"onTouchEnd",(function(){e.setState({scrolling:!1})})),v(b(e),"renderPage",(function(){var t="function"==typeof e.props.viewers?e.props.viewers:e.props.viewers[e.props.format];return t?o().createElement(t,{response:e.props.response,layer:e.props.layer}):null})),e}return t=c,(n=[{key:"render",value:function(){return o().createElement("div",{style:{width:"100%",height:"100%",overflowX:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o().Component);v(h,"propTypes",{format:a().string,viewers:a().oneOfType([a().func,a().object]),response:a().oneOfType([a().string,a().object,a().node]),layer:a().object});var O=n(41609),w=n.n(O),E=n(31351),P=n.n(E),j=n(10240),S=n.n(j),C=n(2870);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function D(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(p,e);var t,n,r,i,a=(r=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(i){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function p(){var e;I(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return N(M(e=a.call.apply(a,[this].concat(n))),"getResponseProperties",(function(){var t=e.props.validator(e.props.format),n=e.props.responses.map((function(e){return void 0===e?{}:e})),r=e.props.renderValidOnly?t.getValidResponses(n):n,o=t.getNoValidResponses(e.props.responses),i=e.props.requests.length===o.length;return{validResponses:r,currResponse:e.getCurrentResponse(r[e.props.index]),emptyResponses:i,invalidResponses:o}})),N(M(e),"getCurrentResponse",(function(t){return e.props.validator(e.props.format).getValidResponses([t])})),N(M(e),"renderEmptyLayers",(function(){var t=e.getResponseProperties(),n=t.invalidResponses,r=t.emptyResponses;if(0===e.props.missingResponses&&r)return null;var i=0!==n.length;if(e.props.renderValidOnly||(i=i&&0===e.props.missingResponses),i){var a=n.map((function(e){return e.layerMetadata.title}));return e.props.showEmptyMessageGFI?o().createElement(u.Alert,{bsStyle:"info"},o().createElement(s.Z,{msgId:"noInfoForLayers"}),o().createElement("b",null,a.join(", "))):null}return null})),N(M(e),"renderPage",(function(t){var n=e.props.viewers[e.props.format];return n?o().createElement(n,{response:t}):null})),N(M(e),"renderEmptyPages",(function(){var t=e.getResponseProperties().emptyResponses;return 0===e.props.missingResponses&&t?o().createElement(u.Alert,{bsStyle:"danger"},o().createElement("h4",null,o().createElement(l.Z,{msgId:"noFeatureInfo"}))):null})),N(M(e),"renderPages",(function(){var t=e.getResponseProperties().validResponses;return t.map((function(n,r){var i,a,l=n.response,s=n.layerMetadata,p=(0,C.Q)(n,e.props),f=e.props.header;null!=s&&null!==(i=s.viewer)&&void 0!==i&&i.type&&(a=(0,c.gA)(s.viewer.type));var d=t.filter((function(e){return!S()(e.response,"no features were found")})).length;return o().createElement(u.Panel,{eventKey:r,key:r,collapsible:e.props.collapsible,header:f?o().createElement("span",null,o().createElement(f,k({size:d},e.props.headerOptions,s,{index:e.props.index,onNext:function(){return e.props.onNext()},onPrevious:function(){return e.props.onPrevious()}}))):null,style:e.props.style},o().createElement(h,{response:l,format:p,viewers:a||e.props.viewers,layer:s}))}))})),N(M(e),"containerStyle",(function(t){return w()(t)&&e.props.isMobile?{height:"100%"}:{display:w()(t)?"none":"block"}})),e}return t=p,(n=[{key:"shouldComponentUpdate",value:function(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}},{key:"render",value:function(){var e=this,t=this.props.container,n=this.getResponseProperties(),r=n.currResponse,i=n.emptyResponses,a=[this.renderEmptyLayers(),o().createElement(t,k({},this.props.containerProps,{onChangeIndex:function(t){e.props.setIndex(t)},ref:"container",index:this.props.index||0,key:"swiper",style:this.containerStyle(r),className:"swipeable-view"}),this.renderPages())];return a=this.props.isMobile?a:P()(a),o().createElement("div",{className:"mapstore-identify-viewer"},i?this.renderEmptyPages():a.map((function(e){return e})))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(o().Component);N(L,"propTypes",{format:a().string,collapsible:a().bool,requests:a().array,responses:a().array,missingResponses:a().number,container:a().oneOfType([a().object,a().func]),header:a().oneOfType([a().object,a().func]),headerOptions:a().object,validator:a().func,viewers:a().object,style:a().object,containerProps:a().object,index:a().number,onNext:a().func,onPrevious:a().func,onUpdateIndex:a().func,setIndex:a().func,showEmptyMessageGFI:a().bool,renderValidOnly:a().bool,loaded:a().bool,isMobile:a().bool}),N(L,"defaultProps",{format:(0,c.wR)(),responses:[],requests:[],missingResponses:0,collapsible:!1,headerOptions:{},container:u.Accordion,validator:c.Te,viewers:(0,c.Qm)(),style:{position:"relative",marginBottom:0},containerProps:{},showEmptyMessageGFI:!0,renderValidOnly:!1,onNext:function(){},onPrevious:function(){},setIndex:function(){},isMobile:!1});const Z=L},11196:(e,t,n)=>{"use strict";n.d(t,{mI:()=>i,Yy:()=>a});var r=n(18093),o=n(88798),i=(0,r.withHandlers)({onNext:function(e){var t=e.index,n=void 0===t?0:t,r=e.setIndex,o=void 0===r?function(){}:r,i=e.validResponses,a=void 0===i?[]:i;return function(){o(Math.min(a.length-1,n+1))}},onPrevious:function(e){var t=e.index,n=e.setIndex,r=void 0===n?function(){}:n;return function(){r(Math.max(0,t-1))}}}),a=(0,r.defaultProps)({format:(0,o.wR)(),validator:o.Te})},81593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(67294),o=n(45338);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=function(e){var t=e.direction,n=void 0===t?"horizontal":t,i=e.deltaScroll,u=e.width,p=e.height,f=e.transition,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],y=(0,r.useState)(0),m=s(y,2),b=m[0],g=m[1],v=(0,r.useState)(0),h=s(v,2),O=h[0],w=h[1],E=(0,r.useRef)({x:0,y:0}),P=(0,r.useState)(!1),j=s(P,2),S=j[0],C=j[1],T=(0,r.useState)("start"),k=s(T,2),I=k[0],x=k[1],A=(0,r.useState)(),D=s(A,2),M=D[0],R=D[1],N=(0,r.useRef)(),L=(0,r.useRef)({});function Z(e,t){R("move:start");var r=N.current,o=r.parentNode,i=r.getBoundingClientRect(),a=o.getBoundingClientRect();if("horizontal"===n){var c=e+i.width;e<0&&c>a.width?(g(e),E.current.x=e,x("center")):e>=0?(g(0),E.current.x=0,x("start")):c<=a.width&&(g(a.width-i.width),E.current.x=a.width-i.width,x("end"))}if("vertical"===n){var l=t+i.height;t<0&&l>a.height?(w(t),E.current.y=t,x("center")):t>=0?(w(0),E.current.y=0,x("start")):l<=a.height&&(w(a.height-i.height),E.current.y=a.height-i.height,x("end"))}setTimeout((function(){R("move:end")}),f)}function F(e){Z(b+e,O+e)}function _(){var e=N.current,t=e.parentNode,r=e.getBoundingClientRect(),o=t.getBoundingClientRect();return!("horizontal"===n&&o.width>=r.width||"vertical"===n&&o.height>=r.height)}(0,r.useEffect)((function(){function e(e){e.preventDefault();var t=_();return C(_()),t?Z(E.current.x-(e.deltaY>0?i:-i),E.current.y-(e.deltaY>0?i:-i)):null}var t=_();C(t);var n=N.current.parentNode;return t&&Z(E.current.x,E.current.y),t&&n&&n.addEventListener&&n.addEventListener("wheel",e),function(){t&&n&&n.removeEventListener&&n.removeEventListener("wheel",e)}}),[u,p].concat(l(d)));var B=(0,o.QS)({onSwiping:function(e){e.event.stopPropagation();var t=_();return C(_()),t?Z(b-e.deltaX*e.velocity,O-e.deltaY*e.velocity):null},trackTouch:!0,trackMouse:!0});function W(e,t){L.current=a(a({},L.current),{},c({},e,t))}function U(e){var t=L.current[e];if(t){var r=N.current,o=(r&&r.parentNode).getBoundingClientRect(),i=t.getBoundingClientRect();if("horizontal"===n){var a=o.width,c=o.left,l=i.width,s=i.left,u=c+a,p=s+l;return c<=s&&u>=s||c<=p&&u>=p}}return!1}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.margin,o=void 0===r?0:r,i=L.current[e];if(i){var a=N.current,c=a&&a.parentNode,l=c.getBoundingClientRect(),s=i.getBoundingClientRect();if("horizontal"===n){var u=l.width,p=l.left,f=s.width,d=s.left,y=p+u,m=d+f,b=p<=d&&y>=m;if(!b){var g=a.getBoundingClientRect(),v=g.left;Z(-(d-v)+o,void 0)}}}}var G=S&&("end"===I||"center"===I),V=S&&("start"===I||"center"===I);return{status:M,canSwipe:S,isStartControlActive:G,isEndControlActive:V,positionLabel:I,coordinates:{x:b,y:O},containerPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t;return a(a({},B),{},{style:a({position:"relative",overflow:"hidden",width:"100%",height:"100%"},n)})},contentPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t;return{ref:N,style:a(a(a(a({position:"absolute",display:"flex"},f&&{transition:"transform ".concat(f,"ms ease 0s")}),{},{flexDirection:"horizontal"===n?"row":"column"},S&&"horizontal"===n&&{transform:"translateX(".concat(b,"px)")}),S&&"vertical"===n&&{transform:"translateY(".concat(O,"px)")}),r)}},itemPropsHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onClick;return a({key:t,ref:function(e){return e&&W(t,e)}},n?{onClick:n,tabindex:U(t)?0:-1,onKeyDown:function(e){"Enter"===e.key&&n()}}:{tabindex:-1})},updateCoordinates:Z,moveItemInViewById:z,moveToDeltaSize:F}}},93546:(e,t,n)=>{"use strict";n.d(t,{jF:()=>He,Fc:()=>De,EC:()=>Ge,C2:()=>ze,Cw:()=>Ue,rm:()=>Ve});var r=n(14293),o=n.n(r),i=n(92742),a=n.n(i),c=n(47037),l=n.n(c),s=n(1469),u=n.n(s),p=n(84596),f=n.n(p),d=n(91175),y=n.n(d),m=n(10928),b=n.n(m),g=n(13311),v=n.n(g),h=n(13218),O=n.n(h),w=n(21915),E=n(43143),P=n(86267),j=n(33506),S=n(81763),C=n.n(S),T=n(31219),k=n(62875),I=n(15565),x=n(98185),A=n(38097),D=n.n(A),M=j.Z.markers.extra,R=M.icons[0],N=M.icons[1],L=M.size[1],Z=j.Z.getGlyphs("fontawesome"),F=function(e,t){var n=e.highlight,r=e.rotation,o=void 0===r?0:r;return n?[new T.default({image:new k.default({anchor:[.5,t],rotation:o,anchorXUnits:"fraction",anchorYUnits:"pixels",src:D(),scale:.5})})]:[]},_=function(e,t){var n,r,o=null==Z?void 0:Z[null==e||null===(n=e.style)||void 0===n?void 0:n.iconGlyph],i="FontAwesome",a=2;return null!=e&&null!==(r=e.style)&&void 0!==r&&r.iconText&&(o=e.style.iconText,i="sans-serif",a=1.6),new I.default({rotation:t,text:o,font:"14px ".concat(i),offsetY:-L*a/3,fill:new x.default({color:"#FFFFFF"})})};const B={extra:{getIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o()(e.style&&e.style.rotation)?0:e.style.rotation;return[new T.default({image:new k.default({rotation:t,anchor:[12,12],anchorXUnits:"pixels",anchorYUnits:"pixels",src:N})}),new T.default({image:new k.default({rotation:t,src:R,anchor:[M.size[0]/2,M.size[1]],anchorXUnits:"pixels",anchorYUnits:"pixels",size:M.size,offset:[M.colors.indexOf(e.style.iconColor||"blue")*M.size[0],M.shapes.indexOf(e.style.iconShape||"circle")*M.size[1]]}),text:_(e,t)})].concat(F(e.style,2*(L+15)))}},standard:{getIcon:function(e){var t=e.style,n=e.iconAnchor,r=o()(t&&t.rotation)?0:t.rotation,i=t.iconAnchor||n,a=[new T.default({image:new k.default({anchor:i||[.5,1],anchorXUnits:t.anchorXUnits||(i||0===i?"pixels":"fraction"),anchorYUnits:t.anchorYUnits||(i||0===i?"pixels":"fraction"),size:u()(t.size)?t.size:C()(t.size)?[t.size,t.size]:void 0,rotation:r,anchorOrigin:t.anchorOrigin||"top-left",src:t.iconUrl||t.symbolUrlCustomized||t.symbolUrl})})];t.shadowUrl&&(a=[new T.default({image:new k.default({anchor:[12,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:t.shadowUrl})}),a[0]]);var c=u()(t.size)?t.size[1]:C()(t.size)?t.size:0;return c=c>32?c+.75*c:L+10,a.concat(F(t,c))}},html:{getIcon:function(){return null}}};var W=n(66287),U=n(9371),z=n(20767),G=n(52043),V=n(44538),H=n(82702),q=n(75875),Y=n.n(q),Q=n(53772),K=n.n(Q),X=n(3918),$=n.n(X),J=n(51205),ee=n.n(J),te=n(27418),ne=n.n(te),re=n(61868);function oe(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=[0,153,255,1],ue=new U.default({radius:5,fill:null,stroke:new z.default({color:"red",width:1})}),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new U.default({radius:n,fill:new x.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new G.Z(y()(r)):null}})},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new U.default({radius:n,fill:new x.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new G.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:b()(r))}})},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[pe(e),fe(t)]},ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new T.default({text:new I.default({offsetY:-4*Math.sqrt(e.fontSize),textAlign:e.textAlign||"center",text:t||"",font:e.font,fill:new x.default({color:(0,E.qq)(e.stroke||e.color||"#000000",e.opacity||1)}),stroke:n?new z.default({color:[255,255,255,1],width:2}):null}),image:n?new U.default({radius:5,fill:null,stroke:new z.default({color:(0,E.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null})},me={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,radius:10},be={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ge={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,editing:{fill:1}},ve={Marker:{iconColor:"orange",iconShape:"circle",iconGlyph:"comment"},Text:{fontStyle:"normal",fontSize:"14",fontSizeUom:"px",fontFamily:"Arial",fontWeight:"normal",font:"14px Arial",textAlign:"center",color:"#000000",opacity:1},Circle:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2},Point:me,MultiPoint:me,LineString:be,MultiLineString:be,Polygon:ge,MultiPolygon:ge},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"blue",width:3,lineDash:[6]};return{stroke:new z.default(e.style?e.style.stroke||{color:e.style.color||t.color,lineDash:l()(e.style.dashArray)&&a()(e.style.dashArray).split(" ")||t.lineDash,width:e.style.weight||t.width,lineCap:e.style.lineCap||"round",lineJoin:e.style.lineJoin||"round",lineDashOffset:e.style.dashOffset||0}:ce({},t))}},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"rgba(0, 0, 255, 0.1)"};return{fill:new x.default(e.style?e.style.fill||{color:(0,E.qq)(e.style.fillColor,e.style.fillOpacity)||t.color}:ce({},t))}},we={Point:function(){return[new T.default({image:ue})]},LineString:function(e){return[new T.default(ne()({},he(e,{color:"blue",width:3})))]},MultiLineString:function(e){return[new T.default(ne()({},he(e,{color:"blue",width:3})))]},MultiPoint:function(){return[new T.default({image:ue})]},MultiPolygon:function(e){return[new T.default(ne()({},he(e),Oe(e)))]},Polygon:function(e){return[new T.default(ne()({},he(e),Oe(e)))]},GeometryCollection:function(e){return[new T.default(ne()({},he(e),Oe(e),{image:new U.default({radius:10,fill:null,stroke:new z.default({color:"magenta"})})}))]},Circle:function(){return[new T.default({stroke:new z.default({color:"red",width:2}),fill:new x.default({color:"rgba(255,0,0,0.2)"})})]},marker:function(e){return[new T.default({image:new k.default({anchor:[14,41],anchorXUnits:"pixels",anchorYUnits:"pixels",src:ee()})}),new T.default({image:new k.default({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:$()}),text:new I.default({text:e.label,scale:1.25,offsetY:8,fill:new x.default({color:"#000000"}),stroke:new z.default({color:"#FFFFFF",width:2})})})]}},Ee=function(e,t){var n=e.getGeometry().getType();return we[n](t&&t.style&&t.style[n]&&{style:ce({},t.style[n])}||t||{})};function Pe(e){if(e.style.iconUrl)return B.standard.getIcon(e);var t=e.style.iconLibrary||"extra";return B[t]?B[t].getIcon(e):null}var je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{style:ve},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=t.style[e]||t.style;if("MultiLineString"===e||"LineString"===e){var l=[new T.default({stroke:t.style.useSelectedStyle?new z.default({color:[255,255,255,1],width:c.weight+2}):null}),new T.default(c?{stroke:new z.default(c&&c.stroke?c.stroke:{color:(0,E.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:n?ue:null}:{stroke:new z.default(ve[e]&&ve[e].stroke?ve[e].stroke:{color:(0,E.qq)(t.style&&ve[e].color||"#0000FF",ve[e].opacity||1),lineDash:t.style.highlight?[10]:[0],width:ve[e].weight||1})})],s=t.style.useSelectedStyle?de({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(oe(s),l)}if(("MultiPoint"===e||"Point"===e)&&(c.iconUrl||c.iconGlyph))return n?new T.default({image:ue}):Pe({style:ce(ce({},c),{},{highlight:t.style.highlight||t.style.useSelectedStyle})});if("Circle"===e&&a){var u=[new T.default({stroke:t.style.useSelectedStyle?new z.default({color:[255,255,255,1],width:c.weight+4}):null}),new T.default({stroke:new z.default(c&&c.stroke?c.stroke:{color:t.style.useSelectedStyle?se:(0,E.qq)(t.style&&c.color||"#0000FF",c.opacity||1),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),fill:new x.default(c.fill?c.fill:{color:(0,E.qq)(t.style&&c.fillColor||"#0000FF",c.fillOpacity||.2)})}),new T.default({image:t.style.useSelectedStyle?new U.default({radius:3,fill:new x.default(c.fill?c.fill:{color:se})}):null,geometry:function(e){var t=e.getGeometry();if("Circle"===t.getType()){var n=t.getCenter();return new G.Z(n)}return null}})];return u}if("Text"===e&&c.font)return[ye(c,r[0],t.style.useSelectedStyle||t.style.highlight)];if("MultiPolygon"===e||"Polygon"===e){var p=[new T.default({stroke:t.style.useSelectedStyle?new z.default({color:[255,255,255,1],width:c.weight+2}):null}),new T.default({stroke:new z.default(c.stroke?c.stroke:{color:t.style.useSelectedStyle?se:(0,E.qq)(t.style&&c.color||"#0000FF",o()(c.opacity)?1:c.opacity),lineDash:t.style.highlight?[10]:[0],width:c.weight||1}),image:n?ue:null,fill:new x.default(c.fill?c.fill:{color:(0,E.qq)(t.style&&c.fillColor||"#0000FF",o()(c.fillOpacity)?1:c.fillOpacity)})})],f=t.style.useSelectedStyle?de({radius:c.weight,applyToPolygon:!0},{radius:c.weight,applyToPolygon:!0}):[];return[].concat(p,oe(f))}return i};function Se(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.styleName&&!e.overrideOLStyle)return function(t){if("marker"===e.styleName)switch(t.getGeometry().getType()){case"Point":case"MultiPoint":return we.marker(e)}return we[e.styleName](e)};var r,i=e.nativeStyle,a=n,c=0,l=e.style&&e.style.type||(e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:void 0);if("FeatureCollection"===l||e.features&&e.features[0]&&"FeatureCollection"===e.features[0].type)return function(n){var o=this||n;r=o.getGeometry()&&o.getGeometry().getType();var i=o&&o.getProperties();i&&i.isCircle&&(r="Circle",c=i.radius),i&&i.isText&&(r="Text",a=[i.valueText]);var l=(0,re.t8)("style.useSelectedStyle",i.canEdit,e);return je(r,l,t,a,null,c)};if(e&&e.properties&&e.properties.isText)return r="Text",a=[e.properties.valueText],je(r,e,t,a,null,c);if(e&&e.properties&&e.properties.isCircle)return r="Circle",c=e.properties.radius,je(r,e,t,a,null,c);if(!i&&e.style){if(i={stroke:new z.default(e.style.stroke?e.style.stroke:{color:(0,E.qq)(e.style&&e.style.color||"#0000FF",o()(e.style.opacity)?1:e.style.opacity),lineDash:e.style.highlight?[10]:[0],width:e.style.weight||1}),fill:new x.default(e.style.fill?e.style.fill:{color:(0,E.qq)(e.style&&e.style.fillColor||"#0000FF",o()(e.style.fillOpacity)?1:e.style.fillOpacity)})},"Point"!==l&&"MultiPoint"!==l||(i={image:new U.default(ne()({},i,{radius:e.style.radius||5}))}),e.style.iconUrl||e.style.iconGlyph){var s=Pe(e);return function(t){var n=this||t;switch(r=n.getGeometry().getType()){case"Point":case"MultiPoint":return s;default:return Ee(n,e)}}}return i=new T.default(i),"GeometryCollection"===l?i=function(o){var i,a=this||o;r=a.getGeometry().getType();var c=a.get("textGeometriesIndexes")||[],l=a.get("circles")||[],s=a.get("textValues");return"GeometryCollection"===a.getGeometry().getType()?a.getGeometry().getGeometries().reduce((function(o,a,p){if(("Point"===(r=a.getType())||"MultiPoint"===r)&&c.length&&-1!==c.indexOf(p)){var f=je("Text",e,t,[s[c.indexOf(p)]]);return f.setGeometry(a),o.concat([f])}if("Polygon"===r&&l.length&&-1!==l.indexOf(p)){var d=je("Circle",e,t,[]);return d.setGeometry(a),o.concat([d])}if("Point"===r||"MultiPoint"===r)return i=Pe({style:ce(ce({},e.style[r]),{},{highlight:e.style.highlight})}),o.concat(i.map((function(e){return e.setGeometry(a),e})));var y=je(r,e,t,n);return u()(y)?y.forEach((function(e){return e.setGeometry(a)})):y.setGeometry(a),o.concat([y])}),[]):"Point"===r||"MultiPoint"===r?(i=Pe({style:ce(ce({},e.style[r]),{},{highlight:e.style.highlight})}),t?new T.default({image:ue,geometry:a.getGeometry()}):i.map((function(e){return e.setGeometry(a.getGeometry()),e}))):je(r,e,t,n)}:("Circle"===l&&(c=e.features&&e.features.length&&e.features[0].properties&&e.features[0].properties.radius||10),je(l,e,t,n,i,c))}return i||Ee}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=new(K()),xe={white:[255,255,255,1],blue:[0,153,255,1],width:3},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,W.isCircleStyle)(e)?new U.default({stroke:t,fill:n,radius:e.radius||5}):null},De=function(e){if((0,W.isMarkerStyle)(e)){if(e.iconUrl)return B.standard.getIcon({style:e});var t=e.iconLibrary||"extra";if(B[t])return B[t].getIcon({style:e})}return null},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,W.isStrokeStyle)(e)?new z.default(e.stroke&&O()(e.stroke)?e.stroke:{color:e.highlight?xe.blue:(0,E.qq)(e.color||e.stroke||"#0000FF",o()(e.opacity)?1:e.opacity),width:o()(e.weight)?1:e.weight,lineDash:l()(e.dashArray)&&a()(e.dashArray).split(" ")||u()(e.dashArray)&&e.dashArray||[0],lineCap:e.lineCap||"round",lineJoin:e.lineJoin||"round",lineDashOffset:e.dashOffset||0}):null},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,W.isFillStyle)(e)?new x.default(e.fill&&O()(e.fill)?e.fill:{color:(0,E.qq)(e.fillColor||"#0000FF",o()(e.fillOpacity)?1:e.fillOpacity)}):null},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return(0,W.isTextStyle)(e)?new I.default({fill:n,offsetY:e.offsetY||-4*Math.sqrt(e.fontSize),rotation:e.textRotationDeg?e.textRotationDeg/180*Math.PI:0,textAlign:e.textAlign||"center",text:e.label||r&&r.properties&&r.properties.valueText||"New",font:e.font||"Arial",stroke:e.highlight?new z.default({color:[255,255,255,1],width:2}):t,image:e.highlight?new U.default({radius:5,fill:null,stroke:new z.default({color:(0,E.qq)(e.color||"#0000FF",e.opacity||1),width:e.weight||1})}):null}):null},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"green":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new U.default({radius:n,fill:new x.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return r.length>1?new G.Z(y()(r)):null}})},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,n=void 0===t?5:t,r=e.fillColor,o=void 0===r?"red":r,i=e.applyToPolygon,a=void 0!==i&&i;return new T.default({image:new U.default({radius:n,fill:new x.default({color:o})}),geometry:function(e){var t=e.getGeometry(),n=t.getType();if(!a&&"Polygon"===n)return null;var r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new G.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:b()(r))}})},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{radius:3,fillColor:"green",applyToPolygon:!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{radius:3,fillColor:"red",applyToPolygon:!0},r=[];return v()(e,(function(e){return"startPoint"===e.geometry&&e.filtering}))||r.push(Le(Te({},t))),v()(e,(function(e){return"endPoint"===e.geometry&&e.filtering}))||r.push(Ze(Te({},n))),r};(0,W.registerGeometryFunctions)("centerPoint",(function(e){var t=e.getGeometry(),n=e.getProperties().isGeodesic,r=void 0!==n&&n,o=t.getExtent(),i=r?(0,w.qg)(o):t.getCenter&&t.getCenter()||[o[2]-o[0],o[3]-o[1]];return new G.Z(i)}),"Point"),(0,W.registerGeometryFunctions)("lineToArc",(function(e){var t=e.getGeometry().getType();if("LineString"===t||"MultiPoint"===t){var n=e.getGeometry().getCoordinates();return n=(0,P.transformLineToArcs)(n.map((function(e){var t=(0,P.reproject)(e,"EPSG:3857","EPSG:4326");return[t.x,t.y]}))),new V.Z(n.map((function(e){var t=(0,P.reproject)(e,"EPSG:4326","EPSG:3857");return[t.x,t.y]})))}return e.getGeometry()}),"LineString"),(0,W.registerGeometryFunctions)("startPoint",(function(e){var t=e.getGeometry(),n="Polygon"===t.getType()?t.getCoordinates()[0]:t.getCoordinates();return n.length>1?new G.Z(y()(n)):null}),"Point"),(0,W.registerGeometryFunctions)("endPoint",(function(e){var t=e.getGeometry(),n=t.getType(),r="Polygon"===n?t.getCoordinates()[0]:t.getCoordinates();return new G.Z(r.length>3?r[r.length-("Polygon"===n?2:1)]:b()(r))}),"Point");var _e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.geometry?function(t){var n=e.geometry||"centerPoint";return W.geometryFunctions[n].func(t)}:function(e){return e.getGeometry()}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!o()(e.filtering)||e.filtering},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Be(t,e);if(r){var o=Me(t),i=Re(t),a=Ae(t,o,i);if((0,W.isMarkerStyle)(t))return De(t).map((function(e){return e.setGeometry(_e(t)),e}));if((0,W.isSymbolStyle)(t))return B.standard.getIcon({style:t}).map((function(e){return e.setGeometry(_e(t)),e}));var c=Ne(t,o,i,e),l=t.zIndex,s=new T.default({geometry:_e(t),image:a,text:c,stroke:!c&&!a&&o||null,fill:!c&&!a&&i||null,zIndex:l});return[s].concat(e&&e.properties&&e.properties.canEdit&&!e.properties.isCircle?Fe(n):[])}return new T.default({})},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},t=e.style;if(t){var n=u()(t)?t:f()(t);return n.reduce((function(t,r){return t.concat(We(e,r,n))}),[])}return[]},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.style&&e.style.url)return Y().get(e.style.url).then((function(t){return(0,W.getStyleParser)(e.style.format).readStyle(t.data).then((function(e){return Ie.writeStyle(e)}))}));if(e.style&&"geostyler"===e.style.format)return Ie.writeStyle(e.style.styleObj);var r=Se(e,t,n);return e.asPromise?new H.Promise((function(e){e(r)})):r},Ge=Pe,Ve=de,He=ve},71335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(67294),o=n.n(r),i=n(45697),a=n.n(i),c=n(5346),l=n(13718),s=n(14068);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={FORMAT:o().createElement(c.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(c.Z,{msgId:"map.errorSize"})},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,i,a=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(i){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(m(e=a.call.apply(a,[this].concat(n))),"state",{}),g(m(e),"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),g(m(e),"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result,r.size)},o.readAsDataURL(r)}return t(null)})),g(m(e),"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),g(m(e),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))})),g(m(e),"processUpdateThumbnail",(function(t,n,r){var o=e.generateUUID(),i="THUMBNAIL";!e.props.map||r||!e.props.map.thumbnail||e.refs.imgThumbnail||n||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!r&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&n&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id)),e.props.map.newThumbnail&&r&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id)),e.props.map.newThumbnail&&!r&&e.refs.imgThumbnail&&e.props.onSaveAll(t,n,o,r,i,e.props.map.id),e.props.map.newThumbnail||r||e.refs.imgThumbnail||(e.props.map.thumbnail&&n&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(t,n,o,r,i,e.props.map.id))})),g(m(e),"updateThumbnail",(function(t,n){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(r){return e.processUpdateThumbnail(t,n,r),r}))})),g(m(e),"deleteThumbnail",(function(t,n){if(t&&-1!==t.indexOf("geostore")){var r=(0,l.C)(t);r&&e.props.onDeleteThumbnail(r,n)}})),e}return t=u,(n=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(c.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return o().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},v[e])}))):null}},{key:"render",value:function(){var e=this;return o().createElement(s.Z,{ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&o().createElement("label",{className:"control-label"},o().createElement(c.Z,{msgId:"map.thumbnail"})),:!0,message:o().createElement(o().Fragment,null,this.props.message,o().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:function(t,n){var r;e.props.onError([],e.props.map.id),e.files=n,e.props.onUpdate(t,null==n||null===(r=n[0])||void 0===r?void 0:r.preview)},onError:function(t,n){e.props.onError(t,e.props.map.id),e.files=n,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)}})}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(o().Component);g(h,"propTypes",{glyphiconRemove:a().string,style:a().object,thumbnailErrors:a().array,loading:a().bool,withLabel:a().bool,map:a().object,maxFileSize:a().number,onDrop:a().func,onError:a().func,onUpdate:a().func,onSaveAll:a().func,onCreateThumbnail:a().func,onDeleteThumbnail:a().func,onRemoveThumbnail:a().func,message:a().oneOfType([a().string,a().element]),suggestion:a().oneOfType([a().string,a().element])}),g(h,"contextTypes",{messages:a().object}),g(h,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:o().createElement(c.Z,{msgId:"map.message"}),suggestion:o().createElement(c.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[]});const O=h},7472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(27418),o=n.n(r),i=n(45697),a=n.n(i),c=n(67294),l=n.n(c),s=n(85294),u=n.n(s),p=n(72986),f=n.n(p),d=n(5346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(i){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function c(){var e;g(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P(w(e=a.call.apply(a,[this].concat(n))),"renderLoading",(function(){return e.props.maskLoading?l().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},l().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},l().createElement(d.Z,{msgId:"loading"}),l().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),P(w(e),"renderRole",(function(t){return l().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),P(w(e),"hasRole",(function(t){return l().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),P(w(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=l().createElement("div",{id:this.props.id,style:b({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},l().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),l().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?l().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):l().createElement("span",null)),n=this.props.draggable?l().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?l().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(l().Component);P(j,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),P(j,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const S=j},87320:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(67294),o=n.n(r),i=n(45697),a=n.n(i),c=n(88798),l=n(43129),s=n(80681),u=n(52595);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t,n,i=e.text,a=e.placement,c=e.bsStyle,l=e.left,f=e.top,d=e.title,y=e.glyph,m=e.id,b=(0,r.useRef)(),g=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=g[0],h=g[1];return o().createElement("span",{className:"mapstore-info-popover",onMouseLeave:function(){return h(!1)}},o().createElement(s.Glyphicon,{onMouseEnter:function(){h(!0)},ref:function(e){b.current=e},className:"text-".concat(c),glyph:y}),o().createElement(u.Z,{placement:a,show:v,target:function(){return b.current}},o().createElement(s.Popover,{id:m,placement:a,positionLeft:l,positionTop:f,title:d},o().createElement("div",{style:{display:"flex"}},i))))};f.propTypes={id:a().string,title:a().string,text:a().string,glyph:a().string,bsStyle:a().string,placement:a().string,left:a().number,top:a().number,trigger:a().oneOfType([a().array,a().bool])},f.defaultProps={id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info"};const d=f;var y=n(15402);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=e.id,n=e.label,r=e.infoFormat,i=e.availableInfoFormat,a=e.popoverMessage,c=e.disabled,u=e.onInfoFormatChange,p=e.selectProps,f=Object.keys(i).reduce((function(e,t){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return e===i[t]}))?e:g(g({},e),{},v({},t,i[t]))}),{}),b=Object.keys(f).map((function(e){return{value:f[e],label:e}})),h=o().createElement(o().Fragment,null,"  ",a&&o().createElement(d,{text:o().createElement(y.Z,{msgId:a})}),o().createElement(l.ZP,m({},p,{id:t,value:r,clearable:!1,disabled:c,options:b,onChange:function(e){return u(null==e?void 0:e.value)}})));return n?o().createElement(s.FormGroup,{bsSize:"small"},o().createElement(s.ControlLabel,null,n),h):h}h.propTypes={id:a().string,label:a().oneOfType([a().func,a().string,a().object]),availableInfoFormat:a().object,infoFormat:a().string,popoverMessage:a().string,onInfoFormatChange:a().func,disabled:a().bool,selectProps:a().object},h.defaultProps={id:"mapstore-feature-format-selector",availableInfoFormat:(0,c.eq)(),infoFormat:(0,c.wR)(),popoverMessage:"",onInfoFormatChange:function(){},selectProps:{}};const O=h},32425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(45697),o=n.n(r),i=n(67294),a=n.n(i);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:l({width:t,height:t,overflow:"hidden"},r)},!i&&a().createElement("div",{className:"mapstore-".concat(u(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const f=p},82110:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(67294),o=n.n(r),i=n(96259),a=n(32425);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(e){var t=e.width,n=e.height,r=e.className,c=void 0===r?"loader-container":r,s=e.contentStyle,u=void 0===s?{}:s;return o().createElement("div",{className:c},o().createElement(i.Z,null,(function(e){var r=e.width,i=void 0===r?200:r,c=e.height,s=void 0===c?200:c,p=t||(s>0?Math.min(i,s):i),f=n||(s>0?Math.min(i,s):i),d=Math.min(p,f);return o().createElement(a.Z,{size:d,style:l({padding:d/10,margin:"auto",display:"flex"},u)})})))}},50966:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(61365),o=n(80681);const i=(0,r.Z)(o.OverlayTrigger)},1036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18446),o=n.n(r);const i=(0,n(18093).shouldUpdate)((function(e,t){return!o()(e.start,t.start)||e.disabled!==t.disabled}))(n(85552))},14068:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(67294),o=n.n(r),i=n(55033),a=n.n(i),c=n(32425),l=n(83139),s=n(80717);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const y=(0,r.forwardRef)((function(e,t){var n,i,d=e.className,y=void 0===d?"ms-thumbnail":d,m=e.label,b=e.loading,g=e.message,v=e.error,h=e.thumbnail,O=e.removeGlyph,w=void 0===O?"trash":O,E=e.removeTooltipId,P=void 0===E?"removeThumbnail":E,j=e.style,S=void 0===j?{}:j,C=e.maxFileSize,T=void 0===C?5e5:C,k=e.supportedImageTypes,I=void 0===k?["image/png","image/jpeg","image/jpg"]:k,x=e.thumbnailOptions,A=e.dropZoneProps,D=void 0===A?{className:"ms-thumbnail-dropzone",activeClassName:"ms-thumbnail-dropzone-active",rejectClassName:"ms-thumbnail-dropzone-reject"}:A,M=e.onUpdate,R=void 0===M?function(){}:M,N=e.onError,L=void 0===N?function(){}:N,Z=e.onRemove,F=e.toolbarButtons,_=(0,r.useRef)(),B=(n=(0,r.useState)(),i=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,i)||f(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),W=B[0],U=B[1];if((0,r.useEffect)((function(){return _.current=!0,function(){_.current=!1}}),[]),b||W)return o().createElement("div",{className:"dropzone-thumbnail-container".concat(y?" ".concat(y):""," ms-loading")},o().createElement(c.Z,{size:70}));var z=o().createElement(s.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:F||[{glyph:w,visible:!(!Z||!h),tooltipId:P,onClick:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),null==Z||Z()}}]});return o().createElement("div",{className:"dropzone-thumbnail-container".concat(y?" ".concat(y):""),style:S},m,o().createElement(a(),u({},D,{multiple:!1,onDrop:function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.type,r=-1!==I.indexOf(n);U(!0),function(e,t){return new Promise((function(n){var r=e;if(null!=r&&r[0]){var o=r[0],i=new FileReader;return i.onload=function(e){return n(t?(0,l.Xq)(e.target.result,t).then((function(e){return{data:e,size:e.length}})):{data:e.target.result,size:o.size})},i.readAsDataURL(o)}return n({data:null})}))}(e,x).then((function(t){var n=t.data,o=t.size;return _.current?(U(!1),r&&n&&o<T?R(n,e):L([].concat(p(r?[]:["FORMAT"]),p(n&&o>=T?["SIZE"]:[])),e)):null})).catch((function(e){return _.current?(U(!1),L(e)):null}))}}),h?o().createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},o().createElement("div",{ref:t,style:{position:"relative",width:"100%",height:"100%",backgroundImage:"url(".concat(h,")"),backgroundSize:null!=x&&x.contain?"contain":"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),o().createElement("div",{className:"dropzone-content-image-added"},g),z):o().createElement("div",{className:"dropzone-content-image"},g,z,v&&o().createElement("div",{className:"dropzone-errors"},v))))}))},61365:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(67294),o=n.n(r),i=n(63202);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const c=function(e){return function(t){return o().createElement(e,a({},t,{container:document.querySelector("."+(i.ZP.getConfigProp("themePrefix")||"ms2")+" > div")||document.body}))}}},12610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294),o=n.n(r),i=n(18093),a=n(57557),c=n.n(a),l=n(15135);const s=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,n=e.noTooltipWhenDisabled,r=void 0!==n&&n;return!(r&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,c()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},73014:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294),o=n.n(r),i=n(18093),a=n(82110);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var l=function(e){var t=e.loading,n=e.isLoading;return t||n&&("function"==typeof n?n():!0===n)};const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Z;return(0,i.branch)(e,(function(){return function(e){var r=e.loaderProps;return o().createElement(n,c({},t,r))}}))}},5993:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(45697),o=n.n(r),i=n(84596),a=n.n(i),c=n(18093),l=n(86638),s=["locale"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=function(e){return(0,c.compose)((0,c.getContext)({locale:o().string}),(0,c.mapProps)((function(t){var n=t.locale,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,s);return p(p({},r),a()(e).reduce(function(e,t){return function(){var n=arguments.length>1?arguments[1]:void 0;return p(p({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},f({},n,e[n]&&(0,l.MZ)(t,e[n])))}}(r,n),{}))})))}},17252:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(67294),o=n.n(r),i=n(18093),a=n(45697),c=n.n(a),l=n(57557),s=n.n(l),u=n(80681),p=n(50966);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=(0,i.branch)((function(e){return e.popover}),(function(e){var t,n;return n=t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(f,t);var n,r,a,c,l=(a=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(a);if(c){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function f(){return d(this,f),l.apply(this,arguments)}return n=f,(r=[{key:"renderPopover",value:function(){return o().createElement(u.Popover,s()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,s()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(p.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),f}(o().Component),v(t,"propTypes",{popover:c().object}),v(t,"defaultProps",{popover:{trigger:!0}}),n}))},15135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(67294),o=n.n(r),i=n(18093),a=n(80681),c=n(50966),l=n(5346),s=n(57557),u=n.n(s),p=["tooltip","tooltipId","tooltipPosition","tooltipTrigger","keyProp","idDropDown","args"];function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const d=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tooltip,n=e.tooltipId;return t||n}),(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.tooltip,r=t.tooltipId,i=t.tooltipPosition,s=void 0===i?"top":i,u=t.tooltipTrigger,d=t.keyProp,y=t.idDropDown,m=t.args,b=f(t,p);return o().createElement(c.Z,{trigger:u,id:y,key:d,placement:s,overlay:o().createElement(a.Tooltip,{id:"tooltip-"+d},r?o().createElement(l.Z,{msgId:r,msgParams:{data:m}}):n)},o().createElement(e,b))}}),(function(e){return function(t){return o().createElement(e,u()(t,["tooltipId","tooltip"]),t.children)}}))},79105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(18093);const o=function(e,t,n){return(0,r.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e[t]}),(0,r.withState)(e,t,n))}},80717:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(67294),o=n.n(r),i=n(19081),a=n.n(i),c=n(80681),l=n(90085),s=["visible","Element","renderButton"];function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,n=void 0===t?[]:t,r=e.btnGroupProps,i=void 0===r?{}:r,f=e.btnDefaultProps,d=void 0===f?{}:f,y=e.transitionProps,m=void 0===y?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:y,b=function(){return n.map((function(e,t){var n=e.visible,r=void 0===n||n,i=e.Element,a=e.renderButton,c=p(e,s);return r?a||i&&o().createElement(i,u({key:c.key||t},c))||o().createElement(l.Z,u({key:c.key||t},d,c)):null}))};return o().createElement(c.ButtonGroup,i,m?o().createElement(a(),m,b()):b())}},90085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(67294),o=n.n(r),i=n(18093),a=n(5346),c=n(57557),l=n.n(c),s=n(80681),u=n(32425),p=n(12610),f=n(17252),d=n(38560),y=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const g=(0,i.compose)(p.Z,f.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,n=e.loading,r=e.text,i=void 0===r?"":r,c=e.textId,p=e.glyphClassName,f=void 0===p?"":p,g=e.loaderProps,v=void 0===g?{}:g,h=e.children,O=b(e,y);return o().createElement(d.Z,l()(O,["pullRight","confirmNo","confirmYes"]),t&&!n?o().createElement(s.Glyphicon,{glyph:t,className:f}):null,c?o().createElement(a.Z,{msgId:c}):i,n?o().createElement(u.Z,m({className:"ms-loader".concat(O.bsStyle&&" ms-loader-"+O.bsStyle||"").concat(O.bsSize&&" ms-loader-"+O.bsSize||"")},v)):null,h)}))},75927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(13218),o=n.n(r),i=n(67294),a=n.n(i),c=n(80681),l=n(5346),s=n(15135),u=["settings","element","tabs","activeTab","width","groups","isLocalizedLayerStylesEnabled","setActiveTab","onUpdateParams","onRetrieveLayerData","realtimeUpdate"];function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=(0,s.Z)(c.NavItem);const m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,n=e.element,r=void 0===n?{}:n,i=e.tabs,s=void 0===i?[]:i,m=e.activeTab,b=e.width,g=e.groups,v=e.isLocalizedLayerStylesEnabled,h=e.setActiveTab,O=void 0===h?function(){}:h,w=e.onUpdateParams,E=void 0===w?function(){}:w,P=e.onRetrieveLayerData,j=void 0===P?function(){}:P,S=e.realtimeUpdate,C=d(e,u);return a().createElement(c.Row,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},a().createElement(c.Col,{xs:12},a().createElement(c.Nav,{bsStyle:"tabs",activeKey:m,justified:!0},s.map((function(e){return a().createElement(y,{key:"ms-tab-settings-"+e.id,tooltip:a().createElement(l.Z,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){return O(e.id)}},a().createElement(c.Glyphicon,{glyph:e.glyph}))})))),a().createElement(c.Col,{xs:12},s.filter((function(e){return e.id&&e.id===m})).filter((function(e){return e.Component})).map((function(e){return a().createElement(e.Component,p({},C,{key:"ms-tab-settings-body-"+e.id,containerWidth:b,element:r,groups:g,nodeType:t.nodeType,settings:t,retrieveLayerData:j,isLocalizedLayerStylesEnabled:v,onChange:function(e,t){return o()(e)?E(e,S):E(f({},e,t),S)}}))}))))}},16701:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(67294),o=n.n(r),i=n(18093),a=n(81859),c=n(90690),l=n(29423),s=n(21338),u=n(91175),p=n.n(u);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function e(t,n){return t.reduce((function(t,r){var o=d({},r);return o.nodes&&(o=d(d({},o),{},{nodes:e(o.nodes,n)})),n.forEach((function(e){o.nodes&&e.func(o)?o=d(d({},o),e.options):o.nodes&&(o=d({},o))})),t.push(o),t}),[])},b=function(e){var t=e.nodes,n=e.filterText;return e.currentLocale,m(t,[{options:{showComponent:!0},func:function(){return!n}},{options:{loadingError:!0},func:function(e){return p()(e.nodes.filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return n&&p()(e.nodes.filter((function(e){return!0})))}}])};const g=(0,i.withProps)((function(e){return{nodes:b(e)}}));var v=n(3307),h=n(17802);const O=(0,i.compose)(h.Z,g,v.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.changeLayerPropertyByGroup,n=void 0===t?function(){}:t,r=e.changeLayerProperty,i=void 0===r?function(){}:r,u=e.changeGroupProperty,p=void 0===u?function(){}:u,f=e.onSort,d=e.onSelect,y=e.selectedNodes,m=e.nodes,b=void 0===m?[]:m;return o().createElement(s.Z,{onSort:f,selectedNodes:y,onSelect:d,nodes:b},o().createElement(l.Z,{groupElement:o().createElement(a.Z,{onSort:f,selectedNodes:y,onSelect:d,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(r){return n(e,r,t[r])}))},onToggle:function(e,t){return p(e,"expanded",!t)},groupVisibilityCheckbox:!0}),layerElement:o().createElement(c.Z,{selectedNodes:y,onSelect:d,titleTooltip:!0,propertiesChangeHandler:function(e,t){return Object.keys(t).map((function(n){return i(e,n,t[n])}))},onUpdateNode:function(e,t,n){return Object.keys(n).map((function(t){return i(e,t,n[t])}))},onToggle:function(e,t){return i(e,"expanded",!t)}})}))}))},3307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(84596),o=n.n(r),i=n(30998),a=n.n(i),c=n(18093),l=n(24262);const s=(0,c.withHandlers)({changeLayerProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(e,t,r){var i=a()(o.layers||[],{id:e});n("map.layers[".concat(i,"].").concat(t),r)}},changeLayerPropertyByGroup:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(e,t,r){return o.layers.filter((0,l.CK)(e)).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return a()(o.layers||[],{id:t})})).filter((function(e){return e>=0})).map((function(e){return n("map.layers[".concat(e,"].").concat(t),r)}))}},changeGroupProperty:function(e){var t=e.onChange,n=void 0===t?function(){}:t,r=e.map,i=void 0===r?[]:r;return function(e,t,r){var c,l=i.groups?o()(i.groups):[],s=a()(l,(function(t){return e===t.id})),u=-1===s?l.length:s;"expanded"!==t||null!=l&&null!==(c=l[u])&&void 0!==c&&c.id||n("map.groups[".concat(u,"].id"),e),n("map.groups[".concat(u,"].").concat(t),r)}},updateMapEntries:function(e){var t=e.onChange,n=void 0===t?function(){}:t;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return n("map[".concat(t,"]"),e[t])}))}}})},48860:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(30998),o=n.n(r),i=n(18093);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e,t){return(t.layers||[]).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.group,r=void 0===n?"Default":n;return r===e})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t}))};const s=(0,i.compose)((0,i.withStateHandlers)((function(){return{selectedLayers:[],selectedGroups:[]}}),{onNodeSelect:function(e,t){var n=e.selectedLayers,r=void 0===n?[]:n,i=e.selectedGroups,c=void 0===i?[]:i,s=t.map,u=void 0===s?{}:s;return function(e,t,n){return{selectedLayers:"group"===t?o()(c,(function(t){return t===e}))>=0?r.filter((function(t){return o()(l(e,u),(function(e){return e===t}))<0})):n?[].concat(a(r),a(l(e,u))):a(l(e,u)):o()(r,(function(t){return t===e}))>=0?r.filter((function(t){return t!==e})):n?[].concat(a(r),[e]):[e],selectedGroups:"group"===t?o()(c,(function(t){return t===e}))>=0?c.filter((function(t){return t!==e})):n?[].concat(a(c),[e]):[e]:n?c:[]}}}}),(0,i.withProps)((function(e){var t=e.selectedLayers,n=e.selectedGroups;return{selectedNodes:[].concat(a(t),a(n))}})))},17802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18093),o=n(24262);const i=(0,r.withProps)((function(e){var t,n,r,i=e.map;return{nodes:(t=(0,o.DN)(i),n=t.layers,r=void 0===n?{}:n,(0,o.C1)(r.flat||[],r.groups||[]).groups)}}))},51768:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var r=n(27361),o=n.n(r),i=n(18093),a=n(24262),c=n(79105),l=n(87427),s=n(10907),u=n(63209),p=n(30998),f=n.n(p),d=n(45697),y=n.n(d),m=n(67294),b=n.n(m),g=n(80681),v=n(43129),h=n(38560),O=n(5346);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function S(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(){var e;E(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(C(e=i.call.apply(i,[this].concat(n))),"renderLegend",(function(){return null})),k(C(e),"renderItemLabel",(function(e){return b().createElement("div",null,b().createElement("div",{key:"item-title"},e.title||e.name),b().createElement("div",null,b().createElement("small",{className:"text-muted",key:"item-key-description"},e.name)))})),k(C(e),"renderError",(function(){return e.props.element&&e.props.element.capabilities&&e.props.element&&e.props.element.capabilities.error?b().createElement(g.Alert,{bsStyle:"danger"},b().createElement(O.Z,{msgId:"layerProperties.styleListLoadError"})):null})),k(C(e),"updateEntry",(function(t,n){var r=n.target.value;e.props.onChange(t,r)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t=[{label:"Default Style",value:""}].concat((this.props.element.availableStyles||[]).map((function(t){return{label:e.renderItemLabel(t),value:t.name}})));return(this.props.element.style&&this.props.element.availableStyles&&f()(this.props.element.availableStyles,(function(t){return t.name===e.props.element.style})))>=0||!this.props.element.style||t.push({label:this.props.element.style,value:this.props.element.style}),b().createElement(g.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},b().createElement("form",{ref:"style"},b().createElement(v.ZP.Creatable,{key:"styles-dropdown",options:t,isLoading:this.props.element&&this.props.element.capabilitiesLoading,value:this.props.element.style||"",onOpen:function(){!e.props.element||e.props.element.capabilities&&e.props.element.availableStyles||e.props.retrieveLayerData(e.props.element)},promptTextCreator:function(e){return b().createElement(O.Z,{msgId:"layerProperties.styleCustom",msgParams:{value:e}})},onChange:function(t){e.updateEntry("style",{target:{value:t&&t.value||""}})}}),b().createElement("br",null),this.renderLegend(),this.renderError(),b().createElement(h.Z,{bsStyle:"primary",style:{float:"right"},onClick:function(){return e.props.retrieveLayerData(e.props.element)}},b().createElement(g.Glyphicon,{glyph:"refresh"}),"",b().createElement(O.Z,{msgId:"layerProperties.stylesRefreshList"})),b().createElement("br",null)))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b().Component);k(I,"propTypes",{retrieveLayerData:y().func,onChange:y().func,element:y().object,groups:y().array}),k(I,"defaultProps",{element:{},retrieveLayerData:function(){},onChange:function(){}});const x=I;var A=n(3307),D=n(17802),M=n(89255),R=n(80833);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const F=(0,i.mapPropsStream)((function(e){var t=(0,i.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("element").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.id===t.id})).switchMap((function(){return n.switchMap((function(e){return(0,R.kB)(e).map((function(e){return{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}})).startWith({capabilitiesLoading:!0})})).catch((function(e){return M.Observable.of({capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:e},description:null})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return L(L({},t),{},{retrieveLayerData:r,element:L(L({},t.element),e)})}))}));var _=n(66379),B=n.n(_),W=void 0;function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}var z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;for(var o in t)null!==t[o]&&"object"===U(t[o])&&(B()(t[o],n)&&r.apply(W,[t[o]]),e(t[o],n,r))};const G=(0,i.withProps)((function(e){var t=e.nodes,n=void 0===t?{}:t,r=e.editNode,o={};return r&&z(n,{id:r},(function(e){o=e})),{selectedNode:o}}));function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=F(x),Q=(0,i.withProps)((function(e){return{tabs:e.tabs||[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:u.Z},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:e.settings&&"layers"===e.settings.nodeType,Component:s.Z},{id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:e.settings&&"layers"===e.settings.nodeType&&e.element&&"wms"===e.element.type,Component:Y}]}}));const K=(0,i.compose)(D.Z,G,(0,i.withState)("settings","onUpdateSettings",{}),(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{}:t,r=e.selectedNode,i=e.settings,c=void 0===i?{}:i;return{element:r,settings:H(H({},c),{},{nodeType:r&&r.nodes?"groups":"layers",options:{opacity:c.opacity>=0?c.opacity:r.opacity>=0?r.opacity:1}}),groups:o()((0,a.DN)(n),"layers.groups")}})),(0,i.compose)(A.Z,(0,i.withHandlers)({onUpdateNode:function(e){var t=e.changeLayerProperty,n=void 0===t?function(){}:t,r=e.changeGroupProperty,o=void 0===r?function(){}:r,i=e.editNode;return function(e,t,r){"layers"===t&&Object.keys(r).map((function(e){return n(i,e,r[e])})),"groups"===t&&Object.keys(r).map((function(e){return o(i,e,r[e])}))}}}),(0,i.withHandlers)({onUpdateParams:function(e){var t=e.settings,n=void 0===t?{}:t,r=e.onUpdateNode,o=void 0===r?function(){}:r;return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&o(n.node,n.nodeType,H(H({},n.props),e))}}})),l.kZ,(0,c.Z)("activeTab","setActiveTab","general"),Q)},97939:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Gl});var r={};n.r(r),n.d(r,{cleanUpEmptyStoryContainers:()=>be,closeShareOnGeostoryChangeMode:()=>we,editMediaForBackgroundEpic:()=>de,editWebPageComponent:()=>ue,handlePendingGeoStoryChanges:()=>Ee,hideCarouselItemsOnUpdateCurrentPage:()=>he,inlineEditorEditMap:()=>Oe,loadGeostoryEpic:()=>ye,loadStoryOnHistoryPop:()=>Se,openMediaEditorForNewMedia:()=>ce,openWebPageComponentCreator:()=>se,reloadGeoStoryOnLoginLogout:()=>me,saveGeoStoryResource:()=>pe,scrollOnLoad:()=>je,scrollSideBar:()=>Ce,scrollToContentEpic:()=>fe,setFocusOnMapEditing:()=>ve,sortContentEpic:()=>ge,urlUpdateOnScroll:()=>Pe});var o=n(67294),i=n.n(o),a=n(33664),c=n(22222),l=n(75933),s=n.n(l),u=n(22843),p=n(92579),f=n(86638),d=n(31398),y=n(34990),m=n(93848),b=n(89255),g=n(91175),v=n.n(g),h=n(7654),O=n.n(h),w=n(47037),E=n.n(w),P=n(14293),j=n.n(P),S=n(95825),C=n.n(S),T=n(58748),k=n.n(T),I=n(27361),x=n.n(I),A=n(1469),D=n.n(A),M=n(41609),R=n.n(M),N=n(75982),L=n(23570),Z=n.n(L),F=n(75875),_=n.n(F),B=n(91312),W=n(82904),U=n(97395),z=n(63516),G=n(74621),V=n(66113),H=n(7501),q=n(89919),Y=n(27693),Q=n(82385),K=["status","statusText","data","message"],X=["data","isStatic"];function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function re(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e,t,n){return function(r){return r.ofType(m.AQ).switchMap((function(r){var o=r.resource,i=void 0===o?{}:o,a=[],c=e.getState(),l=(0,H.hb)(c),s=(0,H.IQ)(c),u=v()((0,V.jq)(c).filter((function(e){return e.data&&(s!==Y.r.GEOSTORY&&e.data.id||e.id)===i.id}))),f=i.id;u?f=u.id:R()(i)?a=[].concat(re(a),[(0,y.Od)("".concat(t)),(0,m.Cp)()]):(f=i.id||Z()(),a=[].concat(re(a),[(0,y.rp)(f,l,i.data?i.data:i)]));var d=l===p.Tr.MAP?{resourceId:f,type:l,map:void 0}:{resourceId:f,type:l},g=[(0,y.Vx)("".concat(t),d,"merge")];return n===p.ID.CAROUSEL&&g.push((0,y.Vx)("".concat(t,".map"),{mapInfoControl:!0},"merge")),a=[].concat(re(a),g,[(0,m.Cp)()]),b.Observable.from(a)}))}},ce=function(e,t){return e.ofType(y.D7).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===p.bT.MEDIA||(0,p.lt)(n)})).switchMap((function(n){var r=n.path,o=n.element,i="";(0,p.lt)(o)&&"sections"===r&&(i=".contents[0].contents[0]");var a="".concat(r,'[{"id":"').concat(o.id,'"}]').concat(i),c=(0,V.X6)(t.getState());return b.Observable.of((0,m.$Z)("geostory",c)).merge(e.let(ae(t,a)),e.ofType(m.B8).switchMap((function(){return b.Observable.of((0,y.Od)(a))})).takeUntil(e.ofType(y.wb))).takeUntil(e.ofType(m.wd))}))},le=function(e){return function(t){return t.ofType(y.Hb).switchMap((function(t){var n=t.src;return b.Observable.of((0,y.Vx)("".concat(e),{src:n,editURL:!1},"merge"))}))}},se=function(e){return e.ofType(y.D7).filter((function(e){var t=e.element,n=void 0===t?{}:t;return n.type===p.bT.WEBPAGE&&!1!==n.editURL||(0,p.NC)(n)})).switchMap((function(t){var n=t.path,r=t.element,o="";(0,p.NC)(r)&&"sections"===n&&(o=".contents[0].contents[0]");var i="".concat(n,'[{"id":"').concat(r.id,'"}]').concat(o);return b.Observable.of((0,y.Vx)(i,{editURL:!0},"merge")).merge(e.let(le(i))).takeUntil(e.ofType(y.cc))}))},ue=function(e){return e.ofType(y.cc).switchMap((function(t){var n=t.path;return b.Observable.of((0,y.Vx)(n,{editURL:!0},"merge")).merge(e.let(le(n))).takeUntil(e.ofType(y.D7))}))},pe=function(e){return e.ofType(y.LE).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resource,n=e.delay,r=void 0===n?1e3:n;return(t.id?(0,B.id)(t):(0,B.SN)(t)).switchMap((function(e){return b.Observable.of((0,y.GD)(e),(0,y.g5)(p.ZX.SHOW_SAVE,!1),t.id?(0,y.wJ)(e):(0,N.VF)("/geostory/".concat(e))).merge(b.Observable.of((0,U.$Z)({id:"STORY_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(t.id?0:r))})).let((0,q.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.statusText,r=e.data,o=e.message,i=ne(e,K);return b.Observable.of((0,y.y6)(t?{status:t,statusText:n,data:r}:o||i),(0,y.YP)(!1,"loading"))}))}))},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.D7).switchMap((function(e){var t=e.path,n=e.element;return b.Observable.of(n).switchMap((function(){if(document.getElementById(n.id)){var e=(0,p.u0)(t).sectionId,o=(0,V.I0)(e)(r())?e:n.id;return(0,p.M1)(o,{behavior:"auto",block:"center"}),b.Observable.empty()}throw new Error("Item not mounted yet")})).retryWhen((function(e){return e.delay(200).take(10)}))}))},de=function(e,t){return e.ofType(m.wd).switchMap((function(n){var r=n.path,o=n.owner,i=n.sectionType,a=(0,V.vv)(r)(t.getState()),c=(0,V.Tr)(a)(t.getState());return b.Observable.of((0,H.hb)(t.getState())).filter((function(e){return c&&c.type!==e})).map((function(){return(0,m.y5)(c.type)})).merge(b.Observable.of((0,m.$Z)(o,(0,V.X6)(t.getState())),(0,m.Gh)(a),(0,m.Tk)(i===p.ID.CAROUSEL?["image","video"]:[])).merge(e.let(ae(t,r,i)).takeUntil(e.ofType(m.B8,y.D7))))}))},ye=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.XH).switchMap((function(e){var t=e.id;return b.Observable.defer((function(){return t&&O()(parseInt(t,10))?_().get("configs/".concat(t,".json")).then((function(e){var t=e.data,n=t.sections,r=D()(n)&&n.map((function(e){return ee(ee({},e),{},{id:Z()()})}));return{data:r.length?ee(ee({},t),{},{sections:r}):t,isStatic:!0,canEdit:!0}})):(0,B.RX)(t)})).do((function(e){if(!e.data)throw Error("Wrong data format");return!0})).switchMap((function(e){var n=e.data,o=e.isStatic,i=void 0!==o&&o,a=ne(e,X),c=r(),l=(0,G.qg)(c),s=(0,G.jl)(c),u=E()(n)?JSON.parse(n):n;if(!s&&O()(parseInt(t,10)))return b.Observable.of((0,y.Ct)({status:403}));var f=(0,V.eK)(c)===p.nl.EDIT;return b.Observable.from([].concat(re(i||f?[(0,y.D_)(a&&a.canEdit||l)]:[]),[(0,y.OS)(t),(0,y.K0)(u),(0,y.DF)(a)]))})).let((0,q.hP)((0,y.YP)(!0,"loading"),(0,y.YP)(!1,"loading"),(function(e){var t=(0,p.of)(),n=t+".errors.loading.unknownError";return 403===e.status?(n=t+".errors.loading.pleaseLogin",((0,G.jl)(r())||(0,V.JM)(r()))&&(n=t+".errors.loading.geostoryNotAccessible")):404===e.status?n=t+".errors.loading.geostoryDoesNotExist":j()(e.status)&&(n=e.message),b.Observable.of((0,U.vU)({title:t+".errors.loading.title",message:n}),(0,y.K0)({}),(0,y.Ct)(ee(ee({},e),{},{messageId:n})))}))).startWith((0,y.K0)({}))}))},me=function(e){return e.ofType(y.XH).switchMap((function(t){var n=t.id;return e.ofType(z.XP,z.Nv).switchMap((function(){return b.Observable.of((0,y.wJ)(n)).delay(500)})).takeUntil(e.ofType(N.nk))}))},be=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.Dq).switchMap((function(e){var t=e.path,n=(0,p.Ll)(t,(0,V.Kg)(r())),o=C()(n,"contents");if(o>0){var i=n.splice(0,o),a=(0,V.$F)(i.join("."))(r());if(a&&a.contents&&0===a.contents.length)return b.Observable.of((0,y.Od)(i.join(".")))}return b.Observable.empty()}))},ge=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.tP).switchMap((function(e){var t=e.source,n=e.target,o=e.position,i=r(),a=(0,V.$F)(t)(i);return b.Observable.from([(0,y.Od)(t),(0,y.IH)(n,o,a)])}))},ve=function(e,t){var n=t.getState,r=void 0===n?function(){}:n;return e.ofType(y.wb).filter((function(e){var t=e.path;return(void 0===t?"":t).endsWith("editMap")})).switchMap((function(e){var t=e.path,n=e.element,o=(0,p.ln)(t,(0,V.Kg)(r())),i=o.flatPath,a=o.path,c=1===i.length,l=c?i[0]:i.pop(),s=c?i[0]:i.shift(),u="background"===a[a.length-2],f=u&&"#".concat(s.id," .ms-section-background-container")||"#".concat(l.id);return(0,p.M1)(l.id),b.Observable.from([(0,y.$A)(n,l,f,u,t.replace(".editMap",""))])}))},he=function(e,t){var n=t.getState;return e.ofType(y.wb).filter((function(e){var t=e.path,n=e.element;return t&&t.endsWith("carouselToggle")&&n})).switchMap((function(e){var t=e.path,r=(0,p.u0)(t)||{},o=r.sectionId,i=r.contentId,a=(0,V.eB)(o)(n())||[];return i&&!R()(a)?b.Observable.from([(0,y.fD)(o,i)]).concat(b.Observable.of((0,y.Vx)(t,!1))):b.Observable.empty()}))},Oe=function(e,t){var n=t.getState;return e.ofType(Q.nr).filter((function(e){var t=e.owner,n=e.map;return"inlineEditor"===t&&!!n})).switchMap((function(){return e.ofType(Q.LE).switchMap((function(t){var r=t.map,o=(0,V.FW)(n()).path;return b.Observable.of((0,y.Vx)("".concat(o,".map"),r,"merge"),(0,y.Vx)("".concat(o,".editMap"),!1),(0,Q.Cp)()).takeUntil(e.ofType(Q.B8))}))}))},we=function(e){return e.ofType(y.vb).switchMap((function(){return b.Observable.of((0,W.Xg)("share","enabled",!1))}))},Ee=function(e){return b.Observable.merge(e.ofType(y.XH).switchMap((function(){return e.ofType(y.Zf)}))).switchMap((function(){return e.ofType(y.D7,y.wb,y.Dq,y.mN,y.QK,y.km).take(1).switchMap((function(){return b.Observable.of((0,y.c0)(!0)).concat(e.ofType(y.si,N.nk,z.Nv).take(1).switchMap((function(){return b.Observable.of((0,y.c0)(!1))})))}))}))},Pe=function(e,t){var n=t.getState;return e.ofType(y.un).let(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){return r.withLatestFrom(e.startWith(t)).filter((function(e){var t=$(e,2)[1];return n(t)})).map((function(e){return $(e,1)[0]}))}}(e.ofType(y.Gx).map((function(e){return!e.status})).startWith(!0))).debounceTime(50).switchMap((function(e){var t=e.sectionId,r=e.columnId;if("edit"!==(0,V.eK)(n())&&(r||t)&&(0,V.bU)(n())){var o,i,a=x()(n(),"geostory.resource.id"),c=(0,p.NP)(window.location.href,null===(o=window)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.hash,a,t,r);c&&history.pushState(null,"",c)}return b.Observable.empty()}))},je=function(e){return e.ofType(y.ij).switchMap((function(e){var t,n,r,o=e.delay,i=void 0===o?2e3:o,a=null===(t=window)||void 0===t||null===(n=t.location)||void 0===n||null===(r=n.hash)||void 0===r?void 0:r.split("/");return b.Observable.of(a).do((function(){var e,t,n;null!==(e=window)&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.hash)&&void 0!==n&&n.includes("shared")?(0,p.M1)(a[7]||a[5],{block:"start",behavior:"auto"}):a.length>5?(0,p.M1)(a[6],{block:"start",behavior:"auto"}):5===a.length&&(0,p.M1)(a[4],{block:"start",behavior:"auto"})})).ignoreElements().startWith((0,y.WE)(!0)).concat(b.Observable.of((0,y.WE)(!1)).delay(i))}))},Se=function(e){return e.ofType(N.nk).switchMap((function(e){var t,n=e.payload;if((null==n||null===(t=n.location)||void 0===t?void 0:t.pathname.includes("/geostory/"))&&"POP"===n.action){var r,o=k()(null==n||null===(r=n.location)||void 0===r?void 0:r.pathname);return o.find((function(e){return"shared"===e}))?b.Observable.of((0,y.wJ)(o[2])).delay(500):b.Observable.of((0,y.wJ)(o[1])).delay(500)}return b.Observable.empty()}))},Ce=function(e,t){var n=t.getState;return e.ofType(y.un).filter((function(e){var t=e.columnId,r=e.sectionId;return!("edit"!==(0,V.eK)(n())||!t&&!r)})).debounceTime(50).switchMap((function(){return b.Observable.of(Array.from(document.querySelectorAll(".ms-geostory-builder .mapstore-side-card.ms-highlight")).pop()).filter((function(e){return!!e})).withLatestFrom(b.Observable.of(document.querySelector(".ms-geostory-builder .ms2-border-layout-body")).filter((function(e){return!!e}))).map((function(e){var t=$(e,2),n=t[0],r=t[1];return function(){var e=n.getBoundingClientRect(),t=e.top,o=e.bottom,i=r.getBoundingClientRect(),a=i.top,c=i.bottom;t<a?r.scrollBy({top:t-a-10,behavior:"smooth"}):o>c&&r.scrollBy({top:o-c+10,behavior:"smooth"})}})).do((function(e){return window.requestAnimationFrame(e)})).ignoreElements()}))},Te=n(8316),ke=n(66190),Ie=n(65539),xe=n(96259),Ae=n(18093),De=n(28878);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,Ae.setObservableConfig)(De.Z);var Ze=(0,Ae.compose)((0,Ae.mapPropsStream)((function(e){var t=(0,Ae.createEventHandler)(),n=t.handler,r=t.stream,o="EMPTY",i="EMPTY";return b.Observable.combineLatest(e,r.filter((function(e){var t=e.columnId,n=e.sectionId;return t&&o!==t?(o=t,!0):!(!n||i===n||(i=n,0))})).withLatestFrom(e.pluck("updateCurrentPage")).do((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return i&&i(o)})).ignoreElements().startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Re(Re({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Re(Re({},e),t)}),{})),{},{updateCurrentPage:n})}))}))),Fe=n(82030),_e=n(22762),Be=n.n(_e);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ae.setObservableConfig)(De.Z);const Ge=(0,Ae.compose)((0,Ae.mapPropsStream)((function(e){var t=(0,Ae.createEventHandler)(),n=t.handler,r=t.stream;return b.Observable.combineLatest(e,function(e,t){return t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{interceptorTime:e.interceptorTime,updateCurrentPage:e.updateCurrentPage}})).distinctUntilKeyChanged("interceptorTime").switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.interceptorTime,r=void 0===n?100:n,o=t.updateCurrentPage;return e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return Ue(Ue({},e),{},ze({},n,{visible:r,entry:o}))}),{}).debounceTime(r).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Be()(Object.keys(e),(function(t){return e[t].visible?x()(e[t],"entry.boundingClientRect.top"):1/0}))})).do((function(e){o&&o({sectionId:e})})).ignoreElements()}))}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ue(Ue({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Ue(Ue({},e),t)}),{})),{},{onVisibilityChange:n})}))})));var Ve=n(45697),He=n.n(Ve),qe=n(93451),Ye=(n(7169),n(37163)),Qe=n(73611),Ke=n(94184),Xe=n.n(Ke);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ct(e);if(t){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return it(this,n)}}function it(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return at(e)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st="External Link",ut=function(e){nt(n,e);var t=ot(n);function n(){var e;Je(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return lt(at(e=t.call.apply(t,[this].concat(o))),"state",{expanded:!1}),lt(at(e),"toggle",(function(){e.setState((function(e){return{expanded:!e.expanded}}))})),e}return tt(n,[{key:"render",value:function(){var e=this.state.expanded,t=this.props,n=t.externalLinkOption,r=t.onSelectionChange,o=t.currentSelectOption,a=t.availableStorySections;return i().createElement("div",{className:"rdw-block-wrapper","aria-label":"rdw-block-control"},i().createElement(Qe.Dropdown,{className:"ms-rdw-link-options-dropdown",onChange:r,expanded:e,doExpand:this.toggle,doCollapse:this.toggle,onExpandEvent:this.toggle,title:"MSLinks"},i().createElement("span",null,o),i().createElement(Qe.DropdownOption,{active:!0,value:{value:n,label:n},key:n},"External Link"),a&&a.map((function(e){return i().createElement(Qe.DropdownOption,{active:e.id===o,value:{value:e.id,label:e.title||e.type||e.id},key:e.id},e.title||e.type||e.id)}))))}}]),n}(o.Component);lt(ut,"propTypes",{externalLinkOption:He().string,onSelectionChange:He().func,currentSelectOption:He().string,availableStorySections:He().array});var pt=function(e){nt(n,e);var t=ot(n);function n(){var e;Je(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return lt(at(e=t.call.apply(t,[this].concat(o))),"state",{showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:e.props.config.defaultTargetOption,currentSelectOption:"Select link target"}),lt(at(e),"removeLink",(function(){(0,e.props.onChange)("unlink")})),lt(at(e),"addLink",(function(){var t=e.props.onChange,n=e.state;t("link",n.linkTitle,n.linkTarget,n.linkTargetOption,n.attributes)})),lt(at(e),"updateValue",(function(t){e.setState(lt({},"".concat(t.target.name),t.target.value))})),lt(at(e),"onSelectionChange",(function(t){t.value===st?e.setState({linkTarget:"",attributes:{},currentSelectOption:t.label}):e.setState({linkTarget:t.value,attributes:{"data-geostory-interaction-type":"scrollTo","data-geostory-interaction-params":"".concat(t.value),"data-geostory-interaction-name":t.label},currentSelectOption:t.label})})),lt(at(e),"updateTargetOption",(function(t){e.setState({linkTargetOption:t.target.checked?"_blank":"_self"})})),lt(at(e),"hideModal",(function(){e.setState({showModal:!1})})),lt(at(e),"signalExpandShowModal",(function(){var t=e.props,n=t.onExpandEvent,r=t.currentState,o=r.link,i=r.selectionText,a=e.state.linkTargetOption;n();var c="Select link target";null!=o&&o.target&&o.target.length>0&&(c=st),null!=o&&o.attributes["data-geostory-interaction-name"]&&(c=o.attributes["data-geostory-interaction-name"]),e.setState({showModal:!0,linkTarget:o&&o.target||"",linkTargetOption:o&&o.targetOption||a,linkTitle:o&&o.title||i,attributes:o&&o.attributes||{},currentSelectOption:c})})),lt(at(e),"forceExpandAndShowModal",(function(){var t=e.props,n=t.doExpand,r=t.currentState,o=r.link,i=r.selectionText,a=e.state.linkTargetOption;n();var c="Select link target";null!=o&&o.target&&o.target.length>0&&(c=st),null!=o&&o.attributes["data-geostory-interaction-name"]&&(c=o.attributes["data-geostory-interaction-name"]),e.setState({showModal:!0,linkTarget:o&&o.target,linkTargetOption:o&&o.targetOption||a,linkTitle:o&&o.title||i,attributes:o&&o.attributes||{},currentSelectOption:c})})),e}return tt(n,[{key:"componentDidUpdate",value:function(e){e.expanded&&!this.props.expanded&&this.setState({showModal:!1,linkTarget:"",linkTitle:"",attributes:{},linkTargetOption:this.props.config.defaultTargetOption,currentSelectOption:"Select link target"})}},{key:"renderAddLinkModal",value:function(){var e=this.props,t=e.config.popupClassName,n=e.doCollapse,r=e.translations,o=e.availableStorySections,a=this.state,c=a.linkTitle,l=a.linkTarget,s=a.linkTargetOption,u=a.currentSelectOption;return i().createElement("div",{className:Xe()("rdw-link-modal",t),onClick:Qe.stopPropagation},i().createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTitle"},r["components.controls.link.linkTitle"]),i().createElement("input",{id:"linkTitle",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTitle",value:c}),i().createElement("label",{className:"rdw-link-modal-label",htmlFor:"linkTarget"},r["components.controls.link.linkTarget"]),i().createElement(ut,{externalLinkOption:st,currentSelectOption:u,onSelectionChange:this.onSelectionChange,availableStorySections:o}),u===st&&i().createElement(i().Fragment,null,i().createElement("input",{id:"linkTarget",className:"rdw-link-modal-input",onChange:this.updateValue,onBlur:this.updateValue,name:"linkTarget",value:l}),i().createElement("label",{className:"rdw-link-modal-target-option",htmlFor:"openLinkInNewWindow"},i().createElement("input",{id:"openLinkInNewWindow",type:"checkbox",defaultChecked:"_blank"===s,value:"_blank",onChange:this.updateTargetOption}),i().createElement("span",null,r["components.controls.link.linkTargetOption"]))),i().createElement("span",{className:"rdw-link-modal-buttonsection"},i().createElement("button",{className:"rdw-link-modal-btn",onClick:this.addLink,disabled:!l||!c},r["generic.add"]),i().createElement("button",{className:"rdw-link-modal-btn",onClick:n},r["generic.cancel"])))}},{key:"renderInFlatList",value:function(){var e=this.props,t=e.config,n=t.options,r=t.link,o=t.unlink,a=t.className,c=e.currentState,l=e.expanded,s=e.translations,u=this.state.showModal;return i().createElement("div",{className:Xe()("rdw-link-wrapper",a),"aria-label":"rdw-link-control"},n.indexOf("link")>=0&&i().createElement(Qe.Option,{value:"unordered-list-item",className:Xe()(r.className),onClick:this.signalExpandShowModal,"aria-haspopup":"true","aria-expanded":u,title:r.title||s["components.controls.link.link"]},i().createElement("img",{src:r.icon,alt:""})),n.indexOf("unlink")>=0&&i().createElement(Qe.Option,{disabled:!c.link,value:"ordered-list-item",className:Xe()(o.className),onClick:this.removeLink,title:o.title||s["components.controls.link.unlink"]},i().createElement("img",{src:o.icon,alt:""})),l&&u?this.renderAddLinkModal():void 0)}},{key:"renderInDropDown",value:function(){var e=this.props,t=e.expanded,n=e.onExpandEvent,r=e.doCollapse,o=e.doExpand,a=e.onChange,c=e.config,l=e.currentState,s=e.translations,u=c.options,p=c.link,f=c.unlink,d=c.className,y=c.dropdownClassName,m=c.title,b=this.state.showModal;return i().createElement("div",{className:"rdw-link-wrapper","aria-haspopup":"true","aria-label":"rdw-link-control","aria-expanded":t,title:m},i().createElement(Qe.Dropdown,{className:Xe()("rdw-link-dropdown",d),optionWrapperClassName:Xe()(y),onChange:a,expanded:t&&!b,doExpand:o,doCollapse:r,onExpandEvent:n},i().createElement("img",{src:(0,Qe.getFirstIcon)(c),alt:""}),u.indexOf("link")>=0&&i().createElement(Qe.DropdownOption,{onClick:this.forceExpandAndShowModal,className:Xe()("rdw-link-dropdownoption",p.className),title:p.title||s["components.controls.link.link"]},i().createElement("img",{src:p.icon,alt:""})),u.indexOf("unlink")>=0&&i().createElement(Qe.DropdownOption,{onClick:this.removeLink,disabled:!l.link,className:Xe()("rdw-link-dropdownoption",f.className),title:f.title||s["components.controls.link.unlink"]},i().createElement("img",{src:f.icon,alt:""}))),t&&b?this.renderAddLinkModal():void 0)}},{key:"render",value:function(){return this.props.config.inDropdown?this.renderInDropDown():this.renderInFlatList()}}]),n}(o.Component);lt(pt,"propTypes",{expanded:He().bool,doExpand:He().func,doCollapse:He().func,onExpandEvent:He().func,config:He().object,onChange:He().func,currentState:He().object,translations:He().object,modalHandler:He().any});const ft=pt;function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){return bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bt(e,t)}function gt(e,t){if(t&&("object"===dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t,n){e.findEntityRanges((function(e){var t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)}function Et(e){var t,n,r=e.showOpenOptionOnHover;return n=t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bt(e,t)}(l,e);var t,n,o,a,c=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ht(o);if(a){var n=ht(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gt(this,e)});function l(){var e;yt(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Ot(vt(e=c.call.apply(c,[this].concat(n))),"state",{showPopOver:!1}),Ot(vt(e),"openLink",(function(){var t=e.props,n=t.entityKey,r=t.contentState.getEntity(n).getData().url,o=window.open(r,"blank");o&&o.focus()})),Ot(vt(e),"toggleShowPopOver",(function(){var t=!e.state.showPopOver;e.setState({showPopOver:t})})),Ot(vt(e),"renderDecorator",(function(){var t=e.props,n=t.children,o=t.entityKey,a=t.contentState.getEntity(o).getData(),c=a.url,l=a.targetOption,s=a.attributes,u=e.state.showPopOver;return s&&s["data-geostory-interaction-type"]?i().createElement("span",{className:"rdw-link-decorator-wrapper"},i().createElement("a",{"data-geostory-interaction-type":s["data-geostory-interaction-type"],"data-geostory-interaction-params":s["data-geostory-interaction-params"]},n)):i().createElement("span",{className:"rdw-link-decorator-wrapper",onMouseEnter:e.toggleShowPopOver,onMouseLeave:e.toggleShowPopOver},i().createElement("a",{href:c,target:l},n),u&&r?i().createElement("img",{src:Qe.openlink,alt:"",onClick:e.openLink,className:"rdw-link-decorator-icon"}):void 0)})),e}return t=l,(n=[{key:"render",value:function(){return this.renderDecorator()}}])&&mt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.Component),Ot(t,"propTypes",{entityKey:He().string.isRequired,children:He().array,contentState:He().object}),n}const Pt=function(e){return{strategy:wt,component:Et(e)}};var jt=n(89265),St=n.n(jt),Ct=n(17247),Tt=n.n(Ct),kt=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=Ye.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var r=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),o=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),a={};i&&o&&r&&(a["data-geostory-interaction-type"]=r,a["data-geostory-interaction-params"]=o,a["data-geostory-interaction-name"]=i),n.attributes=a,t=Ye.Entity.__create("LINK","MUTABLE",n)}}return t},It=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img src="'.concat(e.data.src,'" alt="').concat(e.data.alt,'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'" />')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t};function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=(0,Ae.compose)((0,Ae.withProps)((function(e){var t=e.storyFonts,n=void 0===t?[]:t,r=e.placeholder,o=e.toolbarStyle,i=void 0===o?{}:o,a=e.className,c=void 0===a?"ms-text-editor":a,l=e.toolbar,s=void 0===l?{}:l;return{editorRef:function(e){return setTimeout((function(){return e&&e.focus&&e.focus()}),100)},stripPastedStyles:!0,placeholder:r,toolbarStyle:i,toolbar:Mt({options:["fontFamily","blockType","fontSize","inline","textAlign","colorPicker","list","link","remove"],fontFamily:{options:n.length>0?n:p.Km,className:void 0,component:void 0,dropdownClassName:void 0},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0},inline:{options:["bold","italic","underline","strikethrough","monospace"],bold:{className:"".concat(c,"-toolbar-btn")},italic:{className:"".concat(c,"-toolbar-btn")},underline:{className:"".concat(c,"-toolbar-btn")},strikethrough:{className:"".concat(c,"-toolbar-btn")},code:{className:"".concat(c,"-toolbar-btn")}},textAlign:{left:{className:"".concat(c,"-toolbar-btn")},center:{className:"".concat(c,"-toolbar-btn")},right:{className:"".concat(c,"-toolbar-btn")},justify:{className:"".concat(c,"-toolbar-btn")}},colorPicker:{className:"".concat(c,"-toolbar-btn")},remove:{className:"".concat(c,"-toolbar-btn")}},s),toolbarClassName:"".concat(c,"-toolbar"),wrapperClassName:"".concat(c,"-wrapper"),editorClassName:"".concat(c,"-main")}})),(0,Ae.renderComponent)(Qe.Editor)),Lt=(0,Ae.compose)((0,Ae.lifecycle)({componentWillUnmount:function(){var e=this.props,t=e.editorState,n=e.save;(void 0===n?function(){}:n)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,Ye.convertToRaw)(e.getCurrentContent()).blocks.length||(0,Ye.convertToRaw)(e.getCurrentContent()).blocks[0].text,r=St()((0,Ye.convertToRaw)(e.getCurrentContent()),null,null,It);return n?r:t}return t}(t,p.gg))}}),(0,Ae.withHandlers)({onBlur:function(e){var t=e.toggleEditing,n=void 0===t?function(){}:t;return function(){n(!1)}}}),(0,Ae.withProps)((function(e){var t=e.sections;return{availableStorySections:(void 0===t?[]:t).reduce((function(e,t){var n,r=[];return[p.ID.IMMERSIVE,p.ID.CAROUSEL].includes(t.type)?t.contents.forEach((function(e){r.push(e)})):r.push(t),[].concat(function(e){if(Array.isArray(e))return At(e)}(n=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r)}),[])}})),(0,Ae.withProps)((function(e){var t=e.availableStorySections,n=void 0===t?[]:t;return{toolbar:{link:{inDropdown:!1,className:void 0,component:function(e){return i().createElement(ft,xt({},e,{availableStorySections:n}))},popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:void 0,className:void 0},unlink:{icon:void 0,className:void 0},linkCallback:void 0,getLinkDecorator:Pt}}}})),Nt);const Zt=(0,Ae.compose)((0,Ae.withState)("contentEditing","setContentEditing",!1),(0,Ae.withState)("editorState","onEditorStateChange"),(0,Ae.withHandlers)({toggleEditing:function(e){var t=e.bubblingTextEditing,n=void 0===t?function(){}:t,r=e.sectionType,o=e.onEditorStateChange,i=void 0===o?function(){}:o,a=e.setContentEditing,c=void 0===a?function(){}:a;return function(e,t){if(e){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Tt()(e,null,kt),n=Ye.ContentState.createFromBlockArray(t.contentBlocks);return Ye.EditorState.createWithContent(n)}(t);if(r===p.ID.TITLE&&"unstyled"===Ye.RichUtils.getCurrentBlockType(o)){var a=o.getCurrentContent();a=Ye.Modifier.setBlockType(a,Ye.EditorState.createWithContent(a).getSelection(),"header-one"),o=Ye.EditorState.createWithContent(a)}i(o),c(!0),n(!0)}else c(!1),n(!1)}}}),(0,Ae.branch)((function(e){return!!e.contentEditing}),Lt)),Ft=(0,Ae.compose)((0,Ae.withHandlers)({save:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(e){return n("html",e)}}}),(0,Ae.branch)((function(e){return e.mode===p.nl.EDIT}),Zt),(0,Ae.compose)((0,Ae.withPropsOnChange)(["sectionType"],(function(e){var t=e.sectionType;return{placeholder:p.ID.TITLE===t?"geostory.builder.defaults.htmlTitlePlaceholder":"geostory.builder.defaults.htmlPlaceholder",placeholderTag:p.ID.TITLE===t?"h1":"p"}})),(0,qe.Z)("placeholder")))((function(e){var t=e.placeholder,n=e.placeholderTag,r=void 0===n?"p":n,o=e.id,a=e.toggleEditing,c=void 0===a?function(){}:a,l=e.html,s=e.mode;return i().createElement("div",{className:"ms-text-wrapper"},l!==p.gg&&i().createElement("div",{id:o,onClick:function(){return c(!0,l)},dangerouslySetInnerHTML:{__html:l}}),(!l||l===p.gg)&&s===p.nl.EDIT&&i().createElement("div",{className:"ms-text-placeholder",id:"placeholder"+o,onClick:function(){return c(!0,l===p.gg?"":l)},dangerouslySetInnerHTML:{__html:"<".concat(r,">").concat(t,"</").concat(r,">")}}))}));var _t=n(1206),Bt=n.n(_t),Wt=n(96797),Ut=n.n(Wt);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yt(e,t)}function Qt(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Kt(e){return Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kt(e)}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Kt(r);if(o){var n=Kt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qt(this,e)});function c(){return Ht(this,c),a.apply(this,arguments)}return t=c,n=[{key:"componentDidMount",value:function(){Ut()(this._node)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.src!==this.props.src&&Ut()(this._node)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.src,o=t.fit,a=void 0===o?"cover":o,c=t.enableFullscreen,l=void 0===c||c,s=t.fullscreen,u=t.onClick,p=t.description,f=t.showCaption,d=t.caption,y=void 0===d?p:d,m=t.credits,b=t.loaderStyle,g=this.props.loaderComponent,v=this.props.errorComponent;return i().createElement("div",{id:n,className:"ms-media ms-media-image"},r&&"error"!==this.props.status&&i().createElement("img",{ref:function(t){e._node=t},src:r,onLoad:function(){return e.props.onChangeStatus("loaded")},onError:function(){return e.props.onChangeStatus("error")},onClick:l?function(){return u(!0)}:void 0,style:{objectFit:a,fontFamily:"object-fit: ".concat(a),cursor:l?"pointer":"default"}}),r&&!this.props.status&&g&&i().createElement(g,{style:Vt({},b)}),"error"===this.props.status&&v&&i().createElement(v,null),m&&i().createElement("div",{className:"ms-media-credits"},i().createElement("small",null,m)),f&&y&&i().createElement("div",{className:"ms-media-caption"},i().createElement("small",null,y)),l&&s?i().createElement(Bt(),{mainSrc:r,onCloseRequest:function(){return u(!1)}}):null)}}],n&&qt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);Xt($t,"propTypes",{src:He().string,id:He().string,fit:He().string,description:He().string,showCaption:He().bool,credits:He().string,altText:He().string,enableFullscreen:He().bool,fullscreen:He().bool,onClick:He().func,onChangeStatus:He().func,status:He().string,loaderComponent:He().oneOfType([He().element,He().func]),errorComponent:He().oneOfType([He().element,He().func]),caption:He().string,loaderStyle:He().object});const Jt=(0,Ae.compose)((0,Ae.withState)("fullscreen","onClick",!1),(0,Ae.withState)("status","onChangeStatus",""))($t);var en=n(80681),tn=n(19180),nn=n(91812),rn=n(37981),on=n(69705),an=n(57068),cn=n(1979),ln=n(55745),sn=n.n(ln),un=n(65442),pn=n.n(un),fn=n(47359),dn=n(18446),yn=n.n(dn),mn=n(24262),bn=n(88798),gn=n(49243),vn=n(13311),hn=n.n(vn),On=["rawPos"],wn=["PopupSupport","tools"];function En(){return En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},En.apply(this,arguments)}function Pn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e){return e&&0===e.indexOf("geostory-vector")}var xn=(0,Ae.compose)((0,a.connect)((function(e){return{sections:(0,V.NR)(e)}}),{onClickMarker:y.Vx}),(0,Ae.withHandlers)({onClickMarker:function(e){var t=e.onClickMarker,n=void 0===t?function(){}:t,r=e.sections,o=void 0===r?{}:r;return function(e,t,r){var a=hn()(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.queryParams,r=(n=void 0===n?{}:n).request,o=e.layerMetadata,i=(o=void 0===o?{}:o).title;return!r&&i.toLowerCase()===t}))||{},c=a.response,l=(c=void 0===c?{}:c).features,s=jn(l=void 0===l?[]:l,1)[0],u=(s=void 0===s?{}:s).contentRefId,p=hn()(o,(function(e){var t=e.contents;return hn()(t,{id:u})})),f={popups:[]};if(p){var d=hn()(p.contents,{id:u})||{},y=d.id,m=d.title,b=void 0===m?"":m;n('sections[{"id":"'.concat(p.id,'"}].contents[{"id":"').concat(y,'"}].carouselToggle'),!0),b&&(f={popups:r.map((function(e){return Tn(Tn({},e),{},{component:function(){return i().createElement("div",{className:"ms-geostory-carousel-viewer"},b)}})}))})}return f}}})),An=(0,Ae.mapPropsStream)((function(e){var t=(0,Ae.createEventHandler)(),n=t.stream,r=t.handler;return n.withLatestFrom(e.map((function(e){return{map:e.map,layers:e.layers,options:e.options}})).distinctUntilChanged((function(e,t){return yn()(e,t)}))).switchMap((function(e){var t=jn(e,2),n=t[0],r=n.point,o=n.layerInfo,i=t[1],a=i.map,c=i.layers,l=void 0===c?[]:c,s=i.options,u=(s=void 0===s?{}:s).mapOptions,p=(u=void 0===u?{}:u).mapInfoFormat,f=void 0===p?(0,cn.GA)():p,d=l.filter((function(e){return(0,mn.T4)(e,a.resolution)&&(0,bn.y_)(e)}));In(o)&&(d=d.filter((function(e){var t=e.id;return o===t})));var y=["SLD_BODY"],m=["buffer","cql_filter","filter","propertyName"];return 0===d.length?b.Observable.of({requests:[{}],responses:[{response:{features:[]}}],validResponses:[]}):b.Observable.from(d).mergeMap((function(e){var t=(0,bn.Fm)(e,{format:f,map:a,point:r,currentLocale:"en-US"}),n=t.url,o=t.request,i=t.metadata,c=n,l=o,s=Tn(Tn({},(0,bn.K7)(e,m,y)),l),u=Z()();return(n?(0,gn.y)(c,s,e).map((function(e){return e.data.exceptions?{reqId:u,exceptions:e.data.exceptions,queryParams:l,layerMetadata:i}:{data:e.data,reqId:u,queryParams:l,layerMetadata:Tn(Tn({},i),{},{features:e.features,featuresCrs:e.featuresCrs})}})):b.Observable.of(function(e,t,n){var r={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t.lng,t.lat]}},o=n&&n.units;switch(o){case"m":default:o="meters";break;case"deg":o="degrees";break;case"mi":o="miles"}var i=n&&n.resolution||1,a=sn()(r,(n.buffer||1)*i,o);return{data:{crs:null,features:(e.features||[]).filter((function(e){try{return"FeatureCollection"===e.type&&e.features&&e.features.length?e.features.reduce((function(e,t){var r=t.properties.useGeodesicLines&&t.properties.geometryGeodesic?Tn(Tn({},t),{},{geometry:t.properties.geometryGeodesic}):t;return e||pn()(a,i&&n.buffer&&o?sn()(r,1,"meters"):r)}),!1):pn()(a,i&&n.buffer&&o?sn()(e,1,"meters"):e)}catch(e){return!1}})),totalFeatures:"unknown",type:"FeatureCollection"},queryParams:t,layerMetadata:n}}(e,o,i))).catch((function(e){return{error:e.data||e.statusText||e.status,reqId:u,queryParams:l,layerMetadata:i}})).startWith({start:!0,reqId:u,request:s})})).scan((function(e,t){var n=e.requests,r=e.responses,i=e.validResponses;if(t.start){var a=t.reqId,c=t.request;return{requests:n.concat({reqId:a,request:c}),responses:r,validResponses:i}}var l=t.data,s=t.queryParams,u=t.layerMetadata,p=(0,bn.Te)(f),d=r.concat({response:l,queryParams:s,layerMetadata:u});return{requests:n,validResponses:p.getValidResponses(d),responses:d,layerInfo:o}}),{requests:[],responses:[],validResponses:[],layerInfo:o})})).startWith({requests:[],responses:[]}).combineLatest(e,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Tn(Tn({},t),{},{mapInfo:e,getFeatureInfoHandler:r})}))}));const Dn=(0,Ae.branch)((function(e){var t=e.map,n=(t=void 0===t?{}:t).mapInfoControl,r=void 0!==n&&n;return!e.isDrawEnabled&&r}),(0,Ae.compose)(An,(0,Ae.withStateHandlers)({popups:[]},{onClick:function(e,t){var n=t.getFeatureInfoHandler,r=void 0===n?function(){}:n,o=t.map,i=(o=void 0===o?{}:o).mapInfoControl;return function(e,t){var n=e.rawPos,o=void 0===n?[]:n,a=Pn(e,On);return In(t)||i?(r({point:a,layerInfo:t}),{popups:[{position:{coordinates:o},id:Z()()}]}):{popups:[]}}},onPopupClose:function(){return function(){return{popups:[]}}}}),(0,Ae.withPropsOnChange)(["mapInfo","popups"],(function(e){var t=e.mapInfo,n=e.popups,r=e.options,o=(r=void 0===r?{}:r).mapOptions,a=(o=void 0===o?{}:o).mapInfoFormat,c=void 0===a?(0,cn.GA)():a,l=e.onClickMarker,s=void 0===l?function(){}:l,u=t.responses,p=t.requests,f=t.validResponses,d=t.layerInfo;return In(d)?s(f,d,n):{popups:n.map((function(e){return Tn(Tn({},e),{},{component:function(){return i().createElement(fn.Z,{renderValidOnly:!0,responses:u,requests:p,validResponses:f,format:c,showEmptyMessageGFI:!0,missingResponses:(p||[]).length-(u||[]).length})}})}))}})),(0,Ae.withPropsOnChange)(["plugins","onPopupClose","popups"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,n=e.popups,r=e.onPopupClose,o=t.PopupSupport,a=t.tools,c=void 0===a?{}:a,l=Pn(t,wn);if(!o)return{};var s=function(e){return i().createElement(o,En({},e,{popups:n,onPopupClose:r}))};return{plugins:Tn(Tn({},l),{},{tools:Tn(Tn({},c),{},{popup:s})})}}))));var Mn=n(61928);const Rn=(0,Ae.compose)(on.Z,(0,nn.Z)(0),tn.Z,Dn,cn.yM,rn.Z,an.e)(Mn.Z);var Nn=n(99534),Ln=n(15135),Zn=n(80628),Fn=n(38560),_n=["id","map","fit","editMap","onMapViewChanges","eventHandlers","expandable","active","setActive","width","height","size","showCaption","caption","mapType","onMapTypeLoaded","layers","children"],Bn=["layers","mapOptions","description"];function Wn(){return Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wn.apply(this,arguments)}function Un(e){return function(e){if(Array.isArray(e))return zn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Yn=(0,Ln.Z)(Fn.Z);const Qn=(0,Ae.compose)((0,Ae.withState)("active","setActive",!1),Zn.Z)((function(e){var t=e.id,n=e.map,r=void 0===n?{layers:[Y.D]}:n,a=e.fit,c=e.editMap,l=void 0!==c&&c,s=e.onMapViewChanges,u=e.eventHandlers,f=e.expandable,d=void 0!==f&&f,y=e.active,m=e.setActive,b=e.width,g=e.height,v=e.size,h=e.showCaption,O=e.caption,w=e.mapType,E=void 0===w?"leaflet":w,P=e.onMapTypeLoaded,j=e.layers,S=e.children,C=qn(e,_n),T=r.data?r.data:r,k=T.layers,I=void 0===k?[]:k,x=T.mapOptions,A=void 0===x?{}:x,D=T.description,M=qn(T,Bn),R=O||D,N=d?y?{zoomControl:!1,interactive:!0,mapOptions:{scrollWheelZoom:!0,interactions:{mouseWheelZoom:!0,dragPan:!0}}}:{zoomControl:!1,interactive:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!1}}}:{mapOptions:A},L=l?{mapOptions:Vn(Vn({},A),{},{interactions:Vn(Vn({},A.interactions),{},{mouseWheelZoom:M.zoomControl})})}:N,Z=!C.isDrawEnabled&&M.mapInfoControl&&!(d&&!y),F=i().createElement(i().Fragment,null,i().createElement(Rn,Wn({},C,{key:d?"overlay":"block",onMapViewChanges:s,eventHandlers:u,map:Vn(Vn({},M),{},{id:"media-".concat(t),resize:b+"-"+g+"_"+v,className:"aaaa",style:Vn({cursor:Z?"pointer":"default"},d&&!y&&{pointerEvents:"none",touchAction:"none"})}),layers:j?[].concat(Un(I),Un(j)):I,tools:Z?["popup"]:[],options:(0,p.kn)(L),mapType:E,onMapTypeLoaded:P}),o.Children.map(S,(function(e){return e?(0,o.cloneElement)(e,{mapType:E}):null}))),d&&!l&&i().createElement(Yn,{className:"ms-expand-media-button",onClick:function(){return m(!y)},tooltipId:y?"geostory.closeFullscreenMap":"geostory.showFullscreenMap",tooltipPosition:"left"},i().createElement(en.Glyphicon,{glyph:y?"1-close":"1-full-screen"})));return i().createElement("div",{className:"ms-media ms-media-map ".concat(A.zoomPosition||""),style:{objectFit:a}},y&&d?i().createElement(Nn.Z,null,i().createElement("div",{className:"ms-expanded-media-container"},F)):F,h&&R&&i().createElement("div",{className:"ms-media-caption"},i().createElement("small",null,R)))}));var Kn=n(52826),Xn=["debounceTime","mediaViewer","children"];function $n(){return $n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$n.apply(this,arguments)}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var er=Jt,tr={image:Jt,map:Qn,video:Kn.Z},nr=function(e){var t,n,r=e.debounceTime,a=e.mediaViewer,c=e.children,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Xn),s="".concat(l.id).concat(l.resourceId?"-".concat(l.resourceId):""),u=(t=(0,o.useState)({}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],f=u[1],d=void 0===p[s]||p[s],y=a||tr[l.mediaType||l.type]||er;return i().createElement(y,$n({sectionType:l.sectionType,debounceTime:r,loading:p,isLoading:d,onLoad:f,loadingId:s},l),c)};nr.propTypes={id:He().string,lazy:He().bool,mediaType:He().string,type:He().string,debounceTime:He().number},nr.defaultProps={id:"",lazy:!0,mediaType:"",type:""};const rr=nr;var or=n(7472),ir=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ar.apply(this,arguments)}function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ur=function(e){var t=e.show,n=e.style,r=void 0===n?{}:n,o=e.modal,a=e.draggable,c=void 0!==a&&a,l=e.closeGlyph,s=void 0===l?"1-close":l,u=e.closable,p=void 0===u||u,f=e.onClose,d=void 0===f?function(){}:f,y=e.title,m=e.header,b=e.footer,g=e.children,v=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ir);return t?i().createElement(or.Z,ar({modal:o,onClickOut:p&&o?function(){return d()}:null,style:lr(lr({},r),{},{display:t?"block":"none"}),draggable:c},v),i().createElement("span",{role:"header"},y||m||i().createElement("span",null,""),p?i().createElement("button",{onClick:function(){return d()},className:"settings-panel-close close"},i().createElement(en.Glyphicon,{glyph:s})):null),i().createElement("span",{role:"body"},g),b?i().createElement("span",{role:"footer"},b):null):null};var pr=n(5346),fr=(0,Ae.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.viewHeight,o=e.size;return!n||!r||!o}),(0,Fe.Z)((function(){return!0}),(function(){return{glyph:"code"}})));const dr=(0,Ae.compose)(fr)((function(e){var t=e.src,n=e.size,r=e.viewHeight;return i().createElement("div",{className:"ms-webpage-wrapper"},i().createElement("iframe",{src:t,height:"".concat((0,p.t4)(n,r),"px")}))}));var yr=n(11847),mr=n(63202),br=n(48759),gr=n(23279),vr=n.n(gr);function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pr=function(e){var t,n,r=e.id,a=e.onLoad,c=e.loading,l=e.debounceTime,s=e.children,u=e.loaderComponent,p=e.loaderStyle,f=(t=(0,br.YD)(),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Er(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=f[0],y=f[1],m=(0,o.useRef)(null),b=u;return(0,o.useEffect)((function(){return m.current=vr()((function(e){a(e)}),l),function(){m.current.cancel()}}),[]),(0,o.useEffect)((function(){y&&c&&m.current(r),!y&&c&&m.current.cancel()}),[y,c,r]),i().createElement("div",{ref:d,className:"ms-visibility-container"},c?b?i().createElement(b,{style:Or({},p)}):null:(0,o.cloneElement)(s,{inView:y}))};Pr.propTypes={id:He().string,debounceTime:He().number,loading:He().bool,onLoad:He().func,loaderComponent:He().oneOfType([He().element,He().func])},Pr.defaultProps={id:"",debounceTime:300,loading:!0,onLoad:function(){},loaderComponent:null};const jr=Pr;var Sr=n(32425);function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ir(e,t)}function xr(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ar(e)}function Ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dr(e){return Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dr(e)}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rr=function(){return i().createElement("div",{className:"ms-media-loader"},i().createElement(Sr.Z,{size:52}))},Nr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ir(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dr(r);if(o){var n=Dr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xr(this,e)});function c(){var e;Tr(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mr(Ar(e=a.call.apply(a,[this].concat(n))),"state",{url:e.props.src||"",error:!1,loading:!0}),Mr(Ar(e),"updateURL",(function(t){var n=t.target.value;e.setState({url:n})})),Mr(Ar(e),"save",(function(){var t=e.state.url,n=!(0,yr.K2)(t,(0,mr.u8)("GeoStoryValidIframeURLRegex"));e.setState({error:n}),n||e.props.onChange(t)})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.editURL,o=this.state,a=o.url,c=o.error;return i().createElement(i().Fragment,null,i().createElement(Nn.Z,null,i().createElement(ur,{modal:!0,show:r,onClickOut:function(e){return e.preventDefault()&&e.stopPropagation()},title:i().createElement(pr.Z,{msgId:"geostory.webPageCreator.title"}),onClose:n,id:"web-page-creator",footer:i().createElement(Fn.Z,{bsSize:"small",onClick:this.save},i().createElement(pr.Z,{msgId:"geostory.webPageCreator.saveButton"}))},c&&i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement(pr.Z,{msgId:"geostory.webPageCreator.error"})),i().createElement(en.FormGroup,{controlId:"WEBPAGE_URL",validationState:c&&"error"},i().createElement(en.ControlLabel,null,i().createElement(pr.Z,{msgId:"geostory.webPageCreator.url.label"})),i().createElement(en.FormControl,{label:"URL",type:"text",value:a,onChange:this.updateURL,required:!0})))),this.props.lazy?i().createElement(jr,{key:this.props.id,id:this.props.id,debounceTime:this.props.debounceTime,loading:this.state.loading,onLoad:function(){return e.setState({loading:!1})},loaderComponent:Rr},i().createElement(dr,this.props)):i().createElement(dr,this.props))}}])&&kr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(i().PureComponent);Mr(Nr,"propTypes",{editURL:He().bool,onClose:He().func,onChange:He().func,src:He().string,id:He().string,debounceTime:He().number,lazy:He().bool}),Mr(Nr,"defaultProps",{lazy:!0});var Lr=(0,Ae.compose)((0,Ae.withHandlers)({onClose:function(e){var t=e.update,n=void 0===t?function(){}:t;return function(){return n("editURL",!1,"merge")}}}))(Nr);const Zr=(0,a.connect)(null,{onChange:y.YM})(Lr);var Fr=["type"];function _r(){return _r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_r.apply(this,arguments)}var Br=function(e){var t=e.type;return i().createElement("div",{className:"ms-content ms-content-unknown"},'warning: unknown content type "'.concat(t,'"'))};const Wr=function(e){var t=e.type,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Fr),r=function(e){switch(e){case p.bT.TEXT:return Ft;case p.bT.MEDIA:case p.Tr.IMAGE:case p.Tr.MAP:case p.Tr.VIDEO:return rr;case p.bT.WEBPAGE:return Zr;default:return Br}}(t);return i().createElement(r,_r({type:t},n))};var Ur=n(25288),zr=n(80717);function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}var Vr=["onClick"];function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Jr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Kr(e,t)}function Xr(e,t){if(t&&("object"===Gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $r(e){return $r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$r(e)}function Jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kr(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$r(r);if(o){var n=$r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Xr(this,e)});function c(){return Yr(this,c),a.apply(this,arguments)}return t=c,n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.trigger||e.containerWidth===this.props.containerWidth&&e.containerHeight===this.props.containerHeight||this.trigger.hide()}},{key:"render",value:function(){var e=this;return i().createElement(Ur.Z,{className:"add-bar",popoverClassName:"add-bar-popover",content:i().createElement(zr.Z,{btnDefaultProps:{className:"square-button btn-tray"},buttons:this.props.buttons.map((function(t){var n=t.onClick,r=void 0===n?function(){}:n;return qr(qr({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Vr)),{},{onClick:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.apply(void 0,n),e.trigger.hide(),n[0]&&n[0].preventDefault&&n[0].preventDefault()}})}))}),ref:function(t){t&&(e.trigger=t.trigger)},placement:"top"},i().createElement(Fn.Z,{className:this.props.addButtonClassName},i().createElement(en.Glyphicon,{glyph:"plus"})))}}],n&&Qr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(i().Component);Jr(eo,"propTypes",{id:He().string,type:He().string,buttons:He().array,containerWidth:He().oneOfType([He().number,He().string]),containerHeight:He().oneOfType([He().number,He().string]),addButtonClassName:He().string}),Jr(eo,"defaultProps",{id:"",type:"",buttons:[],containerWidth:0,containerHeight:0,addButtonClassName:""});const to=eo;var no=["id"];function ro(e){return function(e){if(Array.isArray(e))return oo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(Object(n),!0).forEach((function(t){co(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(){return lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lo.apply(this,arguments)}function so(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const uo=function(e){var t=e.viewWidth,n=e.viewHeight,r=e.className,o=e.contentProps,a=void 0===o?{}:o,c=e.addButtons,l=void 0===c?[]:c,s=e.tools,u=void 0===s?[]:s,f=e.contents,d=void 0===f?[]:f,y=e.ContentComponent,m=void 0===y?Wr:y,b=e.mode,g=e.sectionType,v=e.editMedia,h=void 0===v?function(){}:v,O=e.editWebPage,w=void 0===O?function(){}:O,E=e.add,P=void 0===E?function(){}:E,j=e.update,S=void 0===j?function(){}:j,C=e.remove,T=void 0===C?function(){}:C,k=e.bubblingTextEditing,I=void 0===k?function(){}:k,x=e.storyTheme,A=e.sections,D=void 0===A?[]:A,M=e.storyFonts,R=e.innerRef;return i().createElement("div",{ref:R,className:r},d.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,o=r.id,c=so(r,no),s=[i().createElement(m,lo({id:o,key:"".concat(o,"-content"),mode:b,viewWidth:t,sectionType:g,viewHeight:n,editMedia:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return h.apply(void 0,[{path:'contents[{"id": "'.concat(o,'"}]')+n}].concat(i))},editWebPage:function(e){for(var t=e.path,n=void 0===t?"":t,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return w.apply(void 0,[{path:'contents[{"id": "'.concat(o,'"}]')+n}].concat(i))},add:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P.apply(void 0,['contents[{"id": "'.concat(o,'"}].')+e].concat(n))},update:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S.apply(void 0,['contents[{"id": "'.concat(o,'"}].')+e].concat(n))},remove:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return T.apply(void 0,['contents[{"id": "'.concat(o,'"}]')+(e?"."+e:"")].concat(n))}},a,c,{storyTheme:x,storyFonts:M,bubblingTextEditing:I,tools:u&&u[c.type],sections:D}))];return b===p.nl.EDIT&&l.length>0&&s.push(i().createElement(to,{key:"".concat(o,"-content-add-buttons"),containerWidth:t,containerHeight:n,buttons:l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ao(ao({},e),{},{onClick:function(){return P("contents",o,e.template)}})}))})),[].concat(ro(e),s)}),[]))};n(66337);var po=["onVisibilityChange","rootSelector"],fo=["intersectionObserverOptions","onVisibilityChange"];function yo(){return yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yo.apply(this,arguments)}function mo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const bo=function(e){return(0,Ae.compose)((0,Ae.withHandlers)({onVisibilityChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.onVisibilityChange,r=void 0===n?function(){}:n;return function(e,n){return r({id:t,visible:e,entry:n})}}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onVisibilityChange,n=(e.rootSelector,mo(e,po));return function(e){return function(r){var o=r.intersectionObserverOptions,a=void 0===o?{}:o,c=r.onVisibilityChange,l=mo(r,fo),s=t||c;return i().createElement(br.df,yo({},n,a,{onChange:s}),(function(t){var n=t.inView,r=t.ref,o=t.entry;return i().createElement(e,yo({},l,{inView:n,inViewRef:r,inViewEntry:o}))}))}}}(e))};var go=n(90085),vo=n(12610),ho=n(23560),Oo=n.n(ho);function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Po=(0,vo.Z)(en.DropdownButton);function jo(e){var t=e.value,n=e.options,r=void 0===n?[]:n,a=e.onSelect,c=void 0===a?function(){}:a,l=e.glyph,s=void 0===l?"":l,u=e.tooltipId,p=e.pullRight,f=void 0!==p&&p,d=e.className,y=void 0===d?"square-button-md no-border":d,m=e.disabled,b=e.noTooltipWhenDisabled,g=void 0!==b&&b,v=e.hideMenuItem,h=void 0===v?function(){return!1}:v,O=e.shouldClose,w=e.showSelectionInTitle,E=void 0===w||w,P=wo((0,o.useState)(!1),2),S=P[0],C=P[1],T=wo((0,o.useState)(!1),2),k=T[0],I=T[1],x=(hn()(r,(function(e){return yn()(e.value,t)}))||{}).glyph;return(0,o.useEffect)((function(){m&&C(!1)}),[m]),i().createElement(Po,{noCaret:!0,open:S,noTooltipWhenDisabled:g,tooltipId:u,pullRight:f,className:y,disabled:m,title:i().createElement(en.Glyphicon,{glyph:E&&x||s}),onToggle:function(e,n,r){return k||"select"===(null==r?void 0:r.source)||O&&!O(t,n)?null:C(e)}},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==e?void 0:e.Component)||en.MenuItem;return h(t,e)?null:i().createElement(n,{key:e.value,selected:t,value:e.value,active:Oo()(null==e?void 0:e.isActive)&&e.isActive(t)||!j()(t)&&t===e.value,onClick:null!=e&&e.Component?c:function(){return c(e.value)},onActive:function(e){return I(e)}},e.label)})))}var So=n(12122),Co=n(11766),To=n(13218),ko=n.n(To);function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){Ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Do(){return Do=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Do.apply(this,arguments)}function Mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ro=(0,So.Z)(go.Z),No={primary:"btn-primary",default:"btn-default"},Lo=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c,s=e.filterOptions,u=e.pullRight,p=e.sizeType,f=function(e,t){var n,r,o="horizontal",i="",a=(n=e&&e.split(",")||[],r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mo(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],l=a[1],s=e,u="resize-horizontal";return t===o?(i="h-",s=c):"vertical"===t&&(i="v-",s=l,u="resize-vertical"),{sizeProp:function(e){return t?"".concat(t===o?e:c,",").concat("vertical"===t?e:l):e},pre:i,_size:s,glyph:u}}(a,p),d=f.pre,y=f._size,m=f.glyph,b=f.sizeProp;return i().createElement(jo,Do({value:y,noTooltipWhenDisabled:!0,disabled:n,glyph:m,pullRight:u||("right"===r||y==="".concat(d,"full")||y==="".concat(d,"large"))&&!o,tooltipId:"geostory.contentToolbar.contentSize",options:[{value:"".concat(d,"small"),glyph:"size-small",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.smallSizeLabel"})},{value:"".concat(d,"medium"),glyph:"size-medium",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.mediumSizeLabel"})},{value:"".concat(d,"large"),glyph:"size-large",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.largeSizeLabel"})},{value:"".concat(d,"full"),glyph:"size-extra-large",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.fullSizeLabel"})}].filter((function(e){return!s||s(e)})),onSelect:function(e){return l("size",b(e))}},p&&{showSelectionInTitle:!1}))},Zo=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.align,o=e.sectionType,a=e.size,c=e.update,l=void 0===c?function(){}:c;return i().createElement(jo,{value:r,noTooltipWhenDisabled:!0,disabled:"full"===a||n,glyph:"align-center",pullRight:("right"===r||"full"===a||"large"===a)&&!o,tooltipId:"geostory.contentToolbar.contentAlign",options:[{value:"left",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.leftAlignLabel"}),glyph:"align-left"},{value:"center",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.centerAlignLabel"}),glyph:"align-center"},{value:"right",label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.rightAlignLabel"}),glyph:"align-right"}],onSelect:function(e){return l("align",e)}})},Fo=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.theme,o=e.storyTheme,a=e.align,c=e.sectionType,l=e.update,s=void 0===l?function(){}:l,u=e.themeProps,p=e.size;return i().createElement(jo,{value:r,noTooltipWhenDisabled:!0,pullRight:("right"===a||"full"===p||"large"===p)&&!c,glyph:"dropper",tooltipId:"geostory.contentToolbar.contentTheme",disabled:n,shouldClose:function(e,t){var n,r;return ko()(e)&&"ms-color-picker-cover"!==(null==t||null===(n=t.target)||void 0===n||null===(r=n.getAttribute)||void 0===r?void 0:r.call(n,"class"))||E()(e)||void 0===e},hideMenuItem:function(e,t){return"custom"===(null==e?void 0:e.value)&&"custom"!==(null==t?void 0:t.value)},options:[{value:"",isActive:function(e){return void 0===e||""===e||ko()(e)&&(void 0===e.value||""===e.value)},label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.defaultThemeLabel"})},{value:"bright",isActive:function(e){return"bright"===(null==e?void 0:e.value)||"bright"===e},label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.brightThemeLabel"})},{value:"dark",isActive:function(e){return"dark"===(null==e?void 0:e.value)||"dark"===e},label:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.darkThemeLabel"})},{value:"custom",Component:function(e){return i().createElement(Co.H,Do({},e,{disableBackgroundAlpha:null==u?void 0:u.disableBackgroundAlpha,disableShadow:null==u?void 0:u.disableShadow,disableTextColor:null==u?void 0:u.disableTextColor,onUpdate:s,storyTheme:o}))}}],onSelect:function(e){return s("theme",xo(xo({},ko()(r)&&r),{},{value:e}))}})},_o=function(e){var t=e.editMap,n=void 0!==t&&t,r=e.forceDelBtnDisable,o=void 0!==r&&r,a=e.path,c=e.remove,l=void 0===c?function(){}:c,s=e.bsStyle;return i().createElement(Ro,{glyph:"trash",visible:!0,noTooltipWhenDisabled:!0,disabled:n||o,className:"".concat("square-button-md no-border"," ").concat(s&&No[s]),tooltipId:"geostory.contentToolbar.remove",confirmTitle:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.removeConfirmTitle"}),confirmContent:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.removeConfirmContent"}),onClick:function(){l(a)}})},Bo=["tools","children"];function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go={size:function(e){return{renderButton:i().createElement(Lo,e)}},align:function(e){return{renderButton:i().createElement(Zo,e)}},theme:function(e){return{renderButton:i().createElement(Fo,e)}},fit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.fit,o=e.update,i=void 0===o?function(){}:o;return{value:r,glyph:"contain"===r?"fit-cover":"fit-contain",disabled:n,visible:!0,tooltipId:"contain"===r?"geostory.contentToolbar.cover":"geostory.contentToolbar.fit",onClick:function(){return i("fit","contain"===r?"cover":"contain")}}},cover:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.cover,o=e.updateSection,i=void 0===o?function(){}:o;return{value:r,glyph:r?"height-auto":"height-view",visible:!0,disabled:n,tooltipId:r?"geostory.contentToolbar.contentHeightAuto":"geostory.contentToolbar.contentHeightView",onClick:function(){return i({cover:!r},"merge")}}},editMedia:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.path,o=e.editMedia,i=void 0===o?function(){}:o,a=e.sectionType;return{glyph:"pencil","data-button":"pencil",visible:!0,disabled:n,tooltipId:"geostory.contentToolbar.editMedia",onClick:function(){i({path:r},r?a:"")}}},remove:function(e){return{renderButton:i().createElement(_o,e)}},editMap:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=void 0===r?function(){}:r;return{glyph:"map-edit",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editMap",onClick:function(){o("editMap",!n)}}},editURL:function(e){var t=e.editURL,n=void 0!==t&&t,r=e.path,o=e.editWebPage,i=void 0===o?function(){}:o;return{glyph:"pencil",visible:!0,disabled:n,bsStyle:n?"success":"default",tooltipId:"geostory.contentToolbar.editURL",onClick:function(){i({path:r})}}},muted:function(e){var t=e.update,n=e.muted;return{glyph:n?"muted":"audio",visible:!0,active:!n,tooltipId:n?"geostory.contentToolbar.enableAudio":"geostory.contentToolbar.disableAudio",onClick:function(){t("muted",!n)}}},autoplay:function(e){var t=e.update,n=e.autoplay;return{glyph:"play-circle",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableAutoplay":"geostory.contentToolbar.enableAutoplay",onClick:function(){t("autoplay",!n)}}},loop:function(e){var t=e.update,n=e.loop;return{glyph:"loop",visible:!("cover"===e.fit),active:n,tooltipId:n?"geostory.contentToolbar.disableLoop":"geostory.contentToolbar.enableLoop",onClick:function(){t("loop",!n)}}},showCaption:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.update,o=e.showCaption,i=e.caption,a=e.description;return{glyph:"caption",visible:!(!i&&!a),disabled:n,active:!(!o||n),tooltipId:o?"geostory.contentToolbar.hideCaption":"geostory.contentToolbar.showCaption",onClick:function(){r("showCaption",!o)}}},add:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.addDisabled,o=void 0!==r&&r,i=e.add,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"plus",visible:!0,bsStyle:void 0===c?"default":c,tooltipId:"geostory.contentToolbar.add",disabled:n||o,onClick:a}},edit:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.edit,o=void 0===r?function(){}:r,i=e.bsStyle;return{glyph:"pencil",visible:!0,bsStyle:void 0===i?"default":i,tooltipId:"geostory.contentToolbar.edit",disabled:n,onClick:o}},marker:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.markerDisabled,o=void 0!==r&&r,i=e.marker,a=void 0===i?function(){}:i,c=e.bsStyle;return{glyph:"map-marker",visible:!0,tooltipId:"geostory.contentToolbar.marker",bsStyle:void 0===c?"default":c,disabled:n||o,onClick:a}},closeDraw:function(e){var t=e.editMap,n=void 0!==t&&t,r=e.bsStyle,o=void 0===r?"default":r,i=e.update,a=void 0===i?function(){}:i,c=e.onEnableDraw,l=void 0===c?function(){}:c;return{glyph:"1-close",visible:!0,tooltipId:"geostory.contentToolbar.closeMapEditing",bsStyle:o,disabled:!n,onClick:function(){l(null),a("editMap",!n)}}}};function Vo(e){var t=e.tools,n=void 0===t?[]:t,r=e.children,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Bo);return i().createElement("div",{className:"ms-content-toolbar"},i().createElement(zr.Z,{btnDefaultProps:{className:"square-button-md no-border",noTooltipWhenDisabled:!0},buttons:n.filter((function(e){return(null==e?void 0:e.id)&&Go[e.id]||Go[e]})).map((function(e){return(null==e?void 0:e.id)&&Go[e.id](Uo(Uo({},o),e))||Go[e](o)}))}),r)}var Ho=["id","inViewRef","innerRef","children","type","contentWrapperStyle","contentToolbar","mode"];function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){Qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ko=function(e){var t=e.id,n=e.inViewRef,r=e.innerRef,o=e.children,a=e.type,c=e.contentWrapperStyle,l=e.contentToolbar,s=e.mode,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ho),f=l||Vo;return i().createElement("div",{id:t,ref:n,style:Yo(Yo({},c),u.hideContent&&{display:"none"}),className:"ms-content ms-content-".concat(a).concat((0,p.w)(u))},i().createElement("div",{className:"ms-content-body",ref:r,style:(0,p.cy)(u)},s===p.nl.EDIT&&i().createElement(f,u),o))};function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(n),!0).forEach((function(t){Jo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ei=(0,Ae.compose)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Ae.nest.apply(void 0,t.concat([e]))}}(Ko),(0,Ae.setDisplayName)("ColumnContent"))(Wr),ti=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $o({id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:e},t)};const ni=(0,Ae.compose)((0,Ae.branch)((function(e){var t=e.type,n=e.sectionType;return[p.ID.IMMERSIVE,p.ID.CAROUSEL].includes(n)&&t===p.bT.COLUMN}),bo({threshold:[0,.25,.5,.75]})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Ae.nest.apply(void 0,t.concat([e]))}}(Ko),(0,Ae.setDisplayName)("SectionContent"),(0,Ae.branch)((function(e){return e.type===p.bT.COLUMN}),(0,Ae.renderComponent)((function(e){var t,n=e.viewWidth,r=e.viewHeight,o=e.contents,a=void 0===o?[]:o,c=e.mode,l=e.add,s=void 0===l?function(){}:l,u=e.editMedia,f=void 0===u?function(){}:u,d=e.editWebPage,y=void 0===d?function(){}:d,m=e.update,b=void 0===m?function(){}:m,g=e.remove,v=void 0===g?function(){}:g,h=e.bubblingTextEditing,O=void 0===h?function(){}:h,w=e.expandable,E=e.mediaViewer,P=e.contentToolbar,j=e.sections,S=void 0===j?[]:j,C=e.sectionType,T=e.overrideTools,k=void 0===T?function(e){return e}:T,I=e.storyFonts;return i().createElement(uo,{className:"ms-column-contents",ContentComponent:ei,contents:a,mode:c,add:s,editMedia:f,editWebPage:y,update:b,remove:v,viewWidth:n,viewHeight:r,bubblingTextEditing:O,sectionType:C,contentProps:{expandable:w,mediaViewer:E,contentToolbar:P},sections:S,storyFonts:I,tools:k((t={},Jo(t,p.bT.TEXT,["remove"]),Jo(t,p.Tr.IMAGE,["editMedia",ti(),"showCaption","remove"]),Jo(t,p.Tr.MAP,["editMedia","editMap",ti(!0),"showCaption","remove"]),Jo(t,p.bT.WEBPAGE,[ti(!0,{sizeType:"horizontal"}),"editURL",ti(!0,{sizeType:"vertical",filterOptions:function(e){return"v-full"!==e.value}}),"remove"]),Jo(t,p.Tr.VIDEO,["editMedia","muted","autoplay","loop","showCaption","remove"]),t)),addButtons:[{glyph:"sheet",tooltipId:"geostory.addTextContent",template:p.bT.TEXT},{glyph:"picture",tooltipId:"geostory.addMediaContent",template:p.bT.MEDIA},{glyph:"webpage",tooltipId:"geostory.addWebPageContent",template:p.bT.WEBPAGE}]})}))))(Wr),ri=(0,Ae.compose)((0,Ae.defaultProps)({ContentComponent:ni}),(0,Ae.withHandlers)({editMedia:function(e){var t=e.editMedia,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},editWebPage:function(e){var t=e.editWebPage,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=e.path,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return n.apply(void 0,[{path:'sections[{"id": "'.concat(r,'"}].')+t}].concat(i))}},add:function(e){var t=e.add,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},update:function(e){var t=e.update,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}},remove:function(e){var t=e.remove,n=void 0===t?function(){}:t,r=e.sectionId;return function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,['sections[{"id": "'.concat(r,'"}].')+e].concat(o))}}}),(0,Ae.setDisplayName)("SectionContents"))(uo);var oi=n(30998),ii=n.n(oi),ai=n(84753),ci=n.n(ai);function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){pi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ae.setObservableConfig)(De.Z);var fi=function(e,t){var n=ii()(e,{id:t});return e[-1!==n&&n?n:0]},di=(0,Ae.withProps)((function(e){var t=e.id,n=e.backgroundId,r=e.contents,o=fi(void 0===r?[]:r,n)||{},i=o&&o.id;return{background:x()(o,"background")||{type:"none"},contentId:i,sectionId:t,path:'sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(i,'"}].background')}})),yi=(0,Ae.withHandlers)({updateBackground:function(e){var t=e.sectionId,n=e.contentId,r=e.update,o=void 0===r?function(){}:r;return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return o.apply(void 0,['sections[{"id": "'.concat(t,'"}].contents[{"id": "').concat(n,'"}].background.')+e].concat(i))}},updateSection:function(e){var t=e.sectionId,n=e.update,r=void 0===n?function(){}:n;return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,['sections[{"id": "'.concat(t,'"}]')].concat(n))}}}),mi=(0,Ae.compose)(di,yi),bi=(0,Ae.mapPropsStream)((function(e){var t=(0,Ae.createEventHandler)(),n=t.handler,r=t.stream;return b.Observable.combineLatest(e,function(e,t){var n=e.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,r=t.visible,o=t.entry;return ui(ui({},e),{},pi({},n,{visible:r,entry:o}))}),{}).debounceTime(100).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{maxItem:ci()(Object.keys(e),(function(t){return e[t].visible?x()(e[t],"entry.intersectionRatio"):-1/0})),items:e}}));return b.Observable.merge(n.pluck("maxItem").distinctUntilChanged().map((function(e){return{backgroundId:e}})),n.map((function(e){var t=e.maxItem,n=e.items;return 0===x()(n[t],"entry.intersectionRatio")?"EMPTY":t})).withLatestFrom(t.pluck("updateCurrentPage")).do((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return i&&i({columnId:o})})).ignoreElements())}(r,e).startWith({}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ui(ui({},t.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return ui(ui({},e),t)}),{})),{},{onVisibilityChange:n})}))}));const gi=(0,Ae.compose)(bi,mi);var vi=n(89438);function hi(e){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hi(e)}function Oi(){return Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oi.apply(this,arguments)}function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){Ii(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t){return Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Si(e,t)}function Ci(e,t){if(t&&("object"===hi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ti(e)}function Ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(e){return ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ki(e)}function Ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xi=n(56936),Ai=n(83255),Di=n.n(Ai);function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){Ui(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Li(){return Li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Li.apply(this,arguments)}function Zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _i(e,t){return _i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_i(e,t)}function Bi(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wi(e){return Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wi(e)}function Ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_i(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wi(r);if(o){var n=Wi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bi(this,e)});function c(){return Zi(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=(0,p.cy)(this.props),t=!this.props.disableToolbarPortal&&this.refs&&this.refs.div&&this.refs.div.parentNode,n=this.props.sectionType===p.ID.TITLE?["editMedia","cover"]:["editMedia"],r=this.props.contentToolbar||Vo,o=i().createElement(r,Li({},this.props,{themeProps:{disableBackgroundAlpha:!0,disableTextColor:!0,disableShadow:!0},tools:this.props.tools&&this.props.type&&this.props.tools[this.props.type]||this.props.sectionType===p.ID.BANNER&&[].concat(n,["cover","remove"])||n}),this.props.contentToolbarChildren),a="".concat(this.props.sectionId||"ms","-media-").concat(this.props.id||this.props.resourceId);return i().createElement("div",{ref:"div",className:"ms-section-background",style:Ni({},this.props.style)},i().createElement("div",{className:"ms-section-background-container".concat((0,p.w)(this.props)),ref:this.props.innerRef,style:Ni(Ni({height:this.props.height},e),null!=tr&&tr[this.props.type]?{}:this.props.backgroundPlaceholder)},i().createElement(rr,Li({id:a},this.props,{enableFullscreen:!1,descriptionEnabled:!1,mediaViewer:this.props.mediaViewer,containerInView:this.props.inView}),this.props.children),this.props.mode===p.nl.EDIT&&(t?i().createElement(xi.h_,{container:t},o):o)))}}])&&Fi(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component);Ui(zi,"propTypes",{id:He().string,resourceId:He().string,sectionId:He().string,mode:He().string,fit:He().string,size:He().string,path:He().string,credits:He().string,description:He().string,height:He().number,width:He().number,tools:He().object,style:He().object,add:He().func,editMedia:He().func,update:He().func,updateSection:He().func,remove:He().func,type:He().oneOf(p.lg.MediaTypes),disableToolbarPortal:He().bool,backgroundPlaceholder:He().object,sectionType:He().string,src:He().string,theme:He().string,mediaViewer:He().func,contentToolbar:He().func,inView:He().bool,sections:He().array,innerRef:He().oneOfType([He().func,He().object]),contentToolbarChildren:He().node}),Ui(zi,"defaultProps",{height:0,size:"full",width:0,style:{},backgroundPlaceholder:{background:"url(".concat(Di(),")"),backgroundSize:"256px auto"}});const Gi=(Vi=zi,qi=Hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ki(r);if(o){var n=ki(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ci(this,e)});function c(){var e;Pi(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ii(Ti(e=a.call.apply(a,[this].concat(n))),"state",{style:{}}),Ii(Ti(e),"update",(function(t){if(e._stickybits){var n=document.querySelector(t);-1===e._stickybits.definePosition().indexOf("sticky")&&n&&(e._stickybits.update(),setTimeout((function(){var t=n.getBoundingClientRect(),r=t.top,o=t.left;e.setState({style:{top:r,left:o,width:n.scrollWidth-2}})})))}})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this._stickybits=this._node&&(0,vi.Z)(this._node,{scrollEl:this.props.scrollContainerSelector,noStyles:!0,useGetBoundingClientRect:!0}),this.update(this.props.scrollContainerSelector)}},{key:"componentWillReceiveProps",value:function(e){!this._stickybits||e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||this.update(e.scrollContainerSelector)}},{key:"componentWillUnmount",value:function(){this._stickybits&&this._stickybits.cleanup()}},{key:"render",value:function(){var e=this;return i().createElement(Vi,Oi({ref:function(t){t&&t.refs&&t.refs[e.props.refId]&&(e._node=t.refs[e.props.refId])},style:Ei({},this.state.style)},this.props),this.props.children)}}])&&ji(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.Component),Ii(Hi,"propTypes",{scrollContainerSelector:He().string,height:He().number,width:He().number,refId:He().string}),Ii(Hi,"defaultProps",{scrollContainerSelector:"body",height:0,width:0,refId:"div"}),qi);var Vi,Hi,qi,Yi=n(11636),Qi=n.n(Yi);function Ki(){return Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ki.apply(this,arguments)}function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $i=(0,Ae.compose)(gi,(0,Ae.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t,n=e.add,r=void 0===n?function(){}:n,o=e.editMedia,a=void 0===o?function(){}:o,c=e.editWebPage,l=void 0===c?function(){}:c,s=e.onVisibilityChange,u=void 0===s?function(){}:s,f=e.update,d=void 0===f?function(){}:f,y=e.updateBackground,m=void 0===y?function(){}:y,b=e.updateCurrentPage,g=void 0===b?function(){}:b,v=e.remove,h=void 0===v?function(){}:v,O=e.id,w=e.background,E=void 0===w?{}:w,P=e.path,j=e.contents,S=void 0===j?[]:j,C=e.mode,T=e.sectionType,k=e.inViewRef,I=e.viewWidth,A=e.viewHeight,D=e.focusedContent,M=e.contentId,R=e.bubblingTextEditing,N=void 0===R?function(){}:R,L=e.textEditorActiveClass,Z=void 0===L?"":L,F=e.expandableMedia,_=void 0!==F&&F,B=e.storyTheme,W=e.mediaViewer,U=e.contentToolbar,z=e.inView,G=e.sections,V=void 0===G?[]:G,H=e.storyFonts,q=D&&D.hideContent&&x()(D,"target.id")===M,Y=q?"hidden":"visible",Q=_&&E&&"map"===E.type?" ms-expandable-background":"",K=(null==B?void 0:B.overlay)||{},X=(null==B?void 0:B.general)||{};return i().createElement("section",{className:"ms-section ms-section-immersive".concat(Q),id:O,ref:k},i().createElement(Gi,Ki({},E,{mode:C,disableToolbarPortal:!0,tools:(t={},Xi(t,p.Tr.IMAGE,["editMedia","fit","size","align","theme"]),Xi(t,p.Tr.MAP,["editMedia","editMap","size","align","theme"]),Xi(t,p.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),t),scrollContainerSelector:"#ms-sections-container",add:r,editMedia:a,expandable:_,path:P,update:m,updateCurrentPage:g,remove:h,sectionType:T,sectionId:O,backgroundId:E.id,key:E.id,width:I,height:A,backgroundPlaceholder:{background:"url(".concat(Qi(),")"),backgroundSize:"600px auto"},storyTheme:X,mediaViewer:W,contentToolbar:U,inView:z})),i().createElement(ri,{tools:Xi({},p.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(Z),contents:S,mode:C,add:r,updateCurrentPage:g,editMedia:a,editWebPage:l,update:d,remove:h,sectionId:O,viewWidth:I,viewHeight:A,contentProps:{onVisibilityChange:u,contentWrapperStyle:{minHeight:A,visibility:Y},expandable:_,mediaViewer:W,contentToolbar:U},focusedContent:D,bubblingTextEditing:N,sectionType:T,storyTheme:K,sections:V,storyFonts:H}),C===p.nl.EDIT&&!q&&i().createElement(to,{containerWidth:I,containerHeight:A,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){r("sections",O,p.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){r("sections",O,p.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){r("sections",O,p.ID.PARAGRAPH)}},{glyph:"story-immersive-content",tooltipId:"geostory.addImmersiveContent",onClick:function(){r('sections[{"id": "'.concat(O,'"}].contents'),void 0,p.bT.COLUMN,"geostory.builder.defaults.titleImmersiveContent")}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){r("sections",O,p.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){r("sections",O,p.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){r("sections",O,p.tQ.WEBPAGE)}}]}))}));function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const na=function(e){var t=e.id,n=e.contents,r=e.mode,o=e.add,a=void 0===o?function(){}:o,c=e.update,l=void 0===c?function(){}:c,s=e.editMedia,u=void 0===s?function(){}:s,f=e.editWebPage,d=void 0===f?function(){}:f,y=e.remove,m=void 0===y?function(){}:y,b=e.inViewRef,g=e.viewWidth,v=e.viewHeight,h=e.expandableMedia,O=e.mediaViewer,w=e.contentToolbar,E=e.sections,P=void 0===E?[]:E,j=e.sectionType,S=e.storyFonts;return i().createElement("section",{className:"ms-section ms-section-paragraph",id:t,ref:b},i().createElement(ri,{className:"ms-section-contents",contents:n,mode:r,add:a,editMedia:u,editWebPage:d,update:l,remove:m,sectionId:t,viewWidth:g,viewHeight:v,sectionType:j,contentProps:{expandable:h,mediaViewer:O,contentToolbar:w,overrideTools:function(e){return ea(ea({},e),{},ta({},p.bT.TEXT,[(!0,{id:"size",filterOptions:function(e){return"full"!==e.value},pullRight:true}),"remove"]))}},sections:P,storyFonts:S}),r===p.nl.EDIT&&i().createElement(to,{containerWidth:g,containerHeight:v,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){a("sections",t,p.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){a("sections",t,p.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){a("sections",t,p.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){a("sections",t,p.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){a("sections",t,p.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){a("sections",t,p.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){a("sections",t,p.tQ.WEBPAGE)}}]}))};var ra=n(75492),oa=n.n(ra);function ia(){return ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ia.apply(this,arguments)}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ca=(0,Ae.compose)(mi,(0,Ae.withStateHandlers)({textEditorActive:!1},{bubblingTextEditing:function(){return function(e){return{textEditorActiveClass:e?" ms-text-editor-active":""}}}}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.contents,a=void 0===o?[]:o,c=e.mode,l=e.contentId,s=e.path,u=e.sectionType,f=e.cover,d=e.viewWidth,y=e.viewHeight,m=e.inViewRef,b=e.add,g=void 0===b?function(){}:b,v=e.update,h=void 0===v?function(){}:v,O=e.updateSection,w=void 0===O?function(){}:O,E=e.remove,P=void 0===E?function(){}:E,j=e.updateBackground,S=void 0===j?function(){}:j,C=e.editMedia,T=void 0===C?function(){}:C,k=e.focusedContent,I=e.bubblingTextEditing,A=void 0===I?function(){}:I,D=e.textEditorActiveClass,M=void 0===D?"":D,R=e.expandableMedia,N=void 0!==R&&R,L=e.storyTheme,Z=e.mediaViewer,F=e.contentToolbar,_=e.inView,B=e.sections,W=void 0===B?[]:B,U=e.storyFonts,z=x()(k,"target.id")===l,G=z?"hidden":"visible",V=N&&r&&"map"===r.type?" ms-expandable-background":"",H=(null==L?void 0:L.overlay)||{},q=(null==L?void 0:L.general)||{};return i().createElement("section",{ref:m,className:"ms-section ms-section-title".concat(V),id:t},i().createElement(xe.Z,null,(function(e){var t,n=e.height;return i().createElement(Gi,ia({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:c,id:l,path:s,update:S,add:g,editMedia:T,expandable:N,updateSection:w,cover:f,remove:P,width:d,sectionType:u,backgroundPlaceholder:{background:"url(".concat(f?Di():oa(),")"),backgroundSize:"".concat(f?64:600,"px auto")},tools:(t={},aa(t,p.Tr.IMAGE,["editMedia","cover","fit","size","align","theme"]),aa(t,p.Tr.MAP,["editMedia","cover","editMap","size","align","theme"]),aa(t,p.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop"]),t),height:n>=y?y:n,storyTheme:q,mediaViewer:Z,contentToolbar:F,inView:_}))})),i().createElement(ri,{className:"ms-section-contents".concat(M),contents:a,mode:c,add:g,sectionType:u,update:h,remove:P,sectionId:t,contentProps:{contentWrapperStyle:f?{minHeight:y,visibility:G}:{visibility:G},mediaViewer:Z,contentToolbar:F},tools:aa({},p.bT.TEXT,["size","align","theme","remove"]),focusedContent:k,bubblingTextEditing:A,storyTheme:H,sections:W,storyFonts:U}),c===p.nl.EDIT&&!z&&i().createElement(to,{containerWidth:d,containerHeight:y,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){g("sections",t,p.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){g("sections",t,p.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){g("sections",t,p.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){g("sections",t,p.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){g("sections",t,p.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){g("sections",t,p.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){g("sections",t,p.tQ.WEBPAGE)}}]}))}));function la(){return la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},la.apply(this,arguments)}function sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ua=(0,Ae.compose)(mi,(0,Ae.withStateHandlers)({textEditorActive:!1}))((function(e){var t=e.id,n=e.background,r=void 0===n?{}:n,o=e.mode,a=e.contentId,c=e.path,l=e.sectionType,s=void 0===l?p.ID.BANNER:l,u=e.cover,f=e.viewWidth,d=e.viewHeight,y=e.inViewRef,m=e.add,b=void 0===m?function(){}:m,g=e.updateSection,v=void 0===g?function(){}:g,h=e.remove,O=void 0===h?function(){}:h,w=e.updateBackground,E=void 0===w?function(){}:w,P=e.editMedia,j=void 0===P?function(){}:P,S=e.focusedContent,C=e.expandableMedia,T=void 0!==C&&C,k=e.storyTheme,I=e.mediaViewer,A=e.contentToolbar,D=e.inView,M=x()(S,"target.id")===a,R=T&&r&&"map"===r.type?" ms-expandable-background":"",N=c.replace(".background","");return i().createElement("section",{ref:y,className:"ms-section ms-section-banner".concat(R),id:t},i().createElement(xe.Z,null,(function(e){var t,n=e.height;return i().createElement(Gi,la({},r,{scrollContainerSelector:"#ms-sections-container",key:r.id,mode:o,id:a,path:c,update:E,add:b,editMedia:j,expandable:T,updateSection:v,cover:u,remove:function(){return O(N)},width:f,sectionType:s,backgroundPlaceholder:{background:"url(".concat(u?Di():oa(),")"),backgroundSize:"".concat(u?64:600,"px auto")},tools:(t={},sa(t,p.Tr.IMAGE,["editMedia","cover","fit","size","align","theme","remove"]),sa(t,p.Tr.MAP,["editMedia","cover","editMap","size","align","theme","remove"]),sa(t,p.Tr.VIDEO,["editMedia","cover","fit","size","align","theme","muted","autoplay","loop","remove"]),t),height:n>=d?d:n,storyTheme:k,mediaViewer:I,contentToolbar:A,inView:D}))})),i().createElement("div",{style:{minHeight:u?d:300,pointerEvents:"none"}}),o===p.nl.EDIT&&!M&&i().createElement(to,{containerWidth:f,containerHeight:d,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){b("sections",t,p.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){b("sections",t,p.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){b("sections",t,p.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){b("sections",t,p.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){b("sections",t,p.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){b("sections",t,p.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){b("sections",t,p.tQ.WEBPAGE)}}]}))}));var pa=n(71335),fa=n(94745);function da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ya(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ma=(0,qe.Z)("placeholder")(en.FormControl);const ba=function(e){var t,n,r,a=da((0,o.useState)([]),2),c=a[0],l=a[1],s=da((0,o.useState)({data:null==e||null===(t=e.thumbnail)||void 0===t?void 0:t.image}),2),u=s[0],p=s[1],f=da((0,o.useState)(null==e?void 0:e.title),2),d=f[0],y=f[1];return i().createElement(fa.Z,{fitContent:!0,title:i().createElement(pr.Z,{msgId:e.editing?"geostory.carouselEditTitle":"geostory.carouselAddTitle"}),show:!0,fade:!0,clickOutEnabled:!1,bodyClassName:"ms-flex modal-properties-container background-dialog",onClose:e.onClose,buttons:e.loading?[]:[{text:i().createElement(pr.Z,{msgId:e.editing?"save":"backgroundDialog.add"}),bsStyle:"primary",onClick:function(){e.update("thumbnail",{image:u.data}),e.update("title",d),e.onClose()}}]},i().createElement(en.Form,{style:{width:"100%"}},(r={FORMAT:i().createElement(pr.Z,{msgId:"map.errorFormat"}),SIZE:i().createElement(pr.Z,{msgId:"map.errorSize"})},c.length>0?i().createElement("div",{className:"dropzone-errorBox alert-danger"},i().createElement("p",null,i().createElement(pr.Z,{msgId:"map.error"})),c.map((function(e){return i().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},r[e])}))):null),i().createElement(pa.Z,{onUpdate:function(e,t){return p({data:e,url:t})},onError:function(e){return l(e)},message:i().createElement(pr.Z,{msgId:"backgroundDialog.thumbnailMessage"}),suggestion:"",map:{newThumbnail:x()(u,"url")||(null===(n=e.thumbnail)||void 0===n?void 0:n.image)||"NODATA"}}),i().createElement(en.FormGroup,null,i().createElement(en.ControlLabel,null,i().createElement(pr.Z,{msgId:"layerProperties.title"})),i().createElement(ma,{value:d,placeholder:"backgroundDialog.titlePlaceholder",onChange:function(e){return y(e.target.value)}}))))};var ga=n(25311),va=n(45567),ha=n(55877),Oa=n.n(ha),wa=n(73723),Ea=n.n(wa),Pa=n(15402);const ja=function(e){return t=e.type,n="",r="","addMap"===t?(n="ms-carousel-map-info",r="geostory.carouselAddMapInfo"):"addMarker"===t?(n="ms-carousel-marker-info",r="geostory.carouselPlaceMarkerInfo"):(n="ms-carousel-add-info",r="geostory.carouselAddItemInfo"),i().createElement("div",{className:n},i().createElement(Pa.Z,{msgId:r}));var t,n,r};var Sa=n(81593),Ca=["title","thumbnail","index","isSelected"],Ta=["onSort","sectionId","contents","onEnableDraw","isEditMap","isDrawEnabled"];function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aa(){return Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aa.apply(this,arguments)}function Da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ma(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Na=(0,ga.Z)((function(e){var t=e.title,n=e.thumbnail,r=e.index,o=e.isSelected,a=Ra(e,Ca),c=i().createElement("div",{className:Xe()("ms-geo-carousel-item",{"ms-geo-carousel-item-selected":o}),onClick:a.onClick},i().createElement("div",{className:"ms-geo-carousel-item-inner-wrapper",style:{backgroundImage:"url(".concat((null==n?void 0:n.image)||Ea(),")")}},i().createElement("span",{className:"ms-geo-carousel-item-inner"},t||"Item ".concat(r+1)),i().createElement("span",{className:"ms-geo-carousel-item-inner-index"},r+1)));return a.isDraggable&&a.connectDragSource?a.connectDragSource(c):c})),La=(0,va.Z)((function(e){var t=e.mode,n=e.add,r=e.update,a=void 0===r?function(){}:r,c=e.remove,l=e.sectionId,s=e.isMapBackground,u=e.contentId,f=e.items,d=e.contentToolbar,y=void 0===d?Vo:d,m=e.cardComponent,b=e.containerWidth,g=e.isDrawEnabled,v=e.onEnableDraw,h=e.isEditMap,O=e.innerRef,w=e.deltaSwipeSize,E=void 0===w?200:w,P=e.transition,j=void 0===P?300:P,S=e.style,C=e.controlStyle,T=Da((0,o.useState)(!1),2),k=T[0],I=T[1],x=Da((0,o.useState)(void 0),2),A=x[0],D=x[1],M=Da((0,o.useState)(""),2),N=M[0],L=M[1],Z=Da((0,o.useState)({}),2),F=Z[0],_=Z[1],B=(0,Sa.Z)({direction:"horizontal",width:b,deltaScroll:E,transition:j},[f.length]),W=B.isStartControlActive,U=B.isEndControlActive,z=B.containerPropsHandlers,G=B.contentPropsHandlers,V=B.itemPropsHandlers,H=B.moveToDeltaSize,q=B.moveItemInViewById,Y=t===p.nl.EDIT;(0,o.useEffect)((function(){u&&q(u,{margin:32})}),[u]);var Q=!(s&&!hn()(f,(function(e){var t;return 0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)})));return i().createElement(i().Fragment,null,i().createElement("div",{ref:O,style:S,className:"ms-geo-carousel"},Y&&1===f.length&&Q&&!h&&i().createElement(ja,{type:"addInfo"}),h&&Y&&g&&!!hn()(f,(function(e){var t;return e.id===u&&0===((null==e||null===(t=e.features)||void 0===t?void 0:t.length)||0)}))&&i().createElement(ja,{type:"addMarker"}),Y&&i().createElement(y,{addDisabled:Q,add:n,editMap:h,remove:function(){return c('sections[{"id":"'.concat(l,'"}]'))},tools:["add","remove"]}),i().createElement("div",Aa({},z(),{className:"ms-horizontal-menu"}),i().createElement("div",G(),f.map((function(e,t){var r=V({id:e.id,onClick:h?void 0:function(){a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(e.id,'"}].carouselToggle'),!0)}});return i().createElement("div",Aa({key:t},r,{className:"ms-geo-carousel-item-wrapper",style:h?{pointerEvents:"none"}:{}}),Y&&i().createElement(y,{editMap:h,markerDisabled:!s||(null==e?void 0:e.id)!==u,edit:function(t){t.stopPropagation(),function(e){D(null==e?void 0:e.id),I(!0),_(null==e?void 0:e.thumbnail),L(null==e?void 0:e.title)}(e)},remove:function(){var n,r,o,i;return o=null==e?void 0:e.id,i=0===t&&f.length>0?null===(n=f[t+1])||void 0===n?void 0:n.id:null===(r=f[t-1])||void 0===r?void 0:r.id,c('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(o,'"}]')),void(u===o&&a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(i,'"}].hideContent'),!1))},forceDelBtnDisable:(null==e?void 0:e.id)===u,add:n,marker:function(t){t.stopPropagation(),v(e)},tools:["edit","remove","marker"]}),i().createElement(m,Aa({key:t,index:t,items:f,update:a,sectionId:l,selectedId:u,isSelected:(null==e?void 0:e.id)===u},e)))}))),W&&i().createElement(Fn.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:Ia(Ia({},C),{},{position:"absolute"}),onClick:function(){return H(E)}},i().createElement(en.Glyphicon,{glyph:"chevron-left"})),U&&i().createElement(Fn.Z,{className:"square-button-md no-border ms-geo-carousel-control",style:Ia(Ia({},C),{},{position:"absolute",right:0}),onClick:function(){return H(-E)}},i().createElement(en.Glyphicon,{glyph:"chevron-right"})))),k&&i().createElement(ba,{title:N,thumbnail:F,update:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=R()(e)?"":".".concat(e);a('sections[{"id":"'.concat(l,'"}].contents[{"id":"').concat(n,'"}]')+o,t,r)},onClose:function(){return I(!1)}}))}));const Za=function(e){var t=e.onSort,n=e.sectionId,r=e.contents,o=void 0===r?[]:r,a=e.onEnableDraw,c=void 0===a?function(){}:a,l=e.isEditMap,s=e.isDrawEnabled,u=Ra(e,Ta);return i().createElement(La,Aa({containerId:n,isDraggable:u.mode===p.nl.EDIT,onSort:function(e,r,o,i){if(o.containerId===i.containerId){var a='sections[{ "id": "'.concat(n,'" }].contents[{"id":"').concat(i.id,'"}]'),c='sections[{ "id": "'.concat(n,'" }].contents'),l=e,s=Oa()();t(a,c,l,s,'sections[{ "id": "'.concat(n,'" }].contents[{"id":"').concat(s,'"}]'))}}},Ia(Ia({},u),{},{sectionId:n}),{cardComponent:Na,items:o.map((function(e){var t=e.id,n=e.thumbnail;return{id:t,thumbnail:void 0===n?{}:n,features:e.features,title:e.title}})),isDrawEnabled:s,onEnableDraw:c,isEditMap:l}))};var Fa=n(6909),_a=["map","active","method","mapId","mapType","features","options","onChange"];function Ba(){return Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ba.apply(this,arguments)}function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){za(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Va(e){var t,n,r=e.map,a=e.active,c=e.method,l=e.mapId,s=e.mapType,u=e.features,p=e.options,f=e.onChange,d=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_a),y=(t=(0,o.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ga(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=y[0],b=y[1];return(0,o.useEffect)((function(){b(a?"drawOrEdit":"clean")}),[a]),"openlayers"!==s?null:i().createElement(Fa.Z,Ba({},d,{map:r,drawOwner:l,drawStatus:m,drawMethod:c,features:u,options:Ua({drawEnabled:a,addClickCallback:!0,editEnabled:!0,featureProjection:"EPSG:4326",geodesic:!1,stopAfterDrawing:!1,transformToFeatureCollection:!0,translateEnabled:!1,useSelectedStyle:!0},p),onDrawingFeatures:f.bind(null,l)}))}Va.propTypes={active:He().bool,method:He().string,features:He().array,onChange:He().func,options:He().object},Va.defaultProps={active:!1,method:"Point",features:[],onChange:function(){},options:{}};const Ha=Va;var qa=n(86267),Ya=n(52043);function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ka={openlayers:{fit:function(e){var t,n=e.map,r=e.geometry,o=e.padding,i=e.geometryProjection,a=e.fixedZoom,c=e.maxZoom,l=e.duration,s=n.getView(),u=s.getProjection().getCode();if(2===r.length){var p=(0,qa.reproject)(r,i,u),f=p.x,d=p.y;t=new Ya.Z([f,d])}else t=(0,qa.reprojectBbox)(r,i,u);var y=o||{},m=y.top,b=void 0===m?0:m,g=y.right,v=void 0===g?0:g,h=y.bottom,O=void 0===h?0:h,w=y.left,E=void 0===w?0:w;s.fit(t,{padding:[b,v,O,E],maxZoom:a?s.getZoom():c,duration:l})}},leaflet:{fit:function(e){var t,n,r,o=e.map,i=e.geometry,a=e.padding,c=e.geometryProjection,l=e.fixedZoom,s=e.maxZoom,u=e.duration,p=l?o.getZoom():s,f=a.top,d=void 0===f?0:f,y=a.right,m=void 0===y?0:y,b=a.bottom,g=void 0===b?0:b,v=a.left,h=void 0===v?0:v;if(2===i.length){var O=(0,qa.reproject)(i,c,"EPSG:4326"),w=O.x,E=O.y;t=[[E,w],[E,w]]}else{var P=(n=(0,qa.reprojectBbox)(i,c,"EPSG:4326"),r=4,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qa(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=P[0],S=P[1],C=P[2];t=[[S,j],[P[3],C]]}o.flyToBounds(t,{paddingTopLeft:[h,d],paddingBottomRight:[m,g],maxZoom:p,animate:!!u,duration:u/1e3})}}};function Xa(e){var t=e.map,n=e.mapType,r=e.active,i=e.geometry,a=e.geometryProjection,c=void 0===a?"EPSG:4326":a,l=e.padding,s=e.maxZoom,u=e.fixedZoom,p=e.duration,f=(0,o.useRef)();return f.current=function(){t&&Ka[n]&&Ka[n].fit({map:t,geometry:i,padding:l,geometryProjection:c,maxZoom:s,fixedZoom:u,duration:p})},(0,o.useEffect)((function(){r&&i&&f.current()}),[i,r]),null}Xa.propTypes={id:He().string,map:He().object,mapType:He().string,active:He().bool,geometry:He().array,geometryProjection:He().string,padding:He().object,maxZoom:He().number,fixedZoom:He().bool,duration:He().number},Xa.defaultProps={geometryProjection:"EPSG:4326",padding:{top:0,right:0,bottom:0,left:0}};const $a=Xa,Ja=function(e){var t=e.currentIndex,n=e.contents,r=void 0===n?[]:n,o=e.onTraverseCard,a=void 0===o?function(){}:o;return i().createElement(i().Fragment,null,i().createElement(Fn.Z,{className:"ms-carousel-slider left-arrow",disabled:0===t,onClick:function(){return a()}},i().createElement(en.Glyphicon,{style:{fontSize:22},glyph:"chevron-left"})),i().createElement(Fn.Z,{className:"ms-carousel-slider right-arrow",onClick:function(){return a("right")},disabled:t===r.length-1},i().createElement(en.Glyphicon,{style:{fontSize:22},glyph:"chevron-right"})))};function ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nc(){return nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nc.apply(this,arguments)}function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ac=(0,Ae.compose)(bi,(function(e){return function(t){var n=fi(t.contents||[],t.backgroundId)||{},r=n&&n.id,o=ui(ui({},t),{},{contentId:r,sectionId:t.id,path:'sections[{"id": "'.concat(t.id,'"}].background')});return i().createElement(e,o)}}),(function(e){return function(t){var n=ui(ui({},t),{},{updateBackground:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}].background.')+e].concat(r))},updateSection:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.update.apply(t,['sections[{"id": "'.concat(t.sectionId,'"}]')].concat(n))}});return i().createElement(e,n)}}),(function(e){return function(t){var n=ec((0,o.useState)(""),2),r=n[0],a=n[1];return i().createElement(e,nc({},t,{textEditorActiveClass:r,bubblingTextEditing:function(e){return a(e?" ms-text-editor-active":"")}}))}}))((function(e){var t,n,r,a=e.add,c=void 0===a?function(){}:a,l=e.editMedia,s=void 0===l?function(){}:l,u=e.editWebPage,f=void 0===u?function(){}:u,d=e.onVisibilityChange,y=void 0===d?function(){}:d,m=e.update,b=void 0===m?function(){}:m,g=e.updateBackground,v=void 0===g?function(){}:g,h=e.updateCurrentPage,O=void 0===h?function(){}:h,w=e.remove,E=void 0===w?function(){}:w,P=e.id,j=e.background,S=void 0===j?{}:j,C=e.path,T=e.contents,k=void 0===T?[]:T,I=e.mode,A=e.sectionType,D=e.inViewRef,M=e.viewWidth,R=e.viewHeight,N=e.focusedContent,L=e.contentId,Z=e.bubblingTextEditing,F=void 0===Z?function(){}:Z,_=e.textEditorActiveClass,B=void 0===_?"":_,W=e.expandableMedia,U=void 0!==W&&W,z=e.storyTheme,G=e.mediaViewer,V=e.contentToolbar,H=e.inView,q=e.sections,Y=void 0===q?[]:q,Q=e.storyFonts,K=e.onSort,X=void 0===K?function(){}:K,$=e.onEnableDraw,J=void 0===$?function(){}:$,ee=e.isDrawEnabled,te=e.defaultMarkerStyle,ne=void 0===te?{iconColor:"cyan",iconShape:"circle"}:te,re=e.highlightedMarkerStyle,oe=void 0===re?{iconColor:"green",iconShape:"circle"}:re,ie=(0,o.useRef)(),ae=(0,o.useRef)(),ce=(0,o.useRef)();function le(e,t){return t-(e.left+e.right)<128?{top:0,left:0,bottom:0,right:0}:e}var se=N&&N.hideContent&&x()(N,"target.id")===P,ue=se?"hidden":"visible",pe=U&&S&&"map"===S.type?" ms-expandable-background":"",fe=oc(oc({},null==z?void 0:z.overlay),I===p.nl.VIEW&&{maxHeight:R-350,overflowY:"auto"})||{},de=(null==z?void 0:z.general)||{},ye=R-(I===p.nl.EDIT?220:200),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=hn()(k,{id:L})||{},n=t.contents,r=void 0===n?[]:n;return e.filter((function(e){return p.ID.CAROUSEL===A&&1===r.length?"remove"!==e:e}))},be=(null==S?void 0:S.type)===p.Tr.MAP,ge=(k.find((function(e){return e.id===L}))||{}).features,ve=void 0===ge?[]:ge,he=ii()(k,(function(e){var t=e.id;return L===t})),Oe=(0,p.Yh)({id:P,contents:k.filter((function(e){return e.id!==L})),featureStyle:function(e){var t=e.content,n=e.feature;return(0,p.c0)(ne,k,t,L,n)}}),we=(0,p.Yh)({id:"".concat(P,"-highlighted"),contents:k.filter((function(e){return e.id===L})),featureStyle:function(e){var t=e.content,n=e.feature;return(0,p.c0)(oe,k,t,L,n)}});return i().createElement("section",{className:"ms-section ms-section-carousel".concat(pe),id:P,ref:D},i().createElement(Gi,nc({},S,{mode:I,innerRef:ie,disableToolbarPortal:!0,tools:(t={},ic(t,p.Tr.IMAGE,["editMedia","fit","size","align","theme"]),ic(t,p.Tr.MAP,["editMedia","editMap","size","align","theme"].concat(ee?"closeDraw":[])),ic(t,p.Tr.VIDEO,["editMedia","fit","size","align","theme","muted","autoplay","loop"]),t),scrollContainerSelector:"#ms-sections-container",add:c,editMedia:s,expandable:U,path:C,update:v,updateCurrentPage:O,remove:E,sectionType:A,sectionId:P,backgroundId:S.id,key:S.id,width:M,height:R,backgroundPlaceholder:{background:"url(".concat(Qi(),")"),backgroundSize:"600px auto"},storyTheme:de,mediaViewer:G,contentToolbar:V,inView:H,layers:[Oe,we],isDrawEnabled:ee,onEnableDraw:J,contentToolbarChildren:!be&&I===p.nl.EDIT&&i().createElement(ja,{type:"addMap"})}),i().createElement(Ha,{active:ee,features:ve,method:"Point",onChange:function(e,t){b('sections[{"id":"'.concat(P,'"}].contents[{"id":"').concat(L,'"}].features'),t)}}),i().createElement($a,{active:!(ee||null!=S&&S.editMap),geometry:null==ve||null===(n=ve[0])||void 0===n||null===(r=n.geometry)||void 0===r?void 0:r.coordinates,padding:function(){var e={top:0,left:0,bottom:0,right:0},t=ie.current&&ie.current.querySelector(".ms-media-map"),n=ae.current&&ae.current.querySelector("[id='".concat(L,"']"));if(t&&n){var r=ie.current.getBoundingClientRect()||{},o=t.getBoundingClientRect()||{},i=n.getBoundingClientRect()||{};if(ce.current){var a=ce.current.getBoundingClientRect()||{};e.bottom=r.height-(a.top-r.top)}var c=o.left-r.left,l=c+o.width,s=i.left-r.left,u=s+i.width;if(s>=c&&u<=l){var p=s-c,f=l-u;return f>=p?e.left=p+i.width:e.right=f+i.width,le(e,o.width)}if(u>=c&&u<=l)return e.left=u-c,le(e,o.width);if(s>=c&&s<=l)return e.right=l-s,le(e,o.width)}return e}(),fixedZoom:!0,duration:300})),i().createElement(ri,{innerRef:ae,tools:ic({},p.bT.COLUMN,["size","align","theme"]),className:"ms-section-contents".concat(B),contents:k,mode:I,add:c,updateCurrentPage:O,editMedia:s,editWebPage:f,update:b,remove:E,sectionId:P,viewWidth:M,viewHeight:R,contentProps:{onVisibilityChange:y,contentWrapperStyle:{minHeight:ye,visibility:ue},expandable:U,mediaViewer:G,contentToolbar:V,overrideTools:function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=ec(e,2),n=t[0],r=t[1];return[n,me(r)]})))}},focusedContent:N,bubblingTextEditing:F,sectionType:A,storyTheme:fe,sections:Y,storyFonts:Q}),i().createElement(Za,{innerRef:ce,style:null!=z&&z.overlay?oc({},z.overlay):{},controlStyle:de?oc({},de):{},sectionId:P,contentId:L,contents:k,update:b,remove:E,expandable:U,add:function(){return e=oc(oc({},(0,p.nq)(p.bT.COLUMN)),{},{title:"Item "+(k.length+1),background:{}}),c('sections[{"id": "'.concat(P,'"}].contents'),void 0,e,"geostory.builder.defaults.titleGeocarouselContent"),void b('sections[{"id":"'.concat(P,'"}].contents[{"id":"').concat(L,'"}].hideContent'),!0);var e},contentToolbar:V,mode:I,onSort:X,isMapBackground:be,isEditMap:null==S?void 0:S.editMap,containerWidth:M,isDrawEnabled:ee,onEnableDraw:function(e){b('sections[{"id":"'.concat(P,'"}].background.editMap'),!0,"replace"),J({contentId:e.id,sectionId:P})}}),I===p.nl.VIEW&&!U&&i().createElement(Ja,{currentIndex:he,contents:k,onTraverseCard:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left";e="left"===r?null==k||null===(t=k[0===he?0:he-1])||void 0===t?void 0:t.id:null==k||null===(n=k[he===k.length-1?he:he+1])||void 0===n?void 0:n.id,b('sections[{"id":"'.concat(P,'"}].contents[{"id":"').concat(e,'"}].carouselToggle'),!0)}}),I===p.nl.EDIT&&!se&&i().createElement(to,{containerWidth:M,containerHeight:R,buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){c("sections",P,p.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){c("sections",P,p.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){c("sections",P,p.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveSection",onClick:function(){return c("sections",P,p.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselSection",onClick:function(){c("sections",P,p.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){c("sections",P,p.tQ.MEDIA)}},{glyph:"story-webpage-section",tooltipId:"geostory.addWebPageSection",onClick:function(){c("sections",P,p.tQ.WEBPAGE)}}]}))}));function cc(e){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(e)}var lc;function sc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pc(e,t){return pc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pc(e,t)}function fc(e,t){if(t&&("object"===cc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dc(e)}function dc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yc(e){return yc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yc(e)}function mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bc=(mc(lc={},p.ID.IMMERSIVE,$i),mc(lc,p.ID.CAROUSEL,ac),mc(lc,p.ID.PARAGRAPH,na),mc(lc,p.tQ.MEDIA,na),mc(lc,p.tQ.WEBPAGE,na),mc(lc,p.ID.TITLE,ca),mc(lc,p.ID.BANNER,ua),mc(lc,"UNKNOWN",(function(e){var t=e.type,n=e.inViewRef;return i().createElement("div",{ref:n,className:"ms-section ms-section-unknown"},"WARNING: unknown session of type ",t)})),lc),gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pc(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yc(r);if(o){var n=yc(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fc(this,e)});function c(){var e;sc(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mc(dc(e=a.call.apply(a,[this].concat(n))),"state",{height:0}),e}return t=c,(n=[{key:"render",value:function(){var e=bc[this.props.type]||bc.UNKNOWN;return i().createElement(e,{sectionType:this.props.type,id:this.props.id,add:this.props.add,update:this.props.update,inViewRef:this.props.inViewRef,editMedia:this.props.editMedia,expandableMedia:this.props.expandableMedia,editWebPage:this.props.editWebPage,updateCurrentPage:this.props.updateCurrentPage,remove:this.props.remove,mode:this.props.mode,cover:this.props.cover,contents:this.props.contents,viewWidth:this.props.viewWidth,viewHeight:this.props.viewHeight,focusedContent:this.props.focusedContent,storyTheme:this.props.storyTheme,mediaViewer:this.props.mediaViewer,contentToolbar:this.props.contentToolbar,inView:this.props.inView,sections:this.props.sections,storyFonts:this.props.storyFonts,onSort:this.props.onSort,isDrawEnabled:this.props.isDrawEnabled,background:this.props.background,onEnableDraw:this.props.onEnableDraw,defaultMarkerStyle:this.props.defaultMarkerStyle,highlightedMarkerStyle:this.props.highlightedMarkerStyle})}}])&&uc(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(i().Component);mc(gc,"propTypes",{id:He().string,type:He().oneOf(p.lg.SectionTypes),storyType:He().oneOf(p.lg.StoryTypes),add:He().func,update:He().func,editMedia:He().func,editWebPage:He().func,remove:He().func,updateCurrentPage:He().func,mode:He().oneOf(p.lg.Modes),contents:He().array,viewHeight:He().number,viewWidth:He().number,inViewRef:He().func,excludeClassName:He().string,cover:He().bool,focusedContent:He().object,expandableMedia:He().bool,storyTheme:He().object,mediaViewer:He().func,contentToolbar:He().func,inView:He().bool,sections:He().array,storyFonts:He().array,onSort:He().func,isDrawEnabled:He().bool,onEnableDraw:He().func,background:He().object,defaultMarkerStyle:He().object,highlightedMarkerStyle:He().object}),mc(gc,"defaultProps",{id:"",add:function(){},update:function(){},editMedia:function(){},editWebPage:function(){},updateCurrentPage:function(){},remove:function(){},onSort:function(){},storyType:p.Ln.CASCADE,viewHeight:0,viewWidth:0,mode:p.nl.VIEW,expandableMedia:!1,sections:[],storyFonts:[],onEnableDraw:function(){}});const vc=bo({threshold:[0,.25,.5,.75,1],rootMargin:"-200px 0px 0px 0px"})(gc);function hc(e){return hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(e)}function Oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ec(e,t){return Ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ec(e,t)}function Pc(e,t){if(t&&("object"===hc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jc(e)}function jc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sc(e){return Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Sc(e)}function Cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ec(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sc(r);if(o){var n=Sc(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pc(this,e)});function c(){var e;Oc(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Cc(jc(e=a.call.apply(a,[this].concat(n))),"getAdjustedSelector",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/#\d|^#-\d/g,(function(e,t){return t?"#\\"+t[1]+t[2]:"#\\3"+e[1]+" "}))})),Cc(jc(e),"getFocusedTarget",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targets,n=e.props.padding,r=void 0===n?{}:n;return t.map((function(t){var n=t.selector,o=null;try{var i=window.document.querySelector(e.getAdjustedSelector(n));if(i){var a=i.getBoundingClientRect(),c=a.top,l=a.right,s=a.bottom,u=a.left;o={x:u-r,y:c-r,w:l-u+2*r,h:s-c+2*r}}}catch(e){console.warn(e)}finally{return o}})).filter((function(e){return e}))})),Cc(jc(e),"getHolePath",(function(t){var n=t.x,r=t.y,o=t.w,i=t.h,a=e.props.borderRadius,c=void 0===a?8:a;return"M ".concat(n," ").concat(r+c," q 0 -").concat(c," ").concat(c," -").concat(c," h ").concat(o-2*c," q ").concat(c," 0 ").concat(c," ").concat(c," v ").concat(i-2*c," q 0 ").concat(c," -").concat(c," ").concat(c," h-").concat(o-2*c," q -").concat(c," 0 -").concat(c," -").concat(c," v-").concat(i-2*c)})),Cc(jc(e),"getPath",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getFocusedTarget(),o="M 0 0 h ".concat(n," v ").concat(t," h -").concat(n," v -").concat(t),i=r.map(e.getHolePath);return o+i.join(" ")})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onMaskClicked,r=t.stopEventsOnTargets,o=void 0!==r&&r,a=t.targets,c=this.getFocusedTarget(a.filter((function(e){var t=e.stopEventsOnTarget;return o||t})));return i().createElement("div",{style:{position:"fixed",height:"100vh",width:"100vw",top:0,left:0,zIndex:1e6,pointerEvents:"none"}},i().createElement(xe.Z,null,(function(t){var r=t.width,o=t.height;return i().createElement("svg",{width:r,height:o,xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:e.getPath(o,r),fill:"rgba(0,0,0,0.7)",fillRule:"evenodd",pointerEvents:"visiblePainted",onClick:n}),c.map((function(t,n){return i().createElement("path",{key:n,d:e.getHolePath(t),fill:"transparent",pointerEvents:"visiblePainted"})})))})))}}])&&wc(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(i().Component);function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(n),!0).forEach((function(t){xc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Cc(Tc,"propTypes",{targets:He().arrayOf(He().shape({selector:He().string,stopEventsOnTarget:He().bool})),padding:He().number,borderRadius:He().number,onMaskClicked:He().func,stopEventsOnTargets:He().bool}),Cc(Tc,"defaultProps",{targets:[],padding:0,borderRadius:8,onMaskClicked:function(){},stopEventsOnTargets:!1});var Ac=(0,Fe.Z)((function(e){var t=e.sections;return 0===(void 0===t?[]:t).length}),(function(e){var t=e.add,n=void 0===t?function(){}:t;return{iconFit:!1,style:{position:"relative",width:"50%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},glyph:"geostory",title:i().createElement(pr.Z,{msgId:"geostory.emptyTitle"}),description:i().createElement(pr.Z,{msgId:"geostory.emptyDescription"}),content:i().createElement(to,{addButtonClassName:"square-button-md",containerWidth:"100%",containerHeight:"100%",buttons:[{glyph:"story-title-section",tooltipId:"geostory.addTitleSection",onClick:function(){n("sections",0,p.ID.TITLE)}},{glyph:"story-banner-section",tooltipId:"geostory.addBannerSection",onClick:function(){n("sections",0,p.ID.BANNER)}},{glyph:"story-paragraph-section",tooltipId:"geostory.addParagraphSection",onClick:function(){n("sections",0,p.ID.PARAGRAPH)}},{glyph:"story-immersive-section",tooltipId:"geostory.addImmersiveContent",onClick:function(){n("sections",0,p.ID.IMMERSIVE)}},{glyph:"story-carousel-section",tooltipId:"geostory.addGeocarouselContent",onClick:function(){n("sections",0,p.ID.CAROUSEL)}},{glyph:"story-media-section",tooltipId:"geostory.addMediaSection",onClick:function(){n("sections",0,p.tQ.MEDIA)}},{glyph:"code",tooltipId:"geostory.addWebPageSection",onClick:function(){n("sections",0,p.tQ.WEBPAGE)}}]})}}))(xe.Z),Dc=function(e){var t=e.width;return e.mode===p.nl.EDIT?"":t<640?"sm":t>=640&&t<1024?"md":""};const Mc=(0,Ae.compose)(Ze,Ge,function(e){var t=e.showFocusMask,n=void 0===t?function(){}:t,r=e.defaultTargets,o=void 0===r?{selector:".ms-geostory-map-editor"}:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=a.padding,l=void 0===c?0:c,s=a.borderRadius,u=void 0===s?8:s,p=a.stopEventsOnTargets,f=void 0!==p&&p,d=a.onMaskClicked,y=void 0===d?function(){}:d;return(0,Ae.branch)(n,(function(e){return(0,Ae.nest)((function(e){var t=e.focusedContent,n=e.children;return i().createElement(i().Fragment,null,n,i().createElement(Tc,{targets:[t,o],padding:l,borderRadius:u,stopEventsOnTargets:f,onMaskClicked:y}))}),e)}))}({showFocusMask:function(e){var t=e.focusedContent,n=(t=void 0===t?{}:t).target;return(void 0===n?{}:n).id}}))((function(e){var t=e.mode,n=void 0===t?p.nl.VIEW:t,r=e.sections,o=void 0===r?[]:r,a=e.add,c=void 0===a?function(){}:a,l=e.onVisibilityChange,s=void 0===l?function(){}:l,u=e.updateCurrentPage,f=void 0===u?function(){}:u,d=e.editMedia,y=void 0===d?function(){}:d,m=e.editWebPage,b=void 0===m?function(){}:m,g=e.update,v=void 0===g?function(){}:g,h=e.remove,O=void 0===h?function(){}:h,w=e.focusedContent,E=e.isContentFocused,P=void 0!==E&&E,j=e.getSize,S=void 0===j?Dc:j,C=e.theme,T=void 0===C?{}:C,k=e.mediaViewer,I=e.contentToolbar,x=e.storyFonts,A=e.onSort,D=void 0===A?function(){}:A,M=e.isDrawEnabled,R=void 0!==M&&M,N=e.onEnableDraw,L=void 0===N?function(){}:N,Z=e.defaultMarkerStyle,F=e.highlightedMarkerStyle;return i().createElement(Ie.Z,{className:"ms-cascade-story ms-".concat(n)},i().createElement(Ac,{sections:o,add:c},(function(e){var t,r=e.width,a=e.height,l=S({width:r,height:a,mode:n}),u=l?" ms-".concat(l):"",p="sm"===l,d=T&&ko()(T)&&T||{};return i().createElement("div",{id:"ms-sections-container",className:"ms-sections-container".concat(u," ms-sections-hyperlinks"),style:Ic(Ic({},null==d?void 0:d.general),P&&{overflow:"hidden"})},(null==d||null===(t=d.link)||void 0===t?void 0:t.color)&&i().createElement("style",{dangerouslySetInnerHTML:{__html:"\n            .ms-sections-hyperlinks .ms-text-editor-main a,\n            .ms-sections-hyperlinks .ms-text-wrapper a,\n            .ms-sections-hyperlinks .ms-text-editor-main a:link,\n            .ms-sections-hyperlinks .ms-text-wrapper a:link,\n            .ms-sections-hyperlinks .ms-text-editor-main a:visited,\n            .ms-sections-hyperlinks .ms-text-wrapper a:visited,\n            .ms-sections-hyperlinks .ms-text-editor-main a:active,\n            .ms-sections-hyperlinks .ms-text-wrapper a:active {\n                color: ".concat(d.link.color,";\n                opacity: 1;\n            }\n            .ms-sections-hyperlinks .ms-text-editor-main a:hover,\n            .ms-sections-hyperlinks .ms-text-wrapper a:hover {\n                color: ").concat(d.link.color,";\n                opacity: 0.75;\n            }\n        ")}}),o.map((function(e){var t=e.contents,l=void 0===t?[]:t,u=e.id,m=e.type,g=e.cover,h=e.background;return i().createElement(vc,{focusedContent:w,onVisibilityChange:s,add:c,editMedia:y,expandableMedia:p,editWebPage:b,updateCurrentPage:f,update:v,remove:O,key:u,id:u,viewHeight:a,viewWidth:r,type:m,mode:n,contents:l,cover:g,storyTheme:d,mediaViewer:k,contentToolbar:I,sections:o,storyFonts:x,onSort:D,isDrawEnabled:R,onEnableDraw:L,background:h,defaultMarkerStyle:Z,highlightedMarkerStyle:F})})))})))}));var Rc=n(48860),Nc=["id"];function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zc(){return Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zc.apply(this,arguments)}function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){Bc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wc=(0,So.Z)(go.Z);const Uc=(0,Ae.compose)((0,a.connect)((0,c.P1)(V.jq,V.z7,(function(e,t){return{resources:e,isContentFocused:t}}))),(0,Ae.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.map,o=void 0===r?{}:r,i=_c(_c({},o),{},{layers:(o.layers||[]).map((function(e){return e||void 0}))}),a=hn()(t,{id:n})||{};return{map:(0,p.oH)(a.data,i)}})));var zc=(0,Ae.compose)((0,a.connect)((0,c.P1)(V.GC,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{focusedEl:e}}))),(0,Ae.withProps)((function(e){var t=e.focusedEl,n=(t=void 0===t?{}:t).resourceId,r=t.map;return{map:r||{},resourceId:n,disableReset:!r}}))),Gc=(0,Ae.withHandlers)({onChangeMap:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t("".concat(r.path,".map.").concat(e),n,"merge")}},onChange:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e,n){t(r.path+".".concat(e),n,"merge")}}}),Vc=(0,Ae.compose)((0,a.connect)(null,{toggleAdvancedEditing:Q.$Z}),(0,Ae.withHandlers)({toggleAdvancedEditing:function(e){var t=e.toggleAdvancedEditing,n=void 0===t?function(){}:t,r=e.map,o=void 0===r?{}:r;return function(){var e=o.id,t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,Nc);n("inlineEditor",{data:t,id:e})}}})),Hc=(0,Ae.withHandlers)({toggleEditing:function(e){var t=e.editMap,n=e.update,r=e.focusedContent;return function(){return n(r.path+".editMap",!t)}},onReset:function(e){var t=e.update,n=e.focusedContent,r=(n=void 0===n?{}:n).path,o=void 0===r?"":r;return function(){t(o+".map",void 0)}},discardAndClose:function(e){var t=e.update,n=e.focusedContent,r=void 0===n?{}:n;return function(e){t(r.path+".map",e),t(r.path+".editMap",!1)}}}),qc=function(e){return i().createElement(Wc,Zc({glyph:"repeat",bsStyle:"primary",className:"square-button-md no-border",tooltipId:"geostory.contentToolbar.resetMap",confirmTitle:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.resetMapConfirm"}),confirmContent:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.resetConfirmContent"})},e))},Yc=(0,Ae.compose)((0,Ae.withProps)((function(e){var t=e.pendingChanges,n=e.toggleEditing,r=e.disableReset,o=e.onReset,a=e.toggleAdvancedEditing,c=void 0===a?function(){}:a;return{buttons:[{glyph:"floppy-disk",disabled:!t,tooltipId:"geostory.contentToolbar.saveChanges",onClick:n},{renderButton:i().createElement(qc,{disabled:r,onClick:o})},{glyph:"pencil",tooltipId:"geostory.contentToolbar.advancedMapEditor",onClick:c}]}})),Rc.Z,(0,Ae.withStateHandlers)((function(){return{editNode:void 0}}),{setEditNode:function(){return function(e){return{editNode:e}}},closeNodeEditor:function(){return function(){return{editNode:void 0}}}}),(0,Ae.branch)((function(e){return!!e.editNode}),(0,Ae.withProps)((function(e){var t=e.selectedNodes,n=void 0===t?[]:t,r=e.closeNodeEditor,o=void 0===r?function(){}:r;return{buttons:[{visible:1===n.length,tooltipId:"close",glyph:"1-close",onClick:o}]}})),(0,Ae.withProps)((function(e){var t,n=e.selectedNodes,r=void 0===n?[]:n,o=e.setEditNode,i=void 0===o?function(){}:o,a=e.buttons,c=void 0===a?[]:a;return{buttons:[{visible:1===r.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){i(r[0])}}].concat((t=c,function(e){if(Array.isArray(e))return Lc(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}})))),Qc=(0,Ae.compose)((0,Ae.withPropsOnChange)(["focusedContent"],(function(e){var t=e.map,n=e.focusedEl;return{contentMap:(n=void 0===n?{}:n).map,lastSavedMap:t}})),(0,Ae.withPropsOnChange)(["map"],(function(e){var t=e.map,n=e.lastSavedMap;return{pendingChanges:!yn()(n,t)}}))),Kc=(0,Ae.compose)((0,Ae.withProps)((function(e){var t=e.toggleEditing;return{CloseBtn:function(e){return i().createElement(go.Z,Zc({onClick:t},e))}}})),(0,Ae.branch)((function(e){return e.pendingChanges}),(0,Ae.withProps)((function(e){var t=e.discardAndClose,n=e.contentMap;return{CloseBtn:function(e){return i().createElement(Wc,Zc({onClick:function(){return t(n)},confirmTitle:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.confirmCloseMapEditing"}),confirmContent:i().createElement(pr.Z,{msgId:"geostory.contentToolbar.pendingChangesDiscardConfirm"})},e))}}})))),Xc=(0,Ae.mapPropsStream)((function(e){var t=(0,Ae.createEventHandler)(),n=t.stream,r=t.handler;return e.pluck("map").distinctUntilChanged((function(e,t){return yn()(e,t)})).switchMap((function(e){return n.map((function(t){return{map:_c(_c({},e),t)}})).startWith({map:e})})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _c(_c({},n),{},{onMapViewLocalChanges:r,map:t})}))})),$c=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},Jc=(0,Ae.withHandlers)({onMapViewChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.update,n=e.editMap,r=void 0!==n&&n,o=e.onMapViewLocalChanges,i=e.map,a=(i=void 0===i?{}:i).center,c=void 0===a?{}:a,l=i.zoom,s=i.mapStateSource,u=i.resolution,p=i.resetPanAndZoom;return function(e){var n=e.center,i=void 0===n?{}:n,a=e.zoom,f=e.mapStateSource,d=e.resolution,y=$c(c.x,i.x)&&$c(c.y,i.y);!r||y&&l===a?p?t("map",{center:c,zoom:l,mapStateSource:s,resolution:u,resetPanAndZoom:!1},"merge"):o({center:i,zoom:a,mapStateSource:f,resolution:d}):t("map",{center:i,zoom:a,mapStateSource:Oa()(),resolution:d,resetPanAndZoom:!1},"merge")}}}),el=n(5993),tl=n(75927),nl=n(51768),rl=["tabs","activeTab","width","setActiveTab"];function ol(){return ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ol.apply(this,arguments)}function il(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var al=(0,Ln.Z)(en.NavItem);var cl=n(79105),ll=n(43129),sl=n(45869),ul=n(87320),pl=(0,qe.Z)(["placeholder","options"])(ll.ZP);const fl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,n=void 0===t?{zoomControl:!0,mapInfoControl:!1}:t,r=e.onChangeMap,o=void 0===r?function(){}:r,a=n&&n.mapOptions||{},c=(0,p.kn)({mapOptions:a,zoomControl:!!j()(n.zoomControl)||n.zoomControl,mapInfoControl:!j()(n.mapInfoControl)&&n.mapInfoControl});return i().createElement(en.Form,{className:"ms-geostory-map-controls"},i().createElement(en.FormGroup,null,i().createElement(en.ControlLabel,null,i().createElement(pr.Z,{msgId:"geostory.mapEditor.zoom"})),i().createElement(sl.Z,{onChange:function(){var e=!c.zoomControl;o("zoomControl",e),o("mapOptions.interactions",{doubleClickZoom:e,shiftDragZoom:e,pinchZoom:e})},className:"ms-geostory-map-controls-switch",checked:c.zoomControl}),i().createElement(pl,{options:[{label:"geostory.mapEditor.topLeft",value:"topLeft"},{label:"geostory.mapEditor.topRight",value:"topRight"},{label:"geostory.mapEditor.bottomLeft",value:"bottomLeft"},{label:"geostory.mapEditor.bottomRight",value:"bottomRight"}],wrapperStyle:{marginTop:"10px"},value:c.mapOptions&&c.mapOptions.zoomPosition||"topLeft",clearable:!1,disabled:!c.zoomControl,onChange:function(e){return o("mapOptions.zoomPosition",e&&e.value?e.value:"topLeft")},placeholder:"geostory.builder.settings.titlePlaceholder"})),i().createElement(en.FormGroup,null,i().createElement(en.ControlLabel,null,i().createElement(pr.Z,{msgId:"geostory.mapEditor.pan"})),i().createElement(sl.Z,{onChange:function(){var e=!(c.mapOptions&&c.mapOptions.interactions&&c.mapOptions.interactions.dragPan);o("mapOptions.interactions",{dragPan:e,keyboardPan:e})},className:"ms-geostory-map-controls-switch",checked:c.mapOptions&&c.mapOptions.interactions&&c.mapOptions.interactions.dragPan})),i().createElement(en.FormGroup,null,i().createElement(en.ControlLabel,null,i().createElement(pr.Z,{msgId:"geostory.mapEditor.identify"})),i().createElement(sl.Z,{onChange:function(){var e=!c.mapInfoControl;o("mapInfoControl",e)},className:"ms-geostory-map-controls-switch",checked:c.mapInfoControl}),c.mapInfoControl&&i().createElement(ul.Z,{disabled:!c.mapInfoControl,popoverMessage:"geostory.builder.settings.templateTooltip",infoFormat:c.mapOptions&&c.mapOptions.mapInfoFormat||"application/json",onInfoFormatChange:function(e){return o("mapOptions.mapInfoFormat",e)},selectProps:{wrapperStyle:{marginTop:10}}})))};var dl=n(16701),yl=(0,Ae.withProps)((function(e){return{tabs:e.tabs||[{id:"toc",titleId:"geostory.mapEditor.toc",tooltipId:"geostory.mapEditor.toc",glyph:"1-layer",visible:!0,Component:dl.Z},{id:"settings",titleId:"geostory.mapEditor.settings",tooltipId:"geostory.mapEditor.settings",glyph:"wrench",visible:!0,Component:fl}]}}));const ml=(0,Ae.compose)((0,cl.Z)("activeTab","setActiveTab","toc"),yl);var bl=(0,Ae.compose)(nl.Z,(0,Ae.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,el.Z)("title"))((function(e){var t=e.title,n=e.description;return i().createElement("div",{className:"text-center"},i().createElement("div",{className:"mapstore-step-title"},t),i().createElement("div",{className:"mapstore-step-description"},n))})),gl=(0,nl.Z)(tl.Z),vl=ml((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tabs,n=void 0===t?[]:t,r=e.activeTab,o=(e.width,e.setActiveTab),a=void 0===o?function(){}:o,c=il(e,rl);return i().createElement("div",{key:"ms-geostory-map-settings-navbar",className:"ms-row-tab"},i().createElement("div",null,i().createElement(en.Nav,{bsStyle:"tabs",activeKey:r,justified:!0},n.map((function(e){return i().createElement(al,{key:"ms-tab-settings-"+e.id,tooltipId:e.tooltipId,eventKey:e.id,onClick:function(){return a(e.id)}},i().createElement(en.Glyphicon,{glyph:e.glyph}))})))),i().createElement("div",null,n.filter((function(e){return e.id&&e.id===r})).filter((function(e){return e.Component})).map((function(e){return i().createElement(e.Component,ol({},c,{key:"ms-geostory-tab-settings-body-"+e.id}))}))))}));const hl=(0,Ae.branch)((function(e){var t=e.focusedContent;return(t=void 0===t?{}:t).path}),(0,Ae.compose)((0,Ae.defaultProps)({isFocused:!0,editMap:!0}),zc,Uc,Qc,Gc,Hc,Vc,Yc,Kc))((function(e){var t=e.mode,n=void 0===t?p.nl.VIEW:t,r=e.isFocused,o=void 0!==r&&r,a=e.map,c=void 0===a?{}:a,l=e.onChange,s=void 0===l?function(){}:l,u=e.onChangeMap,f=void 0===u?function(){}:u,d=e.onNodeSelect,y=void 0===d?function(){}:d,m=e.selectedNodes,b=e.buttons,g=void 0===b?[]:b,v=e.editNode,h=e.closeNodeEditor,O=e.CloseBtn,w=void 0===O?function(){return null}:O,E=e.isDrawEnabled;return n===p.nl.EDIT&&o?i().createElement("div",{key:"left-column",style:{order:-1,width:400,position:"relative"}},!E&&i().createElement(Ie.Z,{className:"ms-geostory-map-editor",header:i().createElement("div",{className:"ms-geostory-map-editor-header text-center"},i().createElement(en.Row,null,i().createElement(en.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},i().createElement(w,{glyph:"1-close",className:"pull-left on-close-btn square-button no-border ",tooltipId:"geostory.contentToolbar.closeMapEditing"}),i().createElement("div",{className:"mapstore-step-title"},i().createElement(pr.Z,{msgId:"geostory.mapEditor.configureMapOptions"})))),i().createElement(zr.Z,{transitionProps:!1,btnGroupProps:{className:"ms-geostory-map-editor-toolbar"},btnDefaultProps:{className:"square-button-md no-border",bsStyle:"primary",noTooltipWhenDisabled:!0},buttons:g}))},!!v&&[i().createElement(bl,{map:c,editNode:v}),i().createElement(gl,{closeNodeEditor:h,editNode:v,map:c,onChange:s})]||[i().createElement(vl,{map:c,onChange:s,onChangeMap:f,selectedNodes:m,onSelect:y})])):null}));var Ol=n(64721),wl=n.n(Ol);function El(){return El=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},El.apply(this,arguments)}function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){Sl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Cl=function(e){var t=function(){return i().createElement("div",{className:"ms-media-error"},i().createElement(en.Glyphicon,{glyph:"exclamation-sign"}))},n=function(e){var t=e.style,n=void 0===t?{}:t;return i().createElement("div",{style:n,className:"ms-media-loader"},i().createElement(Sr.Z,{size:52}))};return function(r){var o={},a=r.sectionType;if((a===p.ID.PARAGRAPH||a===p.ID.IMMERSIVE||a===p.ID.CAROUSEL)&&r.type===p.Tr.IMAGE){var c=((null==r?void 0:r.imgHeight)||9)/((null==r?void 0:r.imgWidth)||16)*100;o={paddingTop:"".concat(c,"%")}}return r.lazy?i().createElement(jr,{key:r.loadingId,id:r.loadingId,debounceTime:r.debounceTime,loading:r.isLoading,onLoad:function(e){return r.onLoad(jl(jl({},r.loading),{},Sl({},e,!1)))},loaderComponent:n,loaderStyle:o},i().createElement(e,El({},r,{type:r.type,loaderComponent:n,loaderStyle:o,errorComponent:t}))):i().createElement(e,El({},r,{key:r.id,type:r.mediaType||r.type,loaderComponent:n,errorComponent:t}))}};var Tl=n(7848),kl=n(19983),Il=["autoplay"],xl=["type"];function Al(){return Al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Al.apply(this,arguments)}function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){Rl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nl(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ll={image:(0,Ae.branch)((function(e){return e.resourceId}),(0,Ae.compose)((0,a.connect)((0,c.P1)(V.jq,(function(e){return{resources:e}}))),(0,Ae.withProps)((function(e){var t=e.resources,n=e.resourceId;return(hn()(t,{id:n})||{}).data}))),(0,Fe.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==p.ID.TITLE&&!wl()([p.ID.IMMERSIVE,p.ID.CAROUSEL],r)}),(function(){return{glyph:"picture"}})))(Cl(Jt)),map:(0,Ae.compose)((0,Ae.branch)((function(e){return e.resourceId}),Uc),Tl.Z,kl.Z,Xc,Jc,xn)(Cl(Qn)),video:(0,Ae.branch)((function(e){return e.resourceId}),(0,Ae.compose)((0,a.connect)((0,c.P1)(V.jq,(function(e){return{resources:e}}))),(0,Ae.withProps)((function(e){var t=e.resources,n=e.resourceId,r=e.autoplay,o=(hn()(t,{id:n})||{}).data||{},i=o.autoplay;return Ml(Ml({},Nl(o,Il)),{},{autoplay:void 0!==r?r:i})}))),(0,Fe.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.src,n=void 0===t?"":t,r=e.sectionType;return!n&&r!==p.ID.TITLE&&!wl()([p.ID.IMMERSIVE,p.ID.CAROUSEL],r)}),(function(){return{glyph:"play"}})))(Cl(Kn.Z))};const Zl=function(e){var t=e.type,n=Nl(e,xl),r=Ll[t];return r?i().createElement(r,Al({type:t},n)):null};var Fl=["resources"];function _l(){return _l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_l.apply(this,arguments)}const Bl=(0,a.connect)((0,c.P1)(V.jq,(function(e){return{resources:e}})))((function(e){var t=e.resources,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Fl);if(n.resourceId){var r=(hn()(t,{id:n.resourceId})||{}).data||{};return i().createElement(Vo,_l({},r,n))}return i().createElement(Vo,n)}));var Wl=["story","mode","onAdd","messages","fontFamilies","storyFonts","webFont","onUpdate","onBasicError","onUpdateMediaEditorSetting","mediaEditorSettings"];function Ul(){return Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ul.apply(this,arguments)}var zl=function(e){var t=e.story,n=e.mode,r=void 0===n?p.nl.VIEW:n,a=e.onAdd,c=e.messages,l=e.fontFamilies,u=void 0===l?[]:l,d=e.storyFonts,y=void 0===d?[]:d,m=e.webFont,b=void 0===m?s():m,g=e.onUpdate,v=void 0===g?function(){}:g,h=e.onBasicError,O=void 0===h?function(){}:h,w=e.onUpdateMediaEditorSetting,E=e.mediaEditorSettings,P=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Wl),j=(0,o.useCallback)((function(e){return(0,f.S$)(c,e)}),[c]),S=function(e,t,n,r){return a(e,t,n,r?j(r):j)};return(0,o.useEffect)((function(){window.__geostory_interaction=function(e,t){"scrollTo"===e&&(0,p.M1)(t,{behavior:"smooth"})}}),[]),(0,o.useEffect)((function(){v("settings.theme.fontFamilies",u,"merge"),E&&w(E)}),[]),(0,o.useEffect)((function(){y.length>0&&y.filter((function(e){var t=e.src;return t&&!document.head.querySelector("link[href='".concat(t,"']"))})).length>0&&b.load((0,p.bm)(y,(function(){}),(function(){return O({message:"geostory.builder.settings.webFontLoadError"})})))}),[y]),i().createElement(Ie.Z,{className:"ms-geostory",columns:[i().createElement(hl,Ul({},P,{add:S,update:v,mode:r}))]},i().createElement(Mc,Ul({},t,P,{storyFonts:(0,p._R)(y),add:S,update:v,mode:r,mediaViewer:Zl,contentToolbar:Bl})))};zl.defaultProps={storyFonts:[],fontFamilies:[],onUpdateMediaEditorSetting:function(){}};const Gl=(0,u.rx)("GeoStory",{component:(0,a.connect)((0,c.zB)({mode:V.eK,story:V.Kg,messages:Te.Ps,focusedContent:V.FW,isContentFocused:V.z7,theme:function(e){var t;return(null===(t=(0,V.TQ)(e))||void 0===t?void 0:t.theme)||{}},storyFonts:V.mm,isDrawEnabled:V.HB}),{onAdd:y.IH,onUpdate:y.Vx,updateCurrentPage:y.RZ,onUpdateSetting:y.m7,remove:y.Od,onSort:y.pB,editMedia:m.Ql,editWebPage:y.o2,onBasicError:d.d,onUpdateMediaEditorSetting:y.Fu,onEnableDraw:y.EE})(zl),reducers:{geostory:ke.Z},epics:r})},8316:(e,t,n)=>{"use strict";n.d(t,{Pz:()=>a,Ps:()=>c,KV:()=>l});var r=n(22222),o=n(91175),i=n.n(o),a=function(e){return e.locale&&e.locale.current||"en-US"},c=function(e){return e.locale&&e.locale.messages||{}},l=(0,r.P1)([a],(function(e){return i()(e.split("-"))}))},2870:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a,j:()=>c});var r=n(27361),o=n.n(r),i=n(53005),a=function(e,t){var n=e.format,r=e.queryParams,o=void 0===r?{}:r;return o.info_format||o.outputFormat||n&&i.O7[n]||t.format},c=function(e){return!!o()(e,"layer.search.url")}},10284:(e,t,n)=>{"use strict";n.d(t,{sw:()=>b,oB:()=>g});var r=n(89255),o=n(27361),i=n.n(o),a=n(5055),c=n(7526);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},u(e)}function p(e,t,n){return p=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&d(o,n.prototype),o},p.apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}n(24384);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,e);var t,n,r,o=(t=i,n=f(),function(){var e,r=y(t);if(n){var o=y(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e)).name="OGCError",n.code=t,n}return r=i,Object.defineProperty(r,"prototype",{writable:!1}),r}(u(Error)),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[c.stripPrefix],explicitArray:!1,mergeAttrs:!0};return r.Observable.bindNodeCallback((function(e,n){return(0,a.parseString)(e,t,n)}))(e)},g=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?r.Observable.bindNodeCallback((function(e,t){return(0,a.parseString)(e,{tagNameProcessors:[c.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=i()(e,"ExceptionReport.Exception.ExceptionText");throw new m(t||"Undefined OGC Service Error",i()(e,"ExceptionReport.Exception.exceptionCode"))})):r.Observable.of(e)}))}},59112:(e,t,n)=>{"use strict";n.d(t,{gP:()=>u,BC:()=>f,YQ:()=>y,yQ:()=>m,fu:()=>b});var r=n(13218),o=n.n(r),i=n(27361),a=n.n(i),c=n(86638),l=n(91175),s=n.n(l),u=function(e){var t=e.label,n=RegExp("^/|/$|/{2,}");return!(!t||n.test(t))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" - ";switch(e){case"title":var i=o()(t.title)?t.title[n]||t.title.default:t.title,a=i||t.name||"";return a;case"description":var c=t.description||"";return c;case"both":var l=o()(t.title)?t.title[n]||t.title.default:t.title,s=l||t.nam||"",u=t.description||"";return"".concat(s).concat(r&&u?r:"").concat(u);default:return t[e]}},f=function(e){var t=e.node,n=e.currentLocale,r=e.tooltipOptions,o=void 0===r?{separator:" - ",maxLength:807}:r,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" - ";return p(e.tooltipOptions,e,t,n)}(t,n,o.separator)||"";return(i=i&&i.substring(0,o.maxLength)).length===o.maxLength&&(i+="..."),{title:p("title",t,n,o.separator),tooltipText:i}},d=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=s()(n.filter((function(e){return e.label===t})));return r||n.reduce((function(n,r){return n||!!r.nodes&&e(t,r.nodes)}),void 0)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e||"";if(o()(e)){var r=t||(0,c.Kd)();n=e[r]||e.default}return n.replace(/\./g,"/").replace(/\${dot}/g,".")},m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.filter((function(e){return e.nodes})).reduce((function(t,o){return t.push(r?o:{label:o.title,value:o.id}),o.nodes.length>0?t.concat(e(o.nodes,n+1,r)):t}),[])},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.replace(/[^\.\/]+/g,(function(e){var n=a()(d(e,t),"label");return t&&n||e}));return(n=n.replace(/\./g,"/")).replace(/\${dot}/g,".")}},83139:(e,t,n)=>{"use strict";n.d(t,{Xq:()=>r,v9:()=>i});var r=function(e,t){return new Promise((function(n,r){var o=t||{},i=o.width,a=void 0===i?64:i,c=o.height,l=void 0===c?64:c,s=o.contain,u=o.type,p=void 0===u?"image/jpeg":u,f=o.quality,d=void 0===f?.5:f,y=new Image;y.crossOrigin="anonymous",y.onload=function(){var e=y.naturalWidth/y.naturalHeight,t=a,r=l,o=a/l,i=document.createElement("canvas");i.setAttribute("width",a),i.setAttribute("height",l),i.style.width=a+"px",i.style.height=l+"px";var c=i.getContext("2d"),u=!s&&e<o||s&&e>o?[t,t/e]:[r*e,r];c.save(),c.translate(t/2,r/2),c.drawImage(y,-u[0]/2,-u[1]/2,u[0],u[1]),c.restore();var f=i.toDataURL(p,d);n(f)},y.onerror=function(e){r(e)},y.src=e}))},o=function(e,t){return new Promise((function(n,r){var o=t||{},i=o.type,a=void 0===i?"image/jpeg":i,c=o.quality,l=void 0===c?.5:c,s=document.createElement("video");s.crossOrigin="anonymous";var u=document.createElement("source"),p=document.createElement("canvas");s.addEventListener("loadedmetadata",(function(){var e=s.videoWidth,t=s.videoHeight;p.setAttribute("width",e),p.setAttribute("height",t),p.style.width=e+"px",p.style.height=t+"px"}),!0),s.addEventListener("loadeddata",(function(){s.currentTime=1}),!0),s.addEventListener("seeked",(function(){p.getContext("2d").drawImage(s,0,0);try{var e=p.toDataURL(a,l);n(e)}catch(e){r(e)}}),!0),s.addEventListener("error",(function(e){r(e)}),!0),s.appendChild(u),s.setAttribute("src",e)}))},i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=/,a=null===(e=t.match(i))||void 0===e?void 0:e[1];return a?new Promise((function(e){return e("http://img.youtube.com/vi/".concat(a,"/sddefault.jpg"))})):t.match(/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i)?o(t).then((function(e){return r(e,n)})):new Promise((function(e,t){return t("Cannot create a thumbnail from the provided source")}))}},64250:(e,t,n)=>{"use strict";n.d(t,{a:()=>s});var r=n(1469),o=n.n(r),i=n(86267),a=n(21915),c=n(69669),l=function(e,t,n,r){if(o()(t)&&o()(t[0])&&o()(t[0][0])){var a=(0,i.reproject)(t[0][0],r,n);return Math.sqrt(Math.pow(e[0]-a.x,2)+Math.pow(e[1]-a.y,2))}return 100},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;if(!e.getGeometry()||"Polygon"!==e.getGeometry().getType()||e.getProperties().center&&0===e.getProperties().center.length)return e;if(e.getProperties()&&e.getProperties().isCircle&&e.getProperties().center&&e.getProperties().center[0]&&e.getProperties().center[1]){var r,o=e.getGeometry().getExtent();r=e.getProperties().center?[(r=(0,i.reproject)(e.getProperties().center,"EPSG:4326",t)).x,r.y]:(0,a.qg)(o);var s=e.getProperties().crs===t?e.getProperties().radius:l(r,e.getGeometry().getCoordinates(),t,n);return e.setGeometry(new c.Z(r,s)),e}return e}},83255:(e,t,n)=>{e.exports=n.p+"grid.svg"},11636:(e,t,n)=>{e.exports=n.p+"world.svg"},73723:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/contents/carousel/img/default.jpg"},75492:(e,t,n)=>{e.exports=n.p+"MapStore2/web/client/components/geostory/layouts/sections/patterns/dots.png"},51205:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII="},38097:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAABIUlEQVRIS+3UsYoCMRDG8f8q+EBid5WNnc019la2Vr6Ala1g4SvY+RTXiVdcJQgHV9jJIdhKZCNx2GwyibCNW4bd+X47k6Sg4adoOJ83wNcBsz4CvoGfF4zpEzgCO1mrCmDWpsAC+Af6wD4DMQGWwBUYAF9uLQlww1vli+cMhA1vl7UuEuECqsItNgUhw22tJ4QLGANrwP657LoG4Qt3EV3g4ALMfLZAp2beMYhQuCn/B/SAk9wDQ2CTgYgN/wB+jaTqFKQi1OE+gFnXIpLC6wAaxAqYAfaoVW0hM/NH2+vuAflxTCdCd5Q3PNQBWzgHURseC4gdh+xEMFwD0CKiwrWAWER0eAoghFCFpwJ8CHV4DkAiksJzARYxL2/O+92ufW42SVMYbhcsEwAAAABJRU5ErkJgggAA"}}]);