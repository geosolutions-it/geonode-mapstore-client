(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[61633],{740026:(e,t,n)=>{var r={"./cesium/plugins/index":[155521,9,5916,30015,55521,98143],"./leaflet/index":[408097,9,23596,93991,61715],"./leaflet/plugins/index":[935701,7,41263,35701,56307],"./openlayers/index":[39190,9,58493,52043,40353,47202,74738,29139,69141,94793,38920,61332,11704,72445,78471,24548,44496,93546,49005,17919],"./openlayers/plugins/index":[103498,9,58493,52043,40353,47202,74738,29139,69141,94793,76932,65604,85986,93546,3498,77545],"./popups/index":[821751,9,96259,10240,55378,81137]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(2).map(n.e)).then((()=>n.t(o,16|t[1])))}o.keys=()=>Object.keys(r),o.id=740026,e.exports=o},862769:(e,t,n)=>{var r={"./cesium/plugins/index":[155521,9,5916,30015,36882,55521,94837],"./leaflet/plugins/index":[935701,7,41263,36882,35701,34942],"./openlayers/plugins/index":[103498,9,58493,18672,52043,40353,47202,74738,29139,69141,94793,76932,65604,21280,85986,36882,93546,3498,13581,39830]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(2).map(n.e)).then((()=>n.t(o,16|t[1])))}o.keys=()=>Object.keys(r),o.id=862769,e.exports=o},875964:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(618446),o=n.n(r),i=n(675263),a=n.n(i),l=n(667294),p=n.n(l),s=n(757588),c=n(552259);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(i){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function l(){var e;f(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(b(e=a.call.apply(a,[this].concat(n))),"onComboChange",(function(t){var n=parseInt(t.nativeEvent.target.value,10);e.props.onChange(n,e.props.scales[n])})),h(b(e),"getOptions",(function(){return e.props.scales.map((function(t,n){return p().createElement("option",{value:n,key:n},e.props.template(t,n))})).filter((function(t,n){return n>=e.props.minZoom}))})),e}return t=l,(n=[{key:"shouldComponentUpdate",value:function(e){return!o()(e,this.props)}},{key:"render",value:function(){var e;return e=this.props.readOnly?p().createElement("label",null,this.props.template(this.props.scales[this.props.currentZoomLvl],this.props.currentZoomLvl)):this.props.useRawInput?p().createElement("select",{label:this.props.label,onChange:this.onComboChange,bsSize:"small",value:this.props.currentZoomLvl||""},this.getOptions()):p().createElement(s.Form,{inline:!0},p().createElement(s.FormGroup,{bsSize:"small"},p().createElement(s.ControlLabel,null,this.props.label),p().createElement(s.FormControl,{componentClass:"select",onChange:this.onComboChange,value:this.props.currentZoomLvl||""},this.getOptions()))),p().createElement("div",{id:this.props.id,style:this.props.style},e)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);h(v,"propTypes",{id:a().string,style:a().object,scales:a().array,currentZoomLvl:a().number,minZoom:a().number,onChange:a().func,readOnly:a().bool,label:a().oneOfType([a().func,a().string,a().object]),template:a().func,useRawInput:a().bool}),h(v,"defaultProps",{id:"mapstore-scalebox",scales:(0,c.getGoogleMercatorScales)(0,28),currentZoomLvl:0,minZoom:0,onChange:function(){},readOnly:!1,template:function(e){return e<1?Math.round(1/e)+" : 1":"1 : "+Math.round(e)},useRawInput:!1});const O=v},807472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(727418),o=n.n(r),i=n(675263),a=n.n(i),l=n(667294),p=n.n(l),s=n(485294),c=n.n(s),u=n(472986),f=n.n(u),y=n(805346);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function O(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,n,r,i,a=(r=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(i){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function l(){var e;g(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(w(e=a.call.apply(a,[this].concat(n))),"renderLoading",(function(){return e.props.maskLoading?p().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},p().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},p().createElement(y.Z,{msgId:"loading"}),p().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),S(w(e),"renderRole",(function(t){return p().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),S(w(e),"hasRole",(function(t){return p().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),S(w(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(n=[{key:"render",value:function(){var e=this,t=p().createElement("div",{id:this.props.id,style:b({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},p().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),p().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?p().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):p().createElement("span",null)),n=this.props.draggable?p().createElement(c(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?p().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);S(j,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),S(j,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const E=j},393172:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ne});var r=n(893379),o=n.n(r),i=n(72954);o()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=n(91175),l=n.n(a),p=n(984596),s=n.n(p),c=n(727418),u=n.n(c),f=n(675263),y=n.n(f),m=n(667294),d=n.n(m),b=n(757588),g=n(322843),h=n(22222),v=n(782904),O=n(986069),w=n(805346),P=n(807472),S=n(145959),j=n(650148),E=n(675110),x=n(308316),C=n(800827),R=n(93152),L=n(986267),k=n(86638),T=n(552259),F=n(624262),_=n(218721),z=n.n(_),A=n(264721),M=n.n(A);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}var I=["validations"],Z=["style"];function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function U(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function G(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function X(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(){return null};function ee(e){return e.plugin?e:J(J({},e),{},{plugin:Q})}function te(e,t){return e.map((function(e){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((function(t){return t.target===e.id}));return null!=t?t:e}(e,t)})).map(ee)}const ne={PrintPlugin:u()({loadPlugin:function(e){Promise.resolve().then(function(){var t=n(261196).default.standardItems,r=n(134049),o=r.getDefaultPrintingService,i=r.getLayoutName,a=r.getPrintScales,p=r.getNearestZoom,c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(u,e);var n,r,o,i,c=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(o);if(i){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return X(this,e)});function u(){var e;W(this,u);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return K(Y(e=c.call.apply(c,[this].concat(r))),"state",{activeAccordionPanel:0}),K(Y(e),"getAlternativeBackground",(function(t,n,r){var o=l()(s()(n).map((function(e){return{type:e}})).filter((function(t){return e.isAllowed(t,r)})));return o?l()(t.filter((function(e){return e.type===o.type}))):null})),K(Y(e),"getItems",(function(n){var r=e.props.items.filter((function(e){return!n||e.target===n})),o=te(t[n],e.props.items).map((function(e){return J(J({},e),{},{target:n})}));return[].concat(G(o),G(r)).sort((function(e,t){var n,r;return(null!==(n=e.position)&&void 0!==n?n:0)-(null!==(r=t.position)&&void 0!==r?r:0)}))})),K(Y(e),"getMapConfiguration",(function(){var t=e.props.printingService.getMapConfiguration();return J(J({},t),{},{layers:e.filterLayers(t.layers,t.zoom,t.projection)})})),K(Y(e),"getMapSize",(function(t){var n=t||e.getLayout();return{width:e.props.mapWidth,height:n&&n.map.height/n.map.width*e.props.mapWidth||270}})),K(Y(e),"getPreviewZoom",(function(t){if(e.props.useFixedScales){var n=a(e.props.capabilities);return p(t,n)}return t})),K(Y(e),"getPreviewResolution",(function(t,n){var r=(0,T.dpi2dpu)(T.DEFAULT_SCREEN_DPI,n);return e.props.scales[e.getPreviewZoom(t)]/r})),K(Y(e),"getLayout",(function(t){var n=t||e.props,r=n.getLayoutName,o=n.printSpec,i=n.capabilities,a=r(o);return l()(i.layouts.filter((function(e){return e.name===a})))})),K(Y(e),"renderWarning",(function(e){return e?null:d().createElement(b.Row,null,d().createElement(b.Col,{xs:12},d().createElement("div",{className:"print-warning"},d().createElement("span",null,d().createElement(w.Z,{msgId:"print.layoutWarning"})))))})),K(Y(e),"renderItem",(function(t,n){var r,o,i=n.validations,a=U(n,I),l=null!==(r=t.component)&&void 0!==r?r:t.plugin,p=e.props,s=(p.style,U(p,Z));return d().createElement(l,D({role:"body"},s,t.cfg,a,{validation:null==i?void 0:i[null!==(o=t.id)&&void 0!==o?o:t.name]}))})),K(Y(e),"renderItems",(function(t,n){return e.getItems(t).map((function(t){return e.renderItem(t,n)}))})),K(Y(e),"renderAccordion",(function(t,n){var r=e.getItems(t);return d().createElement(b.PanelGroup,{accordion:!0,activeKey:e.state.activeAccordionPanel,onSelect:function(t){e.setState({activeAccordionPanel:t})}},r.map((function(t,r){var o,i,a;return d().createElement(b.Panel,{header:(0,k.S$)(e.context.messages,null!==(o=null!==(i=null===(a=t.cfg)||void 0===a?void 0:a.title)&&void 0!==i?i:t.title)&&void 0!==o?o:""),eventKey:r,collapsible:!0},e.renderItem(t,n))})))})),K(Y(e),"renderPrintPanel",(function(){var t=e.getLayout(),n=e.getMapConfiguration(),r={layout:t,map:n,layoutName:e.props.getLayoutName(e.props.printSpec),mapSize:e.getMapSize(t),resolutions:(0,T.getResolutions)(null==n?void 0:n.projection),onRefresh:function(){return e.configurePrintMap()},notAllowedLayers:e.isBackgroundIgnored(e.props.layers,null==n?void 0:n.projection),actionConfig:e.props.submitConfig,validations:e.props.printingService.validate(),actions:{print:e.print,addParameter:e.addParameter}};return d().createElement(b.Grid,{fluid:!0,role:"body"},e.renderError(),e.renderWarning(t),d().createElement(b.Row,null,d().createElement(b.Col,{xs:12,md:6},e.renderItems("left-panel",r),e.renderAccordion("left-panel-accordion",r)),d().createElement(b.Col,{xs:12,md:6,style:{textAlign:"center"}},e.renderItems("right-panel",r),e.renderItems("buttons",r),e.renderDownload())))})),K(Y(e),"renderDownload",(function(){return e.props.pdfUrl&&!e.props.usePreview?d().createElement("iframe",{src:e.props.pdfUrl,style:{visibility:"hidden",display:"none"}}):null})),K(Y(e),"renderError",(function(){return e.props.error?d().createElement(b.Row,null,d().createElement(b.Col,{xs:12},d().createElement("div",{className:"print-error"},d().createElement("span",null,e.props.error)))):null})),K(Y(e),"renderPreviewPanel",(function(){return e.renderItems("preview-panel",e.props.previewOptions)})),K(Y(e),"renderBody",(function(){return e.props.pdfUrl&&e.props.usePreview?e.renderPreviewPanel():e.renderPrintPanel()})),K(Y(e),"addParameter",(function(t,n){e.props.addPrintParameter("params."+t,n)})),K(Y(e),"isCompatibleWithSRS",(function(e,t){return"EPSG:3857"===e||M()(["wms","wfs","vector","graticule","empty"],t.type)||"wmts"===t.type&&z()(t.allowedSRS,e)})),K(Y(e),"isAllowed",(function(t,n){return-1===e.props.ignoreLayers.indexOf(t.type)&&e.isCompatibleWithSRS((0,L.normalizeSRS)(n),t)})),K(Y(e),"isBackgroundIgnored",(function(t,n){return!l()((t||e.props.layers).filter((function(t){return"background"===t.group&&t.visibility&&e.isAllowed(t,n)})))})),K(Y(e),"filterLayers",(function(t,n,r){var o=e.getPreviewResolution(n,r),i=t.filter((function(t){return t.visibility&&(0,F.T4)(t,o)&&e.isAllowed(t,r)}));if(e.isBackgroundIgnored(t,r)&&e.props.defaultBackground&&e.props.printSpec.defaultBackground){var a=e.getAlternativeBackground(t,e.props.defaultBackground);return a?[J(J({},a),{},{visibility:!0})].concat(G(i)):i}return i})),K(Y(e),"configurePrintMap",(function(t){var n=t||e.props,r=n.map,o=n.capabilities,i=n.minZoom,l=n.configurePrintMap,s=n.useFixedScales,c=n.getZoomForExtent,u=n.maxZoom,f=n.currentLocale,y=n.scales,m=n.layers;if(r&&r.bbox&&o){var d=(0,L.reprojectBbox)([r.bbox.bounds.minx,r.bbox.bounds.miny,r.bbox.bounds.maxx,r.bbox.bounds.maxy],r.bbox.crs,r.projection),b=e.getMapSize();if(s){var g=c(d,b,i,u),h=a(o),v=p(r.zoom,h),O=h[v];l(r.center,g,v,O,m,r.projection,f)}else{var w=y[r.zoom];l(r.center,r.zoom,r.zoom,w,m,r.projection,f)}}})),K(Y(e),"print",(function(){var t;e.props.setPage(0),e.props.onBeforePrint(),e.props.printingService.print(null===(t=e.getMapConfiguration())||void 0===t?void 0:t.layers).then((function(t){return e.props.onPrint(e.props.capabilities.createURL,J(J({},t),e.props.overrideOptions))})).catch((function(t){e.props.printError("Error in printing:"+t.message)}))})),e}return n=u,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.configurePrintMap()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.open&&!this.props.open,n=this.props.open&&this.props.syncMapPreview&&(0,T.mapUpdated)(this.props.map,e.map),r=e.printSpec.defaultBackground!==this.props.printSpec.defaultBackground;(t||n||r)&&this.configurePrintMap(e)}},{key:"render",value:function(){return(this.props.capabilities||this.props.error)&&this.props.open?this.props.withContainer?this.props.withPanelAsContainer?d().createElement(b.Panel,{className:"mapstore-print-panel",header:d().createElement("span",null,d().createElement("span",{className:"print-panel-title"},d().createElement(w.Z,{msgId:"print.paneltitle"})),d().createElement("span",{className:"print-panel-close panel-close",onClick:this.props.toggleControl})),style:this.props.style},this.renderBody()):d().createElement(P.Z,{id:"mapstore-print-panel",style:J({left:"17%",top:"50px",zIndex:1990},this.props.style)},d().createElement("span",{role:"header"},d().createElement("span",{className:"print-panel-title"},d().createElement(w.Z,{msgId:"print.paneltitle"})),d().createElement("button",{onClick:this.props.toggleControl,className:"print-panel-close close"},this.props.closeGlyph?d().createElement(b.Glyphicon,{glyph:this.props.closeGlyph}):d().createElement("span",null,"Ã—"))),this.renderBody()):this.renderBody():null}}])&&$(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),u}(d().Component);K(c,"propTypes",{map:y().object,layers:y().array,capabilities:y().object,printSpec:y().object,printSpecTemplate:y().object,withContainer:y().bool,withPanelAsContainer:y().bool,open:y().bool,pdfUrl:y().string,title:y().string,style:y().object,mapWidth:y().number,mapType:y().string,alternatives:y().array,toggleControl:y().func,onBeforePrint:y().func,setPage:y().func,onPrint:y().func,printError:y().func,configurePrintMap:y().func,getLayoutName:y().func,error:y().string,getZoomForExtent:y().func,minZoom:y().number,maxZoom:y().number,usePreview:y().bool,mapPreviewOptions:y().object,syncMapPreview:y().bool,useFixedScales:y().bool,scales:y().array,ignoreLayers:y().array,defaultBackground:y().oneOfType([y().string,y().arrayOf(y().string)]),closeGlyph:y().string,submitConfig:y().object,previewOptions:y().object,currentLocale:y().string,overrideOptions:y().object,items:y().array,addPrintParameter:y().func,printingService:y().object}),K(c,"contextTypes",{messages:y().object,plugins:y().object,loadedPlugins:y().object}),K(c,"defaultProps",{withContainer:!0,withPanelAsContainer:!1,title:"print.paneltitle",toggleControl:function(){},onBeforePrint:function(){},setPage:function(){},onPrint:function(){},configurePrintMap:function(){},printSpecTemplate:{},getLayoutName:i,getZoomForExtent:T.defaultGetZoomForExtent,pdfUrl:null,mapWidth:370,mapType:"leaflet",minZoom:1,maxZoom:23,usePreview:!0,mapPreviewOptions:{enableScalebox:!1,enableRefresh:!1},syncMapPreview:!0,useFixedScales:!1,scales:[],ignoreLayers:["google","bing"],defaultBackground:["osm","wms","empty"],closeGlyph:"1-close",submitConfig:{buttonConfig:{bsSize:"small",bsStyle:"primary"},glyph:""},previewOptions:{buttonStyle:"primary"},style:{},currentLocale:"en-US",overrideOptions:{},items:[],printingService:o()});var u=(0,h.P1)([function(e){return e.controls.print&&e.controls.print.enabled||e.controls.toolbar&&"print"===e.controls.toolbar.active},function(e){return e.print&&e.print.capabilities},j.DX,function(e){return e.print&&e.print.pdfUrl},function(e){return e.print&&e.print.error},C.Od,E.l2,C.up,function(e){return e.browser&&(!e.browser.ie||e.browser.ie11)},x.Pz,R.$v],(function(e,t,n,r,o,i,a,l,p,s,c){return{open:e,capabilities:t,printSpec:n,pdfUrl:r,error:o,map:i,layers:a.filter((function(e){return!e.loadingError})),scales:l,usePreview:p,currentLocale:s,mapType:c}})),f=(0,g.$j)(u,{toggleControl:v.Xi.bind(null,"print",null),onPrint:O.gV,printError:O.OS,onBeforePrint:O.MW,setPage:v.Xg.bind(null,"print","currentPage"),configurePrintMap:O.h9,addPrintParameter:O.eT})(c);e(f)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.print&&e.print.enabled||e.toolbar&&"print"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium' || !state('printEnabled')}",Toolbar:{name:"print",position:7,help:d().createElement(w.Z,{msgId:"helptexts.print"}),tooltip:"printbutton",icon:d().createElement(b.Glyphicon,{glyph:"print"}),exclusive:!0,panel:!0,priority:1},BurgerMenu:{name:"print",position:2,tooltip:"printToolTip",text:d().createElement(w.Z,{msgId:"printbutton"}),icon:d().createElement(b.Glyphicon,{glyph:"print"}),action:v.Xi.bind(null,"print",null),priority:2,doNotHide:!0}}),reducers:{print:S.Z}}},261196:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DefaultBackgrounOption:()=>kt,Description:()=>Et,Layout:()=>xt,LegendOptions:()=>Ct,MapPreview:()=>Lt,Name:()=>jt,PrintPreview:()=>Ft,PrintSubmit:()=>Tt,Resolution:()=>Rt,default:()=>zt,standardItems:()=>_t});var r=n(533664),o=n(782904),i=n(986069),a=n(463202),l=n(667294),p=n.n(l),s=n(675263),c=n.n(s),u=n(322843),f=n(86638),y=n(757588),m=n(227361),d=n.n(m);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}var g=function(e,t){var n=e.spec,r=e.property,o=e.label,i=e.placeholder,a=e.actions,s=e.onChangeParameter,c=e.path,u=void 0===c?"params.":c,m=e.type,g=void 0===m?"text":m,h=e.additionalProperty,v=void 0===h||h,O=u+r;return(0,l.useEffect)((function(){var e;v&&a.addParameter(r,null!==(e=d()(n,O))&&void 0!==e?e:"")}),[]),p().createElement(y.FormGroup,null,o&&p().createElement(y.ControlLabel,null,(0,f.S$)(t.messages,o))||null,p().createElement(y.FormControl,b({},function(e){return"textarea"!==e?{type:e}:{componentClass:e}}(g),{value:d()(n,O),placeholder:i&&(0,f.S$)(t.messages,i),onChange:function(e){return s(O,e.target.value)}})))};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function P(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g.contextTypes={messages:c().object},(0,u.rx)("PrintTextInput",{component:(0,r.connect)((function(e){var t;return{spec:(null==e||null===(t=e.print)||void 0===t?void 0:t.spec)||{}}}),{onChangeParameter:i.d$})(g),containers:{Print:{priority:1}}});var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function a(){var e;v(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(S(e=i.call.apply(i,[this].concat(n))),"onChange",(function(){e.props.onChange(!e.refs.input.props.checked)})),E(S(e),"isEnabled",(function(){return e.props.isEnabled?e.props.isEnabled(e.props.layouts):0===e.props.layouts.length||e.props.layouts.some((function(t){return t.name.match(e.props.enableRegex)}))})),e}return t=a,(n=[{key:"render",value:function(){return p().createElement(y.Checkbox,{disabled:!this.isEnabled(),ref:"input",checked:this.props.checked,onChange:this.onChange},this.props.label)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);E(x,"propTypes",{layouts:c().array,enableRegex:c().oneOfType([c().object,c().string]),label:c().string,onChange:c().func,checked:c().bool,isEnabled:c().func}),E(x,"defaultProps",{layouts:[],enableRegex:/^.*$/,label:"Option",onChange:function(){},checked:!1});const C=x;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e,t){var n=e.spec,r=e.property,o=e.label,i=e.onChangeParameter,a=e.enabled,s=void 0===a||a,c=e.actions,y=e.path,m=void 0===y?"params.":y,b=e.additionalProperty,g=void 0===b||b,h=m+r;return(0,l.useEffect)((function(){var e;g&&(null==c||c.addParameter(r,null!==(e=d()(n,h))&&void 0!==e&&e))}),[]),(0,u.CU)({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),"{"+s+"}")?p().createElement(C,{checked:!!d()(n,h),label:(0,f.S$)(t.messages,o),onChange:function(e){return i(h,e)}}):null};k.contextTypes={messages:c().object};var T=n(472986),F=n.n(T),_=n(805346);function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){var t=e.text,n=e.actions,r=e.action,o=e.enabled,i=e.actionConfig,a=e.loading,l=e.className,s=void 0===l?"":l,c=i.glyph,f=i.buttonConfig,m=c?p().createElement(y.Glyphicon,{glyph:c}):p().createElement("span",null),d=!!(0,u.CU)({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),"{"+o+"}");return p().createElement(y.Button,z({className:s,disabled:!d},f,{style:{marginTop:"10px",marginRight:"5px"},onClick:n[r]}),a?p().createElement(F(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):m," ",p().createElement(_.Z,{msgId:t}))};(0,u.rx)("Action",{component:(0,r.connect)((function(e){var t;return{spec:(null==e||null===(t=e.print)||void 0===t?void 0:t.spec)||{},loading:e.print&&e.print.isLoading||!1}}))(N),containers:{Print:{priority:1}}});var I=n(299993);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function B(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(r);if(o){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(){var e;D(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return V(W(e=i.call.apply(i,[this].concat(n))),"onChange",(function(t){e.props.onChange(t.target.value)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.items.map((function(e){return p().createElement("option",{key:e.value,value:e.value},e.name)}));return p().createElement(y.FormGroup,null,this.props.label?p().createElement(y.ControlLabel,null,this.props.label):null,p().createElement(y.FormControl,{ref:"input",value:this.props.selected,componentClass:"select",onChange:this.onChange},e))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);V(X,"propTypes",{items:c().array,label:c().string,onChange:c().func,selected:c().string}),V(X,"defaultProps",{items:[],label:"Choice",onChange:function(){},selected:""});const Y=X;var q=n(623560),H=n.n(q);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}var K=["children","sheetRegex","layouts"];function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(r);if(o){var n=ie(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return re(this,e)});function a(){var e;ee(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ae(oe(e=i.call.apply(i,[this].concat(n))),"getLayoutName",(function(t){return e.props.layoutNames?H()(e.props.layoutNames)?e.props.layoutNames(t):e.props.layoutNames[t]||t:t})),ae(oe(e),"getSheetFormats",(function(){return e.props.layouts.reduce((function(t,n){var r=n.name.match(e.props.sheetRegex);return r&&r.length>0&&-1===t.indexOf(r[r.length-1])&&t.concat([r[r.length-1]])||t}),[]).map((function(t){return{name:e.getLayoutName(t),value:t}}))})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=(e.children,e.sheetRegex,e.layouts,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,K));return p().createElement(Y,Q({},t,{items:this.getSheetFormats()}))}}])&&te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);ae(le,"propTypes",{layouts:c().array,sheetRegex:c().oneOfType([c().object,c().string]),label:c().string,onChange:c().func,selected:c().string,layoutNames:c().oneOfType([c().object,c().func])}),ae(le,"defaultProps",{layouts:[],sheetRegex:/^[^_]+/,label:"Sheet Size",onChange:function(){},selected:""});const pe=le;function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fe(e,t)}function ye(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return me(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(r);if(o){var n=de(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ye(this,e)});function a(){var e;ce(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return be(me(e=i.call.apply(i,[this].concat(n))),"onChange",(function(t){e.props.onChange(t.target.value)})),be(me(e),"renderOptions",(function(){return e.props.options.map((function(t){return p().createElement(y.Radio,{key:t.label,disabled:!e.isEnabled(),ref:"input"+t.value,checked:e.props.selected===t.value,onChange:e.onChange,value:t.value},(0,f.S$)(e.context.messages,t.label))}))})),be(me(e),"isEnabled",(function(){return e.props.isEnabled?e.props.isEnabled(e.props.layouts):0===e.props.layouts.length||e.props.layouts.some((function(t){return t.name.match(e.props.enableRegex)}))})),e}return t=a,(n=[{key:"render",value:function(){return p().createElement("span",{className:"form-inline"},this.renderOptions())}}])&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);be(ge,"propTypes",{layouts:c().array,enableRegex:c().oneOfType([c().object,c().string]),options:c().array,onChange:c().func,selected:c().string,isEnabled:c().func}),be(ge,"contextTypes",{messages:c().object}),be(ge,"defaultProps",{layouts:[],enableRegex:/^.*$/,options:[{label:"Option1",value:"Option1"},{label:"Option2",value:"Option2"}],onChange:function(){},selected:"Option1"});const he=ge;var ve=n(650148),Oe=[{name:"legend",component:(0,r.connect)((function(e){return{checked:e.print&&e.print.spec&&!!e.print.spec.includeLegend,layouts:(0,ve.p6)(e)}}),{onChange:i.d$.bind(null,"includeLegend")})(C),regex:/legend/},{name:"2pages",component:(0,r.connect)((function(e){return{checked:e.print&&e.print.spec.includeLegend&&e.print.spec&&!!e.print.spec.twoPages,layouts:(0,ve.p6)(e),isEnabled:function(){return(0,ve.LI)(e)}}}),{onChange:i.d$.bind(null,"twoPages")})(C),regex:/2_pages/},{name:"landscape",component:(0,r.connect)((function(e){return{selected:e.print&&e.print.spec&&e.print.spec.landscape?"landscape":"portrait",layouts:(0,ve.p6)(e),options:[{label:"print.alternatives.landscape",value:"landscape"},{label:"print.alternatives.portrait",value:"portrait"}]}}),{onChange:(0,I.qC)(i.d$.bind(null,"landscape"),(function(e){return"landscape"===e}))})(he),regex:/landscape/}],we=function(e,t){var n=e.layouts,r=e.spec,o=e.onChangeParameter,i=e.alternatives;return p().createElement(p().Fragment,null,p().createElement(pe,{key:"sheetsize",selected:null==r?void 0:r.sheet,onChange:function(e){return o("sheet",e)},layouts:n,label:(0,f.S$)(t.messages,"print.sheetsize")}),function(e,t){return e.map((function(e){return p().createElement(e.component,{key:"printoption_"+e.name,label:(0,f.S$)(t.messages,"print.alternatives."+e.name),enableRegex:e.regex})}))}(i||Oe,t))};we.contextTypes={messages:c().object};var Pe=n(282467),Se=n(794192);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function Re(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Le(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ke(r);if(o){var n=ke(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Re(this,e)});function a(){var e;Ee(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Te(Le(e=i.call.apply(i,[this].concat(n))),"onChangeFamily",(function(t){e.props.onChangeFamily(t)})),Te(Le(e),"onChangeSize",(function(t){e.props.onChangeSize(parseInt(t,10))})),Te(Le(e),"toggleBold",(function(){e.props.onChangeBold(!e.props.bold)})),Te(Le(e),"toggleItalic",(function(){e.props.onChangeItalic(!e.props.italic)})),e}return t=a,(n=[{key:"render",value:function(){return p().createElement(y.Grid,{fluid:!0},p().createElement(y.Row,null,p().createElement(y.Col,{xs:12},p().createElement("label",{className:"control-label"},this.props.label))),p().createElement(y.Row,null,p().createElement(y.Col,{xs:5},p().createElement(Y,{ref:"family",onChange:this.onChangeFamily,label:"",items:this.props.fonts.map((function(e){return{name:e,value:e}})),selected:this.props.family})),p().createElement(y.Col,{xs:3},p().createElement(Se.Z,{ref:"size",type:"number",value:this.props.size,min:0,precision:0,onChange:this.onChangeSize})),p().createElement(y.Col,{xs:2},p().createElement(Pe.Z,{bsStyle:"primary",bsSize:"small",active:this.props.bold,onClick:this.toggleBold},p().createElement(y.Glyphicon,{glyph:"bold"}))),p().createElement(y.Col,{xs:2},p().createElement(Pe.Z,{bsStyle:"primary",bsSize:"small",active:this.props.italic,onClick:this.toggleItalic},p().createElement(y.Glyphicon,{glyph:"italic"})))))}}])&&xe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);Te(Fe,"propTypes",{fonts:c().array,label:c().string,onChangeFamily:c().func,onChangeSize:c().func,onChangeBold:c().func,onChangeItalic:c().func,family:c().string,size:c().number,bold:c().bool,italic:c().bool}),Te(Fe,"defaultProps",{fonts:["Verdana","Serif","SansSerif","Arial","Courier New","Tahoma","Times New Roman"],label:"Font",onChangeFamily:function(){},onChangeSize:function(){},family:"",size:8,bold:!1,italic:!1});const _e=Fe;var ze=function(e,t){var n=e.spec,r=e.onChangeParameter,o=e.actions;return p().createElement(p().Fragment,null,p().createElement(_e,{family:null==n?void 0:n.fontFamily,size:null==n?void 0:n.fontSize,bold:null==n?void 0:n.bold,italic:null==n?void 0:n.italic,onChangeFamily:function(e){return r("fontFamily",e)},onChangeSize:function(e){return r("fontSize",e)},onChangeBold:function(e){return r("bold",e)},onChangeItalic:function(e){return r("italic",e)},label:(0,f.S$)(t.messages,"print.legend.font")}),p().createElement(C,{label:(0,f.S$)(t.messages,"print.legend.forceLabels"),checked:!(null==n||!n.forceLabels),onChange:function(e){return r("forceLabels",e)}}),p().createElement(C,{label:(0,f.S$)(t.messages,"print.legend.antiAliasing"),checked:!(null==n||!n.antiAliasing),onChange:function(e){return r("antiAliasing",e)}}),p().createElement(g,{label:(0,f.S$)(t.messages,"print.legend.iconsSize"),spec:n,type:"number",additionalProperty:!1,property:"iconSize",path:"",onChangeParameter:r,actions:o}),p().createElement(g,{label:(0,f.S$)(t.messages,"print.legend.dpi"),spec:n,type:"number",additionalProperty:!1,property:"legendDpi",path:"",onChangeParameter:r,actions:o}))};ze.contextTypes={messages:c().object};var Ae=function(e,t){var n=e.items,r=e.spec,o=e.onChangeParameter;return p().createElement(p().Fragment,null,p().createElement(Y,{selected:null==r?void 0:r.resolution,onChange:function(e){return o("resolution",e)},items:n,label:(0,f.S$)(t.messages,"print.resolution")}))};Ae.contextTypes={messages:c().object};var Me,Ne,Ie,Ze=n(727418),De=n.n(Ze),Ue=n(134049),Ge=n(875964),Be=n(414293),We=n.n(Be);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ve(){return Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ve.apply(this,arguments)}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ke(e,t)}function Qe(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return et(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(l,e);var t,r,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tt(o);if(i){var n=tt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qe(this,e)});function l(){var e;He(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nt(et(e=a.call.apply(a,[this].concat(n))),"state",{mapTypeLoaded:!1}),nt(et(e),"getRatio",(function(){return e.props.width&&e.props.layoutSize&&e.props.resolutions?(0,Ue.getResolutionMultiplier)(e.props.layoutSize.width,e.props.width,e.props.printRatio):1})),nt(et(e),"getResolutions",(function(){return e.props.width&&e.props.layoutSize&&e.props.resolutions?e.props.resolutions.map((function(t){return t*e.getRatio()})):e.props.resolutions})),nt(et(e),"renderLayerContent",(function(e,t){return e.features&&"vector"===e.type?e.features.map((function(n){return p().createElement(Ie,{crs:t,key:n.id,type:n.type,geometry:n.geometry,features:n.features,msId:n.id,featuresCrs:e.featuresCrs||"EPSG:4326",layerStyle:e.style,style:n.style||e.style||null,properties:n.properties})})):null})),nt(et(e),"adjustResolution",(function(t){var n=e.getRatio(),r=Math.round(96/n);return De()({},t,qe(qe(qe({},!We()(null==t?void 0:t.minResolution)&&{minResolution:t.minResolution*n}),!We()(null==t?void 0:t.maxResolution)&&{maxResolution:t.maxResolution*n}),{},{params:De()({},t.params,{format_options:"dpi:"+r,"MAP.RESOLUTION":r})}))})),e}return t=l,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this._isMounted=!0,this.props.onLoadingMapPlugins(!0),Promise.all([n(740026)("./"+this.props.mapType+"/index"),n(862769)("./"+this.props.mapType+"/plugins/index")]).then((function(t){var n,r,o=(n=t,r=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(n,r)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];if(e._isMounted){var i=o.default;Me=i.LMap,Ne=i.LLayer,Ie=i.Feature,e.setState({mapTypeLoaded:!0}),e.props.onLoadingMapPlugins(!1,e.props.mapType)}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;if(!this.state.mapTypeLoaded)return null;var t=De()({},this.props.style,{width:this.props.width+"px",height:this.props.height+"px"}),n=this.getResolutions(),r=n?{view:{resolutions:n}}:{},o=this.props.map&&this.props.map.projection||"EPSG:3857";return this.props.map&&this.props.map.center?p().createElement("div",{className:"print-map-preview"},p().createElement(Me,Ve({ref:"mappa"},this.props.map,{resize:this.props.height,style:t,interactive:!1,onMapViewChanges:this.props.onMapViewChanges,zoomControl:!1,zoom:this.props.useFixedScales&&this.props.scales?(0,Ue.getMapZoom)(this.props.map.scaleZoom,this.props.scales):this.props.map.zoom,center:this.props.map.center,id:"print_preview",registerHooks:!1,mapOptions:r}),this.props.layers.map((function(t,n){return p().createElement(Ne,{key:t.id||t.name,position:n,type:t.type,srs:o,options:De()({},e.adjustResolution(t),{srs:o}),env:e.props.env},e.renderLayerContent(t,o))}))),this.props.enableScalebox?p().createElement(Ge.Z,{id:"mappreview-scalebox",currentZoomLvl:this.props.map.scaleZoom,scales:this.props.scales,onChange:this.props.onChangeZoomLevel}):null,this.props.enableRefresh?p().createElement(Pe.Z,{bsStyle:"primary",onClick:this.props.onMapRefresh,className:"print-mappreview-refresh"},p().createElement(y.Glyphicon,{glyph:"refresh"})):null):null}}])&&Je(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(p().Component);nt(rt,"propTypes",{map:c().object,layers:c().array,style:c().object,scales:c().array,onChangeZoomLevel:c().func,onMapViewChanges:c().func,onMapRefresh:c().func,height:c().number,width:c().number,mapType:c().string,enableRefresh:c().bool,enableScalebox:c().bool,resolutions:c().array,printRatio:c().number,layout:c().string,layoutSize:c().object,useFixedScales:c().bool,env:c().object,onLoadingMapPlugins:c().func}),nt(rt,"defaultProps",{map:null,layers:[],mapType:"leaflet",style:{display:"block",border:"1px solid black",position:"relative"},onChangeZoomLevel:function(){},onMapViewChanges:function(){},onMapRefresh:function(){},width:370,height:270,enableRefresh:!0,enableScalebox:!0,useFixedScales:!1,onLoadingMapPlugins:function(){}});const ot=rt;var it=["mapSize","layout","layoutName","resolutions","useFixedScales","localizedLayerStylesEnv","mapPreviewOptions","mapType","map","capabilities","onRefresh","validation"];function at(){return at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(this,arguments)}var lt=function(e){var t,n=e.mapSize,r=e.layout,o=e.layoutName,i=e.resolutions,a=e.useFixedScales,l=e.localizedLayerStylesEnv,s=e.mapPreviewOptions,c=e.mapType,u=e.map,f=e.capabilities,y=e.onRefresh,m=e.validation,d=void 0===m?{valid:!0}:m,b=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,it),g=f.scales.slice(0).reverse().map((function(e){return parseFloat(e.value)}))||[];return d.valid?p().createElement(ot,at({},b,{map:u,layers:null!==(t=null==u?void 0:u.layers)&&void 0!==t?t:[],scales:g,width:n.width,height:n.height,mapType:c,onMapRefresh:y,layout:o,layoutSize:r&&r.map||{width:10,height:10},resolutions:i,useFixedScales:a,env:l},s)):p().createElement("div",{id:"map-preview-disabled-message"},p().createElement(_.Z,{msgId:"print.disabledpreview"}))};lt.contextTypes={messages:c().object};var pt=n(466756);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ft(e,t)}function yt(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mt(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(r);if(o){var n=dt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yt(this,e)});function a(){var e;ct(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bt(mt(e=i.call.apply(i,[this].concat(n))),"onDocumentComplete",(function(t){e.props.setPages(t&&t.numPages||0)})),bt(mt(e),"firstPage",(function(){e.props.currentPage>0&&e.props.setPage(0)})),bt(mt(e),"lastPage",(function(){e.props.currentPage<e.props.pages-1&&e.props.setPage(e.props.pages-1)})),bt(mt(e),"prevPage",(function(){e.props.currentPage>0&&e.props.setPage(e.props.currentPage-1)})),bt(mt(e),"nextPage",(function(){e.props.currentPage<e.props.pages-1&&e.props.setPage(e.props.currentPage+1)})),bt(mt(e),"zoomIn",(function(){e.props.setScale(e.props.scale*e.props.zoomFactor)})),bt(mt(e),"zoomOut",(function(){e.props.setScale(e.props.scale/e.props.zoomFactor)})),e}return t=a,(n=[{key:"render",value:function(){return p().createElement("div",{id:"mapstore-print-preview-panel"},p().createElement("div",{style:this.props.style},p().createElement(pt.BB,{file:this.props.url,onLoadSuccess:this.onDocumentComplete},p().createElement(pt.T3,{pageNumber:this.props.currentPage+1,scale:this.props.scale}))),p().createElement("div",{style:{marginTop:"10px"}},p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,style:{marginRight:"10px"},onClick:this.props.back},p().createElement(y.Glyphicon,{glyph:"arrow-left"})),p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,disabled:this.props.scale>=this.props.maxScale,onClick:this.zoomIn},p().createElement(y.Glyphicon,{glyph:"zoom-in"})),p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,disabled:this.props.scale<=this.props.minScale,onClick:this.zoomOut},p().createElement(y.Glyphicon,{glyph:"zoom-out"})),p().createElement("label",{style:{marginLeft:"10px",marginRight:"10px"}},this.props.scale,"x"),p().createElement("div",{className:"print-download btn btn-"+this.props.buttonStyle},p().createElement("a",{href:this.props.downloadUrl,target:"_blank"},p().createElement(y.Glyphicon,{glyph:"save"}))),p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,disabled:0===this.props.currentPage,onClick:this.firstPage},p().createElement(y.Glyphicon,{glyph:"step-backward"})),p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,disabled:0===this.props.currentPage,onClick:this.prevPage},p().createElement(y.Glyphicon,{glyph:"chevron-left"})),p().createElement("label",{style:{marginLeft:"10px",marginRight:"10px"}},this.props.currentPage+1," / ",this.props.pages),p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,disabled:this.props.currentPage===this.props.pages-1,onClick:this.nextPage},p().createElement(y.Glyphicon,{glyph:"chevron-right"})),p().createElement(Pe.Z,{bsStyle:this.props.buttonStyle,disabled:this.props.currentPage===this.props.pages-1,onClick:this.lastPage},p().createElement(y.Glyphicon,{glyph:"step-forward"}))))}}])&&ut(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);bt(gt,"propTypes",{url:c().string,downloadUrl:c().string,scale:c().number,currentPage:c().number,pages:c().number,zoomFactor:c().number,minScale:c().number,maxScale:c().number,back:c().func,setScale:c().func,setPage:c().func,setPages:c().func,style:c().object,buttonStyle:c().string}),bt(gt,"defaultProps",{url:null,downloadUrl:null,scale:1,minScale:.25,maxScale:8,currentPage:0,pages:1,zoomFactor:2,back:function(){},setScale:function(){},setPage:function(){},setPages:function(){},style:{height:"500px",width:"800px",overflow:"auto",backgroundColor:"#888",padding:"10px"},buttonStyle:"default"});const ht=gt;var vt=["outputFormat"];function Ot(){return Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pt=["png","jpg","bmp","gif","jpeg"],St=function(e){var t,n,r=e.downloadUrl,o=e.format,i=e.buttonStyle,a=e.back,s=e.maxPreviewZoom,c=void 0===s?5:s,u=e.supportedFormats,f=void 0===u?Pt:u,m=(t=(0,l.useState)(1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=m[0],b=m[1],g=-1!==f.indexOf(o);return p().createElement("div",{id:"mapstore-image-print-preview-panel"},g?p().createElement("div",{className:"mapstore-print-preview-img-wrapper"},p().createElement("img",{src:r,style:{transform:"scale(".concat(d,")"),transformOrigin:"top left"}})):p().createElement(_.Z,{msgId:"print.previewFormatUnsupported"}),p().createElement("div",{style:{marginTop:"10px"}},p().createElement(y.Button,{bsStyle:i,style:{marginRight:"10px"},onClick:a},p().createElement(y.Glyphicon,{glyph:"arrow-left"})),p().createElement(y.Button,{bsStyle:i,disabled:!g||d>=c,onClick:function(){b((function(e){return e+1}))}},p().createElement(y.Glyphicon,{glyph:"zoom-in"})),p().createElement(y.Button,{bsStyle:i,disabled:!g||d<=1,onClick:function(){b((function(e){return e-1}))}},p().createElement(y.Glyphicon,{glyph:"zoom-out"})),p().createElement("label",{style:{marginLeft:"10px",marginRight:"10px"}},d,"x"),p().createElement("div",{className:"print-download btn btn-"+i},p().createElement("a",{href:r,target:"_blank"},p().createElement(y.Glyphicon,{glyph:"save"})))))},jt=(0,r.connect)((function(e){var t;return{spec:(null===(t=e.print)||void 0===t?void 0:t.spec)||{},additionalProperty:!1,property:"name",path:"",type:"text",label:"print.title",placeholder:"print.titleplaceholder"}}),{onChangeParameter:i.d$})(g),Et=(0,r.connect)((function(e){var t;return{spec:(null===(t=e.print)||void 0===t?void 0:t.spec)||{},additionalProperty:!1,property:"description",path:"",type:"textarea",label:"print.description",placeholder:"print.descriptionplaceholder"}}),{onChangeParameter:i.d$})(g),xt=(0,r.connect)((function(e){var t,n,r;return{spec:(null===(t=e.print)||void 0===t?void 0:t.spec)||{},layouts:(null==e||null===(n=e.print)||void 0===n||null===(r=n.capabilities)||void 0===r?void 0:r.layouts)||[]}}),{onChangeParameter:i.d$})(we),Ct=(0,r.connect)((function(e){var t;return{spec:(null===(t=e.print)||void 0===t?void 0:t.spec)||{}}}),{onChangeParameter:i.d$})(ze),Rt=(0,r.connect)((function(e){var t,n,r,o,i;return{spec:(null===(t=e.print)||void 0===t?void 0:t.spec)||{},items:null!==(n=null==e||null===(r=e.print)||void 0===r||null===(o=r.capabilities)||void 0===o||null===(i=o.dpis)||void 0===i?void 0:i.map((function(e){return{name:e.name+" dpi",value:e.value}})))&&void 0!==n?n:[]}}),{onChangeParameter:i.d$})(Ae),Lt=(0,r.connect)((function(e){var t,n;return{capabilities:null!==(t=null===(n=e.print)||void 0===n?void 0:n.capabilities)&&void 0!==t?t:{}}}),{onChangeZoomLevel:i.pQ,onMapViewChanges:i.z})(lt),kt=(0,r.connect)((function(e){var t;return{spec:(null==e||null===(t=e.print)||void 0===t?void 0:t.spec)||{},enabled:"context.notAllowedLayers",path:"",property:"defaultBackground",additionalProperty:!1,label:"print.defaultBackground"}}),{onChangeParameter:i.d$})(k),Tt=(0,r.connect)((function(e){var t;return{spec:(null==e||null===(t=e.print)||void 0===t?void 0:t.spec)||{},loading:e.print&&e.print.isLoading||!1,text:"print.submit",action:"print",enabled:"context.layout",className:"print-submit"}}))(N),Ft=(0,r.connect)((function(e){var t,n;return{url:e.print&&a.ZP.getProxiedUrl(e.print.pdfUrl),downloadUrl:e.print&&e.print.pdfUrl,scale:e.controls&&e.controls.print&&e.controls.print.viewScale||.5,currentPage:e.controls&&e.controls.print&&e.controls.print.currentPage||0,pages:e.controls&&e.controls.print&&e.controls.print.pages||1,outputFormat:(null===(t=e.print)||void 0===t||null===(n=t.spec)||void 0===n?void 0:n.outputFormat)||"pdf"}}),{back:i._4,setPage:o.Xg.bind(null,"print","currentPage"),setPages:o.Xg.bind(null,"print","pages"),setScale:o.Xg.bind(null,"print","viewScale")})((function(e){var t=e.outputFormat,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,vt);return"pdf"===t?p().createElement(ht,n):p().createElement(St,Ot({format:t},n))})),_t={"left-panel":[{id:"name",plugin:jt,cfg:{},position:1},{id:"description",plugin:Et,cfg:{},position:2}],"left-panel-accordion":[{id:"layout",plugin:xt,cfg:{title:"print.layout"},position:1},{id:"legend-options",plugin:Ct,cfg:{title:"print.legendoptions"},position:2}],"right-panel":[{id:"resolution",plugin:Rt,cfg:{},position:1},{id:"map-preview",plugin:Lt,cfg:{},position:2},{id:"default-background-ignore",plugin:kt,cfg:{},position:3}],buttons:[{id:"submit",plugin:Tt,cfg:{},position:1}],"preview-panel":[{id:"printpreview",plugin:Ft,cfg:{},position:1}]};const zt={standardItems:_t}},145959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(986069),o=n(782904),i=n(513218),a=n.n(i),l=n(227361),p=n.n(l),s=n(727418),c=n.n(s),u=n(436968),f=n.n(u);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={antiAliasing:!0,iconSize:24,legendDpi:96,fontFamily:"Verdana",fontSize:8,bold:!1,italic:!1,resolution:96,name:"",description:"",outputFormat:"pdf"},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split("_")[0]};const h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{spec:b,capabilities:null,map:null,isLoading:!1,pdfUrl:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.kM:return"print"===t.control?c()({},e,{pdfUrl:null,isLoading:!1,error:null}):e;case r.qp:var n=p()(t,"capabilities.layouts",[{name:"A4"}]),i=n.filter((function(t){return g(t.name)===e.spec.sheet})).length?e.spec.sheet:g(n[0].name);return c()({},e,{capabilities:t.capabilities,spec:c()({},e.spec||{},{sheet:i,resolution:t.capabilities&&t.capabilities.dpis&&t.capabilities.dpis.length&&t.capabilities.dpis[0].value})});case r.U6:return m(m({},e),{},{spec:f()(m({},e.spec),t.name,t.value)});case r.rd:var l=p()(e.spec,t.name);return l?e:m(m({},e),{},{spec:f()(m({},e.spec),t.name,t.value)});case r.PB:var s,u,y=t.layers.map((function(e){return e.title?c()({},e,{title:a()(e.title)&&t.currentLocale&&e.title[t.currentLocale]||a()(e.title)&&e.title.default||e.title}):e}));return c()({},e,{map:{center:t.center,zoom:t.zoom,scaleZoom:t.scaleZoom,scale:t.scale,layers:y,size:null!==(s=t.size)&&void 0!==s?s:null===(u=e.map)||void 0===u?void 0:u.size,projection:t.projection},error:null});case r.HA:var d=t.zoom-e.map.scaleZoom;return c()({},e,{map:c()({},e.map,{scaleZoom:t.zoom,zoom:e.map.zoom+d,scale:t.scale})});case r.Yk:return c()({},e,{map:c()({},e.map,{size:t.size})});case r.Fp:return c()({},e,{isLoading:!0,pdfUrl:null,error:null});case r.EZ:return c()({},e,{isLoading:!1,pdfUrl:t.url,error:null});case r.WB:case r.aN:return c()({},e,{isLoading:!1,pdfUrl:null,error:t.error});case r.qH:return c()({},e,{isLoading:!1,pdfUrl:null,error:null});default:return e}}},38842:(e,t,n)=>{"use strict";n.d(t,{wk:()=>u,Yf:()=>f,c3:()=>y,fY:()=>m});var r=n(218721),o=n.n(r),i=n(227361),a=n.n(i),l=n(313311),p=n.n(l),s=n(22222),c=n(308316),u=function(e){return o()(e,"localConfig.localizedLayerStyles")},f=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),n=p()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(n,"cfg.catalog.localizedLayerStyles",!1)},y=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},m=(0,s.P1)(u,y,c.KV,(function(e,t,n){var r=[];return e&&r.push({name:t,value:n}),r}))},650148:(e,t,n)=>{"use strict";n.d(t,{DX:()=>i,p6:()=>a,LI:()=>l});var r=n(727418),o=n.n(r),i=function(e){return e.print&&e.print.spec&&o()({},e.print.spec,e.print.map||{})},a=function(e){return e.print&&e.print.capabilities&&e.print.capabilities.layouts.filter((function(t){return 0===t.name.indexOf(e.print.spec.sheet)}))||[]},l=function(e){return e.print&&e.print.spec&&e.print.spec.includeLegend}},134049:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getGeomType:()=>J,isAnnotationLayer:()=>K,getOpacity:()=>Q,preloadData:()=>ee,toAbsoluteURL:()=>te,normalizeUrl:()=>ne,getLayoutName:()=>re,getPrintScales:()=>oe,getNearestZoom:()=>ie,getMapZoom:()=>ae,getMapSize:()=>le,mapProjectionSelector:()=>pe,getMapfishPrintSpecification:()=>se,localizationFilter:()=>ce,wfsPreloaderFilter:()=>ue,toMapfish:()=>fe,getSpecTransformerChain:()=>he,getMapTransformerChain:()=>ve,getValidatorsChain:()=>Oe,resetDefaultPrintingService:()=>we,addTransformer:()=>Pe,addMapTransformer:()=>Se,addValidator:()=>je,getDefaultPrintingService:()=>Ee,DEFAULT_PRINT_RATIO:()=>xe,getResolutionMultiplier:()=>Ce,getMapfishLayersSpecification:()=>Re,specCreators:()=>Le,getWMTSMatrixIds:()=>ke,rgbaTorgb:()=>Te,toOpenLayers2TextStyle:()=>_e,toOpenLayers2Style:()=>ze,getOlDefaultStyle:()=>Ae});var r=n(986267),o=n(233044),i=n(552259),a=n(143378),l=n(658767),p=n(443143),s=n(45992),c=n(218056),u=n(707294),f=n(993201),y=n(218672),m=n(701469),d=n.n(m),b=n(763105),g=n.n(b),h=n(313311),v=n.n(h),O=n(441609),w=n.n(O),P=n(14841),S=n.n(P),j=n(984596),E=n.n(j),x=n(531351),C=n.n(x),R=n(432420),L=n(253231),k=n(608575),T=n(876825),F=n(38842),_=n(308316),z=n(650148),A=n(727418),M=n.n(A),N=n(189734),I=n.n(N),Z=n(91175),D=n.n(Z),U=n(984023),G=["params"];function B(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q,H=(0,i.getGoogleMercatorScales)(0,21),J=function(e){return e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:e.features&&e.features[0].features&&e.features[0].style&&e.features[0].style.type?e.features[0].style.type:void 0},K=function(e){return"annotations"===e.id||"Measurements"===e.name},Q=function(e){return e.opacity||(0===e.opacity?0:1)},ee=function(e){var t=g()(e.layers,{type:"wfs"});return t.length>0?Promise.all(t.map((function(t){return(0,R.Bm)(t.url,t.name,X({outputFormat:"application/json",srsName:e.projection},(0,a.v)(t)||{})).then((function(e){var n=e.data;return{id:t.id,geoJson:n}}))}))).then((function(t){return X(X({},e),{},{layers:(e.layers||[]).map((function(e){var n=v()(t,{id:e.id});return"wfs"===e.type&&n?X(X({},e),n):e}))})})):Promise.resolve(e)},te=function(e,t){return-1!==e.search(/^\/\//)?window.location.protocol+e:-1!==e.search(/:\/\//)?e:-1!==e.search(/^\//)?(t||window.location.origin)+e:e},ne=function(e){var t=d()(e)?e[0]:e;return-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),q.toAbsoluteURL(t)},re=function(e){var t=[e.sheet];return e.includeLegend?e.twoPages&&t.push("2_pages_legend"):t.push("no_legend"),e.landscape&&t.push("landscape"),t.join("_")},oe=function(e){return e.scales.slice(0).reverse().map((function(e){return parseFloat(e.value)}))||[]},ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H,r=n[Math.round(e)];return t.reduce((function(e,t,n){return t<r?e:n}),0)},ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H,r=t[Math.round(e)];return n.reduce((function(e,t,n){return t<r?e:n}),0)+1},le=function(e,t){if(e){var n=e.rotation?e.map.height:e.map.width;return{width:t,height:(e.rotation?e.map.width:e.map.height)/n*t}}return{width:100,height:100}},pe=function(e){var t,n,r;return null!==(t=null==e||null===(n=e.print)||void 0===n||null===(r=n.map)||void 0===r?void 0:r.projection)&&void 0!==t?t:"EPSG:3857"},se=function(e,t){var n=e.params,o=X(X({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,G)),n),a=pe(t),l=(0,r.reproject)(o.center,"EPSG:4326",o.projection),p=(0,i.reprojectZoom)(o.scaleZoom,a,o.projection),s=(0,i.getScales)(o.projection)[p]||H[Math.round(p)],c=X(X({},o),{},{center:l,scaleZoom:p});return X({units:(0,r.getUnits)(o.projection),srs:(0,r.normalizeSRS)(o.projection||"EPSG:3857"),layout:q.getLayoutName(c),dpi:parseInt(o.resolution,10),outputFilename:"mapstore-print",geodetic:!1,mapTitle:o.name||"",comment:o.description||"",layers:q.getMapfishLayersSpecification(o.layers,c,t,"map"),pages:[{center:[l.x,l.y],scale:s,rotation:0}],legends:q.getMapfishLayersSpecification(o.layers,c,t,"legend")},n)},ce=function(e,t){var n=(0,F.wk)(e),r=(0,F.fY)(e),o=n?X(X({},t),{},{env:r,currentLanguage:(0,_.KV)(e)}):t;return Promise.resolve(o)},ue=function(e,t){return ee(t)},fe=function(e,t){return Promise.resolve(se(t,e))},ye=[{name:"localization",transformer:ce},{name:"wfspreloader",transformer:ue},{name:"mapfishSpecCreator",transformer:fe}],me=[],de=[],be=[];function ge(e,t){return t.reduce((function(e,t){return-1===e.findIndex((function(e){return e.name===t.name}))?[].concat(B(e),[t]):e.map((function(e){return e.name===t.name?t:e}))}),e)}function he(){var e=ye.length;return I()(ge(ye.map((function(e,t){return X(X({},e),{},{position:t})})),me.map((function(t,n){var r;return X(X({},t),{},{position:null!==(r=t.position)&&void 0!==r?r:n+e})}))),["position"])}function ve(){return de}function Oe(){return be}function we(){me=[],de=[],be=[]}function Pe(e,t,n){me=ge(me,[{name:e,transformer:t,position:n}])}function Se(e,t){de=ge(de,[{name:e,transformer:t}])}function je(e,t,n){be=[{id:e,name:t,validator:n}].reduce((function(e,t){return-1===e.findIndex((function(e){return e.id===t.id}))?[].concat(B(e),[t]):e.map((function(e){return e.id===t.id?t:e}))}),be)}var Ee=function(){return{print:function(e){var t=(0,T.bh)().getState(),n=(0,z.DX)(t),r=e?X(X({},n),{},{layers:e}):n;return he().map((function(e){return e.transformer})).reduce((function(e,n){return e.then((function(e){return n(t,e)}))}),Promise.resolve(r))},validate:function(){var e=(0,T.bh)().getState();return Oe().reduce((function(t,n){var r,o=null!==(r=t[n.name])&&void 0!==r?r:{valid:!0,errors:[]},i=n.validator(e,o);return X(X({},t),{},Y({},n.name,{valid:o.valid&&i.valid,errors:[].concat(B(o.errors),B(i.errors||[]))}))}),{})},getMapConfiguration:function(){var e,t=(0,T.bh)().getState();return ve().map((function(e){return e.transformer})).reduce((function(e,n){return n(t,e)}),(null==t||null===(e=t.print)||void 0===e?void 0:e.map)||{})}}},xe=96/72;function Ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xe;return e/t*n}var Re=function(e,t,n,r){return e.filter((function(e){return q.specCreators[e.type]&&q.specCreators[e.type][r]})).map((function(e){return q.specCreators[e.type][r](e,t,n)}))},Le={wms:{map:function(e,t){return{baseURL:q.normalizeUrl(e.url)+"?",opacity:Q(e),singleTile:!1,type:"WMS",layers:[e.name],format:e.format||"image/png",styles:[e.style||""],customParams:(0,o.addAuthenticationParameter)(q.normalizeUrl(e.url),M()({TRANSPARENT:!0,TILED:!0,EXCEPTIONS:"application/vnd.ogc.se_inimage",scaleMethod:"accurate",ENV:(0,L.h)(t.env)},e.baseParams||{},e.params||{},X({},(0,a.v)({layerFilter:e.layerFilter,filterObj:e.filterObj}))))}},legend:function(e,t){return{name:e.title||e.name,classes:[{name:"",icons:[q.normalizeUrl(e.url)+k.format({query:(0,o.addAuthenticationParameter)(q.normalizeUrl(e.url),X({TRANSPARENT:!0,EXCEPTIONS:"application/vnd.ogc.se_xml",VERSION:"1.1.1",SERVICE:"WMS",REQUEST:"GetLegendGraphic",LAYER:e.name,LANGUAGE:t.language||"",STYLE:e.style||"",SCALE:t.scale,height:t.iconSize,width:t.iconSize,minSymbolSize:t.iconSize,LEGEND_OPTIONS:"forceLabels:"+(t.forceLabels?"on":"")+";fontAntialiasing:"+t.antiAliasing+";dpi:"+t.legendDpi+";fontStyle:"+((t.bold?"bold":t.italic&&"italic")||"")+";fontName:"+t.fontFamily+";fontSize:"+t.fontSize,format:"image/png"},M()({},e.params)))})]}]}}},vector:{map:function(e,t){return{type:"Vector",name:e.name,opacity:Q(e),styleProperty:"ms_style",styles:{1:q.toOpenLayers2Style(e,e.style),Polygon:q.toOpenLayers2Style(e,e.style,"Polygon"),LineString:q.toOpenLayers2Style(e,e.style,"LineString"),Point:q.toOpenLayers2Style(e,e.style,"Point"),FeatureCollection:q.toOpenLayers2Style(e,e.style,"FeatureCollection")},geoJson:(0,r.reprojectGeoJson)({type:"FeatureCollection",features:K(e)&&(0,l._P)(e.features)||e.features.map((function(e){return X(X({},e),{},{properties:X(X({},e.properties),{},{ms_style:e&&e.geometry&&e.geometry.type&&e.geometry.type.replace("Multi","")||1})})}))},"EPSG:4326",t.projection)}}},graticule:{map:function(e,t,n){var r,o,a,l,p,s=D()(null==n||null===(r=n.print)||void 0===r?void 0:r.capabilities.layouts.filter((function(e){return e.name===re(t)}))),c=null!==(o=Ce(null==s||null===(a=s.map)||void 0===a?void 0:a.width,null!==(l=null===(p=t.size)||void 0===p?void 0:p.width)&&void 0!==l?l:370))&&void 0!==o?o:1,u=(0,i.getResolutionsForProjection)(t.projection).map((function(e){return e*c})),f=u[t.scaleZoom];return{type:"Vector",name:e.name||"graticule",opacity:Q(e),styleProperty:"ms_style",styles:{lines:q.toOpenLayers2Style(e,e.style,"GraticuleLines"),xlabels:q.toOpenLayers2TextStyle(e,e.labelXStyle,"GraticuleXLabels"),ylabels:q.toOpenLayers2TextStyle(e,e.labelYStyle,"GraticuleYLabels"),frame:q.toOpenLayers2Style(e,e.frameStyle,"GraticuleFrame")},geoJson:(0,U.XA)({resolutions:u,mapProjection:t.projection,gridProjection:e.srs||t.projection,extent:(0,i.calculateExtent)(t.center,f,t.size,t.projection),zoom:t.scaleZoom,withLabels:!0,xLabelFormatter:e.xLabelFormatter,yLabelFormatter:e.yLabelFormatter,xLabelStyle:q.toOpenLayers2TextStyle(e,e.labelXStyle,"GraticuleXLabels"),yLabelStyle:q.toOpenLayers2TextStyle(e,e.labelYStyle,"GraticuleYLabels"),frameSize:e.frameRatio})}}},wfs:{map:function(e){return{type:"Vector",name:e.name,opacity:Q(e),styleProperty:"ms_style",styles:{1:q.toOpenLayers2Style(e,e.style),Polygon:q.toOpenLayers2Style(e,e.style,"Polygon"),LineString:q.toOpenLayers2Style(e,e.style,"LineString"),Point:q.toOpenLayers2Style(e,e.style,"Point"),FeatureCollection:q.toOpenLayers2Style(e,e.style,"FeatureCollection")},geoJson:e.geoJson&&{type:"FeatureCollection",features:e.geoJson.features.map((function(e){return X(X({},e),{},{properties:X(X({},e.properties),{},{ms_style:e&&e.geometry&&e.geometry.type&&e.geometry.type.replace("Multi","")||1})})}))}}}},osm:{map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{baseURL:"http://a.tile.openstreetmap.org/",opacity:Q(e),singleTile:!1,type:"OSM",maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],tileSize:[256,256],extension:"png",resolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135]}}},mapquest:{map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{baseURL:"http://otile1.mqcdn.com/tiles/1.0.0/map/",opacity:Q(e),singleTile:!1,type:"OSM",maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],tileSize:[256,256],extension:"png",resolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135]}}},wmts:{map:function(e,t){var n=t.projection,r=(0,u.h7)(e,n),i=r.tileMatrixSet,a=r.tileMatrixSetName;if(!i)throw Error("tile matrix not found for pdf EPSG"+n);var l=q.getWMTSMatrixIds(e,i),p=q.normalizeUrl(E()(e.url)[0]),s={};return p.indexOf("{Style}")>=0&&(s={dimensions:["Style"],params:{STYLE:e.style}}),X(X({baseURL:encodeURI(p),format:e.format||"image/png",type:"WMTS",layer:e.name,"customParams ":(0,o.addAuthenticationParameter)(e.capabilitiesURL,M()({TRANSPARENT:!0}))},s),{},{matrixIds:l,matrixSet:a,style:e.style,name:e.name,requestEncoding:"RESTful"===e.requestEncoding?"REST":e.requestEncoding||"KVP",opacity:Q(e),version:e.version||"1.0.0"})}},tileprovider:{map:function(e){var t,n,r=(t=(0,s.h)(e.provider,e),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||W(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];if(!w()(i)){var a,l=(0,c.ut)(X(X({},i),{},{url:null!==(a=null==i?void 0:i.url)&&void 0!==a?a:o}));if(!l)throw Error("No base URL found for this layer");var p=l.indexOf("{");return{baseURL:l.slice(0,p),path_format:l.slice(p).replace("{x}","${x}").replace("{y}","${y}").replace("{z}","${z}"),type:"xyz",extension:l.split(".").pop()||"png",opacity:Q(e),tileSize:[256,256],maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],resolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135].filter((function(e,t){var n=!0;return i.maxNativeZoom&&(n=n&&t<=i.maxNativeZoom),n}))}}return{}}},tms:{map:function(e){var t=e.tileMapUrl.split(e.tileMapService+"/")[1];return{type:"tms",opacity:Q(e),layer:t,baseURL:e.tileMapService.substring(0,e.tileMapService.lastIndexOf("/1.0.0")),tileSize:e.tileSize,format:(0,f.A)(e.tileMapUrl),maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],resolutions:e.tileSets.map((function(e){return e.resolution}))}}}},ke=function(e,t){var n=[],o=(0,r.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),i=(0,y.U2)(o).getMetersPerUnit();return t&&t.TileMatrix.map((function(e){var t=e["ows:Identifier"],r=28e-5*e.ScaleDenominator/i,o=[S()(e.TileWidth),S()(e.TileHeight)],a=e.TopLeftCorner&&e.TopLeftCorner.split(" ").map((function(e){return S()(e)})),l=[S()(e.MatrixWidth),S()(e.MatrixHeight)];return n.push({identifier:t,matrixSize:l,resolution:r,tileSize:o,topLeftCorner:a})})),n},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==e.indexOf("rgba")?"rgb".concat(e.slice(e.indexOf("("),e.lastIndexOf(",")),")"):e};function Fe(e,t){return["start"===e?"l":"end"===e?"r":"c","top"===t?"t":"bottom"===t?"b":"m"].join("")}var _e=function(e,t,n){if(!t)return q.getOlDefaultStyle(e,n);switch(n){case"GraticuleXLabels":return{fontColor:t.color||"#000000",fontFamily:t.font||"12px Calibri,sans-serif",fontWeight:t.fontWeight||"bold",fontSize:t.fontSize||"14",label:"{properties.valueText}",labelAlign:Fe(t.textAlign||"center",t.verticalAlign||"bottom"),labelOutlineColor:t.labelOutlineColor||"#FFFFFF",labelOutlineWidth:t.labelOutlineWidth/4||.5,rotation:t.rotation?-t.rotation:0};case"GraticuleYLabels":return{fontColor:t.color||"#000000",fontFamily:t.font||"12px Calibri,sans-serif",fontWeight:t.fontWeight||"bold",fontSize:t.fontSize||"14",label:"{properties.valueText}",labelAlign:Fe(t.textAlign||"end",t.verticalAlign||"middle"),labelOutlineColor:t.labelOutlineColor||"#FFFFFF",labelOutlineWidth:t.labelOutlineWidth/4||.5,rotation:t.rotation?-t.rotation:0};default:return{fontColor:"#000000",fontFamily:"12px Calibri,sans-serif",fontWeight:"bold",fontSize:"14",label:"{properties.valueText}",labelAlign:"cb",labelOutlineColor:"#FFFFFF",labelOutlineWidth:.5}}},ze=function(e,t,n){return t&&"marker"!==e.styleName?{fillColor:(0,p.qj)(t.fillColor),fillOpacity:t.fillOpacity,externalGraphic:t.iconUrl,pointRadius:t.radius,strokeColor:(0,p.qj)(t.color),strokeOpacity:t.opacity,strokeWidth:t.weight,strokeDashstyle:t.lineDash?C()(t.lineDash).join(" "):void 0}:q.getOlDefaultStyle(e,n)},Ae=function(e,t){switch(t||J(e)||""){case"Polygon":case"MultiPolygon":return{fillColor:"#0000FF",fillOpacity:.1,strokeColor:"#0000FF",strokeOpacity:1,strokeWidth:3,strokeDashstyle:"dash",strokeLinecap:"round"};case"MultiLineString":case"LineString":return{strokeColor:"#0000FF",strokeOpacity:1,strokeWidth:3};case"Point":case"MultiPoint":return"marker"===e.styleName?{externalGraphic:"http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/images/marker-icon.png",graphicWidth:25,graphicHeight:41,graphicXOffset:-12,graphicYOffset:-41}:{fillColor:"#FF0000",fillOpacity:0,strokeColor:"#FF0000",pointRadius:5,strokeOpacity:1,strokeWidth:1};case"GraticuleLines":return{strokeColor:"#ff7800",strokeOpacity:.9,strokeWidth:2,strokeDashstyle:"4 0.5"};case"GraticuleFrame":return{strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,fillColor:"#FFFFFF",fillOpacity:1};case"GraticuleXLabels":return{fontColor:"#000000",fontFamily:"12px Calibri,sans-serif",fontWeight:"bold",fontSize:"14",label:"{properties.valueText}",labelAlign:"cb",labelOutlineColor:"#FFFFFF",labelOutlineWidth:.5};case"GraticuleYLabels":return{fontColor:"#000000",fontFamily:"12px Calibri,sans-serif",fontWeight:"bold",fontSize:"14",label:"{properties.valueText}",labelAlign:"rm",labelOutlineColor:"#FFFFFF",labelOutlineWidth:.5};default:return{fillColor:"#0000FF",fillOpacity:.1,strokeColor:"#0000FF",pointRadius:5,strokeOpacity:1,strokeWidth:1}}};q={toAbsoluteURL:te,getLayoutName:re,getMapfishLayersSpecification:Re,specCreators:Le,normalizeUrl:ne,toOpenLayers2Style:ze,toOpenLayers2TextStyle:_e,getWMTSMatrixIds:ke,getOlDefaultStyle:Ae}},993201:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(264721),o=n.n(r),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var n=t[t.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],n))return n}return null}},423923:(e,t,n)=>{"use strict";n.d(t,{A4:()=>p,u3:()=>s});var r=n(623560),o=n.n(r);function i(e,t,n){var r=void 0!==n?e.toFixed(n):""+e,o=r.indexOf(".");return(o=-1===o?r.length:o)>t?r:new Array(1+t-o).join("0")+r}var a={standard:function(e){return function(t){return"EPSG:4326"===t?(n="x"===e?"EW":"NS",function(e){var t,r=(360*(t=(e+180)%360)<0?t+360:t)-180,o=Math.abs(3600*r),a=Math.floor(o/3600),l=Math.floor((o-3600*a)/60),p=o-3600*a-60*l;return(p=Math.ceil(p))>=60&&(p=0,l+=1),l>=60&&(l=0,a+=1),a+"Â° "+i(l,2)+"â€² "+i(p,2,0)+"â€³"+(0===r?"":" "+n.charAt(r<0?1:0))}):function(e){return String(Math.round(e))};var n}}};function l(e,t,n){return o()(n)?n(e,t):a[n||"standard"](t)(e)}function p(e,t){return l(e,"x",t)}function s(e,t){return l(e,"y",t)}},72954:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi #mappreview-scalebox {\n    position: relative;\n    top: -36px;\n    width: 150px;\n    left: 10px;\n}\n\n.msgapi .print-error {\n    height: 100px;\n    color: #600;\n    background-color: #E8BABA;\n    border: solid #600 1px;\n    border-radius: 10px;\n    padding: 10px;\n}\n.msgapi .print-error span, .msgapi .print-warning span {\n    display: inline-block;\n    max-height: 80px;\n    overflow: auto;\n    width: 100%;\n}\n.msgapi .print-warning {\n    height: 50px;\n    color: #660;\n    background-color: #E6E8BA;\n    border: solid #660 1px;\n    border-radius: 10px;\n    padding: 10px;\n}\n.msgapi .print-preview-panel .spinner {\n    display: inline-block;\n}\n\n.msgapi .print-mappreview-refresh {\n    position: relative;\n    top: -83px;\n    right: -155px;\n    z-index: 1000;\n}\n.msgapi #mapstore-print-panel.modal-dialog {\n    z-index: 2000;\n}\n\n.msgapi #mapstore-print-panel .modal-body {\n    max-height: calc(100vh - 190px);\n    overflow-y: auto;\n}\n\n.msgapi .mapstore-print-panel {\n    width: 850px;\n    position: absolute;\n    top: 50px;\n    right: 60px;\n    zIndex: 100;\n}\n\n.msgapi .mapstore-print-preview-img-wrapper {\n    position: relative;\n    top: 0;\n    height: 500px;\n    width: 100%;\n    overflow: auto;\n}\n\n.msgapi .mapstore-print-preview-img-wrapper img {\n    max-width: 100%;\n    max-height: 100%;\n}\n\n.msgapi .mapstore-print-panel .form-inline label {\n    margin-right: 20px;\n}\n\n.msgapi .mapstore-print-panel .print-download {\n    margin-right: 10px;\n    display: inline-block;\n    width: 30px;\n    height: 34px;\n    border: solid 1px #CCC;\n    padding: 7px;\n    border-radius: 4px;\n    padding-right: 25px;\n    padding-left: 11px;\n    top: 2px;\n    position: relative;\n}\n\n.msgapi .print-layout .panel-title {\n    padding-left: 10px;\n}\n\n.msgapi .print-layout .panel-title a{\n    text-decoration: none;\n}\n\n.msgapi .print-layout .panel-title a:hover{\n    color: #d6d6d6;\n}\n\n.msgapi .print-legend-options .panel-title {\n    padding-left: 10px;\n}\n\n.msgapi .print-legend-options .panel-title a{\n    text-decoration: none;\n}\n\n.msgapi .print-legend-options .panel-title a:hover{\n    color: #d6d6d6;\n}\n\n\n@media (min-width: 992px) {\n    .msgapi #mapstore-print-panel {\n        width: 825px;\n    }\n}\n\n@media (max-width: 991px) {\n    .msgapi #mapstore-print-panel {\n        width: 700px;\n    }\n}\n\n@media (max-width: 767px) {\n    .msgapi #mapstore-print-panel {\n        width: 98%;\n    }\n}\n\n.msgapi #mapstore-print-panel .modal-body .print-mappreview-refresh {\n    top: -96px;\n}\n\n.msgapi #mapstore-print-panel .print-submit {\n    float: right;\n}\n\n@media (min-width: 768px) {\n    .msgapi #mapstore-print-panel input[type=radio] {\n        margin: 0 8px 0 20px;\n    }\n}\n\n.msgapi #mapstore-print-panel .print-map-preview {\n    margin-bottom: 15px;\n}\n\n.msgapi #mapstore-print-panel .panel-default {\n    border: none;\n}\n\n.msgapi #mapstore-print-panel .panel-heading .panel-title {\n    font-weight: bold;\n}\n\n.msgapi #mapstore-print-panel .panel-heading {\n    padding-left: 0;\n    background-color: transparent;\n}\n\n.msgapi #mapstore-print-panel .panel-body {\n    padding: 10px;\n}\n\n.msgapi #mapstore-print-panel .form-control {\n    padding: 0 10px;\n    height: 25px;\n}\n\n.msgapi #mapstore-print-panel .print-download {\n    margin-right: 10px;\n}\n\n.msgapi #mapstore-print-panel .print-legend-options .container-fluid {\n    padding-left: 0;\n    padding-right: 0;\n}\n",""]);const i=o},212993:()=>{},558618:()=>{},200120:()=>{},66355:()=>{},945804:()=>{}}]);