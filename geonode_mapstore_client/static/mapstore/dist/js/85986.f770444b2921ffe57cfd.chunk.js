(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[85986],{798143:function(t,e,i){var r,o;void 0===(o="function"==typeof(r=function(){function t(t,e){return function(i,r,o,n){i[t]?i[t](r,o,n):i[e]&&i[e]("on"+r,o)}}return{add:t("addEventListener","attachEvent"),remove:t("removeEventListener","detachEvent")}})?r.call(e,i,e,t):r)||(t.exports=o)},581399:function(t,e){var i,r,o;!function(n,s){"use strict";"object"==typeof t.exports?t.exports=s():(r=[],void 0===(o="function"==typeof(i=s)?i.apply(e,r):i)||(t.exports=o))}("object"==typeof window&&window,(function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);this._LRUCacheState=new i(e)}var e=t.prototype;function i(t){this.capacity=t>0?+t:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,this.data=Object.create?Object.create(null):{},this.hash=Object.create?Object.create(null):{},this.linkedList=new r}function r(){this.length=0,this.head=null,this.end=null}function o(t){this.key=t,this.p=null,this.n=null}function n(t,e){e!==t.head&&(t.end?t.end===e&&(t.end=e.n):t.end=e,s(e.n,e.p),s(e,t.head),t.head=e,t.head.n=null)}function s(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}return e.get=function(t){var e=this._LRUCacheState,i=e.hash[t];if(i)return n(e.linkedList,i),e.data[t]},e.set=function(t,e){var i=this._LRUCacheState,r=i.hash[t];return void 0===e||(r||(i.hash[t]=new o(t),i.linkedList.length+=1,r=i.hash[t]),n(i.linkedList,r),i.data[t]=e,i.linkedList.length>i.capacity&&this.remove(i.linkedList.end.key)),this},e.update=function(t,e){return this.has(t)&&this.set(t,e(this.get(t))),this},e.remove=function(t){var e=this._LRUCacheState,i=e.hash[t];return i?(i===e.linkedList.head&&(e.linkedList.head=i.p),i===e.linkedList.end&&(e.linkedList.end=i.n),s(i.n,i.p),delete e.hash[t],delete e.data[t],e.linkedList.length-=1,this):this},e.removeAll=function(){return this._LRUCacheState=new i(this._LRUCacheState.capacity),this},e.info=function(){var t=this._LRUCacheState;return{capacity:t.capacity,length:t.linkedList.length}},e.keys=function(){for(var t=[],e=this._LRUCacheState.linkedList.head;e;)t.push(e.key),e=e.p;return t},e.has=function(t){return!!this._LRUCacheState.hash[t]},e.staleKey=function(){return this._LRUCacheState.linkedList.end&&this._LRUCacheState.linkedList.end.key},e.popStale=function(){var t=this.staleKey();if(!t)return null;var e=[t,this._LRUCacheState.data[t]];return this.remove(t),e},t}))},193409:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var r=i(540188),o=i(558493),n=i(12868),s=i(267644),a=i(85386),h=i(613002),u=i(421915),l="element",p="map",c="offset",d="position",f="positioning";const g=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s.$A,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,(0,h.oL)(this,(0,o.v_)(l),this.handleElementChanged,this),(0,h.oL)(this,(0,o.v_)(p),this.handleMapChanged,this),(0,h.oL)(this,(0,o.v_)(c),this.handleOffsetChanged,this),(0,h.oL)(this,(0,o.v_)(d),this.handlePositionChanged,this),(0,h.oL)(this,(0,o.v_)(f),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:n.Z.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(l)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(p)},e.prototype.getOffset=function(){return this.get(c)},e.prototype.getPosition=function(){return this.get(d)},e.prototype.getPositioning=function(){return this.get(f)},e.prototype.handleElementChanged=function(){(0,a.ep)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,a.ZF)(this.element),(0,h.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,h.oL)(t,r.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(d)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(l,t)},e.prototype.setMap=function(t){this.set(p,t)},e.prototype.setOffset=function(t){this.set(c,t)},e.prototype.setPosition=function(t){this.set(d,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[(0,a.iO)(i),(0,a.Pb)(i)]),o=this.autoPanMargin;if(!(0,u.r4)(e,r)){var n=r[0]-e[0],s=e[2]-r[2],h=r[1]-e[1],l=e[3]-r[3],p=[0,0];if(n<0?p[0]=n-o:s<0&&(p[0]=Math.abs(s)+o),h<0?p[1]=h-o:l<0&&(p[1]=Math.abs(l)+o),0!==p[0]||0!==p[1]){var c=t.getView().getCenter(),d=t.getPixelFromCoordinate(c),f=[d[0]+p[0],d[1]+p[1]];t.getView().animate({center:t.getCoordinateFromPixel(f),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(f,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=r[0],a=r[1];if(o==n.Z.BOTTOM_RIGHT||o==n.Z.CENTER_RIGHT||o==n.Z.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var h=Math.round(e[0]-t[0]-s)+"px";this.rendered.right_!=h&&(this.rendered.right_=i.right=h)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),o!=n.Z.BOTTOM_CENTER&&o!=n.Z.CENTER_CENTER&&o!=n.Z.TOP_CENTER||(s-=this.element.offsetWidth/2);var u=Math.round(t[0]+s)+"px";this.rendered.left_!=u&&(this.rendered.left_=i.left=u)}if(o==n.Z.BOTTOM_LEFT||o==n.Z.BOTTOM_CENTER||o==n.Z.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var l=Math.round(e[1]-t[1]-a)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=i.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),o!=n.Z.CENTER_LEFT&&o!=n.Z.CENTER_CENTER&&o!=n.Z.CENTER_RIGHT||(a-=this.element.offsetHeight/2);var p=Math.round(t[1]+a)+"px";this.rendered.top_!=p&&(this.rendered.top_=i.top=p)}},e.prototype.getOptions=function(){return this.options},e}(o.ZP)},12868:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},404780:(t,e,i)=>{"use strict";i.d(e,{Z:()=>M});var r=i(438906),o=i(703614),n=i.n(o),s=i(518334),a=i(934007),h=i(303696),u=i(28795),l=i(944538),p=i(525642),c=i(552329),d=i(513987),f=i(752043),g=i(640353),y=i(680793),_=i(444183),v=i(440868),m=i(179682),E=i(421915),T=i(192526),w=i(538529),b=i(321422),P=i(218672),Z=i(517882),S=i(782359),x=(0,S.Ue)(),F=function(t,e,i,r,o){this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r};F.prototype.get=function(t){return this.properties_[t]},F.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===u.Z.POINT?(0,E.HK)(this.flatCoordinates_):(0,E.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},F.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=(0,E.qg)(this.getExtent());this.flatInteriorPoints_=(0,w.X)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},F.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=(0,T.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,w.U)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},F.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,b.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},F.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,r=0,o=i.length;r<o;++r){var n=i[r],s=(0,b.WW)(t,e,n,2,.5);(0,m.l7)(this.flatMidpoints_,s),e=n}}return this.flatMidpoints_},F.prototype.getId=function(){return this.id_},F.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},F.prototype.getGeometry=function(){return this},F.prototype.getSimplifiedGeometry=function(t){return this},F.prototype.getProperties=function(){return this.properties_},F.prototype.getStride=function(){return 2},F.prototype.getStyleFunction=function(){},F.prototype.getType=function(){return this.type_},F.prototype.transform=function(t,e){var i=(t=(0,P.U2)(t)).getExtent(),r=t.getWorldExtent(),o=(0,E.Cr)(r)/(0,E.Cr)(i);(0,S.qC)(x,r[0],r[3],o,-o,0,0,0),(0,Z.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,x,this.flatCoordinates_)},F.prototype.getEnds=F.prototype.getEndss=function(){return this.ends_},F.prototype.getFlatCoordinates=F.prototype.getOrientedFlatCoordinates;const O=F;function R(t,e,i){if(3===t){var r={keys:[],values:[],features:[]},o=i.readVarint()+i.pos;i.readFields(L,r,o),r.length=r.features.length,r.length&&(e[r.name]=r)}}function L(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var r=null,o=i.readVarint()+i.pos;i.pos<o;)r=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function C(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var o=e.layer.keys[i.readVarint()],n=e.layer.values[i.readVarint()];e.properties[o]=n}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function I(t,e,i){t.pos=e.features[i];var r=t.readVarint()+t.pos,o={layer:e,type:0,properties:{}};return t.readFields(C,o,r),o}const M=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=new _.Z({code:"",units:v.default.TILE_PIXELS}),this.featureClass_=i.featureClass?i.featureClass:O,this.geometryName_=i.geometryName,this.layerName_=i.layerName?i.layerName:"layer",this.layers_=i.layers?i.layers:null,this.extent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readRawGeometry_=function(t,e,i,o){t.pos=e.geometry;for(var n=t.readVarint()+t.pos,s=1,a=0,h=0,u=0,l=0,p=0;t.pos<n;){if(!a){var c=t.readVarint();s=7&c,a=c>>3}a--,1===s||2===s?(h+=t.readSVarint(),u+=t.readSVarint(),1===s&&l>p&&(o.push(l),p=l),i.push(h,u),l+=2):7===s?l>p&&(i.push(i[p],i[p+1]),l+=2):(0,r.h)(!1,59)}l>p&&(o.push(l),p=l)},e.prototype.createFeature_=function(t,e,i){var r,o=e.type;if(0===o)return null;var n=e.id,a=e.properties;a[this.layerName_]=e.layer.name;var _=[],v=[];this.readRawGeometry_(t,e,_,v);var m=function(t,e){var i;return 1===t?i=1===e?u.Z.POINT:u.Z.MULTI_POINT:2===t?i=1===e?u.Z.LINE_STRING:u.Z.MULTI_LINE_STRING:3===t&&(i=u.Z.POLYGON),i}(o,v.length);if(this.featureClass_===O)r=new this.featureClass_(m,_,v,a,n);else{var E;if(m==u.Z.POLYGON){for(var T=[],w=0,b=0,P=0,Z=v.length;P<Z;++P){var S=v[P];(0,y.bt)(_,w,S,2)||(T.push(v.slice(b,P)),b=P),w=S}E=T.length>1?new d.Z(_,h.Z.XY,T):new g.ZP(_,h.Z.XY,v)}else E=m===u.Z.POINT?new f.Z(_,h.Z.XY):m===u.Z.LINE_STRING?new l.Z(_,h.Z.XY):m===u.Z.POLYGON?new g.ZP(_,h.Z.XY,v):m===u.Z.MULTI_POINT?new c.Z(_,h.Z.XY):m===u.Z.MULTI_LINE_STRING?new p.Z(_,h.Z.XY,v):null;r=new(0,this.featureClass_),this.geometryName_&&r.setGeometryName(this.geometryName_);var x=(0,s.j)(E,!1,this.adaptOptions(i));r.setGeometry(x),r.setId(n),r.setProperties(a)}return r},e.prototype.getLastExtent=function(){return this.extent_},e.prototype.getType=function(){return a.Z.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var i=this.layers_,r=new(n())(t),o=r.readFields(R,{}),s=[];for(var a in o)if(!i||-1!=i.indexOf(a)){for(var h=o[a],u=0,l=h.length;u<l;++u){var p=I(r,h,u);s.push(this.createFeature_(r,p))}this.extent_=h?[0,0,h.extent,h.extent]:null}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(s.Z)},496476:(t,e,i)=>{"use strict";i.d(e,{Z:()=>E});var r=i(623068),o=i(518334),n=i(598968),s=i(944538),a=i(525642),h=i(552329),u=i(513987),l=i(752043),p=i(640353),c=i(218672),d=function(t){function e(e){t.call(this);var i=e||{};this.layerName_=i.layerName,this.layers_=i.layers?i.layers:null,this.dataProjection=(0,c.U2)(i.dataProjection?i.dataProjection:"EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,r=t,o=null,n=null;r.transform&&(o=(i=r.transform).scale,n=i.translate);var s=r.arcs;i&&function(t,e,i){for(var r=0,o=t.length;r<o;++r)v(t[r],e,i)}(s,o,n);var a,h=[],u=r.objects,l=this.layerName_;for(var p in u)this.layers_&&-1==this.layers_.indexOf(p)||("GeometryCollection"===u[p].type?(a=u[p],h.push.apply(h,y(a,s,o,n,l,p,e))):(a=u[p],h.push(_(a,s,o,n,l,p,e))));return h}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(n.Z),f={Point:function(t,e,i){var r=t.coordinates;return e&&i&&m(r,e,i),new l.Z(r)},LineString:function(t,e){var i=g(t.arcs,e);return new s.Z(i)},Polygon:function(t,e){for(var i=[],r=0,o=t.arcs.length;r<o;++r)i[r]=g(t.arcs[r],e);return new p.ZP(i)},MultiPoint:function(t,e,i){var r=t.coordinates;if(e&&i)for(var o=0,n=r.length;o<n;++o)m(r[o],e,i);return new h.Z(r)},MultiLineString:function(t,e){for(var i=[],r=0,o=t.arcs.length;r<o;++r)i[r]=g(t.arcs[r],e);return new a.Z(i)},MultiPolygon:function(t,e){for(var i=[],r=0,o=t.arcs.length;r<o;++r){for(var n=t.arcs[r],s=[],a=0,h=n.length;a<h;++a)s[a]=g(n[a],e);i[r]=s}return new u.Z(i)}};function g(t,e){for(var i,r,o=[],n=0,s=t.length;n<s;++n)i=t[n],n>0&&o.pop(),r=i>=0?e[i]:e[~i].slice().reverse(),o.push.apply(o,r);for(var a=0,h=o.length;a<h;++a)o[a]=o[a].slice();return o}function y(t,e,i,r,o,n,s){for(var a=t.geometries,h=[],u=0,l=a.length;u<l;++u)h[u]=_(a[u],e,i,r,o,n,s);return h}function _(t,e,i,n,s,a,h){var u,l=t.type,p=f[l];u="Point"===l||"MultiPoint"===l?p(t,i,n):p(t,e);var c=new r.Z;c.setGeometry((0,o.j)(u,!1,h)),void 0!==t.id&&c.setId(t.id);var d=t.properties;return s&&(d||(d={}),d[s]=a),d&&c.setProperties(d),c}function v(t,e,i){for(var r=0,o=0,n=0,s=t.length;n<s;++n){var a=t[n];r+=a[0],o+=a[1],a[0]=r,a[1]=o,m(a,e,i)}}function m(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}const E=d},502305:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(666901),o=function(t){function e(e){var i=e||{};t.call(this,i),this.type=r.Z.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(677701).Z);o.prototype.getSource;const n=o},438225:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(666901),o=i(677701),n=i(71534),s=i(913580),a=function(t){function e(e){var i=e||{},o=(0,s.f0)({},i);delete o.preload,delete o.useInterimTilesOnError,t.call(this,o),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=r.Z.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(n.Z.PRELOAD)},e.prototype.setPreload=function(t){this.set(n.Z.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(n.Z.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(n.Z.USE_INTERIM_TILES_ON_ERROR,t)},e}(o.Z);a.prototype.getSource;const h=a},71534:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},251895:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(666901),o=i(438906),n=i(71534),s=i(429902),a=i(878181),h=i(913580),u=function(t){function e(e){var i=e||{},n=i.renderMode||a.Z.HYBRID;(0,o.h)(null==n||n==a.Z.IMAGE||n==a.Z.HYBRID||n==a.Z.VECTOR,28),i.declutter&&n==a.Z.IMAGE&&(n=a.Z.HYBRID),i.renderMode=n;var s=(0,h.f0)({},i);delete s.preload,delete s.useInterimTilesOnError,t.call(this,s),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=r.Z.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(n.Z.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(n.Z.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(n.Z.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(n.Z.USE_INTERIM_TILES_ON_ERROR,t)},e}(s.Z);u.prototype.getSource;const l=u},255892:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r=i(989434),o=i(421915),n=i(949179),s=i(218672),a=i(582418),h=i(676122),u=i(570701),l=i(386018),p=function(t){function e(e){var i=void 0!==e.hidpi&&e.hidpi;t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:(0,s.U2)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:a.Z.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:i?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=i,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,function(t,e,i,r){var o=document.createElement("script"),s="olc_"+(0,n.sq)(e);function a(){delete window[s],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+"jsonp="+s;var h=setTimeout((function(){a()}),1e4);window[s]=function(t){clearTimeout(h),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(o)}("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_,this.handleImageryMetadataResponse.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=this.getProjection(),h=(0,l.Tl)(n),p=this.hidpi_?2:1,c=e.imageWidth==e.imageHeight?e.imageWidth/p:[e.imageWidth/p,e.imageHeight/p],d=(0,l.dl)({extent:h,minZoom:e.zoomMin,maxZoom:i,tileSize:c});this.tileGrid=d;var f=this.culture_,g=this.hidpi_;if(this.tileUrlFunction=(0,r.Un)(e.imageUrlSubdomains.map((function(t){var i=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",f);return function(t,e,o){if(t){(0,u.T9)(t[0],t[1],-t[2]-1,i);var n=r;return g&&(n+="&dpi=d1&device=mobile"),n.replace("{quadkey}",(0,u.OT)(i))}}}))),e.imageryProviders){var y=(0,s.WO)((0,s.U2)("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,n=this.getTileGrid().getTileCoordForCoordAndResolution(r.center,r.resolution)[0];return e.imageryProviders.map((function(e){for(var r=!1,s=e.coverageAreas,a=0,h=s.length;a<h;++a){var u=s[a];if(n>=u.zoomMin&&n<=u.zoomMax){var l=u.bbox,p=[l[1],l[0],l[3],l[2]],c=(0,o.Ne)(p,y);if((0,o.kK)(c,t.extent)){r=!0;break}}}r&&i.push(e.attribution)})),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),i}.bind(this))}this.setState(a.Z.READY)}else this.setState(a.Z.ERROR)},e}(h.Z);const c=p},751635:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r=function(t){function e(e){var i,r=e||{};i=void 0!==r.attributions?r.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'];var o=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",n=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:r.cacheSize,crossOrigin:o,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:n,wrapX:r.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(836365).Z)},485926:(t,e,i)=>{"use strict";i.d(e,{Z:()=>b});var r=i(859900),o=i(949179),n=i(624969),s=i(85386),a=i(613002),h=i(421915),u=i(173381),l=i(280800),p=i(864011),c=function(t){function e(i,o,n,s,l,c,d,f,g,y,_,v,m,E,T){if(t.call(this,i,o,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=y,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=c,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],c){var w=this.extent=g.getTileCoordExtent(c),b=g.getResolution(T),P=f.getZForResolution(b),Z=T!=i[0],S=0;if(f.forEachTileCoord(w,P,function(t){var e=(0,h.Ed)(w,f.getTileCoordExtent(t)),i=f.getExtent();if(i&&(e=(0,h.Ed)(e,i,e)),(0,h.dz)(e)/b>=.5&&(0,h.Cr)(e)/b>=.5){++S;var o=t.toString(),n=y[o];if(!n&&!Z){var p=d(t,_,v);n=y[o]=new m(t,null==p?r.Z.EMPTY:r.Z.IDLE,null==p?"":p,s,l),this.sourceTileListenerKeys_.push((0,a.oL)(n,u.Z.CHANGE,E))}!n||Z&&n.getState()!=r.Z.LOADED||(n.consumers++,this.tileKeys.push(o))}}.bind(this)),Z&&S==this.tileKeys.length&&this.finishLoading_(),T<=i[0]&&this.state!=r.Z.LOADED)for(;T>g.getMinZoom();){var x=new e(i,o,n,s,l,c,d,f,g,y,_,v,m,p.Zn,--T);if(x.state==r.Z.LOADED){this.interimTile=x;break}}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state=r.Z.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,i=this.tileKeys.length;e<i;++e){var o=this.tileKeys[e],n=this.getTile(o);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[o],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(a.bN),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(a.bN),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},e.prototype.getContext=function(t){var e=(0,o.sq)(t);return e in this.context_||(this.context_[e]=(0,s.E4)()),this.context_[e]},e.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},e.prototype.getReplayState=function(t){var e=(0,o.sq)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},e.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},e.prototype.getTile=function(t){return this.sourceTiles_[t]},e.prototype.load=function(){var t=0,e={};this.state==r.Z.IDLE&&this.setState(r.Z.LOADING),this.state==r.Z.LOADING&&this.tileKeys.forEach(function(i){var n=this.getTile(i);if(n.state==r.Z.IDLE&&(n.setLoader(this.loader_),n.load()),n.state==r.Z.LOADING){var s=(0,a.oL)(n,u.Z.CHANGE,function(i){var s=n.getState();if(s==r.Z.LOADED||s==r.Z.ERROR){var a=(0,o.sq)(n);s==r.Z.ERROR?e[a]=!0:(--t,delete e[a]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(s),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},e.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;i>=0;--i){var o=this.getTile(this.tileKeys[i]).getState();o!=r.Z.LOADED&&--t,o==r.Z.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(a.bN),this.loadListenerKeys_.length=0,this.setState(r.Z.LOADED)):this.setState(e==this.tileKeys.length?r.Z.EMPTY:r.Z.ERROR)},e}(n.Z);const d=c;function f(t,e){var i=(0,l.o)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}var g=[0,0,4096,4096],y=function(t){function e(e,i,r,o,n,s){t.call(this,e,i,s),this.consumers=0,this.extent_=null,this.format_=o,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=n,this.url_=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=r.Z.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getExtent=function(){return this.extent_||g},e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getReplayGroup=function(t,e){return this.replayGroups_[(0,o.sq)(t)+","+e]},e.prototype.load=function(){this.state==r.Z.IDLE&&(this.setState(r.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},e.prototype.onLoad=function(t,e,i){this.setProjection(e),this.setFeatures(t),this.setExtent(i)},e.prototype.onError=function(){this.setState(r.Z.ERROR)},e.prototype.setExtent=function(t){this.extent_=t},e.prototype.setFeatures=function(t){this.features_=t,this.setState(r.Z.LOADED)},e.prototype.setProjection=function(t){this.projection_=t},e.prototype.setReplayGroup=function(t,e,i){this.replayGroups_[(0,o.sq)(t)+","+e]=i},e.prototype.setLoader=function(t){this.loader_=t},e}(n.Z);const _=y;var v=i(450596),m=i(244280),E=i(570701),T=i(386018),w=function(t){function e(e){var i=e.projection||"EPSG:3857",r=e.extent||(0,T.Tl)(i),o=e.tileGrid||(0,T.dl)({extent:r,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});t.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,opaque:!1,projection:i,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:f,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:_,this.tileGrids_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},e.prototype.getTile=function(t,e,i,o,n){var s=(0,E.lg)(t,e,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var a=[t,e,i],h=this.getTileCoordForTileUrlFunction(a,n),u=new d(a,null!==h?r.Z.IDLE:r.Z.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,h,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(n),this.sourceTiles_,o,n,this.tileClass,this.handleTileChange.bind(this),a[0]);return this.tileCache.set(s,u),u},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var r=this.tileGrid;i=this.tileGrids_[e]=(0,T.RZ)(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=(0,v.Pq)(r.getTileSize(t),this.tmpSize);return[Math.round(o[0]*e),Math.round(o[1]*e)]},e}(m.Z);const b=w},92200:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var r=i(989434),o=i(913580),n=i(676122);const s="KVP";var a=i(578487),h=function(t){function e(e){var i=void 0!==e.requestEncoding?e.requestEncoding:s,o=e.tileGrid,n=e.urls;void 0===n&&void 0!==e.url&&(n=(0,r.Gk)(e.url)),t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:r.vU,urls:n,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=(0,r.Un)(n.map(l.bind(this))))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction((0,r.Un)(t.map(l.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){(0,o.f0)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(n.Z);const u=h;function l(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==s&&(0,o.f0)(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==s?(0,a.B)(t,i):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t}));var r=this.tileGrid,n=this.dimensions_;return function(i,h,u){if(i){var l={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:-i[2]-1};(0,o.f0)(l,n);var p=t;return e==s?(0,a.B)(p,l):p.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))}}}},836365:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(676122),o=i(386018);const n=function(t){function e(e){var i=e||{},r=void 0!==i.projection?i.projection:"EPSG:3857",n=void 0!==i.tileGrid?i.tileGrid:(0,o.dl)({extent:(0,o.Tl)(r),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.Z)},923241:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r=function(t){function e(e){t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(i(408930).Z)},703614:(t,e,i)=>{"use strict";t.exports=o;var r=i(680645);function o(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var n=4294967296,s=1/n;function a(t){return t.type===o.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var o=i.pos-1;o>=t;o--)i.buf[o+r]=i.buf[o]}function l(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function E(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function T(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}o.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),o=r>>3,n=this.pos;this.type=7&r,t(o,e,this),this.pos===n&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=T(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=m(this.buf,this.pos)+m(this.buf,this.pos+4)*n;return this.pos+=8,t},readSFixed64:function(){var t=m(this.buf,this.pos)+T(this.buf,this.pos+4)*n;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,o,n=i.buf;if(r=(112&(o=n[i.pos++]))>>4,o<128)return h(t,r,e);if(r|=(127&(o=n[i.pos++]))<<3,o<128)return h(t,r,e);if(r|=(127&(o=n[i.pos++]))<<10,o<128)return h(t,r,e);if(r|=(127&(o=n[i.pos++]))<<17,o<128)return h(t,r,e);if(r|=(127&(o=n[i.pos++]))<<24,o<128)return h(t,r,e);if(r|=(1&(o=n[i.pos++]))<<31,o<128)return h(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){for(var r="",o=e;o<i;){var n,s,a,h=t[o],u=null,l=h>239?4:h>223?3:h>191?2:1;if(o+l>i)break;1===l?h<128&&(u=h):2===l?128==(192&(n=t[o+1]))&&(u=(31&h)<<6|63&n)<=127&&(u=null):3===l?(n=t[o+1],s=t[o+2],128==(192&n)&&128==(192&s)&&((u=(15&h)<<12|(63&n)<<6|63&s)<=2047||u>=55296&&u<=57343)&&(u=null)):4===l&&(n=t[o+1],s=t[o+2],a=t[o+3],128==(192&n)&&128==(192&s)&&128==(192&a)&&((u=(15&h)<<18|(63&n)<<12|(63&s)<<6|63&a)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,l=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),o+=l}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===o.Varint)for(;this.buf[this.pos++]>127;);else if(e===o.Bytes)this.pos=this.readVarint()+this.pos;else if(e===o.Fixed32)this.pos+=4;else{if(e!==o.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),E(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),E(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),E(this.buf,-1&t,this.pos),E(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),E(this.buf,-1&t,this.pos),E(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,o,n=0;n<e.length;n++){if((r=e.charCodeAt(n))>55295&&r<57344){if(!o){r>56319||n+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):o=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,o=r;continue}r=o-55296<<10|r-56320|65536,o=null}else o&&(t[i++]=239,t[i++]=191,t[i++]=189,o=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&u(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&u(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,o.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){this.writeMessage(t,p,e)},writePackedBoolean:function(t,e){this.writeMessage(t,f,e)},writePackedFloat:function(t,e){this.writeMessage(t,c,e)},writePackedDouble:function(t,e){this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){this.writeMessage(t,g,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedFixed64:function(t,e){this.writeMessage(t,_,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,o.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,o.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,o.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,o.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}}]);