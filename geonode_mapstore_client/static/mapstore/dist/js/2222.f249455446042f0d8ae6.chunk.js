(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2222],{35400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),o=r.n(n),l=r(14471);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,i=void 0===n?{}:n,c=e.contentStyle,u=void 0===c?{}:c,s=e.imageStyle,d=void 0===s?{}:s,f=e.glyph,p=void 0===f?"info-sign":f,y=e.iconFit,m=e.title,b=e.tooltip,v=e.tooltipId,g=e.description,h=e.content;return o().createElement("div",{className:"empty-state-container",style:a({height:y?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:a({height:y?"100%":void 0},i)},p?o().createElement("div",{key:"glyph",className:"empty-state-image",style:a({height:y?"100%":void 0},d)},o().createElement(l.Z,{iconFit:y,tooltip:b,tooltipId:v,glyph:p})):null,m?o().createElement("h1",{key:"title"},m):null,g?o().createElement("p",{key:"description",className:"empty-state-description"},g):null),o().createElement("div",{key:"content",className:"empty-state-content",style:u},h))}},98772:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(93379),o=r.n(n),l=r(72704);o()(l.Z,{insert:"head",singleton:!1}),l.Z.locals;var i=r(45697),a=r.n(i),c=r(67294),u=r.n(c),s=r(57588);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&y(e,t)}(i,e);var t,r,n,o,l=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function i(){var e;f(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=l.call.apply(l,[this].concat(r))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),g(b(e),"onClear",(function(){e.props.onFilter("")})),e}return t=i,(r=[{key:"render",value:function(){var e=this.props.filterText?u().createElement(s.OverlayTrigger,{placement:"bottom",overlay:u().createElement(s.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},u().createElement(s.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):u().createElement(s.Glyphicon,{className:"text-primary",glyph:"filter"});return u().createElement(s.FormGroup,{className:"mapstore-filter"},u().createElement(s.InputGroup,null,u().createElement(s.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),u().createElement(s.InputGroup.Addon,{className:"square-button-md"},this.props.loading?u().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u().Component);g(h,"propTypes",{loading:a().bool,filterText:a().string,filterPlaceholder:a().oneOfType([a().object,a().string]),onFilter:a().func,onFocus:a().func,tooltipClear:a().oneOfType([a().object,a().string])}),g(h,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const O=h},14471:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),o=r.n(n),l=r(57588),i=r(96259),a=(0,r(15135).Z)(l.Glyphicon);const c=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,l=e.tooltipId,c=e.iconFit,u=e.padding,s=void 0===u?0:u,d=e.margin,f=void 0===d?0:d;return o().createElement(i.Z,null,(function(e){var t=e.width,i=e.height;return o().createElement(a,{glyph:r,tooltip:n,tooltipId:l,style:{display:"inline-block",padding:s+"px",margin:f+"px",textAlign:"center",fontSize:c?Math.min(t,i)-2*s-2*f:t-2*s-2*f}})}))}},82030:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),o=r.n(n),l=r(23560),i=r.n(l),a=r(2479),c=r(35400);const u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Z;return(0,a.branch)(e,(function(){return function(e){return o().createElement(r,t&&i()(t)?t(e):t)}}))}},73014:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),o=r.n(n),l=r(2479),i=r(82110);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}var c=function(e){var t=e.loading,r=e.isLoading;return t||r&&("function"==typeof r?r():!0===r)};const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Z;return(0,l.branch)(e,(function(){return function(e){var n=e.loaderProps;return o().createElement(r,a({},t,n))}}))}},86056:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(45697),o=r.n(n),l=r(67294),i=r.n(l),a=r(43129),c=r(98611),u=r.n(c);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&y(e,t)}(c,e);var t,r,n,o,l=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function c(){var e;f(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(b(e=l.call.apply(l,[this].concat(r))),"styleRenderer",(function(t,r,n){var o=e.props.styleRendererPattern||i().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},i().createElement("path",{className:"ms-dash-array",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:n||t.value,d:"M0 12.5, 300 12.5"}));return i().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}return t=c,(r=[{key:"render",value:function(){var e,t=this,r=u()(this.props.dashArray||"1 0"," "),n=this.props.options.find((function(e){return e.value===r}))?this.props.options:[{value:r}].concat(function(e){if(Array.isArray(e))return d(e)}(e=this.props.options)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=this.props.creatable?a.ZP.Creatable:a.ZP;return i().createElement(o,{options:n,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:r,isValidNewOption:this.props.isValidNewOption,onChange:function(e){if(e){var r=e.value.split(" ");t.props.onChange(r)}}})}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(i().Component);g(h,"propTypes",{dashArray:o().array,menuPlacement:o().string,clearable:o().bool,value:o().string,optionRenderer:o().func,styleRendererPattern:o().node,valueRenderer:o().func,disabled:o().bool,onChange:o().func,options:o().array,creatable:o().bool,isValidNewOption:o().func,defaultStrokeWidth:o().number}),g(h,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const O=h},83958:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),o=r.n(n),l=["type"],i=["text"];function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const u=function(e){var t=e.type,r=e.patterns,n=e.paths,u=e.texts,s=e.backgroundColor,d=void 0===s?"#ffffff":s;return o().createElement("svg",{viewBox:"0 0 200 200"},o().createElement("defs",null,r&&r.filter((function(e){return e.icon})).map((function(e){return o().createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&o().createElement("path",e.icon))})),r&&r.filter((function(e){return e.image})).map((function(e){return o().createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&o().createElement("image",e.image))}))),o().createElement("path",{fill:d,d:"M0 0 L200 0 L200 200 L0 200Z"}),n&&n.map((function(e){var r=e.type,n=c(e,l);return"polygon"===(r||t)&&o().createElement("path",a({},n,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(r||t)&&o().createElement("path",a({},n,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(r||t)&&o().createElement("path",n)})),u&&u.map((function(e){var t=e.text,r=c(e,i);return o().createElement("text",a({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},r),t)})))}},95246:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(91175),o=r.n(n);function l(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={short:"number",float:"number",double:"number",long:"number",decimal:"number",integer:"number",int:"number"};function d(e){var t=e.Pos;e.registerHelper("hint","geocss",(function(r){var n=r.getCursor(),i=r.getTokenAt(n),a=r.getLineTokens(n.line),u=a&&o()(a.filter((function(e){var t=e.type,r=e.start;return"property"===t&&r<i.start})).map((function(e){return e.string}))),d=e.innerMode(r.getMode(),i.state);if("geocss"!==d.mode.name)return null;var f=i.start,p=n.ch,y=i.string.slice(0,p-f);/[^\w$_-]/.test(y)&&(y="",f=p=n.ch);var m=e.resolveMode("text/geocss")||{},b=m.propertyKeywords,v=m.pseudoProperties,g=m.envKeywords,h=(e.getMode({},"text/geocss")||{}).hintProperties,O={},E=!1,w=d.state.state;"pseudo"===w||"variable-3"===i.type?O=c({},v):"prop"===w?(E=!0,O=b&&b[u]&&b[u].values&&c({},b[u].values)||{}):"variable-2"===i.type?O=c({},g):"filter"===i.type?(E=!0,O=c({},h)):"block"!==w&&"maybeprop"!==w||(O=c({},b));var k=Object.keys(O).reduce((function(e,t){var r=!y||0===t.lastIndexOf(y,0);return[].concat(l(e),l(r&&[t]||[]))}),[]);return(k=0===k.length&&E?Object.keys(O).reduce((function(e,t){return[].concat(l(e),[t])}),[]):l(k)).length>0?{list:k.map((function(e){return{text:e,displayText:e,render:function(e,t,r){var n,o,l=document.createElement("span"),i=(o=(n=O[r.displayText]||{}).localType,("gml"===n.prefix?"geometry":s[o])||o||"");l.innerHTML=i&&'{<span class="cm-desc">'.concat(i,"</span>} ")||"";var a=document.createElement("span");a.innerText=r.displayText,e.appendChild(l),e.appendChild(a)}}})),from:t(n.line,f),to:t(n.line,p)}:null}))}},12587:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(10240),o=r.n(n),l=r(92742),i=r.n(l);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}const d=function(e){e.defineMode("geocss",(function(t){var r,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.indentUnit,c=l.propertyKeywords&&l||e.resolveMode("text/geocss"),u=c.propertyKeywords,d=void 0===u?{}:u,f=c.colorKeywords,p=void 0===f?{}:f,y=c.valueKeywords,m=void 0===y?{}:y,b=c.logicKeywords,v=void 0===b?{}:b,g=c.allowNested,h={},O=function(e,t){return r=t,e},E=function(e){return function(t,r){for(var n=!1,o=t.next();o;){if(o===e&&!n){")"===e&&t.backUp(1);break}n=!n&&"\\"===o,o=t.next()}return(o===e||!n&&")"!==e)&&(r.tokenize=null),O("string","string")}},w=function(e,t){for(var r=!1,n=e.next();n;){if(r&&"/"===n){t.tokenize=null;break}r="*"===n,n=e.next()}return["comment","comment"]},k=function(e,t){var r=e.next();if("@"===r)return e.eat("{")?[null,"interpolation"]:e.match(/^(sd|scale)\b/)?["filter",null]:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]);if("/"===r)return e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"];if('"'===r||"'"===r)return t.tokenize=E(r),t.tokenize(e,t);if("#"===r)return e.eatWhile(/[\w\\\-]/),O("atom","hash");if(/\d/.test(r)||"."===r&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),O("number","unit");if("-"===r){if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),O("number","unit");if(e.match(/^-[\w\\\-]+/))return e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?O("variable-2","variable-definition"):O("variable-2","variable");if(e.match(/^\w+-/))return O("meta","meta")}else{if(/[,+>*\/]/.test(r))return O(null,"select-op");if("."===r&&e.match(/^-?[_a-z][_a-z0-9-]*/i))return O("qualifier","qualifier");if(/[:;{}\[\]\(\)]/.test(r))return O(null,r);if(/[\w\\\-]/.test(r))return e.eatWhile(/[\w\\\-]/),O("property","word")}return O(null,null)};function S(e,t,r){this.type=e,this.indent=t,this.prev=r}var j=function(e,t,r,n){return e.context=new S(r,t.indentation()+(!1===n?0:a),e.context),r},P=function(e){return e.context.prev&&(e.context=e.context.prev),e.context.type},I=function(e,t,r){return h[r.context.type](e,t,r)},C=function(e,t,r,n){for(var o=n||1;o>0;o--)r.context=r.context.prev;return I(e,t,r)},x=function(e){var t=e.current().toLowerCase();n=m.hasOwnProperty(t)?"atom":p.hasOwnProperty(t)?"keyword":"variable"};return h.top=function(e,t,r){if("{"===e)return j(r,t,"block");if("}"===e&&r.context.prev)return P(r);if("hash"===e)n="builtin";else if("word"===e)n="tag";else{if("variable-definition"===e)return"maybeprop";if("interpolation"===e)return j(r,t,"interpolation");if(":"===e)return"pseudo";if(g&&"("===e)return j(r,t,"parens")}return r.context.type},h.block=function(e,t,r){if("word"===e){var l=t.current().toLowerCase();return d.hasOwnProperty(l)?(n="property","maybeprop"):v.hasOwnProperty(i()(l))?(n="logic","maybeprop"):o()(i()(t.string),"[")?(n="filter","maybeprop"):(n+=" error","maybeprop")}return"meta"===e?"block":g||"hash"!==e&&"qualifier"!==e?h.top(e,t,r):(n="error","block")},h.maybeprop=function(e,t,r){return":"===e?j(r,t,"prop"):I(e,t,r)},h.prop=function(e,t,r){if(";"===e)return P(r);if("{"===e&&g)return j(r,t,"propBlock");if("}"===e||"{"===e)return C(e,t,r);if("("===e)return j(r,t,"parens");if("hash"!==e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"===e)x(t);else if("interpolation"===e)return j(r,t,"interpolation")}else n+=" error";return"prop"},h.propBlock=function(e,t,r){return"}"===e?P(r):"word"===e?(n="property","maybeprop"):r.context.type},h.parens=function(e,t,r){return"{"===e||"}"===e?C(e,t,r):")"===e?P(r):"("===e?j(r,t,"parens"):"interpolation"===e?j(r,t,"interpolation"):("word"===e&&x(t),"parens")},h.pseudo=function(e,t,o){return"word"===e?(n="variable-3",o.context.type):I(r,t,o)},h.at=function(e,t,r){return";"===e?P(r):"{"===e||"}"===e?C(e,t,r):("word"===e?n="tag":"hash"===e&&(n="builtin"),"at")},h.interpolation=function(e,t,r){return"}"===e?P(r):"{"===e||";"===e?C(e,t,r):("word"===e?n="variable":"variable"!==e&&"("!==e&&")"!==e&&(n="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new S("block",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var o=(t.tokenize||k)(e,t);return o&&"object"===s(o)&&(r=o[1],o=o[0]),n=o,t.state=h[t.state](r,e,t),n},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),o=r.indent;return"prop"!==r.type||"}"!==n&&")"!==n||(r=r.prev),r.prev&&("}"!==n||"block"!==r.type&&"top"!==r.type&&"interpolation"!==r.type?(")"===n&&"parens"===r.type||"{"===n&&("at"===r.type||"atBlock"===r.type))&&(o=Math.max(0,r.indent-a),r=r.prev):o=(r=r.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}));var t={colorKeywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valueKeywords:["round"],pseudoProperties:["mark","shield","stroke","fill","symbol","nth-mark","nth-shield","nth-stroke","nth-fill","nth-symbol"],logicKeywords:["and","or"]};e.defineMIME("text/geocss",c(c({},Object.keys(t).reduce((function(e,r){return c(c({},e),{},u({},r,t[r].reduce((function(e,t){return c(c({},e),{},u({},t,!0))}),{})))}),{})),{},{propertyKeywords:{mark:{values:{"symbol(circle)":!0}},"mark-composite":!0,"mark-mime":!0,"mark-geometry":!0,"mark-size":!0,"mark-rotation":!0,"mark-label-obstacle":!0,"mark-anchor":!0,"mark-offset":!0,"z-index":!0,stroke:!0,"stroke-composite":!0,"stroke-geometry":!0,"stroke-offset":!0,"stroke-mime":!0,"stroke-opacity":!0,"stroke-width":!0,"stroke-size":!0,"stroke-rotation":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-repeat":!0,"stroke-label-obstacle":!0,fill:!0,"fill-composite":!0,"fill-geometry":!0,"fill-mime":!0,"fill-opacity":!0,"fill-size":!0,"fill-rotation":!0,"fill-label-obstacle":!0,"graphic-margin":!0,random:!0,"random-seed":!0,"random-rotation":!0,"random-symbol-count":!0,"random-tile-size":!0,"fill-random":!0,"fill-random-seed":!0,"fill-random-rotation":!0,"fill-random-symbol-count":!0,"fill-random-tile-size":!0,label:!0,"label-geometry":!0,"label-anchor":!0,"label-offset":!0,"label-rotation":!0,"label-z-index":!0,shield:!0,"shield-mime":!0,"font-family":!0,"font-fill":!0,"font-style":!0,"font-weight":!0,"font-size":!0,"halo-radius":!0,"halo-color":!0,"halo-opacity":!0,"label-padding":!0,"label-group":!0,"label-max-displacement":!0,"label-min-group-distance":!0,"label-repeat":!0,"label-all-group":!0,"label-remove-overlaps":!0,"label-allow-overruns":!0,"label-follow-line":!0,"label-max-angle-delta":!0,"label-auto-wrap":!0,"label-force-ltr":!0,"label-conflict-resolution":!0,"label-fit-goodness":!0,"label-priority":!0,"shield-resize":!0,"shield-margin":!0,"label-underline-text":!0,"label-strikethrough-text":!0,"label-char-spacing":!0,"label-word-spacing":!0,"raster-channels":!0,"raster-composite":!0,"raster-geometry":!0,"raster-opacity":!0,"raster-contrast-enhancement":!0,"raster-contrast-enhancement-algorithm":!0,"raster-contrast-enhancement-min":!0,"raster-contrast-enhancement-max":!0,"raster-gamma":!0,"raster-z-index":!0,"raster-color-map":!0,"raster-color-map-type":!0,composite:!0,"composite-base":!0,geometry:!0,"sort-by":!0,"sort-by-group":!0,transform:!0,size:!0,rotation:!0},envKeywords:{sd:{localPart:"env"},scale:{localPart:"env"}},allowNested:!0,name:"geocss"}))}},92222:(e,t,r)=>{"use strict";r.d(t,{m2:()=>fo,tM:()=>Oo,lC:()=>go});var n=r(67294),o=r.n(n),l=r(33664),i=r(2479),a=r(22222),c=r(60604),u=r(90825),s=r(80416),d=r(96909),f=r(5346),p=r(65539),y=r(82030),m=r(73014),b=r(6724),v=r(32425),g=r(57588),h=r(38064),O=r(93451),E=r(15135),w=r(98772),k=r(83958);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=(0,O.Z)("filterPlaceholder")(w.Z),C=(0,E.Z)(g.Glyphicon),x=(0,y.Z)((function(e){return 0===e.items.length}),{title:o().createElement(f.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(h.Z);var T=r(91175),A=r.n(T),Z=r(15402);const N=function(e){var t=e.disabled,r=e.selected,n=e.title,l=e.preview,i=e.previewSrc,a=e.onClick,c=void 0===a?function(){}:a;return o().createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return c()}},(l||i)&&o().createElement("div",{className:"ms-preview"},l||i&&o().createElement("img",{src:i})),o().createElement("small",null,n))};var D=r(99534),F=r(94745);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(0,O.Z)("filterPlaceholder")(w.Z),B=(0,O.Z)("placeholder")(g.FormControl),V=(0,y.Z)((function(e){return 0===e.items.length}),{title:o().createElement(f.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(h.Z),U=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};var q=r(80717);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=r(93222),_=r(99009),G=r(1469),$=r.n(G),J=r(13218),H=r.n(J),Y=r(78795),X=r(8954),Q=(r(72632),r(32095),r(64020),r(16179),r(71707),r(29589),r(4631)),ee=r.n(Q),te=r(23279),re=r.n(te),ne=r(66654),oe=r.n(ne),le=r(18446),ie=r.n(le),ae=r(23560),ce=r.n(ae),ue=r(27418),se=r.n(ue),de=r(45697),fe=r.n(de),pe=r(29656),ye=r(2576);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},we(e,t)}function ke(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(12587).Z(ee()),r(95246).Z(ee());var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&we(e,t)}(a,e);var t,r,n,l,i=(n=a,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=je(n);if(l){var r=je(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ke(this,e)});function a(){var e;Oe(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pe(Se(e=i.call.apply(i,[this].concat(r))),"state",{}),Pe(Se(e),"onRenderToken",(function(t){var r=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),e.inlineWidgets=[],t.doc.iter(0,r,(function(r){var n=r.lineNo();t.getLineTokens(n).forEach((function(r){e.inlineWidgets=e.props.inlineWidgets.reduce((function(o,l){var i=l.type,a=l.style,c=void 0===a?{}:a,u=l.active,s=void 0===u?function(){return!1}:u,d=l.className,f=void 0===d?"":d;if(s(r)){var p=e.getInlineWidget({className:f,token:r,onClick:function(){return e.setState({inlineWidgetType:i,token:r,lineNo:n})},style:ce()(c)&&c(r)||c});return t.addWidget({line:n,ch:r.start-1},p,!1),[].concat(ge(o),[p])}return ge(o)}),ge(e.inlineWidgets))}))}))})),Pe(Se(e),"onAutocomplete",(function(t){if(!(t&&t.state&&t.state.completionActive)){var r=t.getCursor(),n=t.getTokenAt(r);if(n.string&&(oe()(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;ee().commands.autocomplete(t,null,{completeSingle:!1,container:o})}}})),Pe(Se(e),"onUpdate",(function(){e.update.cancel(),e.update()})),Pe(Se(e),"getInlineWidget",(function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,l=e.className,i=void 0===l?"":l,a=e.style,c=void 0===a?{}:a,u=document.createElement("div");return u.setAttribute("class","".concat(i," ms-style-editor-inline-widget")),se()(u.style,c),u.onclick=function(){return r(ve({},o))},u})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!ie()(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return o().createElement(p.Z,{className:"ms-style-editor",style:this.props.style,header:o().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&o().createElement(v.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&o().createElement(ye.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:o().createElement(f.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.props.error.line?this.props.error.message:o().createElement(f.Z,{msgId:"styleeditor.genericValidationError"})}))},o().createElement(pe.Controlled,{key:"style-editor",value:this.state.code,editorDidMount:function(t){e.onRenderToken(t),e.editor=t,t.on("inputRead",e.onAutocomplete),e.update=re()((function(){e.props.onChange(e.state.code)}),e.props.waitTime),ee().extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&o().createElement("div",{className:"ms-inline-widget-container"},o().createElement("div",null,o().createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),o().createElement("div",null,this.props.inlineWidgets.filter((function(t){return t.type===e.state.inlineWidgetType})).map((function(t){var r=t.Widget;return o().createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})})))))}}])&&Ee(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o().Component);Pe(Ie,"propTypes",{mode:fe().string,theme:fe().string,style:fe().object,code:fe().string,onChange:fe().func,waitTime:fe().number,hintProperties:fe().object,error:fe().object,inlineWidgets:fe().array,loading:fe().bool}),Pe(Ie,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[]});const Ce=Ie;var xe=r(13311),Te=r.n(xe),Ae=r(6557),Ze=r.n(Ae),Ne=r(57557),De=r.n(Ne),Fe=r(14293),ze=r.n(Fe),Re=r(7654),Me=r.n(Re),We=r(12961),Be=r(1036),Ve=r(98360),Ue=r(86056),qe=r(81763),Le=r.n(qe),Ke=r(9886),_e=r.n(Ke),Ge=r(20);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}_e()();var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&tt(e,t)}(a,e);var t,r,n,l,i=(n=a,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(n);if(l){var r=ot(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return rt(this,e)});function a(){var e;Qe(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return lt(nt(e=i.call.apply(i,[this].concat(r))),"renderFieldByClassification",(function(t,r){return ze()(t.unique)?ze()(t.min)?o().createElement(o().Fragment,null,o().createElement(g.FormControl,{value:t.label,type:"text",onChange:function(t){return e.updateRaster(r,t.target.value)}}),o().createElement(Ge.NumberPicker,{format:"- ###.###",value:t.quantity,onChange:function(t){return e.updateRaster(r,t,"number")}})):o().createElement(o().Fragment,null,o().createElement(Ge.NumberPicker,{format:"- ###.###",value:t.min,onChange:function(t){return e.updateMin(r,t)}}),o().createElement(Ge.NumberPicker,{format:"- ###.###",value:t.max,precision:3,onChange:function(t){return e.updateMax(r,t)}})):Le()(t.unique)?o().createElement(Ge.NumberPicker,{format:"- ###.###",value:t.unique,onChange:function(t){return e.updateUnique(r,t,"number")}}):o().createElement(g.FormControl,{value:t.unique,type:"text",onChange:function(t){return e.updateUnique(r,t.target.value)}})})),lt(nt(e),"renderClasses",(function(){return e.props.classification.map((function(t,r){return o().createElement(g.FormGroup,{key:r},o().createElement(We.Z,{key:t.color,color:t.color,disableAlpha:!0,format:"hex",onChangeColor:function(t){return e.updateColor(r,t)}}),e.renderFieldByClassification(t,r),o().createElement(g.DropdownButton,{style:{flex:0},className:"square-button-md no-border add-rule",noCaret:!0,pullRight:!0,title:o().createElement(g.Glyphicon,{glyph:"option-vertical"})},[{labelId:"styleeditor.addRuleBefore",glyph:"add-row-before",value:"before"},{labelId:"styleeditor.addRuleAfter",glyph:"add-row-after",value:"after"},{labelId:"styleeditor.remove",glyph:"trash",value:"remove"}].map((function(t){return o().createElement(g.MenuItem,{key:t.value,onClick:function(){return e.updateClassification(r,t.value)}},o().createElement(o().Fragment,null,o().createElement(g.Glyphicon,{glyph:t.glyph}),o().createElement(f.Z,{msgId:t.labelId})))}))))}))})),lt(nt(e),"updateColor",(function(t,r){if(r){var n=e.props.classification.map((function(e,n){return n===t?se()({},e,{color:r}):e}));e.props.onUpdateClasses(n,"color")}})),lt(nt(e),"updateUnique",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=e.props.classification.map((function(e,o){return o===t?se()({},e,{unique:ze()(r)?"number"===n?0:"":r}):e}));e.props.onUpdateClasses(o,"interval")})),lt(nt(e),"updateRaster",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o="number"===n?"quantity":"label",l=e.props.classification.map((function(e,n){return n===t?se()({},e,lt({},o,r)):e}));e.props.onUpdateClasses(l,"interval")})),lt(nt(e),"updateMin",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?se()({},e,{min:r}):e}));e.props.onUpdateClasses(n,"interval")}})),lt(nt(e),"updateMax",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?se()({},e,{max:r}):n===t+1?se()({},e,{min:r}):e}));e.props.onUpdateClasses(n,"interval")}})),lt(nt(e),"updateClassification",(function(t,r){var n,o,l=0,i=Ye(e.props.classification),a=i[t];if("before"===r){var c=0===t;n=c?0:t,o={min:c?ze()(a.min)?a.min:0:a.min,max:a.min}}else"after"===r?(n=t===i.length-1?i.length:t+1,o={min:a.max,max:a.max}):(n=t,l=1);var u=[n,l];if("remove"!==r){var s,d="#ffffff";if(ze()(a.unique))s=ze()(a.quantity)?He(He(He({},a),o),{},{color:d,title:" >= ".concat(o.min," AND <").concat(o.max)}):He(He({},a),{},{color:d,label:"0",quantity:0});else{var f=Le()(a.unique)?0:"";s=He(He({},a),{},{color:d,title:f,unique:f})}u=u.concat(s)}i.splice.apply(i,Ye(u)),e.props.onUpdateClasses(i,"interval")})),e}return t=a,(r=[{key:"render",value:function(){return o().createElement("div",{className:"thema-classes-editor "+this.props.className},this.renderClasses())}}])&&et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o().Component);lt(it,"propTypes",{classification:fe().array,onUpdateClasses:fe().func,className:fe().string}),lt(it,"defaultProps",{classification:[],onUpdateClasses:function(){},className:""});const at=it,ct=function(e){var t=e.children,r=e.label,n=e.tools,l=e.divider,i=e.invalid,a=e.warning,c=e.disabled;if(l)return o().createElement("div",{className:"ms-symbolizer-field-divider"});var u=a?" ms-symbolizer-value-warning":"",s=i?" ms-symbolizer-value-invalid":"",d=c?" ms-symbolizer-value-disabled":"";return o().createElement("div",{className:"ms-symbolizer-field"},o().createElement("div",{className:"ms-symbolizer-label"},o().createElement(f.Z,{msgId:r})),o().createElement("div",{className:"ms-symbolizer-value"+s+d+u,onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},t,o().createElement("div",{className:"ms-symbolizer-tools"},n)))};var ut=r(90702);const st=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}];var dt=r(82467),ft=(0,E.Z)(dt.Z);const pt=function(e){var t=e.value,r=e.config,n=void 0===r?{}:r,l=e.onChange,i=void 0===l?function(){}:l,a=n.options,c=void 0===a?st:a,u=c.find((function(e){return e.value===t}));return o().createElement(ut.Z,{content:o().createElement("div",{className:"ms-mark-list"},o().createElement("ul",null,c.map((function(e){return o().createElement("li",{key:e.value},o().createElement(ft,{className:"ms-mark-preview",active:e.value===t,onClick:function(){return i(e.value)}},o().createElement(k.Z,e.preview)))}))))},o().createElement(ft,{className:"ms-mark-preview"},u&&o().createElement(k.Z,u.preview)))};var yt=r(43129);const mt=function(e){var t=e.label,r=void 0===t?"styleeditor.band":t,n=e.value,l=e.bands,i=e.onChange,a=e.enhancementType;return o().createElement(o().Fragment,null,o().createElement(ct,{label:r},o().createElement(yt.ZP,{clearable:!1,options:l,value:n,onChange:function(e){return i("band",e.value)}})),o().createElement(ct,{label:"styleeditor.contrastEnhancement"},o().createElement(yt.ZP,{clearable:!1,options:[{label:o().createElement(f.Z,{msgId:"styleeditor.none"}),value:"none"},{label:o().createElement(f.Z,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:o().createElement(f.Z,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:a||"none",onChange:function(e){var t="none"===e.value?void 0:e.value;i("enhancementType",t)}})))};function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gt(){return gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gt.apply(this,arguments)}var ht=(0,r(97111).Z)("onChange","value")((0,O.Z)("placeholder")((function(e){return o().createElement(g.FormControl,gt({},e,{onChange:function(t){return e.onChange(t.target.value)}}))}))),Ot=(0,E.Z)(g.Glyphicon);function Et(e){var t=e.value,r=e.onChange,l=e.onLoad,i=(0,n.useRef)(!0);(0,n.useEffect)((function(){return i.current=!0,function(){i.current=!1}}),[]);var a=bt((0,n.useState)(!1),2),c=a[0],u=a[1],s=bt((0,n.useState)(!0),2),d=s[0],f=s[1],p=bt((0,n.useState)(t),2),y=p[0],m=p[1],b=function(e,t){m(e),u(!0),f(!1),(0,_.ZF)(e).then((function(t){if(i.current){var r=!1;t.isBase64&&(r={type:"warning",messageId:"imageSrcNotSupportedBase64Image"}),f(r),u(!1),l(r,e)}})).catch((function(t){if(i.current){var r=t.isBase64||"imageSrcLoadError"!==t.messageId?{type:"error",messageId:t.messageId}:{type:"warning",messageId:t.messageId};f(r),u(!1),l(r,e)}})),t&&r(e)},h=(0,n.useRef)(t);return(0,n.useEffect)((function(){b(h.current)}),[]),o().createElement("div",{className:"ms-style-editor-icon-input",style:{position:"relative",display:"flex",alignItems:"center"}},o().createElement(g.FormGroup,{style:{flex:1}},o().createElement(ht,{style:{paddingRight:26},placeholder:"styleeditor.placeholderEnterImageUrl",value:t,debounceTime:300,onChange:function(e){return b(e,!0)}})),o().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},y&&!d&&!c&&o().createElement("div",{className:"ms-style-editor-icon-input-image",style:{position:"absolute",margin:2,width:"calc(100% - 2px)",height:"calc(100% - 2px)",backgroundImage:"url(".concat(y,")"),backgroundPosition:"center",backgroundSize:"contain"}}),d&&o().createElement(Ot,{glyph:"exclamation-sign",tooltipId:"styleeditor.".concat(d.messageId)}),c&&o().createElement(v.Z,{size:20})))}Et.propTypes={value:fe().bool,onChange:fe().node,onLoad:fe().object,onError:fe().object},Et.defaultProps={value:"",onChange:function(){},onLoad:function(){},onError:function(){}};const wt=Et;var kt=r(84596),St=r.n(kt),jt=["label","value","config","onChange","disabled"];function Pt(){return Pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pt.apply(this,arguments)}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){return function(e){if(Array.isArray(e))return Zt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||At(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){if(e){if("string"==typeof e)return Zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zt(e,t):void 0}}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nt=(0,O.Z)(["placeholder","noResultsText"])(yt.ZP),Dt=(0,O.Z)(["placeholder","noResultsText"])(yt.ZP.Creatable);const Ft=function(e){e.label;var t=e.value,r=e.config,l=(r=void 0===r?{}:r).getOptions,i=void 0===l?function(){return[]}:l,a=r.selectProps,c=void 0===a?{}:a,u=e.onChange,s=e.disabled,d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,jt),p=c.creatable,y=c.clearable,m=void 0!==y&&y,b=c.multi;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.map((function(e){return e.value})),n=(null==t?void 0:t.value)&&-1===r.indexOf(t.value);return n?[t].concat(Tt(e)):e}function h(e){return t?St()(t).map((function(e){return{value:e,label:e}})).reduce(v,e):e}var O,E,w=i(d),k=(O=(0,n.useState)(h(w)),E=2,function(e){if(Array.isArray(e))return e}(O)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return l}}(O,E)||At(O,E)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=k[0],j=k[1];(0,n.useEffect)((function(){j(h(w))}),[JSON.stringify(w)]);var P=p?Dt:Nt;return o().createElement(P,Pt({disabled:s,clearable:m,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},c,{options:S.map((function(e){return Ct(Ct({},e),{},{label:e.labelId?o().createElement(o().Fragment,null,o().createElement(f.Z,{msgId:e.labelId}),e.glyphId&&o().createElement(g.Glyphicon,{style:{marginLeft:10},glyph:e.glyphId})):e.label})})),value:t,onChange:function(e){return b?u(e.length>0?e.map((function(e){return e.value})):void 0):(j(v(S,e)),u(e.value))}}))};var zt=["label"],Rt=["label","value","config","onChange"];function Mt(){return Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(this,arguments)}function Wt(e,t){if(e){if("string"==typeof e)return Bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bt(e,t):void 0}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(r),!0).forEach((function(t){Lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=(0,O.Z)("placeholder")(g.FormControl),_t={color:function(e){var t=e.label,r=e.config,l=void 0===r?{}:r,i=e.value,a=e.onChange,c=void 0===a?function(){}:a,u=e.disableAlpha,s=e.format,d=(0,n.useRef)({value:i});if(d.current={value:i},"pattern"==(H()(i)&&i.kind?"pattern":"solid")){var f=((null==l?void 0:l.getGroupParams(i.kind))||{}).params,p=void 0===f?{}:f,y=(null==l?void 0:l.getGroupConfig(i.kind))||{},m=i;return o().createElement(o().Fragment,null,o().createElement(Gt,{properties:m,params:y.omittedKeys?De()(p,y.omittedKeys):p,config:{disableAlpha:y.disableAlpha},onChange:function(e){return c(qt(qt({},d.current.value),e))},format:s}),o().createElement(ct,{divider:!0}))}return o().createElement(ct,{label:t},o().createElement(We.Z,{color:i,line:l.stroke,disableAlpha:l.disableAlpha||u,onChangeColor:function(e){return e&&c(e)}}))},slider:function(e){var t=e.label,r=e.value,n=e.disabled,l=e.config,i=void 0===l?{}:l,a=e.onChange,c=void 0===a?function(){}:a;return o().createElement(ct,{label:t,disabled:n},o().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},o().createElement(Be.Z,{start:[r],disabled:n,tooltips:[!0],format:i.format,range:i.range||{min:0,max:10},onChange:function(e){return c(e)}})))},input:function(e){var t=e.label,r=e.value,n=e.config,l=void 0===n?{}:n,i=e.onChange,a=void 0===i?function(){}:i,c=e.disabled;return o().createElement(ct,{label:t},o().createElement(g.FormGroup,null,o().createElement(Kt,{type:l.type||"text",value:r,disabled:c,placeholder:"styleeditor.placeholderInput",onChange:function(e){return a(e.target.value)}})))},toolbar:function(e){var t=e.label,r=e.value,n=e.onChange,l=void 0===n?function(){}:n,i=e.config,a=void 0===i?{}:i,c=e.disabled;return o().createElement(ct,{label:t,disabled:c},o().createElement(q.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(a.options||[]).map((function(e){var t=e.glyph,n=e.label,i=e.labelId,a=e.tooltipId,u=e.value;return{glyph:t,tooltipId:a,disabled:c,text:i?o().createElement(f.Z,{msgId:i}):n,active:u===r,onClick:function(){return l(r===u?void 0:u)}}}))}))},mark:function(e){var t=e.label,r=Vt(e,zt);return o().createElement(ct,{label:t},o().createElement(pt,r))},image:function(e){var t=e.label,r=e.value;!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e.config);var l,i,a=e.onChange,c=(l=(0,n.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return l}}(l,i)||Wt(l,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1],d=H()(r)?r.src:r;return o().createElement(ct,{label:t,invalid:!("error"!==(null==u?void 0:u.type)),warning:!("warning"!==(null==u?void 0:u.type))},o().createElement(wt,{label:t,value:d,onChange:function(e){a(e),s(!1)},onLoad:function(e,t){s(e),e&&a({src:t,errorId:e.messageId})}}))},select:function(e){var t=e.label,r=e.value,n=e.config.isValid,l=e.visible;if(void 0!==l&&!l)return null;var i=!n||n({value:r});return o().createElement(ct,{label:t,invalid:!i},o().createElement(Ft,e))},colorRamp:function(e){var t=e.label,r=e.value,n=e.config,l=n.samples,i=void 0===l?5:l,a=n.getOptions,c=void 0===a?function(){return[]}:a,u=n.rampFunction,s=void 0===u?function(e){return e.colors}:u,d=e.onChange,f=c(Vt(e,Rt));return o().createElement(ct,{label:t},o().createElement(Ve.Z,{items:f,rampFunction:s,samples:i,value:{name:r},onChange:function(e){return d(e.name)}}))},colorMap:function(e){var t=e.value,r=e.onChange;return o().createElement("div",{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},o().createElement(at,{classification:t,onUpdateClasses:function(e,t){return r({classification:e,type:t})}}))},channel:function(e){var t,r,n,l=e.value,i=e.onChange,a=e.bands,c=l.channelSelection,u=c?c.grayChannel?"gray":"rgb":"auto",s=(a||[]).map((function(e){return{label:e,value:e}}));if("rgb"===u)return Object.keys(c).map((function(e){var t,r,n=null===(t=c[e])||void 0===t?void 0:t.sourceChannelName,a=null===(r=c[e])||void 0===r?void 0:r.contrastEnhancement;return o().createElement(o().Fragment,null,o().createElement(mt,{key:e,value:n,bands:s,label:"styleeditor."+e,enhancementType:(null==a?void 0:a.enhancementType)||"none",onChange:function(t,r){return"band"===t?i({contrastEnhancement:{},channelSelection:qt(qt({},l.channelSelection),{},Lt({},e,qt(qt({},l.channelSelection[e]),{},{sourceChannelName:r})))}):"enhancementType"===t?i({contrastEnhancement:{},channelSelection:qt(qt({},l.channelSelection),{},Lt({},e,qt(qt({},l.channelSelection[e]),{},{contrastEnhancement:qt(qt({},c[e].contrastEnhancement),{},{enhancementType:r})})))}):null}}),o().createElement(ct,{key:e+"-divider",divider:!0}))}));var d,p=void 0===(null==c||null===(t=c.grayChannel)||void 0===t?void 0:t.sourceChannelName)?"auto":null==c||null===(r=c.grayChannel)||void 0===r?void 0:r.sourceChannelName,y="auto"===u?l.contrastEnhancement:null==c||null===(n=c.grayChannel)||void 0===n?void 0:n.contrastEnhancement;return o().createElement(mt,{label:"styleeditor.grayChannel",value:p,bands:[{label:o().createElement(f.Z,{msgId:"styleeditor.channelAuto"}),value:"auto"}].concat((d=s,function(e){if(Array.isArray(e))return Bt(e)}(d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(d)||Wt(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),enhancementType:(null==y?void 0:y.enhancementType)||"none",onChange:function(e,t){return"band"===e?i("auto"===t?qt(qt({},l),{},{channelSelection:void 0}):{contrastEnhancement:{},channelSelection:{grayChannel:qt(qt({contrastEnhancement:{}},null==c?void 0:c.grayChannel),{},{sourceChannelName:t})}}):"enhancementType"===e?i("auto"===u?{channelSelection:void 0,contrastEnhancement:qt(qt({},l.contrastEnhancement),{},{enhancementType:t})}:{contrastEnhancement:{},channelSelection:Object.keys(c).reduce((function(e,r){return qt(qt({},e),{},Lt({},r,qt(qt({},c[r]),{},{contrastEnhancement:qt(qt({},c[r].contrastEnhancement),{},{enhancementType:t})})))}),{})}):null}})},dash:function(e){var t=e.label,r=e.value,n=e.onChange,l=e.config.options;return o().createElement(ct,{label:t},o().createElement(Ue.Z,{dashArray:r,onChange:n,options:l,defaultStrokeWidth:2,isValidNewOption:function(e){return!!e.label&&!e.label.split(" ").find((function(e){return Me()(parseFloat(e))}))},creatable:!0}))}};function Gt(e){var t=e.properties,r=e.params,l=e.config,i=e.onChange,a=e.format,c=(0,n.useRef)({properties:t});return c.current={properties:t},o().createElement(o().Fragment,null,Object.keys(r).map((function(e){var n=r[e]||{},u=n.type,s=n.setValue,d=n.getValue,f=n.isDisabled,p=n.config,y=n.label,m=n.key,b=n.isVisible,v=m||e,g=_t[u],h=s&&s(t[v],c.current.properties);return g&&o().createElement(g,Mt({},l,{key:v,label:y||v,config:p,format:a,visible:b&&b(t[v],c.current.properties,a),disabled:f&&f(t[v],c.current.properties,l),value:ze()(h)?t[v]:h,onChange:function(e){return i(d&&d(e,c.current.properties)||e)}}))})))}const $t=Gt;var Jt=r(23570),Ht=r.n(Jt),Yt=r(31071);function Xt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nr=(0,E.Z)(dt.Z),or=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=tr(tr({},t),{},(rr(e={},r.fieldName,r.fieldValue),rr(e,"type",r.fieldType),rr(e,"fieldOptions",tr(tr({},t.fieldOptions),{},{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})),e));return"attribute"===r.fieldName?tr(tr({},n),{},{value:"string"===r.fieldType?"":null,operator:""}):"operator"===r.fieldName?tr(tr({},n),{},{value:null}):n},lr=function(e){var t=e.filterObj,r=void 0===t?{groupFields:[{id:1,logic:"OR",index:0}]}:t,n=e.attributes,l=void 0===n?[]:n,i=e.groupLevels,a=void 0===i?0:i,c=e.onChange,u=void 0===c?function(){}:c,s=r.groupFields,d=r.filterFields;return o().createElement("div",{className:"ms-style-rule-filter"},o().createElement(Yt.Z,{attributes:l,filterFields:d,groupFields:s,autocompleteEnabled:!1,groupLevels:a,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:function(e,t){var r={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};u({filterFields:d,groupFields:s?[].concat(Xt(s),[r]):[r]})},onAddFilterField:function(e){var t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};u({filterFields:d?[].concat(Xt(d),[t]):[t],groupFields:s})},onRemoveFilterField:function(e){u({filterFields:d.filter((function(t){return t.rowId!==e})),groupFields:s})},onUpdateFilterField:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};u({filterFields:d.map((function(l){return l.rowId===e?or(l,{rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}):l})),groupFields:s})},onUpdateExceptionField:function(e,t){u({filterFields:d.map((function(r){return r.rowId===e?tr(tr({},r),{},{exception:t}):r})),groupFields:s})},onUpdateLogicCombo:function(e,t){u({filterFields:d,groupFields:s.map((function(r){return r.id===e?tr(tr({},r),{},{logic:t}):r}))})},onRemoveGroupField:function(e){u({filterFields:d.filter((function(t){return t.groupId!==e})),groupFields:s.filter((function(t){return t.id!==e}))})},onChangeCascadingValue:function(){}}}))};function ir(e){var t=e.value,r=e.hide,n=e.attributes,l=e.onChange,i=e.placement,a=void 0===i?"right":i;return r||!n||0===n.length?null:o().createElement(ut.Z,{placement:a,content:o().createElement(lr,{filterObj:t,attributes:n,onChange:function(e){return l({filter:e})}})},o().createElement(nr,{className:"square-button-md no-border",active:!!t,tooltipId:"styleeditor.openFilterBuilder"},o().createElement(g.Glyphicon,{glyph:"filter"})))}function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){ur(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sr(e,t){if(e){if("string"==typeof e)return dr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(e,t):void 0}}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fr=(0,O.Z)(["placeholder","noResultsText"])(yt.ZP.Creatable),pr=(0,E.Z)(dt.Z);function yr(e){var t=e.label,r=e.currentZoom;return o().createElement("span",null,t,r&&o().createElement(o().Fragment,null,"",o().createElement(g.Glyphicon,{glyph:"arrow-left"})))}function mr(e){var t=e.label,r=e.value,n=e.options,l=e.isValidNewOption,i=e.onChange;return o().createElement(ct,{label:t},o().createElement(fr,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:r,options:n,optionRenderer:yr,valueRenderer:yr,isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!Me()(t)&&l(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);i(Me()(t)?void 0:t)}}))}function br(e){var t=e.value,r=e.zoom,l=e.scales,i=void 0===l?[]:l,a=e.onChange;function c(e,t){var r,n=e.map((function(e){return e.value}));return t&&-1===n.indexOf(t)?[{value:t}].concat((r=e,function(e){if(Array.isArray(e))return dr(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||sr(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e.value>t.value?-1:1})):e}var u,s,d=(0,n.useState)(function(e){var r=e.map((function(e,t){return{value:e,zoom:t}})),n=[t.min,t.max].filter((function(e){return void 0!==e}));return 0===n.length?r:n.reduce(c,r)}(i)),f=(s=2,function(e){if(Array.isArray(e))return e}(u=d)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return l}}(u,s)||sr(u,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],y=f[1];return o().createElement("div",{className:"ms-style-rule-scale"},o().createElement(mr,{label:"styleeditor.maxScaleDenominator",value:t.max,options:p.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.min&&e.value<=t.min}})),isValidNewOption:function(e){return e>=t.min},onChange:function(e){a(cr(cr({},t),{},{max:e})),y(c(p,e))}}),o().createElement(mr,{label:"styleeditor.minScaleDenominator",value:t.min,options:p.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.max&&e.value>=t.max}})),isValidNewOption:function(e){return e<=t.max},onChange:function(e){a(cr(cr({},t),{},{min:e})),y(c(p,e))}}))}function vr(e){var t=e.value,r=void 0===t?{}:t,n=e.scales,l=void 0===n?[]:n,i=e.zoom,a=e.hide,c=e.onChange,u=e.placement,s=void 0===u?"right":u;return a?null:o().createElement(ut.Z,{placement:s,content:o().createElement(br,{value:r,zoom:i,scales:l,onChange:function(e){return c({scaleDenominator:e})}})},o().createElement(pr,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==r.min||void 0!==r.max},o().createElement(g.Glyphicon,{glyph:"1-ruler"})))}function gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(r),!0).forEach((function(t){Or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Er=function(e){var t=e.ruleBlock,r=e.symbolizerBlock;return"Raster"!==e.kind?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[hr(hr({},e.defaultProperties),{},{symbolizerId:Ht()()})]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:function(e){var r=e.ruleId,n=e.symbolizerKind;return hr(hr(hr({},e.defaultProperties),t.Classification.defaultProperties),{},{ruleId:r,symbolizerKind:n})}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.defaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[hr(hr({},n),{},Or({symbolizerId:Ht()(),fill:void 0},o,hr({},r.Mark.defaultProperties)))]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.defaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[hr(hr({},n),{},Or({symbolizerId:Ht()(),fill:void 0},o,hr({},r.Icon.defaultProperties)))]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[hr(hr({},r.Raster.defaultProperties),{},{symbolizerId:Ht()()})]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[hr(hr({},r.Raster.defaultProperties),{},{channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:Ht()()})]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:function(e){var r=e.ruleId;return hr(hr({},t.Raster.defaultProperties),{},{ruleId:r})}}]},wr=function(e){var t=e.ruleKind,r=e.graphic,n=e.symbolizerKind,o=e.channelSelection;return"Raster"===t?"PseudoColor":"Raster"===n?null!=o&&o.redChannel?"RGB":"Gray":void 0!==t?t:null!=r&&r.kind?null==r?void 0:r.kind:"Simple"};function kr(e){var t,r,n=e.ruleKind,l=e.symbolizerKind,i=e.ruleId,a=e.graphic,c=e.channelSelection,u=e.hide,s=e.ruleBlock,d=e.symbolizerBlock,p=e.getSelected,y=void 0===p?wr:p,m=e.getOptions,b=void 0===m?Er:m,v=e.onSelect,h=b({ruleBlock:s,symbolizerBlock:d,kind:l}),O=l?d[l]:{},E=O.defaultProperties,w=O.params,k=void 0===w?{}:w,S=null==k||null===(t=k.color)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.graphicKey,j=y({ruleKind:n,symbolizerKind:l,graphic:a,channelSelection:c});return u?null:o().createElement(g.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:o().createElement(g.Glyphicon,{glyph:"option-vertical"})},h.map((function(e){return!e.isVisible||e.isVisible({graphicKey:S})?o().createElement(g.MenuItem,{key:e.value,active:j===e.value,onClick:function(){return t=e.value,r=e.onSelect({ruleId:i,ruleKind:n,symbolizerKind:l,defaultProperties:E,graphicKey:S}),t===j?null:v(r);var t,r}},o().createElement(f.Z,{msgId:e.labelId})):null})))}const Sr=function(e){var t=e.className,r=e.glyph,n=e.tools,l=e.children,i=t?" "+t:"";return o().createElement("li",{className:"ms-symbolizer".concat(i)},o().createElement("div",{className:"ms-symbolizer-info"},r&&o().createElement(g.Glyphicon,{glyph:r}),o().createElement("div",{className:"ms-symbolizer-tools"},n)),l)};var jr=["ruleId","glyph","params","kind","symbolizerKind","classificationType","attributes","onUpdate","onReplace","methods","getColors","ruleBlock","symbolizerBlock","bands","config"],Pr=["name"];function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Ar=function(e){var t=e.ruleId,r=e.glyph,l=e.params,i=e.kind,a=e.symbolizerKind,c=e.classificationType,u=void 0===c?"classificationVector":c,s=e.attributes,d=void 0===s?[]:s,f=e.onUpdate,p=e.onReplace,y=e.methods,m=e.getColors,b=void 0===m?function(){}:m,v=e.ruleBlock,g=void 0===v?{}:v,h=e.symbolizerBlock,O=void 0===h?{}:h,E=e.bands,w=e.config,k=Tr(e,jr),S=k.ramp,j=k.method,P=k.classification,I=k.attribute,C=k.intervals,x=k.intervalsForUnique,T=void 0===x?(null==w?void 0:w.intervalsForUnique)||100:x,A=k.reverse,Z=k.continuous,N=k.format,D=(0,n.useRef)();D.current={ruleId:t,intervals:C,intervalsForUnique:T,method:j,attribute:I,reverse:A,ramp:S,continuous:Z,classification:P};var F=l.reduce((function(e,t){return ce()(t)?Cr(Cr({},e),t(a)):Cr(Cr({},e),t)}),{}),z=(O[a]||{}).glyph;return o().createElement(Sr,{key:"Classification",glyph:z||r,tools:o().createElement(kr,{ruleKind:i,symbolizerKind:a,ruleId:t,onSelect:p,ruleBlock:g,symbolizerBlock:O})},o().createElement($t,{properties:k,format:N,config:{attributes:d,methods:y,getColors:function(){var e="custom"===S&&P.length>0&&{name:"custom",colors:P.map((function(e){return e.color}))},t=b(void 0,void 0,5,e);return t?t.map((function(e){var t=e.name,r=Tr(e,Pr);return Cr({label:t?"global.colors.".concat(t):void 0,name:t},r)})):[]},bands:E,method:j,methodEdit:null==k?void 0:k.methodEdit},params:F,onChange:function(e){return f(Cr(Cr({},D.current),{},{type:u,values:e}))}}))};var Zr=r(17621),Nr=r.n(Zr),Dr=["a"];function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Mr=function(e){var t=e.key,r=void 0===t?"color":t,n=e.opacityKey,o=void 0===n?"opacity":n,l=e.graphicKey,i=e.label,a=void 0===i?"Fill":i,c=e.stroke,u=e.pattern,s=e.disableAlpha,d=e.getGroupParams,f=e.getGroupConfig;return{type:"color",label:a,config:{stroke:c,pattern:u,disableAlpha:s,getGroupParams:d,getGroupConfig:f,graphicKey:l},setValue:function(e,t){var r;if(u&&null!==(r=t[l])&&void 0!==r&&r.kind)return t[l];var n=ze()(t[o])?1:t[o];return Nr()(e).setAlpha(n).toRgb()},getValue:function(e){var t,n;if(u&&H()(e)&&e.kind)return Rr(n={},l,e),Rr(n,r,void 0),Rr(n,o,void 0),n;var i=e||{},a=i.a,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(i,Dr);return zr((Rr(t={},r,Nr()(zr(zr({},c),{},{a:1})).toHexString()),Rr(t,o,a),t),u&&Rr({},l,void 0))}}},Wr=function(e){var t=e.key,r=void 0===t?"width":t,n=e.label,o=void 0===n?"Width":n,l=e.dasharrayKey,i=void 0===l?"dasharray":l;return{type:"slider",label:o,config:{range:{min:0,max:20},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=parseFloat(n),l=t[i],a=t[r];return zr(Rr({},r,o),l&&Rr({},i,o?l.map((function(e){return Math.round(e/a*o)})):void 0))}}},Br=function(e){var t=e.key,r=void 0===t?"dasharray":t,n=e.label;return{type:"dash",label:void 0===n?"Dash array":n,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:function(e,t){var r=void 0===t.width?1:t.width;return void 0!==e?e.map((function(e){return Math.round(e/r)})):[0]},getValue:function(e,t){if(ie()(e,["0"]))return Rr({},r,void 0);var n=void 0===t.width?1:t.width,o=!(e||[]).find((function(e){return Me()(parseFloat(e))}));return Rr({},r,void 0!==e&&o?e.map((function(e){return parseFloat(e)*n})):void 0)}}},Vr=function(e){var t=e.key,r=void 0===t?"cap":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line cap":n,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:function(e){return Rr({},r,e)}}},Ur=function(e){var t=e.key,r=void 0===t?"join":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line join":n,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:function(e){return Rr({},r,e)}}},qr=function(e){var t=e.key,r=void 0===t?"colorMapType":t,n=e.label;return{type:"toolbar",label:void 0===n?"Color map type":n,config:{options:[{labelId:"styleeditor.colorMapType.ramp",value:"ramp"},{labelId:"styleeditor.colorMapType.intervals",value:"intervals"},{labelId:"styleeditor.colorMapType.values",value:"values"}]},getValue:function(e){return Rr({},r,e)},isDisabled:e.isDisabled}},Lr=function(e){var t=e.key,r=void 0===t?"radius":t,n=e.label;return{type:"slider",label:void 0===n?"Radius":n,config:{range:{min:1,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return Rr({},r,parseFloat(t))}}},Kr=function(e){var t=e.key,r=void 0===t?"opacity":t,n=e.label;return{type:"slider",label:void 0===n?"Opacity":n,config:{range:{min:0,max:1}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return Rr({},r,parseFloat(t))}}},_r=function(e){var t=e.key,r=void 0===t?"offset":t,n=e.label,o=void 0===n?"":n,l=e.axis,i=void 0===l?"":l;return{key:r,type:"slider",label:o,config:{range:{min:-100,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="y"===i?parseFloat(e[1]):parseFloat(e[0]);return Me()(t)?0:t},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=t[r]||[0,0];return Rr({},r,"y"===i?[o[0],parseFloat(n)]:[parseFloat(n),o[1]])}}},Gr=function(e){var t=e.key,r=void 0===t?"rotate":t,n=e.label;return{type:"slider",label:void 0===n?"Rotation (deg)":n,config:{range:{min:0,max:360},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+""}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split("")[0];return Rr({},r,parseFloat(t))}}},$r=function(e){var t=e.label,r=e.key,n=void 0===r?"wellKnownName":r;return{type:"mark",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Rr({},n,e)}}},Jr=function(e){var t=e.label,r=e.key,n=void 0===r?"image":r;return{type:"image",label:t,config:{},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Rr({},n,e)}}},Hr=function(e){var t=e.label,r=e.key,n=void 0===r?"fontStyle":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Rr({},n,e)}}},Yr=function(e){var t=e.label,r=e.key,n=void 0===r?"fontWeight":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Rr({},n,e)}}},Xr=function(e){var t=e.key,r=void 0===t?"label":t;return{type:"toolbar",label:e.label,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:e.isDisabled,getValue:function(e){return Rr({},r,e)}}},Qr=function(e){var t=e.key,r=void 0===t?"intervals":t,n=e.label,o=e.isDisabled;return{type:"slider",label:n,config:{range:{min:2,max:25},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}},isDisabled:void 0===o?function(e,t){return"customInterval"===(null==t?void 0:t.method)}:o,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Rr({},r,parseFloat(e[0]))}}},en=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"select",label:t,config:{getOptions:void 0===o?function(){return[]}:o,selectProps:e.selectProps,isValid:e.isValid},getValue:function(e){return Rr({},n,e)},isDisabled:e.isDisabled,isVisible:e.isVisible}},tn=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"colorRamp",label:t,config:{getOptions:void 0===o?function(){return[]}:o},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Rr({},n,e)}}},rn=function(e){var t=e.label,r=e.key,n=void 0===r?"":r;return{type:"colorMap",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.classification,o=e.type,l="customInterval"===t.method,i="interval"===o||l,a="color"===o||"custom"===t.ramp;return zr(zr(Rr({},n,r),i&&{method:"customInterval",methodEdit:l?t.methodEdit:t.method}),a&&{ramp:"custom"})}}},nn=function(e){return{type:"channel",label:e.label,setValue:function(e,t){return{channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}};var on=r(64721),ln=r.n(on);function an(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?an(Object(r),!0).forEach((function(t){un(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function un(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sn(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const fn=function(){var e={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["point","linestring","polygon","vector"],params:{wellKnownName:$r({label:"styleeditor.shape"}),color:Mr({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:Mr({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:Wr({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:Lr({key:"radius",label:"styleeditor.radius"}),rotate:Gr({label:"styleeditor.rotation"})},defaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:["point","linestring","polygon","vector"],params:{image:Jr({label:"styleeditor.image",key:"image"}),format:en({label:"styleeditor.format",key:"format",isVisible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.image,n=arguments.length>2?arguments[2]:void 0;return"css"!==n&&!H()(r)&&!["png","jpg","svg","gif","jpeg"].includes(r.split(".").pop())},getOptions:function(){return _.qL}}),opacity:Kr({label:"styleeditor.opacity"}),size:Lr({key:"size",label:"styleeditor.size"}),rotate:Gr({label:"styleeditor.rotation"})},defaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:["linestring","polygon","vector"],params:{color:Mr({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}},graphicKey:"graphicStroke"}),width:Wr({label:"styleeditor.strokeWidth",key:"width"}),dasharray:Br({label:"styleeditor.lineStyle",key:"dasharray"}),cap:Vr({label:"styleeditor.lineCap",key:"cap"}),join:Ur({label:"styleeditor.lineJoin",key:"join"})},defaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round"}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:Mr({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}}),outlineColor:Mr({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:Wr({key:"outlineWidth",label:"styleeditor.outlineWidth"})},defaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:["point","linestring","polygon","vector"],params:{label:en({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:function(e){var t=e.attributes;return(null==t?void 0:t.map((function(e){return{value:"{{"+e.attribute+"}}",label:e.attribute}})))||[]}}),font:en({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:function(e){var t=e.fonts;return(null==t?void 0:t.map((function(e){return{value:e,label:e}})))||[]}}),color:Mr({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:Lr({label:"styleeditor.fontSize",key:"size"}),fontStyle:Hr({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:Yr({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:Mr({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:Wr({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:Gr({label:"styleeditor.rotation"}),offsetX:_r({label:"styleeditor.offsetX",axis:"x"}),offsetY:_r({label:"styleeditor.offsetY",axis:"y"})},defaultProperties:{kind:"Text",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0]}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:nn({}),opacity:Kr({label:"styleeditor.opacity"})},defaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},t={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:tn({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:Xr({key:"reverse",label:"styleeditor.reverse",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),attribute:en({key:"attribute",label:"styleeditor.attribute",isValid:function(e){return void 0!==e.value},getOptions:function(e){var t=e.attributes;return null==t?void 0:t.map((function(e){return{value:e.attribute,label:e.attribute,disabled:e.disabled}}))}}),method:en({key:"method",label:"styleeditor.method",isDisabled:function(e,t,r){var n,o,l=r.attributes;return"string"===(null==l||null===(n=l.filter((function(e){return e.label===(null==t?void 0:t.attribute)})))||void 0===n||null===(o=n[0])||void 0===o?void 0:o.type)&&"customInterval"!==(null==t?void 0:t.method)},getOptions:function(e){var t=e.methods,r=e.method,n=e.methodEdit,o=(null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}})))||[];return[].concat(sn("customInterval"===r?[{labelId:"styleeditor."+n,glyphId:"edit",value:r}]:[]),sn(o))}}),intervals:Qr({label:"styleeditor.intervals",isDisabled:function(e,t){return ln()(["customInterval","uniqueInterval"],null==t?void 0:t.method)}})},function(t){var r,n,o,l;if(!t)return{};switch(t){case"Mark":return cn({fillOpacity:Kr({key:"fillOpacity",label:"styleeditor.opacity"})},De()(null===(r=e[t])||void 0===r?void 0:r.params,["color"]));case"Line":return cn({opacity:Kr({key:"opacity",label:"styleeditor.opacity"})},De()(null===(n=e[t])||void 0===n?void 0:n.params,["color"]));case"Fill":return cn({fillOpacity:Kr({key:"fillOpacity",label:"styleeditor.opacity"})},De()(null===(o=e[t])||void 0===o?void 0:o.params,["color"]));default:return null===(l=e[t])||void 0===l?void 0:l.params}},{classification:rn({key:"classification",rampKey:"ramp"})}],defaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:nn({}),opacity:Kr({label:"styleeditor.opacity"}),ramp:tn({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:Xr({key:"reverse",label:"styleeditor.reverse",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),continuous:Xr({key:"continuous",label:"styleeditor.continuous",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),colorMapType:qr({key:"colorMapType",label:"styleeditor.colorMapType.label"}),method:en({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods,r=e.method,n=e.methodEdit,o=(null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}})))||[];return[].concat(sn("customInterval"===r?[{labelId:"styleeditor."+n,glyphId:"edit",value:r}]:[]),sn(o))}}),intervals:Qr({label:"styleeditor.intervals"})},{classification:rn({key:"classification",rampKey:"ramp"})}],defaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,colorMapType:"ramp",symbolizerKind:"Raster"}}};return{symbolizerBlock:e,ruleBlock:t}};var pn=r(73935),yn=r(90937);function mn(e){var t=e.title,r=e.tools,l=e.errorId,i=e.msgParams,a=e.draggable,c=e.connectDragSource,u=e.connectDropTarget,s=e.isDragging,d=e.children,p=(0,n.useRef)(null);a&&(c(p.current),u(p.current));var y=s?" ms-drop-target":"";return o().createElement("li",{ref:p,className:"ms-style-rule".concat(y)},o().createElement("div",{className:"ms-style-rule-head"},a&&o().createElement("div",{className:"ms-style-rule-grab-handle"},o().createElement(g.Glyphicon,{glyph:"grab-handle"})),o().createElement("div",{className:"ms-style-rule-head-info"},t),o().createElement("div",{className:"ms-style-rule-head-tools"},r)),l&&o().createElement(g.Alert,{bsStyle:"danger"},o().createElement(f.Z,{msgId:l,msgParams:i})),o().createElement("ul",{className:"ms-style-rule-body"},d))}mn.propTypes={title:fe().oneOfType([fe().node,fe().string]),tools:fe().node,errorId:fe().string,draggable:fe().bool,connectDragSource:fe().func,connectDropTarget:fe().func,isDragging:fe().bool},mn.defaultProps={connectDragSource:function(e){return e},connectDropTarget:function(e){return e}};var bn="RULE";const vn=(0,yn.GR)(bn,{hover:function(e,t,r){!function(e,t,r){if(!r)return null;var n=(0,pn.findDOMNode)(r);if(!n)return null;var o=t.getItem().index,l=e.index;if(o===l)return null;var i=n.getBoundingClientRect(),a=i.bottom,c=i.top,u=(a-c)/2,s=t.getClientOffset().y-c;o<l&&s<u||o>l&&s>u||(e.onSort(o,l),t.getItem().index=l)}(e,t,r)}},(function(e){return{connectDropTarget:e.dropTarget()}}))((0,yn.Ej)(bn,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(mn));var gn=["ruleId"],hn=["kind","symbolizerId"];function On(){return On=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},On.apply(this,arguments)}function En(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function wn(e){return function(e){if(Array.isArray(e))return kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(r),!0).forEach((function(t){Pn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var In=(0,E.Z)(dt.Z),Cn=(0,O.Z)("placeholder")(g.FormControl);function xn(){return o().createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},o().createElement("div",null,o().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),o().createElement("h1",null,o().createElement(f.Z,{msgId:"styleeditor.emptyRuleEditorTitle"})),o().createElement("p",null,o().createElement(f.Z,{msgId:"styleeditor.emptyRuleEditor"}))))}var Tn=(0,n.forwardRef)((function(e,t){var r=e.rules,l=void 0===r?[]:r,i=e.loading,a=e.toolbar,c=e.config,u=void 0===c?{}:c,s=e.ruleBlock,d=void 0===s?{}:s,p=e.symbolizerBlock,y=void 0===p?{}:p,m=e.onUpdate,b=void 0===m?function(){}:m,v=e.onChange,h=void 0===v?function(){}:v,O=u.geometryType,E=u.attributes,w=u.bands,k=u.scales,S=u.zoom,j=u.fonts,P=u.methods,I=u.getColors,C=u.classification,x=u.format,T=(0,n.useRef)();function A(e,t){var r=e.values,n=e.ruleId,o=e.symbolizerId;if(t){var l=T.current.rules.map((function(e){return e.ruleId===n?jn(jn({},e),r):e}));return h(l)}var i=T.current.rules.map((function(e){return e.symbolizers?jn(jn({},e),{},{symbolizers:e.symbolizers.map((function(t){return t.symbolizerId===o&&e.ruleId===n?jn(jn({},t),r):t}))}):e}));return h(i)}function Z(e){var t=[e].concat(wn(T.current.rules));h(t)}function N(e){var t=e.ruleId,r=En(e,gn),n=T.current.rules.map((function(e){return e.ruleId===t?jn({ruleId:t},r):e}));return h(n)}function D(e,t){var r=Te()(T.current.rules,(function(t,r){return r===e})),n=T.current.rules.reduce((function(n,o,l){return l===e?n:[].concat(wn(n),l===t?e>t?[r,o]:[o,r]:[o])}),[]);return h(n)}function F(e,t){var r=e.symbolizers,n=void 0===r?[]:r;return!!Te()(n,(function(e){return"Text"===e.kind}))&&t>0}return T.current={rules:l},o().createElement("div",{ref:t,className:"ms-style-rules-editor"},o().createElement("div",{className:"ms-style-rules-editor-head"},o().createElement("div",{className:"ms-style-rules-editor-left"},a),o().createElement("div",{className:"ms-style-rules-editor-right"},o().createElement(q.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[].concat(wn(Object.keys(y).map((function(e){var t=y[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return Z({name:"",ruleId:Ht()(),symbolizers:[jn(jn({},y[e].defaultProperties),{},{symbolizerId:Ht()()})]})}}}))),wn(Object.keys(d).filter((function(e){return d[e].add})).map((function(e){var t=d[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return Z(jn({name:"",ruleId:Ht()()},d[e].defaultProperties))}}}))))}))),o().createElement("ul",{className:"ms-style-rules-editor-body"},0===l.length&&o().createElement(xn,null),l.map((function(e,t){var r,n=e.name,i=e.symbolizers,a=void 0===i?[]:i,c=e.filter,u=e.scaleDenominator,s=void 0===u?{}:u,p=e.ruleId,m=e.kind,v=e.errorId,O=e.msgParams,Z=d[m]||{},z=Z.params,R=Z.glyph,M=Z.hideInputLabel,W=Z.hideFilter,B=Z.hideScaleDenominator,V=Z.classificationType,U=!!$()(E)&&"number"===(null===(r=E.find((function(t){return t.label===(null==e?void 0:e.attribute)}))||{})||void 0===r?void 0:r.type);return o().createElement(vn,{key:p+(l.length>1?"_draggable":""),draggable:l.length>1,id:p,index:t,errorId:v,msgParams:O,onSort:D,title:M?o().createElement(f.Z,{msgId:"styleeditor.rule".concat(m)}):o().createElement(g.FormGroup,{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},o().createElement(Cn,{value:n,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:function(e){return A({values:{name:e.target.value},ruleId:p},!0)}})),tools:o().createElement(o().Fragment,null,F(e,t)&&o().createElement(ye.Z,{glyph:"exclamation-mark",bsStyle:"warning",placement:"right",title:o().createElement(f.Z,{msgId:"styleeditor.warningTextOrderTitle"}),text:o().createElement(f.Z,{msgId:"styleeditor.warningTextOrder"})}),o().createElement(ir,{hide:W,value:c,attributes:E,onChange:function(e){return A({values:e,ruleId:p},!0)}}),o().createElement(vr,{hide:B,value:s,scales:k,zoom:S,onChange:function(e){return A({values:e,ruleId:p},!0)}}),o().createElement(In,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:function(){return function(e){var t=T.current.rules.filter((function(t){return t.ruleId!==e}));h(t)}(p)}},o().createElement(g.Glyphicon,{glyph:"trash"})))},"Classification"===m||"Raster"===m?o().createElement(Ar,On({},e,{ruleBlock:d,symbolizerBlock:y,glyph:R,classificationType:V,config:C||{},params:z,methods:P,getColors:I,bands:w,attributes:E&&E.map((function(t){return jn(jn({},t),"customInterval"===e.method?{disabled:U?"number"!==t.type:t.label!==e.attribute}:"uniqueInterval"!==e.method&&{disabled:"number"!==t.type})})),onUpdate:b,onChange:function(e){return A({values:e,ruleId:p},!0)},onReplace:N,format:x})):a.map((function(e){var t=e.kind,r=void 0===t?"":t,n=e.symbolizerId,l=En(e,hn),i=y[r]||{},a=i.params,c=i.glyph;return a&&o().createElement(Sr,{key:n,defaultExpanded:!0,draggable:!0,glyph:c,tools:o().createElement(kr,{hide:"Icon"===r,symbolizerKind:r,ruleBlock:d,symbolizerBlock:y,ruleId:p,onSelect:N,graphic:l.graphicFill||l.graphicStroke,channelSelection:l.channelSelection})},o().createElement($t,{properties:l,format:x,params:a,config:{bands:w,attributes:E,fonts:j},onChange:function(e){return A({values:e,ruleId:p,symbolizerId:n})}}))})))})),i&&o().createElement("div",{className:"ms-style-rule-overlay-loader",style:{position:"absolute",width:"100%",height:"100%",zIndex:10,transition:"0.3s all"}})))})),An=fn(),Zn=An.symbolizerBlock,Nn=An.ruleBlock;Tn.propTypes={rules:fe().array,loading:fe().bool,toolbar:fe().node,config:fe().object,ruleBlock:fe().object,symbolizerBlock:fe().object,onUpdate:fe().func,onChange:fe().func},Tn.defaultProps={rules:[],config:{},ruleBlock:Nn,symbolizerBlock:Zn,onUpdate:function(){},onChange:function(){}};const Dn=Tn;var Fn=r(66287),zn=r(21090),Rn=["values"];function Mn(e){return function(e){if(Array.isArray(e))return Vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return l}}(e,t)||Bn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){if(e){if("string"==typeof e)return Vn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vn(e,t):void 0}}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){Ln(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kn="UPDATE_STYLE",_n="UNDO_STYLE",Gn="REDO_STYLE",$n=Ln({},Kn,(function(e,t){return qn({},t)})),Jn=(0,zn.ZP)((function(e,t){return($n[t.type]||Ze())(e,t.payload)}),{limit:20,undoType:_n,redoType:Gn,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Hn={};function Yn(e){var t,r,l=e.code,i=e.format,a=e.layer,c=e.zoom,u=e.scales,s=e.geometryType,d=e.fonts,p=e.bands,y=e.attributes,m=e.onChange,b=e.onError,g=e.defaultStyleJSON,h=e.config,O=e.loading,E=e.error,w=e.methods,k=e.getColors,S=e.styleUpdateTypes,j=e.debounceTime,P=e.styleService,I=fn(),C=I.symbolizerBlock,x=I.ruleBlock,T=Wn((0,n.useState)(!1),2),A=T[0],Z=T[1],N=Wn((0,n.useReducer)(Jn,{}),2),D=N[0],F=N[1],z=(null==D?void 0:D.present)||Hn,R=(0,n.useRef)();R.current={style:z};var M=(0,n.useRef)(!1);(0,n.useEffect)((function(){var e;M.current||((e=(0,Fn.getStyleParser)(i))&&l&&null===g?e.readStyle(l).then((function(e){F({type:Kn,payload:(0,_.VM)(e)}),M.current=!0})).catch((function(e){return b(qn(qn({},e),{},{status:400}))})):e&&l&&g?(M.current=!0,F({type:Kn,payload:g})):l&&!e&&b({messageId:"styleeditor.formatNotSupported",status:400}))}),[l,i,g]);var W=function(e){if(Z(!1),!e)return null;var t=qn(qn({},R.current.style),{},{rules:e});return F({type:Kn,payload:t})},B=(0,n.useRef)();(0,n.useEffect)((function(){return B.current=re()((function(e){var t,r=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400};var t=Te()(e.map((function(e){return e.errorId})),(function(e){return e}));if(t)return{messageId:t,status:400};if(Te()(e,(function(e){var t=e.kind,r=e.classification;return!("Classification"!==t&&"Raster"!==t||r&&0!==r.length)})))return{messageId:"styleeditor.incompleteClassification",status:400};var r,n,o,l=Te()(e,(function(e){var t=e.symbolizers,r=void 0===t?[]:t;return Te()(r,(function(e){var t=e.kind,r=e.image;return"Icon"===t&&(null==r?void 0:r.errorId)}))}));return l?{messageId:"styleeditor.".concat(null==l||null===(r=l.symbolizers)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.image)||void 0===o?void 0:o.errorId),status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);if(r)return b(r);var n=(0,Fn.getStyleParser)(e.format);return n?n.writeStyle((0,_.Gg)(e.style)).then((function(t){var r=(0,_.BG)(e,t),n=r.parsedCode,o=r.errorObj;o?b(o):m(n,e.style)})).catch((function(e){b(qn(qn({},e),{},{status:400}))})):null}),j),function(){B.current.cancel()}}),[]),(0,n.useEffect)((function(){B.current.cancel(),B.current({format:i,style:z})}),[JSON.stringify(z)]);var V=E&&(E.message||E.messageId&&o().createElement(f.Z,{msgId:E.messageId}));return o().createElement(Dn,{loading:A,toolbar:o().createElement(q.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===(null==D||null===(t=D.past)||void 0===t?void 0:t.length),onClick:function(){return F({type:_n})}},{disabled:0===(null==D||null===(r=D.future)||void 0===r?void 0:r.length),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return F({type:Gn})}},{visible:!!E,Element:function(){return o().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o().createElement(ye.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:o().createElement(f.Z,{msgId:"styleeditor.validationErrorTitle"}),text:o().createElement(o().Fragment,null,o().createElement("p",null,o().createElement(f.Z,{msgId:"styleeditor.genericValidationError"})),V?o().createElement("p",null,o().createElement(f.Z,{msgId:"styleeditor.validationError"}),":",V):o().createElement("p",null,o().createElement(f.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))}},{visible:!(!O&&!A),Element:function(){return o().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},o().createElement(v.Z,{size:18}))}}]}),ruleBlock:x,symbolizerBlock:C,config:qn({geometryType:s,zoom:c,fonts:d,scales:u,bands:p,attributes:y,methods:w,getColors:k,format:i},h),rules:(null==z?void 0:z.rules)&&Mn(z.rules).reverse(),onChange:function(e){return W(Mn(e).reverse())},onUpdate:function(e){var t=e.values,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Rn);Z(!0),function(e){var t=e.values,r=e.properties,n=e.rules,o=e.layer,l=e.styleService,i=e.styleUpdateTypes,a=void 0===i?{}:i;return new Promise((function(e){var i=r.type&&a[r.type];return e(i?i({values:t,properties:r,rules:n,layer:o,styleService:l}):n.map((function(e){return e.ruleId===r.ruleId?qn(qn(qn({},e),t),{},{errorId:void 0}):e})))}))}({values:t,properties:r,layer:a,rules:R.current.style.rules,styleService:P,styleUpdateTypes:S}).then((function(e){return W(e)})).catch((function(){return W()}))}})}Yn.propTypes={code:fe().string,format:fe().string,layer:fe().object,zoom:fe().number,scales:fe().array,geometryType:fe().string,fonts:fe().array,bands:fe().array,attributes:fe().array,onChange:fe().func,onError:fe().func,defaultStyleJSON:fe().object,config:fe().object,loading:fe().bool,error:fe().object,methods:fe().array,getColors:fe().func,styleUpdateTypes:fe().object,debounceTime:fe().number},Yn.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};const Xn=Yn;var Qn=r(827),eo=r(84715),to=r(24198);const ro=[{type:"color",active:function(e){return"atom"===e.type&&Nr()(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,n=e.onChange,l=void 0===n?function(){}:n;return o().createElement(to.xS,{color:{hex:r||t.string},onChange:function(e){return l(e.hex)}})}}];var no=["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading"];function oo(){return oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oo.apply(this,arguments)}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var io={classificationVector:X.IW,classificationRaster:X.DG,classification:X.IW,"classification-raster":X.DG};function ao(e,t){var r=["string"],n=["integer","long","double","float","bigdecimal","decimal","number","int"];return e&&"raster"!==t&&Object.keys(e).filter((function(t){return-1!==[].concat(r,n).indexOf(e[t].localType.toLowerCase())})).map((function(t){var r=e[t].localType;return{attribute:t,label:t,type:-1!==n.indexOf(r.toLowerCase())?"number":"string"}}))||[]}var co=(0,l.connect)((0,a.P1)([K.gB,K.iB,K.m2,K.p,K.aN,K.Vf,K.lC,Qn.up,Qn.Od,K.Z0],(function(e,t,r,n,o,l,i,a,c,u){var s,d;return{code:e,mode:(0,_.H$)(t),bands:$()(r)&&"raster"===i&&r||[],attributes:ao(r,i),error:n.edit||null,loading:o,format:t,layer:l,geometryType:i,scales:a.map((function(e){return Math.round(e)})),zoom:c.zoom,fonts:u.fonts||[],methods:("raster"===i?null==u||null===(s=u.classificationMethods)||void 0===s?void 0:s.raster:null==u||null===(d=u.classificationMethods)||void 0===d?void 0:d.vector)||Y.Z.methods,styleService:{baseUrl:null==u?void 0:u.baseUrl,isStatic:null==u?void 0:u.isStatic}}})),{onError:d.Fe.bind(null,"edit")})(Xn);co.defaultProps={getColors:Y.Z.getColors,styleUpdateTypes:io};var uo={visual:co,textarea:(0,l.connect)((0,a.P1)([K.gB,K.iB,K.m2,K.p,K.aN],(function(e,t,r,n,o){return{code:e,mode:(0,_.H$)(t),hintProperties:r,error:n.edit||null,loading:o}})))(Ce)};function so(e){var t,r,l=e.code,i=e.error,a=e.canEdit,c=e.editorType,u=e.onUpdateMetadata,s=e.onChange,d=e.loading,y=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,no),m=(t=(0,n.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return lo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lo(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],h=m[1],O={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!l&&!i)return o().createElement("div",{style:O},o().createElement(v.Z,{size:150}));if(!a)return o().createElement("div",{style:O},o().createElement("div",null,o().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),o().createElement("h1",null,o().createElement(f.Z,{msgId:"styleeditor.noPermission"}))));if(404===(null==i?void 0:i.status))return o().createElement("div",{style:O},o().createElement("div",null,o().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),o().createElement("h1",null,o().createElement(f.Z,{msgId:"styleeditor.styleNotFound"}))));var E=uo[c]||uo.textarea;return o().createElement(p.Z,{style:{position:"relative"},header:o().createElement("div",{className:"ms-style-editor-switch"},o().createElement(q.Z,{buttons:[{className:"no-border",bsSize:"xs",disabled:d,active:"textarea"===c,textId:"visual"===c?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return d?null:"visual"===c?u({editorType:"textarea"}):h(!0)}}]}))},E&&o().createElement(E,oo({},y,{onChange:function(e,t){s(e),H()(t)&&u({styleJSON:JSON.stringify(t)})}})),b&&o().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},o().createElement(g.Alert,{bsStyle:"warning",style:{textAlign:"center"}},o().createElement("p",{style:{padding:8}},o().createElement(f.Z,{msgId:"styleeditor.alertForceTranslate"})),o().createElement("p",null,o().createElement(q.Z,{buttons:[{text:o().createElement(f.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return h(!1)},style:{marginRight:4}},{bsStyle:"primary",text:o().createElement(f.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){u({editorType:"visual"}),h(!1)}}]})))))}so.defaultProps={inlineWidgets:ro};var fo=(0,l.connect)((0,eo.y)(K.gB,K.p,K.z_,(function(e){var t=(0,K.WW)(e);return null==t?void 0:t.editorType}),(function(e){try{var t=(0,K.WW)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}}),K.aN,(function(e,t,r,n,o,l){return{code:e,error:t.edit||null,canEdit:r,editorType:n,defaultStyleJSON:o,loading:l}})),{onUpdateMetadata:d.bB,onChange:d.p2})(so),po=(0,_.YD)(),yo=(0,y.Z)((function(e){return!e.canEdit}),{glyph:"exclamation-mark",title:o().createElement(f.Z,{msgId:"styleeditor.noPermission"})}),mo=function(e){return(0,m.Z)(e,{size:150,style:{margin:"auto"}},(function(e){return o().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},o().createElement(v.Z,e))}))},bo=(0,i.compose)((0,i.defaultProps)({templates:po}),(0,l.connect)((0,a.P1)([K.Mc,K.w_,K.lC,K.z_,K.Z0,K.aN],(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=o.formats,i=void 0===l?[]:l,a=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:i,loading:a}})),{onSelect:d.FU,onClose:d.cu.bind(null,!1),onSave:d.wj}),yo,mo((function(e){return!e.geometryType})),(0,i.withState)("filterText","onFilter",""),(0,i.withState)("styleSettings","onUpdate",{}))((function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,l=void 0===n?{}:n,i=e.geometryType,a=void 0===i?"":i,c=e.templates,u=void 0===c?[]:c,s=e.filterText,d=e.availableFormats,y=void 0===d?["sld","css"]:d,m=e.formFields,b=void 0===m?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:o().createElement(f.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:o().createElement(f.Z,{msgId:"styleeditor.abstractSettings"})}]:m,h=e.onFilter,O=void 0===h?function(){}:h,E=e.onSelect,w=void 0===E?function(){}:E,S=e.onClose,j=void 0===S?function(){}:S,P=e.onSave,I=void 0===P?function(){}:P,C=e.onUpdate,x=void 0===C?function(){}:C,T=e.loading;return o().createElement(p.Z,{header:o().createElement("div",null,o().createElement(W,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:s,onFilter:O}),o().createElement("div",{className:"text-center"},o().createElement("small",null,T?o().createElement(v.Z,{size:15,style:{display:"inline-block"}}):o().createElement(f.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},o().createElement(V,{colProps:{},cardComponent:N,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;w({code:t,templateId:r,format:n||"css"}),x(R(R({},l),{},{title:A()(u.filter((function(e){return e.styleId===r})).map((function(e){return e.title})))}))},items:u.filter((function(e){var t=e.title;return!s||s&&-1!==t.indexOf(s)})).filter((function(e){var t=e.types,r=e.format;return!t||A()(t.filter((function(e){return e===a})))&&-1!==y.indexOf(r)})).map((function(e){var r;return R(R({},e),{},{preview:null!=e&&null!==(r=e.preview)&&void 0!==r&&r.config?o().createElement(k.Z,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:T})}))}),o().createElement(D.Z,null,o().createElement(F.Z,{show:!!r,fitContent:!0,title:o().createElement(f.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return j()},buttons:[{text:o().createElement(f.Z,{msgId:"save"}),bsStyle:"primary",disabled:!U(l),onClick:function(){return I(l)}}]},o().createElement(g.Form,null,o().createElement(g.FormGroup,{controlId:"styleTitle",validationState:!U(l)&&"error"},b.map((function(e){var t=e.title,r=e.placeholder,n=e.key;return o().createElement("span",{key:n},o().createElement(g.ControlLabel,null,t),o().createElement(B,{type:"text",defaultValue:l[n],placeholder:r,onChange:function(e){return x(R(R({},l),{},M({},n,e.target.value)))}}))}))),!U(l)&&o().createElement(g.Alert,{style:{margin:0},bsStyle:"danger"},o().createElement(Z.Z,{msgId:"styleeditor.titleRequired"}))))))})),vo=(0,i.compose)((0,l.connect)((0,a.P1)([K.ex,K.ov],(function(e,t){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles}})),{onSelect:s.Xy}),(0,i.withState)("filterText","onFilter",""),(0,b.Z)((function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r}),(function(){return o().createElement(bo,null)}),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))((function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,n=e.defaultStyle,l=e.availableStyles,i=void 0===l?[]:l,a=e.onSelect,c=e.formatColors,u=void 0===c?{sld:"#33ffaa",css:"#ffaa33"}:c,s=e.filterText,d=e.onFilter,f=void 0===d?function(){}:d;return o().createElement(p.Z,{className:"ms-style-editor-list",header:o().createElement(I,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:s,onFilter:f})},o().createElement(x,{size:"sm",onItemClick:function(e){var t=e.name;return a({style:t},!0)},items:i.filter((function(e){var t,r,n=e.name,o=void 0===n?"":n,l=e.title,i=void 0===l?"":l,a=e._abstract,c=void 0===a?"":a,u=e.metadata,d=void 0===u?{}:u;return!s||s&&(-1!==o.indexOf(s)||-1!==(null==d||null===(t=d.title)||void 0===t?void 0:t.indexOf(s))||-1!==(null==d||null===(r=d.description)||void 0===r?void 0:r.indexOf(s))||-1!==i.indexOf(s)||-1!==c.indexOf(s))})).map((function(e){var l,i,a;return j(j({},e),{},{title:(null==e||null===(l=e.metadata)||void 0===l?void 0:l.title)||e.label||e.title||e.name,description:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.description)||e._abstract,selected:r===e.name,preview:e.format&&o().createElement(k.Z,{backgroundColor:"#333333",texts:[{text:(a=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[a]||a||"").toUpperCase(),fill:u[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||o().createElement(C,{glyph:"geoserver"}),tools:t&&n===e.name?o().createElement(C,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})}))}))})),go=(0,i.compose)((0,i.withState)("showModal","onShowModal"),(0,l.connect)((0,a.P1)([K.ex,K.Mc,K.p,K.QW,K.gB,K.aN,K.i7,K.z_,K.ov,K.Z0,K.Ed],(function(e,t,r,n,o,l,i,a,c){var u=c.defaultStyle,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},d=s.formats,f=void 0===d?["sld"]:d,p=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:l,layerDefaultStyleName:u,selectedStyle:u===i?"":i,editEnabled:a,disableCodeEditing:-1===f.indexOf(p)}})),{onSelectStyle:d.Nf.bind(null,"template"),onEditStyle:d.Nf.bind(null,"edit"),onBack:d.Nf.bind(null,""),onReset:c.B1.bind(null,_.s1,[{}]),onAdd:d.cu.bind(null,!0),onUpdate:d.Lc,onDelete:d.WQ,onSetDefault:d.WB}))((function(e){var t,r=e.status,n=e.buttons,l=void 0===n?[]:n,i=e.templateId,a=e.error,c=e.isCodeChanged,u=e.showModal,s=e.onShowModal,d=e.loading,p=e.selectedStyle,y=e.layerDefaultStyleName,m=e.editEnabled,b=e.enableSetDefaultStyle,v=e.defaultStyles,h=void 0===v?["generic","point","line","polygon","raster"]:v,O=e.onBack,E=void 0===O?function(){}:O,w=e.onAdd,k=void 0===w?function(){}:w,S=e.onReset,j=void 0===S?function(){}:S,P=e.onDelete,I=void 0===P?function(){}:P,C=e.onSelectStyle,x=void 0===C?function(){}:C,T=e.onEditStyle,A=void 0===T?function(){}:T,Z=e.onUpdate,N=void 0===Z?function(){}:Z,z=e.onSetDefault,R=void 0===z?function(){}:z,M=e.disableCodeEditing;return o().createElement("div",null,o().createElement(q.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!r,tooltipId:"styleeditor.backToList",disabled:!!d,onClick:function(){"edit"===r&&c?s({title:o().createElement(f.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:o().createElement(g.Alert,{bsStyle:"warning",style:{margin:0}},o().createElement(f.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:o().createElement(f.Z,{msgId:"close"}),bsStyle:"primary",onClick:function(){s(null),E(),j()}}]}):(E(),j())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(r||!m),disabled:!!d,onClick:function(){return x()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(r||!m),disabled:!!d||-1!==h.indexOf(p)||!p&&-1!==h.indexOf(y)||M,onClick:function(){return A()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(a&&a.edit&&a.edit.status)||!!d||-1!==h.indexOf(p),visible:!("edit"!==r||!m),onClick:function(){return N()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==r||!i||!m),disabled:!!d,onClick:function(){return k()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!d||-1!==h.indexOf(p)||!p,visible:!(r||!m),onClick:function(){s({title:o().createElement(f.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:o().createElement(g.Alert,{bsStyle:"warning",style:{margin:0}},o().createElement(f.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:o().createElement(f.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){s(null),I(p)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!d||-1!==h.indexOf(p)||!p,visible:!(!b||r||!m),onClick:function(){return R()}}].concat((t=r?[]:l,function(e){if(Array.isArray(e))return L(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),o().createElement(D.Z,null,o().createElement(F.Z,{show:u,fitContent:!0,title:u&&u.title,onClose:function(){return s(null)},buttons:u&&u.buttons},u&&u.message)))})),ho=(0,i.compose)((0,l.connect)((0,a.P1)([K.Vf],(function(e){return{layer:e}})),{onInit:u.k}),(0,i.lifecycle)({UNSAFE_componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),mo((function(e){var t=e.layer,r=void 0===t?{}:t;return r&&r.capabilitiesLoading})))((function(){return o().createElement(p.Z,{className:"ms-style-editor-container",footer:o().createElement("div",{style:{height:25}})},o().createElement(vo,{readOnly:!0}))})),Oo=(0,i.branch)((function(e){return e.readOnly}),(function(){return ho}))(vo)},72704:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(23645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const l=o}}]);