(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./MapStore2/web/client/components/map/leaflet/DrawSupport.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=f(e);if(t){var n=f(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return p(this,o)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=o("./node_modules/prop-types/index.js"),y=o("./node_modules/react/index.js"),h=o("./node_modules/lodash/lodash.js"),g=h.head,b=h.last,v=h.isNil,w=o("./MapStore2/web/client/libs/leaflet.js");o("./node_modules/leaflet-draw/dist/leaflet.draw.js"),w.Draw.Polygon.prototype._calculateFinishDistance=function(e){if(this._markers.length>0){var t=this._map.latLngToContainerPoint(this._markers[0].getLatLng()),o=this._map.latLngToContainerPoint(this._markers[this._markers.length-1].getLatLng()),r=new w.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),n=this._map.latLngToContainerPoint(r.getLatLng());return Math.min(t.distanceTo(n),o.distanceTo(n))}return 1/0};var S=o("./MapStore2/web/client/utils/MapUtils.js"),O=S.isSimpleGeomType,j=S.getSimpleGeomType,L=o("./MapStore2/web/client/utils/leaflet/DrawSupportUtils.js").boundsToOLExtent,P=o("./node_modules/object-assign/index.js"),C=o("./MapStore2/web/client/utils/CoordinatesUtils.js"),_=o("./MapStore2/web/client/utils/leaflet/Vector.js").pointToLayer,x=Math.PI/180,M=function(e,t,o){if("EPSG:4326"===o)return{center:t,srs:o,radius:e};var r=e/40075017*360/Math.cos(x*t[1]),n=C.reproject(t,"EPSG:4326",o);if(r){var i=C.reproject([t[0]+r,t[1]],"EPSG:4326",o);return{center:n,srs:o,radius:Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))}}return{center:n,srs:o,radius:e}},k=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";if("EPSG:4326"===o||void 0===e)return{center:t,projection:o,radius:e};var r=C.reproject({x:t.lng,y:t.lat},o,"EPSG:4326");if(void 0===e)return{center:r,projection:o,radius:e};var n=C.reproject([t.lng+e,t.lat],o,"EPSG:4326"),i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)),a=i*Math.cos(x*r.y)*40075017/360;return{center:r,projection:"EPSG:4326",radius:a}},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,o,r,n=c(p);function p(){var e;a(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return d(u(e=n.call.apply(n,[this].concat(o))),"onDrawStart",(function(){e.drawing=!0})),d(u(e),"onDrawCreated",(function(t){e.drawing=!1;var o,r=t.layer,n=r.toGeoJSON();"marker"===t.layerType?o=w.latLngBounds(n.geometry.coordinates,n.geometry.coordinates):(r._map||(r._map=e.props.map,r._renderer=e.props.map.getRenderer(r),r._project()),o=r.getBounds());var i=L(o),a=o.getCenter();a=[a.lng,a.lat];var s=n.geometry.coordinates,l="EPSG:4326",c=n.geometry.type,p=r.getRadius?r.getRadius():0;if("circle"===t.layerType){n.projection="EPSG:4326",l="EPSG:3857",i=C.reprojectBbox(i,"EPSG:4326",l);var u=M(r._mRadius,a,l);a=u.center,p=u.radius,s=C.calculateCircleCoordinates(a,p,100),n.radius=r.getRadius?r.getRadius():0,a=[a.x,a.y],c="Polygon"}e.drawLayer.addData(n);var f={type:c,extent:i,center:a,coordinates:s,radius:p,projection:l};e.props.options&&e.props.options.stopAfterDrawing&&e.props.onChangeDrawingStatus("stop",e.props.drawMethod,e.props.drawOwner);var d=e.convertFeaturesToGeoJson(t.layer,e.props);e.props.onEndDrawing(f,e.props.drawOwner),e.props.onGeometryChanged([d],e.props.drawOwner,e.props.options&&e.props.options.stopAfterDrawing?"enterEditMode":"")})),d(u(e),"onUpdateGeom",(function(t,o){var r=e.convertFeaturesToGeoJson(t,o);o.onGeometryChanged([r],o.drawOwner)})),d(u(e),"addLayer",(function(t){e.clean();var o=w.geoJson(null,{pointToLayer:function(e,t){var o=k(e.radius,t,e.projection),r=o.center,n=o.radius;return w.circle(r,n||5)},style:function(e){return t.style&&t.style[e.geometry.type]||{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}});e.props.map.addLayer(o),t.features&&t.features.length>0&&o.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod)),e.drawLayer=o})),d(u(e),"addGeojsonLayer",(function(t){var o=t.features,r=t.projection,n=t.style;e.clean();var i=w.geoJson(o,{style:function(e){return e.style||n},pointToLayer:function(e,t){var o=C.reproject({x:t.lng,y:t.lat},r,"EPSG:4326");return _(w.latLng(o.y,o.x),e,n)}});e.drawLayer=i.addTo(e.props.map)})),d(u(e),"replaceFeatures",(function(t){e.drawLayer?(e.drawLayer.clearLayers(),"Circle"===e.props.drawMethod?(e.drawLayer.options.pointToLayer=function(e,t){var o=k(e.radius,t,e.projection),r=o.center,n=o.radius;return w.circle(r,n||5)},e.drawLayer.options.style={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}):e.drawLayer.options.pointToLayer=function(e,o){var r=C.reproject({x:o.lng,y:o.lat},t.options&&t.options.featureProjection||"EPSG:4326","EPSG:4326");return _(w.latLng(r.y,r.x),e,t.style)},e.drawLayer.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod))):e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style})})),d(u(e),"endDrawing",(function(t){e.replaceFeatures(t);var o=b(t.features);"Circle"!==e.props.drawMethod||!o||v(o.center)||v(o.radius)?o&&e.props.onEndDrawing(o,e.props.drawOwner):e.props.onEndDrawing(i(i({},o),{},{coordinates:C.calculateCircleCoordinates(o.center,o.radius,100)}),e.props.drawOwner)})),d(u(e),"addDrawInteraction",(function(t){e.removeAllInteractions(),"Point"===t.drawMethod||"MultiPoint"===t.drawMethod?e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}):e.addLayer(t),e.props.map.on("draw:created",e.onDrawCreated,u(e)),e.props.map.on("draw:drawstart",e.onDrawStart,u(e)),"LineString"===t.drawMethod||"Bearing"===t.drawMethod||"MultiLineString"===t.drawMethod?e.drawControl=new w.Draw.Polyline(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},showLength:!1,repeatMode:!0,icon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Polygon"===t.drawMethod||"MultiPolygon"===t.drawMethod?e.drawControl=new w.Draw.Polygon(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5],guidelineDistance:5},allowIntersection:!1,showLength:!1,showArea:!1,repeatMode:!0,icon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"BBOX"===t.drawMethod?e.drawControl=new w.Draw.Rectangle(e.props.map,{draw:!1,shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},repeatMode:!0,icon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Circle"===t.drawMethod?e.drawControl=new w.Draw.Circle(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},showRadius:!1,repeatMode:!0}):"Point"!==t.drawMethod&&"MultiPoint"!==t.drawMethod||(e.drawControl=new w.Draw.Marker(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},repeatMode:!0})),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawControl.enable()})),d(u(e),"addDrawOrEditInteractions",(function(t){var o,r=g(t.features);r&&r.geometry&&r.geometry.type&&!O(r.geometry.type)&&("GeometryCollection"===r.geometry.type?o=r.geometry.geometries.map((function(e){return e.coordinates.map((function(t,o){return{type:"Feature",properties:i({},r.properties),id:e.type+o,geometry:{coordinates:t,type:j(e.type)}}}))})):(o=r.geometry.coordinates.map((function(e,t){return{type:"Feature",properties:i({},r.properties),id:r.geometry.type+t,geometry:{coordinates:e,type:j(r.geometry.type)}}})),r={type:"FeatureCollection",features:o}));var n=P({},t,{features:[r||{}]});e.drawLayer?(e.drawLayer.clearLayers(),e.drawLayer.addData(e.convertFeaturesPolygonToPoint(n.features,n.drawMethod))):e.addGeojsonLayer({features:t.features&&t.options.featureProjection&&"EPSG:4326"!==t.options.featureProjection?t.features.map((function(e){return C.reprojectGeoJson(e,t.options.featureProjection,"EPSG:4326")})):t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}),t.options.editEnabled&&e.addEditInteraction(n),t.options.drawEnabled&&e.addDrawInteraction(n)})),d(u(e),"addEditInteraction",(function(t){e.clean(),e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:P({},t.style,{poly:{icon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new w.DivIcon({iconSize:new w.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}})});var o=e.drawLayer.getLayers();setTimeout((function(){o.forEach((function(o){o.getLayers&&o.getLayers()&&o.getLayers().length?o.getLayers().forEach((function(o){o.on("edit",(function(o){return e.onUpdateGeom(o.target,t)})),o.on("moveend",(function(o){return e.onUpdateGeom(o.target,t)})),o.editing&&o.editing.enable()})):(o.on("edit",(function(o){return e.onUpdateGeom(o.target,t)})),o.on("moveend",(function(o){return e.onUpdateGeom(o.target,t)})),o.editing&&o.editing.enable())}))}),0),e.editControl=new w.Control.Draw({edit:{featureGroup:e.drawLayer,poly:{allowIntersection:!1},edit:!0},draw:{polygon:{allowIntersection:!1,showArea:!0}}}),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable()})),d(u(e),"removeAllInteractions",(function(){e.removeEditInteraction(),e.removeDrawInteraction()})),d(u(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.props.options&&e.props.options.stopAfterDrawing&&(e.drawControl.setOptions({repeatMode:!1}),e.props.onDrawStopped()),e.drawControl.disable(),e.drawControl=null,e.props.map.off("draw:created",e.onDrawCreated,u(e)),e.props.map.off("draw:drawstart",e.onDrawStart,u(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),d(u(e),"removeEditInteraction",(function(){e.drawLayer&&(e.drawLayer.getLayers().forEach((function(e){e.getLayers&&e.getLayers()&&e.getLayers().length?e.getLayers().forEach((function(e){e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable()})):(e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable())})),e.editControl=null);e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable()})),d(u(e),"cleanAndStop",(function(){e.removeAllInteractions(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),d(u(e),"clean",(function(){e.removeEditInteraction(),e.removeDrawInteraction(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),d(u(e),"convertFeaturesPolygonToPoint",(function(e,t){return"Circle"===t?e.map((function(e){var t=void 0!==e.center&&void 0!==e.radius?k(e.radius,{lat:e.center.y,lng:e.center.x},e.projection):e,o=t.center,r=t.projection,n=t.radius;return i(i({},e),{},{coordinates:o?[o.x,o.y]:e.coordinates,center:o||e.center,projection:r||e.projection,radius:void 0!==n?n:e.radius,type:"Point"})})):e})),d(u(e),"convertFeaturesToGeoJson",(function(t,o){var r;if(O(o.drawMethod))r=t.toGeoJSON().geometry;else{if("GeometryCollection"===o.drawMethod)return{type:"GeometryCollection",geometries:e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()})).map((function(e){return"FeatureCollection"===e.type?{type:"Multi"+e.features[0].geometry.type,coordinates:e.features.map((function(e){return e.geometry.coordinates}))}:{type:e.geometry.type,coordinates:e.geometry.coordinates}}))};var n=e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()}));r={type:o.drawMethod,coordinates:n.reduce((function(e,t){return e.concat([t.geometry.coordinates])}),[])}}return P({},t.toGeoJSON(),{geometry:r})})),e}return t=p,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!(!this.props.messages&&!this.context.messages)&&this.context.messages.drawLocal;if(t&&(w.drawLocal=t),this.props.drawStatus!==e.drawStatus||"replace"===e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style});break;case"start":this.addDrawInteraction(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeAllInteractions();break;case"replace":this.replaceFeatures(e);break;case"clean":this.cleanAndStop();break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&s(t.prototype,o),r&&s(t,r),p}(y.Component);d(E,"displayName","DrawSupport"),d(E,"propTypes",{map:m.object,drawOwner:m.string,drawStatus:m.string,drawMethod:m.string,options:m.object,features:m.array,onChangeDrawingStatus:m.func,onGeometryChanged:m.func,onDrawStopped:m.func,onEndDrawing:m.func,messages:m.object,style:m.object}),d(E,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onEndDrawing:function(){},style:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1,editing:{fill:1}}}),e.exports=E},"./MapStore2/web/client/components/map/leaflet/Feature.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=f(e);if(t){var n=f(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return p(this,o)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=o("./node_modules/prop-types/index.js"),y=o("./node_modules/react/index.js"),h=o("./node_modules/lodash/lodash.js"),g=h.isEqual,b=h.isArray,v=h.castArray,w=o("./node_modules/object-assign/index.js"),S=o("./node_modules/axios/index.js"),O=o("./MapStore2/web/client/utils/leaflet/Vector.js").geometryToLayer,j=o("./MapStore2/web/client/utils/VectorStyleUtils.js").createStylesAsync,L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,o,r,n=c(p);function p(){var e;a(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return d(u(e=n.call.apply(n,[this].concat(o))),"createLayer",(function(t){t.geometry&&e.addFeature(i(i({},t),{},{style:t.style&&v(t.style)||void 0})),t.features&&t.features.forEach((function(o){var r=w({},t,{type:o.type,geometry:o.geometry,style:o.style&&v(o.style)||void 0,properties:o.properties});e.addFeature(r)}))})),d(u(e),"removeLayer",(function(t){e._layers&&(e._layers.forEach((function(e){t.container.removeLayer(e)})),e._layers=[])})),e}return t=p,(o=[{key:"componentDidMount",value:function(){this._layers=[],(this.props.container&&this.props.geometry||this.props.features)&&this.createLayer(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){g(e.properties,this.props.properties)&&g(e.geometry,this.props.geometry)&&e.features===this.props.features&&e.style===this.props.style&&e.styleName===this.props.styleName||(this.removeLayer(e),this.createLayer(e))}},{key:"componentWillUnmount",value:function(){this.removeLayer(this.props)}},{key:"render",value:function(){return null}},{key:"addFeature",value:function(e){var t=this;if(b(e.style)){var o=j(e.style);S.all(o).then((function(o){t.addLayer(e,o)}))}else this.addLayer(e,e.style)}},{key:"addLayer",value:function(e,t){var o=this,r=O({type:e.type,geometry:e.geometry,properties:e.properties,msId:e.msId},{style:t,styleName:e.styleName});e.container.addLayer(r),r.on("click",(function(t){e.onClick&&e.onClick({pixel:{x:t.originalEvent&&t.originalEvent.x,y:t.originalEvent&&t.originalEvent.y},latlng:t.latlng},o.props.options.handleClickOnLayer?o.props.options.id:null)})),r.setOpacity||(r.setOpacity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.originalStyle||this.options&&this.options.style||this.options||{};this.originalStyle=i({},t);var o=t.opacity,n=void 0===o?1:o,a=t.fillOpacity,s=void 0===a?1:a,l=t.color,c=t.fillColor,p=t.radius,u=t.weight,f={color:l,fillColor:c,radius:p,weight:u,opacity:n*e,fillOpacity:s*e};r.setStyle&&r.setStyle(f)}),this._layers.push(r)}}])&&s(t.prototype,o),r&&s(t,r),p}(y.Component);d(L,"propTypes",{msId:m.oneOfType([m.string,m.number]),type:m.string,styleName:m.string,properties:m.object,container:m.object,geometry:m.object,features:m.array,style:m.object,onClick:m.func,options:m.object}),e.exports=L},"./MapStore2/web/client/components/map/leaflet/HighlightFeatureSupport.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=p(e);if(t){var n=p(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return l(this,o)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f=o("./node_modules/prop-types/index.js"),d=o("./node_modules/react/index.js"),m=o("./node_modules/lodash/lodash.js").findIndex,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,o,r,l=s(p);function p(){var e;n(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(c(e=l.call.apply(l,[this].concat(o))),"setLayer",(function(){var t;e._layer&&e.cleanSupport(),e.props.map.eachLayer((function(o){o.layerId===e.props.layer&&(t=o)}),c(e)),void 0!==t&&t.on("click",e.featureClicked,c(e)),e._layer=t,e.highlightFeatures(e.props.features)})),u(c(e),"featureClicked",(function(t){var o=t.layer;if((t.originalEvent.ctrlKey||t.originalEvent.metaKey)&&o){var r=m(e._selectedFeatures,(function(e){return e===o}));-1!==r?(e._layer.resetStyle(o),e._selectedFeatures=e._selectedFeatures.filter((function(e,t){return t!==r})),o=null):e._selectedFeatures.push(o)}else e._selectedFeatures.map((function(t){e._layer.resetStyle(t)})),e._selectedFeatures=o?[o]:[];o&&(o.bringToFront(),o.setStyle(e.props.selectedStyle)),e.props.updateHighlighted(e._selectedFeatures.map((function(e){return e.msId})),"")})),u(c(e),"cleanSupport",(function(){e._layer&&(e._selectedFeatures.map((function(t){e._layer.resetStyle(t)})),e._layer.off("click",e.featureClicked,c(e))),e._selectedFeatures=[],e._layer=null,e.props.updateHighlighted([],"")})),u(c(e),"highlightFeatures",(function(t){e._layer||e.setLayer(),e._selectedFeatures.map((function(t){e._layer.resetStyle(t)})),e._selectedFeatures=[],e._layer.eachLayer((function(o){-1!==t.indexOf(o.msId)&&(e._selectedFeatures.push(o),o.bringToFront(),o.setStyle(e.props.selectedStyle))}),c(e))})),e}return t=p,(o=[{key:"componentDidMount",value:function(){this._selectedFeatures=[],this._layer=null,"enabled"===this.props.status&&this.setLayer()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}},{key:"UNSAFE_componentWillUpdate",value:function(e){switch(e.status){case"enabled":this.setLayer();break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}},{key:"componentWillUnmount",value:function(){this.cleanSupport()}},{key:"render",value:function(){return null}}])&&i(t.prototype,o),r&&i(t,r),p}(d.Component);u(y,"propTypes",{map:f.object,layer:f.string,status:f.oneOf(["disabled","enabled","update"]),updateHighlighted:f.func,selectedStyle:f.object,features:f.array}),u(y,"contextTypes",{messages:f.object}),u(y,"defaultProps",{status:"disabled",updateHighlighted:function(){},selectedStyle:{radius:12,weight:4,opacity:1,fillOpacity:1,color:"yellow",fillColor:"red"},features:[]}),e.exports=y},"./MapStore2/web/client/components/map/leaflet/Layer.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){d(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=f(e);if(t){var n=f(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return p(this,o)}}function p(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=o("./node_modules/prop-types/index.js"),y=o("./node_modules/react/index.js"),h=o("./MapStore2/web/client/utils/leaflet/Layers.js"),g=o("./node_modules/object-assign/index.js"),b=o("./node_modules/lodash/lodash.js").isEqual,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(p,e);var t,o,r,n=c(p);function p(){var e;a(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return d(u(e=n.call.apply(n,[this].concat(o))),"setLayerVisibility",(function(t){t!==(e.props.options&&!1!==e.props.options.visibility)&&(t?e.addLayer():e.removeLayer(),e.updateZIndex())})),d(u(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity&&e.layer.setOpacity(t)})),d(u(e),"generateOpts",(function(t,o,r){return g({},t,o?{zIndex:o,srs:e.props.srs}:null,{zoomOffset:-e.props.zoomOffset,onError:function(){e.props.onCreationError(t)},securityToken:r})})),d(u(e),"updateZIndex",(function(t){var o=t||e.props.position;o&&e.layer&&e.layer.setZIndex&&e.layer.setZIndex(o)})),d(u(e),"createLayer",(function(t,o,r,n){if(t){var i=e.generateOpts(o,r,n);e.layer=h.createLayer(t,i),e.layer&&(e.layer.layerName=o.name,e.layer.layerId=o.id),e.forceUpdate()}})),d(u(e),"updateLayer",(function(t,o){var r=h.updateLayer(t.type,e.layer,e.generateOpts(t.options,t.position,t.securityToken),e.generateOpts(o.options,o.position,o.securityToken));r&&(e.removeLayer(),e.layer=r,e.addLayer())})),d(u(e),"addLayer",(function(){if(e.isValid()&&(e.props.map.addLayer(e.layer),e.props.options.refresh&&e.layer.setParams)){var t=0;e.refreshTimer=setInterval((function(){e.layer.setParams(g({},e.props.options.params,{_refreshCounter:t++}))}),e.props.options.refresh)}})),d(u(e),"removeLayer",(function(){e.isValid()&&e.props.map.removeLayer(e.layer)})),d(u(e),"isValid",(function(){if(e.layer){var t=h.isValid(e.props.type,e.layer);return e.valid=t,t}return!1})),e}return t=p,(o=[{key:"componentDidMount",value:function(){this.valid=!0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var o=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(o),e.position!==this.props.position&&this.updateZIndex(e.position),this.updateLayer(e,this.props)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!["map","type","srs","position","zoomOffset","onClick","options","children"].reduce((function(o,r){switch(r){case"map":case"type":case"srs":case"position":case"zoomOffset":case"onClick":case"children":return o&&t.props[r]===e[r];case"options":return o&&(t.props[r]===e[r]||b(i(i({},t.props[r]),{},{loading:!1}),i(i({},e[r]),{},{loading:!1})));default:return o}}),!0)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.removeLayer(),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,o=t?y.Children.map(this.props.children,(function(o){return o?y.cloneElement(o,{container:t,styleName:e.props.options&&e.props.options.styleName,onClick:e.props.onClick,options:e.props.options||{}}):null})):null;return y.createElement(y.Fragment,null,o)}return h.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(t.prototype,o),r&&s(t,r),p}(y.Component);d(v,"propTypes",{map:m.object,type:m.string,srs:m.string,options:m.object,position:m.number,zoomOffset:m.number,onCreationError:m.func,onClick:m.func,securityToken:m.string}),d(v,"defaultProps",{onCreationError:function(){},options:{}}),e.exports=v},"./MapStore2/web/client/components/map/leaflet/Locate.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=p(e);if(t){var n=p(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return l(this,o)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f=o("./node_modules/prop-types/index.js"),d=o("./node_modules/react/index.js"),m=o("./MapStore2/web/client/libs/leaflet.js"),y=o("./node_modules/object-assign/index.js");o("./node_modules/leaflet.locatecontrol/src/L.Control.Locate.js"),o("./node_modules/leaflet.locatecontrol/dist/L.Control.Locate.css");var h={follow:!0,remainActive:!0,stopFollowingOnDrag:!0,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:1/0,watch:!0}};m.Control.MSLocate=m.Control.Locate.extend({setMap:function(e){this._map=e,this._layer=this.options.layer||new m.LayerGroup,this._layer.addTo(e),this._event=void 0,this._prevBounds=null;var t={};m.extend(t,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=t,t={},m.extend(t,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=t,this._resetVariables(),this._map.on("unload",this._unload,this)},_setClasses:function(e){return this._map.fire("locatestatus",{state:e}),e},_updateContainerStyle:function(){this._isFollowing()?this._setClasses("following"):this._active&&this._setClasses("active")},_cleanClasses:function(){return null},setStrings:function(e){this.options.strings=y({},this.options.strings,e)}});var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,o,r,l=s(p);function p(){var e;n(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(c(e=l.call.apply(l,[this].concat(o))),"onLocationError",(function(t){e.props.onLocateError(t.message),e.props.changeLocateState("DISABLED")})),u(c(e),"locateControlState",(function(t){"requesting"===t.state&&"LOCATING"!==e.props.status?e.props.changeLocateState("LOCATING"):"following"!==t.state||e.fol?"active"===t.state&&"ENABLED"!==e.props.status&&e.props.changeLocateState("ENABLED"):e.props.changeLocateState("FOLLOWING")})),e}return t=p,(o=[{key:"componentDidMount",value:function(){this.props.map&&(this.locate=new m.Control.MSLocate(h),this.locate.setMap(this.props.map),this.props.map.on("locatestatus",this.locateControlState),this.locate.options.onLocationError=this.onLocationError,this.locate.options.onLocationOutsideMapBounds=this.onLocationError),this.props.status.enabled&&this.locate.start()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fol=!1,e.status!==this.props.status&&("ENABLED"!==e.status||this.locate._active?"FOLLOWING"===e.status&&this.locate._active&&!this.locate._following?(this.fol=!0,this.locate.stop(),this.locate.start()):"DISABLED"===e.status&&(this.locate._following=!1,this.locate.stop()):this.locate.start()),e.messages!==this.props.messages&&(this.locate.setStrings(e.messages),"DISABLED"!==e.status&&this.locate.drawMarker(this.locate._map))}},{key:"render",value:function(){return null}}])&&i(t.prototype,o),r&&i(t,r),p}(d.Component);u(g,"displayName","Locate"),u(g,"propTypes",{map:f.object,status:f.string,messages:f.object,changeLocateState:f.func,onLocateError:f.func}),u(g,"defaultProps",{id:"overview",status:"DISABLED",changeLocateState:function(){},onLocateError:function(){}}),e.exports=g},"./MapStore2/web/client/components/map/leaflet/Map.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=p(e);if(t){var n=p(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return l(this,o)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f=o("./MapStore2/web/client/libs/leaflet.js"),d=o("./node_modules/prop-types/index.js"),m=o("./node_modules/react/index.js"),y=o("./MapStore2/web/client/utils/ConfigUtils.js").default,h=o("./MapStore2/web/client/utils/CoordinatesUtils.js"),g=o("./node_modules/object-assign/index.js"),b=o("./MapStore2/web/client/utils/MapUtils.js"),v=o("./node_modules/rxjs/Rx.js"),w=o("./node_modules/lodash/lodash.js").throttle;o("./MapStore2/web/client/components/map/leaflet/SingleClick.js");var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,o,r,l=s(p);function p(){var e;n(this,p);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return u(c(e=l.call.apply(l,[this].concat(o))),"state",{}),u(c(e),"getDocument",(function(){return e.props.document||document})),u(c(e),"getResolutions",(function(){return e.props.resolutions})),u(c(e),"_updateMapPositionFromNewProps",(function(t){var o=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},r=t.center,n=e.props.center,i=e.map.getCenter(),a=o(r.x,n.x)&&o(r.y,n.y)||o(r.x,i.lng)&&o(r.y,i.lat),s=t.zoom,l=e.props.zoom,c=e.map.getZoom(),p=s===l||s===c;a||p?p?a||e.map.setView([t.center.y,t.center.x]):e.map.setZoom(t.zoom):e.map.setView([t.center.y,t.center.x],Math.round(t.zoom))})),u(c(e),"updateMapInfoState",(function(){var t=e.map.getBounds().toBBoxString().split(","),o={height:e.map.getSize().y,width:e.map.getSize().x},r=e.map.getCenter();e.props.onMapViewChanges({x:r.lng,y:r.lat,crs:"EPSG:4326"},e.map.getZoom(),{bounds:{minx:parseFloat(t[0]),miny:parseFloat(t[1]),maxx:parseFloat(t[2]),maxy:parseFloat(t[3])},crs:"EPSG:4326",rotation:0},o,e.props.id,e.props.projection)})),u(c(e),"setMousePointer",(function(t){e.map&&(e.map.getContainer().style.cursor=t||"auto")})),u(c(e),"mouseMoveEvent",(function(t){var o=t.latlng.wrap();e.props.onMouseMove({x:o.lng||0,y:o.lat||0,z:e.elevationLayer&&e.elevationLayer.getElevation(o,t.containerPoint)||void 0,crs:"EPSG:4326",pixel:{x:t.containerPoint.x,y:t.containerPoint.x},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng]})})),u(c(e),"registerHooks",(function(){e.props.hookRegister.registerHook(b.EXTENT_TO_ZOOM_HOOK,(function(t){var o=h.reproject([t[0],t[1]],e.props.projection,"EPSG:4326"),r=h.reproject([t[2],t[3]],e.props.projection,"EPSG:4326");return e.map.getBoundsZoom([[o.y,o.x],[r.y,r.x]])-1})),e.props.hookRegister.registerHook(b.RESOLUTIONS_HOOK,(function(){return e.getResolutions()})),e.props.hookRegister.registerHook(b.COMPUTE_BBOX_HOOK,(function(t,o){var r=f.latLng([t.y,t.x]),n=e.map._getNewPixelOrigin(r,o),i=new f.Bounds(n,n.add(e.map.getSize())),a=e.map.unproject(i.getBottomLeft(),o),s=e.map.unproject(i.getTopRight(),o),l=new f.LatLngBounds(a,s).toBBoxString().split(",");return{bounds:{minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(l[2]),maxy:parseFloat(l[3])},crs:"EPSG:4326",rotation:0}})),e.props.hookRegister.registerHook(b.GET_PIXEL_FROM_COORDINATES_HOOK,(function(t){var o=h.reproject(t,e.props.projection,"EPSG:4326"),r=e.map.latLngToContainerPoint([o.y,o.x]);return[r.x,r.y]})),e.props.hookRegister.registerHook(b.GET_COORDINATES_FROM_PIXEL_HOOK,(function(t){var o=e.map.containerPointToLatLng(t),r=h.reproject([o.lng,o.lat],"EPSG:4326",e.props.projection);return[r.x,r.y]})),e.props.hookRegister.registerHook(b.ZOOM_TO_EXTENT_HOOK,(function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.padding,n=o.crs,i=o.maxZoom,a=o.duration,s=r&&f.point(r.left||0,r.top||0),l=r&&f.point(r.right||0,r.bottom||0),c=h.reprojectBbox(t,n,"EPSG:4326");e.map.fitBounds([[c[1],c[0]],[c[3],c[2]]],{paddingTopLeft:s,paddingBottomRight:l,maxZoom:i,duration:a,animate:0!==a&&void 0})}))})),u(c(e),"addLayerObservable",(function(t,o){!t.layer.layerId||t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&o&&(t.layer._ms2LoadingTileCount=0,t.layer.layerLoadingStream$=new v.Subject,t.layer.layerLoadStream$=new v.Subject,t.layer.layerErrorStream$=new v.Subject,t.layer.layerErrorStream$.bufferToggle(t.layer.layerLoadingStream$,(function(){return t.layer.layerLoadStream$})).subscribe({next:function(o){var r=t.layer._ms2LoadingTileCount||o&&o.length||0;o&&o.length>0&&e.props.onLayerError(o[0].target.layerId,r,o.length),t.layer._ms2LoadingTileCount=0}}))})),e}return t=p,(o=[{key:"UNSAFE_componentWillMount",value:function(){if(this.zoomOffset=0,this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions&&this.props.mapOptions.view.resolutions.length>0){var e=f.CRS.EPSG3857.scale,t=this.props.mapOptions.view.resolutions[0]/b.getGoogleMercatorResolutions(0,23)[0];this.crs=g({},f.CRS.EPSG3857,{scale:function(o){return e.call(f.CRS.EPSG3857,o)/Math.pow(2,Math.round(Math.log2(t)))}}),this.zoomOffset=Math.round(Math.log2(t))}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.limits,o=void 0===t?{}:t,r=o.restrictedExtent&&o.crs&&h.reprojectBbox(o.restrictedExtent,o.crs,"EPSG:4326"),n=g({},this.props.interactive?{}:{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,attributionControl:!1,maxBounds:r&&f.latLngBounds([[r[1],r[0]],[r[3],r[2]]]),maxBoundsViscosity:r&&1,minZoom:o&&o.minZoom,maxZoom:o&&o.maxZoom||23},this.props.mapOptions,this.crs?{crs:this.crs}:{}),i=f.map(this.getDocument().getElementById(this.props.id),g({zoomControl:!1},n)).setView([this.props.center.y,this.props.center.x],Math.round(this.props.zoom));this.map=i,this.props.zoomControl&&(this.mapZoomControl=f.control.zoom(),this.map.addControl(this.mapZoomControl)),this.attribution=f.control.attribution(),this.attribution.addTo(this.map);var a=this.getDocument();this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&(a.querySelector(this.props.mapOptions.attribution.container).appendChild(this.attribution.getContainer()),a.querySelector(".leaflet-control-container .leaflet-control-attribution")&&a.querySelector(".leaflet-control-container .leaflet-control-attribution").parentNode.removeChild(a.querySelector(".leaflet-control-container .leaflet-control-attribution"))),this.map.on("moveend",this.updateMapInfoState),this.map.on("singleclick",(function(t){e.props.onClick&&e.props.onClick({pixel:{x:t.containerPoint.x,y:t.containerPoint.y},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng],modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,shift:t.originalEvent.shiftKey}})}));var s=w(this.mouseMoveEvent,100);this.map.on("dragstart",(function(){e.map.off("mousemove",s)})),this.map.on("dragend",(function(){e.map.on("mousemove",s)})),this.map.on("mousemove",s),this.map.on("contextmenu",(function(){e.props.onRightClick&&e.props.onRightClick(event.containerPoint)})),this.map.on("mouseout",(function(){setTimeout((function(){return e.props.onMouseOut()}),150)})),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.map.on("layeradd",(function(t){if(t.layer._ms2Added){var o=t.layer.layerLoadingStream$&&t.layer.layerLoadingStream$.isStopped;e.addLayerObservable(t,o)}else t.layer._ms2Added=!0,t.layer.getElevation&&(e.elevationLayer=t.layer),t.layer.layerId&&(t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&(e.addLayerObservable(t,!0),t.layer.options&&t.layer.options.hideLoading||(e.props.onLayerLoading(t.layer.layerId),t.layer.layerLoadingStream$.next()),t.layer.on("loading",(function(o){e.props.onLayerLoading(o.target.layerId),t.layer.layerLoadingStream$.next()})),t.layer.on("load",(function(o){e.props.onLayerLoad(o.target.layerId),t.layer.layerLoadStream$.next()})),t.layer.on("tileloadstart ",(function(){t.layer._ms2LoadingTileCount++})),(t.layer.options&&!t.layer.options.hideErrors||!t.layer.options)&&t.layer.on("tileerror",(function(e){t.layer.layerErrorStream$.next(e)})),t.layer.on("loaderror",(function(t){e.props.onLayerError(t.target.layerId)}))))})),this.map.on("layerremove",(function(e){e.layer.layerLoadingStream$&&(e.layer.layerLoadingStream$.complete(),e.layer.layerLoadStream$.complete(),e.layer.layerErrorStream$.complete())})),this.drawControl=null,this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),this.map&&e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?(this.mapZoomControl=f.control.zoom(),this.map.addControl(this.mapZoomControl)):this.mapZoomControl&&!e.zoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0)),e.resize!==this.props.resize&&setTimeout((function(){t.map&&t.map.invalidateSize(!1)}),0),this.props.limits!==e.limits){var o=e.limits,r=void 0===o?{}:o,n=this.props.limits;if(r.restrictedExtent!==(n&&n.restrictedExtent)){var i=r.restrictedExtent&&r.crs&&h.reprojectBbox(r.restrictedExtent,r.crs,"EPSG:4326");this.map.setMaxBounds(r.restrictedExtent&&f.latLngBounds([[i[1],i[0]],[i[3],i[2]]]))}r.minZoom!==(n&&n.minZoom)&&this.map.setMinZoom(r.minZoom)}return!1}},{key:"componentWillUnmount",value:function(){var e=this.getDocument(),t=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&e.querySelector(this.props.mapOptions.attribution.container);if(t&&this.attribution.getContainer()&&t.querySelector(".leaflet-control-attribution"))try{t.removeChild(this.attribution.getContainer())}catch(e){}this.mapZoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0),this.map.off(),this.map.remove(),this.map=void 0}},{key:"render",value:function(){var e=this,t=this.map,o=this.props.projection,r=t?m.Children.map(this.props.children,(function(r){return r?m.cloneElement(r,{map:t,projection:o,zoomOffset:e.zoomOffset,onCreationError:e.props.onCreationError,onClick:e.props.onClick}):null})):null;return m.createElement("div",{id:this.props.id,style:this.props.style},r)}}])&&i(t.prototype,o),r&&i(t,r),p}(m.Component);u(S,"propTypes",{id:d.string,document:d.object,center:y.PropTypes.center,zoom:d.number.isRequired,mapStateSource:y.PropTypes.mapStateSource,style:d.object,projection:d.string,onMapViewChanges:d.func,onClick:d.func,onRightClick:d.func,mapOptions:d.object,limits:d.object,zoomControl:d.bool,mousePointer:d.string,onMouseMove:d.func,onLayerLoading:d.func,onLayerLoad:d.func,onLayerError:d.func,resize:d.number,measurement:d.object,changeMeasurementState:d.func,registerHooks:d.bool,interactive:d.bool,resolutions:d.array,hookRegister:d.object,onCreationError:d.func,onMouseOut:d.func}),u(S,"defaultProps",{id:"map",onMapViewChanges:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},zoomControl:!0,mapOptions:{zoomAnimation:!0,attributionControl:!1},projection:"EPSG:3857",center:{x:13,y:45,crs:"EPSG:4326"},zoom:5,onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:b,style:{},interactive:!0,resolutions:b.getGoogleMercatorResolutions(0,23),onMouseOut:function(){}}),e.exports=S},"./MapStore2/web/client/components/map/leaflet/MeasurementSupport.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){y(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=m(e);if(t){var n=m(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return f(this,o)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var h=o("./node_modules/prop-types/index.js"),g=o("./node_modules/react/index.js"),b=o("./node_modules/object-assign/index.js"),v=o("./MapStore2/web/client/libs/leaflet.js"),w=o("./node_modules/lodash/lodash.js").slice,S=o("./MapStore2/web/client/utils/CoordinatesUtils.js"),O=S.reproject,j=S.calculateAzimuth,L=S.calculateDistance,P=S.transformLineToArcs,C=o("./MapStore2/web/client/utils/MeasureUtils.js"),_=C.convertUom,x=C.getFormattedBearingValue;o("./node_modules/leaflet-draw/dist/leaflet.draw.js");var M={km:2,ha:2,m:2,mi:2,ac:2,yd:0,ft:0,nm:2,sqkm:2,sqha:2,sqm:2,sqmi:2,sqac:2,sqyd:2,sqft:2,sqnm:2};v.getMeasureWithTreshold=function(e,t,o,r,n,i,a){return e>t?v.GeometryUtil.formattedNumber(_(e,o,r),n[r])+" "+a:v.GeometryUtil.formattedNumber(e,n[o])+" "+i};var k=v.GeometryUtil.readableDistance;v.GeometryUtil.readableDistance=function(e,t,o,r,n,i){if(!i)return k.apply(null,arguments);if("Bearing"===i.geomType)return i.bearing;var a=v.Util.extend({},M,n),s=i.uom.length,l=s.unit,c=s.label,p=v.GeometryUtil.formattedNumber(_(e,"m",l),a[l])+" "+c;return i.useTreshold&&(t&&(p=v.getMeasureWithTreshold(e,1e3,"m","km",a,"m","km")),"mi"===l&&(p=v.getMeasureWithTreshold(_(e,"m","yd"),1760,"yd","mi",a,"yd","mi"))),p};var E=v.GeometryUtil.readableArea;v.GeometryUtil.readableArea=function(e,t,o,r){if(!r)return E.apply(null,arguments);var n=r.uom.area,i=n.unit,a=n.label,s=v.Util.extend({},M,o),l=v.GeometryUtil.formattedNumber(_(e,"sqm",i),s[i])+" "+a;return r.useTreshold&&(t&&(l=v.getMeasureWithTreshold(e,1e6,"sqm","sqkm",s,"m²","km²")),"sqmi"===i&&(l=v.getMeasureWithTreshold(_(e,"sqm","sqyd"),3097600,"sqyd","sqmi",s,"yd²","mi²"))),l};var T=v.Draw.Polygon.prototype._getMeasurementString;v.Draw.Polygon.prototype._getMeasurementString=function(){if(!this.options.uom)return T.apply(this,arguments);var e=this._area,t="";if(!e&&!this.options.showLength)return null;if(this.options.showLength&&(t=v.Draw.Polyline.prototype._getMeasurementString.call(this)),e){var o={uom:this.options.uom,useTreshold:this.options.useTreshold};t+=this.options.showLength?"<br>":""+v.GeometryUtil.readableArea(e,this.options.metric,this.options.precision,o)}return t};var D=v.Draw.Polyline.prototype._getMeasurementString;v.Draw.Polyline.prototype._getMeasurementString=function(){if(!this.options.uom)return D.apply(this,arguments);var e,t=this._currentLatLng,o=this._markers[this._markers.length-1].getLatLng();e=v.GeometryUtil.isVersion07x()?o&&t&&t.distanceTo?this._measurementRunningTotal+t.distanceTo(o)*(this.options.factor||1):this._measurementRunningTotal||0:o&&t?this._measurementRunningTotal+this._map.distance(t,o)*(this.options.factor||1):this._measurementRunningTotal||0;var r={uom:this.options.uom,useTreshold:this.options.useTreshold,geomType:this.options.geomType,bearing:this.options.bearing?x(this.options.bearing,this.options.trueBearing):0};return v.GeometryUtil.readableDistance(e,this.options.metric,this.options.feet,this.options.nautic,this.options.precision,r)};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,o,r,n=u(s);function s(){var e;l(this,s);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return y(d(e=n.call.apply(n,[this].concat(o))),"onDrawStart",(function(){e.props.map.off("click",e.restartDrawing,d(e)),e.removeArcLayer(),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawing=!0})),y(d(e),"onDrawCreated",(function(t){e.drawing=!1,e.props.map.addLayer(t.layer),e.lastLayer=t.layer;var o=e.lastLayer&&e.lastLayer.toGeoJSON()||{};if("LineString"===e.props.measurement.geomType&&(o=b({},o,{geometry:b({},o.geometry,{coordinates:P(o.geometry.coordinates)})})),"Point"===e.props.measurement.geomType){var r=e.drawControl._marker.getLatLng(),n={x:r.lng,y:r.lat,srs:"EPSG:4326"},i=b({},e.props.measurement,{point:n,feature:o});e.props.changeMeasurementState(i)}else{var a=b({},e.props.measurement,{feature:o});e.props.changeMeasurementState(a)}e.props.measurement.lineMeasureEnabled&&e.lastLayer&&e.addArcsToMap([o]),setTimeout((function(){e.props.map.off("click",e.restartDrawing,d(e)),e.props.map.on("click",e.restartDrawing,d(e))}),100)})),y(d(e),"onDrawVertex",(function(){var t=e.drawControl._markers||[];"Bearing"===e.props.measurement.geomType&&t.length>=2?setTimeout((function(){e.drawControl._markers=w(e.drawControl._markers,0,2),e.drawControl._poly._latlngs=w(e.drawControl._poly._latlngs,0,2),e.drawControl._poly._originalPoints=w(e.drawControl._poly._originalPoints,0,2),e.updateMeasurementResults(),e.drawControl._finishShape(),e.drawControl.disable()}),100):e.updateMeasurementResults()})),y(d(e),"addArcsToMap",(function(t){e.removeLastLayer();var o=t.map((function(e){return b({},e,{geometry:b({},e.geometry,{coordinates:P(e.geometry.coordinates)})})}));e.arcLayer=v.geoJson(o,{style:{color:"#ffcc33",opacity:1,weight:1,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}),e.props.map.addLayer(e.arcLayer),o&&o.length>0&&e.arcLayer.addData(o)})),y(d(e),"updateMeasurementResults",(function(){if(e.drawing&&e.drawControl){var t=0,o=0,r=0,n=e.drawControl._currentLatLng;if("LineString"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>1){var i=e.drawControl._markers.reduce((function(e,t){var o=t.getLatLng(),r=o.lng,n=o.lat;return[].concat(a(e),[[r,n]])}),[]);t=L(i,e.props.measurement.lengthFormula)}else if("Polygon"===e.props.measurement.geomType&&e.drawControl._poly){var s=[].concat(a(e.drawControl._poly.getLatLngs()),[n]);o=v.GeometryUtil.geodesicArea(s)}else"Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0&&(r=e.calculateBearing());var l=b({},e.props.measurement,{point:null,len:t,area:o,bearing:r});e.props.changeMeasurementState(l)}})),y(d(e),"restartDrawing",(function(){e.props.map.off("click",e.restartDrawing,d(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable(),e.props.map.removeLayer(e.lastLayer),e.drawControl.enable(),e.drawing=!0})),y(d(e),"addDrawInteraction",(function(t){if(e.removeDrawInteraction(),e.props.map.on("draw:created",e.onDrawCreated,d(e)),e.props.map.on("draw:drawstart",e.onDrawStart,d(e)),e.props.map.on("draw:drawvertex",e.onDrawVertex,d(e)),e.props.map.on("mousemove",e.updateBearing,d(e)),e.props.updateOnMouseMove&&e.props.map.on("mousemove",e.updateMeasurementResults,d(e)),"Point"===t.measurement.geomType)e.drawControl=new v.Draw.Marker(e.props.map,{repeatMode:!1});else if("LineString"===t.measurement.geomType||"Bearing"===t.measurement.geomType){var o=e.uomLengthOptions(t);e.drawControl=new v.Draw.Polyline(e.props.map,i(i({shapeOptions:{color:"#ffcc33",weight:2},showLength:!0,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},o),{},{repeatMode:!1,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),trueBearing:t.measurement.trueBearing}))}else if("Polygon"===t.measurement.geomType){var r=e.uomAreaOptions(t);e.drawControl=new v.Draw.Polygon(e.props.map,i(i({shapeOptions:{color:"#ffcc33",weight:2,fill:"rgba(255, 255, 255, 0.2)"},showArea:!0,allowIntersection:!1,showLength:!1,repeatMode:!1,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},r),{},{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}e.drawControl.enable()})),y(d(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.drawControl.disable(),e.drawControl=null,e.removeLastLayer(),e.removeArcLayer(),e.props.map.off("draw:created",e.onDrawCreated,d(e)),e.props.map.off("draw:drawstart",e.onDrawStart,d(e)),e.props.map.off("draw:drawvertex",e.onDrawVertex,d(e)),e.props.map.off("mousemove",e.updateBearing,d(e)),e.props.map.off("click",e.restartDrawing,d(e)),e.props.updateOnMouseMove&&e.props.map.off("mousemove",e.updateMeasurementResults,d(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),y(d(e),"removeLastLayer",(function(){e.lastLayer&&e.props.map.removeLayer(e.lastLayer)})),y(d(e),"removeArcLayer",(function(){e.arcLayer&&e.props.map.removeLayer(e.arcLayer)})),y(d(e),"uomLengthOptions",(function(e){var t=e.uom.length.unit;return{metric:"m"===t||"km"===t,nautic:"nm"===t,feet:"ft"===t}})),y(d(e),"uomAreaOptions",(function(e){var t=e.uom.area.unit;return{metric:"sqm"===t||"sqkm"===t,nautic:"sqnm"===t,feet:"sqft"===t}})),y(d(e),"calculateBearing",(function(){var t,o=e.drawControl._currentLatLng,r=e.drawControl._markers,n=[r[0].getLatLng().lng,r[0].getLatLng().lat];return 1===r.length?t=[o.lng,o.lat]:2===r.length&&(t=[r[1].getLatLng().lng,r[1].getLatLng().lat]),n=O(n,"EPSG:4326",e.props.projection),t=O(t,"EPSG:4326",e.props.projection),j(n,t,e.props.projection)})),y(d(e),"updateBearing",(function(){if("Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0){var t=e.props.measurement&&e.props.measurement.trueBearing;e.drawControl.setOptions({bearing:e.calculateBearing(),trueBearing:t})}})),e}return t=s,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if((e&&e.uom&&e.uom.length&&e.uom.length.unit)!==(this.props&&this.props.uom&&this.props.uom.length&&this.props.uom.length.unit)&&this.drawControl){var t=this.uomLengthOptions(e);this.drawControl.setOptions(i(i({},t),{},{uom:e.uom}))}if((e&&e.uom&&e.uom.area&&e.uom.area.unit)!==(this.props&&this.props.uom&&this.props.uom.area&&this.props.uom.area.unit)&&this.drawControl){var o=this.uomAreaOptions(e);this.drawControl.setOptions(i(i({},o),{},{uom:e.uom}))}(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&this.props.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){var e=this.props.messages||!!this.context.messages&&this.context.messages.drawLocal;return e&&(v.drawLocal=e),null}}])&&c(t.prototype,o),r&&c(t,r),s}(g.Component);y(A,"displayName","MeasurementSupport"),y(A,"propTypes",{map:h.object,metric:h.bool,feet:h.bool,nautic:h.bool,enabled:h.bool,useTreshold:h.bool,projection:h.string,measurement:h.object,changeMeasurementState:h.func,messages:h.object,uom:h.object,updateOnMouseMove:h.bool}),y(A,"contextTypes",{messages:h.object}),y(A,"defaultProps",{uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},updateOnMouseMove:!1,metric:!0,nautic:!1,useTreshold:!1,feet:!1}),e.exports=A},"./MapStore2/web/client/components/map/leaflet/Overview.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=c(e);if(t){var n=c(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return l(this,o)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=o("./node_modules/prop-types/index.js"),f=o("./node_modules/react/index.js"),d=o("./node_modules/leaflet-minimap/dist/Control.MiniMap.min.js"),m=o("./MapStore2/web/client/libs/leaflet.js"),y=o("./MapStore2/web/client/utils/leaflet/Layers.js"),h=o("./node_modules/object-assign/index.js");o("./MapStore2/web/client/components/map/leaflet/overview.css");var g={position:"bottomright",width:300,height:150,collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,zoomLevelFixed:null,zoomAnimation:!1,toggleDisplay:!0,autoToggleDisplay:!1,minimized:!0},b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,o,r,l=s(c);function c(){return n(this,c),l.apply(this,arguments)}return t=c,(o=[{key:"componentDidMount",value:function(){var e=h({},g,this.props.overviewOpt);if(this.props.layers){var t=[];this.props.layers.forEach((function(e){t.push(y.createLayer(e.type,e.options||{}))})),1===t.length?this.overview=new d(t[0],e):t.length>1&&(this.overview=new d(m.layerGroup(t),e))}this.props.map&&this.overview&&this.overview.addTo(this.props.map)}},{key:"render",value:function(){return null}}])&&i(t.prototype,o),r&&i(t,r),c}(f.Component);p(b,"displayName","Overview"),p(b,"propTypes",{map:u.object,overviewOpt:u.object,layers:u.array}),p(b,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]}),e.exports=b},"./MapStore2/web/client/components/map/leaflet/PopupSupport.jsx":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return _}));var r=o("./node_modules/react/index.js"),n=o.n(r),i=o("./node_modules/react-dom/index.js"),a=o.n(i),s=o("./node_modules/prop-types/index.js"),l=o.n(s),c=o("./MapStore2/web/client/libs/leaflet.js"),p=o.n(c),u=o("./node_modules/lodash/isString.js"),f=o.n(u),d=o("./MapStore2/web/client/utils/PopupUtils.js"),m=o("./MapStore2/web/client/components/map/popups/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){P(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=L(e);if(t){var n=L(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return O(this,o)}}function O(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var C=function(e,t){var o=new MutationObserver((function(){e.update()}));e.once("remove",(function(){o&&o.disconnect(),o=null})),o.observe(t,{attributes:!0,childList:!0,subtree:!0})},_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,o,r,i=S(s);function s(){var e;b(this,s);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return P(j(e=i.call.apply(i,[this].concat(o))),"updatePopup",(function(){(e._popups||[]).map((function(e){return e.popup.update()}))})),P(j(e),"popupClose",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.target,r=(o=void 0===o?{}:o).options,n=(r=void 0===r?{}:r).id;n&&e.props.onPopupClose(n)})),P(j(e),"preparePopups",(function(){var t=e.props,o=t.popups,r=void 0===o?[]:o,n=t.map,i=e.props.map.getSize();return(e._popups||[]).forEach((function(t){var o=t.popup;o.off("remove",e.popupClose),o&&e.props.map.removeLayer(o)})),e._popups=r.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=.9*i.x,r=.9*i.y,a=t.id,s=t.position.coordinates,l=t.component,c=t.content,u=t.className,f=t.maxWidth,m=void 0===f?o:f,y=t.maxHeight,h=void 0===y?r:y,b=t.autoPan,v=void 0===b||b,w=t.offset,S=void 0===w?[0,7]:w,O=m>o?o:m,j=h>r?r:h,L=d.b(a,u);L.setAttribute("style","max-width: ".concat(O,"px; max-height: ").concat(j,"px")),d.a(L,c);var P=p.a.popup({id:a,autoClose:!1,closeOnClick:!1,autoPan:v,autoPanPadding:p.a.point(70,70),maxWidth:O,maxHeight:j,className:"ms-leaflet-popup",offset:S}).setContent(L);return P.once("remove",e.popupClose),l&&C(P,L),P.setLatLng(s),n.addLayer(P),g({popup:P},t)})),e._popups})),P(j(e),"stopPropagationOnMouseMove",(function(e){e.stopPropagation()})),P(j(e),"fireMouseOutEvent",(function(){e.props.map.fireEvent("mouseout")})),e}return t=s,(o=[{key:"componentWillMount",value:function(){this.props.map&&(this.props.map.getContainer().querySelector(".leaflet-popup-pane").addEventListener("mousemove",this.stopPropagationOnMouseMove),this.props.map.getContainer().querySelector(".leaflet-popup-pane").addEventListener("mouseenter",this.fireMouseOutEvent))}},{key:"componentDidMount",value:function(){this.props.map&&this.props.map.on("resize",this.updatePopup)}},{key:"shouldComponentUpdate",value:function(e){return e.popups!==this.props.popups}},{key:"componentWillUnmount",value:function(){var e=this;(this._popups||[]).forEach((function(t){var o,r,n=t.popup;n.off("remove",e.popupClose),n&&(null===(o=e.props.map)||void 0===o||null===(r=o.removeLayer)||void 0===r||r.call(o,n))})),this.props.map&&(this.props.map.off("resize",this.updatePopup),this.props.map.getContainer().removeEventListener("mousemove",this.stopPropagationOnMouseMove),this.props.map.getContainer().removeEventListener("mouseenter",this.fireMouseOutEvent))}},{key:"renderPopups",value:function(){return this.preparePopups().filter((function(e){return!!e.component})).map((function(e){var t=e.popup,o=e.props,r=void 0===o?{}:o,i=e.component,s=e.id,l=t.getContent(),c=f()(i)&&m.default[i]||i,p=n.a.isValidElement(c)&&c||n.a.createElement(c,r);return l?a.a.createPortal(p,l,s):null}))}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderPopups())}}])&&v(t.prototype,o),r&&v(t,r),s}(n.a.Component);P(_,"propTypes",{map:l.a.object,popups:l.a.arrayOf(l.a.object),onPopupClose:l.a.func}),P(_,"defaultProps",{popups:[],onPopupClose:function(){}})},"./MapStore2/web/client/components/map/leaflet/ScaleBar.jsx":function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=c(e);if(t){var n=c(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return l(this,o)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=o("./node_modules/prop-types/index.js"),f=o("./node_modules/react/index.js"),d=o("./MapStore2/web/client/libs/leaflet.js"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,o,r,l=s(c);function c(){return n(this,c),l.apply(this,arguments)}return t=c,(o=[{key:"componentDidMount",value:function(){if(this.scalebar=d.control.scale(this.props),this.props.map&&(this.scalebar.addTo(this.props.map),this.props.container)){document.querySelector(this.props.container).appendChild(this.scalebar.getContainer());var e=document.querySelector(".leaflet-control-container .leaflet-control-scale-line");e&&e.parentNode&&e.parentNode.removeChild(e)}}},{key:"componentWillUnmount",value:function(){if(this.props.container&&this.scalebar&&this.scalebar.getContainer())try{document.querySelector(this.props.container).removeChild(this.scalebar.getContainer())}catch(e){}}},{key:"render",value:function(){return null}}])&&i(t.prototype,o),r&&i(t,r),c}(f.Component);p(m,"propTypes",{map:u.object,position:u.oneOf(["topleft","topright","bottomleft","bottomright"]),maxWidth:u.number,metric:u.bool,imperial:u.bool,updateWhenIdle:u.bool,container:u.string}),p(m,"defaultProps",{map:null,position:"bottomleft",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}),e.exports=m},"./MapStore2/web/client/components/map/leaflet/SingleClick.js":function(e,t,o){var r=o("./MapStore2/web/client/libs/leaflet.js");r.Evented.addInitHook((function(){this._singleClickTimeout=null,this.on("click",this._scheduleSingleClick,this),this.on("dblclick dragstart zoomstart",this._cancelSingleClick,this)})),r.Evented.include({_cancelSingleClick:function(){setTimeout(this._clearSingleClickTimeout.bind(this),0)},_scheduleSingleClick:function(e){this._clearSingleClickTimeout(),this._singleClickTimeout=setTimeout(this._fireSingleClick.bind(this,e),this.options.singleClickTimeout||500)},_fireSingleClick:function(e){e.originalEvent._stopped||this.fire("singleclick",r.Util.extend(e,{type:"singleclick"}))},_clearSingleClickTimeout:function(){null!==this._singleClickTimeout&&(clearTimeout(this._singleClickTimeout),this._singleClickTimeout=null)}})},"./MapStore2/web/client/components/map/leaflet/img/toggle.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAH1JREFUOI3t0DEKAjEQheFP8ERWqfUCeg9rL+adbKxkYRFEY7ERhkUhCZb7wyuGYX5ewkIvK6z/ITpjxOHHPtWKrsh4fJEl3GpF29LoI9sHSS6pZjeTnTD0iOayjFevCI7hOKaJZHpObNIsih/b3WiDSzgaS+5lfrY0Wph4A4kFM89VzdVFAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/map/leaflet/img/toggle.svg":function(e,t,o){e.exports=o.p+"toggle.svg"},"./MapStore2/web/client/components/map/leaflet/overview.css":function(e,t,o){var r=o("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/leaflet/overview.css");"string"==typeof r&&(r=[[e.i,r,""]]);o("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)},"./MapStore2/web/client/plugins/map/leaflet/index.js":function(e,t,o){e.exports={LMap:o("./MapStore2/web/client/components/map/leaflet/Map.jsx"),Layer:o("./MapStore2/web/client/components/map/leaflet/Layer.jsx"),Feature:o("./MapStore2/web/client/components/map/leaflet/Feature.jsx"),Locate:o("./MapStore2/web/client/components/map/leaflet/Locate.jsx"),MeasurementSupport:o("./MapStore2/web/client/components/map/leaflet/MeasurementSupport.jsx"),Overview:o("./MapStore2/web/client/components/map/leaflet/Overview.jsx"),ScaleBar:o("./MapStore2/web/client/components/map/leaflet/ScaleBar.jsx"),DrawSupport:o("./MapStore2/web/client/components/map/leaflet/DrawSupport.jsx"),HighlightFeatureSupport:o("./MapStore2/web/client/components/map/leaflet/HighlightFeatureSupport.jsx"),PopupSupport:o("./MapStore2/web/client/components/map/leaflet/PopupSupport.jsx").default}},"./MapStore2/web/client/product/assets/symbols/symbolMissing.svg":function(e,t,o){e.exports=o.p+"symbolMissing.svg"},"./MapStore2/web/client/utils/ColorUtils.js":function(e,t,o){var r=o("./node_modules/tinycolor2/tinycolor.js"),n=o("./node_modules/lodash/lodash.js").toNumber,i={decToHex:function(e){var t=parseInt(e,10);return t=isNaN(t)?0:t,"0123456789ABCDEF".charAt(((t=t>255||t<0?0:t)-t%16)/16)+"0123456789ABCDEF".charAt(t%16)},rgbToHex:function(e,t,o){return e instanceof Array?i.rgbToHex(e[0],e[1],e[2]):"#"+i.decToHex(e)+i.decToHex(t)+i.decToHex(o)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,o){if(e instanceof Array)return i.rgbToHsv(e[0],e[1],e[2]);var r,n,a,s,l,c=e/255,p=t/255,u=o/255;switch(r=Math.min(Math.min(c,p),u),a=(n=Math.max(Math.max(c,p),u))-r,n){case r:s=0;break;case c:s=60*(p-u)/a,p<u&&(s+=360);break;case p:s=60*(u-c)/a+120;break;case u:s=60*(c-p)/a+240}return l=0===n?0:1-r/n,[Math.round(s),l,n]},distributedColorsHEX:function(e){for(var t=360/(e-1),o=[],r=function e(t,o,r){var n=e(t,o,r);return i.rgbToHex(n)},n=0;n<e;n++)o.push(r(t*n,.57,.63));return o},sameToneRangeColors:function(e,t,o,r){var n=e;isNaN(parseFloat(e))&&(n=i.hexToHsv(e)[0]);var a=.5/(o-1),s=t/(o-1),l=[];1===o&&(a=.5,s=t/2);for(var c=0;c<o;c++){var p=n+c*s-t/2,u=a*c+.3,f=u;r&&(p=r.h||p,u=r.s||u,f=r.v||f),l.push(i.hsvToHex(p,u,f,c))}return l},hsvToRgb:function(e,t,o){if(e instanceof Array)return i.hsvToRgb(e[0],e[1],e[2]);var r,n,a,s=Math.floor(e/60%6),l=e/60-s,c=o*(1-t),p=o*(1-l*t),u=o*(1-(1-l)*t);switch(s){case 0:r=o,n=u,a=c;break;case 1:r=p,n=o,a=c;break;case 2:r=c,n=o,a=u;break;case 3:r=c,n=p,a=o;break;case 4:r=u,n=c,a=o;break;case 5:r=o,n=c,a=p}return[i.realToDec(r),i.realToDec(n),i.realToDec(a)]},hsvToHex:function(e,t,o){var r=i.hsvToRgb(e,t,o);return i.rgbToHex(r)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var o=i.hexToRgb(t);return i.rgbToHsv(o)}return null},hexToRgb:function(e){var t,o,r,n=e;return"#"===n.charAt(0)&&(n=e.substring(1)),t=n.charAt(0)+n.charAt(1),o=n.charAt(2)+n.charAt(3),r=n.charAt(4)+n.charAt(5),[parseInt(t,16),parseInt(o,16),parseInt(r,16)]},colorToHexStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return r(e).toHexString()},colorToRgbaStr:function(e,t,o){var i=r(e);return e&&i.setAlpha(n(void 0!==t?t:i.getAlpha())).toRgbString()||o}};e.exports=i},"./MapStore2/web/client/utils/PopupUtils.js":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return s}));var r=o("./node_modules/uuid/index.js"),n=o.n(r),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n()(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms-map-popup",o=document.createElement("div");return o.setAttribute("id",e+"-map-popup"),o.setAttribute("class",t),o},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("<")},s=function(e,t){if(!t)return e;if(t instanceof Node){var o=document.createDocumentFragment();o.appendChild(t),e.appendChild(o)}else a(t)?e.innerHTML=t:e.append(document.createTextNode(String(t)));return e}},"./MapStore2/web/client/utils/VectorStyleUtils.js":function(e,t,o){function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a=o("./node_modules/lodash/lodash.js").isNil,s=o("./MapStore2/web/client/utils/ImmutableUtils.js").set,l=o("./MapStore2/web/client/utils/ColorUtils.js").colorToRgbaStr,c=o("./node_modules/axios/index.js"),p=o("./node_modules/geostyler-sld-parser/build/dist/SldStyleParser.js").default,u=o("./node_modules/geostyler-geocss-parser/build/dist/GeoCSSStyleParser.js").default,f={sld:new p,css:new u},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.filter((function(t){return!a(e[t])})).length>0},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["color","opacity","dashArray","dashOffset","lineCap","lineJoin","weight"];return d(e,t)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["fillColor","fillOpacity"];return d(e,t)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["label","font","fontFamily","fontSize","fontStyle","fontWeight","textAlign","textRotationDeg"];return d(e,t)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["radius"];return d(e,t)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["iconGlyph","iconShape","iconUrl"];return d(e,t)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["symbolUrl"];return d(e,t)},w={centerPoint:{type:"Point",func:function(){}},lineToArc:{type:"LineString",func:function(){}},startPoint:{type:"Point",func:function(){}},endPoint:{type:"Point",func:function(){}}},S=function(e){var t,o=0;if(0===e.length)return o;for(t=0;t<e.length;t++)o=(o<<5)-o+e.charCodeAt(t),o|=0;return o},O={},j=function(e,t){if(!e||!t)throw new Error("specify all the params: sha, style");O[e]=t},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";return O[e]&&O[e][t]},P=function(e){if(e)return S(JSON.stringify(e));throw new Error("hashAndStringify: specify mandatory params: style")},C=function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return v(e)&&e.symbolUrl?c.get(t,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(t){var o=window.URL||window.webkitURL||window,r=(new DOMParser).parseFromString(t.data,"image/svg+xml").firstElementChild;r.setAttribute("fill",e.fillColor||"#FFCC33"),r.setAttribute("fill-opacity",a(e.fillOpacity)?.2:e.fillOpacity),r.setAttribute("stroke",l(e.color||"#FFCC33",a(e.opacity)?1:e.opacity)),r.setAttribute("stroke-opacity",a(e.opacity)?1:e.opacity),r.setAttribute("stroke-width",e.weight||1),r.setAttribute("width",e.size||32),r.setAttribute("height",e.size||32),r.setAttribute("stroke-dasharray",e.dashArray||"none");var i=new Blob([C(r)],{type:"image/svg+xml;charset=utf-8"}),s=o.createObjectURL(i),c=document.createElement("canvas");c.width=e.size,c.height=e.size;var p=c.getContext("2d"),u=new Image;u.src=s;var f="",d=P(e);return u.onload=function(){try{p.drawImage(u,c.width/2-u.width/2,c.height/2-u.height/2),f=c.toDataURL("image/png"),c=null,j(d,{style:n(n({},e),{},{symbolUrlCustomized:s}),base64:f})}catch(e){return}},j(d,{style:n(n({},e),{},{symbolUrlCustomized:s}),svg:r,base64:f}),s})).catch((function(){return o("./MapStore2/web/client/product/assets/symbols/symbolMissing.svg")})):new Promise((function(e){e(null)}))};e.exports={getGeometryFunction:function(e,t){return w[e]&&w[e][t]},SymbolsStyles:O,registerStyle:j,fetchStyle:L,hashCode:S,hashAndStringify:P,domNodeToString:C,createSvgUrl:_,registerGeometryFunctions:function(e,t,o){if(!(e&&t&&o))throw new Error("specify all the params: functionName, func, type");w[e]={func:t,type:o}},geometryFunctions:w,getStylerTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(e)?"Marker":v(e)?"Symbol":h(e)?"Text":g(e)||"Circle Style"===e.title?"Circle":y(e)?"Polygon":m(e)?"Polyline":""},isAttrPresent:d,addOpacityToColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#FFCC33",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return s("a",t,e)},isMarkerStyle:b,isSymbolStyle:v,isTextStyle:h,isCircleStyle:g,isStrokeStyle:m,isFillStyle:y,getSymbolsStyles:function(){return O},setSymbolsStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O=e},createStylesAsync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return v(e)&&!L(P(e))?_(e,e.symbolUrl||e.symbolUrlCustomized).then((function(t){return t?n(n({},e),{},{symbolUrlCustomized:t}):L(P(e))})).catch((function(){return n(n({},e),{},{symbolUrlCustomized:o("./MapStore2/web/client/product/assets/symbols/symbolMissing.svg")})})):new Promise((function(t){t(v(e)?L(P(e)):e)}))}))},getStyleParser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sld";return f[e]}}},"./MapStore2/web/client/utils/leaflet/DrawSupportUtils.js":function(e,t,o){"use strict";o.r(t),o.d(t,"boundsToOLExtent",(function(){return r})),o.d(t,"fromLeafletFeatureToQueryform",(function(){return n}));var r=function(e){return[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]},n=function(e){var t=e.toGeoJSON(),o=e.getBounds(),n=r(o),i=o.getCenter(),a=e.getRadius?e.getRadius():0,s=t.features[0].geometry.coordinates;return{type:t.features[0].geometry.type,extent:n,center:i,coordinates:s,radius:a,projection:"EPSG:4326"}}},"./MapStore2/web/client/utils/leaflet/Icons.js":function(e,t,o){var r=o("./MapStore2/web/client/libs/leaflet.js"),n=o("./node_modules/lodash/lodash.js").isFunction;o("./node_modules/leaflet-extra-markers/src/assets/js/leaflet.extra-markers.js"),o("./node_modules/leaflet-extra-markers/dist/css/leaflet.extra-markers.min.css"),e.exports={extra:{getIcon:function(e){var t=e.iconPrefix||"fa";return r.ExtraMarkers.icon({icon:t+"-"+e.iconGlyph,markerColor:e.iconColor||"blue",shape:e.iconShape||"square",prefix:t,extraClasses:e.highlight?"marker-selected":""})}},standard:{getIcon:function(e){return r.icon({iconUrl:e.iconUrl||e.symbolUrlCustomized||e.symbolUrl,shadowUrl:e.shadowUrl,iconSize:e.iconSize,shadowSize:e.shadowSize,iconAnchor:e.iconAnchor,shadowAnchor:e.shadowAnchor,popupAnchor:e.popupAnchor})}},html:{getIcon:function(e,t){return r.divIcon(n(e.html)?e.html(t):e.html)}}}},"./MapStore2/web/client/utils/leaflet/Vector.js":function(e,t,o){function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var a=o("./MapStore2/web/client/libs/leaflet.js"),s=o("./MapStore2/web/client/utils/leaflet/Icons.js"),l=o("./node_modules/object-assign/index.js"),c=o("./MapStore2/web/client/utils/VectorStyleUtils.js"),p=c.isMarkerStyle,u=c.isSymbolStyle,f=function e(t,o,r){for(var n,i=[],a=t.length,s=0;s<a;s++)n=o?e(t[s],o-1,r):(r||this.coordsToLatLng)(t[s]),i.push(n);return i},d=function(e){if("GeometryCollection"===e.geometry.type)return!1;var t=e.style;return t&&(p(t)||u(t)||t.iconUrl||t.iconGlyph)},m={coordsToLatLngF:function(e){return new a.LatLng(e[1],e[0],e[2])},coordsToLatLngs:f,isMarker:d,getPointLayer:function(e,t,o,r){return e?e(t,o):m.pointToLayer(o,t,n(n({},r.style),{},{styleName:r.styleName,highlight:r.highlight}))},pointToLayer:function(e,t,o){var r=o.Point||o.MultiPoint||o,n=function(e,t){if(e&&e.iconGlyph){var o=e.iconLibrary||"extra";if(s[o])return s[o].getIcon(e)}return e&&e.html&&t?s.html.getIcon(e,t):e&&e.iconUrl||e.symbolUrlCustomized||e.symbolUrl?s.standard.getIcon(e):null}(r,t);return n?a.marker(e,{icon:n,opacity:r&&r.opacity||1}):a.marker(e,{opacity:r&&r.opacity||1})},toValidGeoJSON:function(){},createTextPointMarkerLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pointToLayer,o=e.geojson,r=e.latlng,i=e.options,s=e.style,l=void 0===s?{}:s,c=e.highlight,p=void 0!==c&&c;if(o.properties&&o.properties.isText){var u=a.divIcon({html:'<span style="\n                font:'.concat(l.font,";\n                color:").concat(l.fillColor,";\n                -webkit-text-stroke-width:",1,"px;\n                -webkit-text-stroke-color:").concat(l.color,';">').concat(o.properties.valueText,"</span>"),className:""});return new a.Marker(r,{icon:u})}return m.getPointLayer(t,o,r,n(n({},i),{},{style:l,highlight:p}))},createPolygonCircleLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geojson,o=e.style,r=void 0===o?{}:o,i=e.latlngs,s=void 0===i?[]:i,l=e.coordsToLatLng,c=void 0===l?function(){}:l;if(t.properties&&t.properties.isCircle){var p=c(t.properties.center);return a.circle(p,n(n({},r),{},{radius:t.properties.radius}))}return new a.Polygon(s,r)},geometryToLayer:function(e,t){var o,r="Feature"===e.type?e.geometry:e,i=r?r.coordinates:null,s=[],c=n({styleName:t.styleName,style:t.style&&t.style[0]||t.style},e),p=t&&!d(c)?function(e,t){return"marker"===c.styleName?a.marker(t,c.style):a.circleMarker(t,c.style&&c.style[0]||c.style)}:null,u=t&&t.coordsToLatLng||m.coordsToLatLngF;if(!i&&!r)return null;var y,h,g,b,v=c.style||l({},t.style&&t.style[r.type]||t.style,{highlight:t.style&&t.style.highlight});switch(r.type){case"Point":return y=u(i),o=m.createTextPointMarkerLayer({pointToLayer:p,geojson:e,latlng:y,options:t,style:v,highlight:v&&v.highlight});case"MultiPoint":for(g=0,b=i.length;g<b;g++)y=u(i[g]),(o=m.createTextPointMarkerLayer({pointToLayer:p,geojson:e,latlng:y,options:t,style:v,highlight:v&&v.highlight})).msId=e.id,s.push(o);return new a.FeatureGroup(s);case"LineString":return v=m.updateHighlightStyle(v),h=f(i,"LineString"===r.type?0:1,u),(o=new a.Polyline(h,v)).msId=e.id,o;case"MultiLineString":for(v=m.updateHighlightStyle(v),g=0,b=(h=f(i,"LineString"===r.type?0:1,u)).length;g<b;g++)(o=new a.Polyline(h[g],v)).msId=e.id,o&&s.push(o);return new a.FeatureGroup(s);case"Polygon":return v=m.updateHighlightStyle(v),h=f(i,"Polygon"===r.type?1:2,u),(o=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:h,coordsToLatLng:u})).msId=e.id,o;case"MultiPolygon":for(v=m.updateHighlightStyle(v),g=0,b=(h=f(i,"Polygon"===r.type?1:2,u)).length;g<b;g++)(o=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:h,coordsToLatLng:u})).msId=e.id,o&&s.push(o);return new a.FeatureGroup(s);case"GeometryCollection":for(g=0,b=r.geometries.length;g<b;g++)(o=m.geometryToLayer({geometry:r.geometries[g],type:"Feature",properties:e.properties},t))&&s.push(o);return new a.FeatureGroup(s);default:throw new Error("Invalid GeoJSON object.")}},updateHighlightStyle:function(e){var t=e.highlight;return t?l({},e,{dashArray:t?"10":null}):e}};e.exports=m},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/leaflet/overview.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .leaflet-control-minimap {\n    border:solid rgba(255, 255, 255, 1.0) 4px;\n    box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n    border-radius: 3px;\n    background: #f8f8f9;\n    transition: all .2s;\n}\n.msgapi .leafletbottom.leafletright, .msgapi .leaflet-control-minimap{\n    position:relative;\n    bottom:5px;\n}\n.msgapi .leaflet-control-minimap a {\n    background-color: rgba(255, 255, 255, 1.0);\n    background-repeat: no-repeat;\n    z-index: 99999;\n    transition: all .2s;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomright {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n    border-radius: 0px;\n    bottom: -3px;\n    right: -3px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topleft {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomleft {\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topright {\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display{\n    background-image: url("+o("./MapStore2/web/client/components/map/leaflet/img/toggle.svg")+");\n    background-size: cover;\n    position: absolute;\n    border-radius: 3px 0px 0px 0px;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap-toggle-display{\n    background-image: url("+o("./MapStore2/web/client/components/map/leaflet/img/toggle.png")+");\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomright {\n    bottom: 0;\n    right: 0;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topleft{\n    top: 0;\n    left: 0;\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomleft{\n    bottom: 0;\n    left: 0;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topright{\n    top: 0;\n    right: 0;\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n}\n\n/* Old IE */\n.msgapi .leaflet-oldie .leaflet-control-minimap {\n    border: 1px solid #999;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a {\n    background-color: #fff;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a.minimized {\n    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n}\n",""])}}]);