(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[9537],{47805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{cqlToOgc:()=>A,escapeCQLStrings:()=>R,checkOperatorValidity:()=>D,isCrossLayerFilterValid:()=>M,setupCrossLayerFilterDefaults:()=>_,ogcDateField:()=>q,ogcListField:()=>U,ogcStringField:()=>H,ogcBooleanField:()=>V,ogcNumberField:()=>K,processOGCSimpleFilterField:()=>W,toOGCFilterParts:()=>Z,toOGCFilter:()=>Y,processOGCFilterGroup:()=>z,processOGCFilterFields:()=>$,getGmlPointElement:()=>J,getGmlPolygonElement:()=>ee,getGmlLineStringElement:()=>te,processOGCGeometry:()=>re,processOGCSpatialFilter:()=>ne,getGetFeatureBase:()=>oe,getCrossLayerCqlFilter:()=>ie,processOGCCrossLayerFilter:()=>ae,toCQLFilter:()=>le,processCQLFilterGroup:()=>ce,getCQLGeometryElement:()=>ue,processCQLSpatialFilter:()=>se,cqlDateField:()=>pe,cqlStringField:()=>fe,cqlBooleanField:()=>ge,cqlNumberField:()=>de,findSubGroups:()=>me,cqlListField:()=>ye,processCQLFilterFields:()=>Oe,processCQLSimpleFilterField:()=>ve,getOgcAllPropertyValue:()=>he,getSLD:()=>we,getWFSFilterData:()=>be,isLikeOrIlike:()=>Te,isFilterEmpty:()=>Fe,isFilterValid:()=>Se,composeAttributeFilters:()=>Le,reprojectFilterInNativeCrs:()=>Ne,normalizeFilterCQL:()=>Ce,mergeFiltersToOGC:()=>Ie});var n=r(65692),o=r(78889),i=r(99321),a=r(89291),l=r(89737),c=r(2245),u=r.n(c),s=r(86267),p=r(27361),f=r.n(p),g=r(14293),d=r.n(g),m=r(52353),y=r.n(m),O=r(1469),v=r.n(O),h=r(13311),w=r.n(h),b=r(30998),T=r.n(b),F=r(47037),S=r.n(F),E=r(85564),L=r.n(E);function N(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x,A=function(e,t){var r=u()(t);return(0,l.Z)(r)((0,a.read)(e))},R=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},D=function(e,t){return!d()(e)&&"isNull"!==t||!y()(e)&&"isNull"===t},M=function(e){return f()(e,"operation",!1)&&f()(e,"collectGeometries.queryCollection.typeName",!1)&&f()(e,"collectGeometries.queryCollection.geometryName",!1)},j=function(e){return'"'+e+'"'},_=function(e){if(!e||!f()(e,"collectGeometries.queryCollection"))return null;if(f()(e,"collectGeometries.queryCollection")){var t=(f()(e,"collectGeometries.queryCollection.filterFields")||[]).filter((function(e){return D(e.value,e.operator)})),r=f()(e,"collectGeometries.queryCollection.groupFields")||[{id:1,index:0,logic:"OR"}];return P(P({},e),{},{collectGeometries:P(P({},e.collectGeometries),{},{queryCollection:P(P({},e.collectGeometries.queryCollection),{},{filterFields:t,groupFields:r})})})}return null},B=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},k={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},q=function(e,t,r,n){var o;if("><"===t){if(r.startDate&&r.endDate){var a=r.startDate.toISOString?r.startDate.toISOString():r.startDate,l=r.endDate.toISOString?r.endDate.toISOString():r.endDate;o=i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+a+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+l+"</"+n+":Literal></"+n+":UpperBoundary>")}}else if(r.startDate){var c=r.startDate.toISOString?r.startDate.toISOString():r.startDate;o=i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+c+"</"+n+":Literal>")}return o},U=function(e,t,r,n){var o;return d()(r)||(o=i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},H=function(e,t,r,n){var o;return D(r,t)&&(o="isNull"===t?i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag):"="===t?i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>"):i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>*"+r+"*</"+n+":Literal>")),o},V=function(e,t,r,n){var o="";return D(r,t)&&"="===t&&""!==r&&(o=i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},K=function(e,t,r,n){var o;if("><"===t)d()(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?d()(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?d()(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o=i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+r.lowBound+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+r.upBound+"</"+n+":Literal></"+n+":UpperBoundary>")):o=i.ogcComparisonOperators["<="](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+r.upBound+"</"+n+":Literal>"):o=i.ogcComparisonOperators[">="](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+r.lowBound+"</"+n+":Literal>");else{var a=d()(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;d()(a)||(o=i.ogcComparisonOperators[t](n,k[n].startTag+e+k[n].endTag+"<"+n+":Literal>"+a+"</"+n+":Literal>"))}return o},W=function(e,t){var r="";switch(e.type){case"date":r=q(e.attribute,e.operator,e.values,t);break;case"number":r=K(e.attribute,e.operator,e.values,t);break;case"string":r=H(e.attribute,e.operator,e.values,t);break;case"boolean":r=V(e.attribute,e.operator,e.values,t);break;case"list":e.values&&e.values.length>0&&(r=e.values.reduce((function(r,n){var o=null===n||"null"===n?"isNull":"=";return r+H(e.attribute,o,n,t)}),""),r=i.ogcLogicalOperators.OR(t,r))}return r},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,r=e.geometryName,n=e.cqlFilter,o=void 0===n?"INCLUDE":n;return"queryCollection('".concat(t,"', '").concat(r,"','").concat(R(o),"')")},Q=function(e){return"collectGeometries(".concat(e,")")},Z=function(e,t,r){var n,a,l,c,u=[];if(e.filterFields&&e.filterFields.length>0)""!==(n=e.groupFields&&e.groupFields.length>0?x.processOGCFilterGroup(e.groupFields[0],e,r):x.processOGCFilterFields(null,e,r))&&u.push(n);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var s=i.ogcLogicalOperators.AND(r,e.simpleFilterFields.map((function(e){return W(e,r)})).join(""));u.push(s)}if(v()(e.spatialField)?(c=w()(e.spatialField,(function(e){return"BBOX"===e.operation})))||(l=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?c=e.spatialField:l=[e.spatialField]),c){if(v()(c.geometry&&c.geometry.extent[0])){var p=c.geometry.extent.reduce((function(e,n){var o=Object.assign({},c);return c.geometry.extent=n,e+x.processOGCSpatialFilter(t,o,r)}),"");a=i.ogcLogicalOperators.OR(r,p)}u.push(a)}else if(l&&(l=l.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var f=l.map((function(e){return x.processOGCSpatialFilter(t,e,r)})).join("");a=l.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,f):f,u.push(a)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var g=P(P({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?g.forEach((function(e){return u.push(x.processOGCCrossLayerFilter(e,r))})):u.push(x.processOGCCrossLayerFilter(g,r))}return e.options&&e.options.cqlFilter&&u.push(A(e.options.cqlFilter,{filterNS:r,wfsVersion:t,gmlVersion:(0,o.wfsToGmlVersion)(t)})),u},Y=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{n=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var u=B(r||"2.0"),s="2.0"===u?"fes":"ogc",p=x.getGetFeatureBase(u,n.pagination,i,a,t&&t.options),f=x.toOGCFilterParts(n,u,s),g="";return f.length>0&&(g="<"+s+":Filter>",1===f.length?g+=f[0]:(g+="<"+s+":And>",f.forEach((function(e){g+=e})),g+="</"+s+":And>"),g+="</"+s+":Filter>"),p+="<wfs:Query ".concat("2.0"===u?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==c&&'srsName="'.concat(c,'"')||"",">"),p+=g,l&&(p+=l.map((function(e){return k[s].startTag+e+k[s].endTag})).join("")),o&&o.sortBy&&o.sortOrder&&(p+="<"+s+":SortBy><"+s+":SortProperty>"+k[s].startTag+o.sortBy+k[s].endTag+"<"+s+":SortOrder>"+o.sortOrder+"</"+s+":SortOrder></"+s+":SortProperty></"+s+":SortBy>"),p+"</wfs:Query></wfs:GetFeature>"},z=function(e,t,r){var n=x.processOGCFilterFields(e,t,r),o=x.findSubGroups(e,t.groupFields);return o.length>0&&o.forEach((function(e){n+=x.processOGCFilterGroup(e,t,r)})),""!==n?i.ogcLogicalOperators[e.logic](r,n):""},$=function(e,t,r){var n=e?t.filterFields.filter((function(t){return t.groupId===e.id&&D(t.value,t.operator)})):t.filterFields.filter((function(e){return D(e.value,e.operator)}));return n.length?n.reduce((function(e,t){var n;switch(t.type){case"date":case"date-time":case"time":n=q(t.attribute,t.operator,t.value,r);break;case"number":n=K(t.attribute,t.operator,t.value,r);break;case"string":n=H(t.attribute,t.operator,t.value,r);break;case"boolean":n=V(t.attribute,t.operator,t.value,r);break;case"list":n=U(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(n=H(t.attribute,t.operator,t.operator,r)),n&&e.push(n),e}),[]).join(""):""},J=function(e,t,r){return(0,n.pointElement)(e,t,(0,o.wfsToGmlVersion)(r))},ee=function(e,t,r){return(0,n.polygonElement)(e,t,(0,o.wfsToGmlVersion)(r))},te=function(e,t,r){return(0,n.lineStringElement)(e,t,(0,o.wfsToGmlVersion)(r))},re=function(e,t){return(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t)},ne=function(e,t,r){if(t.collectGeometries)return x.processOGCCrossLayerFilter(t);var a=k[r].startTag+t.attribute+k[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=(0,n.processOGCGeometry)((0,o.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":var l=t.geometry.extent[0]+" "+t.geometry.extent[1],c=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+l+"</gml:lowerCorner><gml:upperCorner>"+c+"</gml:upperCorner></gml:Envelope>"}return i.ogcSpatialOperators[t.operation](r,a)},oe=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=B(e),a="<wfs:GetFeature ";switch(a+=n?'outputFormat="'+n+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=o.viewParams?' viewParams="'.concat(o.viewParams,'" '):"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=r&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},ie=function(e){return f()(e,"collectGeometries.queryCollection.cqlFilter")||(f()(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&(f()(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&x.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},ae=function(e,t){var r=t||"ogc",n=k[r].startTag+e.attribute+k[r].endTag;if(e.collectGeometries){var o=x.getCrossLayerCqlFilter(e);n+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(o,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(n+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),i.ogcSpatialOperators[e.operation](r,n)},le=function(e){var t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,n,o=[];if(t.filterFields&&t.filterFields.length>0)(r=x.processCQLFilterGroup(t.groupFields[0],t))&&o.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var i=t.simpleFilterFields.reduce((function(e,t){var r=e,n=x.processCQLSimpleFilterField(t);return!1!==n&&(r=e.length>0?e+" AND ("+n+")":"("+n+")"),r}),"");i=i.length>0?i:"INCLUDE",o.push(i)}if(t.spatialField&&(n=x.processCQLSpatialFilter(t))&&o.push(n),t.crossLayerFilter){var a=t.crossLayerFilter,l=a.operation,c=a.attribute,u=a.collectGeometries&&a.collectGeometries.queryCollection;if(l&&c&&u){var s=u.typeName,p=u.geometryName,f=x.getCrossLayerCqlFilter(a),g=Q(X({typeName:s,geometryName:p,cqlFilter:f}));o.push("".concat(l,"(").concat(c,",").concat(g,")"))}}return o.length?"("+(o.length>1?o.join(") AND ("):o[0])+")":null},ce=function(e,t){var r="NOR"===e.logic?P(P({},e),{},{logic:"AND",negateAll:!0}):e,n=x.processCQLFilterFields(r,t),o=x.findSubGroups(r,t.groupFields);if(o.length>0){var i=o.map((function(e){return(r.negateAll?"NOT (":"(")+x.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return n?[n,i].join(" "+r.logic+" "):i}return n},ue=function(e,t){var r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,n){r+=t.join(" "),r+=n<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,o){r+="(";var i=(0,n.closePolygon)(t).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,o){r+="(",t.forEach((function(e,o){r+="(";var i=(0,n.closePolygon)(e).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<t.length-1?", ":""})),r+=")",r+=o<e.length-1?", ":""}))}return r+=")"},se=function(e){var t=(v()(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return t.forEach((function(n,o){if(r+=n.operation+'("'+n.attribute+'",',n.collectGeometries&&n.collectGeometries.queryCollection)r+=Q(X(n.collectGeometries.queryCollection));else{var i=n.geometry.projection||"";i=2===i.split(":").length?"SRID="+i.split(":")[1]+";":"",r+=i+x.getCQLGeometryElement(n.geometry.coordinates,n.geometry.type)}r+=")",o<t.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},pe=function(e,t,r){var n;return"><"===t?r.startDate&&r.endDate&&(n="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(n=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'"),n},fe=function(e,t,r){var n,o=j(e);return d()(r)||(n="isNull"===t?"isNull("+o+")=true":"="===t?o+t+"'"+R(r)+"'":"ilike"===t?"strToLowerCase("+o+") LIKE '%"+R(r).toLowerCase()+"%'":o+" LIKE '%"+R(r)+"%'"),n},ge=function(e,t,r){var n="";return d()(r)||""===r||"="===t&&(n='"'+e+'"'+t+"'"+r+"'"),n},de=function(e,t,r){var n,o=j(e);if("><"===t)d()(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?d()(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?d()(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n="("+o+">='"+r.lowBound+"' AND "+o+"<='"+r.upBound+"')"):n="("+o+"<='"+r.upBound+"')":n="("+o+">='"+r.lowBound+"')";else{var i=d()(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;d()(i)||(n=o+" "+t+" '"+i+"'")}return n},me=function(e,t){return t.filter((function(t){return t.groupId===e.id}))},ye=function(e,t,r){return x.cqlStringField(e,t,r)},Oe=function(e,t){var r=t.filterFields.filter((function(t){return t.groupId===e.id})),n=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=x.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=x.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=x.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=x.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=x.cqlListField(t.attribute,t.operator,t.value)}r&&n.push(e.negateAll?"NOT ("+r+")":r)})),n=n.join(" "+e.logic+" ")),n},ve=function(e){var t=!1;switch(e.type){case"date":t=x.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=x.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=x.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=x.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var r=!1,n=e.values.reduce((function(e,t){return null===t||"null"===t?r=!0:e.push("'"+t+"'"),e}),[]);t=n.length>0?e.attribute+" IN("+n.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},he=function(e,t){return'<wfs:GetPropertyValue service="WFS" valueReference=\''.concat(t,'\'\n                version="2.0" xmlns:fes="http://www.opengis.net/fes/2.0"\n                xmlns:gml="http://www.opengis.net/gml/3.2"\n                xmlns:wfs="http://www.opengis.net/wfs/2.0"\n                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n                xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd">\n                    <wfs:Query typeNames="').concat(e,'"/>\n            </wfs:GetPropertyValue>')},we=function(e,t,r){var n=x.toOGCFilter(e,t,r),o=n.search("<".concat(x.nsplaceholder,":Filter>"));if(-1!==o){var i=n.search("</wfs:Query>");n=n.substr(o,i-o)}else n="";return'<StyledLayerDescriptor version="1.0.0"\n            xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" xmlns:gsml="urn:cgi:xmlns:CGI:GeoSciML:2.0" xmlns:sld="http://www.opengis.net/sld" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><NamedLayer><Name>'.concat(e,"</Name><UserStyle><FeatureTypeStyle><Rule >").concat(n,'<PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><CssParameter name="fill">#0000FF</CssParameter></Fill></Mark><Size>20</Size></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>')},be=function(e,t){return"string"==typeof e?e:"OGC"===e.filterType?x.toOGCFilter(e.featureTypeName,P(P({},e),{},{options:t}),e.ogcVersion,e.sortOptions,e.hits):x.toCQLFilter(e)},Te=function(e){return"ilike"===e||"like"===e},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterFields,r=void 0===t?[]:t,n=e.spatialField,o=void 0===n?{}:n,i=e.crossLayerFilter,a=void 0===i?{}:i;return!(r.filter((function(e){return e.value||0===e.value})).length>0||o.geometry||a&&a.attribute&&a.operation)},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||v()(e.spatialField)&&T()(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName},Ee=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return L()(t.filter((function(e){return!!e})))},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AND",n={id:(new Date).getTime(),index:0,logic:t};return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.filterFields,i=void 0===o?[]:o,a=t.groupFields,l=void 0===a?[]:a,c=t.spatialField,u=arguments.length>2?arguments[2]:void 0;return{groupFields:e.groupFields.concat(i.length>0&&l.map((function(e){return{groupId:0===e.index&&n.id||"".concat(e.groupId,"_").concat(u),logic:e.logic,id:"".concat(e.id,"_").concat(u),index:1+e.index}}))||[]),filterFields:e.filterFields.concat(i.map((function(e){return P(P({},e),{},{groupId:"".concat(e.groupId,"_").concat(u)})}))),spatialField:Ee(e.spatialField,c),spatialFieldOperator:r}}),{groupFields:[n],filterFields:[],spatialField:[]})},Ne=function(e,t){var r,n=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,i=e.spatialField.geometry.radius,a=(0,s.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,l=o&&[(r=(0,s.reproject)(o,n,t)).x,r.y],c=i&&(0,s.reproject)([i,0],n,t).x;return P(P({},e),{},{spatialField:P(P({},e.spatialField),{},{geometry:P(P({},e.spatialField.geometry),{},{center:l,radius:c,coordinates:a,projection:t})})})},Ce=function(e,t){return e&&e.spatialField&&e.spatialField.geometry&&e.spatialField.geometry.coordinates&&e.spatialField.geometry.coordinates[0]&&(e.spatialField.projection||"EPSG:3857")!==t?t?x.reprojectFilterInNativeCrs(e,t):P(P({},e),{},{spatialField:void 0}):e},Ie=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nsPlaceholder,r=void 0===t?"ogc":t,n=e.ogcVersion,i=void 0===n?"2.0":n,c=e.addXmlnsToRoot,s=void 0!==c&&c,p=e.xmlnsToAdd,f=void 0===p?[]:p,g=u()({filterNS:r,wfsVersion:i,gmlVersion:(0,o.wfsToGmlVersion)(i)}),d=(0,l.Z)(g),m=arguments.length,y=new Array(m>1?m-1:0),O=1;O<m;O++)y[O-1]=arguments[O];var v=g.filter(g.and.apply(g,N(L()(y.filter((function(e){return!!e&&(S()(e)||Se(e)&&!e.disabled)})).map((function(e){return S()(e)?[d((0,a.read)(e))]:Z(e,i,r)}))))));if(s){var h=v.indexOf(">");return"".concat(v.slice(0,h)).concat(f.length>0?" ".concat(f.join(" ")):"").concat(v.slice(h))}return v};x={processOGCFilterGroup:z,processOGCFilterFields:$,processOGCCrossLayerFilter:ae,getGetFeatureBase:oe,toOGCFilterParts:Z,findSubGroups:me,toCQLFilter:le,getCrossLayerCqlFilter:ie,processCQLFilterGroup:ce,processCQLSimpleFilterField:ve,processCQLSpatialFilter:se,processCQLFilterFields:Oe,getCQLGeometryElement:ue,cqlStringField:fe,cqlDateField:pe,cqlNumberField:de,cqlBooleanField:ge,cqlListField:ye,toOGCFilter:Y,reprojectFilterInNativeCrs:Ne,processOGCSpatialFilter:ne,mergeFiltersToOGC:Ie}},61868:(e,t,r)=>{"use strict";r.d(t,{t8:()=>g,zN:()=>d,qC:()=>m,vy:()=>y,cc:()=>O,z6:()=>v});var n=r(27361),o=r.n(n),i=r(30998),a=r.n(i),l=r(28252),c=r.n(l),u=r(17664),s=r.n(u),p=r(36102),f=r.n(p),g=c(),d=2497!=r.j?s():null,m=2497!=r.j?f():null,y=function(e,t,r,n){var i=e?o()(n,e)||[]:n,l=a()(i,r);if(l>=0){var c=i.slice();return c.splice(l,1,t),e?g(e,c,n):c}return e?g(e,i.concat(t),n):i.concat(t)},O=function(e,t,r,n){var i=e?o()(n,e)||[]:n,l=a()(i,r);if(l>=0){var c=i.slice();return c.splice(l,1,t),e?g(e,c,n):c}return n},v=function(e,t,r){var n=e?o()(r,e)||[]:r,i=a()(n,t);if(i>=0){var l=n.slice();return l.splice(i,1),e?g(e,l,r):l()}return r}},52259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_SCREEN_DPI:()=>z,METERS_PER_UNIT:()=>$,GOOGLE_MERCATOR:()=>J,EXTENT_TO_ZOOM_HOOK:()=>ee,ZOOM_TO_EXTENT_HOOK:()=>te,RESOLUTIONS_HOOK:()=>re,RESOLUTION_HOOK:()=>ne,COMPUTE_BBOX_HOOK:()=>oe,GET_PIXEL_FROM_COORDINATES_HOOK:()=>ie,GET_COORDINATES_FROM_PIXEL_HOOK:()=>ae,registerHook:()=>ce,getHook:()=>ue,executeHook:()=>se,clearHooks:()=>pe,dpi2dpm:()=>fe,dpi2dpu:()=>ge,getSphericalMercatorScale:()=>de,getGoogleMercatorScale:()=>me,getSphericalMercatorScales:()=>ye,getGoogleMercatorScales:()=>Oe,getResolutionsForScales:()=>ve,getGoogleMercatorResolutions:()=>he,getResolutions:()=>we,getScales:()=>be,getZoomFromResolution:()=>Te,defaultGetZoomForExtent:()=>Fe,getZoomForExtent:()=>Se,getCurrentResolution:()=>Ee,getCenterForExtent:()=>Le,getBbox:()=>Ne,isNearlyEqual:()=>Ce,mapUpdated:()=>Ie,transformExtent:()=>Pe,groupSaveFormatted:()=>Ge,saveMapConfiguration:()=>xe,generateNewUUIDs:()=>Ae,mergeMapConfigs:()=>Re,addRootParentGroup:()=>De,isSimpleGeomType:()=>Me,getSimpleGeomType:()=>je,getIdFromUri:()=>_e,parseLayoutValue:()=>Be,prepareMapObjectToCompare:()=>ke,updateObjectFieldKey:()=>qe,compareMapChanges:()=>Ue,createRegisterHooks:()=>He,default:()=>Ve});var n=r(47037),o=r.n(n),i=r(92742),a=r.n(i),l=r(81763),c=r.n(l),u=r(78718),s=r.n(u),p=r(27361),f=r.n(p),g=r(13311),d=r.n(g),m=r(95395),y=r.n(m),O=r(66604),v=r.n(O),h=r(3674),w=r.n(h),b=r(44908),T=r.n(b),F=r(87185),S=r.n(F),E=r(18446),L=r.n(E),N=r(41609),C=r.n(N),I=r(30998),P=r.n(I),G=r(50361),x=r.n(G),A=r(22762),R=r.n(A),D=r(23570),M=r.n(D),j=r(86267),_=r(61868),B=r(24262),k=r(27418),q=r.n(k),U=["id"],H=["group"];function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function K(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function W(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=96,$={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},J={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},ee="EXTENT_TO_ZOOM_HOOK",te="ZOOM_TO_EXTENT_HOOK",re="RESOLUTIONS_HOOK",ne="RESOLUTION_HOOK",oe="COMPUTE_BBOX_HOOK",ie="GET_PIXEL_FROM_COORDINATES_HOOK",ae="GET_COORDINATES_FROM_PIXEL_HOOK",le={};function ce(e,t){le[e]=t}function ue(e){return le[e]}function se(e,t,r){var n=ue(e);return n?t(n):r?r():null}function pe(){le={}}function fe(e){return e*(100/2.54)}function ge(e,t){var r=(0,j.getUnits)(t||"EPSG:3857");return $[r]*fe(e||z)}function de(e,t,r,n,o){return 2*Math.PI*e/(t*Math.pow(r,n)/fe(o||z))}function me(e,t){return de(J.RADIUS,J.TILE_WIDTH,J.ZOOM_FACTOR,e,t)}function ye(e,t,r,n,o,i){for(var a=[],l=n;l<=o;l++)a.push(de(e,t,r,l,i));return a}function Oe(e,t,r){return ye(J.RADIUS,J.TILE_WIDTH,J.ZOOM_FACTOR,e,t,r)}function ve(e,t,r){var n=ge(r,t);return e.map((function(e){return e/n}))}function he(e,t,r){return ve(Oe(e,t,r),"EPSG:3857",r)}function we(){return ue("RESOLUTIONS_HOOK")?ue("RESOLUTIONS_HOOK")():he(0,21,z)}function be(e,t){var r=ge(t,e);return we().map((function(e){return e*r}))}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we(),r=t.map((function(t,r){return{diff:Math.abs(t-e),zoom:r}})),n=R()(r,"diff"),o=n.zoom;return o}function Fe(e,t,r,n,o,i){var a=e[2]-e[0],l=e[3]-e[1],c=Math.abs(a/t.width),u=Math.abs(l/t.height),s=Math.max(c,u),p=(i||ve(Oe(r,n,o||z),"EPSG:3857",o)).reduce((function(e,t,r){var n=Math.abs(t-s);return n>e.diff?e:{diff:n,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(p,n))}function Se(e,t,r,n,o){return ue("EXTENT_TO_ZOOM_HOOK")?ue("EXTENT_TO_ZOOM_HOOK")(e,t,r,n,o):Fe(e,t,r,n,o,ue("RESOLUTIONS_HOOK")?ue("RESOLUTIONS_HOOK")(e,t,r,n,o,fe(o||z)):null)}function Ee(e,t,r,n){return ue("RESOLUTION_HOOK")?ue("RESOLUTION_HOOK")(e,t,r,n):he(t,r,n)[e]}function Le(e,t){var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+n,crs:t}}function Ne(e,t){return se("COMPUTE_BBOX_HOOK",(function(r){return r(e,t)}))}var Ce=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Ie(e,t){var r,n,o,i;return!(!e||C()(e)||!t||C()(t)||Ce(null==t||null===(r=t.center)||void 0===r?void 0:r.x,null==e||null===(n=e.center)||void 0===n?void 0:n.x)&&Ce(null==t||null===(o=t.center)||void 0===o?void 0:o.y,null==e||null===(i=e.center)||void 0===i?void 0:i.y)&&(null==t?void 0:t.zoom)===(null==e?void 0:e.zoom))}function Pe(e,t,r,n){var o=(0,j.getUnits)(e);return"ft"===o?{width:r/$.ft,height:n/$.ft}:"us-ft"===o?{width:r/$["us-ft"],height:n/$["us-ft"]}:"degrees"===o?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:n/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:n}}var Ge=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function xe(e,t,r,n,o,i,a){var l={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},c=t.map((function(e){return(0,B.z8)(e)})),u=r.reduce((function(e,t){return e.concat((0,B.ar)(t))}),[].concat(r.map((function(e){return e.id})))).map((function(e){var t=(0,B.Mk)(r,e);return t&&t.nodes?Ge(t):null})).filter((function(e){return e})),s=n.filter((function(e){return!!e.thumbnail})),p=(0,B.V5)(c),f=c.map((function(e){return q()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),g=P()(f,(function(e){return"annotations"===e.id}));if(-1!==g){var d=f[g].features.map((function(e){return"FeatureCollection"===e.type?Z(Z({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?(0,_.t8)("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?(0,_.t8)("properties.geometryGeodesic",null,e):{}}));f[g]=(0,_.t8)("features",d,f[g])}return Z({version:2,map:q()({},l,{layers:f,groups:u,backgrounds:s,text_search_config:o,bookmark_search_config:i},!C()(p)&&{sources:p}||{})},a)}var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x()(e),r=Z(Z({},f()(e,"map.layers",[]).reduce((function(e,t){return Z(Z({},e),{},Y({},t.id,"annotations"===t.id?t.id:M()()))}),{})),f()(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return Z(Z({},e),{},Y({},t.id,M()()))}),{}));return(0,_.t8)("map.backgrounds",f()(e,"map.backgrounds",[]).map((function(e){return Z(Z({},e),{},{id:r[e.id]})})),(0,_.t8)("widgetsConfig",{collapsed:v()(y()(f()(e,"widgetsConfig.collapsed",{}),(function(e,t){return r[t]})),(function(e){return Z(Z({},e),{},{layouts:v()(e.layouts,(function(e){return Z(Z({},e),{},{i:r[e.i]})}))})})),layouts:v()(f()(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return Z(Z({},e),{},{i:r[e.i]})}))})),widgets:f()(e,"widgetsConfig.widgets",[]).map((function(e){return Z(Z({},e),{},{id:r[e.id],layer:Z(Z({},f()(e,"layer",{})),{},{id:r[f()(e,"layer.id")]})})}))},(0,_.t8)("map.layers",f()(e,"map.layers",[]).map((function(e){return Z(Z({},e),{},{id:r[e.id]})})),t)))},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return s()(e,w()(e).filter((function(t){return void 0!==e[t]})))}))},n=Ae(t),o=[].concat(W(f()(e,"map.backgrounds",[])),W(f()(n,"map.backgrounds",[]))),i=r(f()(e,"map.layers",[])),a=r(f()(n,"map.layers",[])),l=d()(i,(function(e){return"annotations"===e.id})),c=d()(a,(function(e){return"annotations"===e.id})),u=[].concat(W(a.filter((function(e){return"annotations"!==e.id}))),W(i.filter((function(e){return"annotations"!==e.id}))),W(l||c?[Z(Z(Z({},l||{}),c||{}),{},{features:[].concat(W(f()(l,"features",[])),W(f()(c,"features",[])))})]:[])),p=u.filter((function(e){return"background"===e.group})),g=P()(p,(function(e){return e.visibility})),m=f()(e,"map.sources",{}),y=f()(n,"map.sources",{}),O=Z(Z({},m),y),v=f()(e,"widgetsConfig",{}),h=f()(n,"widgetsConfig",{});return Z(Z(Z({},n),e),{},{catalogServices:Z(Z({},f()(e,"catalogServices",{})),{},{services:Z(Z({},f()(e,"catalogServices.services",{})),f()(n,"catalogServices.services",{}))}),map:Z(Z(Z({},n.map),e.map),{},{backgrounds:o,groups:S()([].concat(W(f()(e,"map.groups",[])),W(f()(n,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(W(p.slice(0,g+1)),W(p.slice(g+1).map((function(e){return Z(Z({},e),{},{visibility:!1})}))),W(u.filter((function(e){return"background"!==e.group})))),sources:C()(O)?void 0:O}),widgetsConfig:{collapsed:Z(Z({},v.collapsed),h.collapsed),layouts:T()([].concat(W(w()(v.layouts)),W(w()(h.layouts)))).reduce((function(e,t){return Z(Z({},e),{},Y({},t,[].concat(W(f()(v,"layouts.".concat(t),[])),W(f()(h,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(W(f()(v,"widgets",[])),W(f()(h,"widgets",[])))},timelineData:Z(Z({},f()(e,"timelineData",{})),f()(n,"timelineData",{})),dimensionData:Z(Z({},f()(e,"dimensionData",{})),f()(n,"dimensionData",{}))})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",r=f()(e,"map.groups",[]),n=r.filter((function(e){return"Default"!==e.id})),o=d()(r,(function(e){return"Default"===e.id})),i=o&&{id:M()(),title:t,expanded:o.expanded},a=o?[].concat(W(n.map((function(e){var t=e.id,r=K(e,U);return Z({id:"".concat(i.id,".").concat(t)},r)}))),[i]):n;return Z(Z({},e),{},{map:Z(Z({},e.map),{},{groups:a,layers:f()(e,"map.layers",[]).map((function(e){var t,r=e.group;return Z(Z({},K(e,H)),{},{group:!o||"background"===r||"Default"!==r&&r?o&&(null===(t=d()(a,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===r})))||void 0===t?void 0:t.id)||r:i.id})}))})})};function Me(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;default:return!0}}function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":default:return e;case"MultiPoint":case"Marker":case"Text":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection"}}var _e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,r=decodeURIComponent(e),n=t.exec(r);return n&&n.length&&n.length>1?n[1]:null},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(e)&&-1!==e.indexOf("%")?parseFloat(a()(e))*t/100:c()(e)?e:0},ke=function e(t){var r=["apiKey","time","args","fixed"],n=function(e){return r.reduce((function(t,r){return t||e===r}),!1)};Object.keys(t).forEach((function(r){var o=t[r],i=V(o);"object"!==i||null===o||n(r)?"undefined"!==i&&o&&!n(r)||delete t[r]:(e(o),Object.keys(o).length||delete t[r])}))},qe=function(e,t,r){e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],n=s()(x()(e),r),o=s()(x()(t),r);return qe(n.map,"text_serch_config","text_search_config"),qe(o.map,"text_serch_config","text_search_config"),ke(n),ke(o),L()(n,o)},He=function(){var e={};return{registerHook:function(t,r){e[t]=r},getHook:function(t){return e[t]},executeHook:function(t,r,n){var o=e[t];return o?r(o):n?n():null}}};const Ve={createRegisterHooks:He,EXTENT_TO_ZOOM_HOOK:ee,RESOLUTIONS_HOOK:re,RESOLUTION_HOOK:ne,COMPUTE_BBOX_HOOK:oe,GET_PIXEL_FROM_COORDINATES_HOOK:ie,GET_COORDINATES_FROM_PIXEL_HOOK:ae,DEFAULT_SCREEN_DPI:z,ZOOM_TO_EXTENT_HOOK:te,registerHook:ce,getHook:ue,dpi2dpm:fe,getSphericalMercatorScales:ye,getSphericalMercatorScale:de,getGoogleMercatorScales:Oe,getGoogleMercatorResolutions:he,getGoogleMercatorScale:me,getResolutionsForScales:ve,getZoomForExtent:Se,defaultGetZoomForExtent:Fe,getCenterForExtent:Le,getResolutions:we,getScales:be,getBbox:Ne,mapUpdated:Ie,getCurrentResolution:Ee,transformExtent:Pe,saveMapConfiguration:xe,generateNewUUIDs:Ae,mergeMapConfigs:Re,addRootParentGroup:De,isSimpleGeomType:Me,getSimpleGeomType:je,getIdFromUri:_e,parseLayoutValue:Be,prepareMapObjectToCompare:ke,updateObjectFieldKey:qe,compareMapChanges:Ue,clearHooks:pe}},45992:(e,t,r)=>{"use strict";r.d(t,{h:()=>s,Z:()=>p});var n=r(35937),o=r.n(n),i=r(36882),a=r(37275);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){var r,n,l,u,s=i.Z;if("custom"===e)r=t;else if(l=(u=e.split("."))[0],n=u[1],!(r=s[l]))throw new Error("No such provider ("+l+")");var p={url:r.url,options:r.options||{}};if(n&&"variants"in r){if(!(n in r.variants))throw new Error("No such variant of "+(l||r.url)+" ("+n+")");var f,g=r.variants[n];f="string"==typeof g?{variant:g}:g.options,p={url:g.url||p.url,options:c(c({},p.options||{}),f)}}else"function"==typeof p.url&&(p.url=p.url(u.splice(1,u.length-1).join(".")));var d="file:"===window.location.protocol||p.options.forceHTTP;0===p.url.indexOf("//")&&d&&(p.url="http:"+p.url),p.options.retina&&(t.detectRetina&&a.ZP.getBrowserProperties().retina?t.detectRetina=!1:p.options.retina=""),p.options.attribution&&(p.options.attribution=function e(t){return-1===t.indexOf("{attribution.")?t:t.replace(/\{attribution.(\w*)\}/,(function(t,r){return e(s[r].options.attribution)}))}(p.options.attribution));var m=c(c({},p.options),o()(t,(function(e){return void 0!==e})));return[p.url,m]};const p={getLayerConfig:s}},33358:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var n=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],o=function(e){return-1!==n.indexOf(e)}},43378:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var n=r(47805);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t.layerFilter,a=t.filterObj,l=[(0,n.isFilterValid)(o)&&!o.disabled&&(0,n.toCQLFilter)(o),(0,n.isFilterValid)(a)&&(0,n.toCQLFilter)(a),t&&t.params&&t.params.CQL_FILTER,r];return(e=(l=l.filter((function(e){return!!e}))).length>1?l.map((function(e){return"(".concat(e,")")})).join(" AND "):l.pop())?i(i({},t.params),{},{CQL_FILTER:e}):t.params}},7294:(e,t,r)=>{"use strict";r.d(t,{nn:()=>T,Bf:()=>F,Wg:()=>S,C2:()=>E,s5:()=>L,G6:()=>N,b4:()=>C,f1:()=>I,dN:()=>P,EN:()=>G,JY:()=>x,h7:()=>A});var n,o=r(86267),i=r(47037),a=r.n(i),l=r(1469),c=r.n(l),u=r(13218),s=r.n(u),p=r(91175),f=r.n(p),g=r(84596),d=r.n(g),m=r(12571),y=r.n(m),O=r(89734),v=r.n(O);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){for(var t=new Array(30),r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t},F=function(e,t){return s()(e)&&c()(e[t])&&e[t]||c()(e)&&e||[]},S=function(e,t){return e.length>t?y()(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e},E=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&a()(e)?e:e?(0,o.getEquivalentSRS)(t,r).reduce((function(t,r){if(c()(e)){var i=f()(e.filter((function(e){return(e["ows:Identifier"]===r||(0,o.getEPSGCode)(e["ows:SupportedCRS"])===r)&&n[e["ows:Identifier"]]})));return i&&i["ows:Identifier"]?i["ows:Identifier"]:t}return s()(e)&&e[r]||t}),i):i},L=function(e){var t=n.getOperations(e);return n.getOperation(t,"GetTile","KVP")?"KVP":n.getOperation(t,"GetTile","RESTful")&&"RESTful"},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d()(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},C=function(e,t,r){return f()(d()(f()(e.filter((function(e){return e.$.name===t})).map((function(e){return d()(e["ows:DCP"]["ows:HTTP"]["ows:Get"])})))||[]).filter((function(e){return(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===r})).map((function(e){return e.$["xlink:href"]})))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ResourceURL,r=e.GetTileURL,n=e.requestEncoding;return"KVP"===n?r:t&&d()(t).map((function(e){var t=e.$,r=void 0===t?{}:t;return r.template||r.value}))||r},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(d()(e.capabilitiesURL||e.GetTileURL))},G=function(e){return null!=e&&e.Style?f()(d()(e.Style).filter((function(e){var t=e.$;return"true"===(void 0===t?{}:t).isDefault})).map((function(e){return e["ows:Identifier"]}))):null},x=function(e){return f()(d()(e.Format))},A=function(e,t){var r,n,o=E(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),i=e.matrixIds&&F(e.matrixIds,o||t),a=function(e,t){return e?w(w({},e),{},{TileMatrix:v()(null==e?void 0:e.TileMatrix.map((function(e){return w(w({},e),{},{ScaleDenominator:Number(e.ScaleDenominator)})})),"ScaleDenominator").reverse().filter((function(e){return!t||t.map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).identifier})).indexOf(e["ows:Identifier"])>=0}))}):e}(f()(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===o}))),i),l=null==a||null===(r=(n=a.TileMatrix).map)||void 0===r?void 0:r.call(n,(function(e){return e["ows:Identifier"]}));return{matrixIds:l&&i?i.sort((function(e,t){return l.indexOf(e.identifier)-l.indexOf(t.identifier)})):i,tileMatrixSetName:o,tileMatrixSet:a}};n={getOperations:N,getOperation:C}},89291:e=>{var t={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var r=e.length,n=e.indexOf("(",t[0].length);if(n>-1)for(var o=1;n<r&&o>0;)switch(n++,e.charAt(n)){case"(":o++;break;case")":o--}return[e.substr(0,n+1)]}return null},END:/^$/},r={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},n={"=":"=","<>":"<>","<":"<","<=":"<=",">":">",">=":">=",LIKE:"like",ILIKE:"ilike",BETWEEN:"><","IS NULL":"isNull"},o={AND:"and",OR:"or",NOT:"not"},i={RPAREN:3,LOGICAL:2,COMPARISON:1},a=function(e,t){return t instanceof RegExp?t.exec(e):t(e)},l=function(e,r){var n,o,i=r.length;for(n=0;n<i;n++){o=r[n];var l=a(e,t[o]);if(l){var c=l[0];return{type:o,text:c,remainder:e.substr(c.length).replace(/^\s*/,"")}}}var u="ERROR: In parsing: ["+e+"], expected one of: ";for(n=0;n<i;n++)u+="\n    "+(o=r[n])+": "+t[o];throw new Error(u)};e.exports={read:function(e){return function(e){for(var t=[],r=[];e.length;){var a=e.shift();switch(a.type){case"PROPERTY":case"GEOMETRY":case"VALUE":r.push(a);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var l=i[a.type];t.length>0&&i[t[t.length-1].type]<=l;)r.push(t.pop());t.push(a);break;case"SPATIAL":case"NOT":case"LPAREN":t.push(a);break;case"RPAREN":for(;t.length>0&&"LPAREN"!==t[t.length-1].type;)r.push(t.pop());t.pop(),t.length>0&&"SPATIAL"===t[t.length-1].type&&r.push(t.pop());break;case"COMMA":case"END":break;default:throw new Error("Unknown token type "+a.type)}}for(;t.length>0;)r.push(t.pop());var c=function e(){var t=r.pop();switch(t.type){case"LOGICAL":var i=e();return{filters:[e(),i],type:o[t.text.toUpperCase()]};case"NOT":return{filters:[e()],type:o.NOT};case"BETWEEN":r.pop();var a=e(),l=e();return{property:e(),lowerBoundary:l,upperBoundary:a,type:n.BETWEEN};case"COMPARISON":var c=e();return{property:e(),value:c,type:n[t.text.toUpperCase()]};case"IS_NULL":return{property:e(),type:n[t.text.toUpperCase()]};case"VALUE":var u=t.text.match(/^'(.*)'$/);return u?u[1].replace(/''/g,"'"):Number(t.text);case"SPATIAL":switch(t.text.toUpperCase()){case"BBOX":var s=e(),p=e(),f=e(),g=e();return{type:"BBOX",property:e(),value:[g,f,p,s]};case"INTERSECTS":var d=e();return{type:"INTERSECTS",property:e(),value:d};case"WITHIN":var m=e();return{type:"WITHIN",property:e(),value:m};case"CONTAINS":var y=e();return{type:"CONTAINS",property:e(),value:y};case"DWITHIN":var O=e();return{type:"DWITHIN",value:e(),property:e(),distance:Number(O)};default:return null}case"GEOMETRY":return function(){throw new Error("WKT parsing for CQL filter not supported yet")}(t.text);default:return t.text}}();if(r.length>0){for(var u="Remaining tokens after building AST: \n",s=r.length-1;s>=0;s--)u+=r[s].type+": "+r[s].text+"\n";throw new Error(u)}return c}(function(e){var t,n=[],o=e,i=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{if(o=(t=l(o,i)).remainder,i=r[t.type],"END"!==t.type&&!i)throw new Error("No follows list for "+t.type);n.push(t)}while("END"!==t.type);return n}(e))}}},2245:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(99321),i=o.logical,a=o.spatial,l=o.comparison,c=o.literal,u=o.propertyName,s=o.valueReference,p=o.distance,f=o.lower,g=o.upper,d=r(34387),m=d.filter,y=d.fidFilter,O=r(65692).processOGCGeometry;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterNS,r=void 0===t?"ogc":t,o=e.gmlVersion,d=e.wfsVersion,v=void 0===d?"1.1.0":d,h=o||"3.1.1",w=function(e){return O(h,e)},b=function(e){return"object"===n(e)&&Date,c(r,e)},T=0===v.indexOf("2.")?s:u;return{filter:m.bind(null,r),fidFilter:y.bind(null,r),and:i.and.bind(null,r),or:i.or.bind(null,r),not:i.not.bind(null,r),property:function(e){return{equalTo:function(t){return l.equal(r,T(r,e),b(t))},greaterThen:function(t){return l.greater(r,T(r,e),b(t))},greaterThenOrEqualTo:function(t){return l.greaterOrEqual(r,T(r,e),b(t))},lessThen:function(t){return l.less(r,T(r,e),b(t))},lessThenOrEqualTo:function(t){return l.lessOrEqual(r,T(r,e),b(t))},notEqualTo:function(t){return l.notEqual(r,T(r,e),b(t))},between:function(t,n){return l.between(r,T(r,e),f(r,b(t)),g(r,b(n)))},like:function(t,n){return l.like(r,T(r,e),b(t),n)},ilike:function(t,n){return l.ilike(r,T(r,e),b(t),n)},isNull:function(){return l.isNull(r,T(r,e))},intersects:function(t){return a.intersects(r,T(r,e),w(t))},within:function(t){return a.within(r,T(r,e),w(t))},dwithin:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return a.dwithin(r,T(r,e),w(t),p(r,n,o))},contains:function(t){return a.contains(r,T(r,e),w(t))}}}}}},34387:e=>{var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return"<".concat(e,":Filter>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Filter>")};e.exports={fidFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",r=arguments.length>1?arguments[1]:void 0;return t(e,"<".concat(e,':FeatureId fid="').concat(r,'"/>'))},filter:t}},89737:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(64721),o=r.n(n),i=r(14293),a=r.n(i);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=["and","or","not"],s={"=":"equalTo","<>":"notEqualTo","><":"between","<":"lessThen","<=":"lessThenOrEqualTo",">":"greaterThen",">=":"greaterThenOrEqualTo",like:"like",ilike:"ilike"};const p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){var n=r.type,i=r.filters,c=void 0===i?[]:i,p=r.value,f=r.property,g=r.lowerBoundary,d=r.upperBoundary;return o()(u,n)?t[n].apply(t,l(c.map(e(t)))):t.property(f)[s[n]](a()(p)?g:p,d)}}},99321:e=>{var t={"=":function(e,t){return"<".concat(e,":PropertyIsEqualTo>").concat(t,"</").concat(e,":PropertyIsEqualTo>")},">":function(e,t){return"<".concat(e,":PropertyIsGreaterThan>").concat(t,"</").concat(e,":PropertyIsGreaterThan>")},"<":function(e,t){return"<".concat(e,":PropertyIsLessThan>").concat(t,"</").concat(e,":PropertyIsLessThan>")},">=":function(e,t){return"<".concat(e,":PropertyIsGreaterThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsGreaterThanOrEqualTo>")},"<=":function(e,t){return"<".concat(e,":PropertyIsLessThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsLessThanOrEqualTo>")},"<>":function(e,t){return"<".concat(e,":PropertyIsNotEqualTo>").concat(t,"</").concat(e,":PropertyIsNotEqualTo>")},"><":function(e,t){return"<".concat(e,":PropertyIsBetween>").concat(t,"</").concat(e,":PropertyIsBetween>")},like:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="true" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},ilike:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},isNull:function(e,t){return"<".concat(e,":PropertyIsNull>").concat(t,"</").concat(e,":PropertyIsNull>")}},r={AND:function(e,t){return"<".concat(e,":And>").concat(t,"</").concat(e,":And>")},OR:function(e,t){return"<".concat(e,":Or>").concat(t,"</").concat(e,":Or>")},NOR:function(e,t){return"<".concat(e,":Not><").concat(e,":Or>").concat(t,"</").concat(e,":Or></").concat(e,":Not>")},NOT:function(e,t){return"<".concat(e,":Not>").concat(t,"</").concat(e,":Not>")}},n={INTERSECTS:function(e,t){return"<".concat(e,":Intersects>").concat(t,"</").concat(e,":Intersects>")},BBOX:function(e,t){return"<".concat(e,":BBOX>").concat(t,"</").concat(e,":BBOX>")},CONTAINS:function(e,t){return"<".concat(e,":Contains>").concat(t,"</").concat(e,":Contains>")},DWITHIN:function(e,t){return"<".concat(e,":DWithin>").concat(t,"</").concat(e,":DWithin>")},WITHIN:function(e,t){return"<".concat(e,":Within>").concat(t,"</").concat(e,":Within>")}},o=function(e,t,r){return t(e,Array.isArray(r)?r.join(""):r)},i={and:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return i&&i.length>0?o(e,r.AND,[t].concat(i)):o(e,r.AND,t)},or:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return i&&i.length>0?o(e,r.OR,[t].concat(i)):o(e,r.OR,t)},not:function(e,t){return o(e,r.NOT,t)},nor:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return i&&i.length>0?o(e,r.NOR,[t].concat(i)):o(e,r.NOR,t)}},a={intersects:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.INTERSECTS,r)},within:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.WITHIN,r)},bbox:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.BBOX,r)},dwithin:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.DWITHIN,r)},contains:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return o(e,n.CONTAINS,r)}},l={equal:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["="],n)},greater:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t[">"],n)},less:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["<"],n)},greaterOrEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t[">="],n)},lessOrEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["<="],n)},notEqual:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["<>"],n)},between:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t["><"],n)},like:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t.like,n)},ilike:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t.ilike,n)},isNull:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o(e,t.isNull,n)}};e.exports={ogcComparisonOperators:t,ogcLogicalOperators:r,ogcSpatialOperators:n,propertyName:function(e,t){return"<".concat(e,":PropertyName>").concat(t,"</").concat(e,":PropertyName>")},valueReference:function(e,t){return"<".concat(e,":ValueReference>").concat(t,"</").concat(e,":ValueReference>")},distance:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return"<".concat(e,':Distance units="').concat(r,'">').concat(t,"</").concat(e,":Distance>")},literal:function(e,t){return"<".concat(e,":Literal>").concat(t,"</").concat(e,":Literal>")},logical:i,spatial:a,comparison:l,lower:function(e,t){return"<".concat(e,":LowerBoundary>").concat(t,"</").concat(e,":LowerBoundary>")},upper:function(e,t){return"<".concat(e,":UpperBoundary>").concat(t,"</").concat(e,":UpperBoundary>")}}},65692:(e,t,r)=>{var n=r(1469),o=function(e){return 0===e.indexOf("2.")},i=function(e){if(e.length>=3){var t=e[0],r=e[e.length-1];if(t[0]!==r[0]||t[1]!==r[1])return e.concat([e[0]])}return e},a=function(e,t,r){var n='<gml:Point srsDimension="2"';return n+=t?' srsName="'+t+'">':">",(n+=o(r)?"<gml:coord><X>"+e[0]+"</X><Y>"+e[1]+"</Y></gml:coord>":"<gml:pos>"+e.join(" ")+"</gml:pos>")+"</gml:Point>"},l=function(e,t,r){var a=o(r),l="<gml:Polygon";return l+=t?' srsName="'+t+'">':">",(e.length&&n(e[0])&&e[0].length&&n(e[0][0])?e:[e]).forEach((function(e,t){var r=i(e).map((function(e){return e[0]+(a?",":" ")+e[1]})),n=a?"outerBoundaryIs":"exterior",o=a?"innerBoundaryIs":"interior";l+=(t<1?"<gml:"+n+">":"<gml:"+o+">")+"<gml:LinearRing>"+(a?"<gml:coordinates>":"<gml:posList>")+r.join(" ")+(a?"</gml:coordinates>":"</gml:posList>")+"</gml:LinearRing>"+(t<1?"</gml:"+n+">":"</gml:"+o+">")})),l+="</gml:Polygon>"},c=function(e,t,r){var n=o(r),i="<gml:LineString";i+=t?' srsName="'+t+'">':">";var a=e.map((function(e){return e[0]+(n?",":" ")+e[1]}));return(i+=(n?"<gml:coordinates>":"<gml:posList>")+a.join(" ")+(n?"</gml:coordinates>":"</gml:posList>"))+"</gml:LineString>"};e.exports={closePolygon:i,pointElement:a,polygonElement:l,lineStringElement:c,processOGCGeometry:function(e,t){var r="",n=t.projection||"EPSG:4326";switch(t.type){case"Point":r+=a(t.coordinates,n,e);break;case"MultiPoint":r+='<gml:MultiPoint srsName="'+(t.projection||"EPSG:4326")+'">',t.coordinates.forEach((function(t){t&&(r+="<gml:pointMember>",r+=a(t,n,e),r+="</gml:pointMember>")})),r+="</gml:MultiPoint>";break;case"LineString":r+=c(t.coordinates,n,e);break;case"MultiLineString":var o="3.2"===e?"MultiCurve":"MultiLineString",i="3.2"===e?"curveMember":"lineStringMember";r+="<gml:".concat(o,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+i+">",r+=c(t,n,e),r+="</gml:"+i+">")})),r+="</gml:"+o+">";break;case"Polygon":r+=l(t.coordinates,n,e);break;case"MultiPolygon":var u="3.2"===e?"MultiSurface":"MultiPolygon",s="3.2"===e?"surfaceMembers":"polygonMember";r+="<gml:".concat(u,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+s+">",r+=l(t,n,e),r+="</gml:"+s+">")})),r+="</gml:"+u+">"}return r}}},78889:(e,t,r)=>{var n=r(91175),o=r(27361),i=function(e){return/[<>&'"]/.test(e)?"<![CDATA[".concat(e,"]]>"):e},a=r(65692).processOGCGeometry,l={"1.0.0":"2.0","1.1.0":"3.1.1","2.0":"3.2","2.0.0":"3.2"},c=function(e){return o(e,"featureTypes[0].properties")},u=function(e,t){return n((c(t)||[]).filter((function(t){return t.name===e})))},s=function(e){return e.targetNamespace},p=function(e){return 0===e.type.indexOf("gml:")},f=function(e,t){return null==t||t&&!0===t.nillable||t&&!1===t.nillable&&null!=e},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geom,r=e.properties,n=arguments.length>1?arguments[1]:void 0;return f(p(n)?t:r[n.name],n)};e.exports={schemaLocation:s,isGeometryType:p,featureTypeSchema:function(e){return"xmlns:".concat(e.targetPrefix,'="').concat(s(e),'"')},getValue:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1.1.0",o=p(u(t,r));return o?e?a(n,{type:e.type,coordinates:e.coordinates}):"":null==e?"":"string"==typeof e?i(e):e},getPropertyDesciptor:u,findGeometryProperty:function(e){return n((c(e)||[]).filter((function(e){return 0===e.type.indexOf("gml:")})))},getFeatureTypeProperties:c,getTypeName:function(e){return e.targetPrefix?e.targetPrefix+":"+e.featureTypes[0].typeName:e.featureTypes[0].typeName},wfsToGmlVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.1.0";return l[e]},processOGCGeometry:a,isValid:function(e,t){return c(t).map((function(t){return g(e,t)}))},isValidProperty:g,isValidValueForPropertyName:function(e,t,r){return f(e,u(t,r))},isValidValue:f}}}]);