(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4935,4226,6882],{5615:(e,t,r)=>{var n={"./CRSSelector":18790,"./CRSSelector.jsx":18790,"./MousePosition":42454,"./MousePosition.jsx":42454,"./MousePositionLabelDD":59560,"./MousePositionLabelDD.jsx":59560,"./MousePositionLabelDM":84848,"./MousePositionLabelDM.jsx":84848,"./MousePositionLabelDMS":47461,"./MousePositionLabelDMS.jsx":47461,"./MousePositionLabelDMSNW":95762,"./MousePositionLabelDMSNW.jsx":95762,"./MousePositionLabelYX":54717,"./MousePositionLabelYX.jsx":54717,"./__tests__/CRSSelector-test":71188,"./__tests__/CRSSelector-test.js":71188,"./__tests__/MousePosition-test":93528,"./__tests__/MousePosition-test.js":93528,"./__tests__/MousePositionLabelDM-test":22922,"./__tests__/MousePositionLabelDM-test.js":22922,"./__tests__/MousePositionLabelDMS-test":53389,"./__tests__/MousePositionLabelDMS-test.js":53389,"./__tests__/MousePositionLabelDMSNW-test":53884,"./__tests__/MousePositionLabelDMSNW-test.js":53884,"./mousePosition.css":94889};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=5615},86450:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(67294);const o=(e,t)=>{const[o,i]=(0,n.useState)(!1),[a,l]=(0,n.useState)(null),c=(0,n.useRef)();return(0,n.useEffect)((()=>(e&&!c.current&&(i(!1),l(null),r(87376)("./"+e+"/"+t).then((e=>{c.current=e.default,i(!0)})).catch((e=>{l(e)}))),()=>{})),[e]),[o,c.current,a]}},87376:(e,t,r)=>{var n={"./hooks/useMapTool":[86450],"./hooks/useMapTool.js":[86450],"./leaflet/locate":[33965,3965],"./leaflet/locate.js":[33965,3965],"./openlayers/locate":[77095,3201,8158,7095],"./openlayers/locate.js":[77095,3201,8158,7095]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=87376,e.exports=o},55927:(e,t,r)=>{"use strict";r.d(t,{R4:()=>n,E9:()=>o});var n="DASHBOARD:DASHBOARD_RESET",o="DASHBOARD:DASHBOARD_LOADED"},90825:(e,t,r)=>{"use strict";r.d(t,{H:()=>b,k:()=>g});var n=r(80416),o=r(67007),i=r(32420),a=r(75875),l=r.n(a),c=r(8575),s=r(27418),u=r.n(s),p=r(5055),f=r.n(p);const d=function(e,t){var r=c.parse(e,!0),n=c.format(u()({},r,{query:u()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l().get(n).then((function(e){var t;return f().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))};var m=r(24262),y=r(96486);function b(e,t,r){return function(a){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?i.describeFeatureTypeOGCSchemas(e,r.name).then((function(e){var o=(0,y.get)(e,"complexType[0].complexContent.extension.sequence.element"),i=(0,y.head)(o&&o.filter((function(e){return"the_geom"===e.name||0===e.type.prefix.indexOf("gml")})));return i=i&&i.type.localPart,r.geometryType=i&&i.split("PropertyType")[0],a((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&d(e,r.name).then((function(e){var o=(0,y.get)(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),a((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return a((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function g(e,t){var r=(0,m.getCapabilitiesUrl)(e);return function(i){return i((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(r,t).then((function(t){var r=o.ZP.parseLayerCapabilities(t,e);i(r?(0,n.tV)(e.id,"id",(0,m.formatCapabitiliesOptions)(r)):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},7878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,vo:()=>l,l1:()=>c,J9:()=>s,U:()=>u,z8:()=>p,ql:()=>f,O_:()=>d,M$:()=>m,Ug:()=>y,p5:()=>b,Fz:()=>g,WZ:()=>v,bP:()=>h,On:()=>O,d_:()=>w,xM:()=>E,bl:()=>S,Wi:()=>P,PN:()=>j,_M:()=>C,Wm:()=>x,Eg:()=>T,V1:()=>k,cY:()=>I,RD:()=>A,Hl:()=>F,co:()=>D,uY:()=>R,H8:()=>N,je:()=>M,go:()=>L,_8:()=>_,xd:()=>Z,o7:()=>B,Nr:()=>G,Gf:()=>z,nh:()=>U,Rf:()=>W,D6:()=>V,Sm:()=>q,Ef:()=>H,jW:()=>$,kQ:()=>K,JG:()=>Y,js:()=>X,q$:()=>Q,OZ:()=>J,Nc:()=>ee,NV:()=>te,I5:()=>re,QL:()=>ne,I:()=>oe,ku:()=>ie,EU:()=>ae,IV:()=>le,HT:()=>ce,lg:()=>se,ds:()=>ue,VF:()=>pe,DD:()=>fe,uo:()=>de,Ry:()=>me,ZH:()=>ye,AQ:()=>be,yC:()=>ge,F:()=>ve,mc:()=>he,uM:()=>we,eJ:()=>Ee,uP:()=>Se,N5:()=>Pe,bn:()=>je,Bm:()=>Ce,F2:()=>xe,jR:()=>Te,$J:()=>ke});var n=r(75875),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a="ADD_FILTER_FIELD",l="REMOVE_FILTER_FIELD",c="UPDATE_FILTER_FIELD",s="UPDATE_EXCEPTION_FIELD",u="ADD_GROUP_FIELD",p="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",m="EXPAND_ATTRIBUTE_PANEL",y="EXPAND_SPATIAL_PANEL",b="QUERYFORM:EXPAND_CROSS_LAYER",g="QUERYFORM:SET_CROSS_LAYER_PARAMETER",v="QUERYFORM:RESET_CROSS_LAYER_FILTER",h="SELECT_SPATIAL_METHOD",O="SELECT_VIEWPORT_SPATIAL_METHOD",w="UPDATE_GEOMETRY",E="SELECT_SPATIAL_OPERATION",S="CHANGE_SPATIAL_ATTRIBUTE",P="CHANGE_SPATIAL_FILTER_VALUE",j="REMOVE_SPATIAL_SELECT",C="SHOW_SPATIAL_DETAILS",x="QUERY_FORM_SEARCH",T="QUERY_FORM_RESET",k="SHOW_GENERATED_FILTER",I="CHANGE_DWITHIN_VALUE",A="ZONE_SEARCH",F="ZONE_SEARCH_ERROR",D="ZONE_FILTER",R="ZONE_CHANGE",N="ZONES_RESET",M="SIMPLE_FILTER_FIELD_UPDATE",L="ADD_SIMPLE_FILTER_FIELD",_="REMOVE_SIMPLE_FILTER_FIELD",Z="REMOVE_ALL_SIMPLE_FILTER_FIELDS",B="UPDATE_FILTER_FIELD_OPTIONS",G="LOADING_FILTER_FIELD_OPTIONS",z="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",U="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",V="SET_AUTOCOMPLETE_MODE",q="TOGGLE_AUTOCOMPLETE_MENU",H="QUERYFORM:LOAD_FILTER";function $(e){return{type:a,groupId:e}}function K(e,t){return{type:u,groupId:e,index:t}}function Y(e){return{type:l,rowId:e}}function X(e,t){return{type:q,rowId:e,status:t}}function Q(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:c,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function J(e,t){return{type:s,rowId:e,exceptionMessage:t}}function ee(e,t){return{type:p,groupId:e,logic:t}}function te(e){return{type:V,status:e}}function re(e){return{type:f,groupId:e}}function ne(e){return{type:d,attributes:e}}function oe(e){return{type:m,expand:e}}function ie(e){return{type:y,expand:e}}function ae(e){return{type:b,expand:e}}function le(e,t){return{type:g,key:e,value:t}}function ce(e,t){return{type:h,fieldName:t,method:e}}function se(){return{type:O}}function ue(e){return{type:w,geometry:e}}function pe(e,t){return{type:E,fieldName:t,operation:e}}function fe(e){return{type:S,attribute:e}}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:P,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function me(){return{type:j}}function ye(e){return{type:C,show:e}}function be(e){return{type:I,distance:e}}function ge(e,t){return{type:x,searchUrl:e,filterObj:t}}function ve(e){return{type:H,filter:e}}function he(e){return{type:T,skip:e}}function Oe(e,t){return{type:F,error:e,id:t}}function we(e,t){return{type:A,active:e,id:t}}function Ee(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var a=o.data;if("object"!==i(a))try{a=JSON.parse(a)}catch(o){n(Oe("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:D,data:e,id:t}}(a,r)),n(we(!1,r))})).catch((function(e){n(Oe(e,r))}))}}function Se(e,t){return{type:R,id:e,value:t}}function Pe(e){return{type:z,rowId:(new Date).getTime(),groupId:e}}function je(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:U,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function Ce(e){return{type:W,rowId:e}}function xe(){return{type:v}}function Te(e,t){return{type:G,status:e,filterField:t}}function ke(e,t,r){return{type:B,filterField:e,options:t,valuesCount:r}}},57579:(e,t,r)=>{"use strict";r.d(t,{Jm:()=>l,AE:()=>c,dm:()=>s,n8:()=>u,BV:()=>p,Cz:()=>f,$A:()=>d,eb:()=>m,v8:()=>y,yY:()=>b,ff:()=>g,S0:()=>v,Q6:()=>h,kb:()=>O,GV:()=>w,LH:()=>E,lG:()=>S,Km:()=>P,pV:()=>j,V5:()=>C,IT:()=>x,VR:()=>T,jv:()=>k,oU:()=>I,Ym:()=>A,uU:()=>F,ke:()=>D,nw:()=>R,A4:()=>N,C2:()=>M,Qe:()=>L,Ij:()=>_,Ko:()=>Z,E9:()=>B,K4:()=>G,c_:()=>z,uT:()=>U,bS:()=>W,Rz:()=>V,t4:()=>q,_k:()=>H,w2:()=>$,YA:()=>K,sD:()=>Y,Rb:()=>X,fy:()=>Q,kr:()=>J,f:()=>ee,Ff:()=>te,Pt:()=>re,ep:()=>ne});var n=r(23570),o=r.n(n);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l="WIDGETS:INSERT",c="WIDGETS:NEW",s="WIDGETS:EDIT",u="WIDGETS:EDIT_NEW",p="WIDGETS:EDITOR_CHANGE",f="WIDGETS:EDITOR_SETTING_CHANGE",d="WIDGETS:UPDATE_PROPERTY",m="WIDGETS:UPDATE_LAYER",y="WIDGETS:CHANGE_LAYOUT",b="WIDGETS:DELETE",g="WIDGETS:CLEAR_WIDGETS",v="WIDGETS:ADD_DEPENDENCY",h="WIDGETS:REMOVE_DEPENDENCY",O="WIDGETS:LOAD_DEPENDENCIES",w="WIDGETS:RESET_DEPENDENCIES",E="WIDGETS:TOGGLE_CONNECTION",S="WIDGETS:OPEN_FILTER_EDITOR",P="WIDGETS:EXPORT_CSV",j="WIDGETS:EXPORT_IMAGE",C="WIDGETS:WIDGET_SELECTED",x="WIDGETS:NEW_CHART",T="floating",k="dependencySelector",I=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,A="WIDGET:TOGGLE_COLLAPSE",F="WIDGET:TOGGLE_COLLAPSE_ALL",D="WIDGET:TOGGLE_MAXIMIZE",R="WIDGET:TOGGLE_TRAY",N=function(e){return{type:c,widget:e}},M=function(){return{type:x}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:l,target:t,id:o()(),widget:e}},_=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T;return{type:d,id:e,target:o,key:t,value:r,mode:n}},Z=function(e){return{type:m,layer:e}},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:b,target:t,widget:e}},G=function(){return{type:g}},z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return{type:y,allLayouts:t,layout:e,target:r}},U=function(e){return{type:s,widget:e}},W=function(e,t){return{type:u,widget:e,settings:t}},V=function(e,t){return{type:p,key:e,value:t}},q=function(e,t){return{type:f,key:e,value:t}},H=function(e){return{type:O,dependencies:e}},$=function(e,t,r,n){return{type:E,active:e,availableDependencies:t,options:r,target:n}},K=function(e){return q("step",e)},Y=function(e){var t=e.data,r=void 0===t?[]:t,n=e.title;return{type:P,data:r,title:void 0===n?"export":n}},X=function(e){var t=e.widgetDivId;return{type:j,widgetDivId:t}},Q=function(){return{type:S}},J=function(e,t){return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({active:e},t),q("".concat(k),r);var r},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:A,widget:e,target:t}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return{type:F,target:e}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:D,widget:e,target:t}},ne=function(e){return{type:R,value:e}}},78795:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(11847),o=r(8575),i=r(96486),a=r(27418),l=r.n(a),c=r(65792),s=r.n(c),u=r(24262);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=(0,i.uniq)(Object.keys(s().brewer).map((function(e){return e.toLocaleLowerCase()}))).map((function(e){return{name:e,colors:e}})),y=[{name:"red",colors:["#000","#f00"]},{name:"green",colors:["#000","#008000","#0f0"]},{name:"blue",colors:["#000","#00f"]},{name:"gray",colors:["#333","#eee"]},{name:"jet",colors:["#00f","#ff0","#f00"]}].concat(f(m)),b=function(e,t,r,n){var o=e?(0,i.head)((e.thematic.colors||e.thematic.additionalColors||[]).filter((function(e){return e.name===t})))||(0,i.head)(y.filter((function(e){return e.name===t}))):n?(0,i.head)([n].concat(f(y)).filter((function(e){return e.name===t}))):(0,i.head)(y.filter((function(e){return e.name===t})));return o&&((0,i.isString)(o.colors)||o.colors.length>=2)?{ramp:"custom",colors:s().scale(o.colors).colors(r).join(",")}:{ramp:t}},g=function(e,t){var r=e.thematic&&e.thematic.params||[],n=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce((function(o,i){return function(e,t){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((function(t){return t.field===e})).length>0}(e,t)}(i,[].concat(f(r),f(n)))?l()(o,function(e,t,r){return{viewparams:(e?e+";":"")+t+":"+r}}(o.viewparams,i,t[i])):"ramp"===i?l()(o,b(e,t[i],t.intervals||5)):"classification"===i?l()(o,(a=t[i])?{customClasses:a.reduce((function(e,t){return[].concat(f(e),[t.min+","+t.max+","+t.color])}),[]).join(";")}:{}):"attribute"===i?l()(o,{attribute:e.thematic&&e.thematic.fieldAsParam?t[i]:t.field}):"field"===i&&e.thematic&&!e.thematic.fieldAsParam?o:"strokeWeight"!==i||t.strokeOn?"strokeOn"===i?o:l()(o,p({},i,t[i])):l()(o,p({},i,-1));var a}),{})},v=function(e){return l()({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{})},h=function(e){return e.reduce((function(e,t){return(0,i.isNumber)(t)?t:e}),null)},O=function(e){return e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null},w=function(e){return e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080"},E={getStyleService:function(e,t){var r=(0,n.ij)((0,u.getLayerUrl)(e));return o.format(l()(v(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:l()({},g(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:function(e){var t=(0,n.ij)((0,u.getLayerUrl)(e));return o.format(l()(v(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:function(e,t){var r=(0,n.ij)((0,u.getLayerUrl)(e));return o.format(l()(v(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:function(e,t){return{SLD:E.getStyleService(e,t),viewparams:g(e,t).viewparams}},getMetadataParameters:function(e,t){return g(e,t)},getFieldsService:function(e){var t=(0,n.ij)((0,u.getLayerUrl)(e)),r=e.thematic&&e.thematic.datatable||e.name;return o.format(l()(v(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+r+"/attributes.json"}))},readFields:function(e){return(0,i.sortBy)((0,i.castArray)(e.Attributes.Attribute||[]).filter((function(e){return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t})).map((function(e){return{name:e.name,type:(e.type,"number")}})),(function(e){return e.name}))},readClassification:function(e){!function(e){if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");(0,i.castArray)(e.Rules.Rule).forEach((function(e){if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")}))}(e);var t=(0,i.castArray)(e.Rules.Rule||[]);return t.map((function(e,r){var n,o,i,a;return{title:e.Title,color:w(e),type:O(e),min:h([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,r===t.length-1&&(null==e||null===(n=e.Filter)||void 0===n||null===(o=n.PropertyIsGreaterThanOrEqualTo)||void 0===o?void 0:o.Literal)]),max:h([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===r&&(null==e||null===(i=e.Filter)||void 0===i||null===(a=i.PropertyIsLessThan)||void 0===a?void 0:a.Literal)])}}))||[]},readRasterClassification:function(e){var t,r,n,o;return((null===(r=(0,i.castArray)(null==e||null===(t=e.Rules)||void 0===t?void 0:t.Rule)[0])||void 0===r||null===(n=r.RasterSymbolizer)||void 0===n||null===(o=n.ColorMap)||void 0===o?void 0:o.ColorMapEntry)||[]).map((function(e){return{color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])}}))},methods:["equalInterval","quantile","jenks"],getThematicParameters:function(e){return e.map((function(e){return e.type&&E.standardParams[e.type]&&l()({},E.standardParams[e.type],e)||e}))},standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:b,getColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t?t.thematic.colors||[].concat(f(e),f(t.thematic.additionalColors||[])):n?[n].concat(f(e)):f(e);return o.map((function(e){return!(0,i.isString)(e.colors)&&e.colors.length>=r?e:l()({},e,{colors:s().scale(e.colors).colors(r)})}))},hasThematicStyle:function(e){return!!(e&&e.params&&e.params.SLD)},removeThematicStyle:function(e){e.SLD,e.viewparams;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["SLD","viewparams"]);return l()({},t,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}};const S=E},8954:(e,t,r)=>{"use strict";r.d(t,{eb:()=>v,IW:()=>h,DG:()=>O});var n=r(18446),o=r.n(n),i=r(75875),a=r.n(i),l=r(9082),c=r(78795);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=["equalInterval","quantile","jenks","standardDeviation"],m=["equalInterval","quantile","jenks"],y={};function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t.map((function(t){return t.ruleId===e?r(t):t}))}var g=function(e){var t=e.baseUrl,r=e.styleService,n=null!=r&&r.isStatic?r.baseUrl:t;if(y[n])return new Promise((function(e){return e(y[n])}));var o=c.Z.getCapabilitiesUrl({url:n});return(null!=r&&r.isStatic?new Promise((function(e){return e(r)})):l.ZP.getStyleService({baseUrl:n})).then((function(e){return a().get(o).then((function(t){var r=t.data;return[e,r]})).catch((function(){return[e,null]}))})).then((function(e){var t,r,o,i,a,l,c,s,p,b,g,v=(g=2,function(e){if(Array.isArray(e))return e}(b=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(b,g)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(b,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=v[0],O=v[1],w=u(u({},h),{},{classificationMethods:O?(t=O,r=(t||{}).capabilities,o=void 0===r?{}:r,i=o.vector,a=void 0===i?{}:i,l=o.raster,c=void 0===l?{}:l,s=a.classifications||[],p=c.classifications||[],{vector:s.filter((function(e){return-1!==d.indexOf(e)})),raster:p.filter((function(e){return-1!==d.indexOf(e)}))}):{vector:m,raster:m}});return y[n]=w,w}))};function v(e){var t=e.baseUrl,r=e.styleService;return g({baseUrl:t,styleService:r})}function h(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,l=["intervals","method","reverse","attribute","ramp"],s=u(u({},r),t),f=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==s?void 0:s.method)&&!t.classification){var d=c.Z.getColor(void 0,t.ramp,s.intervals).colors.split(",");return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),s),{},{classification:s.classification.map((function(e,t){return u(u({},e),{},{color:d[t]})})),errorId:void 0})})))}))}var m=l.reduce((function(e,t){return u(u({},e),{},p({},t,r[t]))}),{}),y=l.reduce((function(e,t){return u(u({},e),{},p({},t,s[t]))}),{});if(!l.find((function(e){return void 0===s[e]}))&&!o()(m,y)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==s?void 0:s.method)){var g="custom"===s.ramp&&s.classification.length>0&&{name:"custom",colors:s.classification.map((function(e){return e.color}))},v=c.Z.getColor(void 0,s.ramp,s.intervals,g);return a().get(c.Z.getStyleMetadataService(i,u({intervals:s.intervals,method:s.method,attribute:s.attribute,reverse:s.reverse},v))).then((function(e){var r=e.data;return b(f,n,(function(e){return u(u(u({},e),t),{},{classification:c.Z.readClassification(r),errorId:void 0})}))})).catch((function(){return b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationError"})}))}))}return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}function O(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,l=["intervals","continuous","method","reverse","ramp"],s=u(u({},r),t),f=r.ruleId,d=l.reduce((function(e,t){return u(u({},e),{},p({},t,r[t]))}),{}),m=l.reduce((function(e,t){return u(u({},e),{},p({},t,s[t]))}),{});if(!l.find((function(e){return void 0===s[e]}))&&!o()(d,m)){var y="custom"===s.ramp&&s.classification.length>0&&{name:"custom",colors:s.classification.map((function(e){return e.color}))},g=c.Z.getColor(void 0,s.ramp,s.intervals,y);return a().get(c.Z.getStyleMetadataService(i,u({intervals:s.intervals,continuous:s.continuous,method:s.method,reverse:s.reverse},g))).then((function(e){var r=e.data;return b(f,n,(function(e){return u(u(u({},e),t),{},{classification:c.Z.readRasterClassification(r),errorId:void 0})}))})).catch((function(){return b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationRasterError"})}))}))}return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}},9082:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>x});var n=r(75875),o=r.n(n),i=r(27418),a=r.n(i),l=r(96486);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s={},u=function(e){return e.map((function(e){return(0,l.mapKeys)(e,(function(e,t){return(0,l.camelCase)(t)}))}))},p=r(91175),f=r.n(p),d=r(84596),m=r.n(d),y=r(99009);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=[{regex:/gt-css/,format:"css"}],w={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},E=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?w.sldse:w.sld:w[e]||w.sld},S=function(e,t){var r=e.options,n=void 0===r?{}:r,o=e.format,i=e.baseUrl,a=e.name,l=e.workspace,c=e.languageVersion,s=t?{name:encodeURIComponent(a)}:{};return{options:v(v({},n),{},{params:v(v({},n.params),s),headers:v(v({},n.headers||{}),{},{"Content-Type":E(o,c)})}),url:"".concat(i,"rest/").concat(l&&"workspaces/".concat(l,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},P=function(e){var t=e.geoserverBaseUrl,r=e.workspace,n=e.name,o=e.format,i=void 0===o?"json":o;return"".concat(t,"rest/").concat(r&&"workspaces/".concat(r,"/")||"","styles/","".concat(encodeURIComponent(n),".").concat(i))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m()((null==e?void 0:e.entry)||[]);return t.reduce((function(e,t){return v(v({},e),{},h({},t["@key"],t.$))}),{})},C=function(e){var t=e.baseUrl,r=e.styleName,n=e.metadata,i=P(v(v({},(0,y.$N)(r)),{},{geoserverBaseUrl:t}));return o().get(i).then((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data,a=void 0===r?{}:r;return o().put(i,{style:v(v({},a.style),{},{metadata:v(v({},j(null===(e=a.style)||void 0===e?void 0:e.metadata)),n)})})}))};const x={saveStyle:function(e,t,r,n){var i=e+"styles/"+encodeURI(t),l=a()({},n);return l.headers=a()({},l.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),o().put(i,r,l)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return s[t]?new Promise((function(e){return e(s[t])})):o().all([o().get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return(0,l.get)(t,"about.resource")})).catch((function(){return null})),o().get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return(0,l.get)(t,"about.resource")})).catch((function(){return null})),o().get("".concat(t,"rest/fonts"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return(0,l.get)(t,"fonts")})).catch((function(){return null}))]).then((function(e){var r,n,o=(n=3,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(r,n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],l=o[2],p={version:i&&u(i),manifest:a&&u(a),fonts:l};return i&&a?(s[t]=p,s[t]):p}))}({baseUrl:t}).then((function(e){var r=e.version,n=e.manifest,o=e.fonts,i=void 0===o?[]:o;if(!r)return null;var a,l=(n||[]).map((function(e){var t=e.name;return f()(O.filter((function(e){var r=e.regex;return t.match(r)})).map((function(e){return e.format})))})).filter((function(e){return e})),c=f()(r.filter((function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()})))||{};return{baseUrl:t,version:c.version,formats:[].concat((a=l,function(e){if(Array.isArray(e))return b(e)}(a)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["sld"]),availableUrls:[],fonts:i}}))},getStyle:function(e){var t=e.options,r=e.format,n=e.baseUrl,i=e.styleName,a=(0,y.$N)(i),l=a.name,c=a.workspace,s=S({options:t,format:r,baseUrl:n,name:l,workspace:c});return o().get(s.url,s.options)},createStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,y.$N)(l),p=u.name,f=u.workspace,d=S({options:n,format:a,baseUrl:t,name:p,workspace:f,languageVersion:c},!0);return o().post(d.url,r,d.options).then((function(){return s?C({baseUrl:t,styleName:l,metadata:s}).then((function(){return null})).catch((function(){return null})):null}))},updateStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,y.$N)(l),p=u.name,f=u.workspace,d=S({options:n,format:a,baseUrl:t,name:p,workspace:f,languageVersion:c});return o().put(d.url,r,d.options).then((function(){return s?C({baseUrl:t,styleName:l,metadata:s}).then((function(){return null})).catch((function(){return null})):null}))},deleteStyle:function(e){var t=e.baseUrl,r=e.options,n=e.format,i=void 0===n?"sld":n,a=e.styleName,l=(0,y.$N)(a),c=l.name,s=l.workspace,u=S({options:r,format:i,baseUrl:t,name:c,workspace:s});return o().delete(u.url,u.options)},getStylesInfo:function(e){var t=e.baseUrl,r=e.styles,n=void 0===r?[]:r,i=[],l=n.length;return new Promise((function(e){n&&0!==n.length?n.forEach((function(r,c){var s=r.name;return o().get(P(v(v({},(0,y.$N)(s)),{},{geoserverBaseUrl:t}))).then((function(t){var r=t.data;i[c]=a()({},n[c],r&&r.style&&v(v(v({},r.style),r.style.metadata&&{metadata:j(r.style.metadata)}),{},{name:(0,y.U_)(r.style)})||{}),0==--l&&e(i.filter((function(e){return e})))})).catch((function(){i[c]=a()({},n[c]),0==--l&&e(i.filter((function(e){return e})))}))})):e([])}))},getStyleCodeByName:function(e){var t=e.baseUrl,r=e.styleName,n=e.options,i=(0,y.$N)(r),a=i.name,l=i.workspace,c=P({name:a,workspace:l,geoserverBaseUrl:t});return o().get(c,n).then((function(e){return e.data&&e.data.style&&e.data.style.name?o().get(P({workspace:l,geoserverBaseUrl:t,name:e.data.style.name,format:(r=e.data.style.filename,r.split(".").pop())})).then((function(t){var r=t.data;return v(v({},e.data.style),{},{code:r})})):null;var r}))},updateStyleMetadata:C}},40797:(e,t,r)=>{"use strict";r.d(t,{v0:()=>a,k9:()=>l,ZP:()=>s});var n=r(53329),o=r(15402),i=r(5346),a=i.Z,l=o.Z,c=n.Z;const s={Message:i.Z,HTML:l,DateFormat:c}},87427:(e,t,r)=>{"use strict";r.d(t,{kZ:()=>s,bR:()=>u});var n=r(96486),o=r(18093);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=(0,o.compose)((0,o.withState)("alertModal","onShowAlertModal",!1),(0,o.withState)("showEditor","onShowEditor",!1)),s=(0,o.compose)((0,o.withHandlers)({onClose:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,o=e.onUpdateOriginalSettings,i=void 0===o?function(){}:o,c=e.onUpdateNode,s=void 0===c?function(){}:c,u=e.originalSettings,p=e.settings,f=e.onHideSettings,d=void 0===f?function(){}:f,m=e.onShowAlertModal,y=void 0===m?function(){}:m;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=Object.keys(p.options).reduce((function(e,t){return a(a({},e),{},l({},t,"opacity"!==t||u[t]?u[t]:1))}),{});(0,n.isEqual)(o,p.options)||e?((0,n.isArray)(t)&&t.forEach((function(e){(0,n.isFunction)(e)&&e()})),s(p.node,p.nodeType,a(a({},p.options),u)),d(),y(!1),i({}),r({})):y(!0)}},onSave:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,o=e.onUpdateOriginalSettings,i=void 0===o?function(){}:o,a=e.onHideSettings,l=void 0===a?function(){}:a,c=e.onShowAlertModal,s=void 0===c?function(){}:c;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,n.isArray)(e)&&e.forEach((function(e){(0,n.isFunction)(e)&&e()})),l(),s(!1),i({}),r({})}}}),(0,o.lifecycle)({UNSAFE_componentWillMount:function(){var e=this.props,t=e.element,r=void 0===t?{}:t,n=e.onUpdateOriginalSettings,o=void 0===n?function(){}:n,i=e.onUpdateInitialSettings,l=void 0===i?function(){}:i;o({}),l(a({},r))},componentWillReceiveProps:function(e){var t=this.props,r=t.settings,o=void 0===r?{}:r,i=t.onRetrieveLayerData,a=void 0===i?function(){}:i;!o.expanded&&e.settings&&e.settings.expanded&&(0,n.isNil)(e.element.description)&&"wms"===e.element.type&&a(e.element)},componentWillUpdate:function(e){var t=this.props,r=t.initialActiveTab,n=void 0===r?"general":r,o=t.settings,i=void 0===o?{}:o,l=t.onUpdateOriginalSettings,c=void 0===l?function(){}:l,s=t.onUpdateInitialSettings,u=void 0===s?function(){}:s,p=t.onSetTab,f=void 0===p?function(){}:p;!i.expanded&&e.settings&&e.settings.expanded&&(c({}),u(a({},e.element)),f(n))}})),u=(0,o.compose)(c,s)},6869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),o=r.n(n),i=r(84922),a=r(79958),l=r.n(a),c=(0,i.Z)(l()),s=r(43143),u=r(12226);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y={base:190,range:0,s:.95,v:.63},b=function(e,t){var r=t.base,n=t.range,o=m(t,["base","range"]);return((0,s.qH)(r,n,e+1,o)||[0]).slice(1)};function g(e){var t=e.type,r=e.isModeBarVisible;switch(t){case"pie":return{t:r?20:5,b:5,l:2,r:2,pad:4};default:return{l:5,r:5,b:30,t:r?20:5,pad:4}}}function v(e){var t=e.series,r=void 0===t?[]:t,n=e.cartesian,o=e.type,i=e.yAxis,a=e.xAxisAngle,l=e.xAxisOpts,c=void 0===l?{}:l,s=e.yAxisOpts,u=void 0===s?{}:s,p=e.data,f=void 0===p?[]:p,d=e.autoColorOptions,m=void 0===d?y:d;switch(o){case"pie":return{colorway:b(f.length,m)};default:return{colorway:b(r.length,m),yaxis:{type:null==u?void 0:u.type,automargin:!0,tickformat:null==u?void 0:u.format,tickprefix:null==u?void 0:u.tickPrefix,ticksuffix:null==u?void 0:u.tickSuffix,showticklabels:!0===i,showgrid:n},xaxis:{showgrid:n,type:null==c?void 0:c.type,showticklabels:!(null!=c&&c.hide),nticks:c.nTicks,automargin:!0,tickangle:null!=a?a:"auto"}}}}const h=function(e){var t=e.onInitialized,r=function(e){var t=e.xAxis,r=e.series,n=void 0===r?[]:r,o=e.yAxisLabel,i=e.type,a=void 0===i?"line":i,l=e.height,c=e.width,s=e.legend,p=null==t?void 0:t.dataKey,d=c>350;return{layout:f(f({showlegend:s},v(f({},e))),{},{margin:g(f(f({},e),{},{isModeBarVisible:d})),autosize:!1,automargin:!1,height:l,width:c}),data:n.map((function(t){var r=t.dataKey;return f({type:a,name:o||r},function(e){var t=e.type,r=e.xDataKey,n=e.yDataKey,o=e.data,i=e.formula,a=o.map((function(e){return e[r]})),l=o.map((function(e){return e[n]}));switch(t){case"pie":return{textposition:"inside",values:l,labels:a};default:return i&&(l=l.map((function(e){var t=e;try{return(0,u.B)(i,{value:t})}catch(t){return e}}))),{x:a,y:l}}}(f(f({},e),{},{xDataKey:p,yDataKey:r})))})),config:{displayModeBar:d,modeBarButtonsToRemove:["lasso2d","select2d","hoverCompareCartesian","hoverClosestCartesian","hoverClosestPie"],displaylogo:!1}}}(m(e,["onInitialized"])),n=r.data,i=r.layout,a=r.config;return o().createElement(c,{onInitialized:t,data:n,layout:i,config:a})}},30029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(5346);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,y,b,g={width:"100%",height:"100%",textAlign:"center",verticalAlign:"center"},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(i){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function c(){return s(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return this.props.loading?o().createElement("div",{style:g},o().createElement(l.Z,{msgId:"loading"})):o().createElement("div",{style:g},o().createElement(l.Z,{msgId:"featuregrid.noFeaturesAvailable"}))}}])&&u(t.prototype,r),c}(o().PureComponent);m=v,y="propTypes",b={loading:a().bool},y in m?Object.defineProperty(m,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[y]=b;const h=v},93358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ze});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(96958),c=r(96259),s=r(53370),u=r.n(s),p=r(73935),f=r.n(p);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),h(g(t=i.call(this,e)),"scrollListener",(function(){t.props.isFocused||(t.scroll=t.canvas.scrollTop);var e=Math.ceil(t.canvas.clientHeight/t.props.rowHeight),r=Math.floor(t.canvas.scrollTop/t.props.rowHeight),n=r+e;t.props.onGridScroll&&t.props.onGridScroll({firstRowIdx:r,lastRowIdx:n})})),h(g(t),"setCanvasListener",(function(){t.canvas=f().findDOMNode(g(t)).querySelector(".react-grid-Canvas"),t.canvas&&t.canvas.addEventListener("scroll",t.scrollListener)})),t}return t=a,(r=[{key:"componentDidMount",value:function(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentWillUnmount",value:function(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.virtualScroll,n=t.displayFilters,o=t.scrollToTopCounter;e.displayFilters!==n&&this.onToggleFilter(),r&&(this.canvas&&this.canvas!==f().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),o!==e.scrollToTopCounter&&this.canvas&&(this.canvas.scrollTop=0))}}])&&m(t.prototype,r),a}(u());h(O,"propTypes",{displayFilters:o().bool});const w=O;var E=r(18093),S=r(89255);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var T=(0,E.branch)((function(e){return e.virtualScroll}),(0,E.compose)((0,E.mapPropsStream)((function(e){var t=(0,E.createEventHandler)(),r=t.handler,n=t.stream;return e.combineLatest(n.throttle((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return S.Observable.timer(e)})).scan((function(e){return e+1}),0).map((function(e){return{scrollToTopCounter:e}})).startWith({}),(function(e,t){return j(j(j({},e),t),{},{scrollToTop:r})}))})),(0,E.withHandlers)({onGridSort:function(e){var t=e.onGridSort,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){return o(0),r.apply(void 0,arguments)}},onAddFilter:function(e){var t=e.onAddFilter,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){o(1e3),r.apply(void 0,arguments)}}})))(w),k=r(96486),I=r(95344),A=r.n(I),F=r(73849),D=r(78819),R=r(43148),N=r(76364),M=r(37275),L=r(28878),_=r(49902);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,E.setObservableConfig)(L.Z);var z=(0,E.mapPropsStreamWithConfig)(L.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return{data:(0,k.isArray)(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((function(e){return{label:e,value:e}})):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy}}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,l=e.value,c=e.valuesCount,s=e.loadNextPage,u=e.loadPrevPage,p=e.maxFeatures,f=e.currentPage,d=e.busy,m=e.data,y=e.loading,b=void 0!==y&&y,g=Math.ceil(c/p);return a().createElement(_.Z,{pagination:{firstPage:1===f,lastPage:f===g,paginated:!0,loadPrevPage:u,loadNextPage:s},busy:d,dropUp:!1,data:m,open:t,onFocus:o,onToggle:r,onChange:i,onSelect:n,selectedValue:l,loading:b})})),U=(0,E.compose)((0,E.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory}}),{select:function(e){return function(){return B(B({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return B(B({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return B(B({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?B(B({},e),{},{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return B(B({},e),{},{open:!!e.changingPage||!e.open})}},loadNextPage:function(e){return function(){return B(B({},e),{},{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}},loadPrevPage:function(e){return function(){return B(B({},e),{},{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}}}))(z);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,r){return(Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(n);if(o){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $(this,e)});function l(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=i.call(this,e)).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValue=function(){return Y((t=K(r),X(l.prototype)),"getValue",t).call(t)},r}return t=l,(r=[{key:"render",value:function(){return a().createElement(U,V({},this.props,{url:M.ZP.getParsedUrl(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:N.Vd}))}}])&&q(t.prototype,r),l}(D.Z);Q(J,"propTypes",{column:o().object,dataType:o().string,inputProps:o().object,isValid:o().func,onBlur:o().func,autocompleteStreamFactory:o().func,url:o().string,typeName:o().string,value:o().string}),Q(J,"defaultProps",{isValid:function(){return!0},dataType:"string"});const ee=J;var te=r(82994);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ne={defaultEditor:function(e){return a().createElement(D.Z,e)},int:function(e){return a().createElement(R.Z,re({dataType:"int",inputProps:{step:1,type:"number"}},e))},number:function(e){return a().createElement(R.Z,re({dataType:"number",inputProps:{step:1,type:"number"}},e))},string:function(e){return e.autocompleteEnabled?a().createElement(ee,re({dataType:"string"},e)):a().createElement(D.Z,re({dataType:"string"},e))},boolean:function(e){return a().createElement(te.Z,re({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))}},oe=(0,E.withState)("value","onValueChange",(function(e){return e.value})),ie=r(18027),ae=r(47361);function le(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const fe=(0,E.compose)((0,E.defaultProps)({sortable:!0,autocompleteEnabled:!1,initPlugin:function(){},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!1,editors:function(e,t){return ne[e]?ne[e](t):ne.defaultEditor(t)},dataStreamFactory:function(e){var t=(0,E.createEventHandler)(),r=t.handler,n=t.stream;return function(e){return e.distinctUntilChanged((function(e,t){var r=e.features,n=e.pages,o=e.isFocused,i=t.features,a=t.pages,l=t.isFocused;return r===i&&o===l&&n===a})).switchMap((function(e){var t=e.size,r=e.pageEvents,n=e.isFocused,o=e.pages,i=e.pagination,a=e.vsOverScan,c=void 0===a?20:a,s=e.scrollDebounce,u=void 0===s?50:s;return e.onGridScroll$.debounceTime(u).filter((function(){return!n})).map((function(e){for(var r=e.firstRowIdx,n=e.lastRowIdx,a=r-c<0?0:r-c,s=n+c>i.totalFeatures-1?i.totalFeatures-1:n+c,u=Math.floor(a/t),p=Math.floor(s/t),f=!1,d=u;d<=p&&!f;d++)-1===(0,l.t3)(d*t,o,t)&&(f=!0);return f&&{startPage:u,endPage:p}})).filter((function(e){return e})).do((function(e){return r.moreFeatures(e)}))}))}(e.filter((function(e){return e.virtualScroll})).map((function(e){return ue(ue({},e),{},{onGridScroll$:n})}))).startWith({}).map((function(e){return ue(ue({},e),{},{onGridScroll:r})}))},virtualScroll:!0}),(0,E.withPropsOnChange)("showDragHandle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showDragHandle,r=void 0===t||t;return{className:r?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),(0,E.withPropsOnChange)(["enableColumnFilters"],(function(e){return{displayFilters:e.enableColumnFilters}})),(0,E.withPropsOnChange)(["editingAllowedRoles","virtualScroll"],(function(e){return{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}})),(0,E.withPropsOnChange)(["autocompleteEnabled"],(function(e){return{autocompleteEnabled:e.autocompleteEnabled}})),(0,E.withPropsOnChange)(["url"],(function(e){return{url:e.url}})),(0,E.withPropsOnChange)(["typeName"],(function(e){return{typeName:e.typeName}})),(0,E.withPropsOnChange)(["features","newFeatures","changes"],(function(e){return{rows:(e.newFeatures?[].concat(le(e.newFeatures),le(e.features)):e.features).filter(e.focusOnEdit?(0,l.ek)(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):function(){return!0}).map((function(t){return(0,l.Qc)(t,e.changes)})).map((function(e){var t;return ue(ue({},e),{},(pe(t={},"_!_id_!_",e.id),pe(t,"get",(function(t){return"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]})),t))}))}})),(0,E.withPropsOnChange)(["newFeatures","changes","focusOnEdit"],(function(e){return{isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}})),(0,E.withPropsOnChange)(["features","newFeatures","isFocused","virtualScroll","pagination"],(function(e){return{rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}})),(0,E.withHandlers)({rowGetter:function(e){return e.virtualScroll&&function(t){return(0,l.WQ)(t,e.rows,e.pages,e.size)}||function(t){return(0,l.dM)(t,e.rows)}}}),(0,E.withPropsOnChange)(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(function(e){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.localType,n=void 0===r?"":r,o=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[o]?e.filterRenderers[o]:oe((0,ie.Q)(n))};return{columns:(0,l.Sc)(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat((0,l.AV)(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:function(t){var r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},n={attribute:t.name,url:e.url,typeName:e.typeName},o=e.customEditorsOptions&&e.customEditorsOptions.rules||[],i={type:t.localType,generalProps:r,props:e},a=A().getCustomEditor(n,o,i);return(0,k.isNil)(a)?e.editors(t.localType,r):a},getFilterRenderer:t,getFormatter:function(e){return function(e){return"boolean"===e.localType?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return(0,k.isNil)(e)?null:a().createElement("span",null,e.toString())}:["int","number"].includes(e.localType)?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return(0,k.isNil)(e)?null:a().createElement(ae.Z,{value:e,numberParams:{maximumFractionDigits:17}})}:null}(e)}}))}})),(0,E.withPropsOnChange)(["gridOpts","describeFeatureType","actionOpts","mode","select","columns"],(function(e){var t=(0,l.a3)(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),r=t.onRowsSelected,n=void 0===r?function(){}:r,o=t.onRowsDeselected,i=void 0===o?function(){}:o,a=t.onRowsToggled,c=void 0===a?function(){}:a,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onRowsSelected","onRowsDeselected","onRowsToggled"]),u=e.gridOpts;return u=ue(ue({},u),{},{enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:"EDIT"===e.mode,selectBy:{keys:{rowKey:"_!_id_!_",values:e.select.map((function(e){return e.id}))}},onRowsSelected:n,onRowsDeselected:i}}),s.onRowClick=function(e,t){e>=0&&c([{rowIdx:e,row:t}])},ue(ue({},s),u)})),F.Z);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ve(n);if(o){var r=ve(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ge(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).setScrollLeft=function(e){return t.refs.cell.setScrollLeft(e)},t}return t=l,(r=[{key:"render",value:function(){var e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),n=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return a().createElement(s.Cell,me({},this.props,{ref:"cell",className:n}))}}])&&ye(t.prototype,r),l}(a().Component);he(Oe,"propTypes",{value:o().any,rowData:o().object,column:o().object}),he(Oe,"contextTypes",{isModified:o().func,isProperty:o().func,isValid:o().func}),he(Oe,"defaultProps",{value:null,rowData:{},column:{}});const we=Oe;function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(n);if(o){var r=xe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ce(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).setScrollLeft=function(e){return t.refs.row.setScrollLeft(e)},t}return t=a,(r=[{key:"render",value:function(){return this.props.renderBaseRow(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:we},this.props))}}])&&Pe(t.prototype,r),a}(a().Component);Te(ke,"propTypes",{columns:o().array,row:o().object,renderBaseRow:o().func.isRequired});const Ie=ke;function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(n);if(o){var r=Me(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ne(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(r=[{key:"componentDidMount",value:function(){this.props.initPlugin({virtualScroll:this.props.virtualScroll,editingAllowedRoles:this.props.editingAllowedRoles,maxStoredPages:this.props.maxStoredPages})}},{key:"getChildContext",value:function(){var e=this;return{isModified:function(t,r){return e.props.changes.hasOwnProperty(t)&&e.props.changes[t].hasOwnProperty(r)},isProperty:function(t){return"geometry"===t||(0,l.IC)(t,e.props.describeFeatureType)},isValid:function(t,r){return!e.props.describeFeatureType||(0,l.wT)(t,r,e.props.describeFeatureType)}}}},{key:"render",value:function(){var e=this.props.gridComponent;return a().createElement(e,Fe({rowRenderer:Ie},this.props))}}])&&De(t.prototype,r),c}(a().PureComponent);Le(_e,"propTypes",{autocompleteEnabled:o().bool,editingAllowedRoles:o().array,gridOpts:o().object,changes:o().object,selectBy:o().object,customEditorsOptions:o().object,features:o().array,showDragHandle:o().bool,gridComponent:o().func,describeFeatureType:o().object,columnSettings:o().object,gridOptions:o().object,actionOpts:o().object,initPlugin:o().func,tools:o().array,gridEvents:o().object,virtualScroll:o().bool,maxStoredPages:o().number}),Le(_e,"childContextTypes",{isModified:o().func,isValid:o().func,isProperty:o().func}),Le(_e,"defaultProps",{editingAllowedRoles:["ADMIN"],initPlugin:function(){},autocompleteEnabled:!1,gridComponent:function(e){return a().createElement(c.Z,null,(function(t){var r=t.width,n=t.height;return a().createElement("div",{className:e.className},a().createElement(T,x({},e,{minHeight:n,minWidth:r,enableCellAutoFocus:!1})))}))},changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5});const Ze=fe(_e)},78819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45697),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,r,n,o,i=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(o){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function p(){return a(this,p),i.apply(this,arguments)}return t=p,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}}])&&l(t.prototype,r),p}(r(53370).editors.SimpleTextEditor);p(f,"propTypes",{onTemporaryChanges:o().func}),p(f,"defaultProps",{onTemporaryChanges:function(){}});const d=f},82994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(78819),c=r(49902),s=r(18093);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=(0,s.compose)((0,s.withStateHandlers)((function(e){return{open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel}}),{select:function(e){return function(){return p(p({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return p(p({},e),{},{selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return p(p({},e),{},{selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?p(p({},e),{},{currentPage:1,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return p(p({},e),{},{open:!!e.changingPage||!e.open})}}}))((function(e){var t=e.toggle,r=e.select,n=e.focus,i=e.change,a=e.value,l=e.busy,s=e.data,u=e.loading,p=void 0!==u&&u,f=e.filter,d=e.open;return o().createElement(c.Z,{pagination:{paginated:!1},onFocus:n,onToggle:t,onChange:i,onSelect:r,selectedValue:a,dropUp:!1,busy:l,data:s,open:d,loading:p,filter:f})}));var m=function(e){var t=e.oldValue,r=e.changedValue,n=e.data;return e.allowEmpty&&""===r?"":-1!==n.indexOf(r)?r:t},y=r(96486),b=r(27418),g=r.n(b);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,r){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(i){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function l(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=a.call(this,e)).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValueByLabel=function(e){try{return r.props.values[r.props.labels.indexOf(e)]}catch(t){return e}},r.getValue=function(){var e=j((t=P(r),C(l.prototype)),"getValue",t).call(t);return r.props.forceSelection?x({},r.props.column.key,m({oldValue:r.props.defaultOption,changedValue:r.getValueByLabel(e[r.props.column&&r.props.column.key]),data:r.props.values,allowEmpty:r.props.allowEmpty})):r.props.allowEmpty?e:x({},r.props.column.key,m({oldValue:r.props.defaultOption,changedValue:r.getValueByLabel(e[r.props.column&&r.props.column.key]),data:r.props.values,allowEmpty:r.props.allowEmpty}))},r}return t=l,(r=[{key:"render",value:function(){var e=this,t=[];this.props.values&&this.props.labels&&this.props.values.lenght===this.props.labels.lenght?this.props.values.forEach((function(r,n){t.push({label:e.props.labels[n],value:r})})):t=this.props.values.map((function(e){return{label:e,value:e}}));var r=g()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props),{data:t,defaultOption:this.props.defaultOption||(0,y.head)(this.props.values)});return o().createElement(d,h({},r,{filter:this.props.filter}))}}])&&w(t.prototype,r),l}(l.Z);x(T,"propTypes",{column:a().object,dataType:a().string,defaultOption:a().string,forceSelection:a().bool,allowEmpty:a().bool,inputProps:a().object,isValid:a().func,onBlur:a().func,typeName:a().string,url:a().string,value:a().string,filter:a().string,values:a().array,labels:a().array}),x(T,"defaultProps",{isValid:function(){return!0},dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0});const k=T},43148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(96486),c=r(73378);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={int:function(e){return parseInt(e,10)},number:function(e){return parseFloat(e,10)}},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(i){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(e){var t,r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),b(m(i=a.call(this,e)),"state",{inputText:""}),b(m(i),"validateTextValue",(function(e){if(!g[i.props.dataType])return!1;try{var t=g[i.props.dataType](e);return i.validateNumberValue(t)}catch(e){return!1}})),b(m(i),"validateNumberValue",(function(e){return(0,l.isNumber)(e)&&!isNaN(e)&&(!(0,l.isNumber)(i.props.minValue)||i.props.minValue<=e)&&(!(0,l.isNumber)(i.props.maxValue)||i.props.maxValue>=e)})),i.state={inputText:null!==(t=null===(r=e.value)||void 0===r||null===(n=r.toString)||void 0===n?void 0:n.call(r))&&void 0!==t?t:""},i.inputRef=o().createRef(),i}return t=s,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){try{var e=g[this.props.dataType](this.state.inputText);return b({},this.props.column.key,this.validateNumberValue(e)?e:this.props.value)}catch(e){return b({},this.props.column.key,this.props.value)}}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o().createElement(c.Z,u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:function(t){e.inputRef=t},type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t,isValid:e.validateTextValue(t),validated:!0})}}))}}])&&p(t.prototype,r),s}(o().Component);b(v,"propTypes",{value:a().oneOfType([a().string,a().number]),inputProps:a().object,dataType:a().string,minValue:a().number,maxValue:a().number,column:a().object,onTemporaryChanges:a().func}),b(v,"defaultProps",{dataType:"number",column:{}})},89808:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(67294),o=r.n(n),i=r(82994),a=r(43148),l=r(45697),c=r.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(i){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(m(t=a.call(this,e)),"state",{inputText:""}),b(m(t),"validateValue",(function(e){return!t.props.formatRegex||new RegExp(t.props.formatRegex).test(e)})),t.state={inputText:e.value},t.inputRef=o().createRef(),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){return b({},this.props.column.key,this.validateValue(this.state.inputText)?this.state.inputText:this.props.value)}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o().createElement("input",u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t.target.value,isValid:e.validateValue(t.target.value),validated:!0})}}))}}])&&p(t.prototype,r),l}(o().Component);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}b(g,"propTypes",{value:c().string,inputProps:c().object,dataType:c().string,column:c().object,formatRegex:c().string,onTemporaryChanges:c().func}),b(g,"defaultProps",{dataType:"string",column:{}});const h={DropDownEditor:{string:function(e){return o().createElement(i.Z,v({dataType:"string"},e))}},NumberEditor:{int:function(e){return o().createElement(a.Z,v({dataType:"int"},e))},number:function(e){return o().createElement(a.Z,v({dataType:"number"},e))}},FormatEditor:{string:function(e){return o().createElement(g,v({dataType:"string"},e))}}}},18027:(e,t,r)=>{"use strict";r.d(t,{Q:()=>Oe});var n=r(18093),o=r(67294),i=r.n(o),a=r(45697),l=r.n(a),c=r(37101),s=r(30381),u=r.n(s),p=r(20),f=r(93054),d=r.n(f),m=r(30294),y=r(96486),b=r(50966);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){for(var t=u()().startOf("day"),r=u()().startOf("day").add(1,"d"),n=[],o=t.date();t.date()===o&&t.isBefore(r);)n.push({date:t.toDate(),label:t.format("LT")}),t=t.add(e||30,"m");return n},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(n);if(o){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return w(this,e)});function l(){var e;v(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(E(e=a.call.apply(a,[this].concat(r))),"state",{focusedItemIndex:0,times:[]}),P(E(e),"handleKeyDown",(function(t){var r=t.key,n=e.state,o=n.focusedItemIndex,i=n.times;if("Enter"===r){var a=i[o];e.props.onSelect(a),t.preventDefault()}else if("ArrowDown"===r){t.preventDefault();var l=o+1;e.scrollDown(l),l<i.length&&e.setState({focusedItemIndex:l})}else if("ArrowUp"===r){t.preventDefault();var c=o-1;e.scrollUp(c),c>-1&&e.setState({focusedItemIndex:c})}})),P(E(e),"scrollDown",(function(t){var r=e.itemsRef[t];r&&r.offsetTop>e.listRef.offsetHeight&&(e.listRef.scrollTop=r.offsetTop-e.listRef.offsetTop)})),P(E(e),"scrollUp",(function(t){var r=e.itemsRef[t];if(r){var n=e.listRef.scrollTop,o=r.offsetTop;n&&o<n&&(e.listRef.scrollTop=r.offsetTop-e.listRef.offsetTop)}})),P(E(e),"attachListRef",(function(t){return e.listRef=t})),P(E(e),"itemsRef",{}),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.setState({times:j()})}},{key:"render",value:function(){var e=this,t=this.state,r=t.focusedItemIndex,n=t.times;return i().createElement("ul",{id:"rw_1_time_listbox",style:{position:"relative"},ref:this.attachListRef,tabIndex:"0",className:"rw-list",role:"listbox","aria-labelledby":"rw_1_input","aria-live":"false","aria-hidden":"true","aria-activedescendant":"rw_1_time_listbox__option__11"},n.map((function(t,n){return i().createElement("li",{key:t.label,onMouseDown:e.props.onMouseDown,onClick:function(){return e.props.onSelect(t)},ref:function(t){e.itemsRef[n]=t},role:"option",tabIndex:"0","aria-selected":"false",className:"rw-list-option ".concat(r===n?"rw-state-focus":""),id:"rw_1_time_listbox__option__0"},t.label)})))}}])&&h(t.prototype,r),l}(o.Component);P(C,"propTypes",{onSelect:l().func,onMouseDown:l().func}),P(C,"defaultProps",{onSelect:function(){},onMouseDown:function(){}});const x=C;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d()(u());var L="function"==typeof u()().locale?"locale":"lang";function _(e,t,r){return e?u()(t,r)[L](e):u()(t,r)}var Z=function(e,t){var r=u()(e);return r.hours(t.getHours()).minute(t.getMinutes()).seconds(t.getSeconds()).milliseconds(t.getMilliseconds()),r.toDate()},B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(n);if(o){var r=N(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return D(this,e)});function l(){var e;I(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return M(R(e=a.call.apply(a,[this].concat(r))),"state",{open:"",focused:!1,inputValue:"",operator:"",date:null}),M(R(e),"getFormat",(function(){var t=e.props,r=t.format,n=t.time,o=t.calendar;return r||(!n&&o?"L":n&&!o?"LT":"lll")})),M(R(e),"renderInput",(function(t,r,n,o,a,l,c){return n?i().createElement(b.Z,{placement:"top",overlay:i().createElement(m.Tooltip,{id:"tooltip"},n)},i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":l||c,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(r).concat(t),className:"rw-input",onChange:e.handleValueChange})):i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":l||c,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(r).concat(t),className:"rw-input",onChange:e.handleValueChange})})),M(R(e),"inputFlush",!1),M(R(e),"ignoreBlur",!1),M(R(e),"handleWidgetFocus",(function(){e.setState({focused:!0}),e.ignoreBlur=!1})),M(R(e),"handleWidgetBlur",(function(){e.ignoreBlur||e.setState({open:"",focused:!1})})),M(R(e),"handleMouseDown",(function(){e.ignoreBlur=!0})),M(R(e),"toggleCalendar",(function(){e.setState((function(e){return{open:"date"!==e.open?"date":""}}))})),M(R(e),"toggleTime",(function(){e.setState((function(e){return{open:"time"!==e.open?"time":""}}))})),M(R(e),"handleInputBlur",(function(){if(e.inputFlush){var t=e.parse(e.state.inputValue),r=e.format(t);e.setState({inputValue:r,date:t}),e.inputFlush=!1,e.props.onChange(t,"".concat(e.state.operator).concat(r))}})),M(R(e),"setDateFromValueProp",(function(t,r){if((0,y.isDate)(t)){var n=e.format(t);e.setState((function(e){return{date:t,inputValue:n,operator:r||e.operator}}))}})),M(R(e),"parse",(function(t){var r=e.props.culture,n=e.getFormat();if(t){var o=_(r,t,n);if(o.isValid())return o.toDate()}return null})),M(R(e),"format",(function(t){if(!t)return"";var r=e.props.culture,n=e.getFormat(),o=_(r,t);return o.isValid()?o.format(n):""})),M(R(e),"close",(function(){e.setState({open:""})})),M(R(e),"open",(function(){var t=e.props,r=t.calendar,n=t.time;return!r&&n?e.setState({open:"time"}):r&&!n?e.setState({open:"date"}):""})),M(R(e),"handleKeyDown",(function(t){var r=e.state.open,n="time"===r,o="date"===r;if(!t.defaultPrevented)if("Escape"!==t.key){if(t.altKey&&"ArrowDown"===t.key)return t.preventDefault(),void e.open();if(t.altKey&&"ArrowUp"===t.key)return t.preventDefault(),void e.close();if(n&&e.timeRef.handleKeyDown(t),o&&e.calRef.refs.inner.handleKeyDown(t),!n&&!o&&"Enter"===t.key){var i=e.parse(e.state.inputValue),a=e.format(i);e.setState({inputValue:a,date:i}),e.inputFlush=!1,e.props.onChange(i,"".concat(e.state.operator).concat(a))}}else e.close()})),M(R(e),"handleValueChange",(function(t){var r=t.target.value,n=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(r);e.setState({inputValue:n[2],operator:n[1]||""}),e.inputFlush=!0})),M(R(e),"handleCalendarChange",(function(t){var r=Z(t,new Date),n=e.format(r);e.setState({date:r,inputValue:n,open:""}),e.props.onChange(r,"".concat(e.state.operator).concat(n))})),M(R(e),"handleTimeSelect",(function(t){var r=e.state.date||new Date,n=Z(r,t.date),o=e.format(n);e.setState({date:n,inputValue:o,open:""}),e.props.onChange(n,"".concat(e.state.operator).concat(o))})),M(R(e),"attachTimeRef",(function(t){return e.timeRef=t})),M(R(e),"attachCalRef",(function(t){return e.calRef=t})),e}return t=l,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,r=e.operator;this.setDateFromValueProp(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value||e.operator!==this.props.operator){var t=this.props,r=t.value,n=t.operator;this.setDateFromValueProp(r,n)}}},{key:"render",value:function(){var e=this,t=this.state,r=t.open,n=t.inputValue,o=t.operator,a=t.focused,l=this.props,c=l.calendar,s=l.time,u=l.toolTip,f=l.placeholder,d=l.tabIndex,m=Object.keys(this.props).reduce((function(t,r){return["placeholder","calendar","time","onChange","value"].includes(r)||(t[r]=e.props[r]),t}),{}),y="date"===r,b="time"===r;return i().createElement("div",{tabIndex:"-1",onKeyDown:this.handleKeyDown,onBlur:this.handleWidgetBlur,onFocus:this.handleWidgetFocus,className:"rw-datetimepicker rw-widget ".concat(c&&s?"rw-has-both":""," ").concat(c||s?"":"rw-has-neither"," ").concat(a?"rw-state-focus":"")},this.renderInput(n,o,u,f,d,y,b),c||s?i().createElement("span",{className:"rw-select"},c?i().createElement("button",{tabIndex:"-1",title:"Select Date",type:"button","aria-disabled":"false","aria-label":"Select Date",className:"rw-btn-calendar rw-btn",onClick:this.toggleCalendar},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-calendar"})):"",s?i().createElement("button",{tabIndex:"-1",title:"Select Time",type:"button","aria-disabled":"false","aria-label":"Select Time",className:"rw-btn-time rw-btn",onClick:this.toggleTime},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-clock-o"})):""):"",i().createElement("div",{className:"rw-popup-container rw-popup-animating",style:{display:b?"block":"none",overflow:b?"visible":"hidden",height:"216px"}},i().createElement("div",{className:"rw-popup rw-widget",style:{transform:b?"translateY(0)":"translateY(-100%)",position:b?"":"absolute"}},i().createElement(x,k({ref:this.attachTimeRef,onMouseDown:this.handleMouseDown},m,{onClose:this.close,onSelect:this.handleTimeSelect})))),i().createElement("div",{className:"rw-calendar-popup rw-popup-container ".concat(y?"":"rw-popup-animating"),style:{display:y?"block":"none",overflow:y?"visible":"hidden",height:"375px"}},i().createElement("div",{className:"rw-popup",style:{transform:y?"translateY(0)":"translateY(-100%)",padding:"0",borderRadius:"4px",position:y?"":"absolute"}},i().createElement(p.Calendar,k({tabIndex:"-1",ref:this.attachCalRef,onMouseDown:this.handleMouseDown,onChange:this.handleCalendarChange},m)))))}}])&&A(t.prototype,r),l}(o.Component);M(B,"propTypes",{format:l().string,type:l().string,placeholder:l().string,onChange:l().func,calendar:l().bool,time:l().bool,value:l().any,operator:l().string,culture:l().string,toolTip:l().string,tabIndex:l().string}),M(B,"defaultProps",{placeholder:"Type date...",calendar:!0,time:!0,onChange:function(){},value:null});const G=B;var z=r(86638),U=r(55237);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(n);if(o){var r=Y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $(this,e)});function l(){var e;V(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return X(K(e=a.call.apply(a,[this].concat(r))),"renderInput",(function(){if(!1===e.props.column.filterable)return i().createElement("span",null);var t=(0,z.S$)(e.context.messages,e.props.placeholderMsgId)||"Search",r="header-filter-"+e.props.column.key;return i().createElement("input",{disabled:e.props.disabled,key:r,type:"text",className:"form-control input-sm",placeholder:t,value:e.props.value,onChange:e.handleChange})})),X(K(e),"renderTooltip",(function(t){return e.props.tooltipMsgId&&(0,z.S$)(e.context.messages,e.props.tooltipMsgId)?i().createElement(b.Z,{placement:"top",overlay:i().createElement(m.Tooltip,{id:"tooltip"},(0,z.S$)(e.context.messages,e.props.tooltipMsgId))},t):t})),X(K(e),"handleChange",(function(t){var r=t.target.value;e.props.onChange({value:r,attribute:e.props.column&&e.props.column.key})})),e}return t=l,(r=[{key:"render",value:function(){var e="header-filter--"+this.props.column.key;return i().createElement("div",{key:e,className:"form-group".concat(this.props.valid?"":" has-error")},this.renderTooltip(this.renderInput()))}}])&&q(t.prototype,r),l}(i().PureComponent);X(Q,"propTypes",{valid:l().bool,disabled:l().bool,onChange:l().func.isRequired,value:l().any,column:l().object,placeholderMsgId:l().string,tooltipMsgId:l().string}),X(Q,"contextTypes",{messages:l().object}),X(Q,"defaultProps",{value:"",valid:!0,onChange:function(){},column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const J=Q;var ee=r(43146);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(72717);var ce=(0,ee.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(G),se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=ae(t);if(r){var o=ae(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return oe(this,e)});function o(){var e;re(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return le(ie(e=n.call.apply(n,[this].concat(r))),"renderInput",(function(){if(!1===e.props.column.filterable)return i().createElement("span",null);var t,r=(0,U.V$)(e.context.locale,e.props.type),n=(0,z.S$)(e.context.messages,e.props.placeholderMsgId)||"Insert date",o=e.props.intl&&e.props.intl.formatMessage({id:"".concat(e.props.tooltipMsgId)},{format:r})||"Insert date in ".concat(r," format"),a="header-filter-"+e.props.column.key;t=e.props.value&&null===e.props.value.startDate||!e.props.value?null:e.props.value&&e.props.value.startDate||e.props.value;var l=e.props.value?t:null,c=e.props.value&&e.props.value.operator;return i().createElement(ce,{key:a,disabled:e.props.disabled,format:r,placeholder:n,value:l,toolTip:o,operator:c,type:e.props.type,time:"date-time"===e.props.type||"time"===e.props.type,calendar:"date-time"===e.props.type||"date"===e.props.type,onChange:function(t,r){return e.handleChange(t,r)}})})),le(ie(e),"handleChange",(function(t,r){e.props.onChange({value:t,stringValue:r,attribute:e.props.column&&e.props.column.name})})),e}return o}(J);le(se,"propTypes",{type:l().string,disabled:l().boolean,onChange:l().func,intl:c.intlShape}),le(se,"contextTypes",{messages:l().object,locale:l().string}),le(se,"defaultProps",{value:null,type:"date-time",column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const ue=(0,n.getContext)({intl:c.intlShape})(se),pe=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){},value:null}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute,o=t.stringValue,i=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(o),a=i[1],l=i[1]||"=";"!=="===a|"!="===a?l="<>":"==="===a|"=="===a&&(l="="),e.onValueChange(r),e.onChange({value:{startDate:r,operator:a},operator:l,type:e.type,attribute:n})}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.date",tooltipMsgId:"featuregrid.filter.tooltips.date"}))(ue),fe=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){}}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({value:r,operator:"=",type:e.type,attribute:n})}}}))(J);var de=r(5346);const me=function(e){var t=e.value,r=e.filterEnabled,n=void 0!==r&&r,o=e.filterDeactivated,a=void 0!==o&&o,l=e.column,c=void 0===l?{}:l,s=e.tooltipPlace,u=void 0===s?"top":s,p=e.tooltipDisabled,f=void 0===p?"featuregrid.filter.tooltips.geometry.disabled":p,d=e.tooltipEnabled,y=void 0===d?"featuregrid.filter.tooltips.geometry.enabled":d,g=e.tooltipApplied,v=void 0===g?"featuregrid.filter.tooltips.geometry.applied":g,h=e.onChange,O=void 0===h?function(){}:h,w=a?void 0:n&&t?v:n&&!t?y:f,E=i().createElement("div",{className:"featuregrid-geometry-filter".concat(n?" filter-enabled":"").concat(a?" filter-deactivated":""),onClick:a?function(){}:function(){O({enabled:!n,type:"geometry",attribute:c.geometryPropName})}},i().createElement(m.Glyphicon,{glyph:t?"remove-sign":"map-marker"}));return w?i().createElement(b.Z,{placement:u,overlay:i().createElement(m.Tooltip,{id:"gofull-tooltip"},i().createElement(de.Z,{msgId:w}))},E):E};var ye=r(96958),be=/\,/;const ge=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){}}),(0,n.withState)("valid","setValid",!0),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;if(e.onValueChange(r),be.exec(r)){var o=(null==r?void 0:r.split(",").filter(y.identity))||[],i=o.reduce((function(e,t){var r=(0,ye.Cf)(t).newVal;return e&&!(isNaN(r)&&""!==(0,y.trim)(t))}),!0);e.setValid(i),e.onChange({value:r,rawValue:r,operator:"=",type:"number",attribute:n})}else{var a=(0,ye.Cf)(r,"number"),l=a.operator,c=a.newVal;isNaN(c)&&""!==(0,y.trim)(r)?e.setValid(!1):e.setValid(!0),e.onChange({value:isNaN(c)?void 0:c,rawValue:r,operator:l,type:"number",attribute:n})}}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.number",tooltipMsgId:"featuregrid.filter.tooltips.number"}))(J),ve=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){},placeholderMsgId:"featuregrid.filter.placeholders.string"}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({rawValue:r,value:(0,y.trim)(r)?(0,y.trim)(r):void 0,operator:"ilike",type:"string",attribute:n})}}}))(J);var he={defaultFilter:function(e){return(0,n.withProps)((function(){return{type:e}}))(fe)},string:function(){return ve},number:function(){return ge},int:function(){return ge},date:function(){return(0,n.withProps)((function(){return{type:"date"}}))(pe)},time:function(){return(0,n.withProps)((function(){return{type:"time"}}))(pe)},"date-time":function(){return(0,n.withProps)((function(){return{type:"date-time"}}))(pe)},geometry:function(){return me}},Oe=function(e,t){return he[e]?he[e](e,t):he.defaultFilter(e,t)}},42872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>F});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i),l=r(7412),c=r(15402),s=r(5346),u=r(30294);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(i){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function l(){var e;f(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=a.call.apply(a,[this].concat(r))),"onTouchStart",(function(t){var r=t.touches[0];e.startX=r.pageX,e.startY=r.pageY,e.setState({scrolling:!1})})),v(b(e),"onTouchMove",(function(t){var r=t.touches[0],n=t.currentTarget;if(e.state.scrolling)t.stopPropagation();else if(Math.abs(e.startY-r.pageY)>Math.abs(e.startX-r.pageX))t.stopPropagation();else{var o=e.startX<r.pageX?"left":"right";(n&&"left"===o&&n.clientWidth<n.scrollWidth&&0!==n.scrollLeft||n&&"right"===o&&n.clientWidth+n.scrollLeft!==n.scrollWidth)&&(e.setState({scrolling:!0}),t.stopPropagation())}})),v(b(e),"onTouchEnd",(function(){e.setState({scrolling:!1})})),v(b(e),"renderPage",(function(){var t="function"==typeof e.props.viewers?e.props.viewers:e.props.viewers[e.props.format];return t?o().createElement(t,{response:e.props.response,layer:e.props.layer}):null})),e}return t=l,(r=[{key:"render",value:function(){return o().createElement("div",{style:{width:"100%",height:"100%",overflowX:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}])&&d(t.prototype,r),l}(o().Component);v(h,"propTypes",{format:a().string,viewers:a().oneOfType([a().func,a().object]),response:a().oneOfType([a().string,a().object,a().node]),layer:a().object});var O=r(96486),w=r(2870);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(p,e);var t,r,n,i,a=(n=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(n);if(i){var r=k(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return x(this,e)});function p(){var e;P(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return I(T(e=a.call.apply(a,[this].concat(r))),"getResponseProperties",(function(){var t=e.props.validator(e.props.format),r=e.props.responses.map((function(e){return void 0===e?{}:e})),n=t.getValidResponses(r),o=t.getNoValidResponses(e.props.responses),i=e.props.requests.length===o.length;return{validResponses:n,currResponse:e.getCurrentResponse(n[e.props.index]),emptyResponses:i,invalidResponses:o}})),I(T(e),"getCurrentResponse",(function(t){return e.props.validator(e.props.format).getValidResponses([t])})),I(T(e),"renderEmptyLayers",(function(){var t=e.getResponseProperties(),r=t.invalidResponses,n=t.emptyResponses;if(0===e.props.missingResponses&&n)return null;var i=0!==r.length;if(e.props.renderEmpty||(i=i&&0===e.props.missingResponses),i){var a=r.map((function(e){return e.layerMetadata.title}));return e.props.showEmptyMessageGFI?o().createElement(u.Alert,{bsStyle:"info"},o().createElement(s.Z,{msgId:"noInfoForLayers"}),o().createElement("b",null,a.join(", "))):null}return null})),I(T(e),"renderPage",(function(t){var r=e.props.viewers[e.props.format];return r?o().createElement(r,{response:t}):null})),I(T(e),"renderEmptyPages",(function(){var t=e.getResponseProperties().emptyResponses;return 0===e.props.missingResponses&&t?o().createElement(u.Alert,{bsStyle:"danger"},o().createElement("h4",null,o().createElement(c.Z,{msgId:"noFeatureInfo"}))):null})),I(T(e),"renderPages",(function(){var t=e.getResponseProperties().validResponses;return t.map((function(r,n){var i,a,c=r.response,s=r.layerMetadata,p=(0,w.Q)(r,e.props),f=e.props.header;return null!=s&&null!==(i=s.viewer)&&void 0!==i&&i.type&&(a=(0,l.gA)(s.viewer.type)),o().createElement(u.Panel,{eventKey:n,key:n,collapsible:e.props.collapsible,header:f?o().createElement("span",null,o().createElement(f,S({size:t.length},e.props.headerOptions,s,{index:e.props.index,onNext:function(){return e.props.onNext()},onPrevious:function(){return e.props.onPrevious()}}))):null,style:e.props.style},o().createElement(h,{response:c,format:p,viewers:a||e.props.viewers,layer:s}))}))})),I(T(e),"containerStyle",(function(t){return(0,O.isEmpty)(t)&&e.props.isMobile?{height:"100%"}:{display:(0,O.isEmpty)(t)?"none":"block"}})),e}return t=p,(r=[{key:"shouldComponentUpdate",value:function(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}},{key:"render",value:function(){var e=this,t=this.props.container,r=this.getResponseProperties(),n=r.currResponse,i=r.emptyResponses,a=[this.renderEmptyLayers(),o().createElement(t,S({},this.props.containerProps,{onChangeIndex:function(t){e.props.setIndex(t)},ref:"container",index:this.props.index||0,key:"swiper",style:this.containerStyle(n),className:"swipeable-view"}),this.renderPages())];return a=this.props.isMobile?a:(0,O.reverse)(a),o().createElement("div",{className:"mapstore-identify-viewer"},i?this.renderEmptyPages():a.map((function(e){return e})))}}])&&j(t.prototype,r),p}(o().Component);I(A,"propTypes",{format:a().string,collapsible:a().bool,requests:a().array,responses:a().array,missingResponses:a().number,container:a().oneOfType([a().object,a().func]),header:a().oneOfType([a().object,a().func]),headerOptions:a().object,validator:a().func,viewers:a().object,style:a().object,containerProps:a().object,index:a().number,onNext:a().func,onPrevious:a().func,onUpdateIndex:a().func,setIndex:a().func,showEmptyMessageGFI:a().bool,renderEmpty:a().bool,loaded:a().bool,isMobile:a().bool}),I(A,"defaultProps",{format:(0,l.wR)(),responses:[],requests:[],missingResponses:0,collapsible:!1,headerOptions:{},container:u.Accordion,validator:l.Te,viewers:(0,l.Qm)(),style:{position:"relative",marginBottom:0},containerProps:{},showEmptyMessageGFI:!0,renderEmpty:!1,onNext:function(){},onPrevious:function(){},setIndex:function(){},isMobile:!1});const F=A},79870:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(38560);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){var e;u(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(m(e=i.call.apply(i,[this].concat(r))),"renderLeftButton",(function(){var t=0===e.props.index;return e.props.useButtons?a().createElement(c.Z,{ref:"left",disabled:t,className:e.props.btnClassName||"square-button-md no-border",onClick:function(){e.props.onPrevious()}},a().createElement(l.Glyphicon,{glyph:"back"})):a().createElement("a",{ref:"left",disabled:t,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onPrevious()}},a().createElement(l.Glyphicon,{glyph:"back"}))})),b(m(e),"renderRightButton",(function(){var t=e.props.index===e.props.size-1;return e.props.useButtons?a().createElement(c.Z,{ref:"right",disabled:t,className:e.props.btnClassName||"square-button-md no-border",onClick:function(){e.props.onNext()}},a().createElement(l.Glyphicon,{glyph:"next"})):a().createElement("a",{ref:"right",disabled:t,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onNext()}},a().createElement(l.Glyphicon,{glyph:"next"}))})),e}return t=s,(r=[{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return a().createElement("div",{className:"ms-identify-swipe-header"},this.props.size>1&&a().createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderLeftButton()),a().createElement("div",{className:"ms-identify-swipe-header-title"},this.props.title),this.props.size>1&&a().createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderRightButton()))}}])&&p(t.prototype,r),s}(a().Component);b(g,"propTypes",{title:o().string,index:o().number,size:o().number,container:o().oneOfType([o().object,o().func]),useButtons:o().bool,onPrevious:o().func,onNext:o().func,btnClassName:o().string}),b(g,"defaultProps",{useButtons:!0});const v=g},11196:(e,t,r)=>{"use strict";r.d(t,{mI:()=>i,Yy:()=>a});var n=r(18093),o=r(7412),i=(0,n.withHandlers)({onNext:function(e){var t=e.index,r=void 0===t?0:t,n=e.setIndex,o=void 0===n?function(){}:n,i=e.validResponses,a=void 0===i?[]:i;return function(){o(Math.min(a.length-1,r+1))}},onPrevious:function(e){var t=e.index,r=e.setIndex,n=void 0===r?function(){}:r;return function(){n(Math.max(0,t-1))}}}),a=(0,n.defaultProps)({format:(0,o.wR)(),validator:o.Te})},48384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(67294),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,m,y,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function l(){return c(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.item;return e.pagination?o().createElement("span",null,e[this.props.textField]," ",e.pagination," "):o().createElement("span",null,e[this.props.textField])}}])&&s(t.prototype,r),l}(o().Component);d=b,m="propTypes",y={item:a().object,textField:a().string,valueField:a().string},m in d?Object.defineProperty(d,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[m]=y;const g=b},18790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(73935),s=r.n(c),u=r(90183);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function c(){var e;f(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=i.call.apply(i,[this].concat(r))),"launchNewCRSAction",(function(t){if(e.props.useRawInput)e.props.onCRSChange(t.target.value);else{var r=s().findDOMNode(b(e)).getElementsByTagName("select").item(0);e.props.onCRSChange(r.value)}})),e}return t=c,(r=[{key:"render",value:function(){var e,t,r=[],n={};for(var o in Object.keys(this.props.availableCRS).length&&(n=(0,u.filterCRSList)(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),n)n.hasOwnProperty(o)&&(e=o,t=n[o].label,r.push(a().createElement("option",{value:e,key:e},t)));return this.props.enabled&&this.props.useRawInput?a().createElement("select",{id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r):this.props.enabled&&!this.props.useRawInput?a().createElement(l.FormGroup,null,a().createElement(l.ControlLabel,null,this.props.label),a().createElement(l.FormControl,{componentClass:"select",id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r)):null}}])&&d(t.prototype,r),c}(a().Component);v(h,"propTypes",{id:o().string,label:o().oneOfType([o().func,o().string,o().object]),availableCRS:o().object,filterAllowedCRS:o().array,projectionDefs:o().array,additionalCRS:o().object,crs:o().string,enabled:o().bool,onCRSChange:o().func,useRawInput:o().bool}),v(h,"defaultProps",{id:"mapstore-crsselector",availableCRS:(0,u.getAvailableCRS)(),crs:null,onCRSChange:function(){},enabled:!1,useRawInput:!1});const O=h},42454:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(90173),c=r(30294),s=r(74855),u=r.n(s),p=r(90183),f=r(47461),d=r(54717),m=r(18790),y=r(5346),b=r(96486),g=r(38560);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(94889);var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return E(this,e)});function s(){var e;h(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(S(e=i.call.apply(i,[this].concat(r))),"getPosition",(function(){var t=e.props.mousePosition?e.props.mousePosition:[null,null],r=t.x,n=t.y,o=t.z;if(r||n){if(l.default.defs(e.props.mousePosition.crs)!==l.default.defs(e.props.crs)){var i=(0,p.reproject)([r,n],e.props.mousePosition.crs,e.props.crs);r=i.x,n=i.y}}else{var a={x:0,y:0,z:o};r=a.x,n=a.y}return"degrees"===(0,p.getUnits)(e.props.crs)?{lat:n,lng:r,z:o}:{x:r,y:n,z:o}})),j(S(e),"getTemplateComponent",(function(){return"degrees"===(0,p.getUnits)(e.props.crs)?e.props.degreesTemplate:e.props.projectedTemplate})),e}return t=s,(r=[{key:"render",value:function(){var e=this.props.mousePosition?this.getTemplateComponent():null;if(this.props.enabled){var t=this.getPosition();return a().createElement("div",{id:this.props.id,style:this.props.style},a().createElement("span",{className:"mapstore-mouse-coordinates"},this.props.showLabels?a().createElement("label",null,a().createElement(y.Z,{msgId:"mouseCoordinates"})):null,e?a().createElement(e,{position:t}):a().createElement("h5",null,a().createElement(c.Label,{bsSize:"lg",bsStyle:"info"},"...",a().createElement("span",null)))),this.props.copyToClipboardEnabled&&a().createElement(u(),{text:JSON.stringify(t),onCopy:this.props.onCopy},a().createElement(g.Z,{bsSize:this.props.btnSize},a().createElement(c.Glyphicon,{glyph:this.props.glyphicon}))),this.props.showElevation?a().createElement("span",{className:"mapstore-mouse-elevation"},this.props.showLabels?a().createElement("label",null,a().createElement(y.Z,{msgId:"mousePositionElevation"})):null,a().createElement("h5",null,this.props.elevationTemplate(t.z))):null,this.props.showCRS?this.props.crsTemplate(this.props.crs):null,this.props.editCRS?a().createElement(m.default,{projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,label:this.props.showLabels?a().createElement("label",null,a().createElement(y.Z,{msgId:"mousePositionCRS"})):null,crs:this.props.crs,enabled:!0,onCRSChange:this.props.onCRSChange}):null,this.props.showToggle?this.props.toggle:null)}return this.props.showToggle?a().createElement("div",{id:this.props.id,style:this.props.style},this.props.toggle):null}}])&&O(t.prototype,r),s}(a().Component);j(C,"propTypes",{id:o().string,mousePosition:o().object,crs:o().string,enabled:o().bool,showCRS:o().bool,editCRS:o().bool,filterAllowedCRS:o().array,projectionDefs:o().array,additionalCRS:o().object,degreesTemplate:o().oneOfType([o().object,o().func]),projectedTemplate:o().oneOfType([o().object,o().func]),crsTemplate:o().oneOfType([o().object,o().func]),elevationTemplate:o().oneOfType([o().object,o().func]),style:o().object,copyToClipboardEnabled:o().bool,glyphicon:o().string,btnSize:o().oneOf(["large","medium","small","xsmall"]),onCopy:o().func,onCRSChange:o().func,toggle:o().object,showLabels:o().bool,showToggle:o().bool,showElevation:o().bool}),j(C,"defaultProps",{id:"mapstore-mouseposition",mousePosition:null,crs:"EPSG:4326",enabled:!0,showCRS:!1,editCRS:!1,degreesTemplate:f.default,projectedTemplate:d.default,crsTemplate:function(e){return a().createElement("span",{className:"mouseposition-crs"},e)},elevationTemplate:function(e){return(0,b.isNumber)(e)?a().createElement("span",{className:"mouseposition-elevation"},e," m"):a().createElement(y.Z,{msgId:"mousePositionNoElevation"})},style:{},copyToClipboardEnabled:!1,glyphicon:"paste",btnSize:"xsmall",onCopy:function(){},onCRSChange:function(){},toggle:a().createElement("div",null),showLabels:!1,showToggle:!1,showElevation:!1});const x=C},59560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(47361);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,b,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"Lat: "),a().createElement(c.Z,{key:"latD",numberParams:{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lat}),a().createElement("span",null," Lng: "),a().createElement(c.Z,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lng}),a().createElement("span",null," ")))}}])&&p(t.prototype,r),s}(a().Component);y=v,b="propTypes",g={position:o().shape({lng:o().number,lat:o().number})},b in y?Object.defineProperty(y,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[b]=g;const h=v},84848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(96486),o=r(45697),i=r.n(o),a=r(67294),l=r.n(a),c=r(30294),s=r(90183),u=r(47361);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(p,e);var t,r,o,i,a=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(o);if(i){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function p(){var e;f(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=a.call.apply(a,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60;return{lat:n,latM:Math.abs(o),lng:r,lngM:Math.abs(i)}})),e}return t=p,(r=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:3,minimumFractionDigits:3},o={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return l().createElement("h5",null,l().createElement(c.Label,{bsSize:"lg",bsStyle:"info"},l().createElement("span",null,"Lat: "),l().createElement(u.Z,{key:"latD",numberParams:t,value:(0,n.isNil)(e.lat)?e.lat:(0,s.roundCoord)({roundingBehaviour:"floor",value:e.lat,maximumFractionDigits:t.maximumFractionDigits})}),l().createElement("span",null," "),l().createElement(u.Z,{key:"latM",numberParams:r,value:e.latM}),l().createElement("span",null,"' "),l().createElement("span",null,"Lng: "),l().createElement(u.Z,{key:"lngD",numberParams:o,value:(0,n.isNil)(e.lng)?e.lng:(0,s.roundCoord)({roundingBehaviour:"floor",value:e.lng,maximumFractionDigits:o.maximumFractionDigits})}),l().createElement("span",null," "),l().createElement(u.Z,{key:"lngM",numberParams:r,value:e.lngM}),l().createElement("span",null,"' ")))}}])&&d(t.prototype,r),p}(l().Component);v(h,"propTypes",{position:i().shape({lng:i().number,lat:i().number})});const O=h},47461:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(90183),s=r(47361);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=i.call.apply(i,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:Math.trunc(n),latM:Math.abs(o),latS:Math.abs(a),lng:Math.trunc(r),lngM:Math.abs(i),lngS:Math.abs(l)}})),e}return t=u,(r=[{key:"render",value:function(){var e=this.props.position||{},t=e.lng,r=e.lat,n=this.getPositionValues(this.props.position),o=t<0?"-":"",i=r<0?"-":"",u={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},p={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"Lat: ",i),a().createElement(s.Z,{key:"latD",numberParams:u,value:Math.abs(n.lat)}),a().createElement("span",null," "),a().createElement(s.Z,{key:"latM",numberParams:u,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:n.latM,maximumFractionDigits:u.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"latS",numberParams:p,value:n.latS}),a().createElement("span",null,"''"),a().createElement("span",{className:"mouseposition-separator"}),a().createElement("span",null," Lng: ",o),a().createElement(s.Z,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0},value:Math.abs(n.lng)}),a().createElement("span",null," "),a().createElement(s.Z,{key:"lngM",numberParams:u,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:n.lngM,maximumFractionDigits:u.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"lngS",numberParams:p,value:n.lngS}),a().createElement("span",null,"''")))}}])&&f(t.prototype,r),u}(a().Component);g(v,"propTypes",{position:o().shape({lng:o().number,lat:o().number})});const h=v},95762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(90183),s=r(47361);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=i.call.apply(i,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:n,latM:Math.abs(o),latS:Math.abs(a),lng:r,lngM:Math.abs(i),lngS:Math.abs(l)}})),e}return t=u,(r=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2},n={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement(s.Z,{key:"latD",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:Math.abs(e.lat),maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null," "),a().createElement(s.Z,{key:"latM",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:e.latM,maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"latS",numberParams:r,value:e.latS}),a().createElement("span",null,"'' ",e.lat>0?"N":"S"," "),a().createElement(s.Z,{key:"lngD",numberParams:n,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:Math.abs(e.lng),maximumFractionDigits:n.maximumFractionDigits})}),a().createElement("span",null," "),a().createElement(s.Z,{key:"lngM",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:e.lngM,maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"lngS",numberParams:r,value:e.lngS}),a().createElement("span",null,"'' ",e.lng>0?"E":"W")))}}])&&f(t.prototype,r),u}(a().Component);g(v,"propTypes",{position:o().shape({lng:o().number,lat:o().number})});const h=v},54717:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(47361);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,b,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"X: "),a().createElement(c.Z,{key:"x",numberParams:e,value:this.props.position.x}),a().createElement("span",{className:"mouseposition-separator"}),a().createElement("span",null," Y: "),a().createElement(c.Z,{key:"y",numberParams:e,value:this.props.position.y})))}}])&&p(t.prototype,r),s}(a().Component);y=v,b="propTypes",g={position:o().shape({x:o().number,y:o().number})},b in y?Object.defineProperty(y,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[b]=g;const h=v},71188:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(18790),u=r(8267),p=r.n(u);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d={availableCRS:{"EPSG:4326":{label:"EPSG:4326"}},filterAllowedCRS:["EPSG:4326"],additionalCRS:{},projectionDefs:[]};describe("CRSSelector",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,f({enabled:!0},d)),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist();var r=t.getElementsByTagName("select").item(0).childNodes;o()(r.length).toBe(1)})),it("checks if a change of the combo fires the proper action",(function(){var e,t=c().render(a().createElement(s.default,f({enabled:!0},d,{onCRSChange:function(t){e=t}})),document.getElementById("container")),r=c().findDOMNode(t).getElementsByTagName("select").item(0);r.value="EPSG:4326",p().Simulate.change(r,{target:{value:"EPSG:4326"}}),o()(e).toBe("EPSG:4326")}))}))},93528:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(45697),a=r.n(i),l=r(67294),c=r.n(l),s=r(73935),u=r.n(s),p=r(42454);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}describe("MousePosition",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){u().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.id).toExist();var r=t.getElementsByTagName("button");o()(r).toExist(),o()(r.length).toBe(0)})),it("checks disabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!1,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toNotExist()})),it("checks no position",(function(){var e=u().render(c().createElement(p.default,{enabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(-1!==t.innerText.indexOf("...")).toBe(!0)})),it("checks no elevation",(function(){var e=u().render(c().createElement(p.default,{enabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(0)})),it("checks elevation enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,showElevation:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(1),o()(t.innerHTML).toContain("13")})),it("checks default templates degrees",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Lat:"),o()(t.innerHTML).toContain("Lng:")})),it("checks default templates meters",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,crs:"EPSG:3857",mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Y:"),o()(t.innerHTML).toContain("X:")})),it("checks custom template",(function(){var e,t,r,n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function a(){return d(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",null,this.props.position.lng,",",this.props.position.lat)}}])&&m(t.prototype,r),a}(c().Component);e=n,t="propTypes",r={position:a().object},t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;var i=u().render(c().createElement(p.default,{degreesTemplate:n,enabled:!0,mousePosition:{x:11,y:12,crs:"EPSG:4326"}}),document.getElementById("container"));o()(i).toExist();var l=u().findDOMNode(i);o()(l).toExist(),o()(l.innerHTML).toContain("11"),o()(l.innerHTML).toContain("12")})),it("checks custom elevation template",(function(){var e=u().render(c().createElement(p.default,{elevationTemplate:function(e){return c().createElement("div",null,"Z: ",e)},showElevation:!0,enabled:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Z:"),o()(t.innerHTML).toContain("13")})),it("checks copy to clipboard enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.id).toExist();var r=t.getElementsByTagName("button");o()(r).toExist(),o()(r.length).toBe(1)})),it("checks copy to clipboard action",(function(){var e={onCopy:function(){}},t=o().spyOn(e,"onCopy"),r=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=u().findDOMNode(r).getElementsByTagName("button")[0];o().spyOn(window,"prompt").andReturn(!0),n.click(),o()(t.calls.length).toBe(1)})),it("checks lat ang lag value",(function(){var e={onCopy:function(){}},t=o().spyOn(e,"onCopy"),r=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:Math.floor(1.1),y:Math.floor(1.2),crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=u().findDOMNode(r).getElementsByTagName("button")[0];o().spyOn(window,"prompt").andReturn(!0),n.click(),o()(t.calls.length).toBe(1)}))}))},22922:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(84848),u=r(8267),p=r.n(u),f=r(37101);describe("MousePositionLabelDM",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat:  ' Lng:  ' ");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(11),o()(r[1].textContent).toBe("Lat: "),o()(r[2].textContent).toBe(""),o()(r[3].textContent).toBe(" "),o()(r[4].textContent).toBe(""),o()(r[5].textContent).toBe("' "),o()(r[6].textContent).toBe("Lng: "),o()(r[7].textContent).toBe(""),o()(r[8].textContent).toBe(" "),o()(r[9].textContent).toBe(""),o()(r[10].textContent).toBe("' ")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 13 32.000' Lng: 028 18.000' ")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 43 42.436' Lng: 010 28.501' ")}))}))},53389:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(47461),u=r(8267),p=r.n(u),f=r(37101);describe("MousePositionLabelDMS",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat:  ' '' Lng:  ' ''");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(16),o()(r[1].textContent).toBe("Lat: "),o()(r[2].textContent).toBe(""),o()(r[3].textContent).toBe(" "),o()(r[4].textContent).toBe(""),o()(r[5].textContent).toBe("' "),o()(r[6].textContent).toBe(""),o()(r[7].textContent).toBe("''"),o()(r[8].className).toBe("mouseposition-separator"),o()(r[9].textContent).toBe(" Lng: "),o()(r[10].textContent).toBe(""),o()(r[11].textContent).toBe(" "),o()(r[12].textContent).toBe(""),o()(r[13].textContent).toBe("' "),o()(r[14].textContent).toBe(""),o()(r[15].textContent).toBe("''")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 13 31' 60.00'' Lng: 028 18' 00.00''")})),it("position with no rounding but trunc of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 43 42' 26.16'' Lng: 010 28' 30.05''")})),it("position with negative lat and lng correctly truncated ladD e lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: -00 00' 21.60'' Lng: -000 00' 21.60''")})),it("test sign changes when crossing greenwich meridian and equator parallel and latD lngD are 0",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: -00 00' 21.60'' Lng: -000 00' 21.60''");var r=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:.006,lat:.006}})),document.getElementById("container"));o()(r).toExist();var n=c().findDOMNode(r);o()(n).toExist(),o()(n.textContent).toBe("Lat: 00 00' 21.60'' Lng: 000 00' 21.60''")}))}))},53884:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(67294),a=r.n(i),l=r(73935),c=r.n(l),s=r(95762),u=r(8267),p=r.n(u),f=r(37101);describe("MousePositionLabelDMSNW",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe(" ' '' S  ' '' W");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(13),o()(r[1].innerText).toBe(""),o()(r[2].innerText).toBe(" "),o()(r[3].innerText).toBe(""),o()(r[4].innerText).toBe("' "),o()(r[5].innerText).toBe(""),o()(r[6].innerText).toBe("'' S "),o()(r[7].innerText).toBe(""),o()(r[8].innerText).toBe(" "),o()(r[9].innerText).toBe(""),o()(r[10].innerText).toBe("' "),o()(r[11].innerText).toBe(""),o()(r[12].innerText).toBe("'' W")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("13 31' 60.00'' N 028 18' 00.00'' E")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("43 42' 26.16'' N 010 28' 30.05'' E")}))}))},32425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},n)},!i&&a().createElement("div",{className:"mapstore-".concat(u(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const f=p},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),o=r.n(n),i=r(96259),a=r(32425);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(e){var t=e.width,r=e.height,n=e.className,l=void 0===n?"loader-container":n,s=e.contentStyle,u=void 0===s?{}:s;return o().createElement("div",{className:l},o().createElement(i.Z,null,(function(e){var n=e.width,i=void 0===n?200:n,l=e.height,s=void 0===l?200:l,p=t||(s>0?Math.min(i,s):i),f=r||(s>0?Math.min(i,s):i),d=Math.min(p,f);return o().createElement(a.Z,{size:d,style:c({padding:d/10,margin:"auto",display:"flex"},u)})})))}},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),o=r.n(n),i=r(96486),a=r(32425);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,l=e.className,s=void 0===l?"":l,p=e.description,f=e.fullText,d=e.onClick,m=void 0===d?function(){}:d,y=e.onMouseEnter,b=void 0===y?function(){}:y,g=e.onMouseLeave,v=void 0===g?function(){}:g,h=e.preview,O=e.selected,w=e.size,E=e.style,S=void 0===E?{}:E,P=e.stylePreview,j=void 0===P?{}:P,C=e.styleTools,x=void 0===C?{}:C,T=e.title,k=e.loading,I=e.dragSymbol,A=void 0===I?"+":I,F=e.tools,D=u(e,["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"]);return o().createElement("div",{className:"mapstore-side-card".concat(O?" selected":"").concat(w?" ms-"+w:"").concat(s?" ".concat(s):"").concat(f?" full-text":""),onClick:function(e){return m(c({title:T,preview:h,description:p,caption:r,tools:F},D),e)},onMouseEnter:b,onMouseLeave:v,style:S},o().createElement("div",{className:"ms-head"},D.isDraggable&&D.connectDragSource&&D.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},A))),h&&o().createElement("div",{className:"mapstore-side-preview",style:j},h),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},T&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,T)),p&&o().createElement("div",{className:"mapstore-side-card-desc"},(0,i.isObject)(p)?p:o().createElement("span",null,p)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:x},F),"sm"!==w&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(a.Z,{className:"mapstore-side-card-loader",size:12,hidden:!k})))))),t&&o().createElement("div",{className:"ms-body"},t))}},38064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(30294),c=r(76424);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function s(){return p(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,o=e.onItemClick,i=e.size,s=t||c.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.Row,{className:"items-list"},r.map((function(e,t){return a().createElement(l.Col,u({key:e.id||t},n),a().createElement(s,u({onClick:function(){return o(e)},size:i},e)))}))))}}])&&f(t.prototype,r),s}(a().Component);b(g,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),b(g,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const v=g},49902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(45697),o=r.n(n),i=r(67294),a=r.n(i),l=r(20),c=r(30294),s=r(86638),u=r(50966),p=r(48384);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(p,e);var t,r,n,o,i=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function p(){var e;m(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(v(e=i.call.apply(i,[this].concat(r))),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return a().createElement(r,null,t)}var n=a().createElement(c.Tooltip,{id:e.props.tooltip.id},e.props.tooltip.message);return a().createElement(u.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),O(v(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return a().createElement("div",{className:"autocomplete-toolbar"},!t&&a().createElement(c.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadPrevPage()}}),!r&&a().createElement(c.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadNextPage()}}))})),O(v(e),"renderField",(function(){var t,r={emptyList:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=[];e.props.data&&e.props.data.length>0&&(n=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&n.length>0&&n.push((O(t={},e.props.textField,""),O(t,e.props.valueField,""),O(t,"disabled",!0),O(t,"pagination",e.renderPagination()),t));var o=e.props.loading?[]:n,i=e.props.itemComponent,c=a().createElement(l.Combobox,{placeholder:e.props.placeholder,dropUp:e.props.dropUp,busy:e.props.busy,data:o,disabled:e.props.disabled,itemComponent:function(t){return a().createElement(i,d({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||r,open:e.props.open,filter:e.props.filter,onChange:function(t){return e.props.onChange(t)},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){return e.props.onSelect(t)},onToggle:function(t){return e.props.onToggle(t)},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(c):c})),e}return t=p,(r=[{key:"render",value:function(){var e=this.props,t=e.selectedValue,r=e.disabled,n=e.onReset,o=e.label,i=e.clearable,l=o?a().createElement("label",null,o):a().createElement("span",null);return a().createElement("div",{className:"autocompleteField"},l,i?a().createElement("div",{className:"rw-combo-clearable ".concat(r?"disabled":"")},this.renderField(),a().createElement("span",{className:"rw-combo-clear ".concat(t?"":"hidden"),onClick:n},"x")):this.renderField())}}])&&y(t.prototype,r),p}(a().Component);O(w,"propTypes",{busy:o().bool,data:o().array,disabled:o().bool,dropUp:o().bool,itemComponent:o().oneOfType([o().object,o().func]),label:o().string,loading:o().bool,filter:o().oneOfType([o().string,o().bool]),messages:o().object,onChange:o().func,onFocus:o().func,onSelect:o().func,onToggle:o().func,open:o().bool,pagination:o().object,nextPageIcon:o().string,prevPageIcon:o().string,selectedValue:o().string,textField:o().string,tooltip:o().object,valueField:o().string,placeholder:o().string,stopPropagation:o().bool,clearable:o().bool,onReset:o().func}),O(w,"contextTypes",{messages:o().object}),O(w,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:p.Z,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1});const E=w},12610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),o=r.n(n),i=r(18093),a=r(96486),l=r(15135);const c=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,r=e.noTooltipWhenDisabled,n=void 0!==r&&r;return!(n&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,(0,a.omit)(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},73014:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(67294),o=r.n(n),i=r(18093),a=r(82110);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e){var t=e.loading,r=e.isLoading;return t||r&&("function"==typeof r?r():!0===r)};const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Z;return(0,i.branch)(e,(function(){return function(e){var n=e.loaderProps;return o().createElement(r,l({},t,n))}}))}},17252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(67294),o=r.n(n),i=r(18093),a=r(45697),l=r.n(a),c=r(96486),s=r(30294),u=r(50966);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const v=(0,i.branch)((function(e){return e.popover}),(function(e){var t,r;return r=t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(g,t);var r,n,a,l,p=(a=g,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(a);if(l){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function g(){return f(this,g),p.apply(this,arguments)}return r=g,(n=[{key:"renderPopover",value:function(){return o().createElement(s.Popover,(0,c.omit)(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,(0,c.omit)(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(u.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&d(r.prototype,n),g}(o().Component),g(t,"propTypes",{popover:l().object}),g(t,"defaultProps",{popover:{trigger:!0}}),r}))},73849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(18093),o=r(28878),i=r(89255);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=(0,n.mapPropsStreamWithConfig)(o.Z);const u=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return i.Observable.of({})}}),s((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(l({},t),e)}))})))},43146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18093),o=r(96486),i=r(30381),a=r.n(i),l=r(55237);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,r=void 0===t?"type":t,i=e.dateProp,s=void 0===i?"date":i,u=e.setDateProp,p=void 0===u?"onSetDate":u;return(0,n.compose)((0,n.withPropsOnChange)([s],(function(e){var t,n=e[s],i=e[r],u=e.useUTCOffset,p=void 0===u||u,f=n,d="1970-01-01",m="00:00:00";!(0,o.isDate)(n)&&(0,o.isString)(n)&&("time"===i&&(f=new Date("".concat(d,"T").concat(n))),"date"===i&&(-1!==n.indexOf("Z")&&(f=n.substr(0,n.length-1)),f=new Date("".concat(f,"T").concat(m,"Z"))),"date-time"===i&&(f=new Date(n)));var y=f;if(f){switch(i){case"time":m=(0,l.kN)(f);break;case"date":d=(0,l.oD)(f);break;default:m=(0,l.kN)(f),d=(0,l.oD)(f)}(y=new Date("".concat(d,"T").concat(m,"Z"))).setUTCMilliseconds(f.getUTCMilliseconds());var b=p?(0,l.$4)(y):0;y=new Date(y.getTime()+b)}return c(t={},s,y),c(t,"defaultCurrentDate","date-time"===i?a()().startOf("day").toDate():void 0),t})),(0,n.withHandlers)(c({},p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[p],n=e[r],o=e.useUTCOffset,i=void 0===o||o;return function(e,r){if(e){var o=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),a=i?(0,l.$4)(e):0,c=new Date(o.getTime()-a);switch(n){case"time":c="".concat((0,l.kN)(c),"Z");break;case"date":c="".concat((0,l.oD)(c),"Z")}t(c,r)}else t(null)}}))))}},80717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(67294),o=r.n(n),i=r(19081),a=r.n(i),l=r(30294),c=r(90085);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,r=void 0===t?[]:t,n=e.btnGroupProps,i=void 0===n?{}:n,p=e.btnDefaultProps,f=void 0===p?{}:p,d=e.transitionProps,m=void 0===d?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:d,y=function(){return r.map((function(e,t){var r=e.visible,n=void 0===r||r,i=e.Element,a=e.renderButton,l=u(e,["visible","Element","renderButton"]);return n?a||i&&o().createElement(i,s({key:l.key||t},l))||o().createElement(c.Z,s({key:l.key||t},f,l)):null}))};return o().createElement(l.ButtonGroup,i,m?o().createElement(a(),m,y()):y())}},90085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(67294),o=r.n(n),i=r(18093),a=r(5346),l=r(96486),c=r(30294),s=r(32425),u=r(12610),p=r(17252),f=r(38560);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const y=(0,i.compose)(u.Z,p.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,r=e.loading,n=e.text,i=void 0===n?"":n,u=e.textId,p=e.glyphClassName,y=void 0===p?"":p,b=e.loaderProps,g=void 0===b?{}:b,v=e.children,h=m(e,["glyph","loading","text","textId","glyphClassName","loaderProps","children"]);return o().createElement(f.Z,(0,l.omit)(h,["pullRight","confirmNo","confirmYes"]),t&&!r?o().createElement(c.Glyphicon,{glyph:t,className:y}):null,u?o().createElement(a.Z,{msgId:u}):i,r?o().createElement(s.Z,d({className:"ms-loader".concat(h.bsStyle&&" ms-loader-"+h.bsStyle||"").concat(h.bsSize&&" ms-loader-"+h.bsSize||"")},g)):null,v)}))},95246:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(96486);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={short:"number",float:"number",double:"number",long:"number",decimal:"number",int:"number"};function u(e){var t=e.Pos;e.registerHelper("hint","geocss",(function(r){var i=r.getCursor(),a=r.getTokenAt(i),c=r.getLineTokens(i.line),u=c&&(0,n.head)(c.filter((function(e){var t=e.type,r=e.start;return"property"===t&&r<a.start})).map((function(e){return e.string}))),p=e.innerMode(r.getMode(),a.state);if("geocss"!==p.mode.name)return null;var f=a.start,d=i.ch,m=a.string.slice(0,d-f);/[^\w$_-]/.test(m)&&(m="",f=d=i.ch);var y=e.resolveMode("text/geocss")||{},b=y.propertyKeywords,g=y.pseudoProperties,v=y.envKeywords,h=(e.getMode({},"text/geocss")||{}).hintProperties,O={},w=!1,E=p.state.state;"pseudo"===E||"variable-3"===a.type?O=l({},g):"prop"===E?(w=!0,O=b&&b[u]&&b[u].values&&l({},b[u].values)||{}):"variable-2"===a.type?O=l({},v):"filter"===a.type?(w=!0,O=l({},h)):"block"!==E&&"maybeprop"!==E||(O=l({},b));var S=Object.keys(O).reduce((function(e,t){var r=!m||0===t.lastIndexOf(m,0);return[].concat(o(e),o(r&&[t]||[]))}),[]);return(S=0===S.length&&w?Object.keys(O).reduce((function(e,t){return[].concat(o(e),[t])}),[]):o(S)).length>0?{list:S.map((function(e){return{text:e,displayText:e,render:function(e,t,r){var n,o,i=document.createElement("span"),a=(o=(n=O[r.displayText]||{}).localPart,("gml"===n.prefix?"geometry":s[o])||o||"");i.innerHTML=a&&'{<span class="cm-desc">'.concat(a,"</span>} ")||"";var l=document.createElement("span");l.innerText=r.displayText,e.appendChild(i),e.appendChild(l)}}})),from:t(i.line,f),to:t(i.line,d)}:null}))}},40021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(96486);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const c=function(e){e.defineMode("geocss",(function(t){var r,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.indentUnit,c=i.propertyKeywords&&i||e.resolveMode("text/geocss"),s=c.propertyKeywords,u=void 0===s?{}:s,p=c.colorKeywords,f=void 0===p?{}:p,d=c.valueKeywords,m=void 0===d?{}:d,y=c.logicKeywords,b=void 0===y?{}:y,g=c.allowNested,v={},h=function(e,t){return r=t,e},O=function(e){return function(t,r){for(var n=!1,o=t.next();o;){if(o===e&&!n){")"===e&&t.backUp(1);break}n=!n&&"\\"===o,o=t.next()}return(o===e||!n&&")"!==e)&&(r.tokenize=null),h("string","string")}},w=function(e,t){for(var r=!1,n=e.next();n;){if(r&&"/"===n){t.tokenize=null;break}r="*"===n,n=e.next()}return["comment","comment"]},E=function(e,t){var r=e.next();if("@"===r)return e.eat("{")?[null,"interpolation"]:e.match(/^(sd|scale)\b/)?["filter",null]:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]);if("/"===r)return e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"];if('"'===r||"'"===r)return t.tokenize=O(r),t.tokenize(e,t);if("#"===r)return e.eatWhile(/[\w\\\-]/),h("atom","hash");if(/\d/.test(r)||"."===r&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),h("number","unit");if("-"===r){if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),h("number","unit");if(e.match(/^-[\w\\\-]+/))return e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?h("variable-2","variable-definition"):h("variable-2","variable");if(e.match(/^\w+-/))return h("meta","meta")}else{if(/[,+>*\/]/.test(r))return h(null,"select-op");if("."===r&&e.match(/^-?[_a-z][_a-z0-9-]*/i))return h("qualifier","qualifier");if(/[:;{}\[\]\(\)]/.test(r))return h(null,r);if(/[\w\\\-]/.test(r))return e.eatWhile(/[\w\\\-]/),h("property","word")}return h(null,null)};function S(e,t,r){this.type=e,this.indent=t,this.prev=r}var P=function(e,t,r,n){return e.context=new S(r,t.indentation()+(!1===n?0:a),e.context),r},j=function(e){return e.context.prev&&(e.context=e.context.prev),e.context.type},C=function(e,t,r){return v[r.context.type](e,t,r)},x=function(e,t,r,n){for(var o=n||1;o>0;o--)r.context=r.context.prev;return C(e,t,r)},T=function(e){var t=e.current().toLowerCase();o=m.hasOwnProperty(t)?"atom":f.hasOwnProperty(t)?"keyword":"variable"};return v.top=function(e,t,r){if("{"===e)return P(r,t,"block");if("}"===e&&r.context.prev)return j(r);if("hash"===e)o="builtin";else if("word"===e)o="tag";else{if("variable-definition"===e)return"maybeprop";if("interpolation"===e)return P(r,t,"interpolation");if(":"===e)return"pseudo";if(g&&"("===e)return P(r,t,"parens")}return r.context.type},v.block=function(e,t,r){if("word"===e){var i=t.current().toLowerCase();return u.hasOwnProperty(i)?(o="property","maybeprop"):b.hasOwnProperty((0,n.trim)(i))?(o="logic","maybeprop"):(0,n.startsWith)((0,n.trim)(t.string),"[")?(o="filter","maybeprop"):(o+=" error","maybeprop")}return"meta"===e?"block":g||"hash"!==e&&"qualifier"!==e?v.top(e,t,r):(o="error","block")},v.maybeprop=function(e,t,r){return":"===e?P(r,t,"prop"):C(e,t,r)},v.prop=function(e,t,r){if(";"===e)return j(r);if("{"===e&&g)return P(r,t,"propBlock");if("}"===e||"{"===e)return x(e,t,r);if("("===e)return P(r,t,"parens");if("hash"!==e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"===e)T(t);else if("interpolation"===e)return P(r,t,"interpolation")}else o+=" error";return"prop"},v.propBlock=function(e,t,r){return"}"===e?j(r):"word"===e?(o="property","maybeprop"):r.context.type},v.parens=function(e,t,r){return"{"===e||"}"===e?x(e,t,r):")"===e?j(r):"("===e?P(r,t,"parens"):"interpolation"===e?P(r,t,"interpolation"):("word"===e&&T(t),"parens")},v.pseudo=function(e,t,n){return"word"===e?(o="variable-3",n.context.type):C(r,t,n)},v.at=function(e,t,r){return";"===e?j(r):"{"===e||"}"===e?x(e,t,r):("word"===e?o="tag":"hash"===e&&(o="builtin"),"at")},v.interpolation=function(e,t,r){return"}"===e?j(r):"{"===e||";"===e?x(e,t,r):("word"===e?o="variable":"variable"!==e&&"("!==e&&")"!==e&&(o="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new S("block",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||E)(e,t);return n&&"object"===l(n)&&(r=n[1],n=n[0]),o=n,t.state=v[t.state](r,e,t),o},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),o=r.indent;return"prop"!==r.type||"}"!==n&&")"!==n||(r=r.prev),r.prev&&("}"!==n||"block"!==r.type&&"top"!==r.type&&"interpolation"!==r.type?(")"===n&&"parens"===r.type||"{"===n&&("at"===r.type||"atBlock"===r.type))&&(o=Math.max(0,r.indent-a),r=r.prev):o=(r=r.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}));var t={colorKeywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valueKeywords:["round"],pseudoProperties:["mark","shield","stroke","fill","symbol","nth-mark","nth-shield","nth-stroke","nth-fill","nth-symbol"],logicKeywords:["and","or"]};e.defineMIME("text/geocss",i(i({},Object.keys(t).reduce((function(e,r){return i(i({},e),{},a({},r,t[r].reduce((function(e,t){return i(i({},e),{},a({},t,!0))}),{})))}),{})),{},{propertyKeywords:{mark:{values:{"symbol(circle)":!0}},"mark-composite":!0,"mark-mime":!0,"mark-geometry":!0,"mark-size":!0,"mark-rotation":!0,"mark-label-obstacle":!0,"mark-anchor":!0,"mark-offset":!0,"z-index":!0,stroke:!0,"stroke-composite":!0,"stroke-geometry":!0,"stroke-offset":!0,"stroke-mime":!0,"stroke-opacity":!0,"stroke-width":!0,"stroke-size":!0,"stroke-rotation":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-repeat":!0,"stroke-label-obstacle":!0,fill:!0,"fill-composite":!0,"fill-geometry":!0,"fill-mime":!0,"fill-opacity":!0,"fill-size":!0,"fill-rotation":!0,"fill-label-obstacle":!0,"graphic-margin":!0,random:!0,"random-seed":!0,"random-rotation":!0,"random-symbol-count":!0,"random-tile-size":!0,"fill-random":!0,"fill-random-seed":!0,"fill-random-rotation":!0,"fill-random-symbol-count":!0,"fill-random-tile-size":!0,label:!0,"label-geometry":!0,"label-anchor":!0,"label-offset":!0,"label-rotation":!0,"label-z-index":!0,shield:!0,"shield-mime":!0,"font-family":!0,"font-fill":!0,"font-style":!0,"font-weight":!0,"font-size":!0,"halo-radius":!0,"halo-color":!0,"halo-opacity":!0,"label-padding":!0,"label-group":!0,"label-max-displacement":!0,"label-min-group-distance":!0,"label-repeat":!0,"label-all-group":!0,"label-remove-overlaps":!0,"label-allow-overruns":!0,"label-follow-line":!0,"label-max-angle-delta":!0,"label-auto-wrap":!0,"label-force-ltr":!0,"label-conflict-resolution":!0,"label-fit-goodness":!0,"label-priority":!0,"shield-resize":!0,"shield-margin":!0,"label-underline-text":!0,"label-strikethrough-text":!0,"label-char-spacing":!0,"label-word-spacing":!0,"raster-channels":!0,"raster-composite":!0,"raster-geometry":!0,"raster-opacity":!0,"raster-contrast-enhancement":!0,"raster-contrast-enhancement-algorithm":!0,"raster-contrast-enhancement-min":!0,"raster-contrast-enhancement-max":!0,"raster-gamma":!0,"raster-z-index":!0,"raster-color-map":!0,"raster-color-map-type":!0,composite:!0,"composite-base":!0,geometry:!0,"sort-by":!0,"sort-by-group":!0,transform:!0,size:!0,rotation:!0},envKeywords:{sd:{localPart:"env"},scale:{localPart:"env"}},allowNested:!0,name:"geocss"}))}},12425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(18093).withState)("confirmDelete","toggleDeleteConfirm",!1)},30881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(96486),o=r(18093),i=r(90183),a=r(47805),l=r(89291),c=r(2245),s=r.n(c),u=r(89737),p=r.n(u),f=r(70956);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e,t){var r=(0,f.Z5)(e,t),o=(0,n.find)(Object.keys(r||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()}));return r&&o&&r[o]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerFilter;return t};const O=(0,o.compose)((0,o.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.layer,a=e.quickFilters,l=e.options,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||o.viewport!==(c.dependencies&&c.dependencies.viewport)||o.quickFilters!==(c.dependencies&&c.dependencies.quickFilters)||o.options!==(c.dependencies&&c.dependencies.options)||r!==c.geomProp||s!==c.filter||l!==c.options||a!==c.quickFilters||v(i,o)!==v(c.layer,c.dependencies)||h(i)!==h(c.layer)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,o=void 0===r?"the_geom":r,c=e.dependencies,u=void 0===c?{}:c,d=e.filter,g=e.layer,h=e.quickFilters,O=e.options,w=u.viewport,E=s()({gmlVersion:"3.1.1"}),S=p()(E),P=E.filter,j=E.property,C=E.and,x=g||{},T=x.layerFilter,k={},I={},A=(0,f.r$)(d,h,O);if(!t)return{filter:!(0,n.isEmpty)(A)||T?P(C.apply(void 0,b(T&&!T.disabled?(0,a.toOGCFilterParts)(T,"1.1.0","ogc"):[]).concat(b(A?(0,a.toOGCFilterParts)(A,"1.1.0","ogc"):[])))):void 0};if(g&&u&&u.quickFilters&&u.layer&&g.name===u.layer.name&&(A=m(m({},A),(0,f.r$)(A,u.quickFilters,u.options))),g&&u&&u.filter&&u.layer&&g.name===u.layer.name&&(A=m(m({},A),(0,a.composeAttributeFilters)([A,u.filter]))),u.viewport){var F=Object.keys(w.bounds).reduce((function(e,t){return m(m({},e),{},y({},t,parseFloat(w.bounds[t])))}),{});k=(0,i.getViewportGeometry)(F,w.crs);var D=v(g,u);return I=D?[S((0,l.read)(D))]:[],{filter:P(C.apply(void 0,b(I).concat(b(T&&!T.disabled?(0,a.toOGCFilterParts)(T,"1.1.0","ogc"):[]),b(A?(0,a.toOGCFilterParts)(A,"1.1.0","ogc"):[]),[j(o).intersects(k)])))}}return{filter:P(C.apply(void 0,b(T?(0,a.toOGCFilterParts)(T,"1.1.0","ogc"):[]).concat(b(A?(0,a.toOGCFilterParts)(A,"1.1.0","ogc"):[]))))}})))},8488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18093),o=r(70956),i=r(96486);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=void 0===t?{}:t,n=e.options,a=e.layer,c=void 0===a?{}:a,s=(0,o.Z5)(c,r),u=(0,i.find)(Object.keys(s||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"viewparams"===e.toLowerCase()})),p=s&&u&&s[u];return{options:p?l(l({},n),{},{viewParams:p}):n}})))},73339:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18093),o=r(96486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function e(t,r,n){return t?Object.keys(t).reduce((function(i,c){return"dependenciesMap"===c&&r[t[c]]&&r[t.mapSync]&&r[t[c]][c]&&-1===r[t[c]][c].indexOf(n)?a(a({},i),(0,o.pick)(e(r[t[c]],r,n),["options","layer","quickFilters","filter","dependenciesMap"])):a(a({},i),{},l({},c,r[t[c]]))}),{}):r};const s=(0,n.withProps)((function(e){var t=e.dependenciesMap,r=e.dependencies,n=e.id;return{dependencies:t?c(t,r,n):r,dependenciesMap:t}}))},39837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(67294),o=r.n(n),i=r(5346);const a=(0,r(82030).Z)((function(e){var t=e.data,r=void 0===t?[]:t;return!r||0===r.length}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.iconFit;return{iconFit:r,tooltip:t?o().createElement(i.Z,{msgId:"widgets.errors.nodatainviewport"}):o().createElement(i.Z,{msgId:"widgets.errors.nodata"})}}))},46173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),o=r.n(n),i=r(82030),a=r(5346);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.Z)((function(e){var t=e.layers;return 0===(void 0===t?[]:t).length}),(l(e={},t?"tooltip":"title",o().createElement(a.Z,{msgId:"widgets.errors.noLegend"})),l(e,"description",!t&&o().createElement(a.Z,{msgId:"widgets.errors.noLegendDescription"})),e))}},42415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(67294),o=r.n(n),i=r(5346),a=r(82030),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?o().createElement(i.Z,{msgId:"widgets.errors.timeoutExpired"}):e.message?o().createElement(i.Z,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:e.message}}):o().createElement(i.Z,{msgId:"widgets.errors.genericError"})};const c=(0,a.Z)((function(e){return e.error}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.iconFit;return{glyph:"warning-sign",iconFit:r,tooltip:l(t)}}))},13314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(18093),o=r(96486),i=r(12425),a=r(39860),l=r(52259);const c=(0,n.compose)((0,n.withProps)((function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.dependenciesMap;return{layers:r[(void 0===n?{}:n).layers]||r.layers||[],scales:(0,l.getScales)(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",(0,o.get)(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}})),(0,n.withProps)((function(e){var t=e.layers;return{layers:(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),i.Z,(0,a.tR)(),(0,a.E6)(),(0,a.um)())},87017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(96486),o=r(18093),i=r(89255),a=r(65633),l=r(24262),c=r(73849);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,o=e.GroupByAttributes,i=void 0===o?[]:o,a=e.AggregationAttribute,l=e.AggregationFunctions;return r.map((function(e){return u(u({},i.reduce((function(t,r,o){var i=e[o];if((0,n.isObject)(i)){if((0,n.isNil)(i.time))throw new Error("Unknown response format from server");i=new Date(i.time).toISOString()}return u(u({},t),{},p({},r,i))}),{})),{},p({},"".concat(l[0],"(").concat(a,")"),e[e.length-1]))})).sort((function(e,t){var r=parseFloat(e[i]),n=parseFloat(t[i]);return isNaN(r)||isNaN(n)?e<t?-1:e>t?1:0:r-n}))},d=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.getWpsUrl)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=e.filter,c=e.onLoad,s=void 0===c?function(){}:c,p=e.onLoadError,d=void 0===p?function(){}:p;return(0,a.Z)((0,l.getWpsUrl)(r),u(u({featureType:r.name},n),{},{filter:o}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:f(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}],xAxis:{dataKey:e.GroupByAttributes[0]}}})).do(s).catch((function(e){return i.Observable.of({loading:!1,error:e,data:[]}).do(d)})).startWith({loading:!0})}))};const m=(0,o.compose)((0,o.withProps)((function(){return{dataStreamFactory:d}})),c.Z);var y=r(86850);function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,r=arguments.length>1?arguments[1]:void 0,o=r.groupByAttributes;return(0,n.sortBy)(t.map((function(e){return e.properties})),o)},h=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.getSearchUrl)(r)&&n&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,o=e.options,a=e.filter,l=e.onLoad,c=void 0===l?function(){}:l,s=e.onLoadError,u=void 0===s?function(){}:s;return(0,y.Mc)(r,a,{propertyName:[].concat(b((0,n.castArray)(o.aggregationAttribute)),b((0,n.castArray)(o.groupByAttributes)))}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:v(e,o),series:[{dataKey:o.aggregationAttribute}],xAxis:{dataKey:o.groupByAttributes}}})).do(c).catch((function(e){return i.Observable.of({loading:!1,error:e,data:[]}).do(u)})).startWith({loading:!0})}))};const O=(0,o.compose)((0,o.withProps)((function(){return{dataStreamFactory:h}})),c.Z),w=(0,o.branch)((function(e){var t=e.options,r=void 0===t?{}:t;return!r.aggregateFunction||"None"===r.aggregateFunction}),O,m)},39860:(e,t,r)=>{"use strict";r.d(t,{E6:()=>A,tR:()=>k,AV:()=>I,G5:()=>T,um:()=>F});var n=r(18093);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,a=void 0===o?[]:o,l=e.toggleMaximize,c=void 0===l?function(){}:l,s=e.dataGrid,u=void 0===s?{}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showMaximize?[].concat((t=a,function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:n.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu.".concat(n.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!u.static,onClick:function(){return c()}}]):a}})));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=r(67294),f=r.n(p),d=r(80717),m=function(e){return"icons"===e.target},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(m).length>0};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=r(30294),v=r(5346),h=r(15135);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.target,r=e.visible;return(void 0===r||r)&&"menu"===t},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(E).length>0},P=(0,h.Z)(g.MenuItem);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){return"tools"===e.target},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(C).length>0},T=function(){return(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,c=e.canEdit,u=e.updateProperty,p=void 0===u?function(){}:u,f=e.hide,d=void 0!==f&&f;return{widgetTools:l.showHide?[].concat((t=i,function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"lock",target:"menu",active:d,textId:d?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:d?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!n.widget&&c,onClick:function(){return p("hide",!d)}}]):i}})))},k=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,c=e.onEdit,s=void 0===c?function(){}:c,u=e.toggleDeleteConfirm,p=void 0===u?function(){}:u;return{widgetTools:a?[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return s()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return p(!0)}}]):n}}))},I=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.data,i=e.title,a=e.exportCSV,l=void 0===a?function(){}:a;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return l({data:o,title:i})}}])}}))},A=function(){return(0,n.compose)((0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,c=e.updateProperty,s=void 0===c?function(){}:c,p=e.dataGrid,f=void 0===p?{}:p;return{widgetTools:l.showPin?[].concat((t=i,function(e){if(Array.isArray(e))return u(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pushpin",bsStyle:f.static&&"primary",glyphClassName:f.static?"active":void 0,tooltipId:f.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!n.widget,onClick:function(){return s("dataGrid.static",!f.static)}}]):i}}))),(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,i=e.widgetTools,a=void 0===i?[]:i,l=e.dataGrid,c=void 0===l?{}:l,s=e.toggleCollapse,u=void 0===s?function(){}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showCollapse?[].concat((t=a,function(e){if(Array.isArray(e))return o(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!n.widget&&!c.static,onClick:function(){return u()}}]):a}}))),a,(0,n.compose)((0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat((t=n,function(e){if(Array.isArray(e))return b(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i},target:"icons"}]):n}}))))},F=function(){return(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],(function(e){var t,r=e.topLeftItems,n=void 0===r?[]:r,o=e.widgetTools;return{topLeftItems:x(o)?[].concat((t=n,function(e){if(Array.isArray(e))return j(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[f().createElement(d.Z,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(C)})]):n}}))),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],(function(e){var t=e.icons,r=void 0===t?[]:t,n=e.widgetTools;return{icons:y(n)?f().createElement(d.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:n.filter(m)}):r}}))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=void 0===t?"widget-menu":t,o=e.menuIcon,i=void 0===o?"option-vertical":o;return(0,n.withProps)((function(e){var t=e.widgetTools,n=e.topRightItems,o=void 0===n?[]:n;return{topRightItems:S(t)?[].concat(O(o),[f().createElement(g.ButtonToolbar,null,f().createElement(g.DropdownButton,{pullRight:!0,bsStyle:"default",className:r,title:f().createElement(g.Glyphicon,{glyph:i}),noCaret:!0,id:"dropdown-no-caret"},t.filter(E).map((function(e,t){var r=e.onClick,n=void 0===r?function(){}:r,o=e.disabled,i=void 0!==o&&o,a=e.glyph,l=e.glyphClassName,c=e.text,s=e.textId,u=e.tooltipId,p=e.active;return f().createElement(P,{active:p,tooltipId:u,onSelect:n,disabled:i,eventKey:t},f().createElement(g.Glyphicon,{className:l,glyph:a}),s?f().createElement(v.Z,{msgId:s}):c)}))))]):o}}))}())}},70956:(e,t,r)=>{"use strict";r.d(t,{Z5:()=>s,r$:()=>u});var n=r(96486),o=r(96958),i=r(47805);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){return e&&e.id&&(0,n.get)((0,n.find)(t.layers||[],{id:e.id}),"params",{})},u=function(e,t,r){var a=t&&r&&Object.keys(t).filter((function(e){return(0,n.find)(r.propertyName,(function(t){return t===e}))})).reduce((function(e,r){return l(l({},e),{},c({},r,t[r]))}),{}),s=(0,n.reduce)(a,(function(e,t,r){return(0,o.dJ)(l({attribute:r},t),e)}),{});if(!(0,n.isEmpty)(e)||!(0,n.isEmpty)(s)){var u=(0,i.composeAttributeFilters)([e,s],void 0,null==e?void 0:e.spatialFieldOperator);return l(l({},e),u)}return{}}},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(89255),o=r(86850),i=r(24262);const a=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return(0,i.getSearchUrl)(t)===(0,i.getSearchUrl)(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return(0,o.v$)({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return n.Observable.of({loading:!1,error:e})}))}))}},39589:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(18093),o=r(65633),i=r(73849),a=r(89255),l=r(24262);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,o=void 0===n?[]:n,i=e.AggregationAttribute,a=e.AggregationFunctions;return r.map((function(e){return s(s({},o.reduce((function(t,r,n){return s(s({},t),{},u({},r,e[n]))}),{})),{},u({},"".concat(a[0],"(").concat(i,")"),e[e.length-1]))}))},f=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.getWpsUrl)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,c=e.onLoad,u=void 0===c?function(){}:c,f=e.onLoadError,d=void 0===f?function(){}:f;return(0,o.Z)((0,l.getWpsUrl)(r),s(s({featureType:r.name},n),{},{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:p(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}]}})).do(u).catch((function(e){return a.Observable.of({loading:!1,error:e,data:[]}).do(d)})).startWith({loading:!0})}))};const d=(0,n.compose)((0,n.withProps)((function(){return{dataStreamFactory:f}})),i.Z)},80844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(73014),o=r(42415),i=r(39837),a=r(47361),l=r(18093),c=r(96486),s=r(90253),u=r(67294),p=r.n(u);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=(0,n.Z)(),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=void 0===t?"":t,n=e.uom,o=void 0===n?"":n,i=b(e,["value","uom"]);return p().createElement(s.iF,y({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},i),p().createElement(a.Z,{value:r}),p().createElement("span",{style:{fontSize:"75%"}},o))};const h=(0,l.compose)(g,o.Z,i.Z)((function(e){var t=e.series,r=void 0===t?[]:t,n=e.data,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=e.style,s=void 0===l?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:l;return p().createElement("div",{className:"counter-widget-view"},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataKey,r=arguments.length>1?arguments[1]:void 0;return p().createElement(v,{key:t,uom:(0,c.get)(a,"seriesOptions[".concat(r,"].uom")),value:o[0][t],style:d({textAlign:"center"},s)})})))}))},43716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>st});var n=r(67294),o=r.n(n),i=r(18093),a=r(12425),l=r(39860);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const s=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,l.tR)(),(0,l.AV)(),(0,l.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,l.um)())),u=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)());var p=r(96486);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:d(d({},r),{},{onAddFilter:function(e){return o("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,i,a){return o('options.columnSettings["'.concat((0,p.get)(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:d(d({},r),{},{onGridSort:function(e,t){return o("sortOptions",{sortBy:e,sortOrder:t})}})}})));var b=r(13314);const g=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.G5)(),(0,l.E6)(),(0,l.um)()),v=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)());var h=r(87017),O=r(39589),w=r(78889),E=r(73849),S=r(25382),P=r(89255),j=r(86850);const C=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,l=void 0===a?function(){}:a,c=e.onLoadError,s=void 0===c?function(){}:c;return(0,j.Mc)(r,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return l({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return P.Observable.of({loading:!1,error:e,data:[]}).do(s)}))}))};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(89255);const I=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,l=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(l,t.sortOptions)})).map((function(e){return T(T({},e),{},{features:[],pages:[],pagination:{}})}))};var A=r(96958);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const N=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,l=void 0===a?5:a,c=t.filter,s=t.options,u=void 0===s?{}:s,p=t.sortOptions,f=t.pages,d=t.features,m=void 0===d?[]:d,y=t.onLoad,b=void 0===y?function(){}:y,g=t.onLoadError,v=void 0===g?function(){}:g;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,j.Mc)(n,c,D(D({},(0,A.S9)(r,f,i)),{},{sortOptions:p,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:u.propertyName,viewParams:u.viewParams})).do((function(e){return b(D(D({},(0,A.f1)(e,r,{pages:f,features:m},D(D({},(0,A.S9)(r,f,i)),{},{size:i,maxStoredPages:l}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return P.Observable.of({loading:!1,error:e}).do(v)})).startWith({loading:!0})}))}))}};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z=function(e){var t=(0,i.createEventHandler)(),r=t.handler,n=t.stream;return(0,S.Z)(e).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return I(e).let(r?N(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return L({pagesRange:e},t)}))):C).startWith({})}(e,n.startWith({startPage:0,endPage:1})),(function(e,t){return L(L(L({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};const B=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:Z}})),E.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:(0,p.merge)(n?(0,w.getFeatureTypeProperties)(n).filter((function(e){return!(0,p.includes)(r.propertyName||[],e.name)})).reduce((function(e,t){return L(L({},e),{},_({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var G=r(30881),z=r(8488),U=r(73339),W=r(5055),V=r.n(W),q=r(70956),H=r(99767),$=r(27835),K=function(e){var t=e.wfsGetFeature;return(0,$.Uh)("gs:Bounds",[(0,H.qP)("features",(0,H.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,H.DK)((0,H.En)("bounds","application/json")))};var Y=r(47805),X=r(24262),Q=r(61868),J=r(52259);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ne=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!(0,p.isEmpty)(r.quickFilters)||!(0,p.isEmpty)(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,J.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,p.isEqual)(e.dependencies.quickFilters,t.dependencies.quickFilters)&&(0,p.isEqual)(e.dependencies.filter,t.dependencies.filter)&&(0,p.isEqual)(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||(0,p.isEmpty)(n.layer))return P.Observable.of({loading:!1});var a={};n.quickFilters&&(a=te(te({},a),(0,q.r$)(o,n.quickFilters,n.options))),n.filter&&(a=te(te({},a),(0,Y.composeAttributeFilters)([a,n.filter])));var l=n&&n.layer&&n.layer.name;if(!(0,p.isEmpty)(a)){a=te(te({},a),{},{options:te(te({},a.options||{}),{},{noSchemaLocation:!0})});var c=(0,Y.toOGCFilter)(l,a,"1.1.0");return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,$.mG)(e,K(t),{},r)}((0,X.getWpsUrl)(n.layer),{wfsGetFeature:c}).switchMap((function(e){var t,r,n;if(V().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return P.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(J.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),P.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return P.Observable.of({error:"error getting bounds from filter",details:e})}))}return P.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Q.t8)("loading",r,n)}))})))));var oe=r(43378);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ce=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!(0,p.isEqual)(n,a.dependencies)||!(0,p.isEqual)(i,a.map)||l!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.map,l=void 0===a?{layers:[]}:a,c=n&&n.layer&&n.layer.name,s=(0,p.find)(l.layers,{name:c})||{},u={},f={},d=void 0;return t&&!(0,p.isEmpty)(s)&&(n.quickFilters&&(u=ae(ae({},u),(0,q.r$)(i,n.quickFilters,n.options))),n.filter&&(u=ae(ae({},u),(0,Y.composeAttributeFilters)([u,n.filter]))),!(0,p.isEmpty)(u)&&(0,Y.toCQLFilter)(u))?(d=(0,Y.toCQLFilter)(u),f=(0,Q.cc)(!1,ae(ae({},s),{},{params:(0,oe.optionsToVendorParams)({params:{CQL_FILTER:d}},s&&s.params&&s.params.CQL_FILTER)}),{name:c},l.layers),{map:ae(ae({},l),{},{layers:f})}):(f=l.layers.map((function(e){return ae(ae({},e),{},{params:ae(ae({},e.params),{},{CQL_FILTER:void 0})})})),{map:ae(ae({},l),{},{layers:f})})}))),se=function(e){return(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=arguments.length>1?arguments[1]:void 0,l=a.mapSync,c=a.dependencies;return c&&(0,i.shallowEqual)(o[e],c[e])||r===l}),(function(t){var r=t.map,n=t.mapSync,o=t.dependencies,i=void 0===o?{}:o;return{mapStateSource:"__dependency_system__",map:i[e]&&n?(0,Q.t8)(e,i[e],r):r}})))};var ue=r(30294);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=me(e,["data"]),i=Object.keys(r.reduce((function(e,t){return fe(fe({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(ue.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var be=r(96259),ge=r(73014),ve=r(42415),he=r(39837),Oe=r(6869),we=(0,ge.Z)()((0,ve.Z)((0,he.Z)(Oe.Z)));const Ee=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(be.Z,null,o().createElement(we,e)))};var Se=r(5346),Pe=r(65539),je=r(72688);const Ce=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,l=e.isDraggable,c=void 0===l||l,s=e.toggleDeleteConfirm,u=void 0===s?function(){}:s,p=e.onDelete,f=void 0===p?function(){}:p,d=e.icons,m=e.topLeftItems,y=e.topRightItems,b=e.headerStyle,g=void 0===b?{}:b,v=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(Pe.Z,{className:a,header:o().createElement("div",{style:g,className:"mapstore-widget-info ".concat(c?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),m,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},y)))},v),i?o().createElement(je.Z,{confirmText:o().createElement(Se.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Se.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Se.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return u(!1)},onConfirm:function(){return f(t)}}):null)};function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(ue.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var ke=(0,r(82030).Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{iconFit:!1,glyph:!1,style:{margin:"auto"},title:o().createElement(Se.Z,{msgId:"widgets.errors.notext"})}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),Ie=r(75480),Ae=r(92936);function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ne=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers"]);return r("map",t,"merge")}}})(Ae.Z),Me=r(18027);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Be=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&(0,p.find)(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return _e(_e({},e),{},{value:n})}))}))),Ge=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),Be)((0,Me.Q)(r,{name:n}))},ze=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return _e(_e({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),Ue=(0,i.compose)(ze,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,A.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=Ge({options:r,localType:o,attributeName:i,quickFilterStream$:n});return _e(_e({},e),{},Ze({},i,a))}),{})}:{}}))),We=r(30029),Ve=r(93358),qe=(0,ve.Z)((0,ge.Z)((function(e){return!e.describeFeatureType}))(Ve.Z));const He=Ue((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,l=e.enableColumnFilters,c=void 0!==l&&l,s=e.headerStyle,u=e.icons,p=e.topRightItems,f=e.toggleDeleteConfirm,d=void 0===f?function(){}:f,m=e.onDelete,y=void 0===m?function(){}:m,b=e.gridEvents,g=void 0===b?function(){}:b,v=e.pageEvents,h=void 0===v?{moreFeatures:function(){}}:v,O=e.describeFeatureType,w=e.filterRenderers,E=e.columnSettings,S=e.features,P=e.size,j=e.pages,C=e.error,x=e.pagination,T=void 0===x?{}:x,k=e.dataGrid,I=void 0===k?{}:k,A=e.virtualScroll,F=void 0===A||A;return o().createElement(Ce,{id:"widget-chart-".concat(t),title:r,headerStyle:s,icons:u,isDraggable:I.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:d,topRightItems:p},o().createElement(Pe.Z,{footer:T.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement(Ie.Z,null)):null,void 0===C&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(Se.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:T.totalFeatures}}))):null},o().createElement(qe,{emptyRowsView:function(){return o().createElement(We.Z,{loading:n})},gridEvents:g,sortable:!0,defaultSize:!1,columnSettings:E,pageEvents:h,virtualScroll:F,enableColumnFilters:c,filterRenderers:w,features:S,pages:j,error:C,size:P,rowKey:"id",describeFeatureType:O,pagination:T})))}));var $e=r(80844);function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(ue.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},Xe=r(46173),Qe=r(70919);function Je(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var et=(0,Xe.Z)()(Qe.Z),tt=(0,i.compose)(U.Z,G.Z,z.Z,h.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,l=void 0===a?[]:a,c=e.series,s=void 0===c?[]:c,u=e.loading,p=e.icons,f=e.showTable,d=e.topRightItems,m=e.confirmDelete,y=void 0!==m&&m,b=e.dataGrid,g=void 0===b?{}:b,v=e.onDelete,h=void 0===v?function(){}:v,O=e.toggleTableView,w=void 0===O?function(){}:O,E=e.toggleDeleteConfirm,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"]);return o().createElement(Ce,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:g.isDraggable,title:r,icons:p,topLeftItems:Te({loading:u,title:r,description:n,showTable:f,toggleTableView:w}),confirmDelete:y,onDelete:h,toggleDeleteConfirm:S,topRightItems:d},f?o().createElement(ye,xe({data:l},P)):o().createElement(Ee,xe({id:t,isAnimationActive:!u,loading:u,data:l,series:s,iconFit:!0},P)))})),rt=(0,i.compose)(g)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,l=e.title,c=e.text,s=e.headerStyle,u=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.confirmDelete,m=void 0!==d&&d,y=e.onDelete,b=void 0===y?function(){}:y;return o().createElement(Ce,{id:"widget-text-".concat(a),title:l,confirmDelete:m,onDelete:b,toggleDeleteConfirm:r,headerStyle:s,isDraggable:f.isDraggable,icons:n,topLeftItems:i,topRightItems:u},o().createElement(ke,{text:c}))})),nt=(0,i.compose)(U.Z,ce,se("center"),se("zoom"),ne,v)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,n=e.toggleDeleteConfirm,i=void 0===n?function(){}:n,a=e.id,l=e.title,c=e.map,s=e.icons,u=e.hookRegister,f=e.mapStateSource,d=e.topRightItems,m=e.confirmDelete,y=void 0!==m&&m,b=e.loading,g=void 0!==b&&b,v=e.dataGrid,h=void 0===v?{}:v,O=e.onDelete,w=void 0===O?function(){}:O,E=e.headerStyle,S=e.env,P=c.size,j=P.height,C=P.width,x=c.mapInfoControl,T=j>400&&C>400&&x;return o().createElement(Ce,{id:"widget-text-".concat(a),title:l,confirmDelete:y,onDelete:w,toggleDeleteConfirm:i,headerStyle:E,icons:s,topRightItems:d,isDraggable:h.isDraggable},o().createElement(Pe.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},g?o().createElement("span",{style:{float:"right"}},o().createElement(Ie.Z,null)):null)},o().createElement(Ne,{tools:T?["popup"]:[],updateProperty:r,id:a,map:De({},(0,p.omit)(c,"mapStateSource")),mapStateSource:f,hookRegister:u,layers:c&&c.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:S})))})),ot=(0,i.compose)(U.Z,z.Z,G.Z,B,y)(He),it=(0,i.compose)(U.Z,G.Z,z.Z,O.Z,u)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,l=e.series,c=void 0===l?[]:l,s=e.loading,u=e.showTable,p=e.confirmDelete,f=void 0!==p&&p,d=e.headerStyle,m=e.icons,y=e.topRightItems,b=e.dataGrid,g=void 0===b?{}:b,v=e.toggleTableView,h=void 0===v?function(){}:v,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,E=e.onDelete,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"]);return o().createElement(Ce,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:g.isDraggable,icons:m,topLeftItems:Ye({loading:s,title:r,description:n,showTable:u,toggleTableView:h}),confirmDelete:f,onDelete:S,toggleDeleteConfirm:w,headerStyle:d,topRightItems:y},o().createElement($e.Z,Ke({id:t,isAnimationActive:!s,loading:s,data:a,series:c,iconFit:!0},P)))})),at=(0,i.compose)(U.Z,b.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,l=e.headerStyle,c=e.confirmDelete,s=void 0!==c&&c,u=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.onDelete,m=void 0===d?function(){}:d,y=Je(e,["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"]);return o().createElement(Ce,{id:"widget-text-".concat(n),title:i,confirmDelete:s,onDelete:m,toggleDeleteConfirm:r,headerStyle:l,icons:a,topRightItems:u,isDraggable:f.isDraggable},o().createElement(et,y))}));function lt(){return(lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ct(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,l=e.exportImage,c=void 0===l?function(){}:l,s=e.onDelete,u=void 0===s?function(){}:s,p=e.onEdit,f=void 0===p?function(){}:p,d=ct(e,["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"]);return"text"===d.widgetType?o().createElement(rt,lt({},d,{toggleCollapse:n,onDelete:u,onEdit:f})):"table"===d.widgetType?o().createElement(ot,lt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:u,onEdit:f})):"counter"===d.widgetType?o().createElement(it,lt({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):"map"===d.widgetType?o().createElement(nt,lt({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):"legend"===d.widgetType?o().createElement(at,lt({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):o().createElement(tt,lt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:c,onDelete:u,onEdit:f}))}},70919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(67294),o=r.n(n),i=r(96486),a=r(38064),l=r(30294),c=r(1036),s=r(62770);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=function(e){var t=e.layers,r=void 0===t?[]:t,n=e.onChange,p=void 0===n?function(){}:n,d=e.legendProps,m=void 0===d?{}:d,y=e.currentZoomLvl,b=e.disableOpacitySlider,g=void 0===b||b,v=e.disableVisibility,h=void 0===v||v,O=e.scales,w=e.language,E=e.currentLocale;return o().createElement(a.Z,{className:"compact-legend-grid",size:"sm",items:r.map((function(e){return{title:e.title&&(0,i.isObject)(e.title)&&(e.title[E]||e.title.default)||e.title,preview:h?null:o().createElement(l.Glyphicon,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?o().createElement("div",null,o().createElement(l.Grid,{fluid:!0},o().createElement(l.Row,null,o().createElement(l.Col,{xs:12,className:"ms-legend-container"},o().createElement(s.Z,u({node:f({},e),currentZoomLvl:y,scales:O,language:w},m))))),!g&&o().createElement("div",{className:"mapstore-slider",onClick:function(e){e.stopPropagation()}},o().createElement(c.Z,{disabled:!e.visibility,start:[(0,i.isNil)(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:function(t){return p(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}}))):null}}))})}},92936:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(18093),o=r(7848),i=r(91812),a=r(37981),l=r(57068),c=r(19180),s=r(69705),u=r(63721),p=r(61928);const f=(0,n.compose)(s.Z,(0,i.Z)(0),o.Z,c.Z,u.dY,u.yM,a.Z,l.e)(p.Z)},74226:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>w});var n=r(89255),o=r(23570),i=r.n(o),a=r(62192),l=r(8797),c=r(89602),s=r(80416),u=r(58767),p=r(82904),f=r(33528),d=r(21914),m=r(7147),y=r(97266),b=r(1550),g=r(42780);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w={addAnnotationFromMeasureEpic:function(e){return e.ofType(c.XX).switchMap((function(e){var t=e.features,r=e.textLabels,o=e.uom,l=e.save,s=e.properties||{},f=s.id,d=void 0===f?i()():f,m=s.visibility,y=void 0===m||m,b=h(h({},(0,a.tL)(t,r,o,d,"Annotations created from measurements",u.Eo)),{},{newFeature:l,visibility:y});return n.Observable.of((0,p.Xi)("annotations",null),(0,g.A9)(),(0,c.el)("exportToAnnotation",!1),(0,g.yg)(b))}))},addAsLayerEpic:function(e){return e.ofType(c.Wt).switchMap((function(e){var t=e.features,r=e.textLabels,o=e.uom,l=(0,a.tL)(t,r,o,i()());return n.Observable.of((0,s.A4)({type:"vector",id:i()(),name:"Measurements",hideLoading:!0,features:[l],visibility:!0}))}))},openMeasureEpic:function(e,t){return e.ofType(p.At).filter((function(e){return"measure"===e.control&&e.value&&(0,m.Iz)(t.getState())})).switchMap((function(){return n.Observable.of((0,f.YV)(),(0,d.g)(),(0,d.aN)())}))},closeMeasureEpics:function(e,t){return e.ofType(p.kM).filter((function(e){return"measure"===e.control&&!(0,m.QF)(t.getState())})).switchMap((function(){return n.Observable.of((0,g.Rx)())}))},setMeasureStateFromAnnotationEpic:function(e,t){return e.ofType(c.ES).switchMap((function(e){var r,o,i=e.features,l=e.properties,s=(0,y.on)(t.getState())===(null===(r=(0,a.k2)(i))||void 0===r?void 0:r[0]);return n.Observable.of(!s&&(0,c.Bd)({geomType:null===(o=(0,a.k2)(i))||void 0===o?void 0:o[0]}),(0,p.Xg)("measure","enabled",!0),(0,p.Xg)("annotations","enabled",!1),(0,g.r1)(l.id,!1))}))},addCoordinatesEpic:function(e,t){var r=t.getState,o=void 0===r?function(){}:r;return e.ofType(b.TR).filter((function(){var e=o().controls.measure,t=e.showCoordinateEditor,r=e.enabled;return t&&r})).switchMap((function(e){var t,r,i,a=e.point,s=(null===(t=o())||void 0===t?void 0:t.measurement)||{},u=s.currentFeature,p=s.features,f=void 0===p?[]:p,d=s.geomType,m=(null==a?void 0:a.latlng)||{},y=m.lng,b=m.lat,g=(null===(r=f[u])||void 0===r||null===(i=r.geometry)||void 0===i?void 0:i.coordinates)||[],v=void 0!==(g="Polygon"===d?g[0]:g)?g.findIndex((function(e){return!(0,l.validateCoord)(e)})):-1;return-1!==v?((g=g.map((function(e){return{lon:e[0],lat:e[1]}})))[v]={lon:y,lat:b},n.Observable.of((0,c.dD)(g))):n.Observable.empty()}))}}},94943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>L});var n=r(89255),o=r(96486),i=r(97395),a=r(80416),l=r(60604),c=r(90825),s=r(80833),u=r(82904),p=r(24262),f=r(96909),d=r(9082),m=r(75875),y=r.n(m),b=r(99009);function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,i=void 0===n?[]:n,a=e.options,l=void 0===a?{}:a,c=(0,b.$N)(r),s=c.name,u=c.workspace,p="".concat(t,"rest/").concat(u&&"workspaces/".concat(u,"/")||"","layers/").concat(s,".json");return y().get(p,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&(0,o.castArray)(t.styles.style)||[],n=i.map((function(e){return e.name})),a=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:O(O({},t),{},{styles:{"@class":"linked-hash-set",style:a}})}})).then((function(e){return y().put(p,e).then((function(){return e}))}))},S=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,i=void 0===n?[]:n,a=e.options,l=void 0===a?{}:a,c=(0,b.$N)(r),s=c.name,u=c.workspace,p="".concat(t,"rest/").concat(u&&"workspaces/".concat(u,"/")||"","layers/").concat(s,".json");return y().get(p,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&(0,o.castArray)(t.styles.style)||[];return{layer:O(O({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(g(r),g(i))}})}})).then((function(e){return y().put(p,e).then((function(){return e}))}))},P=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,i=e.options,a=void 0===i?{}:i,l=(0,b.$N)(r),c=l.name,s=l.workspace,u="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(c,".json");return y().get(u,a).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&(0,o.castArray)(t.styles.style)||[],i=t.defaultStyle||{},a=(0,o.uniqBy)([i].concat(g(r)),"name");return{layer:O(O({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:a}})}})).then((function(e){return y().put(u,e).then((function(){return e}))}))};var j=r(93222),C=r(75110),x=r(7147),T=r(8954);function k(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.status,r=e.styleName,o=e.baseUrl;return"edit"===t?n.Observable.defer((function(){return d.ZP.getStyleCodeByName({baseUrl:o,styleName:r})})).switchMap((function(e){return n.Observable.of((0,f.FU)({languageVersion:e.languageVersion,code:e.code,templateId:"",format:e.format,init:!0}))})).catch((function(e){return n.Observable.of((0,f.Fe)("edit",e))})):n.Observable.empty()},N=function(e){var t=e.styleName,r=e.baseUrl,o=e.onSuccess$,i=e.onError$;return n.Observable.defer((function(){return d.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return o||n.Observable.empty()})).catch((function(){return i||n.Observable.empty()}))},M=function(e){var t=e.baseUrl,r=e.update,i=e.code,a=e.format,l=e.styleName,c=e.status,s=e.languageVersion,u=e.options,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.Observable.defer((function(){return d.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:i,format:a,styleName:l,languageVersion:s,options:u})})).switchMap((function(){var e;return(0,o.isArray)(p)&&(e=n.Observable).of.apply(e,[(0,f.Wm)()].concat(k(p)))||p})).catch((function(e){var t;return(t=n.Observable).of.apply(t,[(0,f.Fe)(c,e),(0,f.Wm)()].concat(k(m)))})).startWith((0,f.pt)(c))};const L={toggleStyleEditorEpic:function(e,t){return e.ofType(f.vZ).filter((function(){return!(0,j.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),i=(0,C.jN)(r),c=!!(0,o.get)(i,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,j.gc)(e),r=(0,j.Z0)(e).baseUrl,o=void 0===r?"":r;return n.Observable.of((0,f.l1)(),(0,l.fU)({owner:b.s1})).merge(t?N({styleName:t,baseUrl:o}):n.Observable.empty())}(r);if((0,j.ji)(r)&&c)return n.Observable.empty();var u=e.layer||(0,C.Iz)(r);if(!u||u&&!u.url)return n.Observable.empty();var m=(0,p.findGeoServerName)(u);if(!m)return u.availableStyles?n.Observable.of((0,a.Xy)({availableStyles:u.availableStyles}),(0,f.Wm)()):(0,s.kB)(u).switchMap((function(e){var t=(0,p.formatCapabitiliesOptions)(e);return t.availableStyles?n.Observable.of((0,a.Xy)({availableStyles:t.availableStyles}),(0,a.tV)(u.id,"layer",F({},t)),(0,f.Wm)()):n.Observable.of((0,f.Fe)("availableStyles",{status:401}),(0,f.Wm)())})).startWith((0,f.pt)("global"));var y=u.url.split(m),g="".concat(y[0]).concat(m),v=(0,j.Z0)(r);return n.Observable.defer((function(){return(0,T.eb)({baseUrl:g,styleService:v})})).switchMap((function(e){var t,r=[(0,f.E0)(e)];return(t=(0,s.kB)(u).switchMap((function(e){var t=(0,p.formatCapabitiliesOptions)(e);return t.availableStyles?n.Observable.defer((function(){return d.ZP.getStylesInfo({baseUrl:g,styles:t&&t.availableStyles||[]})})).switchMap((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.Observable.of((0,l.W)(u.id,b.s1,"override",{}),(0,a.Xy)({availableStyles:e}),(0,a.tV)(u.id,"layer",F(F({},t),{},{availableStyles:e})),(0,f.Wm)())}(e)})):n.Observable.of((0,f.Fe)("availableStyles",{status:401}),(0,f.Wm)())}))).startWith.apply(t,r).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return n.Observable.of((0,f.Fe)(t,e),(0,f.Wm)())}))})).startWith((0,f.pt)("global"),(0,f.l1)())}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(f.g$).filter((function(e){return!!e.status})).switchMap((function(r){var o=t.getState(),i=(0,j.Vf)(o),l=i&&i.params||{},s=i&&!i.describeFeatureType&&(0,c.H)(i.url,i,{query:l}),u=(0,j.i7)(o)||i.availableStyles&&i.availableStyles[0]&&i.availableStyles[0].name,p=(0,j.Ri)(o),d=(0,j.Z0)(o).baseUrl,m=void 0===d?"":d;return s&&function(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=n.Observable).of.apply(r,[(0,f.pt)("global")].concat(k(i))).merge(e.ofType(a.K$).filter((function(){var e=(0,C.Iz)(t.getState());return o(e)})).switchMap((function(){var e=(0,C.Iz)(t.getState());return l(e)})).catch((function(e){return n.Observable.of((0,f.Fe)("global",e),(0,f.Wm)())})).takeUntil(e.ofType(f.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[s],(function(e){return n.Observable.concat(R({status:r.status,styleName:u,baseUrl:m}),n.Observable.of((0,f.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,f.bB)({editorType:p.msEditorType||"textarea",styleJSON:p.msStyleJSON}),(0,f.Wm)()))}))||n.Observable.concat(R({status:r.status,styleName:u,baseUrl:m}),n.Observable.of((0,f.bB)({editorType:p.msEditorType||"textarea",styleJSON:p.msStyleJSON})))}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(f.TB,f.DX).switchMap((function(e){var r=t.getState(),n=(0,j.gc)(r),o=(0,j.Vf)(r),a=(0,b.$N)(o.name).workspace,c=e.format&&e.format!==(0,j.iB)(r),s=n||"".concat(a?"".concat(a,":"):"").concat((0,b.Vi)()),u=e.format||(0,j.iB)(r),p=(0,j.ex)(r),d=(0,j.Z0)(r).baseUrl,m=void 0===d?"":d,y=(0,j.j5)(r),g="sld"===u&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},v=y.version!==g.version?{params:{raw:!0}}:{},h=g,O=function(t){return M({update:!0,code:e.code,format:u,styleName:t,status:p,baseUrl:m,languageVersion:h,options:v},[(0,l.B1)(b.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,f.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:u,init:e.init,languageVersion:h})],"edit"===p?[]:[(0,i.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},w=("css"===u?"* { stroke: #888888; }":"sld"===u&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",E=function(e){return M({code:w,format:u,styleName:e,status:p,baseUrl:m},O(e),[(0,i.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,f.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return c&&n&&N({styleName:n,baseUrl:m,onSuccess$:E("".concat(a?"".concat(a,":"):"").concat((0,b.Vi)())),onError$:O(s)})||n&&O(s)||E(s)}))},createStyleEpic:function(e,t){return e.ofType(f.vA).switchMap((function(e){var r=t.getState(),c=(0,j.gB)(r),s=(0,j.Vf)(r),u=(0,b.$N)(s.name).workspace,p="".concat(u?"".concat(u,":"):"").concat((0,b.nK)(e.settings)),m=(0,j.iB)(r),y=e.settings||{},g=y.title,v=void 0===g?"":g,h=y._abstract,O=void 0===h?"":h,w=(0,j.Z0)(r).baseUrl,E=void 0===w?"":w,P=F({title:v,description:O},{msStyleJSON:null,msEditorType:"visual"});return n.Observable.defer((function(){return d.ZP.createStyle({baseUrl:E,code:(0,o.template)(c)({styleTitle:v,styleAbstract:O}),format:m,styleName:p,metadata:P})})).switchMap((function(){return n.Observable.of((0,l.B1)(b.s1,[{}]),(0,a.Xy)({style:p||""},!0),(0,f.Nf)(""),(0,f.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,i=e.styleName,l=e.format,c=e.title,s=e._abstract,u=e.metadata;return n.Observable.defer((function(){return S({baseUrl:t,layerName:r.name,styles:[{name:i}]})})).switchMap((function(){var e=F({filename:"".concat(i,".").concat(l),format:l,name:i,title:c,_abstract:s},u&&{metadata:u}),t=(0,o.head)(r.availableStyles),p=r.availableStyles&&[t,e].concat(k(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return n.Observable.of((0,a.Xy)({availableStyles:p},!0),(0,f.Wm)())})).catch((function(){return n.Observable.of((0,f.Wm)())})).startWith((0,f.pt)("global"))}({layer:s,styleName:p,format:m,title:v,_abstract:O,baseUrl:E,metadata:P}))})).catch((function(e){return n.Observable.of((0,f.Fe)("",e),(0,f.Wm)(),(0,i.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,f.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(f.ch).switchMap((function(){var e=t.getState(),r=(0,j.iB)(e),o=(0,j.j5)(e),l=(0,j.gB)(e),c=(0,j.i7)(e),s=(0,j.gc)(e),u=(0,j.Vf)(e),p=(0,j.Z0)(e).baseUrl,m=void 0===p?"":p,y=(0,j.WW)(e)||{},b={msStyleJSON:y.styleJSON||null,msEditorType:y.editorType},g=(u.availableStyles||[]).map((function(e){return e.name===c?F(F({},e),{},{metadata:F(F({},e.metadata),b)}):e}));return n.Observable.defer((function(){return d.ZP.updateStyle({baseUrl:m,code:l,format:r,styleName:c,languageVersion:o,options:{params:{raw:!0}},metadata:b})})).switchMap((function(){return n.Observable.of((0,f.Wm)(),(0,a.tV)(u.id,"layer",{_v_:Date.now(),availableStyles:g}),(0,a.Xy)({availableStyles:g}),(0,f.k5)({temporaryId:s,templateId:"",code:l,format:r,init:!0,languageVersion:o}),(0,i.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return n.Observable.of((0,f.Fe)("global",e),(0,f.Wm)(),(0,i.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,f.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(f.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,o=t.getState(),l=(0,j.Vf)(o),c=(0,j.Z0)(o).baseUrl,s=void 0===c?"":c,p=(0,x.tL)(o),d=(0,x.Gd)(o);return n.Observable.defer((function(){return E({baseUrl:s,layerName:l.name,styles:[{name:r}]})})).switchMap((function(){var e=l.availableStyles&&l.availableStyles.filter((function(e){return e.name!==r}))||[];return n.Observable.concat(n.Observable.of((0,a.Xy)({style:"",availableStyles:e},!0),(0,f.Wm)(),(0,u.Xg)("layersettings","originalSettings",F(F({},p),{},{style:""})),(0,u.Xg)("layersettings","initialSettings",F(F({},d),{},{style:""}))),N({styleName:r,baseUrl:s,onSuccess$:n.Observable.of((0,i.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:n.Observable.of((0,i.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return n.Observable.of((0,f.Wm)())})).startWith((function(){return n.Observable.of((0,f.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(f.rb).switchMap((function(){var e=t.getState(),r=(0,j.Z0)(e).baseUrl,o=void 0===r?"":r,l=(0,j.Vf)(e),c=(0,j.i7)(e);return n.Observable.defer((function(){return P({baseUrl:o,layerName:l.name,styleName:c})})).switchMap((function(){var e=l.availableStyles.filter((function(e){var t=e.name;return c===t})),t=l.availableStyles.filter((function(e){var t=e.name;return c!==t})),r=[].concat(k(e),k(t));return n.Observable.of((0,a.Xy)({availableStyles:r},!0),(0,i.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,f.Wm)())})).startWith((0,f.pt)("global")).catch((function(){return n.Observable.of((0,i.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,f.Wm)())}))}))}}},88395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>x});var n=r(89255),o=r(96486),i=r(57579),a=r(81808),l=r(25958),c=r(80416),s=r(75110),u=r(24684),p=r(69293),f=r(55927),d=r(75982),m=r(78598),y=r(89077),b=r(17542),g=r.n(b),v=r(59425),h=r.n(v);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){return e.ofType(p.WC,p.a3,p.W5).startWith({type:a.ok}).switchMap((function(t){return t.type===p.WC?n.Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===d.nk}))},C=function(e,t,r,a){return n.Observable.of((0,i.Rz)("mapSync",e),(0,i.Rz)("dependenciesMap",function(e,t,r){var n,a=r.dependenciesMap,l=r.mappings,c=["layer","filter","quickFilters","options"],s=["layers","viewport","zoom","center"],u=(i.oU.exec(t)||[])[1],p=(0,o.omitBy)(a,(function(e){return-1===e.indexOf(u)})),f=Object.keys(l).filter((function(e){return void 0!==l[e]})).reduce((function(e,r){return!(0,o.endsWith)(t,"map")&&(0,o.includes)(c,r)?S(S({},e),{},P({},r,"".concat(t,".").concat(l[r]))):(0,o.endsWith)(t,"map")?(0,o.includes)(s,r)?S(S({},e),{},P({},r,"map"===t?l[r]:"".concat(t,".").concat(l[r]))):S(S({},e),{},P({},r,"".concat(t.replace(".map",""),".").concat(l[r]))):e}),{});return e?S(S(S({},p),f),{},(P(n={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),P(n,"mapSync","".concat(t.replace(".map",""),".mapSync")),n)):(0,o.omit)(p,[Object.keys(l)])}(e,t,r)))};const x={exportWidgetData:function(e){return e.ofType(i.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return g().json2csv(r,(function(e,t){return e?null:(0,m.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(a.ok,f.E9,i.Jm).map((function(){return(0,l.jx)(n())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,o.isEqual)(O(e),O(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i._k)(e.reduce((function(e,t){var r,n,i=t.replace(".map","");return(0,o.endsWith)(t,"map")?S(S({},e),{},(P(r={},"".concat(i,".dependenciesMap"),"".concat(i,".dependenciesMap")),P(r,"".concat(i,".mapSync"),"".concat(i,".mapSync")),P(r,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),P(r,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),P(r,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),P(r,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),r)):S(S({},e),{},(P(n={},"".concat(t,".filter"),"".concat(t,".filter")),P(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),P(n,"".concat(i,".dependenciesMap"),"".concat(i,".dependenciesMap")),P(n,"".concat(i,".mapSync"),"".concat(i,".mapSync")),P(n,"".concat(t,".layer"),"".concat(t,".layer")),P(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,a=void 0===r?function(){}:r;return e.ofType(i.LH).switchMap((function(t){var r=t.active,c=t.availableDependencies,s=void 0===c?[]:c,u=t.options;return r&&s.length>0?1===s.length?C(r,s[0],u):n.Observable.of((0,i.kr)(r,{availableDependencies:s})).merge(e.ofType(i.V5).filter((function(){return(0,l.xI)(a())})).switchMap((function(e){var t=e.widget,c=(0,o.get)((0,l.r0)(a()),"availableDependencies").filter((function(e){return(i.oU.exec(e)||[])[1]===t.id}));return C(r,c[0],u,t.dependeciesMap).concat(n.Observable.of((0,i.kr)(!1,{})))})).takeUntil(e.ofType(d.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===i.Cz&&r===i.jv}))))):C(r,s[0],u)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(a.ok).switchMap((function(){var t=(0,u.F)(o()).split("/"),r=t[t.length-1];return e.let(j).filter((function(){var e=(0,u.F)(o()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?n.Observable.of((0,i.K4)()):n.Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(i.pV).do((function(e){var t,r,n=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),l=document.querySelector("#".concat(n," .recharts-wrapper svg")),c=l.outerHTML?l.outerHTML:(t=l,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);h()(a,c,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),(0,y.RP)(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(c.yS).switchMap((function(e){var r,a=e.layer,l=e.newProperties,c=t.getState(),u=(0,s.CA)(c,a);return(r=n.Observable).of.apply(r,O((0,o.has)(l,"layerFilter")&&u?[(0,i.Ko)(u)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(c.x9,c.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,o=e.layerId,a=t.getState(),l=(0,s.CA)(a,o);return(r=n.Observable).of.apply(r,O(l&&l.previousLoadingError!==l.loadingError?[(0,i.Ko)(l)]:[]))}))})).mergeAll()}}},76364:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>y,Vj:()=>b});var n=r(8575),o=r(96486),i=r(27418),a=r.n(i),l=r(89255),c=r(15047),s=r(75875),u=r.n(s),p=r(32785);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){var t=e.searchText,r=void 0===t?"":t,n=e.queriableAttributes,i=void 0===n?[]:n,a=e.predicate,l=void 0===a?"ILIKE":a,c=(0,o.head)(i),s=r.toLowerCase(),u="strToLowerCase(".concat(c,") ").concat(l," '%").concat(s,"%'");return(0,o.isNil)(c)?"":"("+u+")"},y=function(e){return e.distinctUntilChanged((function(e){var t=e.value,r=e.currentPage,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(n.value!==t||n.currentPage!==r)})).throttle((function(e){return l.Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return l.Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=(0,p.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return l.Observable.fromPromise(u().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return l.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return l.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},b=function(e){return l.Observable.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.value;return t===n})).debounce((function(e){return l.Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,r=e.currentPage,n=arguments.length>1?arguments[1]:void 0,o=n.filterProps,i=n.currentPage;return t===o&&r===i}))).switchMap((function(e){if(e.performFetch){var t=n.parse(e.url,!0),r="";((0,o.endsWith)(t.pathname,"wfs")||(0,o.endsWith)(t.pathname,"wms")||(0,o.endsWith)(t.pathname,"ows")||(0,o.endsWith)(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var i=n.format(a()({},t,{search:null,pathname:r})),s=a()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:i,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:m,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return l.Observable.fromPromise(c.b.Utils.getService("wfs")(e.value,s).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return l.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return l.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})}},86850:(e,t,r)=>{"use strict";r.d(t,{Mc:()=>k,v$:()=>I,ED:()=>A});var n=r(8575),o=r(96486),i=r(89255),a=r(5055),l=r(7526),c=r(75875),s=r.n(c),u=r(47805),p=r(24262),f=r(10284),d=r(39156);function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=r.n(d)()({wfsVersion:"1.1.0"}),E=w.getFeature,S=w.query,P=w.sortBy,j=w.propertyName,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=g(e,["totalFeatures","features"]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.startIndex,a=arguments.length>2?arguments[2]:void 0;return a>t&&a===i+r.length&&t===r.length?h(h({},n),{},{features:r,totalFeatures:a}):h(h({},n),{},{features:r,totalFeatures:t})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.pagination||!(0,o.isNil)(t.startIndex)&&!(0,o.isNil)(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}},T=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,u.getWFSFilterData)(t,r),l=n.parse(e,!0),c=(0,o.isObject)(l.query)?l.query:{};c.service="WFS",c.outputFormat="json";var p=n.format({protocol:l.protocol,host:l.host,pathname:l.pathname,query:c});return i.Observable.defer((function(){return s().post(p,a,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}})})).let(f.oB).map((function(e){return C(e.data,x(t,r),r.totalFeatures)}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,i=e.name,a=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=l.sortOptions,s=l.propertyName,u=g(l,["sortOptions","propertyName"]);return T(r.url||n,a&&"object"===b(a)?h(h({},a),{},{typeName:i||a.typeName}):E(S(i,[].concat(m(c?[P(c.sortBy,c.sortOrder)]:[]),m(s?[j(s)]:[]),m(a?(0,o.castArray)(a):[]))),u),u).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!c&&s&&s[0])return T(r.url||n,a&&"object"===b(a)?h(h({},a),{},{typeName:i||a.typeName}):E(S(i,[P(s[0])].concat(m(s?[j(s)]:[]),m(a?(0,o.castArray)(a):[]))),u),u);throw e}))},I=function(e){var t=e.layer;return i.Observable.defer((function(){return s().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,o=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=n.parse(a||o.url||i,!0);return n.format(h(h({},l),{},{search:void 0,query:h(h({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(f.oB)},A=function(e){var t=e.layer;return i.Observable.defer((function(){return s().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,o=void 0===r?{}:r,i=e.url,a=(0,p.getCapabilitiesUrl)({name:t,url:o&&o.url||i}),l=n.parse(a,!0);return n.format(h(h({},l),{},{search:void 0,query:h(h({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(f.oB).switchMap((function(e){return i.Observable.bindNodeCallback((function(e,t){return(0,a.parseString)(e,{tagNameProcessors:[l.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},65633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(96486),o=r(99767),i=r(27835);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.featureType,r=e.aggregationAttribute,l=e.groupByAttributes,c=void 0===l?[]:l,s=e.aggregateFunction,u=e.viewParams,p=e.filter,f=void 0===p?"":p,d="<wfs:GetFeature ".concat(u?'viewParams="'.concat(u,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">')+'<wfs:Query typeName="'.concat(t,'">').concat(f,"</wfs:Query></wfs:GetFeature>");return(0,i.Uh)("gs:Aggregate",[(0,o.qP)("features",(0,o.fA)("text/xml","http://geoserver/wfs","POST",d)),(0,o.qP)("aggregationAttribute",(0,o.XA)((0,o.gN)(r)))].concat(a((0,n.castArray)(s).map((function(e){return(0,o.qP)("function",(0,o.XA)((0,o.gN)(e)))}))),[(0,o.qP)("singlePass",(0,o.XA)((0,o.gN)("false")))],a((0,n.castArray)(c).map((function(e){return(0,o.qP)("groupByAttributes",(0,o.XA)((0,o.gN)(e)))})))),(0,o.DK)((0,o.En)("result","application/json")))};const s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.mG)(e,c(t),{},r)}},99767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>c,XA:()=>s,fA:()=>u,gN:()=>p,p5:()=>f,Rr:()=>d,DK:()=>m,En:()=>y,Tr:()=>b,t$:()=>g,XJ:()=>v,Dx:()=>h,Jy:()=>O});var n=r(8575),o=r(96486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},s=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},u=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},p=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},f=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},d=function(e){return"<![CDATA[".concat(e,"]]>")},m=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},y=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},b=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},g=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},v=function(e){return c("writeParameters",s(f("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},h=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},O=function(e,t){if(e){var r=n.parse(e,!0),i=r.pathname;return((0,o.endsWith)(r.pathname,"wfs")||(0,o.endsWith)(r.pathname,"wms"))&&(i=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),n.format(a(a({},r),{},{search:null,pathname:i,query:a(a({service:"WPS"},t),r.query)}))}return e}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>S,W5:()=>P,ai:()=>x,RW:()=>T,dr:()=>k,mG:()=>A});var n=r(96486),o=r(89255),i=r(5055),a=r(7526),l=r(75875),c=r.n(l),s=r(99767);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),O(n,e)})(e)}function v(e,t,r){return(v=h()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&O(o,r.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(o,e);var t,r,n=(t=o,r=h(),function(){var e,n=w(t);if(r){var o=w(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return b(this,e)});function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,e)).name="WPSExecuteError",r.code=t||e,r}return o}(g(Error)),S=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Observable.defer((function(){return c().get((0,s.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),m({headers:{Accept:"application/xml"}},r))}))},j=function(e,t){var r,o,i=function(e){var t,r,o,i,a,l,c,s,u,p,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.identity,m=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=m&&m.ProcessAccepted?{status:"ProcessAccepted"}:null!=m&&m.ProcessStarted?{status:"ProcessStarted"}:null!=m&&m.ProcessSucceeded?{status:"ProcessSucceeded",data:d(null===(o=e.ExecuteResponse.ProcessOutputs)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.Output)}:null!=m&&m.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==m||null===(a=m.ProcessFailed)||void 0===a||null===(l=a[0])||void 0===l||null===(c=l.ExceptionReport)||void 0===c||null===(s=c[0])||void 0===s||null===(u=s.Exception)||void 0===u||null===(p=u[0])||void 0===p||null===(f=p.ExceptionText)||void 0===f?void 0:f[0]}:null!=m&&m.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===i.status)throw new E(i.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===i.status)throw new E("UnexpectedProcessStatus");if("ProcessSucceeded"===i.status)return{succeeded:!0,data:i.data};var a=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(o=r.$)||void 0===o?void 0:o.statusLocation;if(!a)throw new E("NoStatusLocation");var l=a.indexOf("executionId=");if(-1===l)throw new E("NoExecutionId");var c=a.slice(l+12),s=c.indexOf("&");return{succeeded:!1,executionId:-1===s?c:c.slice(0,s)}},C=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},x=function(e){var t,r,n,o,i;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.LiteralData)||void 0===i?void 0:i[0]}:null},T=function(e){var t,r,n,o,i,a;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.$)||void 0===a?void 0:a.mimeType}:null},k=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return[C].concat(p(t||[])).map((function(t){return t(e)})).reduce((function(e,t){return t?m(m({},e),t):e}),{})}))}},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Observable.defer((function(){return c().post((0,s.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,m({headers:{"Content-Type":"application/xml"}},r))}))},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=r.executeStatusUpdateInterval,c=void 0===l?2e3:l,s=r.outputsExtractor,u=function(e){return o.Observable.defer((function(){return new Promise((function(t,r){return(0,i.parseString)(e,{tagNameProcessors:[a.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return I(e,t,n).catch((function(){throw new E("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?u(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):o.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,i=t.originalData;if("application/xml"!==n)return o.Observable.of(r);if(null==r||!r.ExecuteResponse)return o.Observable.of(i);var a=j(r,s),l=a.succeeded,p=a.data,f=a.executionId;if(l)return o.Observable.of(p);var d=o.Observable.interval(c).take(1).flatMap((function(){return P(e,f).catch((function(){throw new E("GetExecutionStatusXHRFailed")})).flatMap((function(e){return u(e.data).flatMap((function(e){var t=j(e,s);return t.succeeded?o.Observable.of(t.data):d}))}))}));return d}))}},18163:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(31273),o=r(81808),i=r(61868),a=r(96486),l=r(27418),c=r.n(l),s=r(55877),u=r.n(s);function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};const b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,pageSize:4,services:{},selectedService:"",newService:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.eA:return d(d({},e),{},{saving:t.status});case n.HR:return c()({},e,{result:t.result,searchOptions:t.searchOptions,loadingError:null,layerError:null,loading:!1});case n.xi:return c()({},e,{result:null,loadingError:null,searchOptions:null});case n.vK:return c()({},e,{result:null,searchOptions:null,loadingError:t.error,loading:!1,layerError:null});case n.nm:return c()({},e,{result:null,loadingError:null,format:t.format,layerError:null});case n.QF:return c()({},e,{layerError:t.error});case n.uN:return c()({},e,{newService:t.isNew?y:c()({},e.services&&e.services[e.selectedService||""]||{},{oldService:e.selectedService||""}),mode:t.mode,result:null,loadingError:null,layerError:null});case o.ok:return e&&!(0,a.isNil)(e.default)?t.config&&!(0,a.isNil)(t.config.catalogServices)?c()({},e,{services:t.config.catalogServices.services,selectedService:t.config.catalogServices.selectedService}):c()({},e,{services:e.default.services,selectedService:e.default.selectedService}):e;case n.YO:return(0,i.t8)("openCatalogServiceList",t.status,e);case n.CO:return(0,i.t8)("searchOptions.text",t.text,e);case n.Mt:return(0,i.t8)('newService["'.concat(t.property,'"]'),t.value,e);case n.im:return(0,i.t8)("newService.title",t.title,e);case n.PR:return(0,i.t8)("newService.url",t.url,e);case n.Oq:return(0,i.t8)("newService.format",t.format,e);case n.$X:var r=t.newType.toLowerCase(),l={};return"csw"!==r&&(l={showTemplate:!1,metadataTemplate:""}),c()({},e,{newService:c()({},e.newService,d({type:r},l))});case n.wI:var s=t.service,f=s.isNew,b=p(s,["isNew"]),g=f?b.title+u()():e.selectedService,v=c()({},e.services,m({},g,b));return c()({},e,{services:v,selectedService:g,mode:"view",result:null,loadingError:null,searchOptions:c()({},e.searchOptions,{text:""}),layerError:null});case n.zZ:return t.service!==e.selectedService?c()({},e,{selectedService:t.service,result:null,loadingError:null,layerError:null}):e;case n.bv:var h,O="";return delete(h=c()({},e.services))[t.service],Object.keys(h).length&&(O=h[Object.keys(h)[0]].title),c()({},e,{services:h,selectedService:O,mode:"view",result:null,loadingError:null,layerError:null});case n.Kz:return(0,i.t8)("newService.hideThumbnail",!e.newService.hideThumbnail,e);case n.cS:return(0,i.t8)("loading",t.loading,e);case n.Bz:return(0,i.t8)("newService.metadataTemplate",t.metadataTemplate,e);case n.l3:var w=(0,i.t8)("newService.showTemplate",!e.newService.showTemplate,e);return w.newService.showTemplate&&(w=(0,i.t8)("newService.metadataTemplate",w.newService.metadataTemplate||"<p>${description}</p>",w)),w;case n.vg:return(0,i.t8)("newService.showAdvancedSettings",!e.newService.showAdvancedSettings,e);default:return e}}},78113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(89602),o=r(82904),i=r(61868),a=r(62192),l=r(8797),c=r(38946),s=r(96486),u=r(27418),p=r.n(u);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},lengthFormula:"haversine",showLabel:!0,showSegmentLengths:!0,currentFeature:0,features:[]};const h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.lD:var r,u=null!==t.geomType&&(0,s.findIndex)(e.features,(function(e){var r,n;return("bearing"===((null===(r=e.properties)||void 0===r||null===(n=r.values)||void 0===n?void 0:n[0])||{}).type?"Bearing":e.geometry.type)===t.geomType}));return p()({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,features:null===t.geomType?[]:e.features,textLabels:null===t.geomType?[]:e.textLabels,feature:{properties:{disabled:!0}},currentFeature:-1!==u?u:(null===(r=e.features)||void 0===r?void 0:r.length)||0,len:0,area:0,bearing:0});case n.yK:var d=t.feature;return(0,c.oU)(d)&&(d=(0,i.t8)("geometry.coordinates[0]",(0,s.dropRight)(d.geometry.coordinates[0]),d)),p()({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,values:t.values,feature:(0,i.t8)("properties.disabled",e.feature.properties.disabled,d),point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit});case n.sc:var y=t.measures,h=y.point,O=y.len,w=y.area,E=y.bearing;return b(b({},e),{},{point:h,len:O,area:w,bearing:E});case n.Qw:var S=(0,i.t8)("feature.properties.disabled",!0,e);return b(b({},S),{},{isDrawing:!0,updatedByUI:!1});case n.gf:var P,j="length"===t.uom?"lenUnit":"lenArea",C=t.value,x=C.value,T=C.label;return p()({},e,(g(P={},j,x),g(P,"uom",p()({},t.previousUom,g({},t.uom,{unit:x,label:T}))),g(P,"updatedByUI",!0),P));case n.Qr:var k=t.features,I=(0,a.k2)(k),A=e.features.length===k.length?e.currentFeature:k.length-1;return b(b({},e),{},{features:k,currentFeature:A,geomTypeSelected:I,updatedByUI:!1,isDrawing:!1},(0,s.isEmpty)(k)&&{exportToAnnotation:!1});case n.Kf:var F=t.property,D=t.value;return b(b({},e),{},g({},F,D));case n.ES:var R=t.features,N=t.properties,M=(0,a.k2)(R);return b(b({},e),{},{features:R,geomTypeSelected:M,updatedByUI:!0,isDrawing:!1,exportToAnnotation:!0,id:N.id,visibility:N.visibility});case n.Kx:return b(b({},e),{},{textLabels:t.textLabels});case n.V:return b(b({},e),{},{currentFeature:(0,s.isNumber)(t.featureIndex)?t.featureIndex:e.features.length});case o.kM:e.id;var L=m(e,["id"]);return"info"===t.control?b(b({},L),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?b(b({},L),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.At:return"measure"===t.control&&!1===t.value?b(b({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.l:return b(b({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""});case n.GI:return b(b({},e),{},{format:t.format});case n.qg:return b(b({},e),t.defaultOptions);case n.MT:var _,Z=t.coordinates.map((function(e){return[e.lon,e.lat]})),B=e.features||[],G=B[e.currentFeature]||{},z=Z.filter((function(e){return(0,l.validateCoord)(e)})).length!==Z.length;return b(b({},e),{},{feature:{type:"Feature",properties:{disabled:Z.filter((function(e){return(0,l.validateCoord)(e)})).length!==Z.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[(0,s.dropRight)(Z)]:Z}},features:[].concat(f(B.slice(0,e.currentFeature)),[b(b({},G),{},{type:"Feature",properties:b(b({},G.properties||{}),{},{disabled:z||e.bearingMeasureEnabled&&Z.length<2}),geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[[].concat(f(Z),[Z[0]])]:Z,textLabels:(null==G||null===(_=G.geometry)||void 0===_?void 0:_.textLabels)||[]}})],f(B.slice(e.currentFeature+1,B.length))),updatedByUI:!0});default:return e}}},97080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(97395);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case n.e2:t.type;var r=s(t,["type"]);return[].concat(l(e),[i({},r)]);case n.Zz:return e.filter((function(e){return e.uid!==t.uid}));case n.wt:return[];default:return e}}},32244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(96909),o=r(47037),i=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.wL:return l(l({},e),{},{service:t.service,canEdit:t.canEdit});case n.Nm:return l(l({},e),{},{canEdit:t.canEdit});case n.gF:return l(l({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.g$:return""===t.status?l(l({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):l(l({},e),{},{status:t.status});case n.dJ:return{service:e.service&&l({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.uz:return l(l({},e),{},{addStyle:t.add});case n.lX:return l(l({},e),{},{loading:!t.status||t.status});case n.E2:return l(l({},e),{},{loading:!1,enabled:!0});case n.mF:var r,o,a,s=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(o=t.error)||void 0===o?void 0:o.message)||"",u=i()(null==t||null===(a=t.error)||void 0===a?void 0:a.messageId)&&{messageId:t.error.messageId},p=s.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),f=p&&2===p.length&&p.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),o=parseFloat(r[1]);return n&&!isNaN(o)&&l(l({},e),{},c({},n,o))||l({},e)}),l({message:s},u))||l({message:s},u);return l(l({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:l(l({},e.error),{},c({},t.status||"global",l({status:t.error&&t.error.status||404},f)))});case n.dk:return l(l({},e),{},{metadata:l(l({},e.metadata),t.metadata)});default:return e}}},75859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(57579),o=r(81808),i=r(55927),a=r(27418),l=r.n(a),c=r(28252),s=r.n(c),u=r(96486),p=r(61868);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return s()("builder.settings.".concat(r.key),r.value,t);case n.n8:return s()("builder.editor",r.widget,s()("builder.settings",r.settings||g.settings,t));case n.dm:return s()("builder.editor",y(y({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),s()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:return s()("builder.editor.".concat(r.key),r.value,t);case n.Jm:var a=(0,p.vy)("containers[".concat(r.target,"].widgets"),y(y({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);return a;case n.$A:var c=(0,u.find)((0,u.get)(t,"containers[".concat(r.target,"].widgets")),{id:r.id});return(0,p.vy)("containers[".concat(r.target,"].widgets"),s()(r.key,"merge"===r.mode?l()({},c[r.key],r.value):r.value,c),{id:r.id},t);case n.eb:if(r.layer){var d=(0,u.get)(t,"containers[".concat(n.VR,"].widgets"));if(d)return s()("containers[".concat(n.VR,"].widgets"),d.map((function(e){return(0,u.get)(e,"layer.id")===r.layer.id?s()("layer",r.layer,e):e})),t)}return t;case n.yY:return(0,p.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t);case i.E9:var m=r.data;return s()("containers[".concat(n.VR,"]"),y({},m),t);case o.ok:var b=r.config||{},v=b.widgetsConfig;return s()("containers[".concat(n.VR,"]"),y({},v),t);case n.v8:return s()("containers[".concat(r.target,"].layout"),r.layout)(s()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return s()("containers[".concat(n.VR,"]"),g.containers[n.VR],t);case n.S0:var h=r.key,O=r.value;return s()("dependencies[".concat(h,"]"),O,t);case n.Q6:var w=r.key;return s()("dependencies[".concat(w,"]"),null,t);case n.kb:var E=r.dependencies;return s()("dependencies",E,t);case n.GV:return s()("dependencies",g.dependencies,t);case n.Ym:var S=r.widget,P=void 0===S?{}:S;if(P.dataGrid&&P.dataGrid.static)return t;var j=(0,u.get)(t,"containers[".concat(r.target,"].collapsed[").concat(P.id));if(j){var C=[].concat(f((0,u.get)(t,"containers[".concat(r.target,"].layout"),[])),f((0,u.castArray)((0,u.get)(j,"layout",[])))),x=(0,u.mapValues)((0,u.get)(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(f(e),f((0,u.castArray)((0,u.get)(j,"layouts[".concat(t,"]"),[]))))}));return(0,u.omit)((0,p.qC)(s()("containers[".concat(r.target,"].layout"),C),s()("containers[".concat(r.target,"].layouts"),x))(t),"containers[".concat(r.target,"].collapsed[").concat(P.id,"]"))}return s()("containers[".concat(r.target,"].collapsed[").concat(P.id,"]"),{layout:(0,u.find)((0,u.get)(t,"containers[".concat(r.target,"].layout"),[]),{i:P.id}),layouts:(0,u.mapValues)((0,u.get)(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return(0,u.find)(e,{i:P.id})}))},t);case n.ke:var T,k,I,A,F,D,R,N,M,L,_,Z,B,G,z,U,W,V,q=r.widget,H=null==t||null===(T=t.containers)||void 0===T||null===(k=T[r.target])||void 0===k?void 0:k.maximized;if(!q||null!==(I=q.dataGrid)&&void 0!==I&&I.static)return t;if(null!=H&&H.widget)return(0,p.qC)(s()("containers[".concat(r.target,"].layout"),H.layout),s()("containers[".concat(r.target,"].layouts"),H.layouts),s()("containers[".concat(r.target,"].maximized"),{}),s()("containers[".concat(r.target,"].widgets"),null==t||null===(U=t.containers)||void 0===U||null===(W=U[r.target])||void 0===W||null===(V=W.widgets)||void 0===V?void 0:V.map((function(e){return e.id===H.widget.id?y(y({},e),{},{dataGrid:y(y({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(A=t.containers)&&void 0!==A&&null!==(F=A[r.target])&&void 0!==F&&null!==(D=F.collapsed)&&void 0!==D&&D[q.id])return t;var $={x:0,y:0,w:1,h:1},K=(0,u.find)(null==t||null===(R=t.containers)||void 0===R||null===(N=R[r.target])||void 0===N?void 0:N.layout,{i:q.id}),Y=y(y({},K),$);return(0,p.qC)(s()("containers[".concat(r.target,"].maximized"),{widget:q,layout:null==t||null===(M=t.containers)||void 0===M||null===(L=M[r.target])||void 0===L?void 0:L.layout,layouts:null==t||null===(_=t.containers)||void 0===_||null===(Z=_[r.target])||void 0===Z?void 0:Z.layouts}),s()("containers[".concat(r.target,"].layout"),[Y]),s()("containers[".concat(r.target,"].layouts"),{xxs:[Y]}),s()("containers[".concat(r.target,"].widgets"),null==t||null===(B=t.containers)||void 0===B||null===(G=B[r.target])||void 0===G||null===(z=G.widgets)||void 0===z?void 0:z.map((function(e){return e.id===q.id?y(y({},e),{},{dataGrid:y(y({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var X=(0,u.get)(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),Q=X.filter((function(e){return(0,u.get)(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),J=X.filter((function(e){return!(0,u.get)(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ee=0===J.length;return ee?Q.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):J.length>0?J.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return s()("tray",r.value,t);default:return t}}},67306:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>i,i$:()=>a,P0:()=>l});var n=r(22222),o=r(24684),i=function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},a=function(e){return e&&e.dashboard&&e.dashboard.editing},l=function(e){return e&&e.dashboard&&e.dashboard.showConnections};(0,n.P1)(o.F,(function(e){return e&&e.dashboard&&e.dashboard.resource}),(function(e){return e&&e.browser&&e.browser.mobile}),(function(e,t,r){return r?!r:t&&t.canEdit||isNaN(e.substr(-4))}))},24684:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var n=r(96486),o=function(e){return(0,n.get)(e,"router.location.pathname")||"/"}},93222:(e,t,r)=>{"use strict";r.d(t,{gc:()=>s,Mc:()=>u,ex:()=>p,p:()=>f,aN:()=>d,iB:()=>m,j5:()=>y,gB:()=>b,QW:()=>g,w_:()=>v,ji:()=>h,Z0:()=>O,z_:()=>w,Vf:()=>E,lC:()=>S,m2:()=>P,i7:()=>j,Ed:()=>C,ov:()=>x,WW:()=>T,Ri:()=>k});var n=r(96486),o=r(75110),i=r(99009);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return(0,n.get)(e,"styleeditor.temporaryId")},u=function(e){return(0,n.get)(e,"styleeditor.templateId")},p=function(e){return(0,n.get)(e,"styleeditor.status")},f=function(e){return(0,n.get)(e,"styleeditor.error")||{}},d=function(e){return(0,n.get)(e,"styleeditor.loading")},m=function(e){return(0,n.get)(e,"styleeditor.format")||"css"},y=function(e){return(0,n.get)(e,"styleeditor.languageVersion")||{}},b=function(e){return(0,n.get)(e,"styleeditor.code")},g=function(e){return(0,n.get)(e,"styleeditor.initialCode")||""},v=function(e){return(0,n.get)(e,"styleeditor.addStyle")||""},h=function(e){return(0,n.get)(e,"styleeditor.enabled")},O=function(e){return(0,n.get)(e,"styleeditor.service")||{}},w=function(e){return(0,n.get)(e,"styleeditor.canEdit")},E=function(e){var t=(0,o.jN)(e);return l(l({},(0,o.Iz)(e)||{}),t&&t.options||{})},S=function(e){var t=E(e),r=(0,i.Py)(t).geometryType;return void 0===r?"vector":r},P=function(e){var t=E(e),r=(0,i.Py)(t).properties;return void 0===r?{}:r},j=function(e){var t=E(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},C=function(e){var t=(E(e)||{}).availableStyles,r=void 0===t?[]:t,o=j(e);return(0,n.head)(r.filter((function(e){return e.name===o})).map((function(e){return e.format})))},x=function(e){var t=E(e),r=t.availableStyles||[],o=((0,n.head)(r)||{}).name,a=t.style||t&&!t.style&&o;return{availableStyles:(0,n.uniqBy)(r.map((function(e){var t=e&&e.title&&(0,n.isString)(e.title)&&e.title.split(i.I$),r=t&&t[0]||e.name;return l(l({},e),{},{label:r})})),"name"),defaultStyle:o,enabledStyle:a}},T=function(e){var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata},k=function(e){var t=(E(e)||{}).availableStyles,r=void 0===t?[]:t,o=j(e);return((0,n.find)(r,(function(e){var t=e.name;return o===t}))||{}).metadata||{}}},25958:(e,t,r)=>{"use strict";r.d(t,{zA:()=>N,jx:()=>R,h9:()=>U,YR:()=>A,lF:()=>T,r0:()=>M,YI:()=>j,um:()=>z,E2:()=>E,zm:()=>x,yZ:()=>Z,p:()=>_,Jb:()=>k,E5:()=>I,GW:()=>C,Xu:()=>B,xI:()=>L,Wo:()=>G});var n=r(96486),o=r(827),i=r(75110),a=r(24684),l=r(57579),c=function(e,t,r){var n,o,i=[],a=[],l=e;for(i.push(l);i.length>0;)if(!r[l=i.shift()])for(r[l]=!0,a.push(l),n=0;n<t.length;n+=1)(o=t[n])[0]!==l||r[o[1]]?o[1]!==l||r[o[0]]||i.push(o[0]):i.push(o[1]);return a},s=function(e){for(var t={},r=[],n=0,o=e.length;n<o;n+=1){var i=e[n],a=i[0],l=i[1],s=null;t[a]?t[l]||(s=l):s=a,s&&r.push(c(s,e,t))}return r},u=r(43143);function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e,t){var r,o,i=(r=l.oU.exec(e),o=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(r,o)||f(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return a?(0,n.find)(t,{id:c}):null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,r){var o=(0,n.get)(r,"mapSync")&&(0,n.get)(r,"dependenciesMap")||{},i=Object.keys(o).map((function(t){return m(o[t],e)}))||[];return[].concat(p(t),p(i.filter((function(e){return void 0!==e})).map((function(e){return[r.id,e.id]}))))}),[])},b=r(67306),g=r(22222),v=r(84715);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){return(0,n.get)(e,"widgets.builder.settings")},S=function(e){return(0,n.get)(e,"widgets.dependencies")||{}},P=function(e){return Object.keys(S(e)).map((function(t){return S(e)[t]}))},j=function(e){return(0,n.get)(e,"widgets.builder.editor")},C=(0,g.P1)(j,i.Iz,(function(e){return(0,b.Wy)(e)&&(0,b.i$)(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t||!n&&r})),x=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].widgets"))},T=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].collapsed"))},k=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].maximized"))},I=(0,g.P1)(x,T,k,(function(e,t,r){if(e){if(null!=r&&r.widget)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t===r.widget.id}));if(t)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id;return!t[r]}))}return e})),A=(0,g.P1)(T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),F=function(e){return(x(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},D=function(e){return(x(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},R=(0,g.P1)(F,D,o.Od,a.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat((0,n.castArray)(r).map((function(){return"map"}))).concat((0,n.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),N=(0,g.P1)(F,D,o.Od,a.F,j,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=i&&"map"!==i.widgetType?i&&i.layer||{}:i&&i.map&&i.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat((0,n.castArray)(r).map((function(){return r?"map":null}))).filter((function(e){return e})).concat((0,n.castArray)(t).filter((function(){return-1===o.indexOf("viewer")})).filter((function(e){return(0,n.isArray)(a)||a.name===e.layer.name})).filter((function(e){return i&&i.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),M=function(e){return(0,n.get)(E(e),"".concat(l.jv))},L=function(e){return(0,n.get)(M(e),"active")},_=((0,g.P1)(x,(function(e){return function(){var e=s(y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])),t={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},r=(0,u.qH)(t.base,t.range,e.length+1,t.options);return e.map((function(e,t){return{color:r[t],widgets:e}}))}(e)})),function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].layouts"))}),Z=function(e){return(0,n.get)(e,"widgets.containers[".concat(l.VR,"].layout"))},B=function(e){return(0,n.get)(e,"widgets.tray")},G=function(e){return(0,n.get)(e,"widgets.builder.editor.returnToFeatureGrid",!1)},z=function(e){return(0,n.get)(j(e),"filter")},U=(0,v.y)(S,P,(function(e){return P(e).map((function(t){return 0===t.indexOf("map.")?(0,n.get)((0,o.Od)(e),t.slice(4)):t.match(l.oU)?function(e,t){var r=l.oU.exec(e),o=r&&r[2],i=m(e,t);return o?(0,n.get)(i,o):i}(t,x(e)):(0,n.get)(e,t)}))}),(function(e,t,r){return t.reduce((function(t,n,o){return O(O({},t),{},w({},Object.keys(e)[o],r[o]))}),{})}));(0,g.zB)({widgets:x,layouts:_})},76712:(e,t,r)=>{"use strict";r.d(t,{n0:()=>E,tW:()=>P,FJ:()=>j,F8:()=>C,ll:()=>T,eL:()=>k,AD:()=>I,oR:()=>A,LZ:()=>F,eX:()=>D});var n=r(27418),o=r.n(n),i=r(96486),a=r(8575),l=r(90183),c=r(37275),s=r(24262),u=r(86638),p=r(7294),f=r(33044),d=r(67007);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){return e&&e.replace(/\/csw$/,"/")},v=function(e){return(0,i.isObject)(e)&&e._||e},h=function(e,t){return e.filter((function(r){return p.getTileMatrixSet(t,r,e,t,null)}))},O=function(e){var t=Array.isArray(e.references)?e.references:[e.references];return(0,i.head)([].filter.call(t,(function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))},w={csw:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e;return n&&n.records?n.records.map((function(e){var n,l,c,s=e.dc;if(s&&s.URI){var p=(0,i.isArray)(s.URI)?s.URI:s.URI&&[s.URI]||[],f=(0,i.head)([].filter.call(p,(function(e){return"thumbnail"===e.name})))||(0,i.head)([].filter.call(p,(function(e){var t;return!e.name&&(null===(t=e.protocol)||void 0===t?void 0:t.indexOf("image/"))>-1})));n=f?f.value:null,l=(0,i.head)([].filter.call(p,(function(e){return e.protocol&&(e.protocol.match(/^OGC:WMS-(.*)-http-get-map/g)||e.protocol.match(/^OGC:WMS/g))})))}if(!l&&s&&s.references&&s.references.length){var d=Array.isArray(s.references)?s.references:[s.references];if(l=(0,i.head)([].filter.call(d,(function(e){return e.scheme&&(e.scheme.match(/^OGC:WMS-(.*)-http-get-map/g)||"OGC:WMS"===e.scheme)})))){var m=a.parse(l.value,!0),v=m.query&&m.query.layers||s.alternative;l=o()({},l,{name:v})}}if(!l&&s&&s.references&&s.references.length){var h=Array.isArray(s.references)?s.references:[s.references];if(c=(0,i.head)([].filter.call(h,(function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme})))){var w=s.alternative;c=o()({},c,{name:w})}}if(!n&&s&&s.references){var E=O(s);E&&(n=E.value)}var S=[];if(s&&s.references&&(Array.isArray(s.references)?s.references:[s.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;S.push({type:e.scheme,url:r})})),l&&l.name){0===l.value.indexOf("http")||o()({},l,{value:(t&&t.catalogURL||"")+"/"+l.value});var P={type:l.protocol||l.scheme,url:l.value,SRS:[],params:{name:l.name}};S.push(P)}if(c&&c.name){var j={type:"arcgis",url:c.value,SRS:[],params:{name:c.name}};S.push(j)}n&&(0===n.indexOf("http")||(n=(g(t&&t.url)||"")+n));var C={boundingBox:e.boundingBox&&e.boundingBox.extent&&(0,i.castArray)(e.boundingBox.extent.join(","))};if(s&&(C=y(y({},C),(0,i.sortBy)(Object.keys(s)).reduce((function(e,t){return y(y({},e),{},b({},t,(0,i.uniq)((0,i.castArray)(s[t]))))}),{}))),s&&s.URI&&(0,i.castArray)(s.URI)&&(0,i.castArray)(s.URI).length&&(C=y(y({},C),{},{uri:["<ul>"+(0,i.castArray)(s.URI).map((function(e){return'<li><a target="_blank" href="'.concat(e.value,'">').concat(e.name,"</a></li>")})).join("")+"</ul>"]})),s&&s.subject&&(0,i.castArray)(s.subject)&&(0,i.castArray)(s.subject).length&&(C=y(y({},C),{},{subject:["<ul>"+(0,i.castArray)(s.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),S&&(0,i.castArray)(S).length?C=y(y({},C),{},{references:["<ul>"+(0,i.castArray)(S).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete C.references,s&&s.temporal){var x=s.temporal.split("; ");if(x.length){var T=x.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));T=T.length?T[0]:"W3C-DTF";var k=x.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),o=e.substr(t+1,e.length-1),a=e.length-t-1<=10;return(0,i.includes)(["start","end"],n)&&"W3C-DTF"===T&&!a?(0,u.S$)(r,"catalog.".concat(n))+new Date(o).toLocaleString():(0,i.includes)(["start","end"],n)?(0,u.S$)(r,"catalog.".concat(n))+o:""}));C=y(y({},C),{},{temporal:["<ul>"+k.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}return{boundingBox:e.boundingBox,description:s&&(0,i.isString)(s.abstract)&&s.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:s&&(0,i.isString)(s.identifier)&&s.identifier||"",references:S,thumbnail:n,title:s&&(0,i.isString)(s.title)&&s.title||"",tags:s&&s.tags||"",metadata:C}})):null},wms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.records?e.records.map((function(r){return{capabilities:r,credits:r.credits,boundingBox:d.ZP.getBBox(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",layerOptions:y(y({},(null==t?void 0:t.layerOptions)||{}),(null==e?void 0:e.layerOptions)||{}),title:(0,s.getLayerTitleTranslations)(r)||r.Name,formats:(0,i.castArray)(r.formats||[]),dimensions:(r.Dimension&&(0,i.castArray)(r.Dimension)||[]).map((function(e){return o()({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&((0,i.isArray)(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}]}})):null},wmts:function(e,t){return e&&e.records?e.records.map((function(e){var r=(0,i.castArray)(p.getGetTileURL(e)||t&&t.url);1===r.length&&(r=r[0]);var n=p.getCapabilitiesURL(e),a=(0,i.castArray)(e.TileMatrixSetLink||[]).reduce((function(t,r){var n,a=(0,i.head)((e.TileMatrixSet&&(0,i.castArray)(e.TileMatrixSet)||[]).filter((function(e){return e["ows:Identifier"]===r.TileMatrixSet}))),c=a&&l.default.getEPSGCode(a["ows:SupportedCRS"]),s=r.TileMatrixSetLimits&&(r.TileMatrixSetLimits.TileMatrixLimits||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}}))||a.TileMatrix.map((function(e){return{identifier:e["ows:Identifier"]}}));return o()(t,(b(n={},a["ows:Identifier"],s),b(n,c,s),n))}),{}),c=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e);return{title:v(e["ows:Title"]||e["ows:Identifier"]),description:v(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:v(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,tileMatrixSet:e.TileMatrixSet,matrixIds:a,format:e.format,TileMatrixSetLink:(0,i.castArray)(e.TileMatrixSetLink),boundingBox:{extent:[c["ows:LowerCorner"].split(" ")[0],c["ows:LowerCorner"].split(" ")[1],c["ows:UpperCorner"].split(" ")[0],c["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:[{type:"OGC:WMTS",url:r,SRS:h(e.SRS||[],a),params:{name:e["ows:Identifier"]}}]}})):null},tms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.records){var r=t.service&&"tms"===t.service.provider;return r?e.records.map((function(e){return{title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:[{type:"OGC:TMS",version:"1.0.0",url:t.url}]}})):e.records.map((function(e){return{title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,type:"tileprovider",references:[]}}))}return null},wfs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.records;return t?t.map((function(e){return y(y({},e),{},{references:[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}]})})):null},backgrounds:function(e){return e&&e.records?e.records.map((function(e){return{description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null}},E=function(e){return e.filter((function(e){return l.default.isSRSAllowed(e)})).reduce((function(e,t){return o()(e,b({},t,!0))}),{})},S=function(e,t){var r=e.split("?"),n={};return r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])})),{url:r[0],params:n}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t;return{wfs:(0,i.head)(r.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:(0,i.head)(r.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:(0,i.head)(r.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:(0,i.head)(r.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:(0,i.head)(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.references,r=void 0===t?[]:t,n=(0,i.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=(0,i.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),a=(0,i.head)(r.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),l=[];return n&&l.push({type:"WMS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wmsGetCapLink"}),a&&l.push({type:"WMTS_GET_CAPABILITIES",url:a.url,labelId:"catalog.wmtsGetCapLink"}),o&&l.push({type:"WFS_GET_CAPABILITIES",url:o.url,labelId:"catalog.wfsGetCapLink"}),l},x=function(e){return e&&!(0,i.isArray)(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wms",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.removeParams,o=void 0===n?[]:n,a=r.format,l=r.catalogURL,s=r.url,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},p=arguments.length>4?arguments[4]:void 0;if(!e||!e.references)return null;var f,d,m=P(e),b=m.wms,g=m.wmts,v=b||g,h=function(e){return S(c.ZP.cleanDuplicatedQuestionMarks(e),["request","layer","layers","service","version"].concat(o))},O=x(v.url);if(O&&(0,i.isArray)(O))f=O.map((function(e){return h(e)})).map((function(e){return e.url})),d=O.map((function(e){return h(e)})).map((function(e){return e.params})).reduce((function(e,t){return y(y({},e),t)}),{});else{var w=h(O||l),j=w.url,T=w.params;f=j,d=T}var k=function(e){return(0,i.isArray)(e)&&1===e.length?e[0]:e},I=k(s||f),A=E(v.SRS);return y(y(y({type:t,requestEncoding:e.requestEncoding,style:e.style,format:a,url:I,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:v.params&&v.params.name,title:e.title||v.params&&v.params.name,matrixIds:"wmts"===t?e.matrixIds||[]:void 0,description:e.description||"",tileMatrixSet:"wmts"===t?e.tileMatrixSet||[]:void 0,credits:!c.ZP.getConfigProp("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:C(e),params:d,allowedSRS:A,catalogURL:l},u),e.layerOptions),{},{localizedLayerStyles:(0,i.isNil)(p)?void 0:p})},k=function(e,t,r,n){return w[e]&&w[e](t,r,n)||null},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.references)return null;var r=j(e),n=r.esri;return y({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},t)},A=function(e,t,r){var n=e.tileMapUrl,o=t.TileMap,a=void 0===o?{}:o,l=r.forceDefaultTileGrid,c=a.Title,s=a.Abstract,u=a.SRS,p=a.BoundingBox,d=void 0===p?{}:p,m=a.Origin,y=a.TileFormat,g=void 0===y?{}:y,v=a.TileSets,h=a.$,O=h.version,w=h.tilemapservice,E=(0,i.get)(d,"$",{}),S=E.minx,P=E.miny,j=E.maxx,C=E.maxy,x=(0,i.get)(m,"$"),T=x.x,k=x.y,I=(0,i.get)(g,"$",{}),A=I.width,F=I.height,D=I["mime-type"],R=I.extension,N=[parseFloat(A),parseFloat(F,10)],M=(0,i.castArray)((0,i.get)(v,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,r=e.order,n=e["units-per-pixel"];return{href:(0,f.cleanAuthParamsFromURL)(t),order:parseFloat(r),resolution:parseFloat(n)}})),L=(0,i.get)(v,"profile");return{title:c,visibility:!0,hideErrors:!0,name:c,allowedSRS:b({},u,!0),description:s,srs:u,version:O,tileMapService:w?(0,f.cleanAuthParamsFromURL)(w):void 0,type:"tms",profile:L,tileMapUrl:n,forceDefaultTileGrid:l,bbox:d&&{crs:u,bounds:{minx:parseFloat(S),miny:parseFloat(P),maxx:parseFloat(j),maxy:parseFloat(C)}},tileSets:M,origin:{x:parseFloat(T),y:parseFloat(k)},format:D,tileSize:N,extension:R}},F=function(e){return y({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:C(e),style:{weight:1,color:"rgba(0, 0, 255, 1)",opacity:1,fillColor:"rgba(0, 0, 255, 0.1)",fillOpacity:.1,radius:10}},e.layerOptions)},D=function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}}},36882:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,credits:{text:" OpenStreetMap, Open Street Map and contributors, CC-BY-SA",link:"http://www.openstreetmap.org/copyright"},attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors',credits:{text:"Map data:  OpenSeaMap contributors",link:"http://www.openseamap.org"}}},OpenPtMap:{url:"http://openptmap.org/tiles/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: &copy; <a href="http://www.openptmap.org">OpenPtMap</a> contributors'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},CyclOSM:{url:"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: {attribution.OpenStreetMap}'}},OpenMapSurfer:{url:"https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png",options:{maxZoom:19,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> | Map data '},variants:{Roads:{options:{variant:"roads",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},Hybrid:{options:{variant:"hybrid",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},AdminBounds:{options:{variant:"adminb",maxZoom:18,attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},ContourLines:{options:{variant:"asterc",maxZoom:18,minZoom:13,attribution:'{attribution.OpenMapSurfer} <a href="https://lpdaac.usgs.gov/products/aster_policies">ASTER GDEM</a>'}},Hillshade:{options:{variant:"asterh",maxZoom:18,attribution:'{attribution.OpenMapSurfer} <a href="https://lpdaac.usgs.gov/products/aster_policies">ASTER GDEM</a>, <a href="http://srtm.csi.cgiar.org/">SRTM</a>'}},ElementsAtRisk:{options:{variant:"elements_at_risk",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}}}},Hydda:{url:"https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',credits:{text:"Map data: OpenCycleMap contributors",link:"http://www.opencyclemap.org"},variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19,maxNativeZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19,maxNativeZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{maxNativeZoom:18,type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["1","2","3","4"]},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"https://api.tiles.mapbox.com/v4/{source}/{z}/{x}/{y}.png?access_token={accessToken}",options:{maxNativeZoom:18,attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["a","b","c","d"]}},MapBoxStyle:{url:"https://api.mapbox.com/styles/v1/mapbox/{source}/tiles/{z}/{x}/{y}?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a>',subdomains:["a","b","c","d"]}},Stamen:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"watercolor",ext:"jpg",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:0,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:0,maxZoom:18}},TerrainLabels:{options:{variant:"terrain-labels",minZoom:0,maxZoom:18}}}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{maxNativeZoom:18,variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,maxNativeZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,maxNativeZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:["1","2","3","4"],mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,maxNativeZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:["0","1","2","3"],minZoom:2,maxZoom:18,maxNativeZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,maxNativeZoom:16,subdomains:["1","2","3","4"],bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:["a","b","c","d"],maxZoom:19,maxNativeZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,maxNativeZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,maxNativeZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}9/{z}/{y}/{x}.{format}",options:{attribution:'<span>Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.</span>',credits:{text:"Black Marble imagery courtesy NASA Earth Observatory"},bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,maxNativeZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"VIIRS_CityLights_2012",maxZoom:8,maxNativeZoom:8}},ModisTerraLSTDay:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}},ModisTerraSnowCover:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,maxNativeZoom:8,opacity:.75}},ModisTerraAOD:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}6/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,maxNativeZoom:6,opacity:.75}},ModisTerraChlorophyll:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/{variant}/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,maxNativeZoom:18,subdomains:["0","1","2","3"]},variants:{OS_1900:"NLS_API",OS_1920:"nls",OS_opendata:{url:"http://geo.nls.uk/maps/opendata/{z}/{x}/{y}.png",options:{maxZoom:16,maxNativeZoom:16}},OS_6inch_1st:{url:"http://geo.nls.uk/maps/os/six_inch/{z}/{x}/{y}.png",options:{tms:!0,minZoom:6,maxZoom:16,maxNativeZoom:16,bounds:[[49.86261,-8.66444],[60.89421,1.7785]]}},OS_6inch:"os_6_inch_gb",OS_25k:"25k",OS_npe:{url:"http://geo.nls.uk/maps/os/newpopular/{z}/{x}/{y}.png",options:{tms:!0,minZoom:3,maxZoom:15,maxNativeZoom:15}},OS_7th:"os7gb",OS_London:{options:{variant:"London_1056",minZoom:9,maxNativeZoom:9,bounds:[[51.177621,-.708618],[51.618016,.355682]]}},GSGS_Ireland:{url:"http://geo.nls.uk/maps/ireland/gsgs4136/{z}/{x}/{y}.png",options:{tms:!0,minZoom:5,maxZoom:15,maxNativeZoom:15,bounds:[[51.37178,-10.810546],[55.422779,-5.262451]]}}}},LINZ:{url:"http://tiles-{s}.data-cdn.linz.govt.nz/services;key={linzAPIkey}/tiles/v4/{variant}/{tilematrixset}/{z}/{x}/{y}.png",options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',subdomains:["a","b","c","d"],linzAPIkey:"<insert your LINZ API Key here>",variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22},variants:{nz_aerial_imagery:{options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50767",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52343",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52324",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50798",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_parcel_boundaries_wireframe:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"set=4769",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}}}},PDOK:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{attribution:'<a href="https://www.pdok.nl/introductie?articleid=1949876">BRT Achtergrondkaart</a> by <a href="https://www.kadaster.nl/">Kadaster</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>',format:"png",bounds:[[48.0405018704,-1.65729160235],[56.1105896442,12.4317272654]],minZoom:6,maxZoom:19,maxNativeZoom:19},variants:{brtachtergrondkaart:"brtachtergrondkaart",brtachtergrondkaartgrijs:"brtachtergrondkaartgrijs",brtachtergrondkaartpastel:"brtachtergrondkaartpastel",brtachtergrondkaartwater:"brtachtergrondkaartwater",luchtfotoRGB:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm RGB</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}},luchtfotoIR:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25IR",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm Infrarood</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}}}}}},12226:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(62651);function o(e,t){return(0,n.U)(e)(t)}},89077:(e,t,r)=>{"use strict";r.d(t,{LR:()=>p,RP:()=>f});var n=r(78598),o=r.n(n),i=r(97995),a=r.n(i),l=(r(39902),r(89597),r(66085),r(82702),r(27418),r(72163),r(5055),r(96486));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(23570);var u=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,l.flatten)([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var r=c(t,2),n=r[0],o=r[1];return e.replace(n,o)}),o)};u.bind(null,!0,!0,!0,!1),u.bind(null,!1,!1,!0,!1),r(24262),r(90183),new DOMParser;var p=function(e,t,r){var n=new Blob([e],{type:r});o().saveAs(n,t)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;p(a()(e),t,r)}},2870:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i,j:()=>a});var n=r(96486),o=r(53005),i=function(e,t){var r=e.format,n=e.queryParams,i=void 0===n?{}:n;return i.info_format||i.outputFormat||r&&o.O7[r]||t.format},a=function(e){return!!(0,n.get)(e,"layer.search.url")}},62192:(e,t,r)=>{"use strict";r.d(t,{k2:()=>y,tL:()=>v});var n=r(96486),o=r(23570),i=r.n(o),a=r(58767),l=r(8797),c=r(90183);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e,t){return{length:(0,n.round)((0,l.convertUom)(t,"m",e.length.label)||0,2)+" "+e.length.label,area:(0,n.round)((0,l.convertUom)(t,"sqm",e.area.label)||0,2)+" "+e.area.label,bearing:(0,l.getFormattedBearingValue)((0,n.round)(t||0,6)).toString()}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,n.uniq)(e.map((function(e){return"LineString"===e.geometry.type&&"bearing"===(0,n.get)(e,"properties.values[0].type","")?"Bearing":e.geometry.type})))},b={offsetY:1,fontSize:"10",fontSizeUom:"px",fontFamily:"Courier New",font:"10px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},g={offsetY:-15,fontSize:"13",fontSizeUom:"px",fontFamily:"Courier New",font:"13px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},v=function(e,t,r,o,s,p){var d,y,v=(d=e,(y=(0,n.uniq)(d.map((function(e){return(0,n.get)(e,"properties.values[0].type","")})))).length>1?{title:"Multiple Measurement",iconGlyph:"geometry-collection"}:{title:"Measure "+(0,n.startCase)(y[0]),iconGlyph:"1-measure-"+y[0]});return{type:"FeatureCollection",features:[].concat(f((0,n.flatten)(e.map((function(e){return function(e,t,r){var n,o,s,p=r||g,d=!(null===(n=e.properties)||void 0===n||null===(o=n.values)||void 0===o||!o.find((function(e){return"bearing"===e.type})));return[{type:"Feature",geometry:{type:e.geometry.type,coordinates:(0,l.validateFeatureCoordinates)(e.geometry),textLabels:e.geometry.textLabels},properties:{id:i()(),isValidFeature:!0,geometryGeodesic:"LineString"!==e.geometry.type||d?null:{type:"LineString",coordinates:(0,c.transformLineToArcs)(e.geometry.coordinates)},useGeodesicLines:"LineString"===e.geometry.type&&!d,values:(null===(s=e.properties)||void 0===s?void 0:s.values)||[]},style:[u(u({},a.z4[e.geometry.type]),{},{type:e.geometry.type,id:i()(),geometry:"LineString"!==e.geometry.type||d?null:"lineToArc",title:"".concat(e.geometry.type," Style"),filtering:!0})].concat("LineString"===e.geometry.type?(0,a.N_)():[])}].concat(f(e.properties.values.map((function(e){var r=e.value,n=e.formattedValue,o=e.type;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:n||m(t,r)[o],isText:!0,isValidFeature:!0,id:i()()},style:u(u({},p),{},{id:i()(),filtering:!0,title:"Text Style",type:"Text"})}}))))}(e,r,p)})))),f(t.filter((function(e){return!!e})).map((function(e){var t=e.text;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:t,isValidFeature:!0,isText:!0,id:i()()},style:u(u({},b),{},{id:i()(),filtering:!0,title:"Text Style",type:"Text"})}})))),properties:{id:o,description:s,type:"Measure",title:v.title,iconGlyph:v.iconGlyph},style:{}}}},99009:(e,t,r)=>{"use strict";r.d(t,{I$:()=>D,s1:()=>R,Vi:()=>_,nK:()=>Z,Py:()=>B,H$:()=>G,uW:()=>z,YD:()=>U,$N:()=>W,U_:()=>V,Gg:()=>X,VM:()=>Q,ZF:()=>J});var n=r(91175),o=r.n(n),i=r(27361),a=r.n(i),l=r(1469),c=r.n(l),s=r(47037),u=r.n(s),p=r(85564),f=r.n(p),d=r(14293),m=r.n(d),y=r(57557),b=r.n(y),g=r(92138),v=r.n(g),h=r(52353),O=r.n(h),w=r(23570),E=r.n(w),S=r(8575),P=r(11531);function j(e){return function(e){if(Array.isArray(e))return e}(e)||T(e)||x(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||T(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function T(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D="___",R="styleeditor",N={},M={css:"geocss",sld:"xml"},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type&&e.type.localPart&&e.type.localPart.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},_=function(){return"".concat(E()(),"_ms_").concat(Date.now().toString())},Z=function(e){var t=e.title;return"".concat((void 0===t?"":t).toLowerCase().replace(/\s/g,"_")).concat(D).concat(E()())},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeLayer,r=void 0===t?{}:t,n=e.describeFeatureType,i=void 0===n?{}:n,l=r&&r.owsType||null,c=a()(i,"complexType[0].complexContent.extension.sequence.element")||null,s=c&&o()(c.filter((function(e){var t=e.type;return t&&"gml"===t.prefix}))),u=("WCS"===l?"raster":s&&"WFS"===l&&L(s))||null,p="raster"===u?r.bands:c&&c.reduce((function(e,t){var r=t.name,n=t.type,o=void 0===n?{}:n;return A(A({},e),{},F({},r,{localPart:o.localPart,prefix:o.prefix}))}),{});return{geometryType:u,properties:p,owsType:l}},G=function(e){return M[e]||e},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(N.isSameOrigin)return N.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;var r=[t.baseUrl].concat(C(t.availableUrls||[])),n=r.map((function(e){var t=S.parse(e);return"".concat(t.protocol,"//").concat(t.host)})),o=S.parse(e.url),i="".concat(o.protocol,"//").concat(o.host);return-1!==n.indexOf(i)},U=function(){if(N.getStyleTemplates){var e=N.getStyleTemplates();return[].concat(C(c()(e)?e:[]),C(P.baseTemplates))}return[].concat(C(P.customTemplates),C(P.baseTemplates))},W=function(e){var t=u()(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},V=function(e){var t=e.name,r=e.workspace;return"".concat(r&&r.name&&"".concat(r.name,":")||"").concat(t)},q=function e(t,r){if(!(t&&t.filterFields&&t.groupFields&&r))return null;var n=t.filterFields.filter((function(e){return e.groupId===r.id})),o=t.groupFields.filter((function(e){return e.groupId===r.id})),i=[].concat(C(n),C(o)),a={OR:"||",AND:"&&",like:"*=","=":"==","<>":"!=",isNull:"=="},l=i.map((function(r){if(void 0!==r.rowId){var n=r.operator,o=r.attribute,i=r.value;return n&&o&&!m()(i)?[a[n]||n,o,"isNull"===n?null:i]:null}return e(t,r)})).filter((function(e){return e})),c=r.logic;return 0===l.length?null:[a[c]].concat(C(l))},H=function(e){var t,r=null==e||null===(t=e.groupFields)||void 0===t?void 0:t.find((function(e){return!e.groupId}));return r&&q(e,r)},$=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,o=void 0===n?0:n,i=r.groupId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)return null;var l={"||":"OR","&&":"AND","*=":"like","==":"=","!=":"<>"},s=j(t),u=s[0],p=s.slice(1),f=c()(u),d=f?u[0]:u,m=f?u.filter((function(e,t){return 0!==t})):p;if("||"===d||"&&"===d){var y=E()();return a("groupField",{id:y,index:o,logic:l[d]}),e(p,{index:o+1,groupId:y},a)}return d?(a("filterField",{attribute:m[0],groupId:i,operator:l[d]||d,rowId:E()(),type:isNaN(parseFloat(m[1]))?"string":"number",value:m[1]}),e(p,{index:o,groupId:i},a)):null},K=function(e){var t=[],r=[];return $(e,void 0,(function(e,n){"groupField"===e&&t.push(n),"filterField"===e&&r.push(n)})),{groupFields:t,filterFields:r}};function Y(e){var t=v()(e,O());return Object.keys(t).reduce((function(e,r){switch(r){case"haloColor":case"haloWidth":return"Text"===t.kind&&0===t.haloWidth?e:A(A({},e),{},F({},r,t[r]));case"outlineWidth":case"outlineColor":case"outlineOpacity":return"Fill"===t.kind&&0===t.outlineWidth?e:A(A({},e),{},F({},r,t[r]));case"strokeWidth":case"strokeColor":case"strokeOpacity":return"Mark"===t.kind&&0===t.strokeWidth?e:A(A({},e),{},F({},r,t[r]));case"graphicFill":case"graphicStroke":return A(A({},e),{},F({},r,Y(t[r])));default:return A(A({},e),{},F({},r,t[r]))}}),{})}function X(e){return e&&e.rules?A(A({},e),{},{rules:f()(e.rules.map((function(e){if("Classification"===e.kind)return(e.classification||[]).map((function(t,r){var n=r===e.classification.length-1?"<=":"<",o=null!==t.min?[[">=",e.attribute,t.min]]:[],i=null!==t.max?[[n,e.attribute,t.max]]:[],a=null!==t.min&&">= "+t.min,l=null!==t.max&&n+" "+t.max;return A(A({name:a&&l?a+" and "+l:a||l,filter:o[0]||i[0]?["&&"].concat(o,i):void 0},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[Y(A(A({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","attribute","symbolizerKind"])),{},{kind:e.symbolizerKind||"Fill",color:t.color}))]})}));if("Raster"===e.kind){var t=e.classification&&e.classification.length>0&&{colorMapEntries:(e.classification||[]).map((function(e){return{label:e.label,quantity:e.quantity,color:e.color,opacity:e.opacity}}))};return A(A({name:e.name||""},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[Y(A(A({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","continuous","symbolizerKind","name"])),{},{kind:"Raster"},t&&{colorMap:t}))]})}var r=H(e.filter);return A(A({},e),{},{filter:r,symbolizers:((null==e?void 0:e.symbolizers)||[]).map((function(e){return Y(e)}))})})))}):e}function Q(e){return A(A({},e),{},{rules:e.rules.map((function(e){return A(A({},e),{},{ruleId:E()(),filter:e.filter&&K(e.filter),symbolizers:e.symbolizers&&e.symbolizers.map((function(e){return A(A({},e),{},{symbolizerId:E()()})}))||[]})}))})}function J(e){return new Promise((function(t,r){e||r({messageId:"imageSrcEmpty",isBase64:!1});var n=!1;if(0===e.indexOf("data:image")){var o=e.split("base64,");(n=function(e){try{return window.atob(e),!0}catch(e){return!1}}(o[o.length-1]))||r({messageId:"imageSrcInvalidBase64",isBase64:n})}var i=new Image;i.onload=function(){t({src:e,isBase64:n})},i.onerror=function(){r({messageId:n?"imageSrcInvalidBase64":"imageSrcLoadError",isBase64:n})},i.src=e}))}},11847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>a,w0:()=>l,K2:()=>c,Nw:()=>s});var n=r(8575),o=r(96486);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(64210);var a=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,a,l=(a=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(o,a)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[1],s=l[3],u=l[4],p=l[5],f=0===p.indexOf("/")?p.split("/")[1]:"";return{protocol:c,domain:s,port:u,rootPath:p,applicationRootPath:f}},l=function(e,t){var r=(0,o.isArray)(e)?e[0]:e,i=(0,o.isArray)(t)?t[0]:t;if(r===i)return!0;if(!r||!i)return!1;if(!(0,o.isString)(r)||!(0,o.isString)(i))return!1;var l=n.parse(r),c=n.parse(i),s=a(r),u=a(i),p=s.protocol===u.protocol,f=s.domain===u.domain,d=s.port===u.port,m=l.pathname===c.pathname,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return(0,o.isEqual)((0,o.sortBy)(r),(0,o.sortBy)(n))}(l.query,c.query);return p&&d&&f&&m&&y},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(t);return r.test(e)},s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,n=new RegExp(r),i=n.test(e);if(!i)return!1;if(i&&!t)return!0;if(i&&t){var a=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return(0,o.find)(a,e)})).length}return!1}},95344:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(96486).find,l=r(27418)({},r(89808)),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce((function(r,n){var o=new RegExp(e[n]);return r&&o.test(t[n])}),!0)},s=function(e,t,r){if(l[t]){if(l[t][e])return l[t][e](r);if(l[t].defaultEditor)return l[t].defaultEditor(r)}return null};e.exports={get:function(){return l},register:function(e){var t=e.name,r=e.editors;r&&(l[t]=r)},remove:function(e){if(t=e,-1!==Object.keys(l).indexOf(t))try{return delete l[e],!0}catch(e){return!1}var t;return!1},clean:function(){l={}},getCustomEditor:function(e){var t=e.attribute,r=e.url,n=e.typeName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,u=l.type,p=l.generalProps,f=void 0===p?{}:p,d=l.props,m=a(i,(function(e){return c(e.regex,{attribute:t,url:r,typeName:n})}));if(m){var y=s(u,m.editor,o(o(o({},d),f),m.editorProps||{}));return y}return null}}},51751:(e,t,r)=>{var n=r(34387),o=n.filter,i=n.fidFilter;e.exports={fidFilter:i,filter:o}},50937:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=r(96486).get,s=r(75775),u=s.insert,p=s.feature,f=s.attribute,d=r(99381).transaction,m=r(50525),y=m.deleteFeaturesByFilter,b=m.deleteFeature,g=r(16685),v=g.update,h=g.propertyChange,O=r(78889),w=O.getPropertyDesciptor,E=O.getValue,S=O.findGeometryProperty,P=O.featureTypeSchema,j=r(39156),C=function(e,t){return t&&t.length>0?[e].concat(function(e){if(Array.isArray(e))return l(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e;var r},x=function(e){this.version=e},T=function(e){return c(e,"featureTypes[0].typeName")},k=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(T(e)):T(e)},I=function(e,t){return e.geometry_name||S(t).name},A=function(e,t){return"geometry"===e||e===I({},t)?I({},t):e};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,i=t.wfsNS,l=void 0===i?"wfs":i,c=a(t,["wfsVersion","wfsNS"]);if("1.1.0"!==n)throw new x(n);var s=function(t){return p(e.targetPrefix,T(e),Object.keys(t.properties||[]).filter((function(t){return w(t,e)})).map((function(r){return f(e.targetPrefix,r,E(t.properties[r],r,e))})).concat(t.geometry?f(e.targetPrefix,I(t,e),E(t.geometry,I(t,e),e)):[]))},m=function(e){return e.features?e.features.map(s):s(e)};return o(o({},j(o(o({},c),{},{wfsVersion:n,wfsNS:l}))),{},{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return u(l,Array.isArray(C(e,r))?C(e,r).map(m):m(e))},getPropertyName:function(t){return A(t,e)},deleteByFilter:function(t){return y(l,t,k(e))},deleteFeature:function(t){return b(l,t,k(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return v(l,k(e),C(t,n))},propertyChange:function(t,r){return h(l,t,E(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return d(C(t,o),P(e),n,l)}})}},50525:(e,t,r)=>{var n=r(51751).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,r){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},75775:e=>{var t=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},r=t,n=t;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:n,attribute:r}},99381:e=>{e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,i=r.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},16685:e=>{e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},39156:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2245),l=r(96486).castArray,c=r(78889).wfsToGmlVersion,s=function(e){return'service="WFS" version="'+e+'" '+("1.0.0"===e?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+"http://schemas.opengis.net/wfs/".concat(e,"1.0.0"===e?'/WFS-basic.xsd"':'/wfs.xsd"')},u=function(e){return'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"'};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wfsVersion,r=void 0===t?"1.1.0":t,n=e.gmlVersion,i=e.filterNS,p=e.wfsNS,f=void 0===p?"wfs":p,d=n;!d&&r?d=c(r):d||(d="3.1.1");var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewParams,n=e.resultType,o=e.outputFormat,i=e.startIndex,a=e.maxFeatures,l=function(e){return 0===r.indexOf("2.")?'count="'.concat(e,'"'):'maxFeatures="'.concat(e,'"')};return(0===r.indexOf("1.")?s(r):u(r))+(n?' resultType="'.concat(n,'"'):"")+(o?' outputFormat="'.concat(o,'"'):"")+(i||0===i?' startIndex="'.concat(i,'"'):"")+(a||0===a?" ".concat(l(a)):"")+(t?' viewParams="'.concat(t,'"'):"")},y=function(e){return l(e).map((function(e){return"<".concat("2.0"===r?"fes":"ogc",":PropertyName>").concat(e,"</").concat("2.0"===r?"fes":"ogc",":PropertyName>")})).join("")};return o(o({propertyName:y},a({gmlVersion:d,wfsVersion:r,filterNS:i||"2.0"===r?"fes":"ogc"})),{},{getFeature:function(e,t){return"<".concat(f,":GetFeature ").concat(m(t),">").concat(Array.isArray(e)?e.join(""):e,"</").concat(f,":GetFeature>")},sortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return"<".concat(f,":SortBy><").concat(f,":SortProperty>").concat(y(e),"<").concat(f,":SortOrder>").concat(t,"</").concat(f,":SortOrder></").concat(f,":SortProperty></").concat(f,":SortBy>")},query:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.srsName,i=void 0===o?"EPSG:4326":o;return"<".concat(f,":Query ").concat("2.0"===r?"typeNames":"typeName",'="').concat(e,'" srsName="').concat(i,'">')+"".concat(Array.isArray(t)?t.join(""):t)+"</".concat(f,":Query>")}})}},32785:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(47805),i=o.isFilterValid,a=o.toOGCFilterParts,l=r(2245)({}).and;e.exports={getWpsPayload:function(e){var t,r=e.layerName,o=e.layerFilter,c=e.attribute,s=e.maxFeatures,u=e.startIndex,p=e.value,f=p?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+c+"</ogc:PropertyName>   <ogc:Literal>*"+p+"*</ogc:Literal></ogc:PropertyIsLike>":"",d=o&&!o.disabled&&i(o)?a(o,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+r+'">'+(f.length>0||d.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+l.apply(void 0,(t=d,function(e){if(Array.isArray(e))return n(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([f]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+c+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+c+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+u+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},11531:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(23570),l=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}\n\n* {\n\tstroke: #999999;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})})),c=[{types:["linestring","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#999999"}]}}},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]}}},{types:["linestring","vector"],title:"Section line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]}}},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('shape://vertline'), #000000;\n    :stroke {\n        stroke: #000000;\n        size: 8;\n    };\n}\n",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Red road",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:{config:{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n",types:["linestring","vector"],title:"Label",format:"css",preview:{config:{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Line Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://dot');\n    :fill {\n        size: 8;\n        stroke: #000000;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    mark: symbol('circle');\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n\n* {\n    stroke: #333333;\n    stroke-width: 0.5;\n}\n",types:["polygon","vector"],title:"Marker",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd, symbol('cross');\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n",types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Label and Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{types:["point","vector"],title:"Square",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('square');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Circle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('circle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Triangle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('triangle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Star",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('star');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Cross",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('cross');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"X",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('x');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Plus",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Times",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Open arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 2;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol('circle');\n    :mark {\n        size: 7;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n",types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:{config:{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})}));e.exports={baseTemplates:l,customTemplates:c}},43744:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>YM});var n={};r.r(n),r.d(n,{activateBoxSelectionTool:()=>QE,activateGeometryFilter:()=>oS,activateTemporaryChangesEpic:()=>tS,askChangesConfirmOnFeatureGridClose:()=>ES,autoCloseFeatureGridEpicOnDrowerOpen:()=>wS,autoReopenFeatureGridOnFeatureInfoClose:()=>CS,closeIdentifyWhenOpenFeatureGrid:()=>IS,closeRightPanelOnFeatureGridOpen:()=>dS,deactivateBoxSelectionTool:()=>JE,deactivateGeometryFilter:()=>nS,deactivateSyncWmsFilterOnFeatureGridClose:()=>DS,deleteGeometryFeature:()=>yS,deleteSelectedFeatureGridFeatures:()=>sS,disableMultiSelect:()=>KE,enableGeometryFilterOnEditMode:()=>$E,featureGridBrowseData:()=>GE,featureGridChangePage:()=>iS,featureGridLayerSelectionInitialization:()=>zE,featureGridReloadPageOnSaveSuccess:()=>aS,featureGridSort:()=>WE,featureGridStartupQuery:()=>UE,featureGridUpdateGeometryFilter:()=>VE,featureGridUpdateTextFilters:()=>HE,handleBoxSelectionDrawEnd:()=>XE,handleClickOnMap:()=>YE,handleDrawFeature:()=>pS,handleEditFeature:()=>uS,handleGeometryFilterActivation:()=>rS,hideDrawerOnFeatureGridOpenMobile:()=>_S,hideFeatureGridOnDrawerOpenMobile:()=>LS,launchUpdateFilterEpic:()=>qE,onClearChangeConfirmedFeatureGrid:()=>SS,onCloseFeatureGridConfirmed:()=>PS,onFeatureGridCreateNewFeature:()=>gS,onFeatureGridGeometryEditing:()=>mS,onFeatureGridZoomAll:()=>TS,onOpenAdvancedSearch:()=>xS,removeWmsFilterOnGridClose:()=>jS,replayOnTimeDimensionChange:()=>MS,resetControlsOnEnterInEditMode:()=>kS,resetEditingOnFeatureGridClose:()=>fS,resetGridOnLocationChange:()=>hS,resetQueryPanel:()=>OS,savePendingFeatureGridChanges:()=>cS,selectFeaturesOnMapClickResult:()=>eS,setHighlightFeaturesPath:()=>vS,startSyncWmsFilter:()=>AS,stopSyncWmsFilter:()=>FS,syncMapWmsFilter:()=>RS,triggerDrawSupportOnSelectionChange:()=>bS,updateSelectedOnSaveOrCloseFeatureGrid:()=>lS,virtualScrollLoadFeatures:()=>NS});var o={};r.r(o),r.d(o,{checkExportDataEntriesEpic:()=>sN,checkWPSAvailabilityEpic:()=>nN,closeExportDownload:()=>lN,fetchFormatsWFSDownload:()=>iN,openDownloadTool:()=>oN,resetExportDataResultsOnLogout:()=>pN,serializeCookieOnExportDataChange:()=>uN,setExportDataResultsOnLoginSuccessAndMapConfigLoaded:()=>fN,showInfoBubbleMessageEpic:()=>cN,startFeatureExportDownload:()=>aN});var i=r(10206),a=r(79047),l=r(67294),c=r.n(l),s=r(45697),u=r.n(s),p=r(33664),f=r(27361),d=r.n(f),m=r(99534),y=r(94745),b=r(5346),g=r(30294),v=r(82904),h=r(80416),O=r(22843);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(o){var r=x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return j(this,e)});function a(){var e;E(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return T(C(e=i.call.apply(i,[this].concat(r))),"state",{groupName:""}),T(C(e),"changeName",(function(t){e.setState({groupName:t.target.value})})),T(C(e),"isValid",(function(e){return""!==e})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.enabled&&!this.props.enabled&&this.setState({groupName:""})}},{key:"render",value:function(){var e=this;return c().createElement(m.Z,null,c().createElement(y.Z,{size:"xs",clickOutEnabled:!1,showClose:!1,title:c().createElement(b.Z,{msgId:"toc.addGroup"}),show:this.props.enabled,buttons:[{text:c().createElement(b.Z,{msgId:"cancel"}),onClick:function(){e.props.onClose()}},{bsStyle:"primary",disabled:!this.isValid(this.state.groupName),text:c().createElement(b.Z,{msgId:"addgroup.addbtn"}),onClick:function(){e.props.onAdd(e.state.groupName,e.props.parent),e.props.onClose()}}]},c().createElement("div",{id:"mapstore-add-toc-group"},c().createElement(g.FormGroup,null,c().createElement("label",{htmlFor:"groupName"},c().createElement(b.Z,{msgId:"addgroup.groupName"})),c().createElement(g.FormControl,{name:"groupName",onChange:this.changeName,value:this.state.groupName})))))}}])&&S(t.prototype,r),a}(l.Component);T(k,"propTypes",{enabled:u().bool,parent:u().string,onClose:u().func,onAdd:u().func}),T(k,"defaultProps",{enabled:!1,parent:null,onClose:function(){},onAdd:function(){}});var I=(0,p.connect)((function(e){return{enabled:d()(e,"controls.addgroup.enabled",!1),parent:d()(e,"controls.addgroup.parent",null)}}),{onClose:v.pu.bind(null,"addgroup","enabled",!1,"parent",null),onAdd:h.Rp})(k);const A=(0,O.rx)("AddGroup",{component:I,containers:{TOC:{doNotHide:!0,name:"AddGroup"}}});var F=r(9825),D=r(22222),R=r(18093),N="LAYER_FILTER:INIT_LAYER_FILTER",M="LAYER_FILTER:APPLIED_FILTER",L="LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",_="LAYER_FILTER:DISCARD_CURRENT_FILTER",Z="LAYER_FILTER:APPLY_FILTER",B="LAYER_FILTER:OPEN_QUERY_BUILDER";function G(){return{type:L}}function z(){return{type:_}}function U(){return{type:Z}}var W=r(90825),V=r(1550),q=r(97395),H=r(75110),$=function(e){return e.swipe&&e.swipe||{active:!1}},K=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},Y=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}},X=r(827),Q=r(8316),J=r(7147),ee=r(7877),te=r(74621),re=r(38842),ne=r(24262),oe=r(52259),ie=r(86638),ae=r(27418),le=r.n(ae),ce=r(24273),se=r.n(ce),ue=r(96486),pe=r(57579),fe=r(31273),de=r(88113),me=r(93152),ye=r(59309),be=r(24819),ge=r(42678),ve=r(29180),he=r(51269),Oe=r(29423),we=r(64152);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ae=function e(t,r){return t.reduce((function(t,n){var o=le()({},n);return o.nodes&&(o=le()({},o,{nodes:e(o.nodes,r)})),r.forEach((function(e){o=e.func(o)?le()({},o,e.options):le()({},o)})),t.push(o),t}),[])},Fe=function(e,t,r){return-1!==(((0,ue.isObject)(e.title)?e.title[r]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},De=(0,D.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},H.Bt,H.jN,$,H.yj,H.lI,X.Od,Q.Pz,Q.KV,H.NP,H.wA,H.l2,X.Zs,de.$t,J.PJ,ee.us,me.c0,te.np,re.wk],(function(e,t,r,n,o,i,a,l,c,s,u,p,f,d,m,y,b,g,v){return{enabled:e,groups:t,settings:r,swipeSettings:n,layerMetadata:o,layerdownload:i,currentZoomLvl:a&&a.zoom,scales:(0,oe.getScales)(a&&a.projection||"EPSG:3857",a&&a.mapOptions&&a.mapOptions.view&&a.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:c,selectedNodes:s,filterText:u,generalInfoFormat:y,selectedLayers:p.filter((function(e){return(0,ue.head)(s.filter((function(t){return t===e.id})))})),noFilterResults:0===p.filter((function(e){return Fe(e,u,l)})).length,updatableLayersCount:p.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:s.map((function(e){return(0,ne.getNode)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:f,filteredGroups:Ae(t,[{options:{showComponent:!0},func:function(){return!u}},{options:{loadingError:!0},func:function(e){return(0,ue.head)((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return u&&(0,ue.head)((e.nodes||[]).filter((function(t){return Fe(t,u,l)||t.nodes&&(0,ue.head)(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return(0,ue.head)((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&b})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&b}}]),catalogActive:d,activateWidgetTool:m,user:g,isLocalizedLayerStylesEnabled:v}})),Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ke(n);if(o){var r=ke(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xe(this,e)});function a(){var e;Pe(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ie(Te(e=i.call.apply(i,[this].concat(r))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),Ie(Te(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||ve.Z;return c().createElement(t,Se({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),Ie(Te(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||he.Z,r=(e.props.resolutions||(0,oe.getResolutions)())[e.props.currentZoomLvl];return c().createElement(t,Se({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null,resolution:r}))})),Ie(Te(e),"renderTOC",(function(){var t=e.getDefaultGroup(),r=e.getDefaultLayer(),n=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),o=n.length>0?" toc-body-sections-"+n.length:" toc-body-sections";return c().createElement("div",null,c().createElement(be.Z,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:c().createElement(b.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,ie.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:c().createElement(ge.Z,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:c().createElement(b.Z,{msgId:"layerProperties.windowTitle"}),opacityText:c().createElement(b.Z,{msgId:"opacity"}),elevationText:c().createElement(b.Z,{msgId:"elevation"}),saveText:c().createElement(b.Z,{msgId:"save"}),closeText:c().createElement(b.Z,{msgId:"close"}),confirmDeleteText:c().createElement(b.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:c().createElement(b.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:c().createElement(b.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:c().createElement(b.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:c().createElement(b.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:c().createElement(b.Z,{msgId:"cancel"}),addLayer:c().createElement(b.Z,{msgId:"toc.addLayer"}),addLayerTooltip:c().createElement(b.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:c().createElement(b.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:c().createElement(b.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:c().createElement(b.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:c().createElement(b.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:c().createElement(b.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:c().createElement(b.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:c().createElement(b.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:c().createElement(b.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:c().createElement(b.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:c().createElement(b.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:c().createElement(b.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:c().createElement(b.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:c().createElement(b.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:c().createElement(b.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:c().createElement(b.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),c().createElement("div",{className:"mapstore-toc"+o},e.props.noFilterResults&&e.props.filterText?c().createElement("div",null,c().createElement("div",{className:"toc-filter-no-results"},c().createElement(b.Z,{msgId:"toc.noFilteredResults"}))):c().createElement(ye.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},c().createElement(Oe.Z,{groupElement:t,layerElement:r}))))})),e}return t=a,(r=[{key:"render",value:function(){return this.props.groups?this.renderTOC():c().createElement("div",null)}}])&&je(t.prototype,r),a}(c().Component);Ie(Re,"propTypes",{id:u().number,items:u().array,buttonContent:u().node,groups:u().array,settings:u().object,swipeSettings:u().object,layerMetadata:u().object,layerdownload:u().object,metadataTemplate:u().oneOfType([u().string,u().array,u().object,u().func]),refreshMapEnabled:u().bool,groupStyle:u().object,groupPropertiesChangeHandler:u().func,layerPropertiesChangeHandler:u().func,onToggleGroup:u().func,onToggleLayer:u().func,onContextMenu:u().func,onBrowseData:u().func,onQueryBuilder:u().func,onDownload:u().func,onSelectNode:u().func,selectedNodes:u().array,onZoomToExtent:u().func,retrieveLayerData:u().func,onSort:u().func,onSettings:u().func,onRefreshLayer:u().func,onNewWidget:u().func,hideSettings:u().func,updateSettings:u().func,updateNode:u().func,removeNode:u().func,activateTitleTooltip:u().bool,showFullTitleOnExpand:u().bool,activateOpacityTool:u().bool,activateSortLayer:u().bool,activateFilterLayer:u().bool,activateMapTitle:u().bool,activateToolsContainer:u().bool,activateRemoveLayer:u().bool,activateRemoveGroup:u().bool,activateLegendTool:u().bool,activateZoomTool:u().bool,activateQueryTool:u().bool,activateDownloadTool:u().bool,activateSettingsTool:u().bool,activateMetedataTool:u().bool,activateWidgetTool:u().bool,activateLayerInfoTool:u().bool,maxDepth:u().number,visibilityCheckType:u().string,settingsOptions:u().object,chartStyle:u().object,currentZoomLvl:u().number,scales:u().array,layerOptions:u().object,metadataOptions:u().object,spatialOperations:u().array,spatialMethodOptions:u().array,groupOptions:u().object,currentLocale:u().string,currentLocaleLanguage:u().string,onFilter:u().func,filterText:u().string,generalInfoFormat:u().string,selectedLayers:u().array,selectedGroups:u().array,mapName:u().string,filteredGroups:u().array,noFilterResults:u().bool,onAddLayer:u().func,onAddGroup:u().func,onError:u().func,onGetMetadataRecord:u().func,hideLayerMetadata:u().func,activateAddLayerButton:u().bool,activateAddGroupButton:u().bool,activateLayerFilterTool:u().bool,catalogActive:u().bool,refreshLayerVersion:u().func,hideOpacityTooltip:u().bool,layerNodeComponent:u().func,groupNodeComponent:u().func,isLocalizedLayerStylesEnabled:u().bool,onLayerInfo:u().func,onSetSwipeActive:u().func,updatableLayersCount:u().number,onSetSwipeMode:u().func,resolutions:u().func}),Ie(Re,"contextTypes",{messages:u().object}),Ie(Re,"defaultProps",{items:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var Ne=(0,R.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,r=void 0===t||t,n=e.removeLayersPermissions,o=void 0===n||n,i=e.sortingPermissions,a=void 0===i||i,l=e.addGroupsPermissions,c=void 0===l||l,s=e.removeGroupsPermissions,u=void 0===s||s,p=e.layerInfoToolPermissions,f=void 0!==p&&p,d=e.activateAddLayerButton,m=e.activateRemoveLayer,y=e.activateSortLayer,b=e.activateAddGroupButton,g=e.activateRemoveGroup,v=e.activateLayerInfoTool,h=e.user,O=function(e,t){var r=h&&"ADMIN"===h.role||!1;return!(!e&&!r)&&t};return{activateAddLayerButton:O(r,d),activateRemoveLayer:O(o,m),activateSortLayer:O(a,y),activateAddGroupButton:O(c,b),activateRemoveGroup:O(u,g),activateLayerInfoTool:O(f,v)}})),Me=(0,R.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,R.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(function(e){var t=e.items,r=void 0===t?[]:t,n=e.activateAddLayerButton,o=void 0===n||n,i=e.activateAddGroupButton,a=void 0===i||i,l=e.activateQueryTool,c=void 0===l||l,s=e.activateSettingsTool,u=void 0===s||s,p=e.activateLayerFilterTool,f=void 0===p||p,d=e.activateWidgetTool,m=void 0===d||d,y=e.activateLayerInfoTool,b=void 0===y||y,g=e.activateDownloadTool,v=void 0===g||g;return{activateAddLayerButton:o&&!!(0,ue.find)(r,{name:"MetadataExplorer"})||!1,activateAddGroupButton:a&&!!(0,ue.find)(r,{name:"AddGroup"})||!1,activateSettingsTool:u&&!!(0,ue.find)(r,{name:"TOCItemsSettings"})||!1,activateQueryTool:c&&!!(0,ue.find)(r,{name:"FeatureEditor"})||!1,activateLayerFilterTool:f&&!!(0,ue.find)(r,{name:"FilterLayer"})||!1,activateWidgetTool:m&&!!(0,ue.find)(r,{name:"WidgetBuilder"})&&!!(0,ue.find)(r,{name:"Widgets"}),activateLayerInfoTool:b&&!!(0,ue.find)(r,{name:"LayerInfo"})||!1,activateDownloadTool:v&&!!(0,ue.find)(r,{name:"LayerDownload"})||!1}}))),Le=(0,p.connect)(De,{groupPropertiesChangeHandler:h.WO,layerPropertiesChangeHandler:h.He,retrieveLayerData:W.k,onToggleGroup:(0,ne.toggleByType)("groups",h.bh),onToggleLayer:(0,ne.toggleByType)("layers",h.bh),onContextMenu:h.pV,onBrowseData:h.Qr,onQueryBuilder:function(){return{type:B}},onDownload:h.LR,onSort:h.Dv,onSettings:h.RP,onZoomToExtent:V.Px,hideSettings:h.sF,updateSettings:h.VP,updateNode:h.tV,removeNode:h.ZF,onSelectNode:h.UG,onFilter:h.F5,onAddLayer:v.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:v.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:fe.ky,onError:q.vU,hideLayerMetadata:h.Jh,onNewWidget:function(){return(0,pe.A4)()},refreshLayerVersion:h.ct,onLayerInfo:v.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,R.compose)(Ne,Me)(Re));const _e={TOCPlugin:le()(Le,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:c().createElement(b.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:c().createElement(g.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:c().createElement("img",{src:se()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:r(46905).Z,query:r(97301).Z},epics:r(56175).Z(we.Z)};var Ze=r(55368),Be=r(83520),Ge=(r(16385),r(15135)),ze=r(55105),Ue=r(6806),We=r(50966),Ve=r(1706),qe=r(38560);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?rt(e):t}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nt(n);if(o){var r=nt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return tt(this,e)});function a(){var e;Qe(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ot(rt(e=i.call.apply(i,[this].concat(r))),"getWidth",(function(){return e.props.dynamicWidth||e.props.width})),ot(rt(e),"renderChildren",(function(t,r){var n={key:t.key?t.key:r,ref:t.ref,open:e.props.activeKey&&e.props.activeKey===t.props.eventKey},o=t.props,i=(o.glyph,o.icon,o.buttonConfig,Xe(o,["glyph","icon","buttonConfig"]));return c().createElement(t.type,Ye({},n,i))})),ot(rt(e),"renderButtons",(function(){return e.props.children.map((function(t){var r=c().createElement(qe.Z,{key:t.props.eventKey,bsSize:"large",className:t.props.buttonConfig&&t.props.buttonConfig.buttonClassName?t.props.buttonConfig.buttonClassName:"square-button",onClick:e.props.onChoose.bind(null,t.props.eventKey,e.props.activeKey===t.props.eventKey),bsStyle:e.props.activeKey===t.props.eventKey?"default":"primary"},t.props.glyph?c().createElement(g.Glyphicon,{glyph:t.props.glyph}):t.props.icon);if(t.props.buttonConfig&&t.props.buttonConfig.tooltip){var n=c().createElement(g.Tooltip,{key:"tooltip."+t.props.eventKey,id:"tooltip."+t.props.eventKey},c().createElement(b.Z,{msgId:t.props.buttonConfig.tooltip}));return c().createElement(We.Z,{placement:"bottom",key:"overlay-trigger."+t.props.eventKey,overlay:n},r)}return r}))})),ot(rt(e),"renderContent",(function(){var t=e.props.single?c().createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},c().createElement(g.Glyphicon,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}}),c().createElement("div",{className:"navButtons"},e.renderButtons())):c().createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},c().createElement("span",{className:"title"},e.props.title),c().createElement(g.Glyphicon,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}})),r=c().createElement("div",{className:"nav-content"},t,c().createElement("div",{className:"nav-body"},e.props.children.filter((function(t){return!e.props.single||e.props.activeKey===t.props.eventKey})).map(e.renderChildren)));return e.props.resizable?c().createElement(Ve.Resizable,{axis:"x",resizeHandles:["e"],width:e.getWidth(),onResize:e.resize},r):r})),ot(rt(e),"resize",(function(t,r){var n=r.size;e.props.onResize(n.width)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){if(!this.props.overlapMap&&this.props.show){var e={left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")};this.props.changeMapStyle(e,"drawerMenu")}}},{key:"componentDidUpdate",value:function(e){if(!this.props.overlapMap&&e.show!==this.props.show){var t=this.props.show?{left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")}:{};this.props.changeMapStyle(t,"drawerMenu")}}},{key:"render",value:function(){var e=this;return c().createElement(Ue.Z,{styles:{sidebar:Ke(Ke({},this.props.layout),{},{zIndex:1022,width:this.getWidth()}),overlay:{zIndex:1021},root:{right:this.props.show?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}},sidebarClassName:"nav-menu",onSetOpen:function(){e.props.onToggle()},open:this.props.show,docked:this.props.docked,sidebar:this.renderContent()},c().createElement("div",null))}}])&&Je(t.prototype,r),a}(c().Component);ot(it,"propTypes",{title:u().node,alignment:u().string,activeKey:u().string,docked:u().bool,show:u().bool,onToggle:u().func,onChoose:u().func,single:u().bool,width:u().number,dynamicWidth:u().number,overlapMap:u().bool,changeMapStyle:u().func,layout:u().object,resizable:u().bool,onResize:u().func}),ot(it,"defaultProps",{docked:!1,single:!1,width:300,overlapMap:!0,layout:{},resizable:!1,onResize:function(){}});const at=it;var lt=r(43614);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?dt(e):t}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mt(n);if(o){var r=mt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ft(this,e)});function a(){var e;st(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yt(dt(e=i.call.apply(i,[this].concat(r))),"onHeaderClick",(function(){e.props.onHeaderClick(e.props.eventKey)})),yt(dt(e),"getHeight",(function(){return e.props.open&&e.refs.sectionContent?e.refs.sectionContent.scrollHeight+10:"0"})),e}return t=a,(r=[{key:"render",value:function(){var e={maxHeight:this.getHeight(),overflow:this.props.open?"auto":"hidden",padding:this.props.open?null:"0"};return c().createElement("div",{className:"section"},c().createElement("div",{className:"sectionHeader",style:{width:"100%"},onClick:this.onHeaderClick},this.props.renderInModal?null:c().createElement(g.Glyphicon,{glyph:"triangle-right",style:this.props.open?{transform:"rotate(90deg)"}:{}}),c().createElement("span",{className:this.headerClassName+" sectionTitle",ref:"sectionTitle"},this.props.header)),this.props.renderInModal?c().createElement(lt.Z,{ref:"modal",show:this.props.open,onHide:this.onHeaderClick},c().createElement(lt.Z.Header,{closeButton:!0},c().createElement(lt.Z.Title,null,this.props.header)),c().createElement(lt.Z.Body,null,this.props.children)):c().createElement("div",{ref:"sectionContent",className:"sectionContent",style:e},this.props.children))}}])&&ut(t.prototype,r),a}(c().Component);yt(bt,"displayName","Section"),yt(bt,"propTypes",{key:u().string,eventKey:u().string,headerClassName:u().string,open:u().bool,onHeaderClick:u().func,renderInModal:u().bool,header:u().node}),yt(bt,"defaultProps",{headerClassName:"panel-heading"});const gt=bt;var vt=r(81756);function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?jt(e):t}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt=(0,Ge.Z)(qe.Z),kt=(0,D.P1)([function(e){return e.controls.drawer&&e.controls.drawer.enabled},function(e){return e.controls.drawer&&e.controls.drawer.menu||"1"},function(e){return e.controls.queryPanel&&e.controls.queryPanel.enabled&&e.controls.drawer&&e.controls.drawer.width||e.controls.drawer&&e.controls.drawer.resizedWidth||void 0},function(e){return(0,ze.ic)(e,{height:!0})}],(function(e,t,r,n){return{show:e,activeKey:t,dynamicWidth:r,layout:n}})),It=(0,p.connect)(kt,{onToggle:v.Xi.bind(null,"drawer",null),onResize:v.Xg.bind(null,"drawer","resizedWidth"),onChoose:(0,ue.partialRight)(v.Xg.bind(null,"drawer","menu"),!0),changeMapStyle:V.hd})(at),At=(0,p.connect)((function(e){return{disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:v.Xi.bind(null,"drawer",null)})((function(e){var t=e.id,r=void 0===t?"":t,n=e.menuButtonStyle,o=void 0===n?{}:n,i=e.buttonStyle,a=void 0===i?"primary":i,l=e.buttonClassName,s=void 0===l?"square-button ms-drawer-menu-button":l,u=e.toggleMenu,p=void 0===u?function(){}:u,f=e.disabled,d=void 0!==f&&f,m=e.glyph,y=void 0===m?"1-layer":m,b=e.tooltipId,v=void 0===b?"toc.drawerButton":b,h=e.tooltipPosition,O=void 0===h?"bottom":h;return c().createElement(Tt,{id:r,style:o,bsStyle:a,key:"menu-button",className:s,onClick:p,disabled:d,tooltipId:v,tooltipPosition:O},c().createElement(g.Glyphicon,{glyph:y}))})),Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ct(n);if(o){var r=Ct(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pt(this,e)});function a(){var e;wt(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xt(jt(e=i.call.apply(i,[this].concat(r))),"getTools",(function(){return e.props.items.map((function(e,t){return le()({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),xt(jt(e),"renderItems",(function(){return e.getTools().map((function(t,r){var n=t.panel||t.plugin,o=c().createElement(n,Ot({isPanel:!0},t.cfg,{items:t.items||[],groupStyle:{style:{marginBottom:"0px",cursor:"pointer"}}})),i=t.title?c().createElement("div",{className:"drawer-menu-head drawer-menu-head-"+t.name},c().createElement(vt.Z,{msgId:t.title})):null;return e.props.singleSection?c().createElement(g.Panel,{icon:t.icon,glyph:t.glyph,buttonConfig:t.buttonConfig,key:t.name,eventKey:r+1+"",header:i},o):c().createElement(gt,{key:t.name,renderInModal:t.renderInModal||!1,eventKey:r+1+"",header:i},o)}))})),e}return t=a,(r=[{key:"render",value:function(){return this.getTools().length>0?c().createElement("div",{id:this.props.id},c().createElement(At,Ot({},this.props,{id:"drawer-menu-button"})),c().createElement(It,Ot({single:this.props.singleSection},this.props.menuOptions,{title:c().createElement(vt.Z,{msgId:"menu"}),alignment:"left"}),this.renderItems())):null}}])&&Et(t.prototype,r),a}(c().Component);xt(Ft,"propTypes",{items:u().array,active:u().string,toggleMenu:u().func,id:u().string,glyph:u().string,buttonStyle:u().string,menuOptions:u().object,singleSection:u().bool,buttonClassName:u().string,menuButtonStyle:u().object,disabled:u().bool}),xt(Ft,"contextTypes",{messages:u().object,router:u().object}),xt(Ft,"defaultProps",{id:"mapstore-drawermenu",items:[],toggleMenu:function(){},glyph:"1-layer",buttonStyle:"primary",menuOptions:{},singleSection:!0,buttonClassName:"square-button ms-drawer-menu-button",disabled:!1});var Dt=(0,p.connect)((function(e){return{active:e.controls&&e.controls.drawer&&e.controls.drawer.active,disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:v.Xi.bind(null,"drawer",null)})(Ft);const Rt={DrawerMenuPlugin:le()(Dt,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",FloatingLegend:{priority:1,name:"drawer-menu",button:At}}),reducers:{}};var Nt=r(19461),Mt=r(95605),Lt=r(9860),_t=r(23634),Zt=r(9842),Bt=r(68783),Gt=r(13573),zt=r(63277),Ut=r(57668),Wt=r(21090);function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?Xt(e):t}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qt(n);if(o){var r=Qt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Yt(this,e)});function a(){var e;Ht(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Jt(Xt(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){e.props.onClick()})),Jt(Xt(e),"renderButton",(function(){return c().createElement(qe.Z,qt({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),c().createElement(g.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),Jt(Xt(e),"addTooltip",(function(t){var r=c().createElement(g.Tooltip,{id:"redo-btn-tooltip"},e.props.tooltip);return c().createElement(We.Z,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:r},t)})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&$t(t.prototype,r),a}(c().Component);Jt(er,"propTypes",{id:u().string,btnConfig:u().object,text:u().oneOfType([u().string,u().element]),help:u().oneOfType([u().string,u().element]),onClick:u().func,tooltip:u().element,tooltipPlace:u().string,style:u().object,glyph:u().string,buttonStyle:u().string,disabled:u().bool}),Jt(er,"defaultProps",{id:"redo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-forward",buttonStyle:"primary",btnConfig:{className:"square-button"}});const tr=er;function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e,t){return!t||"object"!==rr(t)&&"function"!=typeof t?cr(e):t}function cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sr(n);if(o){var r=sr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lr(this,e)});function a(){var e;or(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ur(cr(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){e.props.onClick()})),ur(cr(e),"renderButton",(function(){return c().createElement(qe.Z,nr({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),c().createElement(g.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),ur(cr(e),"addTooltip",(function(t){var r=c().createElement(g.Tooltip,{id:"undo-btn-tooltip"},e.props.tooltip);return c().createElement(We.Z,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:r},t)})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&ir(t.prototype,r),a}(c().Component);ur(pr,"propTypes",{id:u().string,btnConfig:u().object,text:u().oneOfType([u().string,u().element]),help:u().oneOfType([u().string,u().element]),onClick:u().func,tooltip:u().element,tooltipPlace:u().string,style:u().object,glyph:u().string,buttonStyle:u().string,disabled:u().bool}),ur(pr,"defaultProps",{id:"undo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-backward",buttonStyle:"primary",btnConfig:{className:"square-button"}});const fr=pr;var dr=Wt.zF.undo,mr=Wt.zF.redo,yr=(0,p.connect)((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).past.length>0)}}),{onClick:dr})(fr),br=(0,p.connect)((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).future.length>0)}}),{onClick:mr})(tr);const gr={UndoPlugin:le()(yr,{Toolbar:{name:"undo",position:5,tool:!0,tooltip:"history.undoBtnTooltip",icon:c().createElement(g.Glyphicon,{glyph:"step-backward"}),help:c().createElement(vt.Z,{msgId:"helptexts.historyundo"}),priority:1}}),RedoPlugin:le()(br,{Toolbar:{name:"redo",position:6,tool:!0,tooltip:"history.redoBtnTooltip",icon:c().createElement(g.Glyphicon,{glyph:"step-forward"}),help:c().createElement(vt.Z,{msgId:"helptexts.historyredo"}),priority:1}}),reducers:{}};var vr=r(58888),hr=r(43526),Or=r(59224),wr=r(42780),Er=r(89602),Sr=r(97266),Pr=r(37275),jr=r(20),Cr=r(23570),xr=r.n(Cr),Tr=r(89077),kr=r(62192),Ir=r(8797),Ar=r(47361),Fr=r(65539),Dr=r(80717),Rr=r(43129);function Nr(){return(Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){_r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Zr=(0,R.compose)((0,R.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var r=t.onSort,n=t.isDraggable,o=t.items,i=void 0===o?[]:o,a=t.containerId,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onSort","isDraggable","items","containerId"]),s=i.map((function(e,t){return Lr(Lr({},e),{},{onSort:r,isDraggable:n,sortId:t,key:e.id||t,containerId:a})}));return c().createElement(e,Nr({},Lr(Lr({},l),{},{isDraggable:n}),{items:s}))}})));var Br=r(58767),Gr=r(38261),zr=r(90183),Ur=r(73378),Wr=function(e,t,r){return(0,ue.isNumber)(parseFloat(e))&&!isNaN(parseFloat(e))?(0,Ir.convertUom)(parseFloat(e),t,r):e},Vr=function(e,t,r){return(0,ue.isNumber)(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat((0,Ir.convertUom)(e,r,t).toFixed(4)):e};const qr=(0,R.compose)((0,R.defaultProps)({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),(0,R.withStateHandlers)((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),(0,R.withState)("localValue","setLocalValue"),(0,R.withPropsOnChange)(["value","localValue","uom","valueUom"],(function(e){var t=e.value,r=e.localValue,n=e.uom,o=e.valueUom;return{value:t===Wr(r,n,o)?r:Vr(t,n,o)}})),(0,R.withHandlers)({onChange:function(e){var t=e.uom,r=e.projection,n=e.valueUom,o=e.onChange,i=void 0===o?function(){}:o,a=e.setLocalValue,l=void 0===a?function(){}:a;return function(e){l(e),i(Wr(e,t,n),r)}}}))((function(e){var t=e.value,r=e.units,n=void 0===r?[]:r,o=e.uom,i=e.projection,a=void 0===i?"EPSG:3857":i,l=e.style,s=void 0===l?{display:"inline-flex",width:"100%"}:l,u=e.setUom,p=void 0===u?function(){}:u,f=e.onChange,d=void 0===f?function(){}:f,m=(0,zr.getUnits)(a);return c().createElement(g.FormGroup,{style:s},c().createElement(Ur.Z,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return d(e,o)},step:1,type:"number"}),c().createElement(g.FormControl,{componentClass:"select",placeholder:"select",value:o,onChange:function(e){return p(e.target.value)},style:{width:85}},n.filter((function(e){var t=e.originUom;return m===t})).map((function(e){return c().createElement("option",{key:e.value,value:e.value},e.label)}))))}));function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){an(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yr(e){return function(e){if(Array.isArray(e))return Xr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qr(){return(Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?nn(e):t}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ln=(0,Ge.Z)(g.Glyphicon),cn=(0,Ge.Z)(g.DropdownButton),sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=on(n);if(o){var r=on(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return rn(this,e)});function a(){var e;Jr(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return an(nn(e=i.call.apply(i,[this].concat(r))),"getValidationStateRadius",(function(e){var t=parseFloat(e);return(0,ue.isNaN)(t)?"error":null})),an(nn(e),"renderLabelTexts",(function(t,r){var n=r.textLabels,o=r.featurePropValue;return"Polygon"===e.props.type?!(0,ue.isEmpty)(n)&&n[t].text:0!==t?(0,ue.isEmpty)(n)?!(0,ue.isEmpty)(o)&&o[0].formattedValue:n[t-1].text:null})),an(nn(e),"validateCoordinates",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(t&&t.length){var o=t.filter(Br.Tl);return r?o.length>e.props.componentsValidation[e.props.type].min||o.length>=e.props.componentsValidation[e.props.type].min&&!(0,Br.Tl)(t[n]):o.length>=e.props.componentsValidation[e.props.type].min}return!1})),an(nn(e),"validateCircle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.radius;if(t&&t.length){var n=(0,ue.head)(t);return!(0,ue.isNaN)(parseFloat(r))&&(0,Br.Tl)(n)}return!1})),an(nn(e),"validateText",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.valueText;if(t&&t.length){var n=(0,ue.head)(t);return!!r&&(0,Br.Tl)(n)}return!1})),an(nn(e),"isValid",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1?arguments[1]:void 0;return e[e.props.componentsValidation[e.props.type].validation](t,!1,r)})),an(nn(e),"addCoordPolygon",(function(t){if("Polygon"===e.props.type){var r,n,o,i=t.filter(Br.Tl),a=(null===(r=e.props.features[e.props.currentFeature])||void 0===r||null===(n=r.geometry)||void 0===n||null===(o=n.coordinates)||void 0===o?void 0:o[0])||[],l=void 0!==a?a.findIndex((function(e){return!(0,Br.Tl)({lon:e[0],lat:e[1]})})):-1;return t.concat([i.length&&0!==l?i[0]:{lat:"",lon:""}])}return t})),an(nn(e),"change",(function(t,r){var n=e.props.components,o=(0,ue.isNaN)(parseFloat(r.lat))?"":parseFloat(r.lat),i=(0,ue.isNaN)(parseFloat(r.lon))?"":parseFloat(r.lon);n[t]={lat:o,lon:i};var a=e.addCoordPolygon(n);e.props.onChange(a,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection),e.isValid(n)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(n[t]):((e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(null),e.props.onSetInvalidSelected("coords",n.map(Br.bh)))})),e}return t=a,(r=[{key:"renderCircle",value:function(){var e=this;return c().createElement("div",{style:{flex:1,overflowY:"auto",padding:"0 10px"}},c().createElement("div",null,c().createElement(g.FormGroup,{validationState:this.getValidationStateRadius(this.props.properties.radius)},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"annotations.editor.radius"})),c().createElement(qr,Qr({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,r){e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map(Br.bh),r):""!==t?e.props.onChangeRadius(parseFloat(t),[],r):(e.props.onChangeRadius(null,e.props.components.map(Br.bh),r),e.props.onSetInvalidSelected("radius",e.props.components.map(Br.bh)))},step:1,type:"number"})))))}},{key:"render",value:function(){var e=this,t=this.props.features[this.props.currentFeature||0],r=(0,ue.get)(t,"geometry.textLabels",[]),n=(0,ue.get)(t,"properties.values",[]),o=this.props,i=o.componentsValidation,a=o.type,l=Yr(this.props.components),s=l.filter(Br.Tl).length===l.length,u=this[i[a].validation]()&&s,p=[{value:"decimal",text:c().createElement(b.Z,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:c().createElement(b.Z,{msgId:"annotations.editor.aeronautical"})}],f=[{glyph:u?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:u?"annotations.editor.valid":i[a].notValid,visible:!0},{Element:function(){return c().createElement(cn,{noCaret:!0,title:c().createElement(ln,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},p.map((function(t){var r=t.text,n=t.value;return c().createElement(g.MenuItem,{active:e.props.format===n,key:n,onClick:function(){return e.props.onChangeFormat(n)}},r)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",disabled:"Bearing"!==a&&this.props.properties.disabled,visible:!i[a].add||!i[a].max||this.props.components.length!==i[a].max,onClick:function(){var t=Yr(e.props.components);t=t.concat([{lat:"",lon:""}]),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}];return c().createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},c().createElement("div",{className:"measure-feature-selector"},c().createElement("div",null,this.props.showFeatureSelector?c().createElement(Rr.ZP,{value:this.props.currentFeature,disabled:this.props.properties.disabled,options:[].concat(Yr(this.props.features.map((function(t,r){var n=(0,ue.get)(t,"properties.values",[]),o="bearing"===(n[0]||{}).type?"Bearing":t.geometry.type;if(o!==e.props.type)return null;var i="LineString"===o?"Length":"Bearing"===o?"Bearing":"Area",a=n.length>0?"".concat(i," ").concat(n[0].formattedValue):"",l=n.length>1&&"Polygon"===o?", Perimeter: ".concat(n[1].formattedValue):"";return{label:"".concat(o," (").concat(a).concat(l,")"),value:r}}))),[{label:(0,ie.S$)(this.context.messages,"annotations.editor.newFeature"),value:this.props.features.length}]).filter((function(e){return!!e})),onChange:function(t){return e.props.onChangeCurrentFeature(null==t?void 0:t.value)}}):null),c().createElement("div",null,c().createElement(Dr.Z,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:f}))),"Circle"===this.props.type&&this.renderCircle(),"Circle"===this.props.type&&c().createElement("div",{style:{flex:1,overflowY:"auto",paddingLeft:10,marginTop:10}},c().createElement("div",null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"annotations.editor.center"})))),c().createElement("div",{className:"coordinates-row-container"},this.props.components.map((function(t,o){return c().createElement(c().Fragment,null,e.props.showLengthAndBearingLabel&&c().createElement("div",{className:"label-texts"},c().createElement("span",null,e.renderLabelTexts(o,{textLabels:r,featurePropValue:n}))),c().createElement(Gr.Z,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:o,key:o+" key",disabled:e.props.properties.disabled&&(0,Br.Tl)(t),renderer:e.props.renderer,isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[i[a].validation]()&&!e.props.properties.disabled,showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:i[a].remove,removeEnabled:e[i[a].validation](e.props.components,i[a].remove,o),onSubmit:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,r){var n=e.props.components.reduce((function(n,o,i){return t===i?[].concat(Yr(n),t>r?[Kr({},o),(0,ue.head)(e.props.components.filter((function(e,t){return t===r})))]:[(0,ue.head)(e.props.components.filter((function(e,t){return t===r}))),Kr({},o)]):r===i?Yr(n):[].concat(Yr(n),[Kr({},o)])}),[]).filter((function(e){return e}));e.isValid(n)?e.props.onChange(n):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(Br.bh))},idx:o,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==o}));e.isValid(t)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type&&o!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[o]):e.props.onHighlightPoint(null),e.props.onChange(t)):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(Br.bh))}}))}))),(!this.props.components||0===this.props.components.length)&&c().createElement("div",{className:"text-center",style:{padding:15,paddingBottom:30}},c().createElement("i",null,c().createElement(b.Z,{msgId:"annotations.editor.addByClick"}))))}}])&&en(t.prototype,r),a}(c().Component);an(sn,"propTypes",{components:u().array,measureOptions:u().object,onSetInvalidSelected:u().func,onChange:u().func,onChangeRadius:u().func,onHighlightPoint:u().func,onChangeText:u().func,onChangeFormat:u().func,onChangeCurrentFeature:u().func,format:u().string,aeronauticalOptions:u().object,componentsValidation:u().object,transitionProps:u().object,properties:u().object,mapProjection:u().string,features:u().array,currentFeature:u().number,showFeatureSelector:u().bool,type:u().string,isDraggable:u().bool,isMouseEnterEnabled:u().bool,isMouseLeaveEnabled:u().bool,showLengthAndBearingLabel:u().bool,renderer:u().string}),an(sn,"contextTypes",{messages:u().object}),an(sn,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeCurrentFeature:function(){},onSetInvalidSelected:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},features:[],isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point"});const un=Zr(sn);function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e,t){return!t||"object"!==pn(t)&&"function"!=typeof t?bn(e):t}function bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(388).then(r.t.bind(r,40388,23));var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gn(n);if(o){var r=gn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return yn(this,e)});function a(){var e;fn(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vn(bn(e=i.call.apply(i,[this].concat(r))),"onGeomClick",(function(t){e.props.geomType!==t&&e.props.toggleMeasure({geomType:t})})),vn(bn(e),"onResetClick",(function(){e.props.toggleMeasure({geomType:null})})),vn(bn(e),"getToolTips",(function(){return{lineToolTip:c().createElement(g.Tooltip,{id:"tooltip-button.line"},e.props.lengthLabel),areaToolTip:c().createElement(g.Tooltip,{id:"tooltip-button.area"},e.props.areaLabel),bearingToolTip:c().createElement(g.Tooltip,{id:"tooltip-button.bearing"},e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel)}})),vn(bn(e),"renderMeasurements",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return c().createElement(g.Grid,{fluid:!0,style:{maxHeight:400}},e.props.lineMeasureEnabled&&c().createElement(g.Row,null,c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.lineMeasureValueEnabled&&c().createElement(g.Col,{xs:6},c().createElement("span",null,e.props.lengthLabel,": "),c().createElement("span",{id:"measure-len-res",className:"measure-value"},c().createElement("h3",null,c().createElement("strong",null,c().createElement(Ar.Z,{key:"len",numberParams:r,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)))),c().createElement(g.Col,{xs:6},c().createElement(jr.DropdownList,{disabled:t,value:e.props.uom.length.label,onChange:function(t){e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})))),e.props.areaMeasureEnabled&&c().createElement(g.Row,null,c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.areaMeasureValueEnabled&&c().createElement(g.Col,{xs:6},c().createElement("span",null,e.props.areaLabel,": "),c().createElement("span",{id:"measure-area-res",className:"measure-value"},c().createElement("h3",null,c().createElement("strong",null,c().createElement(Ar.Z,{key:"area",numberParams:r,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)))),c().createElement(g.Col,{xs:6},c().createElement(jr.DropdownList,{disabled:t,value:e.props.uom.area.label,onChange:function(t){e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})))),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&c().createElement(g.Row,null,c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center",minHeight:34}},c().createElement(g.Col,{xs:6},c().createElement("span",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "),c().createElement("span",{id:"measure-bearing-res",className:"measure-value"},c().createElement("h3",null,c().createElement("strong",null,e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))))))})),vn(bn(e),"renderPanel",(function(t){return e.props.showResults?e.renderMeasurements(t):null})),vn(bn(e),"renderLabel",(function(t){return e.props.showButtonsLabels?c().createElement("span",{className:"option-text"},(0,ie.S$)(e.context.messages,t)):null})),vn(bn(e),"renderText",(function(t,r){return t?c().createElement("span",null,c().createElement("span",{className:"option-icon"},c().createElement(g.Glyphicon,{glyph:t})),e.renderLabel(r)):e.renderLabel(r)})),vn(bn(e),"isTrueBearing",(function(){return e.props.measurement&&e.props.measurement.trueBearing&&e.props.measurement.trueBearing.measureTrueBearing})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.geomType||this.props.toggleMeasure({geomType:"LineString"})}},{key:"shouldComponentUpdate",value:function(e){return!(0,ue.isEqual)(e,this.props)}},{key:"render",value:function(){var e,t,r,n=this,o=(0,ue.get)(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0],i=(null==o||null===(e=o.properties)||void 0===e?void 0:e.disabled)||!1,a=0===(this.props.measurement.features||[]).length||i;this.props.useSingleFeature?(t=((0,ue.get)(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),r=((0,ue.get)(this.props.measurement,-1!==t.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}))):(t=(0,ue.get)(o,"geometry.type","").toLowerCase(),r=((0,ue.get)(o,-1!==t.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}})));var l=(this.props.measurement||{}).exportToAnnotation,s=void 0!==l&&l;return c().createElement(Fr.Z,{id:this.props.id,style:{overflow:"visible"},header:c().createElement("div",null,c().createElement(g.ButtonToolbar,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return n.onGeomClick("LineString")},disabled:!this.props.lineMeasureEnabled&&i},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return n.onGeomClick("Polygon")},disabled:!this.props.areaMeasureEnabled&&i},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:function(){return n.onGeomClick("Bearing")},disabled:!this.props.bearingMeasureEnabled&&i}]}),c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"remove",visible:!!this.props.withReset,tooltip:c().createElement(b.Z,{msgId:"measureComponent.resetTooltip"}),onClick:function(){return n.onResetClick()}}]}),c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:a,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showExportToGeoJSON,tooltip:c().createElement(b.Z,{msgId:"measureComponent.exportToGeoJSON"}),onClick:function(){(0,Tr.LR)(JSON.stringify((0,kr.tL)(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,xr()(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"1-layer",visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsLayer,disabled:a||s,tooltip:c().createElement(b.Z,{msgId:"measureComponent.addAsLayer"}),onClick:function(){return n.props.onAddAsLayer(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom)}},{glyph:s?"floppy-disk":"comment",tooltip:c().createElement(b.Z,{msgId:s?"measureComponent.saveMeasure":"measureComponent.addAsAnnotation"}),onClick:function(){n.props.onAddAnnotation(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,!s,{id:n.props.measurement.id,visibility:n.props.measurement.visibility})},disabled:a,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel(i))},this.props.showCoordinateEditor&&c().createElement(g.Grid,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?c().createElement(g.Row,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},c().createElement(un,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,showLengthAndBearingLabel:this.props.showLengthAndBearingLabel,components:this.props.useSingleFeature||-1===t.indexOf("polygon")?r:(0,ue.dropRight)(r),properties:(null==o?void 0:o.properties)||{}})):c().createElement(g.Row,null,c().createElement(g.Col,{xs:12,className:"text-center",style:{padding:15}},c().createElement("i",null,c().createElement(b.Z,{msgId:"measureComponent.selectTool"}))))))}}])&&dn(t.prototype,r),a}(c().Component);vn(hn,"propTypes",{id:u().string,name:u().string,columnProperties:u().object,propertiesChangeHandler:u().func,lengthButtonText:u().oneOfType([u().string,u().element]),areaButtonText:u().oneOfType([u().string,u().element]),resetButtonText:u().oneOfType([u().string,u().element]),lengthLabel:u().oneOfType([u().string,u().element]),areaLabel:u().oneOfType([u().string,u().element]),bearingLabel:u().oneOfType([u().string,u().element]),trueBearingLabel:u().oneOfType([u().string,u().element]),uom:u().shape({length:u().shape({unit:u().string.isRequired,label:u().string.isRequired}),area:u().shape({unit:u().string.isRequired,label:u().string.isRequired})}),toggleMeasure:u().func,measurement:u().object,lineMeasureEnabled:u().bool,lineMeasureValueEnabled:u().bool,areaMeasureEnabled:u().bool,areaMeasureValueEnabled:u().bool,bearingMeasureEnabled:u().bool,bearingMeasureValueEnabled:u().bool,showButtons:u().bool,showResults:u().bool,mapProjection:u().string,lineGlyph:u().string,areaGlyph:u().string,bearingGlyph:u().string,withReset:u().bool,showButtonsLabels:u().bool,inlineGlyph:u().bool,formatLength:u().func,formatArea:u().func,formatBearing:u().func,onChangeUom:u().func,uomLengthValues:u().array,uomAreaValues:u().array,format:u().string,onChangeFormat:u().func,onChangeCoordinates:u().func,onChangeCurrentFeature:u().func,onAddAsLayer:u().func,onHighlightPoint:u().func,geomType:u().string,defaultOptions:u().object,onAddAnnotation:u().func,showAddAsAnnotation:u().bool,showLengthAndBearingLabel:u().bool,showAddAsLayer:u().bool,showFeatureSelector:u().bool,useSingleFeature:u().bool,showExportToGeoJSON:u().bool,disableBearing:u().bool,trueBearing:u().object,onMount:u().func,onUpdateOptions:u().func,showCoordinateEditor:u().bool,isCoordinateEditorEnabled:u().bool}),vn(hn,"contextTypes",{messages:u().object}),vn(hn,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft"},{value:"sqm",label:"m"},{value:"sqkm",label:"km"},{value:"sqmi",label:"mi"},{value:"sqnm",label:"nm"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,showLengthAndBearingLabel:!1,withReset:!0,lineGlyph:"1-measure-length",areaGlyph:"1-measure-area",bearingGlyph:"1-measure-bearing",showButtonsLabels:!0,lengthLabel:c().createElement(b.Z,{msgId:"measureComponent.lengthLabel"}),areaLabel:c().createElement(b.Z,{msgId:"measureComponent.areaLabel"}),bearingLabel:c().createElement(b.Z,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:c().createElement(b.Z,{msgId:"measureComponent.trueBearingLabel"}),formatLength:function(e,t){return(0,Ir.convertUom)(t,"m",e)},formatArea:function(e,t){return(0,Ir.convertUom)(t,"sqm",e)},formatBearing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Ir.getFormattedBearingValue)((0,ue.round)(e||0,6),t)},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){},onAddAsLayer:function(){}});const On=hn;var wn=r(32107),En=r(7472);function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function jn(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?In(e):t}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=An(n);if(o){var r=An(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return kn(this,e)});function a(){var e;Cn(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Fn(In(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose(!1)})),Fn(In(e),"initDefaultOptions",(function(t){var r=t.showCoordinateEditor,n=jn(t,["showCoordinateEditor"]);e.props.onMount(r||e.props.showCoordinateEditor),e.props.toggleMeasure({geomType:n.geomType||"LineString"}),e.props.onInit(n)})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.initDefaultOptions(this.props.defaultOptions)}},{key:"componentDidUpdate",value:function(e){(0,ue.isEqual)(e.defaultOptions,this.props.defaultOptions)||this.initDefaultOptions(this.props.defaultOptions)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?c().createElement(wn.Z,{dock:!0,bsStyle:"primary",position:"right",title:c().createElement(b.Z,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:660,open:this.props.show,onClose:this.onClose,style:this.props.style},c().createElement(On,Pn({id:"measure-panel"},this.props))):c().createElement(En.Z,{id:"measure-dialog"},c().createElement("div",{key:"header",role:"header"},c().createElement(g.Glyphicon,{glyph:"1-ruler"}),"",c().createElement(b.Z,{key:"title",msgId:"measureComponent.Measure"}),c().createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?c().createElement(g.Glyphicon,{glyph:this.props.closeGlyph}):c().createElement("span",null,""))),c().createElement("div",{key:"body",role:"body"},c().createElement(On,Pn({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}])&&xn(t.prototype,r),a}(c().Component);Fn(Dn,"propTypes",{show:u().bool,closeGlyph:u().string,onClose:u().func,onMount:u().func,onInit:u().func,showCoordinateEditor:u().bool,defaultOptions:u().object,style:u().object}),Fn(Dn,"contextTypes",{messages:u().object}),Fn(Dn,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},onInit:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",style:{height:"calc(100% - 30px)"}});var Rn=Dn;function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){Ln(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _n=v.Xi.bind(null,"measure",null),Zn=(0,p.connect)((0,D.P1)([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!(0,me.m6)(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!(0,me.m6)(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,showLengthAndBearingLabel:e.measurement&&e.measurement.showLengthAndBearingLabel,bearingMeasureValueEnabled:!(0,me.m6)(e),isCoordinateEditorEnabled:(0,Sr.iL)(e),showCoordinateEditor:(0,J.Iz)(e),showFeatureSelector:(0,me.m6)(e),useSingleFeature:!(0,me.m6)(e),withReset:(0,me.m6)(e),showExportToGeoJSON:(0,me.m6)(e),showAddAsAnnotation:(0,Sr.cD)(e)&&(0,me.m6)(e),trueBearing:(0,Sr.jM)(e),showAddAsLayer:(0,me.m6)(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format}},function(e){return(0,J.QF)(e)}],(function(e,t){return Mn(Mn({},e),{},{show:t,format:e.format||Pr.ZP.getConfigProp("defaultCoordinateFormat")||"decimal"})})),{toggleMeasure:Er.Bd,onAddAnnotation:Er.ud,onChangeUom:Er.Gd,onHighlightPoint:wr.aS,onChangeFormat:Er.RM,onInit:Er.S1,onChangeCoordinates:Er.dD,onChangeCurrentFeature:Er.h2,onClose:_n,onMount:function(e){return(0,v.Xg)("measure","showCoordinateEditor",e)},onAddAsLayer:Er.NR},null,{pure:!1})(Rn);const Bn={MeasurePlugin:le()(Zn,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:c().createElement(vt.Z,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:c().createElement(vt.Z,{msgId:"measureComponent.Measure"}),icon:c().createElement(g.Glyphicon,{glyph:"1-ruler"}),action:function(){return(0,v.Xg)("measure","enabled",!0)}}}),reducers:{measurement:r(78113).Z},epics:r(74226).ZP},Gn=(0,O.rx)("FilterLayer",{component:function(){return null},containers:{TOC:{name:"FilterLayer"}}});var zn=r(96909),Un=r(87427);function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vn(e){return function(e){if(Array.isArray(e))return qn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hn=(0,Ge.Z)(g.NavItem),$n=function(e){var t=e.className,r=void 0===t?"":t,n=e.activeTab,o=void 0===n?"general":n,i=e.currentLocale,a=void 0===i?"en-US":i,l=e.currentLocaleLanguage,s=void 0===l?"en":l,u=e.width,p=void 0===u?500:u,f=e.groups,d=void 0===f?[]:f,v=e.element,h=void 0===v?{}:v,O=e.settings,w=void 0===O?{}:O,E=e.onSave,S=void 0===E?function(){}:E,P=e.onClose,j=void 0===P?function(){}:P,C=e.onHideSettings,x=void 0===C?function(){}:C,T=e.onSetTab,k=void 0===T?function(){}:T,I=e.onUpdateParams,A=void 0===I?function(){}:I,F=e.onRetrieveLayerData,D=void 0===F?function(){}:F,R=e.onShowAlertModal,N=void 0===R?function(){}:R,M=e.realtimeUpdate,L=void 0===M||M,_=e.alertModal,Z=void 0!==_&&_,B=e.dockStyle,G=void 0===B?{}:B,z=e.dock,U=void 0===z||z,W=e.showFullscreen,V=e.draggable,q=e.position,H=void 0===q?"left":q,$=e.tabs,K=void 0===$?[]:$,Y=e.tabsConfig,X=void 0===Y?{}:Y,Q=e.isLocalizedLayerStylesEnabled,J=void 0!==Q&&Q,ee=(0,ue.head)(K.filter((function(e){return e.id===o&&e.toolbarComponent})).map((function(e){return e.toolbarComponent}))),te=K&&K.map((function(e){return e&&e.onClose})).filter((function(e){return e}))||[],re=[{glyph:"floppy-disk",tooltipId:"save",visible:!!S,onClick:function(){return S(te)}}].concat(Vn((0,ue.head)(K.filter((function(e){return e.id===o&&e.toolbar})).map((function(e){return e.toolbar})))||[]));return c().createElement("div",null,c().createElement(wn.Z,{open:w.expanded,glyph:"wrench",title:h.title&&(0,ue.isObject)(h.title)&&(h.title[a]||h.title.default)||(0,ue.isString)(h.title)&&h.title||"",className:r,onClose:function(){j?j(!1,te):(te.forEach((function(e){e()})),x())},size:p,style:G,showFullscreen:W,dock:U,draggable:V,position:H,header:[c().createElement(g.Row,{key:"ms-toc-settings-toolbar",className:"text-center"},c().createElement(g.Col,{xs:12},ee?c().createElement(ee,{buttons:re}):c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:re})))].concat(Vn(K.length>1?[c().createElement(g.Row,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},c().createElement(g.Col,{xs:12},c().createElement(g.Nav,{bsStyle:"tabs",activeKey:o,justified:!0},K.map((function(e){return c().createElement(Hn,{key:"ms-tab-settings-"+e.id,tooltip:c().createElement(b.Z,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){k(e.id),e.onClick&&e.onClick()}},c().createElement(g.Glyphicon,{glyph:e.glyph}))})))))]:[]))},K.filter((function(e){return e.id&&e.id===o})).filter((function(e){return e.Component})).map((function(t){return c().createElement(t.Component,Wn({},e,X[t.id],{key:"ms-tab-settings-body-"+t.id,containerWidth:p,element:h,groups:d,nodeType:w.nodeType,settings:w,retrieveLayerData:D,onChange:function(e,t){return(0,ue.isObject)(e)?A(e,L):A(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t),L)},isLocalizedLayerStylesEnabled:J,currentLocaleLanguage:s}))}))),c().createElement(m.Z,null,c().createElement(y.Z,{fade:!0,show:Z,title:c().createElement(b.Z,{msgId:"layerProperties.changedSettings"}),size:"xs",onClose:function(){return N(!1)},buttons:[{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"close"}),onClick:function(){return j(!0,te)}},{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"save"}),onClick:function(){return S(te)}}]},c().createElement("div",{className:"ms-alert"},c().createElement("div",{className:"ms-alert-center"},c().createElement(b.Z,{msgId:"layerProperties.changedSettingsAlert"}))))))};$n.contextTypes={plugins:u().object,pluginsConfig:u().array,loadedPlugins:u().object};const Kn=$n;var Yn=r(39980),Xn=r(529),Qn=r(40562),Jn=r(21222),eo=r(7412),to=r(63209),ro=r(10907),no=r(85552),oo=r.n(no),io=r(80798);function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uo(e,t){return!t||"object"!==ao(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fo,mo,yo,bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=po(n);if(o){var r=po(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return uo(this,e)});function a(){return lo(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(this.props.active){var e=this.props.payload;return c().createElement("div",{className:"custom-tooltip"},c().createElement("p",{className:"label"},Math.abs(e[0].value)))}return null}}])&&co(t.prototype,r),a}(c().Component);fo=bo,mo="propTypes",yo={type:u().string,payload:u().array,label:u().string,active:u().bool},mo in fo?Object.defineProperty(fo,mo,{value:yo,enumerable:!0,configurable:!0,writable:!0}):fo[mo]=yo;const go=bo;function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eo(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?So(e):t}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Po(n);if(o){var r=Po(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Eo(this,e)});function a(){var e;ho(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jo(So(e=i.call.apply(i,[this].concat(r))),"renderLineChart",(function(){return c().createElement(io.wW,{margin:e.props.chartStyle.margin,width:e.props.chartStyle.width,height:e.props.chartStyle.height,data:e.formatData(e.props.elevations.values)},c().createElement(io.Kc,{hide:!0,dataKey:"name"}),c().createElement(io.B2,{hide:!0}),c().createElement(io.u,{content:c().createElement(go,null)}),c().createElement(io.q3,{strokeDasharray:"3 3",horizontal:!1}),c().createElement(io.x1,{isAnimationActive:e.props.animated,type:"monotone",dataKey:"value",stroke:"#82ca9d",activeDot:{r:8}}))})),jo(So(e),"formatData",(function(t){var r=[];return t.map((function(e){r.push({name:this.props.elevations.name,value:parseFloat(this.props.elevations.positive?e:-e)})}),So(e)),r})),e}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",null,this.renderLineChart())}}])&&Oo(t.prototype,r),a}(c().Component);function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){Mo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Do(e,t){return!t||"object"!==xo(t)&&"function"!=typeof t?Ro(e):t}function Ro(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function No(e){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}jo(Co,"propTypes",{elevations:u().object,chartStyle:u().object,animated:u().bool}),jo(Co,"defaultProps",{elevations:{},chartStyle:{margin:{top:5,right:5,left:5,bottom:45},width:600,height:200},animated:!1}),r(72717),r(57845);var Lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=No(n);if(o){var r=No(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Do(this,e)});function a(){var e;Io(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Mo(Ro(e=i.call.apply(i,[this].concat(r))),"renderElevationsChart",(function(t){return e.props.showElevationChart?c().createElement(Co,{elevations:t,chartStyle:ko({height:200,width:e.props.containerWidth-30},e.props.chartStyle)}):null})),Mo(Ro(e),"renderElevationsSlider",(function(t){var r=t.values,n=r.length-1,o=n-0,i=parseFloat(r[0]),a=parseFloat(r[r.length-1]),l=e.props.element&&e.props.element.params&&e.props.element.params[t.name]||r[0];return c().createElement("div",{id:"mapstore-elevation"},c().createElement(oo(),{snap:!0,start:[parseFloat(l)]||0,range:e.calculateRange(r,0,n,o,i,a),behaviour:"tap",pips:{mode:"range",stepped:!0,density:10,format:{to:function(e){return parseFloat(e).toFixed(1)}}},tooltips:!e.props.showElevationChart,onChange:function(r){e.props.onChange("params",Object.assign({},Mo({},t.name,r[0])))}}))})),Mo(Ro(e),"calculateRange",(function(e,t,r,n,o,i){var a=[],l="",c={min:o,max:i};return e.forEach((function(e,r){a[r]=(r-t)/n*100,l=a[r]+"%",c[l]=parseFloat(e)})),c})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.element.id!==e.element.id}},{key:"render",value:function(){var e=this.props.getDimension(this.props.element.dimensions,"elevation");return c().createElement(g.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},c().createElement("label",{id:"mapstore-elevation-label",key:"elevation-label",className:"control-label",style:this.props.showElevationChart?{marginBottom:"10px"}:{marginBottom:"90px"}},this.props.elevationText,": (",e.units,")"),this.renderElevationsChart(e),c().createElement("div",null,c().createElement("div",{key:"elevation"},this.renderElevationsSlider(e))))}}])&&Ao(t.prototype,r),a}(c().Component);Mo(Lo,"propTypes",{elevationText:u().node,element:u().object,getDimension:u().func,onChange:u().func,chartStyle:u().object,showElevationChart:u().bool,containerWidth:u().number}),Mo(Lo,"defaultProps",{onChange:function(){},showElevationChart:!0,containerWidth:500,elevationText:c().createElement(b.Z,{msgId:"elevation"}),getDimension:ne.getDimension});var _o=r(71167),Zo=r.n(_o);function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(r),!0).forEach((function(t){Qo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wo(e,t,r){return(Wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Vo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qo(e,t)}function qo(e,t){return(qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Yo(e);if(t){var o=Yo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $o(this,r)}}function $o(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?Ko(e):t}function Ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yo(e){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(89531);var Jo='<span class="glyphicon glyphicon-align-left" style="display: inline-block; margin-top: 4px;"></span>',ei='<span class="glyphicon glyphicon-align-center" style="display: inline-block; margin-top: 4px;"></span>',ti='<span class="glyphicon glyphicon-align-right" style="display: inline-block; margin-top: 4px;"></span>',ri='<span class="glyphicon glyphicon-remove" style="display: inline-block; margin-top: 4px;"></span>';function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(r),!0).forEach((function(t){fi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ai(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?ui(e):t}function ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var di=Zo().Quill,mi=function(e){var t=e.import("blots/embed"),r=e.import("formats/link"),n=e.imports.parchment,o=new n.Attributor.Style("float","float"),i=new n.Attributor.Style("margin","margin"),a=new n.Attributor.Style("display","display"),l=new n.Attributor.Style("width","width"),c={iframeIcon:!0,modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},s=function e(t){Xo(this,e),Qo(this,"onCreate",(function(){})),Qo(this,"onDestroy",(function(){})),Qo(this,"onUpdate",(function(){})),this.overlay=t.overlay,this.domNode=t.domNode,this.options=t.options,this.requestUpdate=t.onUpdate},u=function(e){Vo(r,e);var t=Ho(r);function r(){var e;Xo(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Qo(Ko(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)})),Qo(Ko(e),"onDestroy",(function(){})),Qo(Ko(e),"onUpdate",(function(){if(e.display&&e.domNode){var t=e.getCurrentSize();if(e.display.innerHTML=t.join(" &times; "),t[0]>120&&t[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"===e.domNode.style.float){var r=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(r.height+4,"px"),left:"-".concat(r.width+4,"px")})}else{var n=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(n.width+4,"px"),bottom:"-".concat(n.height+4,"px"),left:"auto"})}}})),Qo(Ko(e),"getCurrentSize",(function(){return"IMG"===e.domNode.tagName.toUpperCase()?[e.domNode.width,Math.round(e.domNode.width/e.domNode.naturalWidth*e.domNode.naturalHeight)]:[e.domNode.clientWidth,e.domNode.clientHeight]})),e}return r}(s),p=function(e){Vo(r,e);var t=Ho(r);function r(){var e;Xo(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Qo(Ko(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()})),Qo(Ko(e),"onDestroy",(function(){e.setCursor("")})),Qo(Ko(e),"positionBoxes",(function(){var t="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),r="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:t,top:r},{right:t,top:r},{right:t,bottom:r},{left:t,bottom:r}].forEach((function(t,r){Object.assign(e.boxes[r].style,t)}))})),Qo(Ko(e),"addBox",(function(t){var r=document.createElement("div");Object.assign(r.style,e.options.handleStyles),r.style.cursor=t,r.style.width="".concat(e.options.handleStyles.width,"px"),r.style.height="".concat(e.options.handleStyles.height,"px"),r.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(r),e.boxes.push(r)})),Qo(Ko(e),"handleMousedown",(function(t){e.dragBox=t.target,e.dragStartX=t.clientX,e.dragStartY=t.clientY,e.preDragWidth=e.domNode.width||e.domNode.naturalWidth||e.domNode.clientWidth,e.preDragHeight=e.domNode.height||e.domNode.naturalHeight||e.domNode.clientHeight,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)})),Qo(Ko(e),"handleMouseup",(function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)})),Qo(Ko(e),"handleDrag",(function(t){if(e.domNode){var r=t.clientX-e.dragStartX,n=t.clientY-e.dragStartY;if(e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]){if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth-r);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var o=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;o&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth-r)+"px",o.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}}else if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth+r);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var i=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;i&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth+r)+"px",i.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}if("ms-quill-iframe"===e.domNode.getAttribute("class")){var a=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;a&&(e.domNode.parentNode.parentNode.style.height=Math.round(e.preDragHeight+n)+"px",a.setAttribute("height",e.domNode.parentNode.parentNode.clientHeight),e.domNode.style.height=e.domNode.parentNode.parentNode.clientHeight+"px")}e.requestUpdate()}})),Qo(Ko(e),"setCursor",(function(t){[document.body,"IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode].forEach((function(e){e.style.cursor=t}))})),e}return r}(s),f=function(e){Vo(r,e);var t=Ho(r);function r(){var e;Xo(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return Qo(Ko(e=t.call.apply(t,[this].concat(c))),"onCreate",(function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()})),Qo(Ko(e),"onDestroy",(function(){})),Qo(Ko(e),"onUpdate",(function(){})),Qo(Ko(e),"_defineAlignments",(function(){var t="IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode;e.alignments=[{icon:Jo,apply:function(){a.add(t,"inline"),o.add(t,"left"),i.add(t,"0 1em 1em 0")},isApplied:function(){return"left"===o.value(t)}},{icon:ei,apply:function(){a.add(t,"block"),o.remove(t),i.add(t,"auto")},isApplied:function(){return"auto"===i.value(t)}},{icon:ti,apply:function(){a.add(t,"inline"),o.add(t,"right"),i.add(t,"0 0 1em 1em")},isApplied:function(){return"right"===o.value(t)}},{icon:ri,apply:function(){if(a.add(t,"block"),o.add(t,"none"),i.add(t,"0"),l.add(t,"100%"),"ql-video"===t.getAttribute("class")){var e=t.querySelector("IFRAME")||null,r=t.querySelector(".ms-quill-iframe")||null;e&&r&&(t.style.width="100%",e.setAttribute("width","100%"),r.style.width="100%",t.style.height="200px",e.setAttribute("height",200),r.style.height="200px")}},isApplied:function(){return!1}}]})),Qo(Ko(e),"_addToolbarButtons",(function(){var t=[];e.alignments.forEach((function(r,n){var l=document.createElement("span");t.push(l),l.innerHTML=r.icon,l.addEventListener("click",(function(){t.forEach((function(e){e.style.filter=""})),r.isApplied()?(o.remove(e.domNode),i.remove(e.domNode),a.remove(e.domNode)):(e._selectButton(l),r.apply()),e.requestUpdate()})),Object.assign(l.style,e.options.toolbarButtonStyles),n>0&&(l.style.borderLeftWidth="0"),Object.assign(l.style,e.options.toolbarButtonSvgStyles),r.isApplied()&&e._selectButton(l),e.toolbar.appendChild(l)}))})),Qo(Ko(e),"_selectButton",(function(e){e.style.filter="invert(20%)"})),e}return r}(s),d={DisplaySize:u,Toolbar:f,Resize:p},m=["height","width"],y=function(e){Vo(a,e);var t,n,o,i=Ho(a);function a(){return Xo(this,a),i.apply(this,arguments)}return t=a,o=[{key:"create",value:function(e){var t="",r="100%",n=200;(0,ue.isObject)(e)?(t=e.src||t,r=e.width||r,n=e.height||n):t=e||t;var o=Wo(Yo(a),"create",this).call(this,e);o.style.position="relative",e.domNodeStyle&&Object.assign(o.style,e.domNodeStyle),o.style.width=(0,ue.isString)(r)&&-1!==r.indexOf("%")?r:r+"px",o.style.height=(0,ue.isString)(n)&&-1!==n.indexOf("%")?n:n+"px";var i=document.createElement("IFRAME");i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(t)),i.setAttribute("width",r),i.setAttribute("height",n);var l=document.createElement("DIV");return l.setAttribute("class","ms-quill-iframe"),l.style.overflow="hidden",l.style.position="absolute",l.style.left="0",l.style.top="0",l.style.width=(0,ue.isString)(r)&&-1!==r.indexOf("%")?r:r+"px",l.style.height=(0,ue.isString)(n)&&-1!==n.indexOf("%")?n:n+"px",l.style.border="1px solid #ddd",o.appendChild(i),o.appendChild(l),o}},{key:"formats",value:function(e){return m.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"sanitize",value:function(e){return r.sanitize(e)}},{key:"value",value:function(e){var t=e.children&&e.children[0]&&e.children[0].children&&e.children[0].children[0];return t?{src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),domNodeStyle:zo({},e.style)}:""}}],(n=[{key:"format",value:function(e,t){m.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):Wo(Yo(a.prototype),"format",this).call(this,e,t)}}])&&Uo(t.prototype,n),o&&Uo(t,o),a}(t);return y.blotName="video",y.className="ql-video",y.tagName="DIV",{ResizeModule:function t(r){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xo(this,t),Qo(this,"initializeModules",(function(){n.removeModules(),n.modules=n.moduleClasses.map((function(e){return new(d[e]||e)(n)})),n.modules.forEach((function(e){e.onCreate()})),n.onUpdate()})),Qo(this,"onUpdate",(function(){n.repositionElements(),n.modules.forEach((function(e){e.onUpdate()}))})),Qo(this,"removeModules",(function(){n.modules.forEach((function(e){e.onDestroy()})),n.modules=[]})),Qo(this,"handleClick",(function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()||e.target&&e.target.tagName&&"DIV"===e.target.tagName.toUpperCase()&&"ms-quill-iframe"===e.target.getAttribute("class")){if(n.domNode===e.target)return;n.domNode&&n.hide(),n.show(e.target)}else n.domNode&&n.hide()})),Qo(this,"show",(function(e){n.domNode=e,n.showOverlay(),n.initializeModules()})),Qo(this,"showOverlay",(function(){n.overlay&&n.hideOverlay(),n.quill.setSelection(null),n.setUserSelect("none"),document.addEventListener("keyup",n.checkImage,!0),n.quill.root.addEventListener("input",n.checkImage,!0);var e=n.quill.root.parentNode.querySelector(".ql-editor");if(e&&(e.style.overflow="hidden"),n.overlay=document.createElement("div"),Object.assign(n.overlay.style,n.options.overlayStyles),n.domNode&&"ms-quill-iframe"===n.domNode.getAttribute("class")){n.input=document.createElement("input"),n.input.style.position="absolute",n.input.style.left="8px",n.input.style.top="16px",n.input.style.width="calc(100% - 16px)";var t=n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].getAttribute("src")||"";n.input.setAttribute("value",t),n.overlay.appendChild(n.input),n.overlay.style.backgroundColor="rgba(0, 0, 0, 0.2)"}n.quill.root.parentNode.appendChild(n.overlay),n.repositionElements()})),Qo(this,"hideOverlay",(function(){if(n.overlay){n.input&&(n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].setAttribute("src",n.input.value),n.overlay.removeChild(n.input),n.input=void 0);var e=n.quill.root.parentNode.querySelector(".ql-editor");e&&(e.style.overflow="auto"),n.quill.root.parentNode.removeChild(n.overlay),n.overlay=void 0,document.removeEventListener("keyup",n.checkImage),n.quill.root.removeEventListener("input",n.checkImage),n.setUserSelect("")}})),Qo(this,"repositionElements",(function(){if(n.overlay&&n.domNode){var e=n.quill.root.parentNode,t="IMG"===n.domNode.tagName.toUpperCase()?n.domNode.getBoundingClientRect():n.domNode.parentNode.parentNode.getBoundingClientRect(),r=e.getBoundingClientRect();Object.assign(n.overlay.style,{left:"".concat(t.left-r.left-1+e.scrollLeft,"px"),top:"".concat(t.top-r.top+e.scrollTop,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}})),Qo(this,"hide",(function(){n.hideOverlay(),n.removeModules(),n.domNode=void 0})),Qo(this,"setUserSelect",(function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(t){n.quill.root.style[t]=e,document.documentElement.style[t]=e}))})),Qo(this,"checkImage",(function(t){n.domNode&&n.input!==t.target&&(46!==t.keyCode&&8!==t.keyCode||"IMG"!==n.domNode.tagName.toUpperCase()||e.find(n.domNode).deleteAt(0),n.hide())})),this.quill=r;var i=!1;if(o.modules&&(i=o.modules.slice()),this.options=(0,ue.defaultsDeep)({},o,c),!1!==i&&(this.options.modules=i),this.quill.theme&&this.quill.theme.modules&&this.quill.theme.modules.toolbar&&this.quill.theme.modules.toolbar.container&&this.options.iframeIcon){var a=this.quill.theme.modules.toolbar.container.querySelector(".ql-video");a&&(a.innerHTML='<svg viewbox="0 1022 18 18"><g transform="translate(0,0) scale(3.5)"><path d="m 0.20913578,292.52935 -0.0448461,0.0228 c -0.0522035,0.0266 -0.10514577,0.0764 -0.12730166,0.11985 -0.03898753,0.0764 -0.03689917898,-0.0334 -0.036985428654,1.94049 -5.91591201e-5,1.35972 0.00218847865,1.849 0.00864824865,1.87539 0.02503373,0.10227 0.09520806,0.17792 0.19668092,0.21203 0.0202072,0.007 0.54764317,0.009 2.18732434,0.008 l 2.1606966,-0.001 0.044846,-0.0228 c 0.079823,-0.0406 0.1345603,-0.10935 0.1556385,-0.19546 0.00646,-0.0264 0.00872,-0.51567 0.00866,-1.87539 -7.44e-5,-1.97386 0.002,-1.86407 -0.036985,-1.94049 -0.022155,-0.0434 -0.075113,-0.0933 -0.1273161,-0.11985 l -0.044846,-0.0228 H 2.381244 Z m 0.0798849,0.757 H 2.381244 4.4734673 v 1.57107 1.57107 H 2.381244 0.28902068 v -1.57107 z m 2.34957572,0.33607 c -0.028878,0 -0.055626,0.007 -0.080256,0.0204 -0.024631,0.0136 -0.045009,0.0323 -0.061147,0.056 -0.016138,0.0238 -0.025064,0.0501 -0.026762,0.079 -0.032275,0.14948 -0.1758133,0.82556 -0.4306147,2.02822 -0.00679,0.017 -0.010194,0.0348 -0.010194,0.0535 0,0.0306 0.00764,0.0586 0.022928,0.0841 0.015288,0.0255 0.035682,0.0459 0.061162,0.0612 0.025481,0.0153 0.053499,0.0229 0.084076,0.0229 0.022083,0 0.043319,-0.004 0.063703,-0.0127 0.020385,-0.008 0.038221,-0.0204 0.053509,-0.0357 0.015288,-0.0153 0.027184,-0.0331 0.035678,-0.0535 0.00849,-0.0204 0.013592,-0.0416 0.01529,-0.0637 l 0.4255178,-2.00274 c 0.00849,-0.0221 0.013592,-0.045 0.015291,-0.0688 0,-0.0459 -0.016566,-0.0854 -0.04969,-0.11847 -0.033125,-0.0331 -0.072626,-0.0497 -0.1184901,-0.0497 z m -0.1025608,0.30066 c 0.00234,0.002 0.00489,0.003 0.00701,0.005 0.00425,0.003 0.00892,0.006 0.014013,0.008 -0.0051,-0.002 -0.010194,-0.004 -0.01529,-0.008 -0.0017,-0.002 -0.00361,-0.003 -0.00574,-0.005 z m -0.7892346,0.20894 c -0.022083,0 -0.048417,0.008 -0.078993,0.0255 l -0.050968,0.0382 c -0.3295431,0.2599 -0.5461142,0.43063 -0.64973332,0.51217 -0.0441656,0.0187 -0.0764407,0.0514 -0.0968248,0.0981 -0.0203841,0.0467 -0.0246402,0.0947 -0.0127495,0.14398 0.0118908,0.0493 0.038225,0.0858 0.0789933,0.10956 0.057755,0.0408 0.13887122,0.10235 0.24333972,0.18473 0.1044687,0.0824 0.1643489,0.13037 0.179637,0.14396 0.022083,0.017 0.053501,0.0412 0.094269,0.0726 0.040768,0.0314 0.077299,0.0603 0.1095742,0.0866 0.032275,0.0263 0.06285,0.0514 0.091728,0.0752 0.047563,0.034 0.1006454,0.0412 0.1592497,0.0217 0.058604,-0.0195 0.097249,-0.0565 0.1159341,-0.11084 0.016987,-0.0442 0.015701,-0.0896 -0.00383,-0.13632 -0.018887,-0.0452 -0.049313,-0.0772 -0.091223,-0.0962 l -0.03489,-0.0274 c -0.018685,-0.0136 -0.029739,-0.0221 -0.033137,-0.0255 -0.056056,-0.0408 -0.1375864,-0.10108 -0.2446029,-0.18091 -0.1070166,-0.0798 -0.1843053,-0.13759 -0.2318683,-0.17327 0.030576,-0.0221 0.1108352,-0.082 0.240784,-0.17963 0.1299487,-0.0977 0.2297443,-0.17284 0.29939,-0.2255 0.057755,-0.0238 0.093001,-0.0697 0.1057405,-0.1376 0.01274,-0.0679 -0.00467,-0.12314 -0.052231,-0.16561 -0.035672,-0.0357 -0.078129,-0.0527 -0.1273908,-0.051 -0.0034,-0.002 -0.0068,-0.003 -0.010194,-0.003 z m 1.2689006,0 c -0.0034,0 -0.0068,8.5e-4 -0.010194,0.003 -0.049262,-0.002 -0.091718,0.0153 -0.1273909,0.051 -0.047563,0.0425 -0.064971,0.0977 -0.052231,0.16561 0.01274,0.0679 0.047986,0.11382 0.1057406,0.1376 0.069646,0.0527 0.1694416,0.12782 0.29939,0.2255 0.1299488,0.0977 0.210208,0.15755 0.2407841,0.17963 -0.047563,0.0357 -0.1248516,0.0934 -0.2318683,0.17327 -0.1070167,0.0798 -0.1885466,0.14014 -0.2446028,0.18091 l -0.033137,0.0255 c -0.015288,0.0102 -0.024628,0.017 -0.028025,0.0204 -0.00522,0.004 -0.00795,0.007 -0.00826,0.008 -0.041191,0.019 -0.071164,0.0509 -0.089841,0.0955 -0.019535,0.0467 -0.020806,0.0922 -0.00382,0.13632 0.018685,0.0544 0.05733,0.0913 0.1159342,0.11084 0.058604,0.0195 0.1116868,0.0123 0.1592499,-0.0217 0.028877,-0.0238 0.059453,-0.0488 0.091728,-0.0752 0.032275,-0.0263 0.068806,-0.0552 0.1095742,-0.0866 0.040768,-0.0314 0.072186,-0.0556 0.094269,-0.0726 0.032275,-0.0272 0.076018,-0.0629 0.1312245,-0.10702 0.055207,-0.0442 0.10659,-0.0845 0.1541529,-0.12103 0.047563,-0.0365 0.093434,-0.0701 0.1375999,-0.10064 0.040768,-0.0238 0.067102,-0.0603 0.078993,-0.10956 0.011891,-0.0493 0.00763,-0.0973 -0.012749,-0.14398 -0.020384,-0.0467 -0.052659,-0.0794 -0.096824,-0.0981 -0.07814,-0.0612 -0.2947259,-0.23189 -0.6497489,-0.51217 -0.045864,-0.0408 -0.089179,-0.062 -0.1299468,-0.0637 z m -1.4396219,0.15034 c -0.0017,0.008 -0.00256,0.0178 -0.00256,0.028 v -0.0102 -0.0102 z m 1.6103431,0 0.00254,0.008 v 0.0102 0.0102 c 0,-0.0102 -8.416e-4,-0.0195 -0.00254,-0.028 z m -1.6128989,0.051 0.00256,0.0178 0.00254,0.0179 0.00765,0.0178 0.00764,0.0153 h -0.00254 c -0.0017,-0.003 -0.0034,-0.008 -0.0051,-0.0153 l -0.00256,-0.003 -0.0051,-0.0153 c -0.0017,-0.008 -0.00254,-0.0145 -0.00254,-0.0179 -0.0017,-0.007 -0.00256,-0.0127 -0.00256,-0.0178 z m 1.6154252,2.3e-4 c -2.25e-5,0.005 -8.494e-4,0.0109 -0.00252,0.0176 0,0.003 -8.416e-4,0.009 -0.00254,0.0179 l -0.0051,0.0153 -0.00256,0.003 c -0.0017,0.007 -0.0034,0.0119 -0.0051,0.0153 h -0.00254 l 0.00764,-0.0153 0.00765,-0.0178 0.00254,-0.0179 z m -1.50331,0.1552 c 0.00849,0.003 0.01869,0.007 0.030581,0.0102 -0.00679,-0.002 -0.011036,-0.003 -0.012735,-0.003 -0.0051,-0.002 -0.011052,-0.004 -0.017846,-0.008 z m 1.3912246,0 c -0.00679,0.003 -0.01275,0.006 -0.017846,0.008 -0.0017,0 -0.00594,8.6e-4 -0.012735,0.003 0.011891,-0.003 0.022087,-0.007 0.030581,-0.0102 z m -0.7975265,1.2256 c 0.0051,0.002 0.00934,0.004 0.012734,0.008 -0.0051,-0.003 -0.00934,-0.006 -0.012734,-0.008 z"/></g></svg>')}this.quill.theme&&this.quill.theme.tooltip&&this.quill.theme.tooltip.root&&this.quill.theme.tooltip.root.classList&&this.quill.theme.tooltip.root.classList.add&&this.options.iframeIcon&&this.quill.theme.tooltip.root.classList.add("ms-ql-iframe-tooltip"),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]},IFrame:y,toolbarConfig:{container:[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"],["video"]]},BaseModule:s,Toolbar:f,DisplaySize:u,Resize:p}}(di),yi=mi.ResizeModule,bi=mi.IFrame,gi=mi.toolbarConfig;di.register({"formats/video":bi,"modules/resizeModule":yi});var vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pi(n);if(o){var r=pi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return si(this,e)});function a(){var e;ai(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fi(ui(e=i.call.apply(i,[this].concat(r))),"state",{template:" "}),fi(ui(e),"close",(function(){e.props.onShowEditor(!e.props.showEditor),e.props.onChange("featureInfo",ii(ii({},e.props.element&&e.props.element.featureInfo||{}),{},{template:e.state.template}))})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({template:this.props.element&&this.props.element.featureInfo&&this.props.element.featureInfo.template||" "})}},{key:"render",value:function(){var e=this,t=this.props,r=t.showEditor,n=t.enableIFrameModule,o=void 0===n||n;return c().createElement(m.Z,null,c().createElement(y.Z,{fade:!0,show:r,title:c().createElement(b.Z,{msgId:"layerProperties.editCustomFormat"}),size:"lg",showFullscreen:!0,clickOutEnabled:!1,onClose:function(){return e.close()},buttons:[{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"close"}),onClick:function(){return e.close()}}]},c().createElement("div",{id:"ms-template-editor",className:"ms-editor"},c().createElement(Zo(),{bounds:"#ms-template-editor",ref:function(t){t&&(e.quill=t)},modules:o?{resizeModule:{},toolbar:gi}:{},defaultValue:this.state.template,onChange:function(t){return e.setState({template:t})}}))))}}])&&li(t.prototype,r),a}(c().Component);fi(vi,"propTypes",{showEditor:u().bool,element:u().object,onChange:u().func,onShowEditor:u().func,enableIFrameModule:u().bool}),fi(vi,"defaultProps",{showEditor:!1,element:{},enableIFrameModule:!1,onChange:function(){},onShowEditor:function(){}});const hi=vi;var Oi=r(82110),wi=r(12485),Ei=r.n(wi),Si=r(20135),Pi=r.n(Si),ji=r(71062),Ci=r.n(ji),xi=r(73014),Ti=r(82030),ki=r(25382),Ii=r(28878),Ai=r(89255);(0,R.setObservableConfig)(Ii.Z);var Fi=r(43143),Di=r(57037),Ri=r(3918),Ni=r.n(Ri),Mi=r(66287);function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bi(e,t){return(Bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(e,t){return!t||"object"!==Li(t)&&"function"!=typeof t?zi(e):t}function zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ui(e){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bi(e,t)}(l,e);var t,n,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ui(o);if(i){var r=Ui(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Gi(this,e)});function l(){var e;_i(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Wi(zi(e=a.call.apply(a,[this].concat(n))),"paint",(function(t){t.save(),t.beginPath();var r=e.props.shapeStyle,n=r.color,o=r.fill;switch(t.fillStyle=o?(0,ue.isString)(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=n?(0,ue.isString)(n)?n:"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),Wi(zi(e),"drawSymbol",(function(t,n){n.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=r(18845),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{n.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{n.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),Wi(zi(e),"paintSymbol",(function(t){(0,Mi.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,Mi.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(r){return e.drawSymbol(r,t)})):e.drawSymbol(null,t)})),Wi(zi(e),"paintText",(function(t){var r=e.props,n=r.width,o=r.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,c=i.label,s=i.font,u=void 0===s?"14px Arial":s;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(c||"New",n/2.5,o/2),void t.fillText(c||"New",n/2.5,o/2)):"end"===l?(t.strokeText(c||"New",n/1.5,o/2),void t.fillText(c||"New",n/1.5,o/2)):(t.strokeText(c||"New",n/2,o/2),void t.fillText(c||"New",n/2,o/2))})),Wi(zi(e),"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),Wi(zi(e),"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),Wi(zi(e),"paintPoint",(function(t,r){var n=e.props.shapeStyle.radius,o=n/2;switch(r){case"square":t.rect(50-o,48.5-o,n,n);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*n/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,n,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,n,.23);break;default:t.arc(50,48.5,n,0,2*Math.PI)}t.fill(),t.stroke()})),Wi(zi(e),"paintMarker",(function(e){var t=new Image;t.src=Ni();try{e.drawImage(t,42.5,24)}catch(e){return}})),Wi(zi(e),"paintStar",(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,c=r,s=Math.PI/n;e.moveTo(t,r-o);for(var u=0;u<n;u++)l=t+Math.cos(a)*o,c=r+Math.sin(a)*o,e.lineTo(l,c),a+=s,l=t+Math.cos(a)*i,c=r+Math.sin(a)*i,e.lineTo(l,c),a+=s;e.lineTo(t,r-o),e.closePath()})),Wi(zi(e),"paintCross",(function(e,t,r,n,o){var i=n*o/2,a=n/2;e.moveTo(t-i,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r+i),e.lineTo(t+i,r+i),e.lineTo(t+i,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r-i),e.lineTo(t-i,r-i),e.closePath()})),e}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return c().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&Zi(t.prototype,n),l}(c().Component);Wi(Vi,"propTypes",{originalStyle:u().object,style:u().object,shapeStyle:u().object,geomType:u().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:u().number,height:u().number}),Wi(Vi,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const qi=Vi;function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yi(e,t){return(Yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qi(e){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yi(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qi(n);if(o){var r=Qi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Xi(this,e)});function a(){return $i(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(jr.DropdownList,{data:[{value:"circle",name:(0,ie.S$)(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:(0,ie.S$)(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:(0,ie.S$)(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:(0,ie.S$)(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:(0,ie.S$)(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:(0,ie.S$)(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&Ki(t.prototype,r),a}(c().Component);Ji(ea,"propTypes",{markName:u().string,onChange:u().func}),Ji(ea,"contextTypes",{messages:u().object}),Ji(ea,"defaultProps",{markName:"circle",onChange:function(){}});const ta=ea;var ra=r(9886),na=r.n(ra);function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function la(e,t){return(la=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ca(e,t){return!t||"object"!==oa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ua(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}na()();var pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&la(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sa(n);if(o){var r=sa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ca(this,e)});function a(){return ia(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4,style:{padding:0}},c().createElement(qi,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),c().createElement(g.Col,{xs:7},this.props.showMarker?c().createElement(g.Row,null,c().createElement(g.Col,{xs:1},c().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),c().createElement(g.Col,{style:{paddingLeft:0,paddingTop:1},xs:4},c().createElement("label",null,"Marker"))):null,this.props.showMarkSelector?c().createElement(g.Row,{style:{marginBottom:4}},c().createElement(g.Col,{style:{paddingTop:7},xs:4},c().createElement("label",null,"Mark")),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(ta,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},c().createElement(Di.Z,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(jr.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){e.props.shapeStyle.width!==t&&e.props.setStyleParameter("width",t)}}))),c().createElement(g.Row,{style:{marginTop:4}},c().createElement(g.Col,{xs:4},c().createElement(Di.Z,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(jr.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:50,step:1,value:this.props.shapeStyle.radius,onChange:function(t){e.props.shapeStyle.radius!==t&&e.props.setStyleParameter("radius",t)}}))))))}}])&&aa(t.prototype,r),a}(c().Component);ua(pa,"propTypes",{shapeStyle:u().object,setStyleParameter:u().func,showMarker:u().bool,showMarkSelector:u().bool}),ua(pa,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}});const fa=pa;function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ba(e,t){return(ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e,t){return!t||"object"!==da(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function va(e){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ha(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}na()();var Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ba(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=va(n);if(o){var r=va(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ga(this,e)});function a(){return ma(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4,style:{padding:0}},c().createElement(qi,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),c().createElement(g.Col,{xs:7},c().createElement(g.Row,{style:{marginTop:7}},c().createElement(g.Col,{xs:4},c().createElement(Di.Z,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(jr.NumberPicker,{min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){t!==e.props.shapeStyle.width&&e.props.setStyleParameter("width",t)}}))),c().createElement(g.Row,{style:{marginTop:4}},c().createElement(g.Col,{xs:6},c().createElement(Di.Z,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&ya(t.prototype,r),a}(c().Component);ha(Oa,"propTypes",{shapeStyle:u().object,setStyleParameter:u().func}),ha(Oa,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const wa=Oa;function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ja(e,t){return(ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ca(e,t){return!t||"object"!==Ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}na()();var ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xa(n);if(o){var r=xa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ca(this,e)});function a(){return Sa(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4,style:{padding:0}},c().createElement(qi,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),c().createElement(g.Col,{xs:7},c().createElement(g.Row,{style:{marginTop:7}},c().createElement(g.Col,{xs:4},c().createElement(Di.Z,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(jr.NumberPicker,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&Pa(t.prototype,r),a}(c().Component);Ta(ka,"propTypes",{shapeStyle:u().object,setStyleParameter:u().func}),Ta(ka,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const Ia=ka;var Aa=r(38848);function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){Ra(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ra(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Na=(0,R.compose)((0,R.withProps)((function(e){var t=e.style,r=void 0===t?{}:t,n=e.styleName,o=r.fillColor,i=r.fillOpacity,a=r.color,l=r.opacity,c=r.shapeStyle,s=r.weight,u=r.radius;return{shapeStyle:Da(Da({},c),{},{marker:"marker"===n,radius:u,width:s,fill:(0,Fi.qq)(o,i),color:(0,Fi.qq)(a,l)})}})),(0,R.withHandlers)({setStyleParameter:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.style,o=void 0===n?{}:n;return function(e,t){switch(e){case"fill":var n=t.r,i=t.g,a=t.b,l=t.a;r("style",Da(Da({},o),{},{fillColor:"rgb(".concat(n,", ").concat(i,", ").concat(a,")"),fillOpacity:l}));break;case"color":var c=t.r,s=t.g,u=t.b,p=t.a;r("style",Da(Da({},o),{},{color:"rgb(".concat(c,", ").concat(s,", ").concat(u,")"),opacity:p}));break;case"width":r("style",Da(Da({},o),{},{weight:t}));break;case"marker":r("styleName",t?"marker":void 0);break;default:r("style",Da(Da({},o),{},Ra({},e,t)))}}}})),Ma={Polygon:Na(wa),MultiPolygon:Na(wa),GeometryCollection:Na(wa),LineString:Na(Ia),MultiLineString:Na(Ia),MultiPoint:Na(fa),Point:Na(fa)},La=(0,R.branch)((function(e){var t=e.element;return"wfs"===(void 0===t?{}:t).type}),(0,R.mapPropsStream)((function(e){return e.combineLatest(e.map((function(e){return{layer:e.element}})).let(ki.Z).map((function(e){var t=e.error,r=e.loading,n=e.describeFeatureType;return{error:t,loading:r,geometryType:!t&&!r&&n&&(0,Aa.extractGeometryType)(n)}})),(function(e,t){var r=t.geometryType,n=t.error,o=t.loading;return Da(Da({},e),{},{geometryType:r,error:n,loading:o})}))})),(0,R.withProps)((function(e){var t=e.element;return{geometryType:t&&t.features&&t.features[0].geometry&&t.features[0].geometry.type}})));const _a=(0,R.compose)(La,(0,xi.Z)(),(0,Ti.Z)((function(e){return!e.geometryType})))((function(e){var t=e.geometryType,r=e.element,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=Ma[t];return c().createElement(c().Fragment,null,c().createElement("h4",null,"",c().createElement(b.Z,{msgId:"layerProperties.style"})),c().createElement(a,{styleName:n.styleName,style:n.style,onChange:i}))}));var Za=r(60604),Ba=r(6724),Ga=r(32425),za=r(38064),Ua=r(93451),Wa=r(69235);function Va(){return(Va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qa(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Ha=function(e){var t=e.type,r=e.patterns,n=e.paths,o=e.texts,i=e.backgroundColor,a=void 0===i?"#ffffff":i;return c().createElement("svg",{viewBox:"0 0 200 200"},c().createElement("defs",null,r&&r.filter((function(e){return e.icon})).map((function(e){return c().createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&c().createElement("path",e.icon))})),r&&r.filter((function(e){return e.image})).map((function(e){return c().createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&c().createElement("image",e.image))}))),c().createElement("path",{fill:a,d:"M0 0 L200 0 L200 200 L0 200Z"}),n&&n.map((function(e){var r=e.type,n=qa(e,["type"]);return"polygon"===(r||t)&&c().createElement("path",Va({},n,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(r||t)&&c().createElement("path",Va({},n,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(r||t)&&c().createElement("path",n)})),o&&o.map((function(e){var t=e.text,r=qa(e,["text"]);return c().createElement("text",Va({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},r),t)})))};function $a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(r),!0).forEach((function(t){Ya(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ya(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xa=(0,Ua.Z)("filterPlaceholder")(Wa.Z),Qa=(0,Ge.Z)(g.Glyphicon),Ja=(0,Ti.Z)((function(e){return 0===e.items.length}),{title:c().createElement(b.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(za.Z);var el=r(15402);const tl=function(e){var t=e.disabled,r=e.selected,n=e.title,o=e.preview,i=e.previewSrc,a=e.onClick,l=void 0===a?function(){}:a;return c().createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return l()}},(o||i)&&c().createElement("div",{className:"ms-preview"},o||i&&c().createElement("img",{src:i})),c().createElement("small",null,n))};function rl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(r),!0).forEach((function(t){ol(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ol(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var il=(0,Ua.Z)("filterPlaceholder")(Wa.Z),al=(0,Ua.Z)("placeholder")(g.FormControl),ll=(0,Ti.Z)((function(e){return 0===e.items.length}),{title:c().createElement(b.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(za.Z),cl=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ul=r(93222),pl=r(99009),fl=r(1469),dl=r.n(fl),ml=r(13218),yl=r.n(ml),bl=r(78795),gl=r(8954),vl=(r(76752),r(32095),r(64020),r(43657),r(71707),r(29589),r(4631)),hl=r.n(vl),Ol=r(29656),wl=r(2576);function El(e){return(El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(r),!0).forEach((function(t){Dl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jl(e){return function(e){if(Array.isArray(e))return Cl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Cl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cl(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kl(e,t){return(kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Il(e,t){return!t||"object"!==El(t)&&"function"!=typeof t?Al(e):t}function Al(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fl(e){return(Fl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(40021).Z(hl()),r(95246).Z(hl());var Rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kl(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fl(n);if(o){var r=Fl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Il(this,e)});function a(){var e;xl(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Dl(Al(e=i.call.apply(i,[this].concat(r))),"state",{}),Dl(Al(e),"onRenderToken",(function(t){var r=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),e.inlineWidgets=[],t.doc.iter(0,r,(function(r){var n=r.lineNo();t.getLineTokens(n).forEach((function(r){e.inlineWidgets=e.props.inlineWidgets.reduce((function(o,i){var a=i.type,l=i.style,c=void 0===l?{}:l,s=i.active,u=void 0===s?function(){return!1}:s,p=i.className,f=void 0===p?"":p;if(u(r)){var d=e.getInlineWidget({className:f,token:r,onClick:function(){return e.setState({inlineWidgetType:a,token:r,lineNo:n})},style:(0,ue.isFunction)(c)&&c(r)||c});return t.addWidget({line:n,ch:r.start-1},d,!1),[].concat(jl(o),[d])}return jl(o)}),jl(e.inlineWidgets))}))}))})),Dl(Al(e),"onAutocomplete",(function(t){if(!(t&&t.state&&t.state.completionActive)){var r=t.getCursor(),n=t.getTokenAt(r);if(n.string&&((0,ue.endsWith)(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;hl().commands.autocomplete(t,null,{completeSingle:!1,container:o})}}})),Dl(Al(e),"onUpdate",(function(){e.update.cancel(),e.update()})),Dl(Al(e),"getInlineWidget",(function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,i=e.className,a=void 0===i?"":i,l=e.style,c=void 0===l?{}:l,s=document.createElement("div");return s.setAttribute("class","".concat(a," ms-style-editor-inline-widget")),le()(s.style,c),s.onclick=function(){return r(Pl({},o))},s})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!(0,ue.isEqual)(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return c().createElement(Fr.Z,{className:"ms-style-editor",style:this.props.style,header:c().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&c().createElement(Ga.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&c().createElement(wl.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:c().createElement(b.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.props.error.line?this.props.error.message:c().createElement(b.Z,{msgId:"styleeditor.genericValidationError"})}))},c().createElement(Ol.Controlled,{key:"style-editor",value:this.state.code,editorDidMount:function(t){e.onRenderToken(t),e.editor=t,t.on("inputRead",e.onAutocomplete),e.update=(0,ue.debounce)((function(){e.props.onChange(e.state.code)}),e.props.waitTime),hl().extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&c().createElement("div",{className:"ms-inline-widget-container"},c().createElement("div",null,c().createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),c().createElement("div",null,this.props.inlineWidgets.filter((function(t){return t.type===e.state.inlineWidgetType})).map((function(t){var r=t.Widget;return c().createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})})))))}}])&&Tl(t.prototype,r),a}(c().Component);Dl(Rl,"propTypes",{mode:u().string,theme:u().string,style:u().object,code:u().string,onChange:u().func,waitTime:u().number,hintProperties:u().object,error:u().object,inlineWidgets:u().array,loading:u().bool}),Dl(Rl,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[]});const Nl=Rl;var Ml=r(23279),Ll=r.n(Ml),_l=r(13311),Zl=r.n(_l),Bl=r(6557),Gl=r.n(Bl),zl=r(57557),Ul=r.n(zl),Wl=r(14293),Vl=r.n(Wl),ql=r(7654),Hl=r.n(ql),$l=r(12961),Kl=r(1036);function Yl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(r),!0).forEach((function(t){Ql(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ql(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jl=function(e){var t=e.ramp,r=e.name,n=e.label,o=1/t.length,i=(t||[]).reduce((function(e,r,n){return"".concat(e,", ").concat(r," ").concat(n/t.length*100,"%, ").concat(r," ").concat(100*(n/t.length+o),"%")}),"linear-gradient(to right");return c().createElement("div",{style:{backgroundImage:"".concat(i,")"),width:"100%",display:"inline-block",verticalAlign:"middle",padding:"0 2px"}},c().createElement("span",{style:{color:"#000000",backgroundColor:"rgba(255, 255, 255, 0.75)",padding:"0 4px"}},c().createElement(b.Z,{msgId:n||r,msgParams:{number:t.length}})))};function ec(e){var t=e.value,r=e.samples,n=e.onChange,o=e.items,i=e.rampFunction,a=e.disabled,l=o.map((function(e){var t=e.options,n=void 0===t?{}:t,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["options"]);return Xl(Xl({},o),{},{options:n,ramp:i?i(o,n):((0,Fi.qH)(n.base,n.range,r+1,n.options)||["#AAA"]).splice(1)})})),s=Zl()(l,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===t||e.name===(t&&t.name)}));return c().createElement(Rr.ZP,{valueKey:"name",className:"color-ramp-selector",clearable:!1,value:s,options:l,disabled:a,valueRenderer:Jl,optionRenderer:Jl,onChange:function(e){e&&n(e)}})}ec.propTypes={value:u().oneOfType([u().string,u().object]),samples:u().number,onChange:u().func,items:u().array,rampFunction:u().func,disabled:u().bool},ec.defaultProps={samples:5,onChange:function(){},items:[{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4,s:1,v:.5}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}},{name:"global.colors.random",schema:"qualitative",options:{base:190,range:340,options:{base:10,range:360,s:.67,v:.67}}}],disabled:!1};const tc=ec;function rc(e){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ac(e,t){return(ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lc(e,t){return!t||"object"!==rc(t)&&"function"!=typeof t?cc(e):t}function cc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sc(e){return(sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ac(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sc(n);if(o){var r=sc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lc(this,e)});function a(){var e;oc(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return uc(cc(e=i.call.apply(i,[this].concat(r))),"styleRenderer",(function(t,r,n){var o=e.props.styleRendererPattern||c().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},c().createElement("path",{stroke:"#333333",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:n||t.value,d:"M0 12.5, 300 12.5"}));return c().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}return t=a,(r=[{key:"render",value:function(){var e,t=this,r=(0,ue.join)(this.props.dashArray||"1 0"," "),n=this.props.options.find((function(e){return e.value===r}))?this.props.options:[{value:r}].concat(function(e){if(Array.isArray(e))return nc(e)}(e=this.props.options)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=this.props.creatable?Rr.ZP.Creatable:Rr.ZP;return c().createElement(o,{options:n,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:r,isValidNewOption:this.props.isValidNewOption,onChange:function(e){if(e){var r=e.value.split(" ");t.props.onChange(r)}}})}}])&&ic(t.prototype,r),a}(c().Component);uc(pc,"propTypes",{dashArray:u().array,menuPlacement:u().string,clearable:u().bool,value:u().string,optionRenderer:u().func,styleRendererPattern:u().node,valueRenderer:u().func,disabled:u().bool,onChange:u().func,options:u().array,creatable:u().bool,isValidNewOption:u().func,defaultStrokeWidth:u().number}),uc(pc,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const fc=pc;function dc(e){return(dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bc(e,t){return(bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gc(e,t){return!t||"object"!==dc(t)&&"function"!=typeof t?vc(e):t}function vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hc(e){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}na()();var wc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hc(n);if(o){var r=hc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return gc(this,e)});function a(){var e;mc(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Oc(vc(e=i.call.apply(i,[this].concat(r))),"renderClasses",(function(){return e.props.classification.map((function(t,r){return c().createElement(g.FormGroup,{key:r},c().createElement($l.Z,{key:t.color,color:t.color,disableAlpha:!0,format:"hex",onChangeColor:function(t){return e.updateColor(r,t)}}),c().createElement(jr.NumberPicker,{format:"- ###.###",value:t.min,onChange:function(t){return e.updateMin(r,t)}}),c().createElement(jr.NumberPicker,{format:"- ###.###",value:t.max,precision:3,onChange:function(t){return e.updateMax(r,t)}}))}))})),Oc(vc(e),"updateColor",(function(t,r){if(r){var n=e.props.classification.map((function(e,n){return n===t?le()({},e,{color:r}):e}));e.props.onUpdateClasses(n,"color")}})),Oc(vc(e),"updateMin",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?le()({},e,{min:r}):n===t-1?le()({},e,{max:r}):e}));e.props.onUpdateClasses(n,"interval")}})),Oc(vc(e),"updateMax",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?le()({},e,{max:r}):n===t+1?le()({},e,{min:r}):e}));e.props.onUpdateClasses(n,"interval")}})),e}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",{className:"thema-classes-editor "+this.props.className},this.renderClasses())}}])&&yc(t.prototype,r),a}(c().Component);Oc(wc,"propTypes",{classification:u().array,onUpdateClasses:u().func,className:u().string}),Oc(wc,"defaultProps",{classification:[],onUpdateClasses:function(){},className:""});const Ec=wc,Sc=function(e){var t=e.children,r=e.label,n=e.tools,o=e.divider,i=e.invalid,a=e.warning,l=e.disabled;if(o)return c().createElement("div",{className:"ms-symbolizer-field-divider"});var s=a?" ms-symbolizer-value-warning":"",u=i?" ms-symbolizer-value-invalid":"",p=l?" ms-symbolizer-value-disabled":"";return c().createElement("div",{className:"ms-symbolizer-field"},c().createElement("div",{className:"ms-symbolizer-label"},c().createElement(b.Z,{msgId:r})),c().createElement("div",{className:"ms-symbolizer-value"+u+p+s,onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},t,c().createElement("div",{className:"ms-symbolizer-tools"},n)))};var Pc=r(73935),jc=r.n(Pc),Cc=r(23560),xc=r.n(Cc);function Tc(){return(Tc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function kc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(r),!0).forEach((function(t){Ac(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ac(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rc(e){var t=e.containerNode,r=void 0===t?function(){return document.querySelector("."+((0,Pr.u8)("themePrefix")||"ms2")+" > div")||document.body}:t,n=e.placement,o=e.content,i=e.children,a=e.open,s=e.onOpen,u=void 0===s?function(){}:s,p=10,f=xc()(r)?r():r,d=(0,l.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),m=Fc((0,l.useState)(d.current),2),y=m[0],b=m[1],g=(0,l.useRef)(),v=(0,l.useRef)(),h=(0,l.useRef)(),O=(0,l.useCallback)((function(){var e,t,r,o,i,l;if(!a)return d.current;var c={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===n)return c;var s=null==g||null===(e=g.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==v||null===(r=v.current)||void 0===r||null===(o=r.getBoundingClientRect)||void 0===o?void 0:o.call(r),f=null==h||null===(i=h.current)||void 0===i||null===(l=i.getBoundingClientRect)||void 0===l?void 0:l.call(i);if(s&&u&&f){var m,y,b,O,w=f.width,E=f.height,S=u.top,P=u.left,j=u.width,C=u.height,x=s.top,T=s.left,k=s.width,I=s.height,A=[T+k/2,x+I/2],F=A[0]-P>w/2+p&&P+j-A[0]>w/2+p,D=A[1]-S>E/2+p&&S+C-A[1]>E/2+p,R={top:{filter:function(){return F&&x-S>E+p},styles:function(){return{picker:{position:"absolute",top:x-E-p-S,left:T+k/2-w/2-P},overlay:{},arrow:{top:x+2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return D&&P+j-(T+k)>w+p},styles:function(){return{picker:{position:"absolute",top:x-E/2-S,left:T+k+p-P},overlay:{},arrow:{top:x+I/2,left:T+k-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return F&&S+C-(x+I)>E+p},styles:function(){return{picker:{position:"absolute",top:x+I+p-S,left:T+k/2-w/2-P},overlay:{},arrow:{top:x+I-2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return D&&T-P>w+p},styles:function(){return{picker:{position:"absolute",top:x-E/2-S,left:T-w-p-P},overlay:{},arrow:{top:x+I/2,left:T+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=R&&null!==(m=R[n])&&void 0!==m&&null!==(y=m.filter)&&void 0!==y&&y.call(m))return null==R||null===(b=R[n])||void 0===b||null===(O=b.styles)||void 0===O?void 0:O.call(b);if("top"!==n&&R.top.filter())return R.top.styles();if("right"!==n&&R.right.filter())return R.right.styles();if("bottom"!==n&&R.bottom.filter())return R.bottom.styles();if("left"!==n&&R.left.filter())return R.left.styles()}return c}),[n,a]);(0,l.useEffect)((function(){b(O());var e=function(){return b(O())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[O]);var w=(0,l.useRef)();return w.current={open:a},(0,l.useEffect)((function(){function e(e){var t=h.current,r=t&&e.target&&t.contains(e.target);if(w.current.open&&!r){var n,o,i=e.clientX,a=e.clientY,l=(null==h||null===(n=h.current)||void 0===n||null===(o=n.getBoundingClientRect)||void 0===o?void 0:o.call(n))||{},c=l.left,s=l.top,p=l.width,f=l.height;void 0!==i&&void 0!==a&&!(i>=c&&i<=c+p&&a>=s&&a<=s+f)&&u(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),c().createElement(c().Fragment,null,c().createElement("div",{className:"ms-popover",ref:g},(0,l.cloneElement)(i,{onClick:function(e){e.stopPropagation(),u(!a)}})),f&&a?(0,Pc.createPortal)(c().createElement("div",{className:"ms-popover-overlay",ref:v,style:Ic({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==y?void 0:y.overlay)},c().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),c().createElement("div",{ref:h,style:Ic({pointerEvents:"auto"},null==y?void 0:y.picker)},o),c().createElement("div",{className:"ms-popover-arrow",style:Ic({position:"absolute",borderTop:"".concat(9,"px solid transparent"),borderBottom:"".concat(9,"px solid transparent"),borderRight:"".concat(9,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==y?void 0:y.arrow)})),f):null)}const Nc=function(e){var t=e.open,r=e.onOpen,n=void 0===r?function(){}:r,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["open","onOpen"]),i=Fc((0,l.useState)(t),2),a=i[0],s=i[1];return c().createElement(Rc,Tc({},o,{open:a,onOpen:function(e){s(e),n(e)}}))},Mc=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}];var Lc=(0,Ge.Z)(qe.Z);const _c=function(e){var t=e.value,r=e.config,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=n.options,l=void 0===a?Mc:a,s=l.find((function(e){return e.value===t}));return c().createElement(Nc,{content:c().createElement("div",{className:"ms-mark-list"},c().createElement("ul",null,l.map((function(e){return c().createElement("li",{key:e.value},c().createElement(Lc,{className:"ms-mark-preview",active:e.value===t,onClick:function(){return i(e.value)}},c().createElement(Ha,e.preview)))}))))},c().createElement(Lc,{className:"ms-mark-preview"},s&&c().createElement(Ha,s.preview)))},Zc=function(e){var t=e.label,r=void 0===t?"styleeditor.band":t,n=e.value,o=e.bands,i=e.onChange,a=e.enhancementType;return c().createElement(c().Fragment,null,c().createElement(Sc,{label:r},c().createElement(Rr.ZP,{clearable:!1,options:o,value:n,onChange:function(e){return i("band",e.value)}})),c().createElement(Sc,{label:"styleeditor.contrastEnhancement"},c().createElement(Rr.ZP,{clearable:!1,options:[{label:c().createElement(b.Z,{msgId:"styleeditor.none"}),value:"none"},{label:c().createElement(b.Z,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:c().createElement(b.Z,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:a||"none",onChange:function(e){var t="none"===e.value?void 0:e.value;i("enhancementType",t)}})))};function Bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(r),!0).forEach((function(t){zc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qc(){return(qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Hc,$c,Kc=(Hc="onChange",$c="value",function(e){function t(t){var r,n,o,i=(0,l.useRef)(),a=(n=(0,l.useState)(t.value),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(n,o)||function(e,t){if(e){if("string"==typeof e)return Uc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uc(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],u=a[1],p=(0,l.useRef)();p.current=s,(0,l.useEffect)((function(){p.current!==t.value&&u(t.value)}),[t.value]),(0,l.useEffect)((function(){return i.current=Ll()((function(e){var t=e.newProps,r=e.newValue;t.onChange(r)}),t.debounceTime),function(){i.current.cancel()}}),[t.debounceTime]);var f=Gc(Gc({},t),{},(zc(r={},$c,s),zc(r,Hc,(function(e){u(e),i.current&&(i.current.cancel(),i.current({newProps:t,newValue:e}))})),r));return c().createElement(e,f)}return t.propTypes={debounceTime:u().number},t.defaultProps={debounceTime:300},t.displayName=e.displayName+"WithDebounceOnCallback",t})((0,Ua.Z)("placeholder")((function(e){return c().createElement(g.FormControl,qc({},e,{onChange:function(t){return e.onChange(t.target.value)}}))}))),Yc=(0,Ge.Z)(g.Glyphicon);function Xc(e){var t=e.value,r=e.onChange,n=e.onLoad,o=(0,l.useRef)(!0);(0,l.useEffect)((function(){return o.current=!0,function(){o.current=!1}}),[]);var i=Wc((0,l.useState)(!1),2),a=i[0],s=i[1],u=Wc((0,l.useState)(!0),2),p=u[0],f=u[1],d=Wc((0,l.useState)(t),2),m=d[0],y=d[1],b=function(e,t){y(e),s(!0),f(!1),(0,pl.ZF)(e).then((function(t){if(o.current){var r=!1;t.isBase64&&(r={type:"warning",messageId:"imageSrcNotSupportedBase64Image"}),f(r),s(!1),n(r,e)}})).catch((function(t){if(o.current){var r=t.isBase64||"imageSrcLoadError"!==t.messageId?{type:"error",messageId:t.messageId}:{type:"warning",messageId:t.messageId};f(r),s(!1),n(r,e)}})),t&&r(e)},v=(0,l.useRef)(t);return(0,l.useEffect)((function(){b(v.current)}),[]),c().createElement("div",{className:"ms-style-editor-icon-input",style:{position:"relative",display:"flex",alignItems:"center"}},c().createElement(g.FormGroup,{style:{flex:1}},c().createElement(Kc,{style:{paddingRight:26},placeholder:"styleeditor.placeholderEnterImageUrl",value:t,debounceTime:300,onChange:function(e){return b(e,!0)}})),c().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},m&&!p&&!a&&c().createElement("div",{className:"ms-style-editor-icon-input-image",style:{position:"absolute",margin:2,width:"calc(100% - 2px)",height:"calc(100% - 2px)",backgroundImage:"url(".concat(m,")"),backgroundPosition:"center",backgroundSize:"contain"}}),p&&c().createElement(Yc,{glyph:"exclamation-sign",tooltipId:"styleeditor.".concat(p.messageId)}),a&&c().createElement(Ga.Z,{size:20})))}Xc.propTypes={value:u().bool,onChange:u().node,onLoad:u().object,onError:u().object},Xc.defaultProps={value:"",onChange:function(){},onLoad:function(){},onError:function(){}};const Qc=Xc;function Jc(){return(Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function es(e){return function(e){if(Array.isArray(e))return ns(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||rs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||rs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rs(e,t){if(e){if("string"==typeof e)return ns(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ns(e,t):void 0}}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function os(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function as(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?is(Object(r),!0).forEach((function(t){ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ls(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cs=(0,Ua.Z)("placeholder")(g.FormControl),ss=(0,Ua.Z)(["placeholder","noResultsText"])(Rr.ZP),us=(0,Ua.Z)(["placeholder","noResultsText"])(Rr.ZP.Creatable),ps={color:function(e){var t=e.label,r=e.config,n=void 0===r?{}:r,o=e.value,i=e.onChange,a=void 0===i?function(){}:i,s=e.disableAlpha,u=(0,l.useRef)({value:o});if(u.current={value:o},"pattern"==(yl()(o)&&o.kind?"pattern":"solid")){var p=((null==n?void 0:n.getGroupParams(o.kind))||{}).params,f=void 0===p?{}:p,d=(null==n?void 0:n.getGroupConfig(o.kind))||{},m=o;return c().createElement(c().Fragment,null,c().createElement(fs,{properties:m,params:d.omittedKeys?Ul()(f,d.omittedKeys):f,config:{disableAlpha:d.disableAlpha},onChange:function(e){return a(as(as({},u.current.value),e))}}),c().createElement(Sc,{divider:!0}))}return c().createElement(Sc,{label:t},c().createElement($l.Z,{color:o,line:n.stroke,disableAlpha:n.disableAlpha||s,onChangeColor:function(e){return e&&a(e)}}))},slider:function(e){var t=e.label,r=e.value,n=e.disabled,o=e.config,i=void 0===o?{}:o,a=e.onChange,l=void 0===a?function(){}:a;return c().createElement(Sc,{label:t,disabled:n},c().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},c().createElement(Kl.Z,{start:[r],disabled:n,tooltips:[!0],format:i.format,range:i.range||{min:0,max:10},onChange:function(e){return l(e)}})))},input:function(e){var t=e.label,r=e.value,n=e.config,o=void 0===n?{}:n,i=e.onChange,a=void 0===i?function(){}:i;return c().createElement(Sc,{label:t},c().createElement(g.FormGroup,null,c().createElement(cs,{type:o.type||"text",value:r,placeholder:"styleeditor.placeholderInput",onChange:function(e){return a(e.target.value)}})))},toolbar:function(e){var t=e.label,r=e.value,n=e.onChange,o=void 0===n?function(){}:n,i=e.config,a=void 0===i?{}:i,l=e.disabled;return c().createElement(Sc,{label:t,disabled:l},c().createElement(Dr.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(a.options||[]).map((function(e){var t=e.glyph,n=e.label,i=e.labelId,a=e.tooltipId,s=e.value;return{glyph:t,tooltipId:a,disabled:l,text:i?c().createElement(b.Z,{msgId:i}):n,active:s===r,onClick:function(){return o(r===s?void 0:s)}}}))}))},mark:function(e){var t=e.label,r=os(e,["label"]);return c().createElement(Sc,{label:t},c().createElement(_c,r))},image:function(e){var t=e.label,r=e.value;!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e.config);var n=e.onChange,o=ts((0,l.useState)(!1),2),i=o[0],a=o[1],s=yl()(r)?r.src:r;return c().createElement(Sc,{label:t,invalid:!("error"!==(null==i?void 0:i.type)),warning:!("warning"!==(null==i?void 0:i.type))},c().createElement(Qc,{label:t,value:s,onChange:function(e){n(e),a(!1)},onLoad:function(e,t){a(e),"error"===e.type&&n({src:t,errorId:e.messageId})}}))},select:function(e){var t=e.label,r=e.value,n=e.config,o=n.getOptions,i=void 0===o?function(){return[]}:o,a=n.selectProps,s=void 0===a?{}:a,u=n.isValid,p=e.onChange,f=os(e,["label","value","config","onChange"]),d=s.creatable,m=s.clearable,y=void 0!==m&&m,g=s.multi;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.map((function(e){return e.value})),n=(null==t?void 0:t.value)&&-1===r.indexOf(t.value);return n?[t].concat(es(e)):e}function h(e){return r?[{value:r,label:r}].reduce(v,e):e}var O=i(f),w=ts((0,l.useState)(h(O)),2),E=w[0],S=w[1];(0,l.useEffect)((function(){S(h(O))}),[null==O?void 0:O.length]);var P=d?us:ss,j=!u||u({value:r});return c().createElement(Sc,{label:t,invalid:!j},c().createElement(P,Jc({clearable:y,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},s,{options:E.map((function(e){return as(as({},e),{},{label:e.labelId?c().createElement(b.Z,{msgId:e.labelId}):e.label})})),value:r,onChange:function(e){return g?p(e.length>0?e.map((function(e){return e.value})):void 0):(S(v(E,e)),p(e.value))}})))},colorRamp:function(e){var t=e.label,r=e.value,n=e.config,o=n.samples,i=void 0===o?5:o,a=n.getOptions,l=void 0===a?function(){return[]}:a,s=n.rampFunction,u=void 0===s?function(e){return e.colors}:s,p=e.onChange,f=l(os(e,["label","value","config","onChange"]));return c().createElement(Sc,{label:t},c().createElement(tc,{items:f,rampFunction:u,samples:i,value:{name:r},onChange:function(e){return p(e.name)}}))},colorMap:function(e){var t=e.value,r=e.onChange;return c().createElement("div",{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},c().createElement(Ec,{classification:t,onUpdateClasses:function(e,t){return r({classification:e,type:t})}}))},channel:function(e){var t,r,n,o=e.value,i=e.onChange,a=e.bands,l=o.channelSelection,s=l?l.grayChannel?"gray":"rgb":"auto",u=(a||[]).map((function(e){return{label:e,value:e}}));if("rgb"===s)return Object.keys(l).map((function(e){var t,r,n=null===(t=l[e])||void 0===t?void 0:t.sourceChannelName,a=null===(r=l[e])||void 0===r?void 0:r.contrastEnhancement;return c().createElement(c().Fragment,null,c().createElement(Zc,{key:e,value:n,bands:u,label:"styleeditor."+e,enhancementType:(null==a?void 0:a.enhancementType)||"none",onChange:function(t,r){return"band"===t?i({contrastEnhancement:{},channelSelection:as(as({},o.channelSelection),{},ls({},e,as(as({},o.channelSelection[e]),{},{sourceChannelName:r})))}):"enhancementType"===t?i({contrastEnhancement:{},channelSelection:as(as({},o.channelSelection),{},ls({},e,as(as({},o.channelSelection[e]),{},{contrastEnhancement:as(as({},l[e].contrastEnhancement),{},{enhancementType:r})})))}):null}}),c().createElement(Sc,{key:e+"-divider",divider:!0}))}));var p=void 0===(null==l||null===(t=l.grayChannel)||void 0===t?void 0:t.sourceChannelName)?"auto":null==l||null===(r=l.grayChannel)||void 0===r?void 0:r.sourceChannelName,f="auto"===s?o.contrastEnhancement:null==l||null===(n=l.grayChannel)||void 0===n?void 0:n.contrastEnhancement;return c().createElement(Zc,{label:"styleeditor.grayChannel",value:p,bands:[{label:c().createElement(b.Z,{msgId:"styleeditor.channelAuto"}),value:"auto"}].concat(es(u)),enhancementType:(null==f?void 0:f.enhancementType)||"none",onChange:function(e,t){return"band"===e?i("auto"===t?as(as({},o),{},{channelSelection:void 0}):{contrastEnhancement:{},channelSelection:{grayChannel:as(as({contrastEnhancement:{}},null==l?void 0:l.grayChannel),{},{sourceChannelName:t})}}):"enhancementType"===e?i("auto"===s?{channelSelection:void 0,contrastEnhancement:as(as({},o.contrastEnhancement),{},{enhancementType:t})}:{contrastEnhancement:{},channelSelection:Object.keys(l).reduce((function(e,r){return as(as({},e),{},ls({},r,as(as({},l[r]),{},{contrastEnhancement:as(as({},l[r].contrastEnhancement),{},{enhancementType:t})})))}),{})}):null}})},dash:function(e){var t=e.label,r=e.value,n=e.onChange,o=e.config.options;return c().createElement(Sc,{label:t},c().createElement(fc,{dashArray:r,onChange:n,options:o,defaultStrokeWidth:2,isValidNewOption:function(e){return!!e.label&&!e.label.split(" ").find((function(e){return Hl()(parseFloat(e))}))},creatable:!0}))}};function fs(e){var t=e.properties,r=e.params,n=e.config,o=e.onChange,i=(0,l.useRef)({properties:t});return i.current={properties:t},c().createElement(c().Fragment,null,Object.keys(r).map((function(e){var a=r[e]||{},l=a.type,s=a.setValue,u=a.getValue,p=a.isDisabled,f=a.config,d=a.label,m=a.key||e,y=ps[l],b=s&&s(t[m],i.current.properties);return y&&c().createElement(y,Jc({},n,{key:m,label:d||m,config:f,disabled:p&&p(t[m],i.current.properties),value:Vl()(b)?t[m]:b,onChange:function(e){return o(u&&u(e,i.current.properties)||e)}}))})))}const ds=fs;function ms(e){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(){return(ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vs(e,t){return(vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hs(e,t){return!t||"object"!==ms(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ws(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vs(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Os(n);if(o){var r=Os(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return hs(this,e)});function a(){return bs(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t=le()({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=le()({},t,{borderColor:"#FF0000"}));var r=this.props.multivalue?jr.Multiselect:jr.DropdownList,n=null!==this.props.valueField&&null!==this.props.textField?c().createElement(r,ys({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,ie.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):c().createElement(r,ys({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,ie.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?c().createElement(We.Z,{placement:"bottom",overlay:c().createElement(g.Tooltip,{id:this.props.fieldRowId+"_tooltip"},c().createElement("strong",null,this.props.fieldException))},n):n}}])&&gs(t.prototype,r),a}(c().Component);ws(Es,"propTypes",{busy:u().bool,style:u().object,valueField:u().string,textField:u().string,placeholder:u().object,itemComponent:u().oneOfType([u().object,u().func]),fieldOptions:u().array,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().oneOfType([u().number,u().string,u().array]),fieldException:u().oneOfType([u().object,u().string]),comboFilter:u().oneOfType([u().bool,u().string,u().func]),groupBy:u().oneOfType([u().string,u().func]),multivalue:u().bool,disabled:u().bool,options:u().object,onSelect:u().func,onToggle:u().func,onSearch:u().func,onUpdateField:u().func,onClick:u().func,onUpdateExceptionField:u().func}),ws(Es,"contextTypes",{messages:u().object}),ws(Es,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:c().createElement(b.Z,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}});const Ss=Es;function Ps(e){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function js(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xs(e,t){return(xs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ts(e,t){return!t||"object"!==Ps(t)&&"function"!=typeof t?ks(e):t}function ks(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Is(e){return(Is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function As(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xs(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Is(n);if(o){var r=Is(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ts(this,e)});function a(){var e;js(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return As(ks(e=i.call.apply(i,[this].concat(r))),"renderOperatorField",(function(){return c().createElement(Ss,{fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),As(ks(e),"renderValueField",(function(t){return c().cloneElement(c().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],le()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),As(ks(e),"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),As(ks(e),"updateFieldElement",(function(t,r,n,o,i){var a;if("attribute"===r?(a=e.props.attributes.filter((function(e){return e.attribute===n}))[0],e.props.onUpdateField(t,r,n,a&&a.type||o,i)):e.props.onUpdateField(t,r,n,"boolean"===o?"string":o,i),"value"===r){var l=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));l.length>0&&e.props.onChangeCascadingValue(l)}})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return c().createElement("div",{className:"filter-field-row"},c().createElement("div",{className:"filter-field-attribute"},c().createElement(Ss,{valueField:"id",textField:"name",fieldOptions:this.props.attributes.map((function(e){return{id:e.attribute,name:e.label}})),placeholder:(0,ie.S$)(this.context.messages,"queryform.attributefilter.combo_placeholder"),fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),c().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),c().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?c().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&Cs(t.prototype,r),a}(c().Component);As(Fs,"propTypes",{attributes:u().array,filterField:u().object,operatorOptions:u().array,onUpdateField:u().func,maxFeaturesWPS:u().number,toggleMenu:u().func,deleteButton:u().node,onUpdateExceptionField:u().func,onChangeCascadingValue:u().func}),As(Fs,"contextTypes",{messages:u().object}),As(Fs,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const Ds=Fs;var Rs=r(30381),Ns=r.n(Rs),Ms=r(93054),Ls=r.n(Ms),_s=r(43146),Zs=r(55237);function Bs(e){return(Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Us(e,t){return(Us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e,t){return!t||"object"!==Bs(t)&&"function"!=typeof t?Vs(e):t}function Vs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qs(e){return(qs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ls()(Ns());var $s=(0,_s.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(jr.DateTimePicker),Ks=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Us(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qs(n);if(o){var r=qs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ws(this,e)});function a(){var e;Gs(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hs(Vs(e=i.call.apply(i,[this].concat(r))),"updateValueState",(function(t){t.startDate&&t.endDate&&t.startDate>t.endDate?e.props.onUpdateExceptionField(e.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,r=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?c().createElement("div",{className:"query-field"},c().createElement("div",{className:"query-field-value"},this.props.showLabels&&c().createElement(b.Z,{msgId:"queryform.from"}),c().createElement($s,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,Zs.V$)(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:r})}})),c().createElement("div",{className:"query-field-value"},this.props.showLabels&&c().createElement(b.Z,{msgId:"queryform.to"}),c().createElement($s,{type:this.props.attType,defaultValue:r,value:r,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,Zs.V$)(this.context.locale,this.props.attType),onChange:function(r){return e.updateValueState({startDate:t,endDate:r})}}))):c().createElement("div",null,this.props.showLabels&&c().createElement(b.Z,{msgId:"queryform.date"}),c().createElement($s,{type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:(0,Zs.V$)(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}}))}}])&&zs(t.prototype,r),a}(c().Component);Hs(Ks,"propTypes",{attType:u().string,dateEnabled:u().bool,fieldName:u().string,fieldRowId:u().number,fieldValue:u().object,fieldException:u().string,operator:u().string,onUpdateField:u().func,onUpdateExceptionField:u().func,showLabels:u().bool,timeEnabled:u().bool}),Hs(Ks,"contextTypes",{locale:u().string}),Hs(Ks,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1});const Ys=Ks;function Xs(e){return(Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(r),!0).forEach((function(t){lu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eu(){return(eu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function tu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ru(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ou(e,t){return!t||"object"!==Xs(t)&&"function"!=typeof t?iu(e):t}function iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}na()();var cu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=au(n);if(o){var r=au(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ou(this,e)});function a(){var e;tu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return lu(iu(e=i.call.apply(i,[this].concat(r))),"renderPicker",(function(t){var r=e.props.label?c().createElement("label",null,e.props.label):null,n=e.props.lowLabel?c().createElement("label",null,e.props.lowLabel):null,o=e.props.upLabel?c().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?c().createElement("div",{className:"query-field"},c().createElement("div",{className:"query-field-value"},n,c().createElement(jr.NumberPicker,eu({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),c().createElement("div",{className:"query-field-value"},o,c().createElement(jr.NumberPicker,eu({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):c().createElement("div",null,r,c().createElement(jr.NumberPicker,eu({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),lu(iu(e),"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,ie.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,ie.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=Js(Js({},this.props.style),{},{borderColor:"#FF0000"})),c().createElement(We.Z,{placement:"bottom",overlay:this.props.fieldException?c().createElement(g.Tooltip,{id:this.props.fieldRowId+"_tooltip"},c().createElement("strong",null,this.props.fieldException)):c().createElement("noscript",null)},this.renderPicker(e))}}])&&ru(t.prototype,r),a}(c().Component);lu(cu,"propTypes",{operator:u().string,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().oneOfType([u().number,u().object]),fieldException:u().oneOfType([u().object,u().bool,u().string]),onUpdateField:u().func,onUpdateExceptionField:u().func,isRequired:u().bool,label:u().string,lowLabel:u().string,upLabel:u().string,options:u().shape({format:u().string,min:u().number,max:u().number,step:u().number,precision:u().number}),style:u().object}),lu(cu,"contextTypes",{messages:u().object}),lu(cu,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const su=cu;var uu=r(47805);function pu(e){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function du(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mu(e,t){return(mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yu(e,t){return!t||"object"!==pu(t)&&"function"!=typeof t?bu(e):t}function bu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gu(e){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gu(n);if(o){var r=gu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return yu(this,e)});function a(){var e;fu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vu(bu(e=i.call.apply(i,[this].concat(r))),"renderField",(function(){var t=(0,ie.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),r=c().createElement(g.Tooltip,{id:"textField-tooltip"+e.props.fieldRowId},c().createElement(el.Z,{msgId:"queryform.attributefilter.tooltipTextField"})),n=c().createElement(g.FormControl,{disabled:"isNull"===e.props.operator,placeholder:t,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,uu.isLikeOrIlike)(e.props.operator)?c().createElement(We.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:r},n):n})),vu(bu(e),"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null);return c().createElement("div",{className:"textField"},e,this.renderField())}}])&&du(t.prototype,r),a}(c().Component);vu(hu,"propTypes",{operator:u().string,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().string,label:u().string,fieldException:u().oneOfType([u().object,u().string]),onUpdateField:u().func,onUpdateExceptionField:u().func,style:u().object}),vu(hu,"contextTypes",{messages:u().object}),vu(hu,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const Ou=hu;var wu=r(48384),Eu=r(49902);function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ju(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cu(e,t){return(Cu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xu(e,t){return!t||"object"!==Su(t)&&"function"!=typeof t?Tu(e):t}function Tu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ku(e){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ku(n);if(o){var r=ku(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return xu(this,e)});function a(){var e;Pu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Iu(Tu(e=i.call.apply(i,[this].concat(r))),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),Iu(Tu(e),"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),n=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,o=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return le()({},e.props.pagination,{paginated:0!==t.length&&!(n&&1===t.length),firstPage:n,lastPage:o,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),Iu(Tu(e),"getTooltip",(function(){return le()({},e.props.tooltip,{enabled:(0,uu.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:c().createElement(el.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),Iu(Tu(e),"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return c().createElement(Eu.Z,{busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),Iu(Tu(e),"handleSelect",(function(){e.selected=!0})),Iu(Tu(e),"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),Iu(Tu(e),"handleFocus",(function(t){e.loadWithoutfilter(t)})),Iu(Tu(e),"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),Iu(Tu(e),"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null);return c().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&ju(t.prototype,r),a}(c().Component);Iu(Au,"propTypes",{disabled:u().bool,filterField:u().object,label:u().string,itemComponent:u().oneOfType([u().object,u().func]),maxFeaturesWPS:u().number,onUpdateField:u().func,pagination:u().object,textField:u().string,tooltip:u().object,toggleMenu:u().func,valueField:u().string}),Iu(Au,"contextTypes",{messages:u().object}),Iu(Au,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:wu.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const Fu=Au;var Du=r(12346);function Ru(e){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lu(e,t){return(Lu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _u(e,t){return!t||"object"!==Ru(t)&&"function"!=typeof t?Zu(e):t}function Zu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bu(e){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bu(n);if(o){var r=Bu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _u(this,e)});function a(){var e;Nu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gu(Zu(e=i.call.apply(i,[this].concat(r))),"state",{open:!1}),Gu(Zu(e),"getSelected",(function(){return(0,ue.find)(e.props.options,e.getFindFunciton())})),Gu(Zu(e),"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),Gu(Zu(e),"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),Gu(Zu(e),"getFindFunciton",(function(){return e.props.valueField?Gu({},e.props.valueField,e.props.value):e.props.value})),Gu(Zu(e),"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),Gu(Zu(e),"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),Gu(Zu(e),"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},c().createElement("span",{onClick:this.handleClick},c().createElement("strong",null,this.renderLabel(this.getSelected())),c().createElement(g.Glyphicon,{glyph:"chevron-down"})),this.state.open&&c().createElement("div",{className:"m-options"},c().createElement("ul",null,this.props.options.map((function(t,r){return c().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&Mu(t.prototype,r),a}(c().Component);Gu(zu,"propTypes",{options:u().array,value:u().any,onSelect:u().func,valueField:u().string,labelField:u().string,labelRenderer:u().any}),Gu(zu,"defaultProps",{onSelect:function(){},options:[]});const Uu=zu;var Wu=r(40797);function Vu(e){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qu(e){return function(e){if(Array.isArray(e))return Hu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Hu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yu(e,t){return(Yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xu(e,t){return!t||"object"!==Vu(t)&&"function"!=typeof t?Qu(e):t}function Qu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ju(e){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ep(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ju(n);if(o){var r=Ju(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Xu(this,e)});function a(){var e;$u(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ep(Qu(e=i.call.apply(i,[this].concat(r))),"getComboValues",(function(t,r){if(t&&t.dependson){var n=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(n&&n.value){var o=r.filter((function(e){return e.attribute===n.attribute}))[0],i=o.values.filter((function(e){return e[o.valueId]===n.value}))[0][t.dependson.from],a=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?a.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),ep(Qu(e),"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;default:return e.props.defaultOperators}})),ep(Qu(e),"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],n=e.getComboValues(r,e.props.attributes),o=t.exception?c().createElement(We.Z,{placement:"bottom",overlay:c().createElement(g.Tooltip,{id:t.rowId+"tooltip"},c().createElement("strong",null,c().createElement(Wu.ZP.Message,{msgId:t.exception||""})))},c().createElement(qe.Z,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},c().createElement(g.Glyphicon,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):c().createElement(We.Z,{placement:"top",overlay:c().createElement(g.Tooltip,{id:t.rowId+"tooltip"},c().createElement("strong",null,c().createElement(Wu.ZP.Message,{msgId:"queryform.attributefilter.delete"})))},c().createElement(qe.Z,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},c().createElement(g.Glyphicon,{glyph:e.props.removeButtonIcon})));return c().createElement(Ds,{key:t.rowId,deleteButton:o,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},c().createElement(Ss,{attType:"list",valueField:"id",textField:"name",fieldOptions:n||[],comboFilter:"contains"}),c().createElement(Ys,{attType:"date",dateEnabled:!0,operator:t.operator}),c().createElement(Ys,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator}),c().createElement(Ys,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),c().createElement(su,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?c().createElement(Fu,{filterField:t,attType:"string"}):c().createElement(Ou,{operator:t.operator,attType:"string"}),c().createElement(Ss,{fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),ep(Qu(e),"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),c().createElement(Dr.Z,{buttons:r,btnDefaultProps:{}})})),ep(Qu(e),"renderGroupHeader",(function(t){return c().createElement("div",{className:"logicHeader filter-logic-header"},c().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},c().createElement("span",{className:"group_label_a"},c().createElement(Wu.ZP.Message,{msgId:"queryform.attributefilter.group_label_a"})),"",c().createElement(Uu,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return c().createElement(Wu.ZP.Message,{msgId:t})}}),"",c().createElement("span",{className:"group_label_b"},c().createElement(Wu.ZP.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),ep(Qu(e),"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),n=e.props.groupFields.filter((function(e){return e.groupId===t.id})),o=[].concat(qu(r),qu(n)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return c().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),c().createElement("div",{className:"query-content"},o))})),ep(Qu(e),"renderHeader",(function(){return(0,ie.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),ep(Qu(e),"updateLogicCombo",(function(t,r,n){var o=e.props.logicComboOptions.filter((function(t){return n===(0,ie.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,o)})),e}return t=a,(r=[{key:"render",value:function(){var e=this;return this.props.withContainer?c().createElement(Du.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):c().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&Ku(t.prototype,r),a}(c().Component);ep(tp,"propTypes",{groupLevels:u().number,withContainer:u().bool,autocompleteEnabled:u().bool,maxFeaturesWPS:u().number,groupFields:u().array,filterFields:u().array,attributes:u().array,fieldWidth:u().string,removeButtonIcon:u().string,addButtonIcon:u().string,removeGroupButtonIcon:u().string,buttonStyle:u().string,logicComboOptions:u().array,attributePanelExpanded:u().bool,actions:u().object,listOperators:u().array,stringOperators:u().array,booleanOperators:u().array,defaultOperators:u().array}),ep(tp,"contextTypes",{messages:u().object}),ep(tp,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","like","ilike","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><"]});const rp=tp;function np(e){return function(e){if(Array.isArray(e))return op(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return op(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?op(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ap(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ip(Object(r),!0).forEach((function(t){lp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ip(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cp=(0,Ge.Z)(qe.Z),sp=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ap(ap({},t),{},(lp(e={},r.fieldName,r.fieldValue),lp(e,"type",r.fieldType),lp(e,"fieldOptions",ap(ap({},t.fieldOptions),{},{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})),e));return"attribute"===r.fieldName?ap(ap({},n),{},{value:"string"===r.fieldType?"":null,operator:""}):"operator"===r.fieldName?ap(ap({},n),{},{value:null}):n},up=function(e){var t=e.filterObj,r=void 0===t?{groupFields:[{id:1,logic:"OR",index:0}]}:t,n=e.attributes,o=void 0===n?[]:n,i=e.groupLevels,a=void 0===i?0:i,l=e.onChange,s=void 0===l?function(){}:l,u=r.groupFields,p=r.filterFields;return c().createElement("div",{className:"ms-style-rule-filter"},c().createElement(rp,{attributes:o,filterFields:p,groupFields:u,autocompleteEnabled:!1,groupLevels:a,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:function(e,t){var r={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};s({filterFields:p,groupFields:u?[].concat(np(u),[r]):[r]})},onAddFilterField:function(e){var t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};s({filterFields:p?[].concat(np(p),[t]):[t],groupFields:u})},onRemoveFilterField:function(e){s({filterFields:p.filter((function(t){return t.rowId!==e})),groupFields:u})},onUpdateFilterField:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};s({filterFields:p.map((function(i){return i.rowId===e?sp(i,{rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}):i})),groupFields:u})},onUpdateExceptionField:function(e,t){s({filterFields:p.map((function(r){return r.rowId===e?ap(ap({},r),{},{exception:t}):r})),groupFields:u})},onUpdateLogicCombo:function(e,t){s({filterFields:p,groupFields:u.map((function(r){return r.id===e?ap(ap({},r),{},{logic:t}):r}))})},onRemoveGroupField:function(e){s({filterFields:p.filter((function(t){return t.groupId!==e})),groupFields:u.filter((function(t){return t.id!==e}))})},onChangeCascadingValue:function(){}}}))};function pp(e){var t=e.value,r=e.hide,n=e.attributes,o=e.onChange,i=e.placement,a=void 0===i?"right":i;return r||!n||0===n.length?null:c().createElement(Nc,{placement:a,content:c().createElement(up,{filterObj:t,attributes:n,onChange:function(e){return o({filter:e})}})},c().createElement(cp,{className:"square-button-md no-border",active:!!t,tooltipId:"styleeditor.openFilterBuilder"},c().createElement(g.Glyphicon,{glyph:"filter"})))}function fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fp(Object(r),!0).forEach((function(t){mp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yp(e,t){if(e){if("string"==typeof e)return bp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bp(e,t):void 0}}function bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gp=(0,Ua.Z)(["placeholder","noResultsText"])(Rr.ZP.Creatable),vp=(0,Ge.Z)(qe.Z);function hp(e){var t=e.label,r=e.currentZoom;return c().createElement("span",null,t,r&&c().createElement(c().Fragment,null,"",c().createElement(g.Glyphicon,{glyph:"arrow-left"})))}function Op(e){var t=e.label,r=e.value,n=e.options,o=e.isValidNewOption,i=e.onChange;return c().createElement(Sc,{label:t},c().createElement(gp,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:r,options:n,optionRenderer:hp,valueRenderer:hp,isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!Hl()(t)&&o(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);i(Hl()(t)?void 0:t)}}))}function wp(e){var t=e.value,r=e.zoom,n=e.scales,o=void 0===n?[]:n,i=e.onChange;function a(e,t){var r,n=e.map((function(e){return e.value}));return t&&-1===n.indexOf(t)?[{value:t}].concat((r=e,function(e){if(Array.isArray(e))return bp(e)}(r)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||yp(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e.value>t.value?-1:1})):e}var s,u,p=(s=(0,l.useState)(function(e){var r=e.map((function(e,t){return{value:e,zoom:t}})),n=[t.min,t.max].filter((function(e){return void 0!==e}));return 0===n.length?r:n.reduce(a,r)}(o)),u=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(s,u)||yp(s,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],d=p[1];return c().createElement("div",{className:"ms-style-rule-scale"},c().createElement(Op,{label:"styleeditor.maxScaleDenominator",value:t.max,options:f.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.min&&e.value<=t.min}})),isValidNewOption:function(e){return e>=t.min},onChange:function(e){i(dp(dp({},t),{},{max:e})),d(a(f,e))}}),c().createElement(Op,{label:"styleeditor.minScaleDenominator",value:t.min,options:f.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.max&&e.value>=t.max}})),isValidNewOption:function(e){return e<=t.max},onChange:function(e){i(dp(dp({},t),{},{min:e})),d(a(f,e))}}))}function Ep(e){var t=e.value,r=void 0===t?{}:t,n=e.scales,o=void 0===n?[]:n,i=e.zoom,a=e.hide,l=e.onChange,s=e.placement,u=void 0===s?"right":s;return a?null:c().createElement(Nc,{placement:u,content:c().createElement(wp,{value:r,zoom:i,scales:o,onChange:function(e){return l({scaleDenominator:e})}})},c().createElement(vp,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==r.min||void 0!==r.max},c().createElement(g.Glyphicon,{glyph:"1-ruler"})))}function Sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(r),!0).forEach((function(t){jp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cp=function(e){var t=e.ruleBlock,r=e.symbolizerBlock;return"Raster"!==e.kind?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[Pp(Pp({},e.deaultProperties),{},{symbolizerId:xr()()})]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:function(e){var r=e.ruleId,n=e.symbolizerKind;return Pp(Pp(Pp({},e.deaultProperties),t.Classification.deaultProperties),{},{ruleId:r,symbolizerKind:n})}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[Pp(Pp({},n),{},jp({symbolizerId:xr()(),fill:void 0},o,Pp({},r.Mark.deaultProperties)))]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[Pp(Pp({},n),{},jp({symbolizerId:xr()(),fill:void 0},o,Pp({},r.Icon.deaultProperties)))]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[Pp(Pp({},r.Raster.deaultProperties),{},{symbolizerId:xr()()})]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[Pp(Pp({},r.Raster.deaultProperties),{},{channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:xr()()})]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:function(e){var r=e.ruleId;return Pp(Pp({},t.Raster.deaultProperties),{},{ruleId:r})}}]},xp=function(e){var t=e.ruleKind,r=e.graphic,n=e.symbolizerKind,o=e.channelSelection;return"Raster"===t?"PseudoColor":"Raster"===n?null!=o&&o.redChannel?"RGB":"Gray":void 0!==t?t:null!=r&&r.kind?null==r?void 0:r.kind:"Simple"};function Tp(e){var t,r,n=e.ruleKind,o=e.symbolizerKind,i=e.ruleId,a=e.graphic,l=e.channelSelection,s=e.hide,u=e.ruleBlock,p=e.symbolizerBlock,f=e.getSelected,d=void 0===f?xp:f,m=e.getOptions,y=void 0===m?Cp:m,v=e.onSelect,h=y({ruleBlock:u,symbolizerBlock:p,kind:o}),O=o?p[o]:{},w=O.deaultProperties,E=O.params,S=void 0===E?{}:E,P=null==S||null===(t=S.color)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.graphicKey,j=d({ruleKind:n,symbolizerKind:o,graphic:a,channelSelection:l});return s?null:c().createElement(g.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:c().createElement(g.Glyphicon,{glyph:"option-vertical"})},h.map((function(e){return!e.isVisible||e.isVisible({graphicKey:P})?c().createElement(g.MenuItem,{key:e.value,active:j===e.value,onClick:function(){return function(e,t){return e===j?null:v(t)}(e.value,e.onSelect({ruleId:i,ruleKind:n,symbolizerKind:o,deaultProperties:w,graphicKey:P}))}},c().createElement(b.Z,{msgId:e.labelId})):null})))}const kp=function(e){var t=e.className,r=e.glyph,n=e.tools,o=e.children,i=t?" "+t:"";return c().createElement("li",{className:"ms-symbolizer".concat(i)},c().createElement("div",{className:"ms-symbolizer-info"},r&&c().createElement(g.Glyphicon,{glyph:r}),c().createElement("div",{className:"ms-symbolizer-tools"},n)),o)};function Ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ip(Object(r),!0).forEach((function(t){Fp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dp(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Rp=function(e){var t=e.ruleId,r=e.glyph,n=e.params,o=e.kind,i=e.symbolizerKind,a=e.classificationType,s=void 0===a?"classificationVector":a,u=e.attributes,p=void 0===u?[]:u,f=e.onUpdate,d=e.onReplace,m=e.methods,y=e.getColors,b=void 0===y?function(){}:y,g=e.ruleBlock,v=void 0===g?{}:g,h=e.symbolizerBlock,O=void 0===h?{}:h,w=e.bands,E=Dp(e,["ruleId","glyph","params","kind","symbolizerKind","classificationType","attributes","onUpdate","onReplace","methods","getColors","ruleBlock","symbolizerBlock","bands"]),S=E.ramp,P=E.method,j=E.classification,C=E.attribute,x=E.intervals,T=E.reverse,k=E.continuous,I=(0,l.useRef)();I.current={ruleId:t,intervals:x,method:P,attribute:C,reverse:T,ramp:S,continuous:k,classification:j};var A=n.reduce((function(e,t){return xc()(t)?Ap(Ap({},e),t(i)):Ap(Ap({},e),t)}),{}),F=(O[i]||{}).glyph;return c().createElement(kp,{key:"Classification",glyph:F||r,tools:c().createElement(Tp,{ruleKind:o,symbolizerKind:i,ruleId:t,onSelect:d,ruleBlock:v,symbolizerBlock:O})},c().createElement(ds,{properties:E,config:{attributes:p,methods:m,getColors:function(){var e="custom"===S&&j.length>0&&{name:"custom",colors:j.map((function(e){return e.color}))},t=b(void 0,void 0,5,e);return t?t.map((function(e){var t=e.name,r=Dp(e,["name"]);return Ap({label:t?"global.colors.".concat(t):void 0,name:t},r)})):[]},bands:w,method:P},params:A,onChange:function(e){return f(Ap(Ap({},I.current),{},{type:s,values:e}))}}))};var Np=r(18446),Mp=r.n(Np),Lp=r(17621),_p=r.n(Lp);function Zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zp(Object(r),!0).forEach((function(t){Gp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const zp=function(e){var t=e.key,r=void 0===t?"color":t,n=e.opacityKey,o=void 0===n?"opacity":n,i=e.graphicKey,a=e.label,l=void 0===a?"Fill":a,c=e.stroke,s=e.pattern,u=e.disableAlpha,p=e.getGroupParams,f=e.getGroupConfig;return{type:"color",label:l,config:{stroke:c,pattern:s,disableAlpha:u,getGroupParams:p,getGroupConfig:f,graphicKey:i},setValue:function(e,t){var r;if(s&&null!==(r=t[i])&&void 0!==r&&r.kind)return t[i];var n=Vl()(t[o])?1:t[o];return _p()(e).setAlpha(n).toRgb()},getValue:function(e){var t,n;if(s&&yl()(e)&&e.kind)return Gp(n={},i,e),Gp(n,r,void 0),Gp(n,o,void 0),n;var a=e||{},l=a.a,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(a,["a"]);return Bp((Gp(t={},r,_p()(Bp(Bp({},c),{},{a:1})).toHexString()),Gp(t,o,l),t),s&&Gp({},i,void 0))}}},Up=function(e){var t=e.key,r=void 0===t?"width":t,n=e.label,o=void 0===n?"Width":n,i=e.dasharrayKey,a=void 0===i?"dasharray":i;return{type:"slider",label:o,config:{range:{min:0,max:20},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=parseFloat(n),i=t[a],l=t[r];return Bp(Gp({},r,o),i&&Gp({},a,o?i.map((function(e){return Math.round(e/l*o)})):void 0))}}},Wp=function(e){var t=e.key,r=void 0===t?"dasharray":t,n=e.label;return{type:"dash",label:void 0===n?"Dash array":n,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:function(e,t){var r=void 0===t.width?1:t.width;return void 0!==e?e.map((function(e){return Math.round(e/r)})):[0]},getValue:function(e,t){if(Mp()(e,["0"]))return Gp({},r,void 0);var n=void 0===t.width?1:t.width,o=!(e||[]).find((function(e){return Hl()(parseFloat(e))}));return Gp({},r,void 0!==e&&o?e.map((function(e){return parseFloat(e)*n})):void 0)}}},Vp=function(e){var t=e.key,r=void 0===t?"cap":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line cap":n,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:function(e){return Gp({},r,e)}}},qp=function(e){var t=e.key,r=void 0===t?"join":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line join":n,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:function(e){return Gp({},r,e)}}},Hp=function(e){var t=e.key,r=void 0===t?"radius":t,n=e.label;return{type:"slider",label:void 0===n?"Radius":n,config:{range:{min:1,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return Gp({},r,parseFloat(t))}}},$p=function(e){var t=e.key,r=void 0===t?"opacity":t,n=e.label;return{type:"slider",label:void 0===n?"Opacity":n,config:{range:{min:0,max:1}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return Gp({},r,parseFloat(t))}}},Kp=function(e){var t=e.key,r=void 0===t?"offset":t,n=e.label,o=void 0===n?"":n,i=e.axis,a=void 0===i?"":i;return{key:r,type:"slider",label:o,config:{range:{min:-100,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="y"===a?parseFloat(e[1]):parseFloat(e[0]);return Hl()(t)?0:t},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=t[r]||[0,0];return Gp({},r,"y"===a?[o[0],parseFloat(n)]:[parseFloat(n),o[1]])}}},Yp=function(e){var t=e.key,r=void 0===t?"rotate":t,n=e.label;return{type:"slider",label:void 0===n?"Rotation (deg)":n,config:{range:{min:0,max:360},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+""}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split("")[0];return Gp({},r,parseFloat(t))}}},Xp=function(e){var t=e.label,r=e.key,n=void 0===r?"wellKnownName":r;return{type:"mark",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Gp({},n,e)}}},Qp=function(e){var t=e.label,r=e.key,n=void 0===r?"image":r;return{type:"image",label:t,config:{},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Gp({},n,e)}}},Jp=function(e){var t=e.label,r=e.key,n=void 0===r?"fontStyle":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Gp({},n,e)}}},ef=function(e){var t=e.label,r=e.key,n=void 0===r?"fontWeight":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Gp({},n,e)}}},tf=function(e){var t=e.key,r=void 0===t?"label":t;return{type:"toolbar",label:e.label,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:e.isDisabled,getValue:function(e){return Gp({},r,e)}}},rf=function(e){var t=e.key,r=void 0===t?"intervals":t,n=e.label,o=e.isDisabled;return{type:"slider",label:n,config:{range:{min:2,max:25},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}},isDisabled:void 0===o?function(e,t){return"customInterval"===(null==t?void 0:t.method)}:o,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Gp({},r,parseFloat(e[0]))}}},nf=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"select",label:t,config:{getOptions:void 0===o?function(){return[]}:o,selectProps:e.selectProps,isValid:e.isValid},getValue:function(e){return Gp({},n,e)}}},of=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"colorRamp",label:t,config:{getOptions:void 0===o?function(){return[]}:o},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Gp({},n,e)}}},af=function(e){var t=e.label,r=e.key,n=void 0===r?"":r;return{type:"colorMap",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.classification,o=e.type,i="interval"===o||"customInterval"===t.method,a="color"===o||"custom"===t.ramp;return Bp(Bp(Gp({},n,r),i&&{method:"customInterval"}),a&&{ramp:"custom"})}}},lf=function(e){return{type:"channel",label:e.label,setValue:function(e,t){return{channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}};function cf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(r),!0).forEach((function(t){uf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pf(e){return function(e){if(Array.isArray(e))return ff(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ff(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ff(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ff(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const df=function(){var e={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["point","linestring","polygon","vector"],params:{wellKnownName:Xp({label:"styleeditor.shape"}),color:zp({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:zp({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:Up({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:Hp({key:"radius",label:"styleeditor.radius"}),rotate:Yp({label:"styleeditor.rotation"})},deaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:["point","linestring","polygon","vector"],params:{image:Qp({label:"styleeditor.image",key:"image"}),opacity:$p({label:"styleeditor.opacity"}),size:Hp({key:"size",label:"styleeditor.size"}),rotate:Yp({label:"styleeditor.rotation"})},deaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:["linestring","polygon","vector"],params:{color:zp({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}},graphicKey:"graphicStroke"}),width:Up({label:"styleeditor.strokeWidth",key:"width"}),dasharray:Wp({label:"styleeditor.lineStyle",key:"dasharray"}),cap:Vp({label:"styleeditor.lineCap",key:"cap"}),join:qp({label:"styleeditor.lineJoin",key:"join"})},deaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round"}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:zp({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}}),outlineColor:zp({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:Up({key:"outlineWidth",label:"styleeditor.outlineWidth"})},deaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:["point","linestring","polygon","vector"],params:{label:nf({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:function(e){var t=e.attributes;return(null==t?void 0:t.map((function(e){return{value:"{{"+e.attribute+"}}",label:e.attribute}})))||[]}}),font:nf({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:function(e){var t=e.fonts;return(null==t?void 0:t.map((function(e){return{value:e,label:e}})))||[]}}),color:zp({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:Hp({label:"styleeditor.fontSize",key:"size"}),fontStyle:Jp({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:ef({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:zp({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:Up({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:Yp({label:"styleeditor.rotation"}),offsetX:Kp({label:"styleeditor.offsetX",axis:"x"}),offsetY:Kp({label:"styleeditor.offsetY",axis:"y"})},deaultProperties:{kind:"Text",label:"Label",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0]}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:lf({}),opacity:$p({label:"styleeditor.opacity"})},deaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},t={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:of({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:tf({key:"reverse",label:"styleeditor.reverse",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),attribute:nf({key:"attribute",label:"styleeditor.attribute",isValid:function(e){return void 0!==e.value},getOptions:function(e){var t=e.attributes;return null==t?void 0:t.map((function(e){return{value:e.attribute,label:e.attribute,disabled:e.disabled}}))}}),method:nf({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods,r=e.method,n=(null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}})))||[];return[].concat(pf("customInterval"===r?[{labelId:"styleeditor."+r,value:r}]:[]),pf(n))}}),intervals:rf({label:"styleeditor.intervals"})},function(t){var r,n,o,i;if(!t)return{};switch(t){case"Mark":return sf({fillOpacity:$p({key:"fillOpacity",label:"styleeditor.opacity"})},Ul()(null===(r=e[t])||void 0===r?void 0:r.params,["color"]));case"Line":return sf({opacity:$p({key:"opacity",label:"styleeditor.opacity"})},Ul()(null===(n=e[t])||void 0===n?void 0:n.params,["color"]));case"Fill":return sf({fillOpacity:$p({key:"fillOpacity",label:"styleeditor.opacity"})},Ul()(null===(o=e[t])||void 0===o?void 0:o.params,["color"]));default:return null===(i=e[t])||void 0===i?void 0:i.params}},{classification:af({key:"classification",rampKey:"ramp"})}],deaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:lf({}),opacity:$p({label:"styleeditor.opacity"}),ramp:of({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:tf({key:"reverse",label:"styleeditor.reverse"}),continuous:tf({key:"continuous",label:"styleeditor.continuous"}),method:nf({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods;return null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}}))}}),intervals:rf({label:"styleeditor.intervals"})}],deaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,symbolizerKind:"Raster"}}};return{symbolizerBlock:e,ruleBlock:t}};var mf=r(90937);function yf(e){var t=e.title,r=e.tools,n=e.errorId,o=e.draggable,i=e.connectDragSource,a=e.connectDropTarget,s=e.isDragging,u=e.children,p=(0,l.useRef)(null);o&&(i(p.current),a(p.current));var f=s?" ms-drop-target":"";return c().createElement("li",{ref:p,className:"ms-style-rule".concat(f)},c().createElement("div",{className:"ms-style-rule-head"},o&&c().createElement("div",{className:"ms-style-rule-grab-handle"},c().createElement(g.Glyphicon,{glyph:"grab-handle"})),c().createElement("div",{className:"ms-style-rule-head-info"},t),c().createElement("div",{className:"ms-style-rule-head-tools"},r)),n&&c().createElement(g.Alert,{bsStyle:"danger"},c().createElement(b.Z,{msgId:n})),c().createElement("ul",{className:"ms-style-rule-body"},u))}yf.propTypes={title:u().oneOfType([u().node,u().string]),tools:u().node,errorId:u().string,draggable:u().bool,connectDragSource:u().func,connectDropTarget:u().func,isDragging:u().bool},yf.defaultProps={connectDragSource:function(e){return e},connectDropTarget:function(e){return e}};var bf="RULE";const gf=(0,mf.GR)(bf,{hover:function(e,t,r){!function(e,t,r){if(!r)return null;var n=(0,Pc.findDOMNode)(r);if(!n)return null;var o=t.getItem().index,i=e.index;if(o===i)return null;var a=n.getBoundingClientRect(),l=a.bottom,c=a.top,s=(l-c)/2,u=t.getClientOffset().y-c;o<i&&u<s||o>i&&u>s||(e.onSort(o,i),t.getItem().index=i)}(e,t,r)}},(function(e){return{connectDropTarget:e.dropTarget()}}))((0,mf.Ej)(bf,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(yf));function vf(){return(vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hf(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Of(e){return function(e){if(Array.isArray(e))return wf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return wf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wf(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ef(Object(r),!0).forEach((function(t){Pf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ef(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jf=(0,Ge.Z)(qe.Z),Cf=(0,Ua.Z)("placeholder")(g.FormControl);function xf(){return c().createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},c().createElement("div",null,c().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(b.Z,{msgId:"styleeditor.emptyRuleEditorTitle"})),c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.emptyRuleEditor"}))))}var Tf=(0,l.forwardRef)((function(e,t){var r=e.rules,n=void 0===r?[]:r,o=e.loading,i=e.toolbar,a=e.config,s=void 0===a?{}:a,u=e.ruleBlock,p=void 0===u?{}:u,f=e.symbolizerBlock,d=void 0===f?{}:f,m=e.onUpdate,y=void 0===m?function(){}:m,v=e.onChange,h=void 0===v?function(){}:v,O=s.geometryType,w=s.attributes,E=s.bands,S=s.scales,P=s.zoom,j=s.fonts,C=s.methods,x=s.getColors,T=(0,l.useRef)();function k(e,t){var r=e.values,n=e.ruleId,o=e.symbolizerId;if(t){var i=T.current.rules.map((function(e){return e.ruleId===n?Sf(Sf({},e),r):e}));return h(i)}var a=T.current.rules.map((function(e){return e.symbolizers?Sf(Sf({},e),{},{symbolizers:e.symbolizers.map((function(t){return t.symbolizerId===o&&e.ruleId===n?Sf(Sf({},t),r):t}))}):e}));return h(a)}function I(e){var t=[e].concat(Of(T.current.rules));h(t)}function A(e){var t=e.ruleId,r=hf(e,["ruleId"]),n=T.current.rules.map((function(e){return e.ruleId===t?Sf({ruleId:t},r):e}));return h(n)}function F(e,t){var r=Zl()(T.current.rules,(function(t,r){return r===e})),n=T.current.rules.reduce((function(n,o,i){return i===e?n:[].concat(Of(n),i===t?e>t?[r,o]:[o,r]:[o])}),[]);return h(n)}function D(e,t){var r=e.symbolizers,n=void 0===r?[]:r;return!!Zl()(n,(function(e){return"Text"===e.kind}))&&t>0}return T.current={rules:n},c().createElement("div",{ref:t,className:"ms-style-rules-editor"},c().createElement("div",{className:"ms-style-rules-editor-head"},c().createElement("div",{className:"ms-style-rules-editor-left"},i),c().createElement("div",{className:"ms-style-rules-editor-right"},c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[].concat(Of(Object.keys(d).map((function(e){var t=d[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return I({name:"",ruleId:xr()(),symbolizers:[Sf(Sf({},d[e].deaultProperties),{},{symbolizerId:xr()()})]})}}}))),Of(Object.keys(p).filter((function(e){return p[e].add})).map((function(e){var t=p[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return I(Sf({name:"",ruleId:xr()()},p[e].deaultProperties))}}}))))}))),c().createElement("ul",{className:"ms-style-rules-editor-body"},0===n.length&&c().createElement(xf,null),n.map((function(e,t){var r=e.name,o=e.symbolizers,i=void 0===o?[]:o,a=e.filter,l=e.scaleDenominator,s=void 0===l?{}:l,u=e.ruleId,f=e.kind,m=e.errorId,v=p[f]||{},O=v.params,I=v.glyph,R=v.hideInputLabel,N=v.hideFilter,M=v.hideScaleDenominator,L=v.classificationType;return c().createElement(gf,{key:u+(n.length>1?"_draggable":""),draggable:n.length>1,id:u,index:t,errorId:m,onSort:F,title:R?c().createElement(b.Z,{msgId:"styleeditor.rule".concat(f)}):c().createElement(g.FormGroup,{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},c().createElement(Cf,{value:r,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:function(e){return k({values:{name:e.target.value},ruleId:u},!0)}})),tools:c().createElement(c().Fragment,null,D(e,t)&&c().createElement(wl.Z,{glyph:"exclamation-mark",bsStyle:"warning",placement:"right",title:c().createElement(b.Z,{msgId:"styleeditor.warningTextOrderTitle"}),text:c().createElement(b.Z,{msgId:"styleeditor.warningTextOrder"})}),c().createElement(pp,{hide:N,value:a,attributes:w,onChange:function(e){return k({values:e,ruleId:u},!0)}}),c().createElement(Ep,{hide:M,value:s,scales:S,zoom:P,onChange:function(e){return k({values:e,ruleId:u},!0)}}),c().createElement(jf,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:function(){return function(e){var t=T.current.rules.filter((function(t){return t.ruleId!==e}));h(t)}(u)}},c().createElement(g.Glyphicon,{glyph:"trash"})))},"Classification"===f||"Raster"===f?c().createElement(Rp,vf({},e,{ruleBlock:p,symbolizerBlock:d,glyph:I,classificationType:L,params:O,methods:C,getColors:x,bands:E,attributes:w&&w.map((function(e){return Sf(Sf({},e),{},{disabled:"number"!==e.type})})),onUpdate:y,onChange:function(e){return k({values:e,ruleId:u},!0)},onReplace:A})):i.map((function(e){var t=e.kind,r=void 0===t?"":t,n=e.symbolizerId,o=hf(e,["kind","symbolizerId"]),i=d[r]||{},a=i.params,l=i.glyph;return a&&c().createElement(kp,{key:n,defaultExpanded:!0,draggable:!0,glyph:l,tools:c().createElement(Tp,{hide:"Icon"===r,symbolizerKind:r,ruleBlock:p,symbolizerBlock:d,ruleId:u,onSelect:A,graphic:o.graphicFill||o.graphicStroke,channelSelection:o.channelSelection})},c().createElement(ds,{properties:o,params:a,config:{bands:E,attributes:w,fonts:j},onChange:function(e){return k({values:e,ruleId:u,symbolizerId:n})}}))})))})),o&&c().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.4)",zIndex:10,transition:"0.3s all"}})))})),kf=df(),If=kf.symbolizerBlock,Af=kf.ruleBlock;Tf.propTypes={rules:u().array,loading:u().bool,toolbar:u().node,config:u().object,ruleBlock:u().object,symbolizerBlock:u().object,onUpdate:u().func,onChange:u().func},Tf.defaultProps={rules:[],config:{},ruleBlock:Af,symbolizerBlock:If,onUpdate:function(){},onChange:function(){}};const Ff=Tf;function Df(e){return function(e){if(Array.isArray(e))return Mf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Nf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||Nf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(e,t){if(e){if("string"==typeof e)return Mf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mf(e,t):void 0}}function Mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lf(Object(r),!0).forEach((function(t){Zf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bf="UPDATE_STYLE",Gf="UNDO_STYLE",zf="REDO_STYLE",Uf=Zf({},Bf,(function(e,t){return _f({},t)})),Wf=(0,Wt.ZP)((function(e,t){return(Uf[t.type]||Gl())(e,t.payload)}),{limit:20,undoType:Gf,redoType:zf,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Vf={};function qf(e){var t,r,n=e.code,o=e.format,i=e.layer,a=e.zoom,s=e.scales,u=e.geometryType,p=e.fonts,f=e.bands,d=e.attributes,m=e.onChange,y=e.onError,g=e.defaultStyleJSON,v=(e.config,e.loading),h=e.error,O=e.methods,w=e.getColors,E=e.styleUpdateTypes,S=e.debounceTime,P=df(),j=P.symbolizerBlock,C=P.ruleBlock,x=Rf((0,l.useState)(!1),2),T=x[0],k=x[1],I=Rf((0,l.useReducer)(Wf,{}),2),A=I[0],F=I[1],D=(null==A?void 0:A.present)||Vf,R=(0,l.useRef)();R.current={style:D};var N=(0,l.useRef)(!1);(0,l.useEffect)((function(){var e;N.current||((e=(0,Mi.getStyleParser)(o))&&n&&null===g?e.readStyle(n).then((function(e){F({type:Bf,payload:(0,pl.VM)(e)}),N.current=!0})).catch((function(e){return y(_f(_f({},e),{},{status:400}))})):e&&n&&g?(N.current=!0,F({type:Bf,payload:g})):n&&!e&&y({messageId:"styleeditor.formatNotSupported",status:400}))}),[n,o,g]);var M=function(e){if(k(!1),!e)return null;var t=_f(_f({},R.current.style),{},{rules:e});return F({type:Bf,payload:t})},L=(0,l.useRef)();(0,l.useEffect)((function(){return L.current=Ll()((function(e){var t,r=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400};var t=Zl()(e.map((function(e){return e.errorId})),(function(e){return e}));if(t)return{messageId:t,status:400};if(Zl()(e,(function(e){var t=e.kind,r=e.classification;return!("Classification"!==t&&"Raster"!==t||r&&0!==r.length)})))return{messageId:"styleeditor.incompleteClassification",status:400};var r,n,o,i=Zl()(e,(function(e){var t=e.symbolizers,r=void 0===t?[]:t;return Zl()(r,(function(e){var t=e.kind,r=e.image;return"Icon"===t&&(null==r?void 0:r.errorId)}))}));return i?{messageId:"styleeditor.".concat(null==i||null===(r=i.symbolizers)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.image)||void 0===o?void 0:o.errorId),status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);if(r)return y(r);var n=(0,Mi.getStyleParser)(e.format);return n?n.writeStyle((0,pl.Gg)(e.style)).then((function(t){m(t,e.style)})).catch((function(e){y(_f(_f({},e),{},{status:400}))})):null}),S),function(){L.current.cancel()}}),[]),(0,l.useEffect)((function(){L.current.cancel(),L.current({format:o,style:D})}),[JSON.stringify(D)]);var _=h&&(h.message||h.messageId&&c().createElement(b.Z,{msgId:h.messageId}));return c().createElement(Ff,{loading:T,toolbar:c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===(null==A||null===(t=A.past)||void 0===t?void 0:t.length),onClick:function(){return F({type:Gf})}},{disabled:0===(null==A||null===(r=A.future)||void 0===r?void 0:r.length),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return F({type:zf})}},{visible:!!h,Element:function(){return c().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},c().createElement(wl.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:c().createElement(b.Z,{msgId:"styleeditor.validationErrorTitle"}),text:c().createElement(c().Fragment,null,c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.genericValidationError"})),_?c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.validationError"}),":",_):c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))}},{visible:!(!v&&!T),Element:function(){return c().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},c().createElement(Ga.Z,{size:18}))}}]}),ruleBlock:C,symbolizerBlock:j,config:{geometryType:u,zoom:a,fonts:p,scales:s,bands:f,attributes:d,methods:O,getColors:w},rules:(null==D?void 0:D.rules)&&Df(D.rules).reverse(),onChange:function(e){return M(Df(e).reverse())},onUpdate:function(e){var t=e.values,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["values"]);k(!0),function(e){var t=e.values,r=e.properties,n=e.rules,o=e.layer,i=e.styleUpdateTypes,a=void 0===i?{}:i;return new Promise((function(e){var i=r.type&&a[r.type];return e(i?i({values:t,properties:r,rules:n,layer:o}):n.map((function(e){return e.ruleId===r.ruleId?_f(_f(_f({},e),t),{},{errorId:void 0}):e})))}))}({values:t,properties:r,layer:i,rules:R.current.style.rules,styleUpdateTypes:E}).then((function(e){return M(e)})).catch((function(){return M()}))}})}qf.propTypes={code:u().string,format:u().string,layer:u().object,zoom:u().number,scales:u().array,geometryType:u().string,fonts:u().array,bands:u().array,attributes:u().array,onChange:u().func,onError:u().func,defaultStyleJSON:u().object,config:u().object,loading:u().bool,error:u().object,methods:u().array,getColors:u().func,styleUpdateTypes:u().object,debounceTime:u().number},qf.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};const Hf=qf;var $f=r(84715),Kf=r(24198);const Yf=[{type:"color",active:function(e){return"atom"===e.type&&_p()(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,n=e.onChange,o=void 0===n?function(){}:n;return c().createElement(Kf.xS,{color:{hex:r||t.string},onChange:function(e){return o(e.hex)}})}}];function Xf(){return(Xf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Jf={classificationVector:gl.IW,classificationRaster:gl.DG,classification:gl.IW,"classification-raster":gl.DG};function ed(e,t){return e&&"raster"!==t&&Object.keys(e).filter((function(t){return-1!==["integer","long","double","float","bigdecimal","string","decimal"].indexOf(e[t].localPart.toLowerCase())})).map((function(t){var r=e[t].localPart;return{attribute:t,label:t,type:-1!==["integer","long","double","float","bigdecimal","decimal"].indexOf(r.toLowerCase())?"number":"string"}}))}var td=(0,p.connect)((0,D.P1)([ul.gB,ul.iB,ul.m2,ul.p,ul.aN,ul.Vf,ul.lC,X.up,X.Od,ul.Z0],(function(e,t,r,n,o,i,a,l,c,s){var u,p;return{code:e,mode:(0,pl.H$)(t),bands:dl()(r)&&"raster"===a&&r||[],attributes:ed(r,a),error:n.edit||null,loading:o,format:t,layer:i,geometryType:a,scales:l.map((function(e){return Math.round(e)})),zoom:c.zoom,fonts:s.fonts||[],methods:("raster"===a?null==s||null===(u=s.classificationMethods)||void 0===u?void 0:u.raster:null==s||null===(p=s.classificationMethods)||void 0===p?void 0:p.vector)||bl.Z.methods}})),{onError:zn.Fe.bind(null,"edit")})(Hf);td.defaultProps={getColors:bl.Z.getColors,styleUpdateTypes:Jf};var rd={visual:td,textarea:(0,p.connect)((0,D.P1)([ul.gB,ul.iB,ul.m2,ul.p,ul.aN],(function(e,t,r,n,o){return{code:e,mode:(0,pl.H$)(t),hintProperties:r,error:n.edit||null,loading:o}})))(Nl)};function nd(e){var t,r,n=e.code,o=e.error,i=e.canEdit,a=e.editorType,s=e.onUpdateMetadata,u=e.onChange,p=e.loading,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading"]),d=(t=(0,l.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Qf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qf(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],y=d[1],v={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!n&&!o)return c().createElement("div",{style:v},c().createElement(Ga.Z,{size:150}));if(!i)return c().createElement("div",{style:v},c().createElement("div",null,c().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(b.Z,{msgId:"styleeditor.noPermission"}))));if(404===(null==o?void 0:o.status))return c().createElement("div",{style:v},c().createElement("div",null,c().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(b.Z,{msgId:"styleeditor.styleNotFound"}))));var h=rd[a]||rd.textarea;return c().createElement(Fr.Z,{style:{position:"relative"},header:c().createElement("div",{className:"ms-style-editor-switch"},c().createElement(Dr.Z,{buttons:[{className:"square-button-md no-border",glyph:"code",active:"textarea"===a,disabled:p,tooltipId:"visual"===a?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return p?null:"visual"===a?s({editorType:"textarea"}):y(!0)}}]}))},h&&c().createElement(h,Xf({},f,{onChange:function(e,t){u(e),yl()(t)&&s({styleJSON:JSON.stringify(t)})}})),m&&c().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},c().createElement(g.Alert,{bsStyle:"warning",style:{textAlign:"center"}},c().createElement("p",{style:{padding:8}},c().createElement(b.Z,{msgId:"styleeditor.alertForceTranslate"})),c().createElement("p",null,c().createElement(Dr.Z,{buttons:[{text:c().createElement(b.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return y(!1)},style:{marginRight:4}},{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){s({editorType:"visual"}),y(!1)}}]})))))}nd.defaultProps={inlineWidgets:Yf};var od=(0,p.connect)((0,$f.y)(ul.gB,ul.p,ul.z_,(function(e){var t=(0,ul.WW)(e);return null==t?void 0:t.editorType}),(function(e){try{var t=(0,ul.WW)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}}),ul.aN,(function(e,t,r,n,o,i){return{code:e,error:t.edit||null,canEdit:r,editorType:n,defaultStyleJSON:o,loading:i}})),{onUpdateMetadata:zn.bB,onChange:zn.p2})(nd),id=(0,pl.YD)(),ad=(0,Ti.Z)((function(e){return!e.canEdit}),{glyph:"exclamation-mark",title:c().createElement(b.Z,{msgId:"styleeditor.noPermission"})}),ld=function(e){return(0,xi.Z)(e,{size:150,style:{margin:"auto"}},(function(e){return c().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},c().createElement(Ga.Z,e))}))},cd=(0,R.compose)((0,R.defaultProps)({templates:id}),(0,p.connect)((0,D.P1)([ul.Mc,ul.w_,ul.lC,ul.z_,ul.Z0,ul.aN],(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.formats,a=void 0===i?[]:i,l=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:a,loading:l}})),{onSelect:zn.FU,onClose:zn.cu.bind(null,!1),onSave:zn.wj}),ad,ld((function(e){return!e.geometryType})),(0,R.withState)("filterText","onFilter",""),(0,R.withState)("styleSettings","onUpdate",{}))((function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,o=void 0===n?{}:n,i=e.geometryType,a=void 0===i?"":i,l=e.templates,s=void 0===l?[]:l,u=e.filterText,p=e.availableFormats,f=void 0===p?["sld","css"]:p,d=e.formFields,v=void 0===d?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:c().createElement(b.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:c().createElement(b.Z,{msgId:"styleeditor.abstractSettings"})}]:d,h=e.onFilter,O=void 0===h?function(){}:h,w=e.onSelect,E=void 0===w?function(){}:w,S=e.onClose,P=void 0===S?function(){}:S,j=e.onSave,C=void 0===j?function(){}:j,x=e.onUpdate,T=void 0===x?function(){}:x,k=e.loading;return c().createElement(Fr.Z,{header:c().createElement("div",null,c().createElement(il,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:u,onFilter:O}),c().createElement("div",{className:"text-center"},c().createElement("small",null,k?c().createElement(Ga.Z,{size:15,style:{display:"inline-block"}}):c().createElement(b.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},c().createElement(ll,{colProps:{},cardComponent:tl,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;E({code:t,templateId:r,format:n||"css"}),T(nl(nl({},o),{},{title:(0,ue.head)(s.filter((function(e){return e.styleId===r})).map((function(e){return e.title})))}))},items:s.filter((function(e){var t=e.title;return!u||u&&-1!==t.indexOf(u)})).filter((function(e){var t=e.types,r=e.format;return!t||(0,ue.head)(t.filter((function(e){return e===a})))&&-1!==f.indexOf(r)})).map((function(e){var r;return nl(nl({},e),{},{preview:null!=e&&null!==(r=e.preview)&&void 0!==r&&r.config?c().createElement(Ha,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:k})}))}),c().createElement(m.Z,null,c().createElement(y.Z,{show:!!r,fitContent:!0,title:c().createElement(b.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return P()},buttons:[{text:c().createElement(b.Z,{msgId:"save"}),bsStyle:"primary",disabled:!cl(o),onClick:function(){return C(o)}}]},c().createElement(g.Form,null,c().createElement(g.FormGroup,{controlId:"styleTitle",validationState:!cl(o)&&"error"},v.map((function(e){var t=e.title,r=e.placeholder,n=e.key;return c().createElement("span",{key:n},c().createElement(g.ControlLabel,null,t),c().createElement(al,{type:"text",defaultValue:o[n],placeholder:r,onChange:function(e){return T(nl(nl({},o),{},ol({},n,e.target.value)))}}))}))),!cl(o)&&c().createElement(g.Alert,{style:{margin:0},bsStyle:"danger"},c().createElement(el.Z,{msgId:"styleeditor.titleRequired"}))))))})),sd=(0,R.compose)((0,p.connect)((0,D.P1)([ul.ex,ul.ov],(function(e,t){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles}})),{onSelect:h.Xy}),(0,R.withState)("filterText","onFilter",""),(0,Ba.Z)((function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r}),(function(){return c().createElement(cd,null)}),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))((function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,n=e.defaultStyle,o=e.availableStyles,i=void 0===o?[]:o,a=e.onSelect,l=e.formatColors,s=void 0===l?{sld:"#33ffaa",css:"#ffaa33"}:l,u=e.filterText,p=e.onFilter,f=void 0===p?function(){}:p;return c().createElement(Fr.Z,{className:"ms-style-editor-list",header:c().createElement(Xa,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:u,onFilter:f})},c().createElement(Ja,{size:"sm",onItemClick:function(e){var t=e.name;return a({style:n===t?"":t},!0)},items:i.filter((function(e){var t,r,n=e.name,o=void 0===n?"":n,i=e.title,a=void 0===i?"":i,l=e._abstract,c=void 0===l?"":l,s=e.metadata,p=void 0===s?{}:s;return!u||u&&(-1!==o.indexOf(u)||-1!==(null==p||null===(t=p.title)||void 0===t?void 0:t.indexOf(u))||-1!==(null==p||null===(r=p.description)||void 0===r?void 0:r.indexOf(u))||-1!==a.indexOf(u)||-1!==c.indexOf(u))})).map((function(e){var o,i,a;return Ka(Ka({},e),{},{title:(null==e||null===(o=e.metadata)||void 0===o?void 0:o.title)||e.label||e.title||e.name,description:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.description)||e._abstract,selected:r===e.name,preview:e.format&&c().createElement(Ha,{backgroundColor:"#333333",texts:[{text:(a=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[a]||a||"").toUpperCase(),fill:s[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||c().createElement(Qa,{glyph:"geoserver"}),tools:t&&n===e.name?c().createElement(Qa,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})}))}))})),ud=(0,R.compose)((0,R.withState)("showModal","onShowModal"),(0,p.connect)((0,D.P1)([ul.ex,ul.Mc,ul.p,ul.QW,ul.gB,ul.aN,ul.i7,ul.z_,ul.ov,ul.Z0,ul.Ed],(function(e,t,r,n,o,i,a,l,c){var s=c.defaultStyle,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},p=u.formats,f=void 0===p?["sld"]:p,d=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:i,layerDefaultStyleName:s,selectedStyle:s===a?"":a,editEnabled:l,disableCodeEditing:-1===f.indexOf(d)}})),{onSelectStyle:zn.Nf.bind(null,"template"),onEditStyle:zn.Nf.bind(null,"edit"),onBack:zn.Nf.bind(null,""),onReset:Za.B1.bind(null,pl.s1,[{}]),onAdd:zn.cu.bind(null,!0),onUpdate:zn.Lc,onDelete:zn.WQ,onSetDefault:zn.WB}))((function(e){var t,r=e.status,n=e.buttons,o=void 0===n?[]:n,i=e.templateId,a=e.error,l=e.isCodeChanged,s=e.showModal,u=e.onShowModal,p=e.loading,f=e.selectedStyle,d=e.layerDefaultStyleName,v=e.editEnabled,h=e.enableSetDefaultStyle,O=e.defaultStyles,w=void 0===O?["generic","point","line","polygon","raster"]:O,E=e.onBack,S=void 0===E?function(){}:E,P=e.onAdd,j=void 0===P?function(){}:P,C=e.onReset,x=void 0===C?function(){}:C,T=e.onDelete,k=void 0===T?function(){}:T,I=e.onSelectStyle,A=void 0===I?function(){}:I,F=e.onEditStyle,D=void 0===F?function(){}:F,R=e.onUpdate,N=void 0===R?function(){}:R,M=e.onSetDefault,L=void 0===M?function(){}:M,_=e.disableCodeEditing;return c().createElement("div",null,c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!r,tooltipId:"styleeditor.backToList",disabled:!!p,onClick:function(){"edit"===r&&l?u({title:c().createElement(b.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:c().createElement(g.Alert,{bsStyle:"warning",style:{margin:0}},c().createElement(b.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:c().createElement(b.Z,{msgId:"close"}),bsStyle:"primary",onClick:function(){u(null),S(),x()}}]}):(S(),x())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(r||!v),disabled:!!p,onClick:function(){return A()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(r||!v),disabled:!!p||-1!==w.indexOf(f)||!f&&-1!==w.indexOf(d)||_,onClick:function(){return D()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(a&&a.edit&&a.edit.status)||!!p||-1!==w.indexOf(f),visible:!("edit"!==r||!v),onClick:function(){return N()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==r||!i||!v),disabled:!!p,onClick:function(){return j()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!p||-1!==w.indexOf(f)||!f,visible:!(r||!v),onClick:function(){u({title:c().createElement(b.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:c().createElement(g.Alert,{bsStyle:"warning",style:{margin:0}},c().createElement(b.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:c().createElement(b.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){u(null),k(f)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!p||-1!==w.indexOf(f)||!f,visible:!(!h||r||!v),onClick:function(){return L()}}].concat((t=r?[]:o,function(e){if(Array.isArray(e))return sl(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return sl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sl(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),c().createElement(m.Z,null,c().createElement(y.Z,{show:s,fitContent:!0,title:s&&s.title,onClose:function(){return u(null)},buttons:s&&s.buttons},s&&s.message)))})),pd=(0,R.compose)((0,p.connect)((0,D.P1)([ul.Vf],(function(e){return{layer:e}})),{onInit:W.k}),(0,R.lifecycle)({UNSAFE_componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),ld((function(e){var t=e.layer,r=void 0===t?{}:t;return r&&r.capabilitiesLoading})))((function(){return c().createElement(Fr.Z,{className:"ms-style-editor-container",footer:c().createElement("div",{style:{height:25}})},c().createElement(sd,{readOnly:!0}))})),fd=(0,R.branch)((function(e){return e.readOnly}),(function(){return pd}))(sd),dd=r(76424);function md(){return(md=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const yd=function(e){var t=e.activePanel,r=e.fillContainer,n=e.className,o=e.onSelect,i=e.panels,a=void 0===i?[]:i,l=r?"ms-fill-container ":"";return c().createElement(g.Accordion,{activeKey:t,className:"ms-accordion "+l+n},a.map((function(e,r){return c().createElement(g.Panel,{key:r,eventKey:e.id,className:t===e.id&&"HIDDEN"!==e.id?"ms-selected":"",header:e.head&&c().createElement("a",{role:"tab"},c().createElement(dd.Z,md({},e.head,{selected:t===e.id,onClick:function(){o(e.id)}})))||null,collapsible:!0},e.body)})))};function bd(e){return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gd(Object(r),!0).forEach((function(t){Cd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hd(){return(hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Od(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ed(e,t){return(Ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sd(e,t){return!t||"object"!==bd(t)&&"function"!=typeof t?Pd(e):t}function Pd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jd(e){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ed(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jd(n);if(o){var r=jd(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Sd(this,e)});function a(){var e;Od(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cd(Pd(e=i.call.apply(i,[this].concat(r))),"getInfoFormat",(function(t){return Object.keys(t).map((function(t){var r=e.props.formatCards[t]&&e.props.formatCards[t].body;return{id:t,head:{preview:c().createElement(g.Glyphicon,{glyph:e.props.formatCards[t]&&e.props.formatCards[t].glyph||"ext-empty"}),title:e.props.formatCards[t]&&e.props.formatCards[t].titleId&&c().createElement(b.Z,{msgId:e.props.formatCards[t].titleId})||"",description:e.props.formatCards[t]&&e.props.formatCards[t].descId&&c().createElement(b.Z,{msgId:e.props.formatCards[t].descId})||"",size:"sm"},body:r&&c().createElement(r,hd({template:e.props.element.featureInfo&&e.props.element.featureInfo.template||""},e.props))||null}}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.getInfoFormat(this.props.defaultInfoFormat);return c().createElement("span",null,c().createElement(yd,{fillContainer:!0,activePanel:this.props.element.featureInfo&&this.props.element.featureInfo.format,panels:t,onSelect:function(t){var r=e.props.element.featureInfo&&e.props.element.featureInfo.format&&t===e.props.element.featureInfo.format;e.props.onChange("featureInfo",vd(vd({},e.props.element&&e.props.element.featureInfo||{}),{},{format:r?"":t,viewer:e.props.element.featureInfo?e.props.element.featureInfo.viewer:void 0}))}}))}}])&&wd(t.prototype,r),a}(c().Component);function Td(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(r),!0).forEach((function(t){Id(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Td(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Id(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fd(){return(Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dd(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}Cd(xd,"propTypes",{element:u().object,defaultInfoFormat:u().object,onChange:u().func,formatCards:u().object}),Cd(xd,"defaultProps",{element:{},defaultInfoFormat:[],onChange:function(){},formatCards:{}});var Rd={html:Ei(),json:JSON.parse(Pi()),text:Ci()},Nd=(0,R.defaultProps)({readOnly:!0})(fd),Md=(0,p.connect)((0,D.P1)([X.Od],(function(e){return{zoom:e.zoom,projection:e.projection}})))(ro.Z),Ld=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,r=void 0===t?{}:t;return"layers"===r.nodeType},_d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?{}:t;return"wfs"===r.type||"vector"===r.type&&"annotations"!==r.id},Zd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?{}:t;return"wms"===r.type},Bd=function(e){return Ld(e)&&(Zd(e)||_d(e))},Gd={HIDDEN:{titleId:"layerProperties.hideFormatTitle",descId:"layerProperties.hideFormatDescription",glyph:"hide-marker"},TEXT:{titleId:"layerProperties.textFormatTitle",descId:"layerProperties.textFormatDescription",glyph:"ext-txt",body:function(){return c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"layerProperties.exampleOfResponse"})),c().createElement("br",null),c().createElement(Xn.Z,{response:Rd.text}))}},HTML:{titleId:"layerProperties.htmlFormatTitle",descId:"layerProperties.htmlFormatDescription",glyph:"ext-html",body:function(){return c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"layerProperties.exampleOfResponse"})),c().createElement("br",null),c().createElement(Yn.Z,{response:Rd.html}))}},PROPERTIES:{titleId:"layerProperties.propertiesFormatTitle",descId:"layerProperties.propertiesFormatDescription",glyph:"ext-json",body:function(){return c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"layerProperties.exampleOfResponse"})),c().createElement("br",null),c().createElement(Qn.Z,{response:Rd.json}))}},TEMPLATE:{titleId:"layerProperties.templateFormatTitle",descId:"layerProperties.templateFormatDescription",glyph:"ext-empty",body:function(e){var t=e.template,r=void 0===t?"":t,n=Dd(e,["template"]);return c().createElement("div",null,c().createElement("div",null,r&&"<p><br></p>"!==r?c().createElement(b.Z,{msgId:"layerProperties.templatePreview"}):null),c().createElement("br",null),c().createElement("div",null,r&&"<p><br></p>"!==r?c().createElement(Jn.Z,{html:r}):c().createElement("span",null,c().createElement("p",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}})),c().createElement("pre",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlertExample",msgParams:{properties:"{ properties.id }"}})),c().createElement("p",null,c().createElement("small",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlert1"})),"(",c().createElement(g.Glyphicon,{glyph:"pencil"}),")")),c().createElement(hi,Fd({template:r},n))))}}},zd=(0,R.defaultProps)({formatCards:Gd,defaultInfoFormat:Object.assign({HIDDEN:"text/html"},(0,eo.eq)())})(xd),Ud={},Wd=function(e,t,r){if(e){var n=Ud[e.name];return n||(n=(0,O.KB)(e,t,r))&&n.loaded&&(Ud[e.name]=n),n}return e},Vd=function(e){var t=e.settings,r=e.items,n=void 0===r?[]:r,o=e.loadedPlugins,i=e.onToggleStyleEditor,a=void 0===i?function(){}:i,l=e.onUpdateParams,s=void 0===l?function(){}:l,u=e.element,p=Dd(e,["settings","items","loadedPlugins","onToggleStyleEditor","onUpdateParams","element"]);if(_d({element:u}))return{Component:_a};var f,d=(0,ue.sortBy)((0,ue.filter)((f=n,function(e){if(Array.isArray(e))return Ad(e)}(f)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(f)||function(e,t){if(e){if("string"==typeof e)return Ad(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ad(e,t):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),{target:"style"}),["priority"]).filter((function(e){var t=e.selector;return!t||t(kd(kd({},p),{},{element:u}))})),m=(0,ue.head)((0,ue.filter)(d,{name:"ThematicLayer"}));if(m){var y=t&&t.options&&t.options.thematic,b=[{glyph:"list",tooltipId:"toc.thematic.classify",visible:p.isAdmin&&!y||!1,onClick:function(){return s({thematic:{unconfigured:!0}})}},{glyph:"trash",tooltipId:"toc.thematic.remove_thematic",visible:p.isAdmin&&y||!1,onClick:function(){return s({thematic:null})}}];return y?{Component:"style"===p.activeTab&&m.plugin&&Wd(m,o,c().createElement(Oi.Z,{width:100,height:100})),toolbar:b}:{toolbar:b}}var g=(0,ue.head)(d);if(g&&g.plugin){var v=g.cfg||g.plugin.cfg;return{onClose:function(){return a(null,!1)},Component:Wd(kd(kd({},g),{},{cfg:kd(kd({},v||{}),{},{active:!0})}),o,c().createElement(Oi.Z,{width:100,height:100})),toolbarComponent:g.ToolbarComponent&&(v&&(0,R.defaultProps)(v)(g.ToolbarComponent)||g.ToolbarComponent)}}return{}};const qd=function(e){var t=e.showFeatureInfoTab,r=void 0===t||t,n=e.loadedPlugins,o=e.items,i=e.onToggleStyleEditor,a=Dd(e,["showFeatureInfoTab","loadedPlugins","items","onToggleStyleEditor"]);return[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:to.Z},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:Ld(a),Component:Md},kd({id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:Bd(a),Component:Nd},Vd(kd({items:o,loadedPlugins:n,onToggleStyleEditor:i},a))),{id:"feature",titleId:"layerProperties.featureInfo",tooltipId:"layerProperties.featureInfo",glyph:"map-marker",visible:r&&Ld(a)&&Zd(a)&&!(a.element.featureInfo&&a.element.featureInfo.viewer),Component:zd,toolbar:[{glyph:"pencil",tooltipId:"layerProperties.editCustomFormat",visible:!a.showEditor&&a.element&&a.element.featureInfo&&"TEMPLATE"===a.element.featureInfo.format||!1,onClick:function(){return a.onShowEditor&&a.onShowEditor(!a.showEditor)}}]},{id:"elevation",titleId:"layerProperties.elevation",tooltipId:"layerProperties.elevation",glyph:"1-vector",visible:Ld(a)&&Zd(a)&&a.element.dimensions&&a.getDimension&&a.getDimension(a.element.dimensions,"elevation"),Component:Lo}].filter((function(e){return e.visible}))};var Hd=(0,D.P1)([H.jN,H.l2,H.Bt,Q.Pz,Q.KV,function(e){return(0,ze.ic)(e,{height:!0})},te.qg,J.Gd,J.tL,J.R4,H.Ci,re.wk],(function(e,t,r,n,o,i,a,l,c,s,u,p){return{settings:e,element:u,groups:r,currentLocale:n,currentLocaleLanguage:o,dockStyle:i,isAdmin:a,initialSettings:l,originalSettings:c,activeTab:s,isLocalizedLayerStylesEnabled:p}})),$d=(0,R.compose)((0,p.connect)(Hd,{onHideSettings:h.sF,onUpdateSettings:h.VP,onUpdateNode:h.tV,onRetrieveLayerData:W.k,onUpdateOriginalSettings:v.Xg.bind(null,"layersettings","originalSettings"),onUpdateInitialSettings:v.Xg.bind(null,"layersettings","initialSettings"),onSetTab:v.Xg.bind(null,"layersettings","activeTab"),onUpdateParams:h.Xy,onToggleStyleEditor:zn.Wv}),Un.bR,(0,R.defaultProps)({getDimension:ne.getDimension,enableLayerNameEditFeedback:!0}),(0,R.getContext)({loadedPlugins:u().object}),(0,R.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,r=void 0===t?[]:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.items;return r!==o}),(function(e){return{tabs:qd(e)}})))(Kn);const Kd=(0,O.rx)("TOCItemsSettings",{component:$d,containers:{TOC:{doNotHide:!0,name:"TOCItemsSettings"}}});var Yd=r(25958);function Xd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qd=function e(t){var r=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var i=(0,ue.castArray)(t),a=o;return i.length>1&&"__OR__"===i[0]&&(a=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if((0,ue.isArray)(i))return e({accessInfo:r,postProcessValue:n,reduceFun:o})(i);var a=!1;i&&(0,ue.isString)(i)&&i.startsWith("!")&&(a=!0,i=i.substr(1));var l=function(e){return a?!e:e},c=(0,ue.isString)(i)&&i.split(":");if(c&&c[0]){var s=c[0].split(/\!\=\=?/),u=c[0].split(/\=\=?\=?/);return s.length>1?l(n((0,ue.get)(r,s[0]),i)!==s[1]):u.length>1?l(n((0,ue.get)(r,u[0]),i)===u[1]):l(n((0,ue.get)(r,c[0]),i))}return i})).reduce(a||function(e,t){return e&&t})}};const Jd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.asObject,n=void 0!==r&&r,o=t.postProcessValue,i=void 0===o?function(e){return e}:o,a=t.reduceFun,l=t.accessInfo,c=void 0===l?"accessInfo":l;return(0,R.withPropsOnChange)([e,c],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xd({},e,n?(0,ue.mapValues)(t[e],Qd({accessInfo:t[c],postProcessValue:i,reduceFun:a})):Qd({accessInfo:t[c],postProcessValue:i,reduceFun:a})(t[e]))}))},em=function(){return(0,R.compose)((0,p.connect)((0,D.P1)(X.J9,X._H,te.np,(function(e,t,r){return{accessInfo:{mapId:e,mapInfo:t,user:r}}}))),Jd.apply(void 0,arguments))},tm=(0,p.connect)((0,D.P1)(ze.Jz,ze.VM,me.c0,(function(e,t,r){return{enabled:!e&&!t&&!r}})));var rm=r(75382),nm=r(38482);function om(){return(om=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var im=r(69968);function am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?am(Object(r),!0).forEach((function(t){cm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):am(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sm=function(e){return(0,ue.get)((0,ue.head)(e,(function(e){return e.color})),"color")};const um=(0,R.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&sm(t)?lm(lm({},o),{},{borderTop:"3px solid ".concat(sm(t))}):o}}));function pm(){return(pm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fm(Object(r),!0).forEach((function(t){mm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ym(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r(2903);var bm=(0,R.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),im.WidthProvider)(im.Responsive),gm=um(r(43716).Z),vm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return(0,ue.find)(e.widgets,(function(e){return e===t.id}))}))};const hm=(0,R.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,o=void 0===n?"":n,i=e.toolsOptions,a=void 0===i?{}:i,l=e.rowHeight,s=void 0===l?208:l,u=e.breakpoints,p=void 0===u?{lg:1200,md:996,sm:768,xs:480,xxs:0}:u,f=e.cols,d=void 0===f?{lg:6,md:6,sm:4,xs:2,xxs:1}:f,m=e.widgets,y=void 0===m?[]:m,b=e.layouts,g=e.dependencies,v=e.verticalCompact,h=void 0!==v&&v,O=e.compactMode,w=e.useDefaultWidthProvider,E=void 0===w||w,S=e.measureBeforeMount,P=e.width,j=e.showGroupColor,C=e.groups,x=void 0===C?[]:C,T=e.canEdit,k=void 0===T||T,I=e.getWidgetClass,A=void 0===I?function(){}:I,F=e.onWidgetClick,D=void 0===F?function(){}:F,R=e.updateWidgetProperty,N=void 0===R?function(){}:R,M=e.deleteWidget,L=void 0===M?function(){}:M,_=e.toggleCollapse,Z=void 0===_?function(){}:_,B=e.toggleMaximize,G=void 0===B?function(){}:B,z=e.editWidget,U=void 0===z?function(){}:z,W=e.onLayoutChange,V=void 0===W?function(){}:W,q=e.language,H=e.env,$=ym(e,["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"]),K=y.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),Y=function(e){return"table"===e.widgetType&&K.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return c().createElement(bm,{key:t||"widgets-view",useDefaultWidthProvider:E,measureBeforeMount:S,width:E?void 0:P,isResizable:k,isDraggable:k,draggableHandle:".draggableHandle",onLayoutChange:V,preventCollision:!0,style:r,className:"widget-container ".concat(o," ").concat(k?"":"no-drag"),rowHeight:s,autoSize:!0,verticalCompact:h,compactMode:O,breakpoints:p,cols:d,layouts:b?JSON.parse(JSON.stringify((0,ue.mapValues)(b,(function(e){return e.map((function(e){var t=(0,ue.find)(y,{id:e.i});return t?dm(dm({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},y.map((function(e){return c().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return D(e)},className:A(e)},c().createElement(gm,pm({"data-grid":e.dataGrid},$,e,{quickFilters:Y(e)?e.quickFilters:void 0,toolsOptions:a,groups:vm(x,e),showGroupColor:j,dependencies:g,enableColumnFilters:Y(e),canEdit:k,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return N.apply(void 0,[e.id].concat(r))},toggleCollapse:function(){return Z(e)},toggleMaximize:function(){return G(e)},onDelete:function(){return L(e)},onEdit:function(){return U(e)},language:q,env:H})))})))}));function Om(e){return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Em(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sm(e,t){return(Sm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pm(e,t){return!t||"object"!==Om(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jm(e){return(jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(r),!0).forEach((function(t){Tm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var km,Im=(0,R.compose)((0,p.connect)((0,D.P1)(X.J9,Yd.E5,Yd.p,Yd.Jb,Yd.h9,(function(e,t,r,n,o){return{id:e,widgets:t,layouts:r,maximized:n,dependencies:o}})),{editWidget:pe.uT,updateWidgetProperty:pe.Ij,exportCSV:pe.sD,toggleCollapse:pe.f,toggleMaximize:pe.Pt,exportImage:pe.Rb,deleteWidget:pe.E9,onLayoutChange:pe.c_}),(0,R.compose)((km={debounceTime:20,closest:!0,querySelector:".fill"},(0,R.compose)((0,R.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,nm.Z)(km))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,R.compose)((0,R.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return c().createElement(rm.Z,{handleWidth:!0},(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return c().createElement(e,om({width:n},t))}))}}))}({overrideWidthProvider:!1}),(0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.maximized,o=r-120,i=4,a=Math.floor(o/i-20),l=null!=n&&n.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},c=null!=n&&n.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{},s=t&&t>800?t-570:t-70,u=t?{width:s-1}:{};return xm(xm({rowHeight:a,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1}},u),{},{useDefaultWidthProvider:!1,style:xm({left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((r-100)/(a+10))*(a+10),width:s+"px",position:"absolute",zIndex:50},l)},c)}))),(0,R.compose)((0,R.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),em("toolsOptions",{asObject:!0}),(0,R.compose)((0,p.connect)((0,D.P1)(Yd.Xu,(function(e){return{tray:e}}))),(0,R.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,r=e.tray;return{toolsOptions:t?xm(xm({},t),{},{showCollapse:t.showCollapse&&r}):t}}))),(0,R.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.toolsOptions,o=void 0===n?{}:n;return{widgets:r.filter((function(e){return!e.hide||o.seeHidden}))}}))))(hm),Am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sm(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jm(n);if(o){var r=jm(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pm(this,e)});function a(){return wm(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return this.props.enabled?c().createElement(Im,this.props):null}}])&&Em(t.prototype,r),a}(c().Component);Tm(Am,"propTypes",{enabled:u().bool}),Tm(Am,"defaultProps",{enabled:!0});var Fm=tm(Am);const Dm=(0,O.rx)("WidgetsPlugin",{component:Fm,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:r(75859).Z},epics:r(88395).ZP});var Rm=r(33528),Nm=r(4206),Mm=r(7878),Lm=r(75982),_m=r(95797),Zm=r(24260);function Bm(e){return function(e){if(Array.isArray(e))return Gm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gm(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Um(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zm(Object(r),!0).forEach((function(t){Wm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vm=function(e){var t=(0,Yd.GW)(e);return[t.search&&t.search.url,t.name]};const qm={openWidgetEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(pe.AE,pe.dm,pe.IT).filter((function(){return(0,J.PJ)(n())})).switchMap((function(){return Ai.Observable.of((0,v.Xg)("widgetBuilder","enabled",!0),(0,v.Xg)("metadataexplorer","enabled",!1))}))},closeWidgetEditorOnFinish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(pe.Jm,h.oE).filter((function(){return(0,J.PJ)(n())})).switchMap((function(){return Ai.Observable.of((0,v.Xg)("widgetBuilder","enabled",!1))}))},initEditorOnNew:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(pe.AE).filter((function(){return(0,J.PJ)(n())})).switchMap((function(e){return Ai.Observable.of((0,pe.bS)(Um(Um({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},initEditorOnNewChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(pe.IT).filter((function(){return(0,J.PJ)(n())})).switchMap((function(e){return Ai.Observable.of((0,Rm.YV)(),(0,pe.bS)(Um(Um({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0,widgetType:"chart",filter:(0,Zm.X1)(n())},e),{},{type:void 0}),{step:0}),(0,pe.Rz)("returnToFeatureGrid",!0))}))},handleWidgetsFilterPanel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(pe.lG).filter((function(){return(0,J.PJ)(n())})).switchMap((function(){return Ai.Observable.of(_m.gT.apply(void 0,Bm(Vm(n()))),(0,Mm.F)((0,Yd.um)(n())),(0,v.Xg)("widgetBuilder","enabled",!1),(0,v.Xg)("queryPanel","enabled",!0)).concat(Ai.Observable.race(e.ofType(Mm.Wm).take(1),e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).take(1)).switchMap((function(e){return(e.filterObj?Ai.Observable.of((0,pe.Rz)("filter",e.filterObj)):Ai.Observable.empty()).merge(Ai.Observable.of((0,v.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(Lm.nk,pe.dm).merge(e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"widgetBuilder"===t&&0==!r})))).concat(Ai.Observable.of((0,Nm.bp)(),(0,v.Xg)("queryPanel","enabled",!1)))}))}};var Hm=r(16919);const $m=(0,R.compose)((0,p.connect)((function(e){return{returnToFeatureGrid:(0,Yd.Wo)(e)}}),{backToWidgetList:function(){return(0,pe.Rz)("widgetType",void 0)},closeWidgetBuilder:function(){return(0,v.Xg)("widgetBuilder","enabled",!1,!1)},openFeatureGridTable:function(){return(0,Rm.t9)()}}),(0,R.withHandlers)({backFromWizard:function(e){var t=e.backToWidgetList,r=void 0===t?function(){}:t,n=e.closeWidgetBuilder,o=void 0===n?function(){}:n,i=e.openFeatureGridTable,a=void 0===i?function(){}:i,l=e.returnToFeatureGrid;return function(){l?(o(),a()):r()}}}),(0,R.withProps)((function(e){var t=e.returnToFeatureGrid,r=e.backFromWizard;return{exitButton:{onClick:void 0===r?function(){}:r,glyph:"arrow-left",tooltipId:t?"widgets.builder.wizard.backToFeatureGrid":"widgets.builder.wizard.backToWidgetTypeSelection"}}})));var Km=r(73849),Ym=r(86850),Xm=r(75875),Qm=r.n(Xm),Jm=r(10284),ey=r(99767),ty=function(e,t){return Ai.Observable.defer((function(){return Qm().get((0,ey.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(Jm.oB)};function ry(e){return ty(e.url,"gs:Aggregate")}var ny=r(78889);function oy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||ay(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iy(e){return function(e){if(Array.isArray(e))return ly(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ay(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ay(e,t){if(e){if("string"==typeof e)return ly(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ly(e,t):void 0}}function ly(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cy="ALL";const sy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsWPS;return(0,R.compose)((0,R.defaultProps)({dataStreamFactory:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.onEditorChange,o=void 0===n?function(){}:n,i=r.onConfigurationError,a=void 0===i?function(){}:i;return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return r.name===o.name})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return Ai.Observable.forkJoin.apply(Ai.Observable,[(0,Ym.v$)({layer:r})].concat(iy(t?[ry(r)]:[ry(r).catch((function(){return Ai.Observable.of(!1)}))]))).do((function(e){var t=oy(e,1)[0],r=(0,ue.get)((0,ny.findGeometryProperty)(t.data||{}),"name");r&&o("geomProp",r)})).map((function(e){var t=oy(e,2),r=t[0];return{hasAggregateProcess:!!t[1],loading:!1,types:cy,featureTypeProperties:(0,ue.get)(r,"data.featureTypes[0].properties")||[]}}))})).catch((function(e){return a(e),Ai.Observable.of({errorObj:e,loading:!1,featureTypeProperties:[]})})).startWith({loading:!0})}}),Km.Z,(0,xi.Z)(),(0,Ti.Z)((function(e){var t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.types,o=void 0===n?[]:n;return 0===r.length||0===o.length}),(function(){return{title:c().createElement(Wu.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),description:c().createElement(Wu.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}})))},uy=(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("options",void 0),r("widgetType",void 0)}}]}}));var py=r(80833),fy=r(76712);function dy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function my(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dy(Object(r),!0).forEach((function(t){yy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const by=(0,R.compose)((0,R.withState)("selected","setSelected",null),(0,R.withState)("layer","setLayer",null),(0,R.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected,r=e.layerValidationStream,n=void 0===r?function(e){return e}:r,o=e.setLayer,i=void 0===o?function(){}:o;return Ai.Observable.of((0,fy.ll)(t)).let(n).switchMap((function(){return(0,py.HI)((0,fy.ll)(t))})).do((function(e){return i(e)})).mapTo({canProceed:!0}).catch((function(e){return Ai.Observable.of({error:e,canProceed:!1})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.error,n=arguments.length>1?arguments[1]:void 0;return my({error:r,canProceed:t},n)}))}))),gy=(0,p.connect)((function(){return{}}),{onLayerChoice:function(e){return(0,pe.Rz)("layer",e)},onResetChange:pe.Rz}),vy=(0,R.compose)((0,R.setDisplayName)("ChartLayerSelector"),gy,(0,R.defaultProps)({layerValidationStream:function(e){return e.switchMap((function(e){return function(e){return Ai.Observable.forkJoin((0,Ym.v$)({layer:e}))}(e)}))}}),uy,by),hy=function(e){return(0,R.withHandlers)({toggleConnection:function(t){var r=t.toggleConnection,n=void 0===r?function(){}:r,o=t.editorData,i=void 0===o?{}:o;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(!i.mapSync,t,{dependenciesMap:i.dependenciesMap,mappings:e,sourceWidgetType:i.widgetType})}}})};var Oy=function(e,t,r){return"table"===t&&0===e.filter((function(e){return Object.keys(e).filter((function(t){return e[t]&&-1!==e[t].indexOf(r.id)})).length>0})).length};const wy=(0,R.compose)((0,R.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.widgets,o=(void 0===n?[]:n).filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap}));return{canConnect:r.geomProp&&"table"!==r.widgetType||Oy(o,r.widgetType,r),connected:r.mapSync}})),hy({viewport:"viewport",layers:"layers",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),Ey=(0,R.compose)((0,p.connect)((0,D.P1)(Yd.xI,(function(e){return{widgetSelectionActive:e}}))),(0,Ba.Z)((function(e){return e.widgetSelectionActive}),(function(){return c().createElement("div",{style:{margin:"auto"}},c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}));function Sy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Py(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sy(Object(r),!0).forEach((function(t){jy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cy(e){return function(e){if(Array.isArray(e))return xy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ty(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const ky=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return 0===e.step},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,R.withProps)((function(r){var n=r.stepButtons,o=void 0===n?[]:n,i=r.exitButton,a=Ty(r,["stepButtons","exitButton"]);return{stepButtons:[Py(Py({},i),{},{visible:e(Py({stepButtons:o,exitButton:i},a))},t)].concat(Cy(o))}}))};function Iy(e){return function(e){if(Array.isArray(e))return Ay(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ay(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ay(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fy(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Dy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return(0,R.compose)((0,R.withProps)((function(t){var r=t.disableMultiDependencySupport,n=t.stepButtons,o=void 0===n?[]:n,i=t.toggleConnection,a=void 0===i?function(){}:i,l=t.availableDependencies,c=void 0===l?[]:l,s=t.canConnect,u=t.connected,p=Fy(t,["disableMultiDependencySupport","stepButtons","toggleConnection","availableDependencies","canConnect","connected"]);return{stepButtons:[].concat(Iy(o),[{onClick:function(){return a(c)},disabled:r,visible:!!e(p)&&!!s&&c.length>0,bsStyle:u?"success":"primary",glyph:u?"plug":"unplug",tooltipId:u?"widgets.builder.wizard.clearConnection":1===c.length?"widgets.builder.wizard.connectToTheMap":"widgets.builder.wizard.connectToAMap"}])}})))};var Ry=r(67306);function Ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function My(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ny(Object(r),!0).forEach((function(t){Ly(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ny(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ly(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return My(My(My(My({},r),e),t),{},{step:e&&e.settings&&e.settings.step,valid:e&&e.settings&&e.settings.valid,onFinish:function(){return t.insertWidget&&t.insertWidget(My({layer:e.layer,url:e.layer&&e.layer.url},e.editorData||{}),r.target)}})},Zy=(0,D.P1)(Yd.GW,Yd.YI,Yd.E2,Yd.zm,Ry.i$,(function(e,t,r,n,o){return{layer:t&&t.layer||e,editorData:t,settings:r,widgets:n,dashBoardEditing:o}}));function By(e){return(By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uy(e,t){return(Uy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wy(e,t){return!t||"object"!==By(t)&&"function"!=typeof t?Vy(e):t}function Vy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qy(e){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,D.P1)(Yd.YI,Ry.P0,Yd.h9,Yd.zA,(function(e,t,r,n){return My({layer:e.layer,showConnections:t,dependencies:r},n)})),(0,D.P1)(re.Yf,Q.KV,re.fY,(function(e,t,r){return{isLocalizedLayerStylesEnabled:!(0,ue.isNil)(e),language:t,env:r}})),Yd.GW,Yd.zA;var $y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uy(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qy(n);if(o){var r=qy(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Wy(this,e)});function a(){var e;Gy(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hy(Vy(e=i.call.apply(i,[this].concat(r))),"renderButtons",(function(){var t=[],r=e.props,n=r.isStepValid,o=r.children,i=void 0===o?[]:o,a=i.length>=0?i.length:1;return e.props.hideButtons?null:(e.props.step>0&&t.push(c().createElement(qe.Z,{key:"prev",className:"ms-wizard-prev",onClick:function(){return e.props.onPrevPage()}},c().createElement(b.Z,{msgId:"wizard.prev"}))),e.props.step>=a-1?t.push(c().createElement(qe.Z,{key:"finish",className:"ms-wizard-finish",onClick:function(){return e.props.onFinish()}},c().createElement(b.Z,{msgId:"wizard.finish"}))):e.props.step<a-1&&a>1&&t.push(c().createElement(qe.Z,{key:"next",className:"ms-wizard-next",disabled:!n(e.props.step),onClick:function(){return e.props.onNextPage()}},c().createElement(b.Z,{msgId:"wizard.next"}))),t)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.children||[],r=t.length>=0?t.length:1;return c().createElement("div",{key:"wizard-pages",className:"ms-wizard"},c().Children.map(t,(function(t,n){return n===e.props.step?c().cloneElement(t,{key:"wizard-component-".concat(n),onNextPage:e.props.step===r-1?e.props.onFinish:e.props.onNextPage,onPrevPage:e.props.onPrevPage}):null})),c().createElement(g.Row,{key:"wizard-buttons",className:"ms-wizard-buttons"},this.renderButtons()))}}])&&zy(t.prototype,r),a}(c().Component);Hy($y,"propTypes",{step:u().number,hideButtons:u().bool,onNextPage:u().func,onPrevPage:u().func,buttonType:u().node,onFinish:u().func,isStepValid:u().func}),Hy($y,"defaultProps",{step:0,isStepValid:function(){return!0},hideButtons:!1,onNextPage:function(){},onPrevPage:function(){},onFinish:function(){}});const Ky=$y;var Yy=(0,R.compose)((0,R.withPropsOnChange)(["step"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipButtonsOnSteps,r=void 0===t?[]:t,n=e.step,o=e.hideButtons;return r&&r.indexOf(n)>=0?{hideButtons:!0}:{hideButtons:o}})),(0,R.withHandlers)({onNextPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(t+1)}},onPrevPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(Math.max(t-1,0))}}}));(0,R.compose)((0,R.withState)("step","setPage",0),Yy);const Xy=function(e){return(0,Ti.Z)(e,{title:c().createElement(b.Z,{msgId:"widgets.builder.errors.noAttributesTitle"}),description:c().createElement(b.Z,{msgId:"widgets.builder.errors.noAttributesDescription"}),glyph:"warning-sign"})},Qy=(0,R.defaultProps)({data:[{name:"A",variable:2,pv:2,amt:2},{name:"B",variable:.5,pv:.5,amt:.5},{name:"C",variable:3,pv:3,amt:3},{name:"D",variable:1,pv:1,amt:2}],series:[{dataKey:"variable",color:"#078aa3"}],xAxis:{dataKey:"name",show:!1}});var Jy=r(6869);const eb=function(e){var t=e.title,r=e.description;return c().createElement(g.Row,null,c().createElement(g.Col,{xs:12,className:"text-center"},c().createElement("div",{className:"mapstore-step-title"},t),c().createElement("div",{className:"mapstore-step-description"},r)))};function tb(){return(tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(r),!0).forEach((function(t){ob(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ob(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ib=Qy(Jy.Z),ab={xAxisAngle:0,legend:!1,tooltip:!1,cartesian:!1,width:100,height:100,popup:!1},lb=[{type:"bar"},{type:"pie"},{type:"line"}].map((function(e){var t=e.type;return{type:t,title:c().createElement(b.Z,{msgId:"widgets.chartType.".concat(t,".title")}),description:c().createElement(b.Z,{msgId:"widgets.chartType.".concat(t,".description")}),caption:c().createElement(b.Z,{msgId:"widgets.chartType.".concat(t,".caption")})}}));const cb=(0,R.shouldUpdate)((function(e,t){var r=e.types,n=e.type,o=t.types;return n!==t.type&&r!==o}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelect,r=void 0===t?function(){}:t,n=e.onNextPage,o=void 0===n?function(){}:n,i=e.types,a=void 0===i?lb:i,l=e.type;return c().createElement(g.Row,null,c().createElement(eb,{key:"title",title:c().createElement(b.Z,{msgId:"widgets.selectChartType.title"})}),c().createElement(za.Z,{key:"content",onItemClick:function(e){r(e.type),o()},items:a&&lb.map((function(e){return nb(nb({},e),{},{selected:e.type===l,preview:c().createElement(ib,tb({},ab,{type:e.type,autoColorOptions:e.type===l?{base:0,s:0,v:0}:void 0}))})}))}))}));var sb=function(e){return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return 0!==t.indexOf("gml:")})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return{label:t,value:t}}))},ub=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,ue.find)(t,{name:e});return!r||"number"!==r.localType&&"int"!==r.localType?[{value:"Count",label:"widgets.operations.COUNT"}]:[{value:"Count",label:"widgets.operations.COUNT"},{value:"Sum",label:"widgets.operations.SUM"},{value:"Average",label:"widgets.operations.AVG"},{value:"StdDev",label:"widgets.operations.STDDEV"},{value:"Min",label:"widgets.operations.MIN"},{value:"Max",label:"widgets.operations.MAX"}]};const pb=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.data,o=void 0===n?{}:n;return{options:sb(r),aggregationOptions:("counter"!==(null==o?void 0:o.widgetType)?[{value:"None",label:"widgets.operations.NONE"}]:[]).concat(ub(o.options&&o.options.aggregationAttribute,r))}})),(0,Ua.Z)("aggregationOptions"));var fb=r(45869),db=r(52595);function mb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yb(e){var t,r,n=e.showOnRender,o=e.placement,i=e.id,a=e.left,s=e.top,u=e.title,p=e.text,f=e.bsStyle,d=void 0===f?"info":f,m=e.glyph,y=void 0===m?"question-sign":m,b=(t=(0,l.useState)(n),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return mb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mb(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=b[0],h=b[1],O=(0,l.useRef)(null);return c().createElement(c().Fragment,null,c().createElement(g.Glyphicon,{onClick:function(){return h(!v)},ref:function(e){return O.current=e},style:{cursor:"pointer"},className:"text-".concat(d),glyph:y}),c().createElement(db.Z,{target:O.current,show:v,placement:o},c().createElement(g.Popover,{id:i,placement:o,positionLeft:a,positionTop:s,title:u},c().createElement(g.Glyphicon,{glyph:"1-close",style:{position:"absolute",right:0,top:0,margin:8},onClick:function(){return h(!1)}}),p)))}var bb=r(12226);function gb(){return(gb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hb(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ob={value:1};function wb(e){try{if(!e)return[!0];var t=(0,bb.B)(e,Ob);return[!(0,ue.isNil)(t)&&!(0,ue.isNaN)(t)&&!(0,ue.isError)(t),t]}catch(e){return[!1,e]}}function Eb(e,t){return e?null:(0,ue.isNil)(t)?"the expression returns no value":(0,ue.isNaN)(t)?"the expression returned NaN":(0,ue.isError)(t)?t.message:null}function Sb(e,t){return t?e?"success":"error":null}function Pb(e){var t=e.onChange,r=e.value,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["onChange","value"]),o=vb(wb(r),2),i=o[0],a=o[1],s=vb((0,l.useState)(i),2),u=s[0],p=s[1],f=vb((0,l.useState)(a),2),d=f[0],m=f[1],y=vb((0,l.useState)(r),2),v=y[0],h=y[1];return c().createElement(g.FormGroup,{validationState:Sb(u,v)},c().createElement(g.Col,{xs:12},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.formula"})),c().createElement(yb,{placement:"top",title:c().createElement(b.Z,{msgId:"widgets.advanced.formula"}),text:c().createElement(el.Z,{msgId:"widgets.advanced.formulaExamples"})}),c().createElement(g.FormControl,gb({placeholder:"e.g. value / 100",feedback:Eb(u,d)},n,{type:"text",value:v,onChange:function(e){var r=vb(wb(e.target.value),2),n=r[0],o=r[1];n?(p(!0),m(void 0),t(e)):(p(!1),m(o)),h(e.target.value)}}))))}var jb=(0,Ua.Z)("options")(Rr.ZP),Cb=[{value:"-",label:"widgets.advanced.axisTypes.auto"},{value:"linear",label:"widgets.advanced.axisTypes.linear"},{value:"category",label:"widgets.advanced.axisTypes.category"},{value:"log",label:"widgets.advanced.axisTypes.log"},{value:"date",label:"widgets.advanced.axisTypes.date"}];function xb(e){var t=e.data;return c().createElement("span",null,c().createElement("span",{style:{cursor:"pointer"}},c().createElement(b.Z,{msgId:"widgets.advanced.title"})),c().createElement("button",{className:"close"},t.panel?c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-collapse-down"}):c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-expand"})))}function Tb(e){var t,r,n,o,i,a,l,s,u,p,f,d,m,y=e.data,v=e.onChange,h=void 0===v?function(){}:v;return c().createElement(Du.Z,{id:"displayCartesian",header:c().createElement(xb,{data:y}),collapsible:!0,expanded:y.panel,onSwitch:function(e){h("panel",e)}},c().createElement(g.FormGroup,{controlId:"AdvancedOptions"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.displayCartesian"})),c().createElement(g.Col,{sm:6},c().createElement(fb.Z,{checked:!(!y.cartesian&&!1!==y.cartesian||y.cartesian),onChange:function(e){h("cartesian",!e)}})),c().createElement(g.Col,{componentClass:"label",sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.yAxis"})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.xAxisType"})),c().createElement(g.Col,{sm:6},c().createElement(jb,{value:y.yAxisOpts&&y.yAxisOpts.type||"-",options:Cb,onChange:function(e){h("yAxisOpts.type",e&&e.value)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.hideLabels"})),c().createElement(g.Col,{sm:6},c().createElement(fb.Z,{checked:!y.yAxis&&!1!==y.yAxis||!y.yAxis,onChange:function(e){h("yAxis",!e)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.format"})),c().createElement(g.Col,{sm:4},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.prefix"}),c().createElement(g.FormControl,{placeholder:"e.g.: ~",disabled:!1===y.yAxis,value:null==y||null===(t=y.yAxisOpts)||void 0===t?void 0:t.tickPrefix,type:"text",onChange:function(e){return h("yAxisOpts.tickPrefix",e.target.value)}}))),c().createElement(g.Col,{sm:4},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.format"})),c().createElement(yb,{placement:"top",title:c().createElement(b.Z,{msgId:"widgets.advanced.examples"}),text:c().createElement(el.Z,{msgId:"widgets.advanced.formatExamples"})}),c().createElement(g.FormControl,{placeholder:"e.g.: .2s",disabled:!1===y.yAxis,value:null==y||null===(r=y.yAxisOpts)||void 0===r?void 0:r.format,type:"text",onChange:function(e){return h("yAxisOpts.format",e.target.value)}})),c().createElement(g.Col,{sm:4},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.suffix"})),c().createElement(g.FormControl,{placeholder:"e.g.: W",disabled:!1===y.yAxis,value:null==y||null===(n=y.yAxisOpts)||void 0===n?void 0:n.tickSuffix,type:"text",onChange:function(e){return h("yAxisOpts.tickSuffix",e.target.value)}})),c().createElement(g.Col,{sm:12},c().createElement(Pb,{disabled:!1===y.yAxis,value:y.formula,type:"text",onChange:function(e){return h("formula",e.target.value)}})),c().createElement(g.Col,{componentClass:"label",sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.xAxis"})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.xAxisType"})),c().createElement(g.Col,{sm:6},c().createElement(jb,{value:null!==(o=null==y||null===(i=y.xAxisOpts)||void 0===i?void 0:i.type)&&void 0!==o?o:"-",options:Cb,onChange:function(e){h("xAxisOpts.type",e&&e.value)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.hideLabels"})),c().createElement(g.Col,{sm:6},c().createElement(fb.Z,{checked:null!==(a=null==y||null===(l=y.xAxisOpts)||void 0===l?void 0:l.hide)&&void 0!==a&&a,onChange:function(e){h("xAxisOpts.hide",e)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.forceTicks"})),c().createElement(g.Col,{sm:6},c().createElement(fb.Z,{disabled:null!==(s=null==y||null===(u=y.xAxisOpts)||void 0===u?void 0:u.hide)&&void 0!==s&&s,checked:!(null==y||null===(p=y.xAxisOpts)||void 0===p||!p.nTicks),onChange:function(e){h("xAxisOpts.nTicks",e?200:void 0)}}),c().createElement("span",{style:{position:"relative",top:-5,margin:10}},c().createElement(wl.Z,{bsStyle:"info",text:c().createElement(b.Z,{msgId:"widgets.advanced.maxXAxisLabels",msgParams:{max:200}})}))),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.xAxisAngle"})),c().createElement(g.Col,{sm:6,style:{display:"flex"}},c().createElement(fb.Z,{disabled:null!==(f=null==y||null===(d=y.xAxisOpts)||void 0===d?void 0:d.hide)&&void 0!==f&&f,checked:void 0!==y.xAxisAngle,onChange:function(e){h("xAxisAngle",e?0:void 0)}}),c().createElement("div",{style:{flexGrow:1,padding:5}},void 0!==y.xAxisAngle?c().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},c().createElement(Kl.Z,{disabled:!(null==y||null===(m=y.xAxisOpts)||void 0===m||!m.hide),key:"priority",format:{to:function(e){return"".concat(parseInt(e,10),"")},from:function(e){return Number(e)}},onSlide:function(e){h("xAxisAngle",parseInt(e[0],10))},range:{min:-90,max:90},start:[(0,ue.isNil)(y.xAxisAngle)?0:y.xAxisAngle],step:15,tooltips:[!0]})):c().createElement("div",{style:{textAlign:"center"}},"Auto")))),c().createElement(g.FormGroup,{controlId:"yAxisLabel"},c().createElement(g.Col,{componentClass:"label",sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.legend"})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.yAxisLabel"})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:y.yAxisLabel,type:"text",onChange:function(e){return h("yAxisLabel",e.target.value)}}))))}function kb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kb(Object(r),!0).forEach((function(t){Ab(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ab(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fb=[{name:"global.colors.random",schema:"qualitative",options:{base:190,range:360,options:{}}},{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}}],Db=function(e){return"pie"!==e?Fb.filter((function(e){return"qualitative"!==e.schema})):Fb},Rb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"widgets.".concat(e,".").concat(t.type||t.widgetType||"default")},Nb=c().createElement(b.Z,{msgId:Rb("placeHolder")});const Mb=function(e){var t=e.hasAggregateProcess,r=e.data,n=void 0===r?{options:{}}:r,o=e.onChange,i=void 0===o?function(){}:o,a=e.options,l=void 0===a?[]:a,s=e.formOptions,u=void 0===s?{showGroupBy:!0,showUom:!1,showColorRampSelector:!0,showLegend:!0,advancedOptions:!0}:s,p=e.aggregationOptions,f=void 0===p?[]:p,d=e.sampleChart;return c().createElement(g.Row,null,c().createElement(eb,{title:c().createElement(b.Z,{msgId:"widgets.chartOptionsTitle"})}),c().createElement(g.Col,{xs:12,style:{position:"sticky",top:0,zIndex:1,background:"linear-gradient(to top, rgba(255,255,255,0), rgba(255,255,255, 1) 30px)"}},c().createElement("div",{style:{marginBottom:"30px"}},d)),c().createElement(g.Col,{xs:12},c().createElement(g.Form,{className:"chart-options-form",horizontal:!0},u.showGroupBy?c().createElement(g.FormGroup,{controlId:"groupByAttributes",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:Rb("groupByAttributes",n)})),c().createElement(g.Col,{sm:6},c().createElement(Rr.ZP,{value:n.options&&n.options.groupByAttributes,options:l,placeholder:Nb,onChange:function(e){i("options.groupByAttributes",e&&e.value)}}))):null,c().createElement(g.FormGroup,{controlId:"aggregationAttribute",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:Rb("aggregationAttribute",n)})),c().createElement(g.Col,{sm:6},c().createElement(Rr.ZP,{value:n.options&&n.options.aggregationAttribute,options:l,placeholder:Nb,onChange:function(e){i("options.aggregationAttribute",e&&e.value)}}))),t?c().createElement(g.FormGroup,{controlId:"aggregateFunction",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:Rb("aggregateFunction",n)})),c().createElement(g.Col,{sm:6},c().createElement(Rr.ZP,{value:n.options&&n.options.aggregateFunction,options:f,placeholder:Nb,onChange:function(e){i("options.aggregateFunction",e&&e.value)}}))):null,u.showUom?c().createElement(g.FormGroup,{controlId:"uom"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:Rb("uom",n)})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:(0,ue.get)(n,"options.seriesOptions[0].uom"),type:"text",onChange:function(e){return i("options.seriesOptions.[0].uom",e.target.value)}}))):null,u.showColorRampSelector?c().createElement(g.FormGroup,{controlId:"colorRamp",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:Rb("colorRamp",n)})),c().createElement(g.Col,{sm:6},c().createElement(tc,{items:Db(n.type),value:(0,ue.head)(Db(n.type).filter((function(e){return n.autoColorOptions&&e.name===n.autoColorOptions.name}))),samples:"pie"===n.type?5:1,onChange:function(e){i("autoColorOptions",Ib(Ib({},e.options),{},{name:e.name}))}}))):null,u.showLegend?c().createElement(g.FormGroup,{controlId:"displayLegend"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:Rb("displayLegend",n)})),c().createElement(g.Col,{sm:6},c().createElement(fb.Z,{checked:n.legend,onChange:function(e){i("legend",e)}}))):null,!u.advancedOptions||"chart"!==n.widgetType||"bar"!==n.type&&"line"!==n.type?null:c().createElement(Tb,{data:n,onChange:i}))))},Lb=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.sampleChart;return c().createElement(g.Row,null,c().createElement(eb,{title:c().createElement(b.Z,{msgId:"widgets.widgetOptionsTitle"})}),c().createElement(g.Col,{key:"sample",xs:12},c().createElement("div",{style:{marginBottom:"30px"}},i)),c().createElement(g.Col,{key:"form",xs:12},c().createElement(g.Form,{className:"widget-options-form",horizontal:!0},c().createElement(g.FormGroup,{controlId:"groupByAttributes"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.title"})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:r.title,type:"text",onChange:function(e){return o("title",e.target.value)}}))),c().createElement(g.FormGroup,{controlId:"aggregationAttribute"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.description"})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:r.description,type:"text",onChange:function(e){return o("description",e.target.value)}}))))))};var _b=r(87017),Zb=r(73339),Bb=r(30881),Gb=r(8488),zb=r(39837),Ub=r(42415);function Wb(){return(Wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Vb=(0,xi.Z)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),qb=Xy((function(e){var t=e.featureTypeProperties;return 0===(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t;return 0!==r.indexOf("gml:")})).length}))(cb),Hb=pb(Mb),$b=(0,R.compose)(Zb.Z,Bb.Z,Gb.Z,_b.Z,Vb,Ub.Z,zb.Z)(Jy.Z),Kb=Qy(Jy.Z),Yb={width:430,height:200},Xb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.hasAggregateProcess;return e.aggregationAttribute&&e.groupByAttributes&&(!r||r&&e.aggregateFunction)},Qb=Yy(Ky),Jb=function(e){var t=e.data,r=void 0===t?{}:t,n=e.layer,o=e.dependencies,i=void 0===o?{}:o,a=e.setValid,l=void 0===a?function(){}:a,s=e.hasAggregateProcess;return Xb(r.options,{hasAggregateProcess:s})?c().createElement($b,Wb({key:"preview-chart",onLoad:function(){return l(!0)},onLoadError:function(){return l(!1)},isAnimationActive:!1,dependencies:i,dependenciesMap:r.dependenciesMap},Yb,{type:r.type,xAxisOpts:r.xAxisOpts,yAxisOpts:r.yAxisOpts,formula:r.formula,legend:r.legend,cartesian:r.cartesian,layer:r.layer||n,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,autoColorOptions:r.autoColorOptions,options:r.options,yAxis:r.yAxis,xAxisAngle:r.xAxisAngle,yAxisLabel:r.yAxisLabel})):c().createElement(Kb,Wb({hasAggregateProcess:s,key:"sample-chart",isAnimationActive:!1},Yb,{type:r.type,autoColorOptions:r.autoColorOptions,legend:r.legend,cartesian:r.cartesian,yAxis:r.yAxis}))};const eg=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o,a=e.hasAggregateProcess;n&&!Xb(r.options,{hasAggregateProcess:a})&&i(!1)}}),(0,R.setDisplayName)("ChartWizard"))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.setValid,s=void 0===l?function(){}:l,u=e.data,p=void 0===u?{}:u,f=e.layer,d=void 0===f?{}:f,m=e.step,y=void 0===m?0:m,b=e.types,g=e.featureTypeProperties,v=e.dependencies,h=e.hasAggregateProcess;return c().createElement(Qb,{step:y,setPage:a,onFinish:o,isStepValid:function(e){return 0===e?p.chartType:1!==e||Xb(p.options,{hasAggregateProcess:h})},hideButtons:!0},c().createElement(qb,{key:"type",featureTypeProperties:g,type:p.type,onSelect:function(e){r("type",e)}}),c().createElement(Hb,{hasAggregateProcess:h,dependencies:v,key:"chart-options",featureTypeProperties:g,types:b,data:p,onChange:r,layer:p.layer||d,sampleChart:Jb({hasAggregateProcess:h,data:p,layer:p.layer||d,dependencies:v,setValid:function(e){return s(e&&Xb(p.options,{hasAggregateProcess:h}))}})}),c().createElement(Lb,{key:"widget-options",data:p,onChange:r,layer:p.layer||d,sampleChart:Jb({hasAggregateProcess:h,data:p,layer:p.layer||d,dependencies:v,setValid:function(e){return s(e&&Xb(p.options,{hasAggregateProcess:h}))}})}))}));function tg(e){return function(e){if(Array.isArray(e))return rg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const ng=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.selected,n=e.stepButtons,o=void 0===n?[]:n,i=e.onProceed,a=void 0===i?function(){}:i;return c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[].concat(tg(o),[{onClick:a,disabled:!t,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",visible:r,glyph:"arrow-right"}])})},og=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.children;return c().createElement("div",{className:"mapstore-flex-container"},c().createElement("div",{className:"m-header bg-body widgets-builder-header"},c().createElement(g.Row,null,c().createElement(g.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},c().createElement(qe.Z,{onClick:function(){return r()},className:"pull-left on-close-btn square-button no-border "},c().createElement(g.Glyphicon,{glyph:"1-close"})),c().createElement("span",{style:{padding:"50px 0 0 0",fontSize:16}},c().createElement(b.Z,{msgId:"widgets.builder.header.title"})),c().createElement("div",{style:{display:"flex"},className:"square-button pull-right no-border"},c().createElement(g.Glyphicon,{glyph:"stats",className:"text-primary"})))),c().createElement(g.Row,{className:"text-center"},c().createElement("div",{className:"m-padding-md"},n))))},ig=og;var ag=r(59551),lg=r(32354),cg=r(67007),sg=r(3475);function ug(e){return(ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pg(e){return function(e){if(Array.isArray(e))return fg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(r),!0).forEach((function(t){yg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bg(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function gg(e){var t=function(e,t){if("object"!==ug(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==ug(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===ug(t)?t:String(t)}var vg=r(89255),hg=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.dataProp,i=void 0===o?"items":o,a=n.initialStreamDebounce,l=void 0===a?0:a,c=n.throttleTime,s=void 0===c?500:c;return e.take(1).concat(e.debounceTime(l)).switchMap((function(e){return r(e,0).startWith({loading:!0}).concat(vg.Observable.of({loading:!1})).concat(t.throttleTime(s).distinct().exhaustMap((function(t){return r(e,t).startWith({loading:!0}).concat(vg.Observable.of({loading:!1}))}))).scan((function(e,t){var r=e[i],n=bg(e,[i].map(gg)),o=t[i],a=bg(t,[i].map(gg));return mg(mg(yg({},i,o?[].concat(pg(r||[]),pg(o)):r||[]),n),a)})).map((function(e){return mg({},e)}))})).catch((function(e){return vg.Observable.of({loading:!1,error:e})}))};function Og(e){return(Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wg(Object(r),!0).forEach((function(t){Fg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jg(e,t,r){return t&&Pg(e.prototype,t),r&&Pg(e,r),e}function Cg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xg(e,t)}function xg(e,t){return(xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ag(e);if(t){var o=Ag(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return kg(this,r)}}function kg(e,t){return!t||"object"!==Og(t)&&"function"!=typeof t?Ig(e):t}function Ig(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ag(e){return(Ag=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Dg=function(e){var t=e.loadPage,r=e.scrollSpyOptions,n=e.loadStreamOptions,o=e.loadMoreStreamOptions,i=e.hasMore,a=e.isScrolled;return(0,R.compose)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return vg.Observable.empty()},t=arguments.length>1?arguments[1]:void 0;return(0,R.mapPropsStream)((function(r){var n=(0,R.createEventHandler)(),o=n.handler,i=n.stream,a=(0,R.createEventHandler)(),l=a.handler,c=a.stream;return r.combineLatest(hg(c,i,e,t).startWith({}),(function(e,t){return mg(mg(mg({},e),t),{},{onLoadMore:o,loadFirst:l})}))}))}(t,o),(0,R.defaultProps)({hasMore:i,isScrolled:a}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataProp,r=void 0===t?"items":t,n=e.querySelector,o=e.closest,i=void 0!==o&&o,a=e.loadingProp,l=void 0===a?"loading":a,s=e.skip,p=void 0===s?0:s,f=e.pageSize,d=void 0===f?10:f,m=e.offsetSize,y=void 0===m?200:m;return function(e){var t,o;return o=t=function(t){Cg(a,t);var o=Tg(a);function a(){var e;Sg(this,a);for(var t=arguments.length,c=new Array(t),s=0;s<t;s++)c[s]=arguments[s];return Fg(Ig(e=o.call.apply(o,[this].concat(c))),"findScrollDomNode",(function(){if(!e.isMounded)return null;var t=jc().findDOMNode(Ig(e));return t&&i&&n?t.closest(n||"*"):t&&(n?t.querySelector(n):t)})),Fg(Ig(e),"onScroll",(function(){var t=Eg({skip:p,pageSize:d,offsetSize:y},e.props.scrollOptions),n=e.findScrollDomNode();n&&e.props.isScrolled({div:n,offset:t.offsetSize})&&(!r||e.props[r]&&e.props[r].length)&&(!l||!e.props[l])&&e.props.hasMore(e.props)&&e.props.onLoadMore(r?Math.ceil((e.props[r].length-t.skip)/t.pageSize):null)})),e}return jg(a,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findScrollDomNode();e&&(this.listenerAdded=!0,e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.findScrollDomNode();n&&!this.listenerAdded&&(n.addEventListener("scroll",this.onScroll,!1),this.listenerAdded=!0),!n||r&&this.props[r]&&this.props[r]===e[r]||setTimeout((function(){return t.onScroll()}),300)}},{key:"componentWillUnmount",value:function(){this.isMounded=!1,this.listenerAdded=!1;var e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){return c().createElement(e,this.props)}}]),a}(c().Component),Fg(t,"propTypes",{hasMore:u().func,onLoadMore:u().func,isScrolled:u().func,scrollOptions:u().object}),Fg(t,"defaultProps",{onLoadMore:function(){},hasMore:function(){return!0},isScrolled:function(e){var t=e.div,r=e.offset;return t.scrollTop+t.clientHeight>=t.scrollHeight-r}}),o}}(r,n))};var Rg=r(79105),Ng=r(14471),Mg=r(75480),Lg=(0,Ua.Z)(["placeholder","clearValueText","noResultsText"])(r(43129).ZP);const _g=function(e){var t=e.isValidServiceSelected,r=e.services,n=e.selectedService,o=e.onChangeCatalogMode,i=void 0===o?function(){}:o,a=e.onChangeSelectedService,l=void 0===a?function(){}:a;return c().createElement(g.InputGroup,null,c().createElement(Lg,{clearValueText:"catalog.clearValueText",noResultsText:"catalog.noResultsText",clearable:!0,options:r,value:n,onChange:function(e){return l(e&&e.value?e.value:"")},placeholder:"catalog.servicePlaceholder"}),t?c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return i("edit",!1)}},c().createElement(g.Glyphicon,{glyph:"pencil"})):null,c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return i("edit",!0)}},c().createElement(g.Glyphicon,{glyph:"plus"})))};var Zg=(0,Ua.Z)("placeholder")(g.FormControl);const Bg=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,n=e.searchText,o=e.title,i=void 0===o?c().createElement(b.Z,{msgId:"catalog.title"}):o,a=e.catalog,l=e.services,s=e.isValidServiceSelected,u=e.showCatalogSelector;return c().createElement(g.Grid,{className:"catalog-form",fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:12},c().createElement("h4",{className:"text-center"},i),u?c().createElement(g.FormGroup,null,c().createElement(_g,{servieces:l,catalog:a,isValidServiceSelected:s})):null,c().createElement(g.FormGroup,{controlId:"catalog-form"},c().createElement(Zg,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:function(e){return r(e.currentTarget.value)}})))))};function Gg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gg(Object(r),!0).forEach((function(t){Ug(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ug(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wg={csw:ag.Z,wms:cg.ZP,wmts:sg.Z,backgrounds:lg.Z},Vg=c().createElement(Ng.Z,{glyph:"geoserver",padding:20}),qg=(0,R.compose)((0,xi.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),(0,Ti.Z)((function(e){var t=e.loading,r=e.error;return!t&&r}),{title:c().createElement(b.Z,{msgId:"catalog.error"}),style:{transform:"translateY(50%)"}}),(0,Ti.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:c().createElement(b.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(za.Z),Hg=function(e){var t=e.records,r=e.result,n=void 0===r?{}:r;return{items:(t||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title&&(0,ue.isObject)(e.title)&&e.title.default||e.title,caption:e.identifier,description:e.description,preview:e.thumbnail?c().createElement("img",{src:"thumbnail"}):Vg,record:e}})),total:n&&n.numberOfRecordsMatched}};const $g=(0,R.compose)((0,Rg.Z)("searchText","setSearchText",""),Dg({loadPage:function(e){var t=e.text,r=e.catalog,n=void 0===r?{}:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ai.Observable.fromPromise(Wg[n.type].textSearch(n.url,10*o+("csw"===n.type?1:0),10,t)).map((function(e){return{result:e,records:(0,fy.eL)(n.type,e||[],{url:n&&n.url,service:n})}})).map(Hg)},scrollSpyOptions:{querySelector:".ms2-border-layout-body",pageSize:10}}),(0,R.mapPropsStream)((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.catalog,n=t.loadFirst,o=void 0===n?function(){}:n;return e.debounceTime(500).startWith({searchText:"",catalog:r}).distinctUntilKeyChanged("searchText").do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.catalog;return o({text:t,catalog:r})})).ignoreElements()})))})))((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,n=e.selected,o=e.onRecordSelected,i=e.loading,a=e.searchText,l=e.items,s=void 0===l?[]:l,u=e.total,p=e.catalog,f=e.services,d=e.title,m=e.showCatalogSelector,y=e.error;return c().createElement(Fr.Z,{className:"compat-catalog",header:c().createElement(Bg,{services:f||[p],showCatalogSelector:m,title:d,searchText:a,onSearchTextChange:r}),footer:c().createElement("div",{className:"catalog-footer"},c().createElement("span",null,i?c().createElement(Mg.Z,null):null),(0,ue.isNil)(u)?null:c().createElement("span",{className:"res-info"},c().createElement(b.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:s.length,total:u}})))},c().createElement(qg,{items:s.map((function(e){return e===n||n&&e&&e.record&&n.identifier===e.record.identifier?zg(zg({},e),{},{selected:!0}):e})),loading:i,error:y,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.record;return o(t,p)}}))})),Kg=(0,R.defaultProps)({title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectALayer"})})($g);var Yg=(0,R.compose)((0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),(0,p.connect)((0,D.P1)(de.R7,(function(e){return{catalog:e}})))))(Kg);const Xg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onLayerChoice,a=void 0===i?function(){}:i,l=e.stepButtons,s=e.selected,u=e.error,p=e.canProceed,f=e.layer,d=e.catalog,m=e.catalogServices;return c().createElement(Fr.Z,{className:"bg-body layer-selector",header:c().createElement(ig,{onClose:r},c().createElement(ng,{stepButtons:l,canProceed:p,onProceed:function(){return a(f)}}),s&&!p&&u?c().createElement(wl.Z,{trigger:!1,glyph:"warning-sign",bsStyle:"warning",title:c().createElement(Wu.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:c().createElement(Wu.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},c().createElement(Yg,{services:m,selected:s,catalog:d,onRecordSelected:function(e){return o(e)}}))};function Qg(e){return function(e){if(Array.isArray(e))return Jg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ev=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTypeSelection";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},tv=function(e){switch(e){case 0:return"widgets.builder.wizard.configureChartOptions";case 1:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},rv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function nv(){return(nv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ov(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var iv=(0,p.connect)(Zy,{setPage:pe.YA,setValid:function(e){return(0,pe.t4)("valid",e)},onEditorChange:pe.Rz,insertWidget:pe.Qe},_y)((0,R.compose)(sy({needWPS:!1}),(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}))(eg)),av=(0,R.compose)((0,p.connect)(Zy,{openFilterEditor:pe.fy,setPage:pe.YA,onChange:pe.Rz,insertWidget:pe.Qe},_y),wy,ky(),Dy((function(e){return 1===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.valid,a=e.setPage,l=void 0===a?function(){}:a,s=e.onFinish,u=void 0===s?function(){}:s,p=e.stepButtons,f=void 0===p?[]:p,d=e.openFilterEditor,m=void 0===d?function(){}:d;return c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return l(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:ev(r)}].concat(Qg(f),[{visible:r>0,onClick:m,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return l(Math.min(r+1,2))},visible:!(1!==r),disabled:1===r&&!i,glyph:"arrow-right",tooltipId:tv(r)},{onClick:function(){return u(Math.min(r+1,1))},visible:2===r,glyph:"floppy-disk",tooltipId:rv(r,o)}])})}));const lv=(0,R.compose)((0,p.connect)(Zy),Ey,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,R.renderComponent)(vy(Xg))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.exitButton,i=e.editorData,a=e.toggleConnection,l=e.availableDependencies,s=void 0===l?[]:l,u=e.dependencies,p=ov(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return c().createElement("div",{className:"mapstore-chart-advance-options"},c().createElement(Fr.Z,{header:c().createElement(ig,{onClose:n},c().createElement(av,{exitButton:o,editorData:i,toggleConnection:a,availableDependencies:s,onClose:n}))},t?c().createElement(iv,nv({dependencies:u},p)):null))}));function cv(e){return function(e){if(Array.isArray(e))return sv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},pv=(0,Ua.Z)("placeholder")(g.FormControl),fv=(0,Ua.Z)("placeholder")(Zo());const dv=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onChange,o=void 0===n?function(){}:n;return c().createElement("div",null,c().createElement(g.Col,{key:"form",xs:12},c().createElement(g.Form,null,c().createElement(g.FormGroup,{controlId:"title"},c().createElement(g.Col,{sm:12},c().createElement(pv,{style:{marginBottom:10},placeholder:"widgets.builder.wizard.titlePlaceholder",value:r.title,type:"text",onChange:function(e){return o("title",e.target.value)}}))))),c().createElement(fv,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},placeholder:"widgets.builder.wizard.textPlaceholder",value:r&&r.text||"",onChange:function(e){return o("text",e)}}))};var mv=Yy(Ky),yv=(0,R.compose)((0,p.connect)(Zy,{setPage:pe.YA,insertWidget:pe.Qe,onResetChange:pe.Rz},_y),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),ky())((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.onFinish,s=void 0===l?function(){}:l;return c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(cv(a),[{onClick:function(){return s(Math.min(r+1,1))},visible:0===r,glyph:"floppy-disk",tooltipId:uv(r,o)}])})})),bv=(0,p.connect)(Zy,{onChange:pe.Rz},_y)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,s=void 0===l?0:l,u=e.editorData,p=void 0===u?{}:u;return c().createElement(mv,{step:s,setPage:a,onFinish:o,hideButtons:!0},c().createElement(dv,{key:"widget-options",data:p,onChange:r}))})),gv=r(53370),vv=r.n(gv);function hv(e){return function(e){if(Array.isArray(e))return Ov(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ov(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ov(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wv(Object(r),!0).forEach((function(t){Sv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pv(e){return function(e){if(Array.isArray(e))return jv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cv=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=void 0===t?[]:t,n=e.options,o=void 0===n?{}:n;return{attributes:r.filter((function(e){return!(0,ny.isGeometryType)(e)})).map((function(e){return Ev(Ev({},e),{},{label:e.name,attribute:e.name,hide:o.propertyName&&o.propertyName.indexOf(e.name)<0})}))}})),Xy((function(e){var t=e.attributes;return 0===(void 0===t?[]:t).length})),(0,R.withHandlers)({onChange:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.options,o=void 0===n?{}:n;return function(e,t){return r("options.propertyName",function(e,t,r){var n=(0,ue.castArray)(t);return r?e.filter((function(e){return!(0,ue.includes)(n,e)})):(0,ue.uniq)([].concat(Pv(e),Pv(n)))}(o&&o.propertyName||[],e,t))}}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,o=void 0===n?"featuregrid.columns":n,i=e.onChange,a=void 0===i?function(){}:i,l=e.attributes,s=void 0===l?[]:l;return c().createElement("div",{className:"bg-body data-attribute-selector",style:r},c().createElement("h4",{className:"text-center"},c().createElement("strong",null,c().createElement(b.Z,{msgId:o}))),c().createElement(vv(),{rowKey:"id",columns:[{name:"",key:"attribute"}],rowGetter:function(e){return s[e]},rowsCount:s.length,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:function(e){return a(e.map((function(e){return s[e.rowIdx].name})),!1)},onRowsDeselected:function(e){return a(e.map((function(e){return s[e.rowIdx].name})),!0)},selectBy:{indexes:s.reduce((function(e,t,r){return[].concat(hv(e),hv(t.hide?[]:[r]))}),[])}}}))}));const xv=function(e){var t=e.data,r=void 0===t?{options:{}}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.featureTypeProperties,a=e.sampleChart;return c().createElement(g.Row,null,c().createElement(eb,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.configureTableOptions"})}),c().createElement(g.Col,{xs:12},c().createElement("div",null,a)),c().createElement(g.Col,{xs:12},c().createElement(g.Form,{className:"chart-options-form",horizontal:!0},c().createElement(Cv,{options:r.options,onChange:o,attributes:i}),r.options&&r.options.columnSettings?c().createElement(qe.Z,{style:{float:"right"},onClick:function(){return o("options.columnSettings",void 0)}},c().createElement(b.Z,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))};var Tv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},kv=Yy(Ky);const Iv=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o;n&&!Tv(r.options)&&i(!1)}}))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.data,s=void 0===l?{}:l,u=e.layer,p=void 0===u?{}:u,f=e.step,d=void 0===f?0:f,m=e.types,y=e.featureTypeProperties,b=e.dependencies;return c().createElement(kv,{step:d,setPage:a,onFinish:o,isStepValid:function(e){return 1!==e||Tv(s.options)},hideButtons:!0},c().createElement(xv,{dependencies:b,key:"chart-options",featureTypeProperties:y,types:m,data:s,onChange:r,layer:s.layer||p}),c().createElement(Lb,{key:"widget-options",data:s,onChange:r,layer:s.layer||p}))}));function Av(e){return function(e){if(Array.isArray(e))return Fv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dv=function(e){return e&&e.options&&e.options.propertyName&&0!==e.options.propertyName.length},Rv=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTableOptions";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},Nv=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":"widgets.builder.errors.checkAtLeastOneAttribute"},Mv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function Lv(){return(Lv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Zv=(0,p.connect)(Zy,{setPage:pe.YA,setValid:function(e){return(0,pe.t4)("valid",e)},onEditorChange:pe.Rz,insertWidget:pe.Qe},_y)((0,R.compose)(sy(),(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}),(0,R.mapPropsStream)((function(e){return e.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.featureTypeProperties;return t===n})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.data,a=void 0===i?{}:i;o&&r.length>0&&!(0,ue.get)(a,"options.propertyName")&&o("options.propertyName",r.filter((function(e){return!(0,ny.isGeometryType)(e)})).map((function(e){return e.name})))})).ignoreElements())})))(Iv)),Bv=(0,R.compose)((0,p.connect)(Zy,{openFilterEditor:pe.fy,setPage:pe.YA,onChange:pe.Rz,insertWidget:pe.Qe},_y),wy,ky(),Dy((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,n=e.step,o=void 0===n?0:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.editorData,s=void 0===l?{}:l,u=e.setPage,p=void 0===u?function(){}:u,f=e.onFinish,d=void 0===f?function(){}:f;return c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return p(Math.max(0,o-1))},visible:o>0,glyph:"arrow-left",tooltipId:Rv(o)}].concat(Av(a),[{visible:o>=0,onClick:r,disabled:!Dv(s),glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return p(Math.min(o+1,2))},visible:0===o,disabled:0===o&&!Dv(s),glyph:"arrow-right",tooltipId:Nv(0,Dv(s))},{onClick:function(){return d(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:Mv(o,s)}])})}));const Gv=(0,R.compose)((0,p.connect)(Zy),Ey,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,R.renderComponent)(vy(Xg))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.editorData,i=void 0===o?{}:o,a=e.exitButton,l=e.toggleConnection,s=e.availableDependencies,u=void 0===s?[]:s,p=e.dependencies,f=_v(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return c().createElement(Fr.Z,{header:c().createElement(ig,{onClose:n},c().createElement(Bv,{editorData:i,exitButton:a,toggleConnection:l,availableDependencies:u,onClose:n}),0===(0,ue.get)(i,"options.propertyName.length")?c().createElement(wl.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:c().createElement(b.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?c().createElement(Zv,Lv({editorData:i,dependencies:p},f)):null)}));var zv=r(48860);function Uv(e){return function(e){if(Array.isArray(e))return Wv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},qv=r(5993),Hv=r(51768),$v=r(75927),Kv=r(16701),Yv=(0,Ti.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t;return!r.layers||0===(r.layers||[]).filter((function(e){return"background"!==e.group})).length}),(function(){return{glyph:"1-layer",title:c().createElement(b.Z,{msgId:"widgets.selectMap.TOC.noLayerTitle"}),description:c().createElement(b.Z,{msgId:"widgets.selectMap.TOC.noLayerDescription"})}}))(Kv.Z),Xv=(0,Hv.Z)($v.Z),Qv=(0,R.compose)(Hv.Z,(0,R.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,qv.Z)("title"))(eb);const Jv=function(e){var t=e.preview,r=e.map,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=e.selectedNodes,l=void 0===a?[]:a,s=e.onNodeSelect,u=void 0===s?function(){}:s,p=e.editNode,f=e.closeNodeEditor,d=void 0===f?function(){}:f,m=e.isLocalizedLayerStylesEnabled;return c().createElement("div",null,c().createElement(eb,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.configureMapOptions"})}),c().createElement("div",{key:"sample",style:{marginTop:10}},c().createElement(eb,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.preview"})}),c().createElement("div",{style:{width:"100%",height:"200px"}},t)),p?[c().createElement(Qv,{map:n,editNode:p}),c().createElement(Xv,{closeNodeEditor:d,editNode:p,map:n,onChange:i,isLocalizedLayerStylesEnabled:m})]:[c().createElement(eb,{title:c().createElement(b.Z,{msgId:"layers"})}),c().createElement(Yv,{selectedNodes:l,onSelect:u,onChange:i,map:n})])};var eh=r(92936);const th=(0,R.compose)((0,R.withHandlers)({onMapViewChanges:function(e){var t=e.onChange,r=void 0===t?function(){}:t;return function(e){r("map",e),r("mapStateSource",e.mapStateSource)}}}))(eh.Z);var rh=Yy(Ky);const nh=(0,R.compose)((0,p.connect)((0,D.P1)(Yd.xI,(function(e){return{widgetSelectionActive:e}}))),(0,Ba.Z)((function(e){return e.widgetSelectionActive}),(function(){return c().createElement("div",{style:{margin:"auto"}},c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0})),oh=(0,p.connect)((0,D.P1)(Yd.E2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editNode;return{editNode:t}})),{setEditNode:function(e){return(0,pe.t4)("editNode",e)},closeNodeEditor:function(){return(0,pe.t4)("editNode",void 0)}});function ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ah(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(r),!0).forEach((function(t){lh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ih(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e){return function(e){if(Array.isArray(e))return sh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const uh=(0,R.compose)((0,R.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t;return{layers:r.map&&r.map.layers}})),(0,p.connect)((function(){return{}}),{setLayers:function(e){return(0,pe.Rz)("map.layers",e)}}),(0,R.withHandlers)({addLayer:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n,i=e.catalog;return function(e){return i.localizedLayerStyles?o([].concat(ch(r),[(0,ne.normalizeLayer)(ah(ah({},e),{},{localizedLayerStyles:i.localizedLayerStyles}))])):o([].concat(ch(r),[(0,ne.normalizeLayer)(e)]))}},removeLayersById:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o(r.filter((function(t){return!(0,ue.find)((0,ue.castArray)(e),(function(e){return e===t.id}))})))}}})),ph=(0,R.withHandlers)({onRemoveSelected:function(e){var t=e.selectedLayers,r=void 0===t?[]:t,n=e.removeLayersById,o=void 0===n?function(){}:n,i=e.onNodeSelect,a=void 0===i?function(){}:i;return function(){o(r),r.forEach((function(e){return a(e,"layer",!1)}))}}});var fh=r(90173);function dh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(r),!0).forEach((function(t){yh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const bh=(0,R.compose)((0,p.connect)((function(){return{}}),{setMap:function(e){return(0,pe.Rz)("map",e)}}),(0,R.withHandlers)({isEpsgSupported:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.selectedNodes,o=void 0===n?[]:n;return function(){var e=r.map.layers,t=o.map((function(t){return e.find((function(e){return e.id===t}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),n=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"},i=!!(0,ue.head)(t)&&"differentCRS"!==n.crs&&n.crs;return i&&fh.default.defs(i)}},zoomTo:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.setMap,o=void 0===n?function(){}:n;return function(e){var t=r.map,n=r.map.layers,i=e.map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),a=i.length>1?i.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),i[0]):i[0],l=0,c=function(e){if((0,ue.isArray)(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if((0,ue.isObject)(e)){var t=(0,ue.mapValues)(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(a.bounds),s=zr.default.reprojectBbox(c,a.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(s){var u=zr.default.reproject(oe.default.getCenterForExtent(c,a.crs),a.crs,"EPSG:4326");if("EPSG:4326"===a.crs&&c&&c[0]<=-180&&c[1]<=-90&&c[2]>=180&&c[3]>=90)l=1;else{var p=zr.default.reprojectBbox(c,a.crs,t.projection||"EPSG:4326");l=oe.default.getZoomForExtent(p,t.size,0,21,null)}var f={minx:s[0],miny:s[1],maxx:s[2],maxy:s[3]},d=mh(mh({},t.bbox),{},{bounds:f});o(mh(mh({},r.map),{},{center:u,zoom:l,bbox:d,mapStateSource:"tool"}))}}}}),(0,R.withProps)((function(e){var t=e.isEpsgSupported;return{epsgSupported:(void 0===t?function(){}:t)()}}))),gh=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),(0,R.withProps)((function(e){var t=e.editorData;return{canConnect:!0,connected:!!(void 0===t?{}:t).mapSync}})),hy({center:"center",zoom:"zoom",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),vh=(0,R.compose)((0,p.connect)(Zy,{setPage:pe.YA,onChange:pe.Rz,insertWidget:pe.Qe},_y),uh,oh,ph,bh,(0,R.branch)((function(e){return!!e.editNode}),(0,R.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.setEditNode,o=void 0===n?function(){}:n;return{buttons:[{visible:1===r.length,tooltipId:"close",glyph:"1-close",onClick:function(){return o(!1)}}]}})),(0,R.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.epsgSupported,o=void 0!==n&&n,i=e.onRemoveSelected,a=void 0===i?function(){}:i,l=e.setEditNode,c=void 0===l?function(){}:l,s=e.zoomTo,u=void 0===s?function(){}:s;return{tocButtons:[{visible:r.length>0,glyph:"zoom-to",tooltipId:1===r.length?"toc.toolZoomToLayerTooltip":"toc.toolZoomToLayersTooltip",disabled:!o,onClick:o?function(){return u(r)}:function(){}},{visible:1===r.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){return c(r[0])}},{onClick:function(){return a()},visible:r.length>0,glyph:"trash",tooltipId:"toc.toolTrashLayerTooltip"}]}}))),gh,ky(void 0,{tooltipId:"widgets.builder.wizard.backToMapSelection"}),Dy((function(e){return 0===e.step})));var hh=(0,R.compose)((0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),(0,p.connect)((0,D.P1)(de.R7,(function(e){return{catalog:e}})))))(Kg),Oh=r(91312);function wh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Eh(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(r),!0).forEach((function(t){jh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ch,xh,Th,kh,Ih=c().createElement(Ng.Z,{glyph:"geoserver",padding:20}),Ah=function(e){var t=e.results,r=e.totalCount;return{items:(""!==t&&(0,ue.castArray)(t)||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,title:e.name,description:e.description,preview:e.thumbnail?c().createElement("img",{src:decodeURIComponent(e.thumbnail)}):Ih,map:e}})),total:r}},Fh=function(e){var t=e.text,r=void 0===t?"*":t,n=e.options,o=void 0===n?{}:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,Oh.jh)({category:"MAP",query:r,options:Ph({params:{start:10*i,limit:10}},o)}).map(Ah).catch((function(e){return Ai.Observable.of({error:e,items:[],total:0})}))},Dh={querySelector:".ms2-border-layout-body",pageSize:10},Rh=(0,R.compose)(Dg((Th=(Ch={loadPage:Fh,scrollSpyOptions:Dh,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}).loadPage,kh=Ch.scrollSpyOptions,Ph(Ph({},Eh(Ch,["loadPage","scrollSpyOptions"])),{},{scrollSpyOptions:Ph({skip:1},kh),loadPage:(xh=Th,function(e,t){return 0===t&&e&&!e.text?xh(e,t).map((function(e){var t,r=e.items,n=e.total;return Ph(Ph({},Eh(e,["items","total"])),{},{total:n,items:[{id:"EMPTY_MAP",title:c().createElement(b.Z,{msgId:"widgets.selectMap.emptyMap.title"}),description:c().createElement(b.Z,{msgId:"widgets.selectMap.emptyMap.description"}),preview:Ih,map:{id:"new.json"}}].concat((t=r,function(e){if(Array.isArray(e))return wh(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return wh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wh(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))})})):xh(e,t)}),hasMore:function(e){var t=e.total,r=e.items;return r&&r.length>=1&&"EMPTY_MAP"===r[0].id?t>r.length+1:t>r.length}}))),(0,R.withProps)((function(e){var t=e.items;return{skip:t&&t[0]&&"EMPTY_MAP"===t[0].id?1:0}}))),Nh=(0,Rg.Z)("searchText","setSearchText",""),Mh=(Dg({loadPage:Fh,scrollSpyOptions:Dh,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}),(0,R.mapPropsStream)((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.loadFirst,n=void 0===r?function(){}:r;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText",(function(e,t){return e===t})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.options;return n({text:t,options:r})})).ignoreElements()})))})));const Lh=(0,R.compose)(Nh,Rh,Mh);var _h=(0,Ua.Z)("placeholder")(g.FormControl);const Zh=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,n=e.searchText,o=e.title;return c().createElement(g.Grid,{className:"catalog-form",fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:12},o&&c().createElement("h4",{className:"text-center"},o),c().createElement(g.FormGroup,{controlId:"catalog-form"},c().createElement(_h,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:function(e){return r(e.currentTarget.value)}})))))};function Bh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bh(Object(r),!0).forEach((function(t){zh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Uh=(0,R.compose)((0,xi.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),(0,Ti.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:c().createElement(b.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(r(38064).Z),Wh=r(24384);function Vh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vh(Object(r),!0).forEach((function(t){Hh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const $h=(0,R.compose)((0,R.withState)("selected","setSelected",null),(0,R.withHandlers)({onMapChoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapSelected,r=void 0===t?function(){}:t,n=e.onSetIdentifyTrue,o=void 0===n?function(){}:n,i=e.selectedSource,a=void 0===i?{}:i,l=e.includeMapId,c=void 0!==l&&l;return function(e){return("string"==typeof e.id?Qm().get(e.id).then((function(e){return e.data})):Wh.Z.getData(e.id,{baseURL:a.baseURL})).then((function(t){var r=t.version||"string"==typeof e.id?Pr.ZP.normalizeConfig(t.map):Pr.ZP.convertFromLegacy(t);return qh(qh(qh({},r&&r.map||{}),c?{id:e.id}:{}),{},{groups:r&&r.groups||[],layers:(0,ne.excludeGoogleBackground)(r.layers.map((function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e})))})})).then((function(e){return e.layers=e.sources?e.layers.map((function(t){var r=(0,ne.extractTileMatrixFromSources)(e.sources,t);return qh(qh({},t),r)})):e.layers,r({map:e})})).then((function(){return o()}))}}}),(0,R.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=arguments.length>1?arguments[1]:void 0;return qh({canProceed:t},r)}))})));function Kh(e){return function(e){if(Array.isArray(e))return Yh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Yh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xh=Lh((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,n=e.selected,o=e.skip,i=void 0===o?0:o,a=e.onSelected,l=e.loading,s=e.searchText,u=e.items,p=void 0===u?[]:u,f=e.loaderProps,d=void 0===f?{}:f,m=e.total,y=e.header,g=e.title,v=void 0===g?c().createElement(b.Z,{msgId:"maps.title"}):g;return c().createElement(Fr.Z,{className:"map-catalog",header:y||c().createElement(Zh,{title:v,searchText:s,onSearchTextChange:r}),footer:c().createElement("div",{className:"catalog-footer"},c().createElement("span",null,l&&p.length>0?c().createElement(Mg.Z,null):null),(0,ue.isNil)(m)?null:c().createElement("span",{className:"res-info"},c().createElement(b.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:p.length-i,total:m}})))},c().createElement(Uh,{loaderProps:d,items:p.map((function(e){return e===n||n&&e&&e.map&&n.id===e.map.id?Gh(Gh({},e),{},{selected:!0}):e})),loading:l,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map;return a(t)}}))}));const Qh=$h((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onMapChoice,a=void 0===i?function(){}:i,l=e.stepButtons,s=void 0===l?[]:l,u=e.selected;return c().createElement(Fr.Z,{className:"bg-body layer-selector",header:c().createElement(og,{onClose:r},c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(Kh(s),[{tooltipId:"widgets.builder.wizard.useThisMap",onClick:function(){return a(u)},visible:!0,disabled:!u,glyph:"arrow-right"}])}))},c().createElement(Xh,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectAMap"}),selected:u,onSelected:function(e){return o(e)}}))})),Jh=(0,R.compose)((0,p.connect)((function(){return{}}),{onMapSelected:function(e){var t=e.map;return(0,pe.Rz)("map",(0,ne.normalizeMap)(t))},onSetIdentifyTrue:function(){return(0,pe.Rz)("map.mapInfoControl",!0)},onResetChange:pe.Rz}),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("map",void 0),r("widgetType",void 0)}}]}})))(Qh);var eO=vh((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.step,o=void 0===n?0:n,i=r.buttons,a=r.tocButtons,l=void 0===a?[]:a,s=r.stepButtons,u=void 0===s?[]:s,p=r.dashBoardEditing,f=void 0!==p&&p,d=r.editorData,m=void 0===d?{}:d,y=r.setPage,b=void 0===y?function(){}:y,g=r.onFinish,v=void 0===g?function(){}:g,h=r.toggleLayerSelector,O=void 0===h?function(){}:h,w=r.onChange,E=void 0===w?function(){}:w;return c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:i||[].concat(Uv(0===o?l:[]),[{onClick:function(){return b(Math.max(o-1,0))},visible:1===o,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.configureMapOptions"}],Uv(u),[{onClick:function(){var e;return E("map.mapInfoControl",!(null!=m&&null!==(e=m.map)&&void 0!==e&&e.mapInfoControl))},visible:f&&"map"===(null==m?void 0:m.widgetType),glyph:"info-sign",bsStyle:null!=m&&null!==(e=m.map)&&void 0!==e&&e.mapInfoControl?"success":"primary",tooltipId:null!=m&&null!==(t=m.map)&&void 0!==t&&t.mapInfoControl?"widgets.builder.wizard.disableIdentifyTool":"widgets.builder.wizard.enableIdentifyTool"},{onClick:function(){return O(!0)},visible:0===o,glyph:"plus",tooltipId:"widgets.builder.wizard.addLayer"},{onClick:function(){return b(Math.min(o+1,2))},visible:0===o,glyph:"arrow-right",tooltipId:"widgets.builder.wizard.configureWidgetOptions"},{onClick:function(){return v(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:Vv(o,m)}])})})),tO=(0,R.compose)((0,p.connect)(Zy,{onResetChange:pe.Rz}),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editorData,r=void 0===t?{}:t;return!r.map}),(0,R.renderComponent)(Jh)),(0,R.withState)("layerSelectorOpen","toggleLayerSelector",!1),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerSelectorOpen,r=void 0!==t&&t;return r}),(0,R.renderComponent)((0,R.compose)(uh,(0,R.withHandlers)({onLayerChoice:function(e){var t=e.toggleLayerSelector,r=void 0===t?function(){}:t,n=e.addLayer,o=void 0===n?function(){}:n;return function(e){o(e),r(!1)}}}),by)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onLayerChoice,a=void 0===i?function(){}:i,l=e.toggleLayerSelector,s=void 0===l?function(){}:l,u=e.selected,p=e.canProceed,f=e.layer,d=e.catalog,m=e.catalogServices;return c().createElement(Fr.Z,{className:"bg-body layer-selector",header:c().createElement(ig,{onClose:r},c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return s(!1)},tooltipId:"close",glyph:"1-close"},{onClick:function(){return a(f)},disabled:!u||!p,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",glyph:"plus"}]}),u&&!p?c().createElement(wl.Z,{glyph:"exclamation-mark",bsStyle:"warning",title:c().createElement(Wu.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:c().createElement(Wu.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},c().createElement(hh,{services:m,selected:u,catalog:d,onRecordSelected:function(e){return o(e)}}))})))),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",onClick:function(){r("map",void 0)}}}}))),rO=(0,p.connect)(Zy,{onChange:pe.Rz},_y)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,s=void 0===l?0:l,u=e.selectedNodes,p=void 0===u?[]:u,f=e.onNodeSelect,d=void 0===f?function(){}:f,m=e.editorData,y=void 0===m?{}:m,b=e.editNode,g=e.setEditNode,v=void 0===g?function(){}:g,h=e.closeNodeEditor,O=void 0===h?function(){}:h,w=e.isLocalizedLayerStylesEnabled,E=e.env;return c().createElement(rh,{step:s,setPage:a,onFinish:o,hideButtons:!0},c().createElement(Jv,{editNode:b,setEditNode:v,closeNodeEditor:O,onNodeSelect:d,selectedNodes:p,onChange:r,isLocalizedLayerStylesEnabled:w,preview:c().createElement(th,{onChange:r,layers:y.map&&y.map.layers,map:y.map,env:E,options:{style:{margin:10,height:"calc(100% - 20px)"}}}),map:y.map}),c().createElement(Lb,{key:"widget-options",data:y,onChange:r}))}));const nO=(0,R.compose)(tO,(0,R.withProps)((function(e){var t=e.editorData;return{map:(void 0===t?{}:t).map}})),nh,zv.Z,oh)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.toggleLayerSelector,i=void 0===o?function(){}:o,a=e.editorData,l=void 0===a?{}:a,s=e.editNode,u=e.setEditNode,p=e.closeNodeEditor,f=e.isLocalizedLayerStylesEnabled,d=e.env,m=e.selectedGroups,y=void 0===m?[]:m,b=e.exitButton,g=e.selectedLayers,v=void 0===g?[]:g,h=e.selectedNodes,O=e.onNodeSelect,w=void 0===O?function(){}:O,E=e.availableDependencies,S=void 0===E?[]:E,P=e.toggleConnection,j=void 0===P?function(){}:P;return c().createElement(Fr.Z,{className:"map-selector",header:c().createElement(ig,{onClose:n},c().createElement(eO,{exitButton:b,editorData:l,availableDependencies:S,toggleConnection:j,selectedNodes:h,selectedLayers:v,selectedGroups:y,onNodeSelect:w,toggleLayerSelector:i}))},t?c().createElement(rO,{setEditNode:u,editNode:s,closeNodeEditor:p,onNodeSelect:w,isLocalizedLayerStylesEnabled:f,env:d,selectedNodes:h}):null)})),oO=(0,R.compose)((0,R.setDisplayName)("CounterLayerSelector"),gy,(0,R.defaultProps)({layerValidationStream:function(e){return e.switchMap((function(e){return function(e){return Ai.Observable.forkJoin((0,Ym.v$)({layer:e}),ry(e))}(e)}))}}),uy,by);var iO=r(39589),aO=r(80844);function lO(){return(lO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var cO=(0,xi.Z)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),sO=(0,R.compose)((0,R.lifecycle)({componentDidMount:function(){this.props.onChange&&this.props.onChange("options.groupByAttributes",void 0)}}),pb,Xy((function(e){var t=e.options;return 0===(void 0===t?[]:t).length})))(Mb),uO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.hasAggregateProcess;return e.aggregateFunction&&e.aggregationAttribute&&r},pO=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.valid,r=e.data,n=void 0===r?[]:r,o=e.options,i=void 0===o?{}:o,a=e.setValid,l=void 0===a?function(){}:a,c=e.error,s=e.hasAggregateProcess,u=!(0,ue.isNil)(n[0])&&!c;!!t!=!!u&&uO(i,{hasAggregateProcess:s})&&l(u)}})),fO=(0,R.compose)(Zb.Z,Bb.Z,Gb.Z,iO.Z,pO,cO,Ub.Z,zb.Z),dO={style:{width:450,height:100}},mO=Yy(Ky),yO=fO(aO.Z),bO=function(e){var t=e.data,r=void 0===t?{}:t,n=e.layer,o=e.dependencies,i=void 0===o?{}:o,a=e.valid,l=e.setValid,s=void 0===l?function(){}:l,u=e.hasAggregateProcess;return uO(r.options,{hasAggregateProcess:u})?c().createElement(yO,lO({hasAggregateProcess:u},dO,{valid:a,dependenciesMap:r.dependenciesMap,dependencies:i,setValid:s,type:r.type,legend:r.legend,layer:r.layer||n,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,options:r.options})):c().createElement(aO.Z,lO({},dO,{data:[{data:42}],options:r.options,series:[{dataKey:"data"}]}))};const gO=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o,a=e.hasAggregateProcess;n&&!uO(r.options,{hasAggregateProcess:a})&&i(!1)}}))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.setValid,s=void 0===l?function(){}:l,u=e.valid,p=e.formOptions,f=e.data,d=void 0===f?{}:f,m=e.layer,y=void 0===m?{}:m,b=e.step,g=void 0===b?0:b,v=e.types,h=e.featureTypeProperties,O=e.dependencies,w=e.hasAggregateProcess;return c().createElement(mO,{step:g,setPage:a,onFinish:o,isStepValid:function(e){return 1!==e||uO(d.options,{hasAggregateProcess:w})},hideButtons:!0},c().createElement(sO,{hasAggregateProcess:w,dependencies:O,key:"chart-options",formOptions:p,featureTypeProperties:h,types:v,data:d,onChange:r,layer:d.layer||y,sampleChart:c().createElement(bO,{hasAggregateProcess:w,data:d,valid:u,layer:d.layer||y,dependencies:O,setValid:function(e){return s(e&&uO(d.options,{hasAggregateProcess:w}))}})}),c().createElement(Lb,{key:"widget-options",data:d,onChange:r,layer:d.layer||y,sampleChart:c().createElement(bO,{hasAggregateProcess:w,data:d,valid:u,layer:d.layer||y,dependencies:O,setValid:function(e){return s(e&&uO(d.options,{hasAggregateProcess:w}))}})}))}));function vO(e){return function(e){if(Array.isArray(e))return hO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return hO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var OO=function(e){switch(e){case 0:return"widgets.builder.wizard.backToTypeSelection";case 1:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},wO=function(e){switch(e){case 0:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},EO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function SO(){return(SO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function PO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var jO=(0,p.connect)(Zy,{setPage:pe.YA,setValid:function(e){return(0,pe.t4)("valid",e)},onEditorChange:pe.Rz,insertWidget:pe.Qe},_y)((0,R.compose)(sy({needsWPS:!0}),(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}))(gO)),CO=(0,R.compose)((0,p.connect)(Zy,{openFilterEditor:pe.fy,setPage:pe.YA,onChange:pe.Rz,insertWidget:pe.Qe},_y),wy,ky(),Dy((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,n=e.step,o=void 0===n?0:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.editorData,s=void 0===l?{}:l,u=e.valid,p=e.setPage,f=void 0===p?function(){}:p,d=e.onFinish,m=void 0===d?function(){}:d;return c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,o-1))},visible:o>0,glyph:"arrow-left",tooltipId:OO(o)}].concat(vO(a),[{visible:0===o,onClick:r,disabled:!u,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return f(Math.min(o+1,2))},visible:0===o,disabled:0===o&&!u,glyph:"arrow-right",tooltipId:wO(o)},{onClick:function(){return m(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:EO(o,s)}])})}));const xO=(0,R.compose)((0,p.connect)(Zy),Ey,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,R.renderComponent)(oO(Xg))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.exitButton,i=e.editorData,a=e.toggleConnection,l=e.availableDependencies,s=void 0===l?[]:l,u=e.dependencies,p=PO(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return c().createElement(Fr.Z,{header:c().createElement(ig,{onClose:n},c().createElement(CO,{exitButton:o,editorData:i,toggleConnection:a,availableDependencies:s,onClose:n}))},t?c().createElement(jO,SO({formOptions:{showColorRamp:!1,showUom:!0,showGroupBy:!1,showLegend:!1},dependencies:u},p)):null)}));function TO(e){return function(e){if(Array.isArray(e))return kO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IO=function(e){switch(e){case 1:return"widgets.builder.wizard.backToPreview";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},AO=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":void 0},FO=function(e){return e.mapSync},DO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},RO=r(46173),NO=r(13314),MO=r(70919),LO=Yy(Ky),_O=(0,R.compose)(NO.Z,(0,Ti.Z)((function(e){return!e.valid}),{title:c().createElement(b.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegend"}),description:c().createElement(b.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegendDescription"})}),(0,RO.Z)(!1))(MO.Z);const ZO=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),(0,R.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.availableDependencies;return{canConnect:(void 0===n?[]:n).length>0,connected:!!r.mapSync}})));function BO(){return(BO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function GO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var zO=(0,R.withProps)((function(e){var t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData;return{valid:r.length>0&&n.mapSync}})),UO=(0,D.P1)(Q.Pz,(function(e){return{currentLocale:e}})),WO=(0,R.compose)((0,p.connect)(Zy,{setPage:pe.YA,onEditorChange:pe.Rz,insertWidget:pe.Qe},_y),(0,p.connect)(UO),zO,(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,s=void 0===l?0:l,u=e.dependencies,p=e.valid,f=e.data,d=void 0===f?{}:f,m=e.currentLocale,y=e.language;return c().createElement(LO,{step:s,setPage:a,onFinish:o,hideButtons:!0},c().createElement(g.Row,null,c().createElement(eb,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.preview"})}),c().createElement(g.Col,{xs:12},c().createElement("div",{style:{marginBottom:"30px"}},c().createElement(_O,{valid:p,dependencies:u,dependenciesMap:d.dependenciesMap,key:"widget-options",onChange:r,currentLocale:m,language:y})))),c().createElement(Lb,{key:"widget-options",onChange:r}))})),VO=(0,R.compose)((0,p.connect)(Zy,{openFilterEditor:pe.fy,setPage:pe.YA,onChange:pe.Rz,insertWidget:pe.Qe},_y),ZO,zO,(0,p.connect)((function(){return{}}),{onLayerChoice:function(e){return(0,pe.Rz)("layer",e)},onResetChange:pe.Rz}),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),ky((function(e){return 0===e.step})),Dy((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.valid,a=e.stepButtons,l=void 0===a?[]:a,s=e.onFinish,u=void 0===s?function(){}:s,p=e.setPage,f=void 0===p?function(){}:p;return c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:IO(r)}].concat(TO(l),[{onClick:function(){return f(Math.min(r+1,1))},visible:0===r,disabled:0===r&&!FO(o)||!i,glyph:"arrow-right",tooltipId:AO(0,i)},{onClick:function(){return u(Math.min(r+1,1))},visible:1===r,glyph:"floppy-disk",tooltipId:DO(r,o)}])})}));const qO=(0,R.compose)((0,p.connect)(Zy),Ey,ZO,hy({layers:"layers",zoom:"zoom",viewport:"viewport"}),(0,R.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.editorData;return!(void 0===t?{}:t).mapSync})).take(1).distinctUntilChanged().do((function(e){var t=e.toggleConnection;return(void 0===t?function(){}:t)(e.availableDependencies)})).ignoreElements())})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.editorData,i=void 0===o?{}:o,a=e.exitButton,l=e.toggleConnection,s=e.availableDependencies,u=void 0===s?[]:s,p=e.dependencies,f=GO(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return c().createElement(Fr.Z,{header:c().createElement(ig,{onClose:n},c().createElement(VO,{editorData:i,exitButton:a,toggleConnection:l,availableDependencies:u,onClose:n}),0===(0,ue.get)(i,"options.propertyName.length")?c().createElement(wl.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:c().createElement(b.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?c().createElement(WO,BO({availableDependencies:u,editorData:i,dependencies:p},f)):null)}));function HO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HO(Object(r),!0).forEach((function(t){KO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var YO=[{title:c().createElement(b.Z,{msgId:"widgets.types.chart.title"}),type:"chart",caption:c().createElement(b.Z,{msgId:"widgets.types.chart.caption"}),glyph:"stats",className:"ms-widget-selector-chart"},{title:c().createElement(b.Z,{msgId:"widgets.types.text.title"}),type:"text",glyph:"sheet",caption:c().createElement(b.Z,{msgId:"widgets.types.text.caption"}),className:"ms-widget-selector-text"},{title:c().createElement(b.Z,{msgId:"widgets.types.table.title"}),type:"table",glyph:"features-grid",caption:c().createElement(b.Z,{msgId:"widgets.types.table.caption"}),className:"ms-widget-selector-table"},{title:c().createElement(b.Z,{msgId:"widgets.types.counter.title"}),type:"counter",glyph:"counter",caption:c().createElement(b.Z,{msgId:"widgets.types.counter.caption"}),className:"ms-widget-selector-counter"},{title:c().createElement(b.Z,{msgId:"widgets.types.map.title"}),type:"map",glyph:"1-map",caption:c().createElement(b.Z,{msgId:"widgets.types.map.caption"}),className:"ms-widget-selector-map"},{title:c().createElement(b.Z,{msgId:"widgets.types.legend.title"}),type:"legend",glyph:"list",caption:c().createElement(b.Z,{msgId:"widgets.types.legend.caption"}),className:"ms-widget-selector-legend"}],XO=(0,p.connect)((function(){return{}}),{onSelect:function(e){return(0,pe.Rz)("widgetType",e)}})((function(e){var t=e.widgetTypes,r=void 0===t?YO:t,n=e.typeFilter,o=void 0===n?function(){return!0}:n,i=e.onSelect,a=void 0===i?function(){}:i;return c().createElement(za.Z,{key:"content",onItemClick:function(e){a(e.type)},items:r&&r.filter(o).map((function(e){return $O($O({},e),{},{preview:c().createElement(Ng.Z,{glyph:e.glyph,padding:20})})}))})}));function QO(){return(QO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function JO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var ew=(0,D.P1)(Yd.YI,(function(e){return{widgetType:e&&e.widgetType}})),tw={chart:lv,text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r;return c().createElement(Fr.Z,{header:c().createElement(ig,{onClose:n},c().createElement(yv,null))},t?c().createElement(bv,null):null)},table:Gv,map:nO,counter:xO,legend:qO};const rw=(0,R.compose)((0,p.connect)(ew),(0,R.withProps)((function(e){var t=e.typeFilter,r=void 0===t?function(){return!0}:t,n=e.availableDependencies,o=void 0===n?[]:n;return{typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e)&&!("legend"===e.type&&0===o.length)}}})),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return!t}),(0,R.renderComponent)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.typeFilter;return c().createElement(Fr.Z,{className:"bg-body",header:c().createElement(ig,{onClose:n},c().createElement(b.Z,{msgId:"widgets.selectWidgetType"}))},t?c().createElement(XO,{typeFilter:o}):null)})),(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.onClose,n=void 0===r?function(){}:r,o=JO(e,["widgetType","onClose"]),i=tw[t];return c().createElement(i,QO({},o,{onClose:n,widgetType:t}))}})))();function nw(e){return(nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ow(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aw(e,t){return(aw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lw(e,t){return!t||"object"!==nw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cw(e){return(cw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sw(Object(r),!0).forEach((function(t){pw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fw=(0,R.compose)((0,p.connect)((0,D.P1)(Yd.h9,Yd.zA,(function(e,t){return uw({dependencies:e},t)})),{toggleConnection:pe.w2}),$m)(rw),dw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aw(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cw(n);if(o){var r=cw(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lw(this,e)});function a(){return ow(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){return c().createElement(Hm.Z,{open:this.props.enabled,size:this.props.dockSize,zIndex:this.props.zIndex,position:this.props.position,bsStyle:"primary",hideHeader:!0,style:uw(uw({},this.props.layout),{},{background:"white"})},c().createElement(fw,{enabled:this.props.enabled,onClose:this.props.onClose,typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"map"!==t&&"legend"!==t}}))}}])&&iw(t.prototype,r),a}(c().Component);pw(dw,"propTypes",{id:u().string,enabled:u().bool,limitDockHeight:u().bool,fluid:u().bool,zIndex:u().number,dockSize:u().number,position:u().string,onMount:u().func,onUnmount:u().func,onClose:u().func,dimMode:u().string,src:u().string,style:u().object,layout:u().object}),pw(dw,"defaultProps",{id:"widgets-builder-plugin",enabled:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},onClose:function(){},layout:{}});var mw=(0,p.connect)((0,D.P1)(J.dH,(function(e){return(0,ze.ic)(e,{height:!0})}),(function(e,t){return{enabled:e,layout:t}})),{onMount:function(){return(0,v.Xg)("widgetBuilder","available",!0)},onUnmount:function(){return(0,v.Xg)("widgetBuilder","available",!1)},onClose:v.Xg.bind(null,"widgetBuilder","enabled",!1,!1)})(dw);const yw=(0,O.rx)("WidgetsBuilder",{component:mw,epics:qm,containers:{TOC:{doNotHide:!0,name:"WidgetBuilder"}}});function bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bw(Object(r),!0).forEach((function(t){vw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hw=function(e){return!e.dataGrid||!e.dataGrid.static},Ow=(0,D.P1)(Yd.zm,Yd.YR,Yd.yZ,Yd.lF,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,ue.sortBy)(e.filter(hw).map((function(e){return(0,ue.findIndex)(t,(function(t){return t===e.id}))>=0?gw(gw({},e),{},{collapsed:!0}):e})),(function(e){var t=n[e.id]&&n[e.id].layout,o=(0,ue.find)(r,{i:e.id})||t||{},i=o.x,a=void 0===i?0:i,l=o.y;return 100*(void 0===l?0:l)+a}))})),ww=(0,R.compose)((0,R.defaultProps)({toolsOptions:{seeHidden:"user.role===ADMIN"}}),em("toolsOptions",{asObject:!0}),(0,R.withProps)((function(e){var t=e.widgets,r=e.toolsOptions;return{widgets:(void 0===r?{seeHidden:!1}:r).seeHidden?t:t.filter((function(e){return!e.hide}))}})));function Ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ew(Object(r),!0).forEach((function(t){Pw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.type,n=t&&"chart"!==t?t:r;switch(n){case"text":return"sheet";case"table":return"features-grid";case"pie":return"pie-chart";case"line":return"1-line";case"map":return"1-map";case"counter":return"counter";default:return"stats"}};const Cw=(0,R.compose)((0,R.withPropsOnChange)(["btnGroupProps"],(function(e){var t=e.btnGroupProps;return{btnGroupProps:Sw(Sw({},t),{},{className:"widgets-bar"+(t&&t.className?" ".concat(t.className):"")})}})),(0,R.withPropsOnChange)(["widgets","onClick"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.onClick,o=void 0===n?function(){}:n;return{buttons:r.map((function(e){return{glyph:jw(e),tooltip:e.title,className:e.collapsed?"btn-tray":"btn-tray active",onClick:function(){return o(e)}}}))}})))(Dr.Z);function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xw(Object(r),!0).forEach((function(t){kw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Iw=(0,R.compose)((0,p.connect)((0,D.P1)(Ow,(function(e){return{widgets:e}})),{onClick:pe.f}),(0,R.defaultProps)({btnGroupProps:{className:"widgets-toolbar",style:{marginLeft:2,marginRight:2}}}),ww,(0,R.withProps)((function(e){var t=e.btnGroupProps,r=void 0===t?{}:t,n=e.btnDefaultProps,o=void 0===n?{}:n;return{btnGroupProps:Tw({bsSize:"xsmall"},r),btnDefaultProps:Tw({bsSize:"xsmall"},o||{})}})))(Cw);function Aw(e){return(Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nw(e,t){return(Nw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mw(e,t){return!t||"object"!==Aw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lw(e){return(Lw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zw=(0,Ge.Z)(qe.Z),Bw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expanded,r=e.onClick,n=void 0===r?function(){}:r;return c().createElement(Zw,{tooltipId:t?"widgets.tray.collapseTray":"widgets.tray.expandTray",bsSize:"xsmall",bsStyle:"default",style:{borderColor:"transparent"},onClick:n},c().createElement(g.Glyphicon,{glyph:t?"chevron-right":"chevron-left"}))},Gw=(0,R.compose)((0,p.connect)((0,D.P1)(Yd.E5,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{onClick:function(){return(0,pe.Ff)()}}),ww,(0,R.withProps)((function(e){var t=e.widgets;return{shouldExpand:0===(void 0===t?[]:t).length}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,r=void 0===t?function(){}:t,n=e.shouldExpand,o=void 0!==n&&n;return c().createElement(Zw,{tooltipId:o?"widgets.tray.expandAll":"widgets.tray.collapseAll",bsStyle:o?"primary":"success active",bsSize:"xsmall",onClick:r},c().createElement(g.Glyphicon,{glyph:"list"}))})),zw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nw(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lw(n);if(o){var r=Lw(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Mw(this,e)});function a(){return Dw(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e,t=this;return this.props.enabled?c().createElement("div",{className:"widgets-tray",style:{marginBottom:32,marginRight:80,bottom:0,right:0,position:"absolute"}},c().createElement(Fr.Z,{columns:[c().createElement(Bw,{key:"collapse-tray",toolsOptions:this.props.toolsOptions,expanded:this.props.expanded,onClick:function(){return t.props.setExpanded(!t.props.expanded)}}),c().createElement(Gw,{key:"collapse-all",toolsOptions:this.props.toolsOptions})].concat((e=this.props.items.map((function(e){return e.tool}))||[],function(e){if(Array.isArray(e))return Fw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},this.props.expanded?c().createElement(Iw,{toolsOptions:this.props.toolsOptions}):null)):null}}])&&Rw(t.prototype,r),a}(c().Component);_w(zw,"propTypes",{enabled:u().bool,toolsOptions:u().object,items:u().array,expanded:u().bool,setExpanded:u().func}),_w(zw,"defaultProps",{enabled:!0,items:[],expanded:!1,setExpanded:function(){}});const Uw=(0,R.compose)((0,R.withState)("expanded","setExpanded",!1),(0,p.connect)((0,D.P1)(Ow,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{toggleTray:pe.ep}),ww,(0,R.withProps)((function(e){var t=e.widgets,r=void 0===t?[]:t;return{hasCollapsedWidgets:r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collapsed;return t})).length>0,hasTrayWidgets:r.length>0}})),(0,R.lifecycle)({componentDidMount:function(){this.props.toggleTray&&this.props.toggleTray(!0)},componentWillUnmount:function(){this.props.toggleTray&&this.props.toggleTray(!1)}}),(0,R.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("hasCollapsedWidgets").do((function(e){var t=e.setExpanded;return(void 0===t?function(){}:t)(e.hasCollapsedWidgets)})).ignoreElements())})),(0,R.withProps)((function(e){var t=e.enabled,r=e.hasTrayWidgets;return{enabled:t&&r}})))(zw);var Ww=r(57676),Vw=r(81808),qw=r(97291);function Hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hw(Object(r),!0).forEach((function(t){Kw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yw=function(e){return((0,Yd.E5)(e)||[]).filter((function(e){return!(0,ue.get)(e,"dataGrid.static")})).length>0},Xw=function(e){return function(t){return t.take(1).switchMap((function(){return Ai.Observable.of((0,q.um)($w($w({},e),{},{autoDismiss:8,position:"tr",uid:"timeline-collapsed"})))})).merge(t)}};const Qw={collapseTimelineOnWidgetsEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return Ai.Observable.merge(e.ofType(pe.Ym,pe.uU,Vw.ok,pe.$A,pe.Jm).filter((function(){return Yw(n())&&(0,qw.pn)(n())}))).switchMap((function(){return Ai.Observable.of((0,Ww.w2)(!0))})).let(Xw({title:"widgets.tray.notifications.collapsed.timelineTitle",message:"widgets.tray.notifications.collapsed.message"}))},collapseWidgetsOnTimelineEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return Ai.Observable.merge(e.ofType(Ww.M5).filter((function(e){return!e.collapsed})),e.ofType(h.yS).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProperties,r=void 0===t?{}:t;return r.dimensions}))).filter((function(){return Yw(n())&&(0,qw.qJ)(n())&&(0,qw.pn)(n())})).switchMap((function(){return Ai.Observable.of((0,pe.Ff)())})).let(Xw({title:"widgets.tray.notifications.collapsed.widgetsTitle",message:"widgets.tray.notifications.collapsed.message"}))},expandTimelineIfCollapsedOnTrayUnmount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(pe.yY,pe.$A,Vw.ok).filter((function(){return!(0,qw.pn)(n())&&(0,qw.qJ)(n())})).filter((function(){return!Yw(n())})).switchMap((function(){return Ai.Observable.of((0,Ww.w2)(!1))}))}},Jw={WidgetsTrayPlugin:tm(Uw),epics:Qw};var eE=r(26656),tE=r.n(eE),rE=r(37101);function nE(e){return(nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oE(){return(oE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function iE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iE(Object(r),!0).forEach((function(t){dE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sE(e,t){return(sE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uE(e,t){return!t||"object"!==nE(t)&&"function"!=typeof t?pE(e):t}function pE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fE(e){return(fE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sE(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fE(n);if(o){var r=fE(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return uE(this,e)});function a(){var e;lE(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return dE(pE(e=i.call.apply(i,[this].concat(r))),"system",(function(){return e.refs.notify})),dE(pE(e),"updateNotifications",(function(t){var r=t.map((function(e){return e.uid})),n=e.system().state.notifications||[];n.forEach((function(t){r.indexOf(t.uid)<0&&e.system().removeNotification(t.uid)})),t.forEach((function(t){if(n.indexOf(t.uid)<0){var r,o=t.message,i=(0,ie.S$)(e.context.messages,o);r=t.values?(0,e.props.intl.formatMessage)(r=(0,rE.defineMessages)({id:o,defaultMessage:i}),t.values):i||o,e.system().addNotification(aE(aE({},t),{},{title:(0,ie.S$)(e.context.messages,t.title)||t.title,message:r,action:t.action&&{label:(0,ie.S$)(e.context.messages,t.action.label)||t.action.label,callback:t.action.dispatch?function(){e.props.onDispatch(t.action.dispatch)}:t.action.callback},onRemove:function(){e.props.onRemove(t.uid),t.onRemove&&t.onRemove()}}))}}))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.updateNotifications(this.props.notifications)}},{key:"componentDidUpdate",value:function(){var e=(this.props||[]).notifications;this.updateNotifications(e)}},{key:"render",value:function(){var e=this.props,t=(e.notifications,e.onRemove,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["notifications","onRemove"]));return c().createElement(m.Z,null,c().createElement(tE(),oE({ref:"notify"},t)))}}])&&cE(t.prototype,r),a}(c().Component);dE(mE,"propTypes",{notifications:u().array,intl:rE.intlShape.isRequired,onRemove:u().func,onDispatch:u().func}),dE(mE,"contextTypes",{messages:u().object}),dE(mE,"defaultProps",{notifications:[],onRemove:function(){},onDispatch:function(){}});const yE=(0,rE.injectIntl)(mE);const bE={NotificationsPlugin:(0,p.connect)((function(e){return{notifications:e&&e.notifications}}),{onRemove:q.Cp,onDispatch:q.Ce})(yE),reducers:{notifications:r(97080).Z},epics:{clearNotificationOnLocationChange:function(e){return e.ofType(Lm.nk).switchMap((function(){return Ai.Observable.of((0,q.ZH)())}))}}};var gE=r(3523),vE=r(32833),hE=r(13292),OE=r.n(hE),wE=r(34387),EE=r(96958),SE=r(50937),PE=r.n(SE),jE=r(21914),CE=r(41156),xE=r(29386),TE=r(31255),kE=r(69842);function IE(e){return function(e){if(Array.isArray(e))return AE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return AE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AE(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FE(Object(r),!0).forEach((function(t){RE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=(0,TE.Vf)(e),i=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*i:o.page*i,maxFeatures:i}},ME=function(e,t){return DE(DE({},e),{},{pagination:t})},LE=function(e,t,r){var n=r.insert,o=r.update,i=r.propertyChange,a=r.getPropertyName;return(0,r.transaction)(t.map((function(e){return n(e)})),Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(r){return o([i(a(r),e[t][r]),(0,wE.fidFilter)("ogc",t)])}))})))},_E=function(e,t){return Ai.Observable.defer((function(){return Qm().post(e,t,{headers:{"Content-Type":"application/xml"}})})).let(Jm.oB)},ZE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featuregrid;return(0,h.He)(t.selectedLayer,{filterObj:void 0})},BE=function(e){return function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.update,o=void 0===n?{}:n,i=r.append,a=(0,TE.Li)(e.getState()),l=a.id,c=DE({},(0,ue.get)(e.getState(),'featuregrid.advancedFilters["'.concat(l,'"]')));if(c){var s=(0,TE.M0)(e.getState())||{},u=(0,ue.reduce)(s,(function(e,t,r){return(0,EE.dJ)(DE({attribute:r},t),e)}),{}),p="AND";u.spatialField&&(c.spatialField=void 0,p=u.spatialFieldOperator);var f=(0,uu.composeAttributeFilters)([c,u],"AND",p),d=DE(DE({},c),f);return(0,_m.rh)(d,o.type)}var m=o;return i&&null!=o&&o.attribute&&(m=(0,TE.M0)(e.getState())[null==o?void 0:o.attribute]),(0,_m.rh)((0,EE.dJ)(m,(0,Zm.X1)(e.getState())),null===(t=m)||void 0===t?void 0:t.type)}},GE=function(e,t){return e.ofType(h.R8).switchMap((function(r){var n,o=r.layer,i=(0,ue.get)(t.getState(),"query.typeName");return(n=Ai.Observable).of.apply(n,IE(i!==o.name?[(0,Mm.mc)()]:[]).concat([(0,v.Xg)("drawer","enabled",!1),(0,Rm.uF)(o.id),(0,Rm.t9)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,i=r.id,a=(0,ue.get)(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]')),l=function(){return(0,_m.rP)(n,a||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return(0,Zm.hk)(t.getState(),o)?Ai.Observable.of(l(),(0,_m.gT)(n,o)):Ai.Observable.of((0,_m.gT)(n,o)).merge(e.ofType(_m.u7).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o})).map(l))}(e,t,o))}))},zE=function(e){return e.ofType(_m.DR).switchMap((function(e){return Ai.Observable.of((0,Rm.uF)(e.id))}))},UE=function(e,t){return e.ofType(_m.Yx).switchMap((function(){return Ai.Observable.of((0,Rm.oO)(0)).concat((0,TE.eK)(t.getState())===Rm.EH.VIEW?Ai.Observable.of((0,Rm.nY)()):Ai.Observable.empty())}))},WE=function(e,t){return e.ofType(Rm.dY).switchMap((function(r){var n=r.sortBy,o=r.sortOrder;return Ai.Observable.of((0,_m.IO)((0,Zm.Bu)(t.getState()),ME(DE(DE({},(0,Zm.X1)(t.getState())),{},{sortOptions:{sortBy:n,sortOrder:o}}),NE(t.getState())),(0,TE.TC)(t.getState()))).merge(e.ofType(_m.Hu).map((function(e){return(0,Rm.UB)((0,ue.get)(e,"result.features",[]),[(0,ue.get)(e,"filterObj.pagination.startIndex")])})).takeUntil(e.ofType(_m.VT)).take(1))}))},VE=function(e,t){return e.ofType(Rm.$O).switchMap((function(){var r,n=null===(r=(0,TE.Vf)(t.getState()))||void 0===r?void 0:r.size;return e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.value})).switchMap((function(){var r=!1;return e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.deactivated})).switchMap((function(e,n){return 0===n?(r=!0,Ai.Observable.from([(0,Rm.Jr)(1e5),(0,Rm.KD)([]),BE(t)(e)])):Ai.Observable.of(BE(t)(e))})).takeUntil(Ai.Observable.merge(e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(Rm.sF,Lm.nk))).merge(e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).take(1).switchMap((function(e){return r?Ai.Observable.of((0,Rm.Jr)(n),BE(t)(e)):Ai.Observable.of(BE(t)(e))})).takeUntil(e.ofType(Rm.sF,Lm.nk))).merge(e.ofType(Rm.sF,Lm.nk).take(1).switchMap((function(){var e,o=(0,Rm.a8)({attribute:null===(e=(0,ny.findGeometryProperty)((0,Zm.Qs)(t.getState())))||void 0===e?void 0:e.name,enabled:!1,type:"geometry"});return r?Ai.Observable.of((0,Rm.Jr)(n),o,(0,Rm.pP)(o)):Ai.Observable.of(o,(0,Rm.pP)(o))})))}))}))},qE=function(e,t){return e.ofType(Rm.iB).switchMap((function(e){return Ai.Observable.of(BE(t)(e.updateFilterAction))}))},HE=function(e,t){return e.ofType(_m.Yx).switchMap((function(){return e.ofType(Rm._u).filter((function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type})).map(BE(t))}))},$E=function(e,t){return e.ofType(Rm.aO).filter((function(){return(0,TE.eK)(t.getState())===Rm.EH.EDIT})).switchMap((function(){return((0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{}).value?Ai.Observable.empty():Ai.Observable.of((0,Rm.a8)({attribute:(0,ny.findGeometryProperty)((0,Zm.Qs)(t.getState())).name,enabled:!0,type:"geometry"}))}))},KE=function(e){return e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).switchMap((function(){return Ai.Observable.of((0,Rm.dq)())}))},YE=function(e,t){return e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(V.TR).switchMap((function(e){var r=e.point,n=r.latlng,o=r.pixel,i=r.modifiers,a=i.ctrl,l=i.metaKey,c=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},s=(0,X.uy)(t.getState()),u=zr.default.reproject([n.lng,n.lat],"EPSG:4326",s),p=oe.default.getHook(oe.default.GET_COORDINATES_FROM_PIXEL_HOOK),f=zr.default.calculateCircleRadiusFromPixel(p,o,u,4);return c.deactivated?Ai.Observable.empty():Ai.Observable.of((0,Rm.dq)({multiselect:a||l}),(0,Rm.a8)(DE(DE({},c),{},{value:{attribute:c.attribute||(0,ue.get)((0,kE.vE)(t.getState()),"attribute"),geometry:{center:[u.x,u.y],coordinates:zr.default.calculateCircleCoordinates(u,f,12),extent:[u.x-f,u.y-f,u.x+f,u.y+f],projection:s,radius:f,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}}),a||l))})).takeUntil(Ai.Observable.merge(e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(Lm.nk)))}))},XE=function(e,t){return e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(CE.fy).switchMap((function(e){var r=e.boxEndInfo,n=r.boxExtent,o=r.modifiers,i=o.ctrl,a=o.metaKey,l=zr.default.getPolygonFromExtent(n),c=(0,X.uy)(t.getState()),s=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return s.deactivated?Ai.Observable.empty():Ai.Observable.of((0,Rm.dq)({multiselect:i||a}),(0,Rm.a8)(DE(DE({},s),{},{value:{geometry:DE(DE({},l.geometry),{},{projection:c}),attribute:s.attribute||(0,ue.get)((0,kE.vE)(t.getState()),"attribute"),method:"Rectangle",operation:"INTERSECTS"}}),i||a))})).takeUntil(Ai.Observable.merge(e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}))))}))},QE=function(e){return e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return Ai.Observable.of((0,CE.ZR)("start"))}))},JE=function(e){return Ai.Observable.merge(e.ofType(Rm._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(Rm.sF)).switchMap((function(){return Ai.Observable.of((0,CE.ZR)("end"))}))},eS=function(e,t){return e.ofType(_m.Hu).filter((function(e){return"geometry"===e.reason})).switchMap((function(e){var r=e.result,n=(0,ue.get)(r,"features"),o=(0,TE.gz)(t.getState()),i=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}));return Ai.Observable.of((0,Rm.KD)(n.length>0&&i&&i.value?IE(n):[],o))}))},tS=function(e){return e.ofType(Rm.VV).flatMap((function(e){var t=e.activated;return Ai.Observable.of((0,Rm.YG)(t),(0,Rm.VH)(t))}))},rS=function(e,t){return e.ofType(Rm._9).flatMap((function(){var e=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,TE.LB)(t.getState()),n=(0,TE.b4)(t.getState());return Ai.Observable.of((0,Rm.a8)(DE(DE({},e),{},{type:"geometry",attribute:e.attribute||(0,ue.get)((0,kE.vE)(t.getState()),"attribute"),deactivated:!(!r&&!n&&e.deactivated)})))}))},nS=function(e,t){return Ai.Observable.merge(e.ofType(Rm.IN,Nm.DI,Rm.JB,Rm.K8),e.ofType(Rm.B8).filter((function(e){return!!e.deactivated}))).flatMap((function(){var e=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return e.deactivated?Ai.Observable.empty():Ai.Observable.of((0,Rm.a8)(DE(DE({},e),{},{type:"geometry",attribute:e.attribute||(0,ue.get)((0,kE.vE)(t.getState()),"attribute"),deactivated:!0})))}))},oS=function(e,t){return Ai.Observable.merge(e.ofType(Rm.AY,Rm.yi),e.ofType(Rm.B8).filter((function(e){return!e.deactivated}))).flatMap((function(){var e=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,TE.LB)(t.getState()),n=(0,TE.b4)(t.getState());return!e.deactivated||r||n?Ai.Observable.empty():Ai.Observable.of((0,Rm.a8)(DE(DE({},e),{},{type:"geometry",attribute:e.attribute||(0,ue.get)((0,kE.vE)(t.getState()),"attribute"),deactivated:!1})))}))},iS=function(e,t){return e.ofType(Rm.gG).merge(e.ofType(_m.VN).debounceTime(500).map((function(e){return DE(DE({},e),{},{page:0})}))).switchMap((function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,o=t.reason,i=e.getState();return Ai.Observable.of((0,_m.IO)((0,Zm.Bu)(i),ME(DE({},(0,Zm.X1)(i)),NE(i,{page:r,size:n})),(0,TE.TC)(i),o))}}(t)(r).merge(e.ofType(_m.Hu).map((function(e){var r=(0,ue.get)(e,"result.features",[]),n=(0,TE.gz)(t.getState()),o=(0,ue.find)((0,TE.M0)(t.getState()),(function(e){return"geometry"===e.type}));return n&&o.enabled&&(r=(0,TE._w)(t.getState())),(0,Rm.UB)(r,[(0,ue.get)(e,"filterObj.pagination.startIndex")])})).take(1).takeUntil(e.ofType(_m.VT)))}))},aS=function(e,t){return e.ofType(Rm.AY).switchMap((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=r.size;return Ai.Observable.of((0,_m.IO)((0,Zm.Bu)(t.getState()),ME(DE({},(0,Zm.X1)(t.getState())),NE(t.getState(),{page:n,size:o})),(0,TE.TC)(t.getState())),(0,h.ct)((0,TE.u$)(t.getState()))).merge(e.ofType(_m.Hu).map((function(e){return Ai.Observable.of((0,Rm.$E)(),(0,Rm.UB)((0,ue.get)(e,"result.features",[]),[(0,ue.get)(e,"filterObj.pagination.startIndex")]))})).mergeAll().takeUntil(e.ofType(_m.VT)).take(2))}))},lS=function(e){return e.ofType(Rm.AY,Rm.sF).switchMap((function(){return Ai.Observable.of((0,Rm.KD)([]))}))},cS=function(e,t){return e.ofType(Rm.zh).switchMap((function(){return Ai.Observable.of((0,Rm.fO)()).concat(function(){var e=arguments.length>2?arguments[2]:void 0;return _E(arguments.length>3?arguments[3]:void 0,LE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],PE()(e)))}((0,TE.ND)(t.getState()),(0,TE.kG)(t.getState()),(0,Zm.Qs)(t.getState()),(0,Zm.Bu)(t.getState())).map((function(){return(0,Rm.gc)()})).catch((function(e){return Ai.Observable.of((0,Rm.cE)(),(0,q.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))})))}))},sS=function(e,t){return e.ofType(Rm.Hk).switchMap((function(){return Ai.Observable.of((0,Rm.fO)()).concat((e=(0,TE._w)(t.getState()),r=(0,Zm.Qs)(t.getState()),n=(0,Zm.Bu)(t.getState()),_E(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,PE()(r)))).map((function(){return(0,Rm.gc)()})).catch((function(e){return Ai.Observable.of((0,Rm.cE)(),(0,q.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))})).concat(Ai.Observable.of((0,Rm.Pv)("deleteConfirm"),(0,Rm.MO)())));var e,r,n}))},uS=function(e,t){return e.ofType(Rm.Ub).switchMap((function(){var e=t.getState(),r=(0,Zm.Qs)(e),n=(0,EE.cZ)(),o=(0,ny.findGeometryProperty)(r).localType,i={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},a=le()({},(0,TE.P3)(e),{type:"Feature"}),l=(0,TE.ND)(e);return l[a.id]&&l[a.id]&&l[a.id].geometry&&(a.geometry=l[a.id].geometry),Ai.Observable.of((0,Nm.Yf)("drawOrEdit",o,"featureGrid",[a],i))}))},pS=function(e,t){return e.ofType(Rm._9).switchMap((function(){var e=t.getState(),r=(0,Zm.Qs)(e),n=(0,EE.cZ)(),o=(0,ny.findGeometryProperty)(r).localType,i=le()({},(0,TE.P3)(e),{type:"Feature"}),a=(0,TE.ND)(e);a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&(i.geometry=(0,ue.head)((0,TE.kG)(e)).geometry);var l={featureProjection:n,stopAfterDrawing:!0,editEnabled:!(0,TE.Ae)(e),drawEnabled:(0,TE.Ae)(e)};return Ai.Observable.of((0,Nm.Yf)("drawOrEdit",o,"featureGrid",[i],l))}))},fS=function(e,t){return e.ofType(Rm.$O).switchMap((function(){return e.ofType(Rm.aO).filter((function(){return(0,TE.eK)(t.getState())===Rm.EH.EDIT})).take(1).switchMap((function(){return e.ofType(Lm.nk,Rm.sF).take(1).switchMap((function(){return Ai.Observable.of((0,Nm.bp)())}))}))}))},dS=function(e,t){return e.ofType(Rm.$O).switchMap((function(){var e=[(0,v.Xg)("metadataexplorer","enabled",!1),(0,v.Xg)("annotations","enabled",!1),(0,v.Xg)("details","enabled",!1)];return(0,J.Iz)(t.getState())&&e.push((0,v.Xg)("measure","enabled",!1)),Ai.Observable.from(e)}))},mS=function(e,t){return e.ofType(Nm.DI).filter((function(e){return"featureGrid"===e.owner})).switchMap((function(e){var r=t.getState(),n={featureProjection:(0,EE.cZ)(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=e.features.map((function(e,t){return le()({},e,{id:(0,TE._w)(r)[t].id,_new:(0,TE._w)(r)[t]._new,type:"Feature"})})),i=le()({},(0,ue.head)(e.features),{id:(0,TE.P3)(r).id,_new:(0,TE.P3)(r)._new,type:"Feature"}),a="enterEditMode"===e.enableEdit?Ai.Observable.of((0,Nm.Yf)("drawOrEdit",i.geometry.type,"featureGrid",o,n)):Ai.Observable.empty();return Ai.Observable.of((0,Rm.Vw)(o)).concat(a)}))},yS=function(e,t){return e.ofType(Rm.JB).switchMap((function(){var e=t.getState();return Ai.Observable.from([(0,Rm.F5)((0,TE._w)(e)),(0,Nm.bp)()])}))},bS=function(e,t){return e.ofType(Rm.Oj,Rm.jp,Rm.yi,Rm.aO).filter((function(){return(0,TE.eK)(t.getState())===Rm.EH.EDIT&&(0,TE.bq)(t.getState())})).switchMap((function(e){return r=t.getState(),n=e.type===Rm.yi,o=(0,EE.cZ)(),i=(0,ny.findGeometryProperty)((0,Zm.Qs)(r)).localType,a={featureProjection:o,stopAfterDrawing:oe.default.isSimpleGeomType(i),editEnabled:!0,drawEnabled:!1},(l=(0,TE._w)(r).map((function(e){var t=le()({},e,{type:"Feature"});if(!(0,ue.isEmpty)(t)){var o=(0,TE.ND)(r);if(o[t.id]&&(o[t.id].geometry||null===o[t.id].geometry)&&(t.geometry=o[t.id].geometry),t._new&&!t.geometry){var i=(0,ue.find)((0,TE.kG)(r),{id:t.id});i&&i.geometry&&(t.geometry=i.geometry)}n&&(t.geometry=(0,Zm.dc)(r,t.id)?(0,Zm.dc)(r,t.id).geometry:null)}return t})).filter((function(e){return null!==e.geometry||"empty_row"!==e.id}))).length>0?Ai.Observable.from([(0,Nm.Yf)("drawOrEdit",i,"featureGrid",l,a)]):Ai.Observable.from([(0,Nm.Yf)("clean","","featureGrid",[],{})]);var r,n,o,i,a,l}))},gS=function(e){return e.ofType(Rm.IN).switchMap((function(){return Ai.Observable.of((0,Nm.bp)())}))},vS=function(e,t){return e.ofType(Rm.aO).switchMap((function(e){return e.mode===Rm.EH.VIEW?Ai.Observable.of((0,Nm.bp)(),(0,xE.WP)("featuregrid.select")):e.mode!==Rm.EH.EDIT||(0,TE.bq)(t.getState())?Ai.Observable.of((0,xE.WP)()):Ai.Observable.of((0,Nm.bp)(),(0,xE.WP)("featuregrid.select"),(0,q.Kp)({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))}))},hS=function(e){return e.ofType(Rm.$O).switchMap((function(){return e.ofType(Lm.nk).take(1).switchMap((function(){return Ai.Observable.of((0,Rm.nY)(),(0,Rm.YV)())})).takeUntil(e.ofType(Rm.sF))}))},OS=function(e,t){return e.ofType(Lm.nk).switchMap((function(){return(0,J._d)(t.getState())?Ai.Observable.of((0,v.Xg)("queryPanel","enabled",!1)):Ai.Observable.empty()}))},wS=function(e,t){return e.ofType(Rm.$O).switchMap((function(){return e.ofType(v.kM).filter((function(e){return e.control&&"drawer"===e.control&&(0,TE.Rd)(t.getState())})).switchMap((function(){return Ai.Observable.of((0,Rm.YV)(),(0,Rm.KD)([]))})).takeUntil(e.ofType(Lm.nk))}))},ES=function(e,t){return e.ofType(Rm.bZ).switchMap((function(){var e=t.getState();return(0,TE.LB)(e)||(0,TE.b4)(e)?Ai.Observable.of((0,Rm.Pv)("featureCloseConfirm",!0)):Ai.Observable.of((0,Rm.YV)())}))},SS=function(e){return e.ofType(Rm.Gk).switchMap((function(){return Ai.Observable.of((0,Rm.$E)(),(0,Rm.Pv)("clearConfirm",!1))}))},PS=function(e){return e.ofType(Rm.vO).switchMap((function(){return Ai.Observable.of((0,v.Xg)("drawer","enabled",!1),(0,Rm.Pv)("featureCloseConfirm",!1))}))},jS=function(e,t){return e.ofType(Rm.$O).exhaustMap((function(){return e.ofType(Rm.sF).delay(50).filter((function(){return(0,Zm.M7)(t.getState())})).switchMap((function(){return Ai.Observable.of(ZE(t.getState()))})).takeUntil(e.ofType(Lm.nk,jE.xy,Rm.VM))}))},CS=function(e){return e.ofType(Rm.$O).switchMap((function(){return Ai.Observable.race(e.ofType(jE.xy).take(1),e.ofType(Rm.sF).take(1)).exhaustMap((function(t){return t.type===Rm.sF?Ai.Observable.empty():e.ofType(jE.F9).switchMap((function(){return Ai.Observable.of((0,Rm.t9)())}))})).takeUntil(e.ofType(Lm.nk,v.kM).filter((function(e){return e.type===Lm.nk||e.control&&"drawer"===e.control})).merge(e.ofType(Rm.sF).withLatestFrom(e.ofType(jE.xy,jE.F9).scan((function(e,t){switch(t.type){case jE.xy:return!1;case jE.F9:return!0;default:return!1}}),!0).startWith(!0),(function(e,t){return t})).filter((function(e){return e}))))}))},xS=function(e,t){return e.ofType(Rm.VM).switchMap((function(){return Ai.Observable.of((0,Rm.KD)([]),(0,Mm.F)((0,ue.get)(t.getState(),'featuregrid.advancedFilters["'.concat((0,TE.u$)(t.getState()),'"]'))),(0,Rm.YV)(),(0,v.Xg)("queryPanel","enabled",!0)).merge(Ai.Observable.race(e.ofType(Mm.Wm).mergeMap((function(e){return Ai.Observable.of((0,_m.rP)(e.searchUrl,e.filterObj),(0,Rm.Uh)(le()({},(0,kE.gC)(t.getState()),e.filterObj)),(0,v.Xg)("queryPanel","enabled",!1),(0,Rm.t9)())})),e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).mergeMap((function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[(0,Nm.Yf)("clean","","featureGrid",[],{})]:[];return Ai.Observable.from(e.concat((0,Rm.t9)()))}))).takeUntil(e.ofType(Rm.$O,Lm.nk)))}))},TS=function(e,t){return e.ofType(Rm.a3).filter((function(){return!(0,ue.get)(t.getState(),"featuregird.virtualScroll",!1)})).switchMap((function(){return Ai.Observable.of((0,V.Px)(OE()((0,Zm.F0)(t.getState())),"EPSG:4326"))}))},kS=function(e){return e.ofType(Rm.aO).filter((function(e){return e.mode===Rm.EH.EDIT})).map((function(){return(0,v.fV)(["query"])}))},IS=function(e){return e.ofType(Rm.$O).switchMap((function(){return Ai.Observable.of((0,jE.Mc)())}))},AS=function(e,t){return e.ofType(_m._T).filter((function(){return(0,Zm.M7)(t.getState())})).mapTo((0,Rm.hB)())},FS=function(e,t){return e.ofType(_m._T).filter((function(){return!(0,Zm.M7)(t.getState())})).switchMap((function(){return Ai.Observable.from([ZE(t.getState()),{type:Rm.Hg}])}))},DS=function(e,t){return e.ofType(Rm.sF).filter((function(){return(0,Zm.M7)(t.getState())})).switchMap((function(){return Ai.Observable.of((0,_m.XO)())}))},RS=function(e,t){return e.ofType(_m.Yx,_m.VN).filter((function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===_m.Yx||!r})).switchMap((function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,i=(n||{}).filterObj;return Ai.Observable.merge(Ai.Observable.of((0,Zm.M7)(t.getState())).filter((function(e){return e})),e.ofType(Rm.Yd)).mergeMap((function(){return Ai.Observable.of(function(e,t){return(0,h.He)(e,{filterObj:t})}(o,i))}))}))},NS=function(e,t){var r=t.getState;return e.ofType(Rm.ye).filter((function(){return!(0,Zm.gy)(r())})).switchMap((function(t){var n=r(),o=t.pages,i=o.startPage,a=o.endPage,l=n.featuregrid,c=l.pages,s=l.pagination,u=(0,ue.get)(s,"size"),p=(0,EE.gP)(i,a,c,u),f=p[1]-p[0]+1;return Ai.Observable.of((0,_m.IO)((0,Zm.Bu)(n),ME(DE({},(0,Zm.X1)(n)),{startIndex:p[0]*u,maxFeatures:f*u}),(0,TE.TC)(n))).filter((function(){return p.length>0})).merge(e.ofType(_m.Hu).filter((function(){return p.length>0})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,l=r().featuregrid,s=l.features,p=l.maxStoredPages,f=(0,ue.get)(o,"pagination.startIndex"),d=(0,EE.f1)(n,{endPage:a,startPage:i},{pages:c,features:s||[]},{size:u,startIndex:f,maxStoredPages:p}),m=d.pages,y=d.features;return(0,Rm.UB)(y,m)})).take(1).takeUntil(e.ofType(_m.VT))).merge(e.ofType(_m.yz).filter((function(){return p.length>0})).filter((function(e){return!e.isLoading})).withLatestFrom(e.ofType(Rm.ye)).map((function(e){return e[1]})).take(1).takeUntil(e.ofType(_m.VT)))}))},MS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(h.Zz).filter((function(e){var t=e.layer,r=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return(0,ue.includes)((0,ue.castArray)(r),(0,TE.u$)(n()))&&(0,ue.includes)(Object.keys(i),"time")&&(0,TE.DK)(n())})).merge(e.ofType(Rm.d)).filter((function(){return(0,TE.Rd)(n())})).withLatestFrom(e.ofType(_m.Qq),(function(e,t){return t})).switchMap((function(e){return Ai.Observable.of((0,_m.rP)(e.searchUrl,e.filterObj))}))},LS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control;return"drawer"===t&&r().browser&&r().browser.mobile&&(0,J.BP)(r())})).switchMap((function(){return Ai.Observable.of((0,jE.aN)(),(0,Rm.t9)())}))},_S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(jE.xy).filter((function(){return r().browser&&r().browser.mobile&&(0,J.BP)(r())})).mapTo((0,v.Xi)("drawer","enabled"))},ZS=r(55877),BS=r.n(ZS);function GS(e){return function(e){if(Array.isArray(e))return zS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function WS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?US(Object(r),!0).forEach((function(t){VS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function VS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qS={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!1,showAgain:!1,showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),mode:Rm.EH.VIEW,changes:[],pagination:{page:0,size:20},select:[],multiselect:!1,drawing:!1,newFeatures:[],features:[],dockSize:.35,customEditorsOptions:{rules:[]}},HS=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},$S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return HS(e,t)})).length>0},KS=function(e,t,r,n){return e.map((function(e){return $S(e,t)?function(e,t,r){return WS(WS({},e),{},r?{properties:WS(WS({},e.properties),t),geometry:r.geometry}:{properties:WS(WS({},e.properties),t)})}(e,r,n):e}))};var YS=r(93358),XS=r(1262),QS=r(30029),JS=r(18027),eP=r(72986),tP=r.n(eP);r(49548);var rP=r(59979);function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const iP=(0,R.compose)((0,R.withProps)((function(e){var t=e.renderPopover,r=e.popoverOptions;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nP(Object(r),!0).forEach((function(t){oP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(t?{renderPopover:t,popoverOptions:r}:{},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["renderPopover","popoverOptions"]))})),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r}),rP.Z,Ge.Z));function aP(){return(aP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var lP={width:0,padding:0,borderWidth:0},cP={},sP=function(e){return e?cP:lP},uP=iP((0,l.forwardRef)((function(e,t){var r=e.disabled,n=e.id,o=e.visible,i=e.onClick,a=e.glyph,l=e.active,s=e.className,u=void 0===s?"square-button":s,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["disabled","id","visible","onClick","glyph","active","className"]);return c().createElement(qe.Z,aP({ref:t},p,{bsStyle:l?"success":"primary",disabled:r,id:"fg-".concat(n),style:sP(o),className:u,onClick:function(){return!r&&i()}}),c().createElement(g.Glyphicon,{glyph:a}))}))),pP=function(e,t){return e?"featuregrid.toolbar.stopDrawGeom":t?"featuregrid.toolbar.drawGeom":"featuregrid.toolbar.addGeom"},fP=function(e){var t=e.saving,r=e.saved;return t||r?"featuregrid.toolbar.saving":"featuregrid.toolbar.saveChanges"};const dP={onGridSort:function(e,t){return(0,Rm.DY)(e,t)},onAddFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Rm.a8)(e)},onTemporaryChanges:function(e){return(0,Rm.aT)(e)},onGridRowsUpdated:function(e,t){var r,n,o=e.fromRow,i=e.toRow,a=e.updated,l=(r=o,n=i,Array.from({length:n+1-r},(function(e,t){return t+r}))).map((function(e){return t(e)})).filter((function(e){return Object.keys(a||{}).filter((function(t){return e.properties[t]!==a[t]})).length>0}));return(0,Rm.nG)(l,a)},onRowsToggled:function(e,t){return(0,Rm.KD)(e.map((function(e){return t(e.rowIdx)})),!1)},onRowsSelected:function(e,t){return(0,Rm.KD)(e.map((function(e){return t(e.rowIdx)})),!0)},onRowsDeselected:function(e,t){return(0,Rm.gr)(e.map((function(e){return t(e.rowIdx)})))}},mP=[{name:"",key:"geometry",width:35,frozen:!0,events:{onClick:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.crs,i=n.maxZoom;return e.geometry?(0,V.Px)(OE()(e),o||"EPSG:4326",i):{type:"NONE"}}},formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t?c().createElement(g.Glyphicon,{glyph:"zoom-to"}):c().createElement(We.Z,{placement:"top",overlay:c().createElement(g.Tooltip,{id:"fe-save-features"},c().createElement(b.Z,{msgId:"featuregrid.missingGeometry"}))},c().createElement(g.Glyphicon,{glyph:"exclamation-mark"}))}}],yP={onPageChange:function(e,t){return(0,Rm.oO)(e,t)},moreFeatures:Rm.zd},bP={createFeature:function(){return(0,Rm.lx)([{}])},saveChanges:function(){return(0,Rm.$S)()},clearFeatureEditing:function(){return(0,Rm.Pv)("clearConfirm",!0)},deleteGeometry:function(){return(0,Rm.pX)()},deleteFeatures:function(){return(0,Rm.Pv)("deleteConfirm",!0)},download:function(){return(0,v.Xi)("layerdownload")},settings:function(){return(0,Rm.Pv)("settings")},switchEditMode:function(){return(0,Rm.lg)()},startEditingFeature:function(){return(0,Rm.sY)()},startDrawingFeature:function(){return(0,Rm.kA)()},switchViewMode:function(){return(0,Rm.nY)()},onClose:function(){return(0,Rm.JK)()},showQueryPanel:function(){return(0,Rm.MY)()},zoomAll:function(){return(0,Rm.ve)()},sync:function(){return(0,_m.XO)()},setTimeSync:Rm.Yb,hideSyncPopover:function(){return(0,Rm.Pl)()},toggleShowAgain:function(){return(0,Rm.Ib)()},chart:function(){return(0,pe.C2)()}};var gP=dP,vP=mP,hP=yP,OP=bP;const wP=(0,p.connect)((function(e){return{attributes:(0,TE.o)(e)}}),{onChange:function(e,t){return(0,Rm.an)(e,"hide",t)}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,o=void 0===n?"featuregrid.columns":n,i=e.onChange,a=void 0===i?function(){}:i,l=e.attributes,s=void 0===l?[]:l;return c().createElement("div",{className:"bg-body data-attribute-selector",style:r},c().createElement("h4",{className:"text-center"},c().createElement("strong",null,c().createElement(b.Z,{msgId:o}))),c().createElement("div",null,s.map((function(e){return c().createElement(g.Checkbox,{key:e.attribute||e.name,checked:!e.hide,onChange:function(){return a(e.attribute,!e.hide)}},e.label||e.attribute)}))))}));function EP(){return(EP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function SP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SP(Object(r),!0).forEach((function(t){jP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var CP=(0,p.connect)((0,D.zB)({loading:Zm.gy}))(QS.Z),xP=(0,p.connect)((0,D.zB)({saving:TE.uz,saved:TE.Ci,mode:TE.eK,hasChanges:TE.LB,hasNewFeatures:TE.b4,hasGeometry:TE.OK,syncPopover:function(e){return{showAgain:(0,TE.tU)(e),showPopoverSync:(0,TE.Gl)(e),dockSize:(0,ze.ic)(e,{dockSize:!0}).dockSize+3.2+"%"}},isDrawing:TE.Ae,showChartButton:function(e){return!(0,TE.PI)(e)&&(0,J.PJ)(e)},isSimpleGeom:TE.He,selectedCount:TE.jY,disableToolbar:function(e){return e&&e.featuregrid&&e.featuregrid.disableToolbar||!(0,Zm.hk)(e,(0,TE.kd)(e))},displayDownload:J.pn,disableDownload:function(e){return 0===((0,Zm.Mz)(e)||[]).length},isDownloadOpen:function(e){return e&&e.controls&&e.controls.layerdownload&&e.controls.layerdownload.enabled},isSyncActive:Zm.M7,isColumnsOpen:function(e){return e&&e.featuregrid&&e.featuregrid.tools&&e.featuregrid.tools.settings},disableZoomAll:function(e){return e&&e.featuregrid.virtualScroll||0===(0,Zm.F0)(e).features.length},isSearchAllowed:function(e){return!(0,me.c0)(e)},isEditingAllowed:TE.nq,hasSupportedGeometry:TE.bq,isFilterActive:Zm.VD,showTimeSyncButton:TE.ou,timeSync:TE.DK}),(function(e){return{events:(0,gE.DE)(OP,e)}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableToolbar,r=e.disableDownload,n=e.disableZoomAll,o=void 0!==n&&n,i=e.displayDownload,a=e.events,l=void 0===a?{}:a,s=e.hasChanges,u=e.hasGeometry,p=e.hasNewFeatures,f=e.hasSupportedGeometry,d=void 0===f||f,m=e.isColumnsOpen,y=e.isDrawing,v=void 0!==y&&y,h=e.isEditingAllowed,O=e.isFilterActive,w=void 0!==O&&O,E=e.isDownloadOpen,S=e.isSearchAllowed,P=e.isSimpleGeom,j=e.isSyncActive,C=void 0!==j&&j,x=e.saved,T=void 0!==x&&x,k=e.saving,I=void 0!==k&&k,A=e.selectedCount,F=e.showAdvancedFilterButton,D=void 0===F||F,R=e.showChartButton,N=void 0===R||R,M=e.showSyncOnMapButton,L=void 0===M||M,_=e.showTimeSyncButton,Z=void 0!==_&&_,B=e.syncPopover,G=void 0===B?{showPopoverSync:!0,dockSize:"32.2%"}:B,z=e.mode,U=void 0===z?"VIEW":z,W=e.timeSync,V=void 0!==W&&W;return c().createElement(g.ButtonGroup,{id:"featuregrid-toolbar",className:"featuregrid-toolbar featuregrid-toolbar-margin"},c().createElement(uP,{id:"edit-mode",keyProp:"edit-mode",tooltipId:"featuregrid.toolbar.editMode",disabled:t,visible:"VIEW"===U&&h,onClick:l.switchEditMode,glyph:"pencil"}),c().createElement(uP,{id:"search",keyProp:"search",tooltipId:"featuregrid.toolbar.advancedFilter",active:w,disabled:t||!S,visible:"VIEW"===U&&D,onClick:l.showQueryPanel,glyph:"filter"}),c().createElement(uP,{id:"zoom-all",keyProp:"zoom-all",tooltipId:"featuregrid.toolbar.zoomAll",disabled:t||o,visible:"VIEW"===U,onClick:l.zoomAll,glyph:"zoom-to"}),c().createElement(uP,{id:"back-view",keyProp:"back-view",tooltipId:"featuregrid.toolbar.quitEditMode",disabled:t,visible:"EDIT"===U&&!s&&!p,onClick:l.switchViewMode,glyph:"arrow-left"}),c().createElement(uP,{id:"add-feature",keyProp:"add-feature",tooltipId:"featuregrid.toolbar.addNewFeatures",disabled:t,visible:"EDIT"===U&&!p&&!s&&d,onClick:l.createFeature,glyph:"row-add"}),c().createElement(uP,{id:"draw-feature",keyProp:"draw-feature",tooltipId:pP(v,P),disabled:t,visible:"EDIT"===U&&1===A&&(!u||u&&!P)&&d,onClick:l.startDrawingFeature,active:v,glyph:"pencil-add"}),c().createElement(uP,{id:"remove-features",keyProp:"remove-features",tooltipId:"featuregrid.toolbar.deleteSelectedFeatures",disabled:t,visible:"EDIT"===U&&A>0&&!s&&!p,onClick:l.deleteFeatures,glyph:"trash-square"}),c().createElement(uP,{id:"save-feature",keyProp:"save-feature",tooltipId:fP({saving:I,saved:T}),disabled:I||T||t,visible:"EDIT"===U&&s||p,active:T,onClick:l.saveChanges,glyph:"floppy-disk"}),c().createElement(uP,{id:"cancel-editing",keyProp:"cancel-editing",tooltipId:"featuregrid.toolbar.cancelChanges",disabled:t,visible:"EDIT"===U&&s||p,onClick:l.clearFeatureEditing,glyph:"remove-square"}),c().createElement(uP,{id:"delete-geometry",keyProp:"delete-geometry",tooltipId:"featuregrid.toolbar.deleteGeometry",disabled:t,visible:"EDIT"===U&&u&&1===A&&d,onClick:l.deleteGeometry,glyph:"polygon-trash"}),c().createElement(uP,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:t||r,active:E,visible:i&&"VIEW"===U,onClick:l.download,glyph:"download"}),c().createElement(uP,{id:"grid-settings",keyProp:"grid-settings",tooltipId:"featuregrid.toolbar.hideShowColumns",disabled:t,active:m,visible:A<=1&&"VIEW"===U,onClick:l.settings,glyph:"features-grid-set"}),c().createElement(uP,{id:"grid-map-chart",keyProp:"grid-map-chart",tooltipId:"featuregrid.toolbar.createNewChart",disabled:t,visible:"VIEW"===U&&N,onClick:l.chart,glyph:"stats"}),c().createElement(uP,{id:"grid-map-filter",keyProp:"grid-map-filter",tooltipId:"featuregrid.toolbar.syncOnMap",disabled:t,active:C,visible:L,onClick:l.sync,glyph:"map-filter",renderPopover:G.showPopoverSync,popoverOptions:!t&&{placement:"top",content:c().createElement("span",null,c().createElement("p",null,c().createElement(b.Z,{msgId:"featuregrid.toolbar.synchPopoverText"})),c().createElement("p",null,c().createElement(g.Checkbox,{checked:G.showAgain,onClick:l.toggleShowAgain},c().createElement(b.Z,{msgId:"featuregrid.toolbar.notShowAgain"})))),props:{id:"sync-popover",title:c().createElement("div",null,c().createElement(b.Z,{msgId:"featuregrid.toolbar.synchPopoverTitle"}),c().createElement("button",{onClick:function(){G.showAgain&&localStorage.setItem("showPopoverSync",!1),l.hideSyncPopover()},className:"close"},c().createElement(g.Glyphicon,{className:"pull-right",glyph:"1-close"}))),style:{bottom:G.dockSize}}}}),c().createElement(uP,{id:"timeSync-button",keyProp:"fg-timeSync-button",tooltipId:V?"featuregrid.toolbar.disableTimeSync":"featuregrid.toolbar.enableTimeSync",visible:Z,active:V,onClick:function(){return l.setTimeSync&&l.setTimeSync(!V)},glyph:"time"}))})),TP=(0,p.connect)((0,D.P1)(TE.Sj,(function(e){return{title:e}})),{onClose:OP.onClose})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onDownloadToggle:function(){}};return c().createElement(g.Grid,{className:"bg-body data-grid-top-toolbar",fluid:!0,style:{width:"100%"}},c().createElement(g.Row,{className:"flex-center"},c().createElement(g.Col,{xs:4},e.children),c().createElement(g.Col,{xs:4},c().createElement("div",{className:"text-center text-primary"},c().createElement("strong",null,e.title))),c().createElement(g.Col,{xs:4},c().createElement(qe.Z,{onClick:e.onClose,style:{float:"right"},className:"square-button no-border featuregrid-top-toolbar-margin"},c().createElement(g.Glyphicon,{glyph:"1-close"})))))})),kP=(0,p.connect)((0,D.P1)((0,D.zB)(Zm.b0),Zm.gy,(function(e){return e&&e.featuregrid&&!!e.featuregrid.virtualScroll}),TE.jY,(function(e,t,r,n){return PP(PP({},e),{},{selected:n,loading:t,virtualScroll:r})})),hP)((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,onPageChange:function(){}},n=(0,EE.DR)(r),o=n.page,i=void 0===o?0:o,a=n.size,l=void 0===a?0:a,s=n.resultSize,u=void 0===s?0:s,p=n.maxPages,f=void 0===p?0:p,d=n.total,m=void 0===d?0:d;return c().createElement(g.Grid,{className:"bg-body data-grid-bottom-toolbar",fluid:!0,style:{width:"100%"}},c().createElement(g.Row,{className:"featuregrid-toolbar-margin"},c().createElement(g.Col,{md:3},c().createElement("span",null,c().createElement(b.Z,{msgId:r.virtualScroll?"featuregrid.resultInfoVirtual":"featuregrid.resultInfo",msgParams:{start:i*l+1,end:i*l+u,total:m,selected:null!==(e=r.selected)&&void 0!==e?e:0}})),"",r.selected>0?c().createElement("span",null,c().createElement(b.Z,{msgId:"featuregrid.selectedInfo",msgParams:{selected:null!==(t=r.selected)&&void 0!==t?t:0}})):null),r.virtualScroll?null:c().createElement(g.Col,{className:"text-center",md:6},c().createElement(qe.Z,{key:"first-page",onClick:function(){return r.onPageChange(0)},disabled:0===i,className:"no-border first-page"},c().createElement(g.Glyphicon,{glyph:"step-backward"})),c().createElement(qe.Z,{key:"prev-page",onClick:function(){return r.onPageChange(i-1)},disabled:0===i,className:"no-border prev-page"},c().createElement(g.Glyphicon,{glyph:"chevron-left"})),c().createElement("span",{key:"page-info"},c().createElement(b.Z,{msgId:"featuregrid.pageInfo",msgParams:{page:i+1,totalPages:f+1}})),c().createElement(qe.Z,{key:"next-page",onClick:function(){return r.onPageChange(i+1)},className:"no-border next-page",disabled:i>=f},c().createElement(g.Glyphicon,{glyph:"chevron-right"})),c().createElement(qe.Z,{key:"last-page",onClick:function(){return r.onPageChange(f)},className:"no-border last-page",disabled:i>=f},c().createElement(g.Glyphicon,{glyph:"step-forward"})))," ",c().createElement(g.Col,{md:3},r.loading?c().createElement("span",{style:{float:"right"}},c().createElement(b.Z,{msgId:"loading"}),c().createElement(tP(),{spinnerName:"circle",style:{float:"right"},noFadeIn:!0})):null)))})),IP=(0,p.connect)((0,D.P1)(TE.jY,(function(e){return{count:e}})),{onClose:function(){return(0,Rm.Pv)("deleteConfirm",!1)},onConfirm:function(){return(0,Rm.Uz)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.count,a=e.onConfirm,l=void 0===a?function(){}:a;return c().createElement(m.Z,null,c().createElement(XS.Z,{show:!0,onClose:r,onConfirm:l,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:c().createElement(b.Z,{msgId:"featuregrid.deleteButton"}),confirmButtonDisabled:o},c().createElement(b.Z,{msgId:"featuregrid.delete",msgParams:{count:i}})))})),AP=(0,p.connect)((0,D.P1)(TE.jY,(function(e){return{count:e}})),{onClose:function(){return(0,Rm.Pv)("clearConfirm",!1)},onConfirm:function(){return(0,Rm.oL)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.onConfirm,a=void 0===i?function(){}:i;return c().createElement(m.Z,null,c().createElement(XS.Z,{draggable:!1,show:!0,onClose:r,onConfirm:a,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:c().createElement(b.Z,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:o,closeText:c().createElement(b.Z,{msgId:"featuregrid.noButton"})},c().createElement(b.Z,{msgId:"featuregrid.clear"})))})),FP=(0,p.connect)((function(){}),{onClose:function(){return(0,Rm.Ap)()},onConfirm:function(){return(0,Rm.YV)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.onConfirm,a=void 0===i?function(){}:i;return c().createElement(m.Z,null,c().createElement(XS.Z,{show:!0,onClose:r,onConfirm:a,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:c().createElement(b.Z,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:o,closeText:c().createElement(b.Z,{msgId:"featuregrid.noButton"})},c().createElement(b.Z,{msgId:"featuregrid.featureClose"})))})),DP={settings:wP},RP={deleteConfirm:IP,featureCloseConfirm:FP,clearConfirm:AP},NP={settings:{style:{padding:"0 12px",overflow:"auto",flex:"0 0 14em",boxShadow:"inset 0px 0px 10px rgba(0, 0, 0, 0.4)",height:"100%",minWidth:195}}},MP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&DP[t]})).map((function(e){var t=DP[e];return c().createElement(t,EP({key:e},NP[e]||{}))}))},LP=function(){return c().createElement(TP,null,c().createElement(xP,null))},_P=function(e){return e.focusOnEdit&&e.hasChanges||e.newFeatures.length>0?null:c().createElement(kP,null)},ZP=function(){return CP},BP=(0,D.P1)((function(e){return e}),(function(e){return e?((0,ny.getFeatureTypeProperties)(e)||[]).reduce((function(e,t){return PP(PP({},e),{},jP({},t.name,(0,p.connect)((0,D.P1)((function(e){return(0,TE.g5)(e,t.name)}),TE.eK,(function(e,r){var n=PP({value:e&&(e.rawValue||e.value)},(0,ny.isGeometryType)(t)?{filterEnabled:null==e?void 0:e.enabled,filterDeactivated:null==e?void 0:e.deactivated}:{}),o=(0,ny.isGeometryType)(t)?{}:{disabled:!0,tooltipMsgId:"featuregrid.filter.tooltips.editMode"};return"EDIT"===r?PP(PP({},n),o):n})))((0,JS.Q)((0,ny.isGeometryType)(t)?"geometry":t.localType,{name:t.name}))))}),{}):{}})),GP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&RP[t]})).map((function(e){var t=RP[e];return c().createElement(t,{key:e})}))},zP=r(96259);function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function WP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UP(Object(r),!0).forEach((function(t){VP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function VP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(){return(qP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var HP=[],$P={},KP=(0,p.connect)((0,D.P1)(TE.P4,(function(e){return(0,ze.ic)(e,{transform:!0})}),(function(e,t){return{size:e,dockStyle:t}})))(vE.default),YP=(0,D.P1)((function(e){return(0,ue.get)(e,"featuregrid.open")}),(function(e){return(0,ue.get)(e,"featuregrid.customEditorsOptions")}),(function(e){return(0,ue.get)(e,"queryform.autocompleteEnabled")}),(function(e){return(0,Zm.UM)(e)}),(function(e){return(0,Zm.HY)(e)}),(function(e){return(0,ue.get)(e,"featuregrid.features")||HP}),Zm.Qs,(function(e){return(0,ue.get)(e,"featuregrid.attributes")}),(function(e){return(0,ue.get)(e,"featuregrid.tools")}),TE._w,TE.eK,TE.eO,TE.kG,TE.LB,(function(e){return(0,ue.get)(e,"featuregrid.focusOnEdit",!1)}),(function(e){return(0,ue.get)(e,"featuregrid.enableColumnFilters")}),(0,D.zB)(Zm.b0),(function(e){return(0,ue.get)(e,"featuregrid.pages")}),(function(e){return(0,ue.get)(e,"featuregrid.pagination.size")}),(function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:HP,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:HP,d=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0,b=arguments.length>16?arguments[16]:void 0,g=arguments.length>17?arguments[17]:void 0,v=arguments.length>18?arguments[18]:void 0;return{open:e,customEditorsOptions:t,autocompleteEnabled:r,url:n,typeName:o,hasChanges:d,newFeatures:f,features:i,describe:a,attributes:l,tools:c,select:s,mode:u,focusOnEdit:m,enableColumnFilters:y,changes:(0,EE.rK)(p),pagination:b,pages:g,size:v}})),XP=(0,R.compose)((0,p.connect)(YP,(function(e){return{onMount:(0,gE.DE)(Rm.Z_,e),gridEvents:(0,gE.DE)(gP,e),pageEvents:(0,gE.DE)(hP,e),initPlugin:(0,gE.DE)((function(e){return(0,Rm.QT)(e)}),e),toolbarEvents:(0,gE.DE)(OP,e),gridTools:vP.map((function(t){return WP(WP({},t),{},{events:(0,gE.DE)(t.events,e)})})),onSizeChange:function(){return e(Rm.Ox.apply(void 0,arguments))}}})),(0,R.lifecycle)({componentDidMount:function(){this.props.onMount((0,ue.pick)(this.props,["showFilteredObject","showTimeSync","timeSync"]))}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tools:$P,dialogs:$P,select:HP},t=e.pluginCfg.maxZoom,r={dimMode:"none",defaultSize:.35,fluid:!0,isVisible:e.open,maxDockSize:.7,minDockSize:.1,position:"bottom",setDockSize:function(){},zIndex:1030};return c().createElement(KP,qP({},r,{onSizeChange:function(t){e.onSizeChange(t,r)}}),e.open&&c().createElement(zP.Z,null,(function(r){var n=r.height;return c().createElement(Fr.Z,{className:"feature-grid-container",key:"feature-grid-container",height:n-94,header:LP(),columns:MP(e.tools),footer:_P(e)},GP(e.tools),c().createElement(YS.Z,{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin,customEditorsOptions:e.customEditorsOptions,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName,filterRenderers:BP(e.describe),enableColumnFilters:e.enableColumnFilters,emptyRowsView:ZP(),focusOnEdit:e.focusOnEdit,newFeatures:e.newFeatures,changes:e.changes,mode:e.mode,select:e.select,key:"feature-grid-container",columnSettings:e.attributes,gridEvents:e.gridEvents,pageEvents:e.pageEvents,describeFeatureType:e.describe,features:e.features,minHeight:600,tools:e.gridTools,pagination:e.pagination,pages:e.pages,virtualScroll:e.virtualScroll,maxStoredPages:e.maxStoredPages,vsOverScan:e.vsOverScan,scrollDebounce:e.scrollDebounce,size:e.size,actionOpts:{maxZoom:t}}))})))}));const QP=(0,O.rx)("FeatureEditor",{component:XP,epics:n,reducers:{featuregrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qS,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rm.Xp:return le()({},e,{showPopoverSync:!localStorage||null===localStorage.getItem("showPopoverSync")||"true"===localStorage.getItem("showPopoverSync"),editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case Rm.ye:case Rm.gG:return le()({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case Rm.fT:var r;return WS(WS({},e),{},{pagination:WS(WS({},null!==(r=e.pagination)&&void 0!==r?r:{}),{},{size:t.size})});case Rm.Oj:var n=t.features.filter((function(e){return"empty_row"!==e.id}));return e.multiselect&&t.append?le()({},e,{select:t.append?(0,ue.uniqBy)([].concat(GS(e.select),GS(n)),"id"):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&HS(n[0],e.select[0])?e:le()({},e,{select:n||[]});case Rm.v6:var o=e.select.filter((function(e){return!$S(e,t.features)})),i=t.features.filter((function(t){return!$S(t,e.select)})),a=o.concat(i||[]);return le()({},e,{select:a});case Rm.jp:return le()({},e,{select:e.select.filter((function(e){return!$S(e,t.features)}))});case Rm.DU:return le()({},e,{multiselect:t.multiselect});case Rm.r:return le()({},e,{customEditorsOptions:t.payload});case Rm.gJ:return le()({},e,t.options||{});case Rm.CM:return le()({},e,{select:[],changes:[]});case Rm.iQ:return le()({},e,{features:t.features});case Rm.dZ:return le()({},e,{dockSize:t.dockSize});case Rm.$:return le()({},e,{selectedLayer:t.id});case Rm.qw:return le()({},e,{tools:WS(WS({},e.tools),{},VS({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case Rm.f$:return le()({},e,{attributes:WS(WS({},e.attributes),{},VS({},t.name,WS(WS({},e.attributes&&e.attributes[t.name]||{}),{},VS({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case Rm.aO:return le()({},e,{showPopoverSync:localStorage&&null!==localStorage.getItem("showPopoverSync")?"true"===localStorage.getItem("showPopoverSync"):t.mode!==Rm.EH.EDIT,tools:t.mode===Rm.EH.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===Rm.EH.EDIT,drawing:!1});case Rm.K8:var l=t.features.filter((function(e){return e._new}))||[];return le()({},e,{newFeatures:l.length>0?KS(e.newFeatures,l,t.updated,null):e.newFeatures,changes:[].concat(GS(e&&e.changes||[]),GS(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:t.updated}}))))});case Rm.AH:return le()({},e,{saving:!0,loading:!0});case Rm.AY:return le()({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case Rm.yi:return le()({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case Rm.IN:var c=BS().v1();return le()({},e,{newFeatures:t.features.map((function(e){return WS(WS({},e),{},{_new:!0,id:c,type:"Feature",geometry:null})})),select:t.features.map((function(e){return WS(WS({},e),{},{_new:!0,id:c,type:"Feature",geometry:null})}))});case Rm.SW:return le()({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case Rm.DI:var s=t.features.filter((function(e){return e._new}))||[];return le()({},e,{newFeatures:s.length>0?KS(e.newFeatures,s,null,{geometry:WS({},(0,ue.head)(s).geometry)}):e.newFeatures,changes:t.features.filter((function(e){return!e._new})).map((function(e,r){return{id:e.id,updated:{geometry:t.features[r].geometry}}})),drawing:!1});case Rm.oh:var u=t.features.filter((function(e){return e._new}))||[];return le()({},e,{newFeatures:u.length>0?KS(e.newFeatures,u,null,{geometry:null}):e.newFeatures,changes:[].concat(GS(e&&e.changes||[]),GS(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:null}}}))))});case _m.u7:return le()({},e,{localType:(0,ue.get)(t,"featureType.original.featureTypes[0].properties[1].localType")});case Rm._9:return le()({},e,{drawing:!e.drawing});case Rm.$O:return le()({},e,{open:!0});case Rm.sF:return le()({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:Rm.EH.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case Rm.MK:return le()({},e,{disableToolbar:t.disabled});case Rm.ut:return le()({},e,{canEdit:t.permission.canEdit});case Nm.hZ:return"clean"===t.status?le()({},e,{drawing:!1}):e;case Rm._u:var p=t.update||{},f=p.attribute;if(f&&t.append){var d=e.filters[f].value,m=[];null!=d&&d.attribute&&(m=[d]),(0,ue.isArray)(d)&&(m=d);var y=[].concat(GS(m),[t.update.value]);return le()({},e,{filters:VS({},f,{attribute:f,enabled:!0,type:"geometry",operator:"OR",value:y})})}return f?le()({},e,{filters:WS(WS({},e.filters),{},VS({},f,t.update))}):e;case _m.Yx:return le()({},e,{filters:{}});case Rm.DA:var b=t.dockProps&&t.dockProps.maxDockSize,g=t.dockProps&&t.dockProps.minDockSize,v=b&&g&&g<=t.size&&b>=t.size&&t.size||b&&b<t.size&&b||g&&g>t.size&&g||t.size;return le()({},e,{dockSize:v});case Rm.Lz:return le()({},e,{advancedFilters:le()({},e.advancedFilters,VS({},e.selectedLayer,t.filterObj))});case Rm.Jb:return le()({},e,{features:t.features||[],pages:t.pages||[]});case Rm.yA:return le()({},e,{showPopoverSync:!1});case Rm.sK:return le()({},e,{showAgain:!e.showAgain});case Rm.d:return le()({},e,{timeSync:t.value});default:return e}}},containers:{TOC:{doNotHide:!0,name:"FeatureEditor"}}});r(65207);var JP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;return c().createElement("span",null,t&&t.name?c().createElement(b.Z,{msgId:t.name}):null)};const ej=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.value;return c().createElement(jr.DropdownList,{valueField:"id",className:"geometry-operation-selector",onChange:o,data:r,valueComponent:JP,value:i,itemComponent:JP})};var tj=r(11847);function rj(e){return function(e){if(Array.isArray(e))return nj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nj(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.search,n=t.url;return(0,tj.w0)(e,n)||(0,tj.w0)(e,r&&r.url)},ij=function(e){return(e||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return"BBOX"!==t}))},aj={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number"},lj=function(e){return(0,ue.get)(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&aj[e.type]})).map((function(e){return{label:e.name,attribute:e.name,type:aj[e.type],valueId:"id",valueLabel:"name",values:[]}}))};function cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cj(Object(r),!0).forEach((function(t){uj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pj=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.searchUrl;return t===n})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?Ai.Observable.of(t):e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded;return t})).take(1)})).switchMap((function(e){var t=e.featureTypeName,r=e.searchUrl;return(0,Ym.ED)({layer:{name:t,url:r,search:{type:"wfs",url:r}}}).do((function(e){if(t=e,r=(0,ue.get)(t,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!(0,ue.find)(r,(function(){return"queryCollection"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._})))throw new Error("nocrosslayerfunctionalities");var t,r})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return Ai.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})},fj=function(e,t){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return o&&r.name===(o&&o.name)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!!t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return Ai.Observable.defer((function(){return(0,Ym.v$)({layer:r})})).do((function(e){var r=(0,ue.get)((0,ny.findGeometryProperty)(e.data||{}),"name");r&&t("geometryName",r)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t;return lj(r)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return Ai.Observable.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return Ai.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})};const dj=(0,R.compose)((0,R.withPropsOnChange)(["crossLayerFilter"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=void 0===t?{}:t;return{queryCollection:(0,ue.get)(r,"collectGeometries.queryCollection"),operation:(0,ue.get)(r,"operation"),distance:(0,ue.get)(r,"distance")}})),(0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=void 0===t?[]:t,n=e.queryCollection,o=void 0===n?{}:n;return{layer:(0,ue.find)(r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t===o.typeName}))}})),(0,R.withHandlers)({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){r("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&r("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){return r("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e){return r("operation",e)}}}),(0,R.defaultProps)({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.setQueryCollectionParameter,n=void 0===r?function(){}:r;return pj(e).combineLatest(fj(e,n),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sj(sj({},t),e)})).startWith({})}}),Km.Z);function mj(e){return(mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bj(e,t){return(bj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gj(e,t){return!t||"object"!==mj(t)&&"function"!=typeof t?vj(e):t}function vj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hj(e){return(hj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bj(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hj(n);if(o){var r=hj(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return gj(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Oj(vj(t=i.call(this,e)),"getCurrentFilter",(function(){return{featureTypeName:t.props.featureTypeName,groupFields:t.props.groupFields,filterFields:t.props.sendFilters&&t.props.sendFilters.attributeFilter&&t.props.filterFields.filter((function(e){return(0,uu.checkOperatorValidity)(e.value,e.operator)}))||[],spatialField:t.props.sendFilters&&t.props.sendFilters.spatialFilter&&t.props.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:t.props.sendFilters&&t.props.sendFilters.crossLayerFilter&&(0,uu.setupCrossLayerFilterDefaults)(t.props.crossLayerFilter)||null,hits:t.props.hits}})),Oj(vj(t),"isCurrentFilterChanged",(function(){var e=t.getCurrentFilter(),r={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter},n=t.props.appliedFilter||{},o={groupFields:n.groupFields,filterFields:n.attributePanelExpanded&&n.filterFields||[],spatialField:n.spatialPanelExpanded&&n.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},crossLayerFilter:n.crossLayerExpanded&&n.crossLayerFilter&&n.crossLayerFilter.operation?(0,uu.setupCrossLayerFilterDefaults)(n.crossLayerFilter):null};return!(0,ue.isEqual)(r,o)})),Oj(vj(t),"search",(function(){var e=t.getCurrentFilter();t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()})),Oj(vj(t),"reset",(function(){if(t.props.actions.onChangeDrawingStatus("clean","","queryform",[]),t.props.actions.onReset(),t.props.advancedToolbar){var e={featureTypeName:t.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:null,hits:t.props.hits};t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()}})),Oj(vj(t),"restorePersistedFilter",(function(){t.props.actions.onRestoreFilter()})),t}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,r=this.props.allowEmptyFilter&&!this.props.advancedToolbar,n=this.props.filterFields.filter((function(e){return e.value||0===e.value})).length>0,o=(0,uu.isFilterEmpty)(this.props),i=(0,uu.isFilterEmpty)(this.props.appliedFilter),a=this.isCurrentFilterChanged(),l=n||this.props.spatialField.geometry||(0,uu.isCrossLayerFilterValid)(this.props.crossLayerFilter),s=!(0,ue.isEqual)(this.props.appliedFilter,this.props.storedFilter),u=r||o&&this.props.appliedFilter&&!i,p=t||!this.props.toolbarEnabled||o&&!u||!o&&(!l||!a),f=this.props.emptyFilterWarning&&o&&a,d=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,m=[{tooltipId:f?"queryform.emptyfilter":d,disabled:p,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:f?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var y=!s||this.props.loadingError||a,b=!s||!this.props.storedFilter||!this.props.toolbarEnabled,g=!this.props.appliedFilter||this.props.appliedFilter&&i||!this.props.toolbarEnabled;m=m.concat([{tooltipId:"queryform.save",disabled:y,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:b,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:g,onClick:this.reset}])}else m=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(m);return c().createElement("div",{className:"container-fluid query-toolbar"},c().createElement(Dr.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:m}),c().createElement(lt.Z,{show:!!this.props.showGeneratedFilter,bsSize:"large"},c().createElement(lt.Z.Header,null,c().createElement(lt.Z.Title,null,this.props.resultTitle)),c().createElement(lt.Z.Body,null,c().createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),c().createElement(lt.Z.Footer,null,c().createElement(qe.Z,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}])&&yj(t.prototype,r),a}(c().Component);Oj(wj,"propTypes",{filterType:u().string,params:u().object,filterFields:u().array,groupFields:u().array,spatialField:u().object,sendFilters:u().object,crossLayerFilter:u().object,toolbarEnabled:u().bool,searchUrl:u().string,showGeneratedFilter:u().oneOfType([u().bool,u().string]),featureTypeName:u().string,actions:u().object,ogcVersion:u().string,titleMsgId:u().string,queryBtnMsgId:u().string,resultTitle:u().string,queryBtnGlyph:u().string,pagination:u().object,sortOptions:u().object,hits:u().bool,allowEmptyFilter:u().bool,emptyFilterWarning:u().bool,appliedFilter:u().object,storedFilter:u().object,advancedToolbar:u().bool,loadingError:u().bool}),Oj(wj,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}});const Ej=wj;var Sj=r(76364),Pj=r(59286);function jj(e){return(jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cj(){return(Cj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function xj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kj(e,t){return(kj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ij(e,t){return!t||"object"!==jj(t)&&"function"!=typeof t?Aj(e):t}function Aj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fj(e){return(Fj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kj(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fj(n);if(o){var r=Fj(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ij(this,e)});function a(){var e;xj(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Dj(Aj(e=i.call.apply(i,[this].concat(r))),"state",{}),Dj(Aj(e),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return c().createElement(r,null,t)}var n=c().createElement(g.Tooltip,{id:e.props.tooltip.id},"this.props.tooltip.message");return c().createElement(We.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),Dj(Aj(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return c().createElement("div",{className:"autocomplete-toolbar"},!t&&c().createElement(g.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(){return e.props.pagination.loadPrevPage()}}),!r&&c().createElement(g.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(){return e.props.pagination.loadNextPage()}}))})),Dj(Aj(e),"renderField",(function(){var t,r={emptyList:function(){return e.props.busy?"Loading...":(0,ie.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:(0,ie.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,ie.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=[];e.props.data&&e.props.data.length>0&&(n=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&n.length>0&&n.push((Dj(t={},e.props.textField,""),Dj(t,e.props.valueField,""),Dj(t,"disabled",!0),Dj(t,"pagination",e.renderPagination()),t));var o=!1,i=e.props.loading?[]:n,a=e.props.itemComponent,l=c().createElement(jr.Combobox,{dropUp:e.props.dropUp,busy:e.props.busy,data:i,disabled:e.props.disabled,itemComponent:function(t){return c().createElement(a,Cj({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||r,open:e.props.open,filter:!1,onChange:function(t){e.props.onChange(t,e.props.valueField),o=!0},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){var r=(0,ue.head)(e.props.features.filter((function(r){return r.properties[e.props.valueField].toLowerCase()===t[e.props.valueField].toLowerCase()})));e.props.onSelect(t,r,e.props.srsName,e.props.style)},onToggle:function(t){var r=(0,ue.head)(e.props.features.filter((function(t){return t.properties[e.props.valueField].toLowerCase()===e.props.selectedValue.toLowerCase()})));!t||e.props.selectedValue||e.props.selectedValue||o||e.props.onChange("",e.props.valueField),e.props.onToggle(t,r,e.props.pagination.currentPage),r&&!t&&e.props.onSelect(e.props.selectedValue,r,e.props.srsName,e.props.style),o=!1},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(l):l})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null);return c().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&Tj(t.prototype,r),a}(c().Component);Dj(Rj,"propTypes",{busy:u().bool,data:u().array,disabled:u().bool,dropUp:u().bool,features:u().array,filter:u().string,itemComponent:u().oneOfType([u().object,u().func]),label:u().string,loading:u().bool,messages:u().object,onChange:u().func,onFocus:u().func,onSelect:u().func,onToggle:u().func,onChangeDrawingStatus:u().func,style:u().style,open:u().bool,pagination:u().object,nextPageIcon:u().string,prevPageIcon:u().string,selectedValue:u().string,srsName:u().string,textField:u().string,tooltip:u().object,valueField:u().string}),Dj(Rj,"contextTypes",{messages:u().object}),Dj(Rj,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:wu.Z,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"});const Nj=Rj;function Mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mj(Object(r),!0).forEach((function(t){_j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,R.setObservableConfig)(Ii.Z);var Zj=(0,R.mapPropsStreamWithConfig)(Ii.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return Lj(Lj({},t),{},{data:(0,ue.isArray)(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:(0,ue.isArray)(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,a=e.changed,l=e.originalValue,s=e.value,u=e.valuesCount,p=e.onChangeDrawingStatus,f=e.loadNextPage,d=e.loadPrevPage,m=e.maxFeatures,y=e.currentPage,b=e.itemComponent,g=e.features,v=e.busy,h=e.data,O=e.loading,w=void 0!==O&&O,E=e.valueField,S=e.textField,P=e.filter,j=e.srsName,C=e.style,x=Math.ceil(u/m);return c().createElement(Nj,{pagination:{firstPage:1===y,lastPage:x<=y,paginated:!0,loadPrevPage:d,loadNextPage:f,currentPage:y},srsName:j,busy:v,dropUp:!1,data:h,open:t,onChangeDrawingStatus:p,valueField:E,textField:S,itemComponent:b,filter:P,onFocus:o,onToggle:r,onChange:i,onSelect:n,features:g,style:C,selectedValue:a?s:l||s,loading:w})})),Bj=(0,R.compose)((0,R.withPropsOnChange)(["valueField"],(function(){return{value:void 0}})),(0,R.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,r){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[r]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),(0,R.withHandlers)({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.onChangeSpatialFilterValue,n=void 0===r?function(){}:r,o=e.select,i=void 0===o?function(){}:o;return function(e,r,o,a){r&&n({geometry:r.geometry,value:e,feature:r,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:(0,Pj.generateTemplateString)(t.crossLayer.cqlTemplate||"",uu.escapeCQLStrings)(r)}}:void 0}),i(!0)}}}))(Zj);function Gj(e){return(Gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wj(e,t){return(Wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vj(e,t){return!t||"object"!==Gj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qj(e){return(qj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wj(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qj(n);if(o){var r=qj(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vj(this,e)});function a(){return zj(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return c().createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&Uj(t.prototype,r),a}(c().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Hj,"propTypes",{item:u().string,textField:u().string,customItemClassName:u().string,valueField:u().string});const $j=Hj;function Kj(e){return(Kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qj(e,t){return(Qj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jj(e,t){return!t||"object"!==Kj(t)&&"function"!=typeof t?eC(e):t}function eC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tC(e){return(tC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qj(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tC(n);if(o){var r=tC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Jj(this,e)});function a(){var e;Yj(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return rC(eC(e=i.call.apply(i,[this].concat(r))),"onUpdateBBOX",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempExtent[r]=!isNaN(parseFloat(t))&&parseFloat(t)||0);var o=[];for(var i in e.tempExtent)i&&o.push(e.tempExtent[i]);var a=(0,zr.reprojectBbox)(o,"EPSG:4326",e.props.projection),l={type:e.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[l])})),rC(eC(e),"onUpdateCircle",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempCircle[r]=parseFloat(t));var o=isNaN(parseFloat(e.tempCircle.x))||isNaN(parseFloat(e.tempCircle.y))?[e.tempCircle.x,e.tempCircle.y]:(0,zr.reproject)([e.tempCircle.x,e.tempCircle.y],"EPSG:4326",e.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:e.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(e.tempCircle.radius)?0:e.tempCircle.radius,projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[a],{geodesic:e.props.enableGeodesic})})),rC(eC(e),"onModifyGeometry",(function(){"BBOX"===e.props.type?e.onUpdateBBOX(null,null,"endDrawing"):"Circle"===e.props.type&&e.onUpdateCircle(null,null,"endDrawing"),e.props.onShowPanel(!1)})),rC(eC(e),"onClosePanel",(function(){e.resetGeom(),e.props.onShowPanel(!1)})),rC(eC(e),"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),rC(eC(e),"getStepCircle",(function(t,r){var n=e.getStep(t);return"radius"===r&&!e.isWGS84()&&1e4*n||n})),rC(eC(e),"getBBOXDimensions",(function(e){var t=(0,zr.reprojectBbox)(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),rC(eC(e),"getCircleDimensions",(function(t){var r=(0,zr.reproject)(t.center,t.projection,"EPSG:4326"),n=(0,zr.reproject)(t.center,t.projection,e.props.projection),o=(0,zr.reproject)([t.center[0]+t.radius,t.center[1]],t.projection,e.props.projection),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y));return{x:r.x,y:r.y,radius:i}})),rC(eC(e),"renderCoordinateField",(function(t,r){return c().createElement("div",null,c().createElement("div",{className:"detail-field-title"},r),c().createElement(Ur.Z,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+r,step:e.getStep(e.props.zoom),defaultValue:e.roundValue(t,1e6),onChange:function(t){return e.onUpdateBBOX(t,r)}}))})),rC(eC(e),"renderCircleField",(function(t,r){return c().createElement(Ur.Z,{type:"number",id:"queryform_circle_"+r,defaultValue:e.roundValue(t,"radius"!==r||e.isWGS84()?1e6:100),step:e.getStepCircle(e.props.zoom,r),onChange:function(t){return e.onUpdateCircle(t,r)}})})),rC(eC(e),"renderDetailsContent",(function(){var t,r=e.props.geometry;if("BBOX"===e.props.type){var n=e.getBBOXDimensions(r);t=c().createElement("div",null,c().createElement("div",{className:"container-fluid"},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},c().createElement("span",null)),c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.north,"north")),c().createElement(g.Col,{xs:4},c().createElement("span",null))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.west,"west")),c().createElement(g.Col,{xs:4},c().createElement("span",null)),c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.est,"est"))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},c().createElement("span",null)),c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.sud,"sud")),c().createElement(g.Col,{xs:4},c().createElement("span",null)))),c().createElement("span",null,c().createElement("hr",{width:"90%"}),c().createElement("div",null,c().createElement("h5",null,c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===e.props.type){var o=e.getCircleDimensions(r),i=(0,zr.getUnits)(e.props.projection);t=c().createElement("div",null,c().createElement("div",{className:"container-fluid"},c().createElement(g.Row,null,c().createElement(g.Col,{xs:2},c().createElement("span",null)),c().createElement(g.Col,{xs:2},c().createElement("span",{className:"details-circle-attribute-name"},"x:")),c().createElement(g.Col,{xs:4},e.renderCircleField(o.x,"x")),c().createElement(g.Col,{xs:4},c().createElement("span",null))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:2},c().createElement("span",null)),c().createElement(g.Col,{xs:2},c().createElement("span",{className:"details-circle-attribute-name"},"y:")),c().createElement(g.Col,{xs:4},e.renderCircleField(o.y,"y")),c().createElement(g.Col,{xs:4},c().createElement("span",null))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:2},c().createElement("span",null)),c().createElement(g.Col,{xs:2},c().createElement("span",{className:"details-circle-attribute-name"},c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"":i}}),":")),c().createElement(g.Col,{xs:4},e.renderCircleField(o.radius,"radius")),c().createElement(g.Col,{xs:4},c().createElement("span",null)))),c().createElement("span",null,c().createElement("hr",{width:"90%"}),c().createElement("div",null,c().createElement("h5",null,c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return t})),rC(eC(e),"isWGS84",(function(){return"EPSG:4326"===e.props.projection})),rC(eC(e),"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),rC(eC(e),"resetGeom",(function(){"BBOX"===e.props.type?e.resetBBOX():"Circle"===e.props.type&&e.resetCircle()})),rC(eC(e),"resetBBOX",(function(){for(var t in e.extent)t&&(document.getElementById("queryform_bbox_"+t).value=e.roundValue(e.extent[t],1e6),e.onUpdateBBOX(e.extent[t],t))})),rC(eC(e),"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=e.roundValue(e.circle.radius,100),e.onUpdateCircle(e.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=e.roundValue(e.circle.x,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.x,"x"),document.getElementById("queryform_circle_y").value=e.roundValue(e.circle.y,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.y,"y")})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=le()({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=le()({},this.circle))}},{key:"render",value:function(){var e=this;return c().createElement(Du.Z,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&Xj(t.prototype,r),a}(c().Component);rC(nC,"propTypes",{useMapProjection:u().bool,geometry:u().object,type:u().string,onShowPanel:u().func,onChangeDrawingStatus:u().func,zoom:u().number,projection:u().string,enableGeodesic:u().bool}),rC(nC,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}});const oC=nC;function iC(e){return(iC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cC(e,t){return(cC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sC(e,t){return!t||"object"!==iC(t)&&"function"!=typeof t?uC(e):t}function uC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pC(e){return(pC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pC(n);if(o){var r=pC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sC(this,e)});function a(){var e;aC(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fC(uC(e=i.call.apply(i,[this].concat(r))),"state",{open:!1}),fC(uC(e),"getFilter",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n={filterFields:[{attribute:e.props.searchAttribute,operator:r,value:t,type:"list"}]};e.props.dependsOn&&(n.groupFields=[{id:1,logic:"AND",index:0}],n.filterFields[0].groupId=1,e.props.multivalue?(n.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),e.props.dependsOn.value instanceof Array?e.props.dependsOn.value.forEach((function(t){n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:t,groupId:2,type:"list"})})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:2,type:"list"})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:1,type:"list"}));var o=(0,uu.toOGCFilter)(e.props.typeName,n,e.props.wfs,e.props.sort||{sortBy:e.props.searchAttribute,sortOrder:"ASC"});return o})),fC(uC(e),"changeZoneValue",(function(t,r,n){var o;e.setState({open:!1}),o=e.props.multivalue?{value:n.map((function(e){return e.id})),feature:n.map((function(e){return e.feature}))}:{value:[n],feature:[e.values.filter((function(e){return e.id===n}))[0].feature]},e.props.onChange(e.props.zoneId,o)})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!(0,ue.isEqual)(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var r=t;e.props.valueField.split(".").forEach((function(e){r=r?r[e]:null}));var n=t;return e.props.textField.split(".").forEach((function(e){n=n?n[e]:null})),{id:r,name:n,feature:t}})));var t=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null),r=this.props.error;return r&&(r="object"!==iC(r)?r:r.status+" "+r.statusText+": "+r.data),c().createElement("div",{className:"zone-combo"},t,c().createElement(Ss,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:r,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var r=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,r,e.props.zoneId)}}}))}}])&&lC(t.prototype,r),a}(c().Component);fC(dC,"propTypes",{zoneId:u().number,url:u().string,typeName:u().string,wfs:u().string,busy:u().bool,values:u().array,value:u().oneOfType([u().object,u().number,u().string,u().array]),label:u().string,searchText:u().string,searchMethod:u().string,searchAttribute:u().string,sort:u().object,error:u().oneOfType([u().object,u().string]),comboFilter:u().oneOfType([u().bool,u().string,u().func]),groupBy:u().oneOfType([u().string,u().func]),multivalue:u().bool,open:u().bool,disabled:u().bool,dependsOn:u().object,valueField:u().string,textField:u().string,onSearch:u().func,onFilter:u().func,onChange:u().func,onSelect:u().func}),fC(dC,"contextTypes",{messages:u().object}),fC(dC,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}});const mC=dC;function yC(e){return(yC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bC(){return(bC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function gC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hC(e,t){return(hC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OC(e,t){return!t||"object"!==yC(t)&&"function"!=typeof t?wC(e):t}function wC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EC(e){return(EC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=EC(n);if(o){var r=EC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return OC(this,e)});function a(){var e;gC(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return SC(wC(e=i.call.apply(i,[this].concat(r))),"getMethodFromId",(function(t){return(0,ue.find)(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),SC(wC(e),"renderHeader",(function(){var t=(0,ie.S$)(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return c().createElement("span",null,c().createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t),c().createElement("button",{onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded),className:"close"},e.props.spatialPanelExpanded?c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-collapse-down"}):c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-expand"})))})),SC(wC(e),"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return c().createElement("div",null,c().createElement(g.Row,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("div",null,c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.filterType"}))),c().createElement(g.Col,{xs:6},c().createElement(Ss,{itemComponent:function(t){return c().createElement($j,bC({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return(0,ie.S$)(e.context.messages,t.name)||t.name})),placeholder:(0,ie.S$)(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:(0,ie.S$)(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),SC(wC(e),"renderDwithin",(function(){return c().createElement(g.Row,{className:"container-fluid filter-field-fixed-row"},c().createElement(g.Col,{xs:6,className:"filter-text-desc"},c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),c().createElement(g.Col,{xs:6},c().createElement(Ur.Z,{type:"number",min:"0",defaultValue:"0",disabled:!e.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(t){return e.props.actions.onChangeDwithinValue(t,name)}})))})),SC(wC(e),"renderZoneFields",(function(){return e.props.spatialField.method&&"ZONE"===e.props.spatialField.method&&e.props.spatialField.zoneFields&&e.props.spatialField.zoneFields.length>0?e.props.spatialField.zoneFields.map((function(t){return c().createElement(mC,{key:t.id,open:t.open,zoneId:t.id,url:t.url,typeName:t.typeName,wfs:t.wfs,busy:t.busy,label:t.label,values:t.values,value:t.value,valueField:t.valueField,textField:t.textField,searchText:t.searchText,searchMethod:t.searchMethod,searchAttribute:t.searchAttribute,sort:t.sort,error:t.error,disabled:t.disabled,dependsOn:t.dependson,groupBy:t.groupBy,multivalue:t.multivalue,onSearch:e.props.actions.zoneSearch,onFilter:e.props.actions.zoneFilter,onChange:e.props.actions.zoneChange})})):null})),SC(wC(e),"renderRoiPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method),r=t&&t.filterProps&&t.filterProps.valueField&&e.props.spatialField&&e.props.spatialField.value&&e.props.spatialField.value[t.filterProps.valueField];return c().createElement(g.Panel,null,c().createElement("div",{className:"container-fluid"},c().createElement(g.Row,{className:"filter-field-row filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("span",null,t&&t.name||t.id)),c().createElement(g.Col,{xs:6},c().createElement(Bj,{originalValue:r,key:e.props.spatialField.method,options:t,autocompleteStreamFactory:Sj.Vj,valueField:t&&t.filterProps&&t.filterProps.valueField,textField:t&&t.filterProps&&t.filterProps.valueField,url:t&&t.url,filter:"contains",onChangeSpatialFilterValue:e.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var t;(t=e.props.actions).onChangeDrawingStatus.apply(t,arguments)},filterProps:t&&t.filterProps})))))})),SC(wC(e),"renderSpatialPanel",(function(t,r,n){return c().createElement(g.Panel,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():c().createElement("span",null),e.renderZoneFields(),e.props.spatialField.method&&e.getMethodFromId(e.props.spatialField.method)&&"wfsGeocoder"===e.getMethodFromId(e.props.spatialField.method).type?e.renderRoiPanel():null,e.props.spatialOperations.length>1?c().createElement(g.Panel,null,c().createElement("div",null,t),n&&"DWITHIN"===n.id?e.renderDwithin():null,c().createElement(g.Row,null,c().createElement(g.Col,{xs:12},r))):c().createElement("span",null))})),SC(wC(e),"renderButtons",(function(){var t=[],r=e.props.showDetailsButton&&e.props.spatialField.geometry&&(e.props.spatialField.method&&"BBOX"===e.props.spatialField.method||"Circle"===e.props.spatialField.method),n=e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates;return r&&t.push({glyph:"pencil",onClick:function(){return e.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),n&&t.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",bsStyle:e.props.clearFilterOptions.buttonStyle,className:e.props.clearFilterOptions.className,onClick:function(){return e.resetSpatialFilter()}}),t})),SC(wC(e),"updateSpatialMethod",(function(t,r,n){e.props.actions.onShowSpatialSelectionDetails(!1);var o=e.props.spatialMethodOptions.filter((function(t){return n===((0,ie.S$)(e.context.messages,t.name)||t.name)}))[0].id,i=e.getMethodFromId(o);if(e.props.actions.onSelectSpatialMethod(o,r),"wfsGeocoder"!==e.getMethodFromId(o).type)switch(o){case"ZONE":e.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onSelectViewportSpatialMethod();break;default:e.changeDrawingStatus("start",o,"queryform",[],{geodesic:!!(0,ue.isNil)(i.geodesic)||i.geodesic,stopAfterDrawing:!0})}else e.changeDrawingStatus("clean","","queryform",[])})),SC(wC(e),"updateSpatialOperation",(function(t,r,n){var o=e.props.spatialOperations.filter((function(t){return n===(0,ie.S$)(e.context.messages,t.name)}))[0].id;e.props.actions.onSelectSpatialOperation(o,r)})),SC(wC(e),"resetSpatialFilter",(function(){e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onRemoveSpatialSelection(),e.props.actions.onShowSpatialSelectionDetails(!1)})),SC(wC(e),"changeDrawingStatus",(function(t,r,n,o,i){e.props.actions.onChangeDrawingStatus(t,void 0!==r?r:e.props.spatialField.method,n,o,i)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],r=c().createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(r=this.props.spatialField.geometry?null:c().createElement("span",null,c().createElement("div",{className:"m-label m-caption text-center"},c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var n=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?c().createElement(oC,{useMapProjection:this.props.useMapProjection,enableGeodesic:!!(0,ue.isNil)(n.geodesic)||n.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):c().createElement("span",null),i=c().createElement(g.Row,{className:"filter-field-row inline-form filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement(Wu.ZP.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),c().createElement(g.Col,{xs:6},c().createElement(Ss,{fieldOptions:this.props.spatialOperations.map((function(t){return(0,ie.S$)(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:(0,ie.S$)(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return c().createElement("div",{className:"query-filter-container"},this.props.withContainer?c().createElement(Du.Z,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,r,t)):this.renderSpatialPanel(i,r,t),o)}}])&&vC(t.prototype,r),a}(c().Component);SC(PC,"propTypes",{useMapProjection:u().bool,spatialField:u().object,spatialOperations:u().array,spatialMethodOptions:u().array,spatialPanelExpanded:u().bool,showDetailsButton:u().bool,clearFilterOptions:u().object,showDetailsPanel:u().bool,withContainer:u().bool,actions:u().object,zoom:u().number,projection:u().string}),SC(PC,"contextTypes",{messages:u().object}),SC(PC,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsButton:!0,clearFilterOptions:{className:"square-button-sm no-border",buttonStyle:"default"},showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}});const jC=PC;function CC(e){return(CC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xC(){return(xC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function TC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IC(e,t){return(IC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AC(e,t){return!t||"object"!==CC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FC(e){return(FC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var RC=dj((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded,r=void 0===t||t,n=e.spatialOperations,o=e.expandCrossLayerFilterPanel,i=void 0===o?function(){}:o,a=e.layers,l=void 0===a?[]:a,s=e.errorObj,u=e.loadingAttributes,p=e.loadingCapabilities,f=e.searchUrl,d=e.queryCollection,m=void 0===d?{}:d,y=e.attributes,v=void 0===y?[]:y,h=e.operation,O=e.updateLogicCombo,w=void 0===O?function(){}:O,E=e.resetCrossLayerFilter,S=void 0===E?function(){}:E,P=e.setOperation,j=void 0===P?function(){}:P,C=e.setQueryCollectionParameter,x=void 0===C?function(){}:C,T=e.addCrossLayerFilterField,k=void 0===T?function(){}:T,I=e.updateCrossLayerFilterField,A=void 0===I?function(){}:I,F=e.removeCrossLayerFilterField,D=void 0===F?function(){}:F,R=m.typeName,N=m.geometryName,M=m.filterFields,L=m.groupFields,_=void 0===L?[{id:1,logic:"OR",index:0}]:L;return c().createElement(Du.Z,{loading:p,expanded:r&&!p&&!s,error:s,errorMsgId:"queryPanel",buttons:rj(R?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return S()}}]:[]),onSwitch:i,title:c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.title"})},c().createElement(g.Row,{className:"inline-form filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("div",null,c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.targetLayer"}))),c().createElement(g.Col,{xs:6},c().createElement(Rr.ZP,{clearable:!1,disabled:p||!!s,isLoading:u,options:l.filter((function(e){return oj(f,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:R,onChange:function(e){x("typeName",e&&e.value)}}))),R&&N?c().createElement(g.Row,{className:"inline-form filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("div",null,c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.operation"}))),c().createElement(g.Col,{xs:6},c().createElement(ej,{value:h,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return j(t)},spatialOperations:ij(n)}))):null,R&&N&&h?c().createElement(g.Row,{className:"filter-field-fixed-row"},c().createElement(g.Col,{xs:12},c().createElement(rp,{autocompleteEnabled:!1,withContainer:!1,attributes:v,groupLevels:-1,filterFields:M,actions:{onUpdateLogicCombo:w,onAddFilterField:k,onUpdateFilterField:A,onRemoveFilterField:D},groupFields:_,filterField:!0}))):null)})),NC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=FC(n);if(o){var r=FC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return AC(this,e)});function a(){return TC(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return c().createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText);var e=c().createElement("div",{className:"m-header"},this.props.header,c().createElement(Ej,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError}));return this.props.attributes.length>0?c().createElement(Fr.Z,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},c().createElement(rp,{buttonStyle:this.props.buttonStyle,removeGroupButtonIcon:this.props.removeGroupButtonIcon,autocompleteEnabled:this.props.autocompleteEnabled,maxFeaturesWPS:this.props.maxFeaturesWPS,attributes:this.props.attributes,groupLevels:this.props.groupLevels,filterFields:this.props.filterFields,groupFields:this.props.groupFields,removeButtonIcon:this.props.removeButtonIcon,addButtonIcon:this.props.addButtonIcon,attributePanelExpanded:this.props.attributePanelExpanded,actions:this.props.attributeFilterActions}),this.props.toolsOptions.hideSpatialFilter?null:c().createElement(jC,{useMapProjection:this.props.useMapProjection,spatialField:this.props.spatialField,clearFilterOptions:this.props.clearFilterOptions,spatialOperations:this.props.spatialOperations,spatialMethodOptions:this.props.spatialMethodOptions,showDetailsButton:this.props.showDetailsButton,spatialPanelExpanded:this.props.spatialPanelExpanded,showDetailsPanel:this.props.showDetailsPanel,actions:this.props.spatialFilterActions,zoom:this.props.zoom,projection:this.props.projection}),this.props.toolsOptions.hideCrossLayer?null:c().createElement(RC,xC({spatialOperations:this.props.spatialOperations,crossLayerExpanded:this.props.crossLayerExpanded,searchUrl:this.props.searchUrl,featureTypeName:this.props.featureTypeName},this.props.crossLayerFilterOptions,this.props.crossLayerFilterActions))):c().createElement("div",{style:{margin:"0 auto",width:"60px"}},c().createElement(tP(),{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&kC(t.prototype,r),a}(c().Component);DC(NC,"propTypes",{params:u().object,featureTypeConfigUrl:u().string,useMapProjection:u().bool,attributes:u().array,featureTypeError:u().string,featureTypeErrorText:u().node,groupLevels:u().number,maxFeaturesWPS:u().number,filterFields:u().array,groupFields:u().array,spatialField:u().object,removeButtonIcon:u().string,addButtonIcon:u().string,attributePanelExpanded:u().bool,showDetailsButton:u().bool,spatialPanelExpanded:u().bool,crossLayerExpanded:u().bool,showDetailsPanel:u().bool,toolbarEnabled:u().bool,searchUrl:u().string,showGeneratedFilter:u().oneOfType([u().bool,u().string]),filterType:u().string,featureTypeName:u().string,ogcVersion:u().string,attributeFilterActions:u().object,spatialFilterActions:u().object,queryToolbarActions:u().object,resultTitle:u().string,pagination:u().object,sortOptions:u().object,spatialOperations:u().array,spatialMethodOptions:u().array,crossLayerFilterOptions:u().object,crossLayerFilterActions:u().object,hits:u().bool,clearFilterOptions:u().object,buttonStyle:u().string,removeGroupButtonIcon:u().string,maxHeight:u().number,allowEmptyFilter:u().bool,autocompleteEnabled:u().bool,emptyFilterWarning:u().bool,header:u().node,zoom:u().number,projection:u().string,toolsOptions:u().object,appliedFilter:u().object,storedFilter:u().object,advancedToolbar:u().bool,loadingError:u().bool}),DC(NC,"defaultProps",{params:{},featureTypeConfigUrl:null,useMapProjection:!0,groupLevels:1,buttonStyle:"default",removeGroupButtonIcon:"trash",groupFields:[],filterFields:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,spatialPanelExpanded:!0,showDetailsPanel:!1,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,autocompleteEnabled:!0,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,attributeFilterActions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){}},spatialFilterActions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeDwithinValue:function(){}},crossLayerFilterOptions:{},crossLayerFilterActions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{}});const MC=NC;function LC(){return(LC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var _C=(0,r(17252).Z)((function(e){return c().createElement("div",LC({className:"square-button pull-right no-border",style:{display:"flex"}},e),c().createElement(g.Glyphicon,{glyph:"exclamation-mark",className:"text-danger"}))}));const ZC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,r=e.onToggleQuery,n=void 0===r?function(){}:r,o=e.buttonStyle,i=void 0===o?"default":o;return c().createElement("div",{className:"mapstore-block-width"},c().createElement(qe.Z,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",bsStyle:i,onClick:function(){return n()}},c().createElement(g.Glyphicon,{glyph:"arrow-left"})),t&&c().createElement(_C,{popover:{text:c().createElement(b.Z,{msgId:"queryform.loadingError"})}})||c().createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},c().createElement(g.Glyphicon,{glyph:"filter",className:"text-primary"})))};var BC=r(32785);const GC={isAutoCompleteEnabled:function(e,t){return e.ofType(_m.S0).switchMap((function(e){var r=(0,Pr.y9)(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},(0,de.kS)(t.getState()));return null===r?Ai.Observable.of((0,Mm.NV)(!1)):Ai.Observable.fromPromise(Qm().post(r,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return(0,ue.startsWith)(e,"<ows:ExceptionReport")?Ai.Observable.of((0,Mm.NV)(!1)):Ai.Observable.of((0,Mm.NV)(!0))})).catch((function(){return Ai.Observable.of((0,Mm.NV)(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(Mm.l1).debounce((function(e){return Ai.Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var r=t.getState(),n=(0,kE.Vx)(r),o=r.queryform&&r.queryform.filterFields&&r.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0];if("selected"===e.fieldOptions.selected)return Ai.Observable.from([(0,Mm.$J)(o,[],0)]);var i=(0,BC.getWpsPayload)({attribute:o.attribute,layerName:(0,Zm.HY)(r),layerFilter:(0,kE.Vc)(r)||(0,kE.hI)(r),maxFeatures:n,startIndex:(e.fieldOptions.currentPage-1)*n,value:e.fieldValue}),a=(0,Pr.y9)(r.query.url,{outputFormat:"json"},(0,de.kS)(t.getState()));return null===a?Ai.Observable.of((0,Mm.NV)(!1)):Ai.Observable.fromPromise(Qm().post(a,i,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var r=(0,ue.isArray)(t.values)?t.values:[t.values],n=t.size;return Ai.Observable.from([(0,Mm.$J)(o,r,n),(0,Mm.js)(e.rowId,!0)])})).startWith((0,Mm.jR)(!0,o)).catch((function(){return Ai.Observable.from([(0,Mm.$J)(o,[],0),(0,q.vU)({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),(0,Mm.js)(e.rowId,!0)])})).concat([(0,Mm.jR)(!1,o)])}))}};function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zC(Object(r),!0).forEach((function(t){WC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function WC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const VC={handleLayerFilterPanel:function(e,t){var r=t.getState;return e.ofType(B).switchMap((function(){var t,n=(0,H.Iz)(r()),o=n||{},i=o.url,a=o.name,l=o.layerFilter,c=n&&n.search&&n.search.url;return Ai.Observable.of((0,_m.gT)(c||i,a),(0,Mm.F)(l),(t=l,{type:N,filter:t}),(0,v.Xg)("queryPanel","enabled",!0)).merge(Ai.Observable.of((0,_m.jG)()).filter((function(){return!(0,ue.get)(r(),"query.isLayerFilter")})),e.ofType(Mm.Wm).switchMap((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=e.spatialField,n=e.filterFields;return!!(n&&(0,ue.head)(n)||r&&r.method&&r.operation&&r.geometry||t&&t.collectGeometries&&t.operation)}(e.filterObj)?UC({},(0,ue.get)(r(),"queryform",{})):void 0;return t&&(t.filterFields=t.attributePanelExpanded&&t.filterFields||[],t.spatialField=t.spatialPanelExpanded&&t.spatialField||null,t.crossLayerFilter=t.crossLayerExpanded&&(0,uu.setupCrossLayerFilterDefaults)(t.crossLayerFilter)||null),Ai.Observable.of(function(e,t){return(0,h.He)(e,{layerFilter:t})}(n.id,t))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).merge(e.ofType(Lm.nk)))}}(e)).concat(Ai.Observable.from([(0,_m.jG)(),(0,Mm.mc)(),(0,Nm.Yf)("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var r=t.getState;return e.ofType(_).switchMap((function(){var e={typeName:(0,ue.get)(r(),"state.query.typeName")},t=(0,ue.get)(r(),"state.query.url"),n=(0,ue.get)(r(),"layerFilter.persisted");return Ai.Observable.of((0,Nm.Yf)("clean","","queryform",[]),(0,Mm.F)(n),(0,Mm.yC)(t,n,e),(0,_m.Xc)())}))},onApplyFilter:function(e,t){var r=t.getState;return e.ofType(Z).map((function(){return e=UC({},(0,ue.get)(r(),"queryform",{})),{type:M,filter:e};var e}))}},qC={updateSpatialFilterValue:function(e){return e.ofType(Mm.Wi).switchMap((function(e){var t=e.feature,r=e.srsName,n=e.style,o=e.options;return Ai.Observable.of((0,Nm.Yf)("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:r},n)).concat(t&&o&&o.autoZoom?[(0,V.Px)(OE()(t),r)]:[])}))}};var HC=r(8575),$C=r(85148);function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KC(Object(r),!0).forEach((function(t){XC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function XC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function JC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QC(Object(r),!0).forEach((function(t){ex(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ex(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tx(e){return(tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rx=function(e){return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return{label:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:lj(e)}};function nx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ox(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nx(Object(r),!0).forEach((function(t){ix(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ix(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ax={};var lx=r(97301),cx=r(46905);function sx(e){return(sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ux(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function px(e,t){return(px=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fx(e,t){return!t||"object"!==sx(t)&&"function"!=typeof t?dx(e):t}function dx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mx(e){return(mx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yx(Object(r),!0).forEach((function(t){gx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vx=Mm.mc.bind(null,"query"),hx=(0,p.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:bx({layers:(0,kE.GK)(e),crossLayerFilter:(0,kE.qh)(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:((0,X.Od)(e)||{}).zoom,projection:((0,X.Od)(e)||{}).projection}}),(function(e){return{attributeFilterActions:(0,gE.DE)({onAddGroupField:Mm.kQ,onAddFilterField:Mm.jW,onRemoveFilterField:Mm.JG,onUpdateFilterField:Mm.q$,onUpdateExceptionField:Mm.OZ,onUpdateLogicCombo:Mm.Nc,onRemoveGroupField:Mm.I5,onChangeCascadingValue:Mm.QL,toggleMenu:Mm.js,onExpandAttributeFilterPanel:Mm.I},e),spatialFilterActions:(0,gE.DE)({onChangeSpatialFilterValue:Mm.uo,onExpandSpatialFilterPanel:Mm.ku,onSelectSpatialMethod:Mm.HT,onSelectViewportSpatialMethod:Mm.lg,onSelectSpatialOperation:Mm.VF,onChangeDrawingStatus:Nm.Yf,onRemoveSpatialSelection:Mm.Ry,onShowSpatialSelectionDetails:Mm.ZH,onChangeDwithinValue:Mm.AQ,zoneFilter:Mm.eJ,zoneSearch:Mm.uM,zoneChange:Mm.uP},e),queryToolbarActions:(0,gE.DE)({onQuery:Mm.yC,onReset:vx,onSaveFilter:G,onRestoreFilter:z,storeAppliedFilter:U,onChangeDrawingStatus:Nm.Yf},e),crossLayerFilterActions:(0,gE.DE)({expandCrossLayerFilterPanel:Mm.EU,setCrossLayerFilterParameter:Mm.IV,addCrossLayerFilterField:Mm.N5,updateCrossLayerFilterField:Mm.bn,removeCrossLayerFilterField:Mm.Bm,resetCrossLayerFilter:Mm.F2},e)}}))(MC),Ox=(0,D.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},H.Bt,function(e){return e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}}},function(e){return e.controls&&e.controls.queryPanel&&e.controls.queryPanel.enabled||!1},function(e){return(0,ze.ic)(e,{height:!0})},Ry.Wy,kE.Vc,kE.hI,function(e){return e&&e.query&&e.query.isLayerFilter},H.P_],(function(e,t,r,n,o,i,a,l,c,s){return{enabled:e,groups:t,settings:r,querypanelEnabled:n,layout:i?{}:o,appliedFilter:a,storedFilter:l,advancedToolbar:c,loadingError:s}})),wx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&px(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mx(n);if(o){var r=mx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return fx(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),gx(dx(t=i.call(this,e)),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),gx(dx(t),"renderSidebar",(function(){return c().createElement(Ue.Z,{open:t.props.querypanelEnabled,sidebar:t.renderQueryPanel(),sidebarClassName:"query-form-panel-container",touch:!1,styles:{sidebar:bx(bx({},t.props.layout),{},{zIndex:1024,width:600}),overlay:{zIndex:1023,width:0},root:{right:t.props.querypanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},c().createElement("div",null))})),gx(dx(t),"onToggle",(function(){t.props.advancedToolbar&&!(0,ue.isEqual)(t.props.appliedFilter,t.props.storedFilter)?t.setState((function(){return{showModal:!0}})):t.props.onToggleQuery()})),gx(dx(t),"restoreAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onRestoreFilter(),t.props.onToggleQuery()})),gx(dx(t),"storeAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onSaveFilter(),t.props.onToggleQuery()})),gx(dx(t),"renderQueryPanel",(function(){return c().createElement("div",{className:"mapstore-query-builder"},c().createElement(hx,{header:c().createElement(ZC,{loadingError:t.props.loadingError,onToggleQuery:t.onToggle}),spatialOperations:t.props.spatialOperations,spatialMethodOptions:t.props.spatialMethodOptions,toolsOptions:t.props.toolsOptions,featureTypeErrorText:c().createElement(vt.Z,{msgId:"layerProperties.featureTypeError"}),appliedFilter:t.props.appliedFilter,storedFilter:t.props.storedFilter,advancedToolbar:t.props.advancedToolbar,loadingError:t.props.loadingError}),c().createElement(m.Z,null,c().createElement(y.Z,{fade:!0,show:t.state.showModal,title:c().createElement(vt.Z,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return t.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:c().createElement(vt.Z,{msgId:"yes"}),onClick:t.storeAndClose},{bsStyle:"primary",text:c().createElement(vt.Z,{msgId:"no"}),onClick:t.restoreAndClose}]},c().createElement("div",{className:"ms-alert"},c().createElement("div",{className:"ms-alert-center"},c().createElement(vt.Z,{msgId:t.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),t.state={showModal:!1},t}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.querypanelEnabled&&!1===this.props.querypanelEnabled&&this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&ux(t.prototype,r),a}(c().Component);gx(wx,"propTypes",{id:u().number,buttonContent:u().node,groups:u().array,settings:u().object,querypanelEnabled:u().bool,groupStyle:u().object,groupPropertiesChangeHandler:u().func,layerPropertiesChangeHandler:u().func,onToggleGroup:u().func,onToggleLayer:u().func,onToggleQuery:u().func,onZoomToExtent:u().func,retrieveLayerData:u().func,onSort:u().func,onInit:u().func,onSettings:u().func,hideSettings:u().func,updateSettings:u().func,updateNode:u().func,removeNode:u().func,activateRemoveLayer:u().bool,activateLegendTool:u().bool,activateZoomTool:u().bool,activateSettingsTool:u().bool,visibilityCheckType:u().string,settingsOptions:u().object,layout:u().object,toolsOptions:u().object,appliedFilter:u().object,storedFilter:u().object,advancedToolbar:u().bool,onSaveFilter:u().func,onRestoreFilter:u().func}),gx(wx,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},querypanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){}});const Ex={QueryPanelPlugin:(0,p.connect)(Ox,{groupPropertiesChangeHandler:h.WO,layerPropertiesChangeHandler:h.He,retrieveLayerData:W.k,onToggleGroup:(0,ne.toggleByType)("groups",h.bh),onToggleLayer:(0,ne.toggleByType)("layers",h.bh),onToggleQuery:v.Xi.bind(null,"queryPanel",null),onSort:(0,ne.sortUsing)(ne.sortLayers,h.MK),onSettings:h.RP,onInit:_m.Xc,onZoomToExtent:V.Px,hideSettings:h.sF,updateSettings:h.VP,updateNode:h.tV,removeNode:h.ZF,onSaveFilter:G,onRestoreFilter:z})(wx),reducers:{queryform:cx.Z,query:lx.Z,layerFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ax,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return ox(ox({},ax),{},{persisted:t.filter,applied:t.filter});case _:return ox(ox({},e),{},{applied:e.persisted});case M:return ox(ox({},e),{},{applied:t.filter});case L:return ox(ox({},e),{},{persisted:e.applied});case Mm.Eg:return ox(ox({},e),{},{applied:void 0});default:return e}}},epics:bx(bx(bx({featureTypeSelectedEpic:function(e,t){return e.ofType(_m.S0).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var r=t.getState();if((0,Zm.hk)(r,e.typeName)){var n=rx((0,Zm.qj)(r,e.typeName)),o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return Ai.Observable.of((0,Mm.DD)(o))}return Ai.Observable.defer((function(){return Qm().get(Pr.ZP.filterUrlParams(e.url,(0,de.kS)(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===tx(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var r=rx(t.data),n=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return Ai.Observable.from([(0,Mm.DD)(n),(0,_m.rG)(e.typeName,r)])}try{JSON.parse(t.data)}catch(t){return Ai.Observable.from([(0,_m.t3)(e.typeName,"Error from WFS: "+t.message),q.vU({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return Ai.Observable.from([(0,_m.t3)(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return Ai.Observable.of((0,_m.t3)(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(_m.Qq).switchMap((function(r){var n,o,i,a=(o=(i=t.getState()).query&&i.query.featureTypes&&i.query.featureTypes[i.query.typeName]&&i.query.featureTypes[i.query.typeName].attributes&&i.query.featureTypes[i.query.typeName].attributes[0]&&i.query.featureTypes[i.query.typeName].attributes[0].attribute||null)?{sortBy:o,sortOrder:"A"}:{},l=(null==r||null===(n=r.filterObj)||void 0===n?void 0:n.sortOptions)||a,c=Zm.b0.totalFeatures(t.getState()),s=Pr.ZP.filterUrlParams(r.searchUrl,(0,de.kS)(t.getState())),u=(0,H.Iz)(t.getState())||{},p=u.layerFilter,f=u.params,d=(0,ue.find)(Object.keys(f||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()})),m=(0,uu.mergeFiltersToOGC)({ogcVersion:"1.1.0"},d,p,r.filterObj),y=function(e,t,r){var n=(0,TE.u$)(r),o=(0,$C.jo)({id:n},"time")(r),i=(0,H.CA)(r,n)||{},a=(0,ue.get)(i,'params["time"]');if((0,TE.DK)(r)&&o&&a){var l=(0,HC.parse)(e)||{};return{url:(0,HC.format)(YC(YC({},l),{},{query:YC(YC({},l.query),{},{time:a})})),options:t}}return{url:e,options:t}}(s,r.queryOptions||{},t.getState()),b=y.url,g=y.options,v=JC(JC({},r.filterObj.pagination),{},{totalFeatures:c,sortOptions:l},g);return Ai.Observable.merge((0,Ym.Mc)(JC(JC({},u),{},{name:r.filterObj.featureTypeName||u.name,search:JC(JC({},u.search),{},{url:b})}),m,v).map((function(e){return(0,_m.w_)(e,r.searchUrl,r.filterObj,r.queryOptions,r.reason)})).catch((function(e){return Ai.Observable.of((0,_m.Lm)(e))})).startWith((0,_m.Fs)(!0)).concat(Ai.Observable.of((0,_m.Fs)(!1)))).takeUntil(e.ofType(_m.VN))}))},viewportSelectedEpic:function(e,t){return e.ofType(Mm.On,V.pP).switchMap((function(e){var r=e.type===V.pP?e:(0,X.Od)(t.getState());if((e.type===Mm.On||e.type===V.pP&&"Viewport"===(0,kE.BU)(t.getState()))&&r.bbox&&r.bbox.bounds&&r.bbox.crs){var n=Object.keys(r.bbox.bounds).reduce((function(e,t){return le()({},e,ex({},t,parseFloat(r.bbox.bounds[t])))}),{});return Ai.Observable.of((0,Mm.ds)(zr.default.getViewportGeometry(n,r.bbox.crs)))}return Ai.Observable.empty()}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(_m.R1).switchMap((function(){var e=t.getState(),r=(0,kE.vE)(e),n={type:"Feature",geometry:{type:(0,kE.a8)(e),coordinates:(0,kE.G$)(e)}},o=(0,kE.Nl)(e)?(0,Nm.Yf)("drawOrEdit",r.method||"","queryform",[n],{featureProjection:(0,kE.IM)(e),drawEnabled:!1,editEnabled:!1}):(0,Nm.Yf)("clean",r.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return Ai.Observable.of(o)}))}},GC),qC),VC)};r(65288);var Sx=r(53001),Px=r(74855),jx=r.n(Px),Cx=r(33044);function xx(e){return(xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ix(e,t){return(Ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ax(e,t){return!t||"object"!==xx(t)&&"function"!=typeof t?Fx(e):t}function Fx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dx(e){return(Dx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ix(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dx(n);if(o){var r=Dx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ax(this,e)});function a(){var e;Tx(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Rx(Fx(e=i.call.apply(i,[this].concat(r))),"state",{showCopiedToolTip:!1}),e}return t=a,(r=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?(0,Cx.addAuthenticationToUrl)(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=c().createElement(g.Tooltip,{id:"tooltip"},c().createElement(b.Z,{msgId:r})),o=c().createElement(jx(),{text:t,onCopy:this.props.onCopy},c().createElement(We.Z,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},c().createElement(qe.Z,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},c().createElement(g.Glyphicon,{glyph:"paperclip"}),"",this.props.labelId&&c().createElement(b.Z,{msgId:this.props.labelId}))));return c().createElement("div",{className:"link-sharing"},c().createElement(g.FormGroup,{bsSize:this.props.bsSize},c().createElement(g.FormControl,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}])&&kx(t.prototype,r),a}(c().Component);Rx(Nx,"propTypes",{url:u().string.isRequired,labelId:u().string,onCopy:u().func,bsSize:u().string,addAuthentication:u().bool}),Rx(Nx,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1});const Mx=Nx;function Lx(e){return(Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _x(){return(_x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Zx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gx(e,t){return(Gx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zx(e,t){return!t||"object"!==Lx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ux(e){return(Ux=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gx(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ux(n);if(o){var r=Ux(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return zx(this,e)});function a(){return Zx(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["links","buttonSize"]),o=t.map((function(e,t){return c().createElement(Mx,_x({key:t,url:e.url,labelId:e.labelId},n))})),i=c().createElement(g.Popover,{className:"links-popover",id:"links-popover"},c().createElement("h5",null,c().createElement(b.Z,{msgId:"catalog.share"})),o);return c().createElement(We.Z,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:i},c().createElement(qe.Z,{bsSize:r,className:"square-button-md",bsStyle:"primary"},c().createElement(g.Glyphicon,{glyph:"link"})))}}])&&Bx(t.prototype,r),a}(c().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Wx,"propTypes",{links:u().array,onCopy:u().func,messages:u().object,locale:u().string,buttonSize:u().string,popoverContainer:u().object,addAuthentication:u().bool});const Vx=Wx;var qx=r(5055),Hx=r.n(qx);function $x(){return($x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Kx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yx=(0,Ge.Z)(qe.Z);const Xx=function(e){var t,r,n=e.record,o=e.service,i=e.children,a=e.addLayer,s=void 0===a?function(){}:a,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["record","service","children","addLayer"]),p=(t=(0,l.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Kx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kx(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],d=p[1];return c().createElement(Yx,$x({disabled:f},u,{onClick:function(){var e;d(!0),(e=n.tileMapUrl,Qm().get(e).then((function(e){return new Promise((function(t){Hx().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(e){d(!1),s((0,fy.oR)(n,e,o))}))}}),f?c().createElement(Mg.Z,null):i)};function Qx(){return(Qx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Jx=(0,Ge.Z)(qe.Z);const eT=function(e){var t=e.record,r=e.service,n=e.children,o=e.addLayer,i=void 0===o?function(){}:o,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["record","service","children","addLayer"]);return c().createElement(Jx,Qx({},a,{onClick:function(){i((0,fy.eX)(t,r))}}),n)};var tT=r(3932),rT=r.n(tT),nT=r(7872);function oT(e){return(oT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aT(Object(r),!0).forEach((function(t){mT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uT(e,t){return(uT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pT(e,t){return!t||"object"!==oT(t)&&"function"!=typeof t?fT(e):t}function fT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dT(e){return(dT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yT=(0,Ge.Z)(qe.Z),bT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dT(n);if(o){var r=dT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return pT(this,e)});function a(){var e;cT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return mT(fT(e=i.call.apply(i,[this].concat(r))),"state",{visibleExpand:!1}),mT(fT(e),"getTitle",(function(t){return(0,ue.isObject)(t)?t[e.props.currentLocale]||t.default:t||""})),mT(fT(e),"renderThumb",(function(t,r){var n=t||rT();return c().createElement(g.Image,{className:"preview",src:n,alt:r&&e.getTitle(r.title)})})),mT(fT(e),"renderButtons",(function(t,r){if(!t||!t.references)return null;var n=(0,fy.tW)(t),o=n.wms,i=n.wmts,a=n.tms,l=n.wfs,s=(0,fy.FJ)(t).esri,u=t&&t.background,p=t&&"tileprovider"===t.type&&t.provider,f=[];if(u&&f.push(r?c().createElement(b.Z,{msgId:"catalog.backgroundAlreadyAdded"}):c().createElement(yT,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var t=lT(lT({},u),{},{id:u.name,visibility:!1});e.props.onLayerAdd(t,{background:u})},key:"addlayer"},c().createElement(g.Glyphicon,{glyph:"plus"}))),o||i){var d=o?"wms":"wmts";f.push(c().createElement(yT,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var r=e.makeLayer(d,o||i,t.format&&[t.format]||t.formats);r&&e.addLayer(r,{record:t})},key:"add".concat(d,"layer")},c().createElement(g.Glyphicon,{glyph:"plus"})))}if(s&&f.push(c().createElement(yT,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,fy.AD)(e.props.record,e.props.layerBaseConfig))},key:"addesrilayer"},c().createElement(g.Glyphicon,{glyph:"plus"}))),a&&f.push(c().createElement(Xx,{service:e.props.service,key:"addTmsLayer",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},c().createElement(g.Glyphicon,{glyph:"plus"}))),l&&f.push(c().createElement(yT,{tooltipId:"catalog.addToMap",key:"addWFSLayer",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,fy.LZ)(e.props.record,e.props.layerBaseConfig))}},c().createElement(g.Glyphicon,{glyph:"plus"}))),p&&f.push(c().createElement(eT,{key:"addTileProviderLayer",service:e.props.service,tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},c().createElement(g.Glyphicon,{glyph:"plus"}))),e.props.showGetCapLinks){var m=(0,fy.F8)(t);m.length>0&&f.push(c().createElement(Vx,{key:"sharing-links",popoverContainer:fT(e),links:m,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication}))}return f})),mT(fT(e),"renderDescription",(function(t){if(!t)return null;var r=(0,ie.S$)(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?c().createElement("div",{className:"catalog-metadata ql-editor"},c().createElement(Jn.Z,{html:(0,Pj.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(e){return"".concat((0,ue.trim)(e.substring(2,e.length-1))," ").concat(r)}))})):t.metadataTemplate?"":(0,ue.isArray)(t.description)?t.description.join(", "):t.description})),mT(fT(e),"isLinkCopied",(function(t){return e.state[t]})),mT(fT(e),"setLinkCopiedStatus",(function(t,r){e.setState(mT({},t,r))})),mT(fT(e),"getLayerFormat",(function(t){return 0===t.length||t.filter((function(t){return t===e.props.defaultFormat})).length>0?e.props.defaultFormat:t[0]})),mT(fT(e),"makeLayer",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e.props.defaultFormat],o=(0,fy.n0)(r.SRS);if(r.SRS.length>0&&!(0,zr.isAllowedSRS)(e.props.crs,o))return e.props.onError("catalog.srs_not_allowed"),null;var i=e.props.service&&e.props.service.localizedLayerStyles;return(0,fy.ll)(e.props.record,t,lT({removeParams:e.props.authkeyParamNames},"wms"===t?{catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+e.props.record.identifier:null,format:e.getLayerFormat(n.filter((function(e){return 0===e.indexOf("image/")})))}:{format:e.getLayerFormat(n.filter((function(e){return 0===e.indexOf("image/")})))}),e.props.layerBaseConfig,i)})),mT(fT(e),"addLayer",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.background;if("backgroundSelector"===e.props.source)n?(e.props.onLayerAdd(lT(lT({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var o=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:o})}})),mT(fT(e),"displayExpand",(function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=(0,ie.S$)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,Pj.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(t){return"".concat((0,ue.trim)(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e,t=this,r=this.props.record,n=(0,fy.tW)(r),o=n.wms,i=n.wmts,a=n.tms,l=n.wfs,s=(0,fy.FJ)(r).esri,u=r&&"tileprovider"===r.type&&r.provider,p=r&&r.background,f=p&&(0,ue.head)((this.props.layers||[]).filter((function(e){return e.id===p.name||e.type===p.type&&e.source===p.source&&e.name===p.name})));return r?c().createElement("div",null,c().createElement(dd.Z,{style:{transform:"none",opacity:f?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(r&&r.thumbnail||p&&nT.Z[p.source][p.name],r),title:r&&this.getTitle(r.title),description:c().createElement("span",null,c().createElement("div",{className:!0,ref:function(e){t.sideCardDesc=e}},this.renderDescription(r))),caption:c().createElement("div",null,!this.props.hideIdentifier&&c().createElement("div",{className:"identifier"},r&&r.identifier),c().createElement("div",null,!o&&!i&&!s&&!p&&!a&&!u&&!l&&c().createElement("small",{className:"text-danger"},c().createElement(b.Z,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&c().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(e){t.descriptionRuler=e}},this.renderDescription(r))),tools:c().createElement(Dr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[].concat((e=(r&&this.renderButtons(r,f)||[]).map((function(e){return{Element:function(){return e}}})),function(e){if(Array.isArray(e))return iT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return iT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iT(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return t.setState({fullText:!t.state.fullText})}}])})})):null}}])&&sT(t.prototype,r),a}(c().Component);mT(bT,"propTypes",{addAuthentication:u().bool,authkeyParamNames:u().array,buttonSize:u().string,catalogURL:u().string,catalogType:u().string,crs:u().string,currentLocale:u().string,hideThumbnail:u().bool,hideExpand:u().bool,hideIdentifier:u().bool,layerBaseConfig:u().object,onCopy:u().func,onError:u().func,onLayerAdd:u().func,record:u().object,showGetCapLinks:u().bool,zoomToLayer:u().bool,onPropertiesChange:u().func,onLayerChange:u().func,layers:u().array,onAdd:u().func,source:u().string,onAddBackgroundProperties:u().func,deletedId:u().string,clearModal:u().func,service:u().service,showTemplate:u().bool,defaultFormat:u().string,formatOptions:u().array}),mT(bT,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),mT(bT,"contextTypes",{messages:u().object});const gT=bT;function vT(e){return(vT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hT(){return(hT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function OT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ET(e,t){return(ET=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ST(e,t){return!t||"object"!==vT(t)&&"function"!=typeof t?PT(e):t}function PT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jT(e){return(jT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ET(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jT(n);if(o){var r=jT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ST(this,e)});function a(){var e;OT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return CT(PT(e=i.call.apply(i,[this].concat(r))),"renderRecordItem",(function(t){var r=e.props.recordItem||gT;return c().createElement(g.Col,hT({},e.props.column,{key:t.identifier}),c().createElement(r,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,formatOptions:e.props.formatOptions,layerBaseConfig:e.props.layerBaseConfig}))})),e}return t=a,(r=[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return c().createElement(g.Grid,{className:"record-grid",fluid:!0,style:this.props.style},c().createElement(g.Row,null,e.map(this.renderRecordItem)))}return null}}])&&wT(t.prototype,r),a}(c().Component);CT(xT,"propTypes",{crs:u().string,recordItem:u().element,catalogURL:u().string,catalogType:u().string,zoomToLayer:u().bool,onLayerAdd:u().func,onPropertiesChange:u().func,onError:u().func,records:u().array,authkeyParamNames:u().array,style:u().object,showGetCapLinks:u().bool,addAuthentication:u().bool,column:u().object,currentLocale:u().string,hideThumbnail:u().bool,hideIdentifier:u().bool,hideExpand:u().bool,source:u().string,onAddBackgroundProperties:u().func,modalParams:u().object,layers:u().object,clearModal:u().func,onAddBackground:u().func,showTemplate:u().bool,service:u().object,defaultFormat:u().string,formatOptions:u().array,layerBaseConfig:u().object}),CT(xT,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const TT=xT;function kT(e){return(kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IT(){return(IT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function AT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AT(Object(r),!0).forEach((function(t){ZT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NT(e,t){return(NT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MT(e,t){return!t||"object"!==kT(t)&&"function"!=typeof t?LT(e):t}function LT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _T(e){return(_T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_T(n);if(o){var r=_T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return MT(this,e)});function a(){var e;DT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ZT(LT(e=i.call.apply(i,[this].concat(r))),"state",{catalogURL:null}),ZT(LT(e),"onSearchTextChange",(function(t){e.props.onChangeText(t.target.value)})),ZT(LT(e),"onKeyDown",(function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})})),ZT(LT(e),"getServices",(function(){return((0,ue.has)(e.props.services,"default_map_backgrounds")?["default_map_backgrounds"]:[]).concat(Object.keys((0,ue.omit)(e.props.services,"default_map_backgrounds"))).map((function(t){return le()({},e.props.services[t],{label:(0,ie.S$)(e.context.messages,e.props.services[t].title),value:t})}))})),ZT(LT(e),"renderResult",(function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?c().createElement("div",null,c().createElement(b.Z,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError():null})),ZT(LT(e),"renderError",(function(e){return c().createElement(g.Alert,{bsStyle:"danger"},c().createElement(b.Z,{msgId:e||"catalog.error"}))})),ZT(LT(e),"renderLoading",(function(){return c().createElement("div",{className:"catalog-results loading"},c().createElement(Ga.Z,{size:176}))})),ZT(LT(e),"renderPagination",(function(){if(e.props.result){var t=e.props.result.numberOfRecordsMatched,r=e.props.result.numberOfRecordsReturned,n=e.props.searchOptions.startPosition,o=e.props.pageSize,i=Math.floor(n/o),a=Math.ceil(t/o);return c().createElement("div",{className:"catalog-pagination"},c().createElement(g.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:a,maxButtons:5,activePage:i+1,onSelect:e.handlePage}),c().createElement("div",{className:"push-right"},c().createElement(b.Z,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+r-1,total:t}})))}return null})),ZT(LT(e),"renderRecords",(function(){var t="",r=!1,n=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var o=e.props.services[e.props.selectedService];(0,ue.isNil)(o.metadataTemplate)||(0,ue.isNil)(o.showTemplate)||(r=o.showTemplate,t=o.metadataTemplate),(0,ue.isNil)(o.hideThumbnail)||(n=o.hideThumbnail)}return c().createElement("div",{className:"catalog-results"},c().createElement(TT,IT({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:n,records:e.props.records.map((function(e){return r&&t?FT(FT({},e),{},{metadataTemplate:t}):e})),clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,formatOptions:e.props.formatOptions,layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))})),ZT(LT(e),"renderButtons",(function(){var t=[];return e.props.includeSearchButton&&t.push(c().createElement(qe.Z,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){return e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},c().createElement(b.Z,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(c().createElement(qe.Z,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},c().createElement(b.Z,{msgId:"catalog.reset"}))),t})),ZT(LT(e),"renderTextSearch",(function(){var t=c().createElement(g.FormControl,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:(0,ie.S$)(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?c().createElement(g.Panel,{collapsible:!0,defaultExpanded:!1,header:(0,ie.S$)(e.context.messages,"catalog.options")},t):t})),ZT(LT(e),"isValidServiceSelected",(function(){return void 0!==e.props.services[e.props.selectedService]})),ZT(LT(e),"search",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.services,n=t.selectedService,o=t.start,i=void 0===o?1:o,a=t.searchText,l=void 0===a?"":a,c=r[n].url,s=r[n].type;e.props.onSearch({format:s,url:c,startPosition:i,maxRecords:e.props.pageSize,text:l||"",options:{service:e.props.services[n]}})})),ZT(LT(e),"reset",(function(){e.props.onReset()})),ZT(LT(e),"handlePage",(function(t){if(t){var r=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:r,searchText:e.props.searchText})}})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e=this;return c().createElement(Fr.Z,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:c().createElement(g.Form,null,c().createElement(g.FormGroup,{controlId:"labelService",key:"labelService"},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.service"}))),c().createElement(g.FormGroup,{controlId:"service",key:"service"},c().createElement(g.InputGroup,null,c().createElement(Rr.ZP,{clearValueText:(0,ie.S$)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,ie.S$)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(t){return e.props.onChangeSelectedService(t&&t.value?t.value:"")},placeholder:(0,ie.S$)(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&"default_map_backgrounds"!==this.props.selectedService?c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!1)}},c().createElement(g.Glyphicon,{glyph:"pencil"})):null,c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!0)}},c().createElement(g.Glyphicon,{glyph:"plus"})))),c().createElement(g.FormGroup,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),c().createElement(g.FormGroup,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])&&RT(t.prototype,r),a}(c().Component);ZT(BT,"propTypes",{active:u().bool,searchText:u().string,addAuthentication:u().bool,buttonClassName:u().string,buttonStyle:u().object,currentLocale:u().string,loading:u().bool,format:u().string,crs:u().string,gridOptions:u().object,includeSearchButton:u().bool,includeResetButton:u().bool,loadingError:u().object,layerError:u().string,mode:u().string,onChangeCatalogMode:u().func,onChangeText:u().func,onChangeFormat:u().func,onChangeSelectedService:u().func,onPropertiesChange:u().func,onError:u().func,onLayerAdd:u().func,onReset:u().func,onSearch:u().func,onAddBackground:u().func,pageSize:u().number,records:u().array,authkeyParamNames:u().array,recordItem:u().element,result:u().object,searchOptions:u().object,selectedService:u().string,services:u().object,showGetCapLinks:u().bool,wrapOptions:u().bool,zoomToLayer:u().bool,hideThumbnail:u().bool,hideIdentifier:u().bool,hideExpand:u().bool,source:u().string,onAddBackgroundProperties:u().func,modalParams:u().object,layers:u().array,clearModal:u().func,formatOptions:u().array,layerBaseConfig:u().object}),ZT(BT,"contextTypes",{messages:u().object}),ZT(BT,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}],layerBaseConfig:{},crs:"EPSG:3857"});const GT=BT,zT=function(e){var t=e.children,r=e.service,n=e.isLocalizedLayerStylesEnabled,o=e.onChangeMetadataTemplate,i=void 0===o?function(){}:o,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a,s=e.onToggleTemplate,u=void 0===s?function(){}:s,p=e.onToggleThumbnail,f=void 0===p?function(){}:p;return c().createElement("div",null,c().createElement(g.FormGroup,{controlId:"autoload",key:"autoload"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{value:"autoload",onChange:function(e){return l("autoload",e.target.checked)},checked:!(0,ue.isNil)(r.autoload)&&r.autoload},c().createElement(b.Z,{msgId:"catalog.autoload"})))),c().createElement(g.FormGroup,{controlId:"thumbnail",key:"thumbnail"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{onChange:function(){return f()},checked:!!(0,ue.isNil)(r.hideThumbnail)||!r.hideThumbnail},c().createElement(b.Z,{msgId:"catalog.showPreview"})))),!(!n||(0,ue.isNil)(r.type))&&"wms"===r.type&&c().createElement(g.FormGroup,{controlId:"localized-styles",key:"localized-styles"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return l("localizedLayerStyles",e.target.checked)},checked:!(0,ue.isNil)(r.localizedLayerStyles)&&r.localizedLayerStyles},c().createElement(b.Z,{msgId:"catalog.enableLocalizedLayerStyles.label"}),"",c().createElement(wl.Z,{text:c().createElement(b.Z,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})})))),!(0,ue.isNil)(r.type)&&"csw"===r.type&&c().createElement(g.FormGroup,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{onChange:function(){return u()},checked:r&&r.showTemplate},c().createElement(b.Z,{msgId:"catalog.showTemplate"})),c().createElement("br",null)),r&&r.showTemplate&&c().createElement(g.Col,{xs:12},c().createElement("span",null,c().createElement("p",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),""),c().createElement("pre",null,c().createElement(b.Z,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),c().createElement(g.Col,{xs:12},r&&r.showTemplate&&c().createElement(Zo(),{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:r.metadataTemplate||"",onChange:function(e){i(e&&"<p><br></p>"!==e?e:"")}}))),t)};function UT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return WT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?WT(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(3256),r(62193),r(96876);const VT=function(e){var t=e.onValid,r=e.onError,n=e.json,o=void 0===n?{}:n,i=UT((0,l.useState)(JSON.stringify(o,!0,2)),2),a=i[0],s=i[1],u=UT((0,l.useState)(),2),p=u[0],f=u[1];return(0,l.useEffect)((function(){try{var e=JSON.parse(a);f(),t(e)}catch(e){f(e),r(e)}}),[a]),c().createElement("div",{className:"code-editor"},c().createElement(Ol.Controlled,{value:a,onBeforeChange:function(e,t,r){s(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),p&&c().createElement("div",{className:"error-area"},c().createElement("div",{className:"error-area-header"},c().createElement(b.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),c().createElement("div",{className:"error-area-body"},c().createElement(b.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:p.message}},(function(e){return c().createElement("pre",{className:"error-msg"},e)})))))};var qT={options:{}};const HT=function(e){var t=e.service,r=void 0===t?{}:t,n=e.setValid,o=void 0===n?function(){}:n,i=e.onToggleThumbnail,a=void 0===i?function(){}:i,l=e.onChangeServiceProperty,s=void 0===l?function(){}:l,u=r.options||r.variants?{options:r.options||{},variants:r.variants}:void 0;return c().createElement("div",null,c().createElement(g.FormGroup,{controlId:"autoload",key:"autoload"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{key:"autoload",value:"autoload",onChange:function(e){return s("autoload",e.target.checked)},checked:!(0,ue.isNil)(r.autoload)&&r.autoload},c().createElement(b.Z,{msgId:"catalog.autoload"})),c().createElement(g.Checkbox,{key:"thumbnail",value:"thumbnail",onChange:function(){return a()},checked:!!(0,ue.isNil)(r.hideThumbnail)||!r.hideThumbnail},c().createElement(b.Z,{msgId:"catalog.showPreview"})),"tms"===r.provider?c().createElement(g.Checkbox,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return s("forceDefaultTileGrid",e.target.checked)},checked:!(0,ue.isNil)(r.forceDefaultTileGrid)&&r.forceDefaultTileGrid},c().createElement(b.Z,{msgId:"catalog.tms.forceDefaultTileGrid"}),"",c().createElement(wl.Z,{text:c().createElement(b.Z,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null),r.provider&&"custom"!==r.provider?null:c().createElement(g.Col,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.tms.customTMSConfiguration"}),"",c().createElement(wl.Z,{text:c().createElement(el.Z,{msgId:"catalog.tms.customTMSConfigurationHint"})})),c().createElement(VT,{json:u||qT,onValid:function(e){var t=e.options,n=e.variants;(0,ue.isEqual)(t,r.options)||s("options",t),(0,ue.isEqual)(n,r.variants)||s("variants",n),o(!0)},onError:function(){r.options&&s("options",void 0),r.variants&&s("variants",void 0),o(!1)}}))))};function $T(){return($T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var KT=function(e){return e.map((function(e){return{label:"".concat(e,"x").concat(e),value:e}}))};const YT=function(e){var t,r=e.service,n=e.formatOptions,o=e.onChangeServiceFormat,i=void 0===o?function(){}:o,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a,s=e.tileSizeOptions,u=(e.currentWMSCatalogLayerSize,e.selectedService,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["service","formatOptions","onChangeServiceFormat","onChangeServiceProperty","tileSizeOptions","currentWMSCatalogLayerSize","selectedService"])),p=KT(s);return c().createElement(zT,$T({onChangeServiceProperty:l,service:r},u),c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},c().createElement(g.Col,{xs:6},c().createElement(g.ControlLabel,null,"Format")),c().createElement(g.Col,{xs:6},c().createElement(Rr.ZP,{value:r&&r.format,clearable:!0,options:n,onChange:function(e){return i(e&&e.value)}}))),c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},c().createElement(g.Col,{xs:6},c().createElement(g.ControlLabel,null,"WMS Layer tile size")),c().createElement(g.Col,{xs:6},c().createElement(Rr.ZP,{value:KT([(null===(t=r.layerOptions)||void 0===t?void 0:t.tileSize)||256])[0],options:p,onChange:function(e){return l("layerOptions",{tileSize:e&&e.value})}}))))};const XT=function(e){var t=e.onToggleAdvancedSettings,r=void 0===t?function(){}:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["onToggleAdvancedSettings"]),o=n.service,i=void 0===o?{}:o,a=function(e){switch(e){case"tms":return HT;case"wmts":case"wfs":return zT;case"wms":case"csw":return YT;default:return zT}}(i.type);return c().createElement(Du.Z,{useToolbar:!0,title:c().createElement(b.Z,{msgId:"catalog.advancedSettings"}),expanded:!(0,ue.isNil)(i.showAdvancedSettings)&&i.showAdvancedSettings,onSwitch:r},c().createElement(a,n))};function QT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var JT=function(e){for(var t=0,r=Object.entries({wfs:"e.g. https://mydomain.com/geoserver/wfs",wmts:"e.g. https://mydomain.com/geoserver/gwc/service/wmts",wms:"e.g. https://mydomain.com/geoserver/wms",csw:"e.g. https://mydomain.com/geoserver/csw",tms:"e.g. https://mydomain.com/geoserver/gwc/service/tms/1.0.0"});t<r.length;t++){var n=(a=r[t],l=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(a,l)||function(e,t){if(e){if("string"==typeof e)return QT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?QT(e,t):void 0}}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];if(o===e.type)return i}var a,l;return!0},ek=r(36882);function tk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rk=(0,Ua.Z)("placeholder")(g.FormControl),nk="custom",ok="tms",ik=function(e){var t=e.service,r=void 0===t?{}:t,n=e.onChangeUrl,o=void 0===n?function(){}:n;return c().createElement(g.FormGroup,{controlId:"URL"},c().createElement(g.Col,{xs:12},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.url"})),c().createElement(rk,{type:"text",style:{textOverflow:"ellipsis"},placeholder:JT(r),value:r&&r.url,onChange:function(e){return o(e.target.value)}})))},ak=function(e){return e===ok?"TMS 1.0.0":e},lk=function(e){var t,r,n,o,i=e.serviceTypes,a=void 0===i?[]:i,l=e.onChangeServiceProperty,s=e.service,u=void 0===s?{}:s,p=e.onChangeUrl,f=void 0===p?function(){}:p,d=e.onChangeTitle,m=void 0===d?function(){}:d,y=(0,Pr.u8)("allowedProviders")||(0,ue.get)((0,ue.find)(a||[],{name:"tms"}),"allowedProviders")||[],v=Object.keys(ek.Z).filter((function(e){return"ALL"===y||y.indexOf(e)>=0})),h=u===ok?u:null==u||null===(t=u.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(n=r.call(t,"."))||void 0===n?void 0:n[0],O=!h||h===nk,w=h===ok,E=w||O;return c().createElement(g.FormGroup,null,c().createElement(g.Col,{xs:12,sm:O?3:12,md:E?3:12},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.tms.provider"})),c().createElement(rk,{onChange:function(e){var t=e.target.value;l("provider","".concat(t)),t!==nk&&t!==ok?m(t):O||w||m("")},value:h,componentClass:"select"},[nk,ok].concat((o=v,function(e){if(Array.isArray(e))return tk(e)}(o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return tk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tk(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return{name:e,label:ak(e)}})).map((function(e){return c().createElement("option",{value:e.name,key:e.name},e.label)})))),c().createElement(g.Col,{xs:12,sm:9,md:9},O?c().createElement(c().Fragment,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.tms.urlTemplate"}),"",c().createElement(wl.Z,{text:c().createElement(el.Z,{msgId:"catalog.tms.urlTemplateHint"})})),c().createElement(rk,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"e.g. https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:u&&u.url,onChange:function(e){return f(e.target.value)}})):w?c().createElement(c().Fragment,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.url"})),c().createElement(rk,{type:"text",style:{textOverflow:"ellipsis"},placeholder:JT(u),value:u&&u.url,onChange:function(e){return f(e.target.value)}})):null))};const ck=function(e){var t=e.service,r=void 0===t?{}:t,n=e.serviceTypes,o=e.onChangeTitle,i=e.onChangeUrl,a=e.onChangeServiceProperty,l=e.onChangeType,s="tms"===r.type?lk:ik;return c().createElement(g.Form,{horizontal:!0},c().createElement(g.FormGroup,{controlId:"title",key:"type-title-row"},c().createElement(g.Col,{key:"type",xs:12,sm:3,md:3},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.type"})),c().createElement(rk,{onChange:function(e){return l(e.target.value)},value:r&&r.type,componentClass:"select"},n.map((function(e){return c().createElement("option",{value:e.name,key:e.name},e.label)})))),c().createElement(g.Col,{key:"title",xs:12,sm:9,md:9},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.serviceTitle"})),c().createElement(rk,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:r&&r.title,onChange:function(e){return o(e.target.value)}}))),c().createElement(s,{key:"url-row",serviceTypes:n,service:r,onChangeUrl:i,onChangeTitle:o,onChangeServiceProperty:a}))};function sk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(85209),r(78908);var uk=r(31935);function pk(e){return(pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fk(){return(fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yk(e,t){return(yk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bk(e,t){return!t||"object"!==pk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gk(e){return(gk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vk(Object(r),!0).forEach((function(t){Ok(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ok(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wk=(0,D.zB)({searchOptions:de.bA,result:de.SX,loadingError:de.hm,selectedService:de.Cb,mode:de.eK,services:de.b6,servicesWithBackgrounds:de.PG,layerError:de.Im,active:de.$t,dockStyle:function(e){return(0,ze.ic)(e,{height:!0})},searchText:de.e8,group:de.Mm,source:uk.YL,layers:H.l2,modalParams:uk.B0,authkeyParamNames:de.kS,saving:de.dP,openCatalogServiceList:de.ZL,service:de._S,format:de.iH,selectedFormat:de.Q7,options:de.bA,layerOptions:de.n7,tileSizeOptions:de._x,currentLocale:Q.Pz,locales:Q.Ps,pageSize:de.y,loading:de.E2,crs:X.uy,isLocalizedLayerStylesEnabled:re.wk}),Ek=(0,R.compose)((0,R.withProps)((function(e){var t=e.result,r=e.selectedFormat,n=e.options,o=e.layerOptions,i=e.services,a=e.selectedService,l=e.locales;return{records:t&&(0,fy.eL)(r,t,hk(hk({},n),{},{layerOptions:o,service:i[a]}),l)||[]}})),(0,R.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/gif",value:"image/gif"}]}),(0,R.branch)((function(e){return"edit"===e.mode}),(0,R.renderComponent)((function(e){var t,r,n=e.service,o=void 0===n?{title:"",type:"wms",url:"",format:"image/png"}:n,i=e.serviceTypes,a=void 0===i?[{name:"csw",label:"CSW"}]:i,s=e.onChangeTitle,u=void 0===s?function(){}:s,p=e.onChangeUrl,f=void 0===p?function(){}:p,d=e.onChangeType,m=void 0===d?function(){}:d,y=e.id,v=e.urlTooltip,h=e.formatOptions,O=e.buttonStyle,w=e.saving,E=e.onChangeServiceFormat,S=void 0===E?function(){}:E,P=e.onChangeMetadataTemplate,j=void 0===P?function(){}:P,C=e.onToggleAdvancedSettings,x=void 0===C?function(){}:C,T=e.onChangeServiceProperty,k=void 0===T?function(){}:T,I=e.onToggleTemplate,A=void 0===I?function(){}:I,F=e.onToggleThumbnail,D=void 0===F?function(){}:F,R=e.onAddService,N=void 0===R?function(){}:R,M=e.onDeleteService,L=void 0===M?function(){}:M,_=e.onChangeCatalogMode,Z=void 0===_?function(){}:_,B=e.selectedService,G=e.isLocalizedLayerStylesEnabled,z=e.tileSizeOptions,U=void 0===z?[256]:z,W=e.layerOptions,V=(t=(0,l.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return sk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sk(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),q=V[0],H=V[1];return c().createElement(Fr.Z,{bodyClassName:"ms2-border-layout-body catalog",header:c().createElement(ck,{setValid:H,service:o,serviceTypes:a,onChangeTitle:u,onChangeUrl:f,onChangeType:m,onChangeServiceProperty:k,urlTooltip:v})},c().createElement(g.Form,null,c().createElement(XT,{setValid:H,id:y,service:o,formatOptions:h,buttonStyle:O,saving:w,onChangeServiceFormat:S,onChangeMetadataTemplate:j,onToggleAdvancedSettings:x,onChangeServiceProperty:k,onToggleTemplate:A,onToggleThumbnail:D,isLocalizedLayerStylesEnabled:G,tileSizeOptions:U,currentWMSCatalogLayerSize:W.tileSize?W.tileSize:256,selectedService:B}),c().createElement(g.FormGroup,{controlId:"buttons",key:"buttons"},c().createElement(g.Col,{xs:12},c().createElement(qe.Z,{style:O,disabled:w||!q,onClick:function(){return N()},key:"catalog_add_service_button"},w?c().createElement(tP(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,c().createElement(b.Z,{msgId:"save"})),o&&!o.isNew?c().createElement(qe.Z,{style:O,onClick:function(){return L()},key:"catalog_delete_service_button"},c().createElement(b.Z,{msgId:"catalog.delete"})):null,c().createElement(qe.Z,{style:O,disabled:w,onClick:function(){return Z("view")},key:"catalog_back_view_button"},c().createElement(b.Z,{msgId:"cancel"}))))))}))))(GT),Sk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yk(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gk(n);if(o){var r=gk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return bk(this,e)});function a(){return dk(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=c().createElement(Ek,fk({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return c().createElement("div",{id:"catalog-root",className:this.props.active?"catalog-active":"",style:{width:"100%",height:"100%",pointerEvents:"none"}},c().createElement(zP.Z,null,(function(t){var n=t.width;return c().createElement(Hm.Z,{open:e.props.active,size:e.props.width/n>1?n:e.props.width,position:"right",bsStyle:"primary",title:c().createElement(b.Z,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",zIndex:1031,style:e.props.dockStyle},c().createElement(g.Panel,{id:e.props.id,style:e.props.panelStyle,className:e.props.panelClassName},r))})))}}])&&mk(t.prototype,r),a}(c().Component);Ok(Sk,"propTypes",{id:u().string,source:u().string,active:u().bool,searchOnStartup:u().bool,serviceTypes:u().array,wrap:u().bool,wrapWithPanel:u().bool,panelStyle:u().object,panelClassName:u().string,closeCatalog:u().func,closeGlyph:u().string,buttonStyle:u().object,services:u().object,servicesWithBackgrounds:u().object,selectedService:u().string,style:u().object,dockProps:u().object,zoomToLayer:u().bool,isLocalizedLayerStylesEnabled:u().bool,width:u().number,dockStyle:u().object,group:u().string}),Ok(Sk,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:["OpenStreetMap","OpenSeaMap","Stamen"]},{name:"wfs",label:"WFS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:660,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});var Pk=(0,p.connect)(wk,{clearModal:Sx.V3,onSearch:fe.tt,onLayerAdd:fe.A4,closeCatalog:fe.wl,onChangeFormat:fe.BG,onChangeServiceFormat:fe.i3,onChangeUrl:fe.X7,onChangeType:fe.XM,onChangeTitle:fe.r1,onChangeMetadataTemplate:fe.Wf,onChangeText:fe.XW,onChangeServiceProperty:fe.L8,onChangeSelectedService:fe.Dw,onChangeCatalogMode:fe.In,onAddService:fe.M3,onToggleAdvancedSettings:fe.Ts,onToggleThumbnail:fe.XS,onToggleTemplate:fe.IT,onDeleteService:fe.wo,onError:fe.vG,onAddBackgroundProperties:Sx.US,onFocusServicesList:fe.dL,onPropertiesChange:h.He,onAddBackground:Sx.pW,onToggle:v.Xi.bind(null,"backgroundSelector",null),onLayerChange:v.Xg.bind(null,"backgroundSelector"),onStartChange:v.Xg.bind(null,"backgroundSelector","start")})(Sk);const jk={MetadataExplorerPlugin:le()(Pk,{BurgerMenu:{name:"metadataexplorer",position:5,text:c().createElement(b.Z,{msgId:"catalog.title"}),icon:c().createElement(g.Glyphicon,{glyph:"folder-open"}),action:v.Xg.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0},TOC:{name:"MetadataExplorer",doNotHide:!0}}),reducers:{catalog:r(18163).Z},epics:r(56175).Z(we.Z)};var Ck=r(58252);function xk(e){return(xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ik(e,t){return(Ik=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ak(e,t){return!t||"object"!==xk(t)&&"function"!=typeof t?Fk(e):t}function Fk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dk(e){return(Dk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ik(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dk(n);if(o){var r=Dk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ak(this,e)});function a(){var e;Tk(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Rk(Fk(e=i.call.apply(i,[this].concat(r))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,r){return{name:t.name+r,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[r]:{}}})))}),[])})),Rk(Fk(e),"getTools",(function(){return e.props.items.sort((function(e,t){return e.position-t.position}))})),e}return t=a,(r=[{key:"render",value:function(){return c().createElement(Ck.Z,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,e.children.map((function(e,t){return c().createElement(g.Col,{key:t,xs:12,xsOffset:0,sm:6,smOffset:3},e)}))))},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return c().createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&kk(t.prototype,r),a}(c().Component);Rk(Nk,"propTypes",{className:u().string,style:u().object,items:u().array,id:u().string,mapType:u().string}),Rk(Nk,"defaultProps",{items:[],className:"grid-home-container",style:{},id:"mapstore-grid-home",mapType:"leaflet"});const Mk={GridContainerPlugin:Nk,reducers:{}};function Lk(e){return(Lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_k(Object(r),!0).forEach((function(t){Vk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zk(e,t){return(zk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uk(e,t){return!t||"object"!==Lk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wk(e){return(Wk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zk(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wk(n);if(o){var r=Wk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Uk(this,e)});function a(){return Bk(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||(0,ue.isArray)(this.props.editingAllowedRoles)&&(0,ue.isString)(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&(0,pl.uW)(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return c().createElement(Fr.Z,{className:"ms-style-editor-container",header:this.props.showToolbar?c().createElement("div",{className:"ms-style-editor-container-header"},this.props.header,c().createElement("div",{className:"text-center"},c().createElement(ud,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:c().createElement("div",{style:{height:25}})},this.props.isEditing?c().createElement(od,{config:this.props.editorConfig}):c().createElement(fd,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&Gk(t.prototype,r),a}(c().Component);Vk(qk,"propTypes",{layer:u().object,header:u().node,isEditing:u().bool,showToolbar:u().node.bool,onInit:u().func,styleService:u().object,userRole:u().string,editingAllowedRoles:u().array,enableSetDefaultStyle:u().bool,canEdit:u().bool,editorConfig:u().object}),Vk(qk,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editorConfig:{}});var Hk=(0,R.compose)(R.toClass,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active;return!t}),(function(){return function(){return null}})),(0,p.connect)((0,D.P1)([ul.ex,ul.aN,ul.Vf,ul.p,te.L3,ul.z_,ul.Z0],(function(e,t,r,n,o,i,a){return{isEditing:"edit"===e,loading:t,layer:r,error:n,userRole:o,canEdit:i,styleService:a}})),{onInit:zn.E0,onUpdateParams:h.Xy},(function(e,t,r){var n,o,i,a=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),l=r.styleService&&!a?Zk(Zk({},r.styleService),{},{isStatic:!0}):Zk({},e.styleService);return Zk(Zk(Zk(Zk({},r),e),t),{},{styleService:l})})),(0,Ti.Z)((function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)}),(function(e){var t=e.error;return{glyph:"exclamation-mark",title:c().createElement(el.Z,{msgId:"styleeditor.errorTitle"}),description:c().createElement(el.Z,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}})),(0,xi.Z)((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return c().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},c().createElement(Ga.Z,e))})),(0,R.compose)((0,p.connect)((function(){return{}}),{toggleStyleEditor:zn.Wv}),(0,R.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(qk);const $k={StyleEditorPlugin:le()(Hk,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:ud}}),reducers:{styleeditor:r(32244).Z},epics:r(94943).ZP};var Kk=r(70335),Yk=r(48401),Xk="CHANGE_MOUSE_POSITION",Qk="CHANGE_MOUSE_POSITION_CRS",Jk="CHANGE_MOUSE_POSITION_STATE",eI=r(75140),tI=r(42454);function rI(e){return(rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nI(){return(nI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aI(e,t){return(aI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lI(e,t){return!t||"object"!==rI(t)&&"function"!=typeof t?cI(e):t}function cI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sI(e){return(sI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uI(Object(r),!0).forEach((function(t){fI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dI=function(e,t,r){return t.showCenter&&e?e.center:t.showOnClick?r.clickPoint&&r.clickPoint.latlng?{x:r.clickPoint.latlng.lng,y:r.clickPoint.latlng.lat,crs:"EPSG:4326"}:{crs:"EPSG:4326"}:t},mI=(0,D.P1)([function(e){return e},X.Od,function(e){return(0,X.zT)(e)},function(e){return(0,ue.get)(e,"mousePosition.position")||{}},function(e){return(0,ue.get)(e,"mousePosition.crs","EPSG:4326")},function(e){return e.mapInfo||{}}],(function(e,t,r,n,o,i){return{enabled:r,mousePosition:dI(t,n,i),projectionDefs:(0,X.pb)(e),crs:o}})),yI=(0,p.connect)((function(e){return{pressed:(0,X.zT)(e),active:(0,X.zT)(e),tooltip:c().createElement(g.Tooltip,{id:"showMousePositionCoordinates"},c().createElement(b.Z,{msgId:"showMousePositionCoordinates"})),tooltipPlace:"left",pressedStyle:"success active",defaultStyle:"primary",glyphicon:"mouse",btnConfig:{bsSize:"small"}}}),{registerEventListener:V.H0,unRegisterEventListener:V.$X},(function(e,t){return pI(pI({},e),{},{onClick:function(){return e.active?t.unRegisterEventListener("mousemove","mouseposition"):t.registerEventListener("mousemove","mouseposition")}})}))(eI.Z),bI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aI(e,t)}(l,e);var t,n,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sI(o);if(i){var r=sI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lI(this,e)});function l(){var e;oI(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return fI(cI(e=a.call.apply(a,[this].concat(n))),"getTemplate",(function(e){return r(5615)("./"+e).default})),e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.degreesTemplate,r=e.projectedTemplate,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["degreesTemplate","projectedTemplate"]);return c().createElement(tI.default,nI({degreesTemplate:this.getTemplate(t),projectedTemplate:this.getTemplate(r),toggle:c().createElement(yI,null)},n))}}])&&iI(t.prototype,n),l}(c().Component);fI(bI,"propTypes",{degreesTemplate:u().string,projectedTemplate:u().string}),fI(bI,"defaultProps",{degreesTemplate:"MousePositionLabelDMS",projectedTemplate:"MousePositionLabelYX"});var gI=(0,p.connect)(mI,{onCRSChange:function(e){return{type:Qk,crs:e}}})(bI);const vI={MousePositionPlugin:le()(gI,{MapFooter:{name:"mousePosition",position:2,tool:!0,priority:1}}),reducers:{mousePosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0,position:null,crs:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jk:return le()({},e,{enabled:t.enabled});case Xk:return le()({},e,{position:t.position});case Qk:return le()({},e,{crs:t.crs});case V.Jb:return le()({},e,{position:t.position,mouseOut:!1});case V.Uh:return le()({},e,{mouseOut:!0});default:return e}}}};var hI,OI,wI=r(1852),EI=r.n(wI),SI=r(97222),PI=r(25016),jI=r(8578),CI=r(86568),xI=r(28578),TI=r(26125),kI=r(69301),II=r(18412),AI=r(64975);function FI(e){return(FI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DI(Object(r),!0).forEach((function(t){zI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NI(){return(NI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function MI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _I(e,t){return(_I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZI(e,t){return!t||"object"!==FI(t)&&"function"!=typeof t?BI(e):t}function BI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GI(e){return(GI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UI=(0,D.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:(0,ue.get)(e,"activeSearchTool","addressSearch"),format:(0,ue.get)(e,"format")||Pr.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{}}})),WI=(0,p.connect)(UI,{onSearch:SI.tt,onChangeCoord:SI.TS,onChangeActiveSearchTool:SI.a,onClearCoordinatesSearch:Za.fU,onClearBookmarkSearch:PI.N3,onChangeFormat:SI.Zw,onToggleControl:v.Xi,onZoomToPoint:SI.Z,onPurgeResults:SI.kV,onSearchReset:SI.v2,onSearchTextChange:SI.k9,onCancelSelectedItem:SI.KG,onZoomToExtent:V.Px,onLayerVisibilityLoad:Vw.H0})(jI.Z),VI=(0,D.P1)([X.Od,H.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),qI=(0,p.connect)(VI,{onItemClick:SI.Jc,addMarker:SI._q,showGFI:SI.w4})(CI.Z),HI=(0,p.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:SI.o$})((OI=hI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_I(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=GI(n);if(o){var r=GI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ZI(this,e)});function a(){var e;MI(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zI(BI(e=i.call.apply(i,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&(0,ue.get)(e.props.selectedItems[e.props.selectedItems.length-1],t)})),zI(BI(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?le()({},r,{services:n.services}):le()({},r,{services:r.services.concat(n.services)}):r})),zI(BI(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?le()({},r,{services:t}):r})),zI(BI(e),"getSearchAndToggleButton",(function(){var t=c().createElement(WI,NI({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[c().createElement(AI.Z,null)].concat(e.props.enabled?[t]:null):(0,ue.isArray)(e.props.withToggle)?c().createElement("span",null,c().createElement(EI(),{query:"("+e.props.withToggle[0]+")"},c().createElement(AI.Z,null),e.props.enabled?t:null),c().createElement(EI(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(RI(RI({},II.be),this.props.resultsStyle))}},{key:"render",value:function(){return c().createElement("span",null,this.getSearchAndToggleButton(),c().createElement(qI,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&LI(t.prototype,r),a}(c().Component),zI(hI,"propTypes",{splitTools:u().bool,showOptions:u().bool,isSearchClickable:u().bool,fitResultsToMapSize:u().bool,searchOptions:u().object,resultsStyle:u().object,selectedItems:u().array,selectedServices:u().array,userServices:u().array,withToggle:u().oneOfType([u().bool,u().array]),enabled:u().bool,textSearchConfig:u().object}),zI(hI,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),OI));const $I={SearchPlugin:le()(HI,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:xI.Mk,searchOnStartEpic:xI.h5,searchItemSelected:xI.XH,zoomAndAddPointEpic:xI.OY,textSearchShowGFIEpic:xI.Ls},reducers:{search:kI.Z,mapInfo:TI.Z}};var KI=r(94184),YI=r.n(KI);function XI(e){return(XI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QI(){return(QI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function JI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tA(e,t){return(tA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rA(e,t){return!t||"object"!==XI(t)&&"function"!=typeof t?nA(e):t}function nA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oA(e){return(oA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oA(n);if(o){var r=oA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return rA(this,e)});function a(){var e;JI(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return iA(nA(e=i.call.apply(i,[this].concat(r))),"state",{is:"active"}),iA(nA(e),"onClick",(function(){return e.props.onClick?e.props.onClick.bind(nA(e)):function(){}})),iA(nA(e),"onDisable",(function(){return e.props.onDisable?e.props.onDisable.bind(nA(e)):function(){}})),iA(nA(e),"onConfirm",(function(){return e.props.onConfirm?e.props.onConfirm():e.props.confirming&&e.props.confirming.onClick?e.props.confirming.onClick():function(){}})),iA(nA(e),"isDisabled",(function(){return"disabled"===e.state.is})),iA(nA(e),"isConfirming",(function(){return"confirming"===e.state.is})),iA(nA(e),"isActive",(function(){return!e.isConfirming()&&!e.isDisabled()})),iA(nA(e),"handleClick",(function(){return e.isConfirming()&&e.props.disableAfterConfirmed?(e.onConfirm(),e.onDisable(),void e.setState({is:"disabled"})):e.isConfirming()?(e.onConfirm(),void e.setState({is:"active"})):(e.onClick(),void e.setState({is:"confirming"}))})),iA(nA(e),"handleBlur",(function(){e.setState({is:"active"})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.children,r=e.buttonProps,n=e.confirming,o=e.disabled,i=this.props,a=i.text,l=i.style,s=i.className,u=void 0===s?"btn btn-sm btn-danger":s,p=this.isDisabled(),f=this.isConfirming();return p&&(a=o&&o.text||"Loading...",u=o&&o.className||"btn btn-sm btn-secondary",l=o&&o.style||{}),f&&(a=n&&n.text||"Confirm?",u=n&&n.className||"btn btn-sm btn-warning",l=n&&n.style||{}),c().createElement("button",QI({className:YI()("confirm-button",u),style:l,onClick:this.handleClick,onBlur:this.handleBlur,disabled:p},r),t,t?" ":"",a)}}])&&eA(t.prototype,r),a}(c().Component);iA(aA,"propTypes",{disableAfterConfirmed:u().bool,resetOnBlur:u().bool,onConfirm:u().func,onDisable:u().func,onClick:u().func,text:u().oneOfType([u().string,u().node]),className:u().string,style:u().object,confirming:u().shape({text:u().oneOfType([u().string,u().node]),className:u().string,style:u().object,onClick:u().func}),disabled:u().shape({text:u().oneOfType([u().string,u().node]),className:u().string,style:u().object}),children:u().node,buttonProps:u().object}),iA(aA,"defaultProps",{resetOnBlur:!0});const lA=aA;var cA="SET_SEARCH_CONFIG_PROP",sA="RESET_SEARCH_CONFIG",uA="UPDATE_SERVICE";function pA(e){return(pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mA(e,t){return(mA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yA(e,t){return!t||"object"!==pA(t)&&"function"!=typeof t?bA(e):t}function bA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gA(e){return(gA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gA(n);if(o){var r=gA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return yA(this,e)});function a(){var e;fA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vA(bA(e=i.call.apply(i,[this].concat(r))),"getOptions",(function(){return 0===e.props.services.length?c().createElement("div",{className:"search-service-name"},c().createElement(b.Z,{msgId:"search.serviceslistempty"})):e.props.services.map((function(t,r){return c().createElement("div",{className:"search-service-item",key:r},c().createElement("span",{className:"search-service-name"},t.name),c().createElement(lA,{className:"list-remove-btn",onConfirm:function(){return e.remove(r)},text:c().createElement(g.Glyphicon,{glyph:"remove-circle"}),confirming:{className:"text-warning list-remove-btn",text:c().createElement(b.Z,{msgId:"search.confirmremove"})}}),c().createElement(g.Glyphicon,{onClick:function(){return e.edit(t,r)},glyph:"pencil"}))}))})),vA(bA(e),"edit",(function(t,r){e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("editIdx",r),e.props.onPropertyChange("page",1)})),vA(bA(e),"toggleOverride",(function(){var t=e.props,r=t.services,n=t.override;e.props.onPropertyChange("textSearchConfig",{services:r,override:!n})})),vA(bA(e),"remove",(function(t){var r=e.props,n=r.services,o=r.override,i=n.filter((function(e,r){return r!==t}));e.props.onPropertyChange("textSearchConfig",{services:i,override:o})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.override;return c().createElement("form",null,c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.serviceslistlabel"})),c().createElement("div",{className:"services-list"},this.getOptions())),c().createElement(g.Checkbox,{checked:e,onChange:this.toggleOverride},c().createElement(b.Z,{msgId:"search.overriedservice"})))}}])&&dA(t.prototype,r),a}(c().Component);vA(hA,"propTypes",{services:u().array,override:u().bool,service:u().object,onPropertyChange:u().func}),vA(hA,"contextTypes",{messages:u().object}),vA(hA,"defaultProps",{services:[],override:!1,onPropertyChange:function(){}});const OA={Element:hA,validate:function(){return!0}};function wA(e){return(wA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PA(e,t){return(PA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jA(e,t){return!t||"object"!==wA(t)&&"function"!=typeof t?CA(e):t}function CA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xA(e){return(xA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xA(n);if(o){var r=xA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return jA(this,e)});function a(){var e;EA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return TA(CA(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r){var n=r.target.value;"queriableAttributes"===t&&(n=n.split(","));var o=le()({},e.props.service.options,TA({},t,n));e.props.onPropertyChange("service",le()({},e.props.service,{options:o}))})),TA(CA(e),"updateName",(function(t){var r=t.target.value;e.props.onPropertyChange("service",le()({},e.props.service,{name:r}))})),TA(CA(e),"updateMaxFeatures",(function(t){var r=le()({},e.props.service.options,{maxFeatures:parseFloat(t[0],10)});e.props.onPropertyChange("service",le()({},e.props.service,{options:r}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.service,t=e.options,r=void 0===t?{}:t;return c().createElement("form",null,c().createElement("span",{className:"wfs-required-props-title"},c().createElement(b.Z,{msgId:"search.s_wfs_props_label"})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_name"})),c().createElement(g.FormControl,{value:e.name,key:"name",type:"text",onChange:this.updateName})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_url"})),c().createElement(g.FormControl,{value:r.url,key:"url",type:"text",onChange:this.updateProp.bind(null,"url")})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_layer"})),c().createElement(g.FormControl,{value:r.typeName,key:"typeName",type:"text",onChange:this.updateProp.bind(null,"typeName")})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_attributes"})),c().createElement(g.FormControl,{value:([r.queriableAttributes]||0).join(","),key:"queriableAttributes",type:"text",onChange:this.updateProp.bind(null,"queriableAttributes")})))}}])&&SA(t.prototype,r),a}(c().Component);TA(kA,"propTypes",{service:u().object,onPropertyChange:u().func}),TA(kA,"defaultProps",{service:{},onPropertyChange:function(){}});const IA={Element:kA,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.name,o=void 0===n?"":n,i=r.url,a=void 0===i?"":i,l=r.typeName,c=void 0===l?"":l,s=r.queriableAttributes,u=void 0===s?"":s;return o.length>0&&a.length>0&&c.length>0&&u.length>0}};function AA(e){return(AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FA(){return(FA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DA(Object(r),!0).forEach((function(t){GA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LA(e,t){return(LA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _A(e,t){return!t||"object"!==AA(t)&&"function"!=typeof t?ZA(e):t}function ZA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BA(e){return(BA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=BA(n);if(o){var r=BA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _A(this,e)});function a(){var e;NA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return GA(ZA(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r,n){var o=(0,ue.get)(n,r||"target.value");e.props.onPropertyChange("service",le()({},e.props.service,GA({},t,o)))})),GA(ZA(e),"updatePriority",(function(t){e.props.onPropertyChange("service",le()({},e.props.service,{priority:parseFloat(t[0],10)}))})),GA(ZA(e),"updateLaunchInfoPanel",(function(t){var r=t&&t.value?t.value:"";"no_info"===r&&(r=void 0),e.props.onPropertyChange("service",RA(RA({},e.props.service),{},{launchInfoPanel:r,openFeatureInfoButtonEnabled:!1,forceSearchLayerVisibility:!1}))})),e}return t=a,(r=[{key:"render",value:function(){var e,t,r=this.props.service,n=this.props.launchInfoPanelOptions||[{label:(0,ie.S$)(this.context.messages,"search.s_launch_info_panel.no_info"),value:"no_info"},{label:(0,ie.S$)(this.context.messages,"search.s_launch_info_panel.all_layers"),value:"all_layers"},{label:(0,ie.S$)(this.context.messages,"search.s_launch_info_panel.single_layer"),value:"single_layer"}],o=(null==r?void 0:r.launchInfoPanel)||this.props.launchInfoPanelDefault;return c().createElement("form",null,c().createElement("span",{className:"wfs-required-props-title"},c().createElement(b.Z,{msgId:"search.s_result_props_label"})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_title"})),c().createElement(g.FormControl,{value:r.displayName,key:"displayName",type:"text",placeholder:'e.g. "${properties.name}"',onChange:this.updateProp.bind(null,"displayName",null)})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_description"})),c().createElement(g.FormControl,{value:r.subTitle,key:"subTitle",type:"text",onChange:this.updateProp.bind(null,"subTitle",null)})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_priority"}),c().createElement(g.Label,{key:"priority-label",className:"slider-label"},parseInt(r.priority||1,10))),c().createElement(oo(),{key:"priority",start:[r.priority||1],step:1,range:{min:1,max:10},onSlide:this.updatePriority}),c().createElement("span",{className:"priority-info"},c().createElement(b.Z,{msgId:"search.s_priority_info"}))),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_launch_info_panel.label"})),c().createElement(Rr.ZP,FA({options:n,clearable:!1,value:o,onChange:this.updateLaunchInfoPanel},this.props.launchInfoPanelSelectOptions)),"single_layer"===o?c().createElement(g.FormGroup,null,c().createElement(g.Checkbox,{checked:null!==(e=null==r?void 0:r.openFeatureInfoButtonEnabled)&&void 0!==e&&e,onChange:this.updateProp.bind(null,"openFeatureInfoButtonEnabled","target.checked")},c().createElement(b.Z,{msgId:"search.s_launch_info_panel.openFeatureInfoButtonCheckbox"})),c().createElement(g.Checkbox,{checked:null!==(t=null==r?void 0:r.forceSearchLayerVisibility)&&void 0!==t&&t,onChange:this.updateProp.bind(null,"forceSearchLayerVisibility","target.checked")},c().createElement(b.Z,{msgId:"search.s_launch_info_panel.forceSearchLayerVisibility"}))):null,c().createElement("span",{className:"priority-info with-top-margin"},c().createElement(b.Z,{msgId:"search.s_launch_info_panel.".concat(o,"_description")}))))}}])&&MA(t.prototype,r),a}(c().Component);GA(zA,"propTypes",{service:u().object,launchInfoPanelOptions:u().array,launchInfoPanelDefault:u().string,launchInfoPanelSelectOptions:u().object,onPropertyChange:u().func}),GA(zA,"contextTypes",{messages:u().object}),GA(zA,"defaultProps",{service:{},launchInfoPanelDefault:"no_info",launchInfoPanelSelectOptions:{},onPropertyChange:function(){}});const UA={Element:zA,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.displayName&&e.displayName.length>0}};function WA(e){return(WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VA(Object(r),!0).forEach((function(t){JA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KA(e,t){return(KA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YA(e,t){return!t||"object"!==WA(t)&&"function"!=typeof t?XA(e):t}function XA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QA(e){return(QA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KA(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=QA(n);if(o){var r=QA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return YA(this,e)});function a(){var e;HA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return JA(XA(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r){var n=r.target.value,o=le()({},e.props.service.options,JA({},t,n));e.props.onPropertyChange("service",le()({},e.props.service,{options:o}))})),JA(XA(e),"updateSliderProps",(function(t,r){var n=qA(qA({},e.props.service.options),{},JA({},t,parseInt(r[0],10)));e.props.onPropertyChange("service",qA(qA({},e.props.service),{},{options:n}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.service.options,t=void 0===e?{}:e;return c().createElement("form",null,c().createElement("span",{className:"wfs-required-props-title"},c().createElement(b.Z,{msgId:"search.s_wfs_opt_props_label"})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_sort"})),c().createElement(g.FormControl,{value:t.sortBy,key:"sortBy",type:"text",onChange:this.updateProp.bind(null,"sortBy")})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_max_features"})),c().createElement(oo(),{key:"maxFeatures",start:[t.maxFeatures||1],range:{min:1,max:50},onSlide:this.updateSliderProps.bind(null,"maxFeatures")}),c().createElement(g.Label,{key:"maxFeatures-label",className:"slider-label"},t.maxFeatures||1)),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_max_zoom"})),c().createElement(oo(),{key:"maxZoomLevel",start:[t.maxZoomLevel||21],range:{min:1,max:35},onSlide:this.updateSliderProps.bind(null,"maxZoomLevel")}),c().createElement(g.Label,{key:"maxZoomLevel-label",className:"slider-label"},t.maxZoomLevel||21)))}}])&&$A(t.prototype,r),a}(c().Component);JA(eF,"propTypes",{service:u().object,onPropertyChange:u().func}),JA(eF,"defaultProps",{service:{},onPropertyChange:function(){}});const tF={Element:eF,validate:function(){return!0}};function rF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){return(nF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oF(Object(r),!0).forEach((function(t){fF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function aF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cF(e,t){return(cF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sF(e,t){return!t||"object"!==nF(t)&&"function"!=typeof t?uF(e):t}function uF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pF(e){return(pF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dF=(0,Ge.Z)(qe.Z),mF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cF(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pF(n);if(o){var r=pF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sF(this,e)});function a(){var e;aF(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fF(uF(e=i.call.apply(i,[this].concat(r))),"canProceed",(function(){var t=e.props,r=t.page,n=t.pages,o=t.service;return n[r].validate(o)})),fF(uF(e),"isDirty",(function(){var t=e.props,r=t.service,n=t.initServiceValues;return!Mp()(r,n)})),fF(uF(e),"renderFooter",(function(){var t=e.props,r=t.page,n=t.pages;return 0===r?c().createElement("span",{role:"footer"},c().createElement(dF,{onClick:e.addService,bsStyle:"primary"},c().createElement(vt.Z,{msgId:"search.addbtn"}))):r===n.length-1?c().createElement("span",{role:"footer"},c().createElement(dF,{onClick:e.prev,bsStyle:"primary"},c().createElement(vt.Z,{msgId:"search.prevbtn"})),c().createElement(dF,{disabled:!e.canProceed(),onClick:e.update,bsStyle:"success"},c().createElement(vt.Z,{msgId:"search.savebtn"}))):c().createElement("span",{role:"footer"},1===r&&e.isDirty()?c().createElement(lA,{onConfirm:e.prev,bsStyle:"primary",confirming:{text:c().createElement(vt.Z,{msgId:"search.cancelconfirm"})},text:c().createElement(vt.Z,{msgId:"search.cancelbtn"})}):c().createElement(dF,{onClick:e.prev,bsStyle:"primary"},c().createElement(vt.Z,{msgId:1===r?"search.cancelbtn":"search.prevbtn"})),c().createElement(dF,{disabled:!e.canProceed(),onClick:e.next,bsStyle:"primary"},c().createElement(vt.Z,{msgId:"search.nextbtn"})))})),fF(uF(e),"onClose",(function(){e.props.toggleControl("searchservicesconfig"),e.props.restServiceConfig(0)})),fF(uF(e),"addService",(function(){var t=e.props.newService;e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("page",1)})),fF(uF(e),"prev",(function(){var t=e.props.page;t>1?e.props.onPropertyChange("page",t-1):1===t&&e.props.restServiceConfig(0)})),fF(uF(e),"next",(function(){var t=e.props,r=t.page;r<t.pages.length-1&&e.props.onPropertyChange("page",r+1)})),fF(uF(e),"update",(function(){var t=e.props,r=t.service,n=t.editIdx;e.props.updateService(r,n)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.enabled,r=e.pages,n=e.page,o=e.id,i=e.panelStyle,a=e.panelClassName,l=e.titleText,s=e.closeGlyph,u=e.onPropertyChange,p=e.service,f=e.textSearchConfig,d=void 0===f?{}:f,y=e.containerClassName,b=r&&r[n]||null;return t?c().createElement(m.Z,null,c().createElement(En.Z,{id:o,style:iF(iF({},i),{},{display:t?"block":"none"}),containerClassName:y,className:a,draggable:!1,modal:!0},c().createElement("span",{role:"header"},c().createElement("span",null,l),this.isDirty()?c().createElement(lA,{className:"close",confirming:{text:c().createElement(vt.Z,{msgId:"search.cancelconfirm"}),className:"btn btn-sm btn-warning services-config-editor-confirm-close"},onConfirm:this.onClose,bsStyle:"primary",text:c().createElement(g.Glyphicon,{glyph:s})}):c().createElement("button",{onClick:this.onClose,className:"close"},s?c().createElement(g.Glyphicon,{glyph:s}):c().createElement("span",null,""))),c().createElement("div",{role:"body",className:"services-config-editor"},c().createElement(b.Element,{services:d.services,override:d.override,onPropertyChange:u,service:p})),this.renderFooter())):null}}])&&lF(t.prototype,r),a}(c().Component);fF(mF,"propTypes",{id:u().string,enabled:u().bool,panelStyle:u().object,panelClassName:u().string,containerClassName:u().string,closeGlyph:u().string,titleText:u().oneOfType([u().string,u().element]),toggleControl:u().func,pages:u().arrayOf(u().shape({Element:u().func.isRequired,validate:u().func.isRequired})),page:u().number,service:u().object,initServiceValues:u().object,onPropertyChange:u().func,newService:u().object.isRequired,updateService:u().func,restServiceConfig:u().func,textSearchConfig:u().object,editIdx:u().number}),fF(mF,"defaultProps",{id:"search-services-config-editor",enabled:!1,panelStyle:{minWidth:"400px",zIndex:2e3,position:"absolute",top:"100px",minHeight:"300px",left:"calc(50% - 150px)",backgroundColor:"white"},panelClassName:"toolbar-panel",containerClassName:"",closeGlyph:"1-close",titleText:c().createElement(vt.Z,{msgId:"search.configpaneltitle"}),closePanel:function(){},onPropertyChange:function(){},page:0,newService:{type:"wfs",name:"",displayName:"",subTitle:"",priority:1,options:{url:"",typeName:"",queriableAttributes:"",sortBy:"",maxFeatures:5,srsName:"EPSG:4326"}}});var yF=(0,p.connect)((function(e){var t=e.controls,r=void 0===t?{}:t,n=e.searchconfig,o=void 0===n?{}:n;return{enabled:r.searchservicesconfig&&r.searchservicesconfig.enabled||!1,pages:[OA,IA,UA,tF],page:o&&o.page||0,service:o&&o.service,initServiceValues:o&&o.init_service_values,textSearchConfig:o&&o.textSearchConfig,editIdx:o&&o.editIdx}}),{toggleControl:v.Xi,onPropertyChange:function(e,t){return{type:cA,property:e,value:t}},restServiceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:sA,page:e}},updateService:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{type:uA,service:e,idx:t}}})(mF),bF=(0,p.connect)((0,D.P1)([function(e){return e.search||null},function(e){var t,r;return(null==e||null===(t=e.controls)||void 0===t||null===(r=t.searchservicesconfig)||void 0===r?void 0:r.enabled)||!1}],(function(e,t){return{activeTool:d()(e,"activeSearchTool","addressSearch"),enabled:t}})),{onToggleControl:v.Xi})((function(e){var t=e.activeTool,r=e.enabled,n=e.onToggleControl;return"addressSearch"===t?c().createElement(dF,{bsStyle:"default",pullRight:!0,className:"square-button-md no-border",tooltipId:"search.searchservicesbutton",tooltipPosition:"bottom",onClick:function(){r||n("searchservicesconfig")}},c().createElement(g.Glyphicon,{glyph:"cog"})):null}));const gF=(0,O.rx)("SearchServicesConfig",{component:yF,containers:{Search:{name:"SearchServicesConfigButton",target:"button",component:bF}},reducers:{searchconfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cA:return le()({},e,rF({},t.property,t.value));case Vw.ok:var r=t.config.map.text_search_config||t.config.map.text_serch_config;return le()({},e,{textSearchConfig:r});case v.l:case sA:return le()({},e,{service:void 0,page:t.page,init_service_values:void 0,editIdx:void 0});case uA:var n=(e.textSearchConfig&&e.textSearchConfig.services||[]).slice(),o=le()({},t.service,{priority:parseInt(t.service.priority,10)});return-1!==t.idx?n[t.idx]=o:n.push(o),le()({},e,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:n,override:e.textSearchConfig&&e.textSearchConfig.override||!1}});default:return e}}}});var vF="SWIPE:SET_ACTIVE",hF="SWIPE:SET_MODE",OF="SWIPE:SET_SWIPE_TOOL_DIRECTION",wF="SWIPE:SET_SPY_TOOL_RADIUS";function EF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return{type:vF,active:e,prop:t}}function SF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SF(Object(r),!0).forEach((function(t){jF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const CF={resetLayerSwipeSettingsEpic:function(e,t){return e.ofType(h.c7).switchMap((function(e){var r=e.nodeType,n=t.getState();return $(n).active&&"group"===r?Ai.Observable.of(EF(!1)):Ai.Observable.empty()}))},deactivateSwipeToolOnSwitchMaps:function(e,t){return e.ofType(Lm.nk).switchMap((function(){return $(t.getState()).active?Ai.Observable.of(EF(!1)):Ai.Observable.empty()}))}};function xF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xF(Object(r),!0).forEach((function(t){kF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var IF=[{label:"Horizontal",value:"cut-horizontal"},{label:"Vertical",value:"cut-vertical"}],AF=function(e){var t=e.spyModeSettings,r=e.onSetSpyToolRadius;return c().createElement("div",{className:"mapstore-swipe-settings-spy"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"toc.radius"})),c().createElement("div",{className:"mapstore-slider with-tooltip"},c().createElement(oo(),{tooltips:!0,step:10,start:[t.radius],range:{min:[20],max:[100]},onChange:function(e){return r(e[0])}})))},FF=function(e){var t=e.swipeModeSettings,r=e.onSetSwipeToolDirection;return c().createElement("div",{className:"mapstore-swipe-settings-slider"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"toc.direction"})),c().createElement(Rr.ZP,{styles:{menuPortal:function(e){return TF(TF({},e),{},{zIndex:3100})}},onChange:function(e){var t=e.value;return r(t)},clearable:!1,value:(0,ue.find)(IF,["value",t.direction]),options:IF}))},DF=(0,D.P1)([$,Y,K],(function(e,t,r){return{configuring:(null==e?void 0:e.configuring)||!1,toolMode:(null==e?void 0:e.mode)||"swipe",swipeModeSettings:t,spyModeSettings:r}}));const RF=(0,p.connect)(DF,{onSetConfigurationActive:EF,onSetSwipeToolDirection:function(e){return{type:OF,direction:e}},onSetSpyToolRadius:function(e){return{type:wF,radius:e}}})((function(e){var t=e.configuring,r=e.toolMode,n=e.swipeModeSettings,o=e.spyModeSettings,i=e.onSetConfigurationActive,a=void 0===i?function(){}:i,l=e.onSetSpyToolRadius,s=void 0===l?function(){}:l,u=e.onSetSwipeToolDirection,p=void 0===u?function(){}:u;return c().createElement("div",{className:"mapstore-swipe-settings"},c().createElement(wn.Z,{title:"spy"===r?c().createElement(b.Z,{msgId:"toc.spyconfiguration"}):c().createElement(b.Z,{msgId:"toc.swipeconfiguration"}),open:t,onClose:function(){return a(!1,"configuring")},enableFooter:!1,draggable:!0,size:"xs",bodyClassName:"mapstore-swipe-setiings-modal-body",dialogClassName:" mapstore-swipe-settings-modal",glyph:"transfer"},"spy"===r?c().createElement(AF,{spyModeSettings:o,onSetSpyToolRadius:s}):c().createElement(FF,{swipeModeSettings:n,onSetSwipeToolDirection:p})))}));var NF=r(85294),MF=r.n(NF);const LF=function(e){var t=e.map,r=e.layer,n=e.type,o=e.getWidth,i=e.getHeight,a=e.circleCutProp,c=(0,l.useCallback)((function(e){var t=e.context,r=o();t.save(),t.beginPath(),t.rect(r,0,t.canvas.width-r,t.canvas.height),t.strokeStyle="rgba(0,0,0,0.5)",t.clip()}),[r,n]),s=(0,l.useCallback)((function(e){e.context.restore()}),[r,n]),u=(0,l.useCallback)((function(e){var t=e.context,r=i();t.save(),t.beginPath(),t.rect(0,r,t.canvas.width,t.canvas.height-r),t.clip()}),[r,n]),p=(0,l.useCallback)((function(e){var t=e.context,r=e.frameState.pixelRatio;t.save(),t.beginPath();var n=a.getMousePosition();n&&(t.arc(n[0]*r,n[1]*r,a.radius*r,0,2*Math.PI),t.lineWidth=5*r,t.strokeStyle="rgba(0,0,0,0.5)",t.stroke()),t.clip()}),[r,n,a]);return(0,l.useEffect)((function(){var e=t.getLayers().getArray().filter((function(e){return e.get("msId")===r}))[0];if(e){switch(n){case"cut-vertical":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,c,s);break;case"cut-horizontal":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,u,s);break;case"circle":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,p,s)}return t.render(),function(){e.un("precompose",c),e.un("precompose",u),e.un("precompose",p),e.un("postcompose",s),t.render()}}return function(){return t.render()}}),[r,n,a]),null};function _F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ZF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZF(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var BF=function(e){var t=e.type,r=e.map,n=e.widthRef,o=_F((0,l.useState)(),2),i=o[0],a=o[1],s=_F((0,l.useState)(!0),2),u=s[0],p=s[1],f=function(){a({x:0,y:0}),n.current=r.getProperties().size[0]/2};return(0,l.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[t]),(0,l.useEffect)((function(){n.current=r.getProperties().size[0]/2}),[t]),c().createElement(MF(),{position:i,bounds:"parent",onStart:function(){return p(!1)},onDrag:function(e,t){return function(e,t){n.current+=t.deltaX,a({x:t.x,y:t.y}),r.render()}(0,t)},onStop:function(){return p(!0)}},c().createElement("div",{className:"mapstore-swipe-slider",style:{height:"100%",top:"0px",left:"".concat(r.getProperties().size[0]/2,"px"),width:"8px",cursor:"col-resize"}},u&&c().createElement("div",{className:"ms-vertical-swipe-slider-arrows",style:{top:"".concat(r.getProperties().size[1]/2-26,"px")}},c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-left"})),c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-right"})))))},GF=function(e){var t=e.type,r=e.map,n=e.heightRef,o=_F((0,l.useState)(),2),i=o[0],a=o[1],s=_F((0,l.useState)(!0),2),u=s[0],p=s[1],f=function(){a({x:0,y:0}),n.current=r.getProperties().size[1]/2};return(0,l.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[t]),(0,l.useEffect)((function(){n.current=r.getProperties().size[1]/2}),[t]),c().createElement(MF(),{position:i,bounds:"parent",onStart:function(){return p(!1)},onDrag:function(e,t){return function(e,t){n.current+=t.deltaY,a({x:t.x,y:t.y}),r.render()}(0,t)},onStop:function(){return p(!0)}},c().createElement("div",{className:"mapstore-swipe-slider",style:{height:"8px",top:"".concat(r.getProperties().size[1]/2,"px"),left:"0px",width:"100%",cursor:"row-resize"}},u&&c().createElement("div",{className:"ms-horizontal-swipe-slider-arrows",style:{left:"".concat(r.getProperties().size[0]/2-26,"px")}},c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-up"})),c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-down"})))))};const zF=function(e){var t=e.map,r=e.layer,n=e.type,o=void 0===n?"cut-vertical":n,i=e.active,a=(0,l.useRef)(),s=(0,l.useRef)();return r&&i?c().createElement(c().Fragment,null,"cut-vertical"===o&&c().createElement(BF,{widthRef:s,map:t,type:o}),"cut-horizontal"===o&&c().createElement(GF,{heightRef:a,map:t,type:o}),c().createElement(LF,{map:t,layer:r,type:o,getWidth:function(){return s.current},getHeight:function(){return a.current}})):null},UF=function(e){var t=e.layer,r=e.map,n=e.active,o=e.radius,i=(0,l.useRef)(),a=(0,l.useCallback)((function(e){i.current=r.getEventPixel(e),r.render()}),[t,o]),s=(0,l.useCallback)((function(){i.current=null,r.render()}),[t,o]);(0,l.useEffect)((function(){var e=r.getTargetElement();return e.addEventListener("mousemove",a),e.addEventListener("mouseout",s),function(){e.removeEventListener("mousemove",a),e.removeEventListener("mouseout",s)}}),[]);var u={radius:o,getMousePosition:function(){return i.current}};return t&&n?c().createElement(LF,{map:r,layer:t,type:"circle",circleCutProp:u}):null};function WF(){return(WF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var VF=(0,Ge.Z)(g.SplitButton),qF={title:c().createElement(g.Glyphicon,{glyph:"transfer"}),tooltipId:"toc.compareTool",tooltipPosition:"top",className:"square-button-md no-border",pullRight:!0},HF=function(e){var t=e.swipeSettings,r=e.onSetActive,n=e.onSetSwipeMode,o=e.status;return c().createElement(VF,WF({onClick:function(){t.active||"LAYER"!==o?r(!1):r(!0)},bsStyle:null!=t&&t.active?"success":"primary"},qF),c().createElement(g.MenuItem,{active:"swipe"===(null==t?void 0:t.mode),onClick:function(){n("swipe"),r(!0)}},c().createElement(g.Glyphicon,{glyph:"vert-dashed"}),c().createElement(b.Z,{msgId:"toc.swipe"})),c().createElement(g.MenuItem,{active:"spy"===(null==t?void 0:t.mode),onClick:function(){n("spy"),r(!0)}},c().createElement(g.Glyphicon,{glyph:"search"}),c().createElement(b.Z,{msgId:"toc.spyGlass"})),c().createElement(g.MenuItem,{onClick:function(){t.configuring||"LAYER"!==o?r(!1,"configuring"):r(!0,"configuring")}},c().createElement(g.Glyphicon,{glyph:"cog"}),c().createElement(b.Z,{msgId:"toc.configureTool"})))};HF.propTypes={swipeSettings:u().object,status:u().string,onSetActive:u().func,onSetSwipeMode:u().func},HF.defaultProps={status:"LAYER",onSetSwipeMode:function(){},onSetActive:function(){}};const $F=HF;var KF=(0,D.P1)([H.Iz,$,Y,K],(function(e,t,r,n){return{layer:null==e?void 0:e.id,active:t.active||!1,swipeModeSettings:r,spyModeSettings:n,mode:(null==t?void 0:t.mode)||"swipe"}})),YF=(0,p.connect)(KF,null)((function(e){var t=e.mode,r=e.map,n=e.layer,o=e.active,i=e.swipeModeSettings,a=e.spyModeSettings;return"spy"===t?c().createElement(UF,{map:r,layer:n,active:o,radius:a.radius}):c().createElement(zF,{map:r,layer:n,active:o,type:i.direction})}));const XF=(0,O.rx)("Swipe",{options:{disablePluginIf:"{state('mapType') === 'leaflet' || state('mapType') === 'cesium'}"},component:RF,containers:{TOC:{name:"Swipe",target:"toolbar",selector:function(e){return"LAYER"===e.status},Component:(0,p.connect)((0,D.P1)($,(function(e){return{swipeSettings:e}})),{onSetActive:EF,onSetSwipeMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"swipe";return{type:hF,mode:e}}})($F)},Map:{name:"Swipe",Tool:YF}},reducers:{swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vF:return le()({},e,jF({},t.prop,t.active));case hF:return le()({},e,{mode:t.mode});case OF:var r=PF(PF({},e.swipe),{},{direction:t.direction});return le()({},e,{swipe:r});case wF:var n=PF(PF({},e.spy),{},{radius:t.radius});return le()({},e,{spy:n});default:return e}}},epics:CF});r(52780);var QF="CHANGE_LOCATE_STATE",JF="LOCATE_ERROR";function eD(e){return{type:QF,state:e}}var tD=r(97671),rD=r.n(tD);function nD(e){return(nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oD(){return(oD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function iD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lD(e,t){return(lD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cD(e,t){return!t||"object"!==nD(t)&&"function"!=typeof t?sD(e):t}function sD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uD(e){return(uD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(610).then(r.t.bind(r,10844,23));var fD=!1,dD=!1,mD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lD(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uD(n);if(o){var r=uD(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return cD(this,e)});function a(){var e;iD(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pD(sD(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){var t;switch(e.props.locate){case"FOLLOWING":t="DISABLED";break;case"ENABLED":t="FOLLOWING";break;case"DISABLED":t="ENABLED";break;case"LOCATING":case"PERMISSION_DENIED":t="DISABLED"}e.props.onClick(t)})),pD(sD(e),"renderButton",(function(){var t="PERMISSION_DENIED"===e.props.locate;return c().createElement(qe.Z,oD({id:e.props.id,disabled:t},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.getBtnStyle(),style:e.props.style}),c().createElement(g.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),pD(sD(e),"renderLoadingButton",(function(){var t=c().createElement("img",{src:rD(),style:{display:"inline-block",margin:"0px",padding:0,background:"transparent",border:0},alt:"..."});return c().createElement(qe.Z,oD({id:e.props.id,onClick:e.onClick},e.props.btnConfig,{bsStyle:e.getBtnStyle(),style:e.props.style}),t)})),pD(sD(e),"addTooltip",(function(t){var r=c().createElement(g.Tooltip,{id:"locate-tooltip"},c().createElement(b.Z,{msgId:e.props.tooltip}));return c().createElement(We.Z,{placement:e.props.tooltipPlace,key:"{overlay-trigger.".concat(e.props.id,"-").concat(e.props.tooltip,"}"),overlay:r},t)})),pD(sD(e),"getBtnStyle",(function(){var t=e.props,r=t.locate,n=t.bsStyle;return"FOLLOWING"!==r&&"ENABLED"!==r||(n="success active"),n})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;"PERMISSION_DENIED"===this.props.locate||fD||dD||(fD=!0,navigator.geolocation.getCurrentPosition((function(){fD=!1,dD=!0}),(function(t){fD=!1,1===t.code&&e.props.onClick("PERMISSION_DENIED")})))}},{key:"render",value:function(){var e="LOCATING"===this.props.locate?this.renderLoadingButton():this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&aD(t.prototype,r),a}(c().Component);pD(mD,"propTypes",{id:u().string,hide:u().bool,btnConfig:u().object,text:u().oneOfType([u().string,u().element]),help:u().oneOfType([u().string,u().element]),locate:u().string,onClick:u().func,tooltip:u().element,tooltipPlace:u().string,style:u().object,bsStyle:u().string,glyph:u().string}),pD(mD,"defaultProps",{id:"locate-btn",onClick:function(){},locate:"DISABLED",tooltipPlace:"left",bsStyle:"default",glyph:"1-position-1",btnConfig:{className:"square-button"}});const yD=mD;var bD=r(86450);function gD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gD(Object(r),!0).forEach((function(t){hD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wD=(0,p.connect)((function(e){return{locate:e.locate&&e.locate.state||"DISABLED",tooltip:e.locate&&"FOLLOWING"===e.locate.state?"locate.tooltipDeactivate":"locate.tooltip"}}),{onClick:eD})(yD);const ED=(0,O.rx)("Locate",{component:wD,options:{disablePluginIf:"{state('mapType') === 'cesium'}"},containers:{Toolbar:{name:"locate",position:2,tool:!0,icon:c().createElement(g.Glyphicon,{glyph:"screenshot"}),help:c().createElement(vt.Z,{msgId:"helptexts.locateBtn"}),priority:1},Map:{name:"Locate",Tool:(0,p.connect)((function(e){return{status:e.locate&&e.locate.state,messages:e.locale&&e.locale.messages?e.locale.messages.locate:void 0}}),{changeLocateState:eD,onLocateError:function(e){return{type:JF,error:e}}})((function(e){var t,r,n=e.map,o=e.mapType,i=e.status,a=e.messages,c=e.maxZoom,s=e.changeLocateState,u=e.onLocateError,p=e.rateControl,f=(0,l.useRef)(),d=(t=(0,bD.default)(o,"locate"),r=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return OD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?OD(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],y=d[1],b=d[2];(0,l.useEffect)((function(){b&&u(b)}),[b]);var g=function(e){i!==e&&s(e)},v=function(e){u(e.message),s("DISABLED")};function h(){return{locateOptions:vD(vD({},void 0!==c&&{maxZoom:c}),void 0!==p&&{rateControl:p})}}return(0,l.useEffect)((function(){if(m){var e=h();f.current=new y,f.current.start({map:n,options:e,messages:a,status:i,onStateChange:g,onLocationError:v})}return function(){var e;null===(e=f.current)||void 0===e||e.clear()}}),[m]),(0,l.useEffect)((function(){var e,t=h();null===(e=f.current)||void 0===e||e.update({status:i,messages:a,options:t})}),[i,a,m,c]),null})),priority:1}},reducers:{locate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:"DISABLED"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case QF:return le()({},e,{state:t.state});case JF:return le()({},e,{error:t.error});default:return e}}}});var SD="LAYERDOWNLOAD:CHECK_WPS_AVAILABILITY",PD="LAYERDOWNLOAD:CHECKING_WPS_AVAILABILITY",jD="LAYERDOWNLOAD:DOWNLOAD_FEATURES",CD="LAYERDOWNLOAD:DOWNLOAD_FINISHED",xD="LAYERDOWNLOAD:FORMAT_SELECTED",TD="LAYERDOWNLOAD:CLEAR_DOWNLOAD_OPTIONS",kD="LAYERDOWNLOAD:FORMAT_FETCH",ID="LAYERDOWNLOAD:FORMAT_UPDATE",AD="LAYERDOWNLOAD:SET_SERVICE",FD="LAYERDOWNLOAD:SET_EXPORT_DATA_RESULTS",DD="LAYERDOWNLOAD:ADD_EXPORT_DATA_RESULT",RD="LAYERDOWNLOAD:UPDATE_EXPORT_DATA_RESULT",ND="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULT",MD="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULTS",LD="LAYERDOWNLOAD:CHECK_EXPORT_DATA_ENTRIES",_D="LAYERDOWNLOAD:CHECKING_EXPORT_DATA_ENTRIES",ZD="LAYERDOWNLOAD:SERIALIZE_COOKIE",BD="LAYERDOWNLOAD:SHOW_INFO_BUBBLE_MESSAGE",GD="LAYERDOWNLOAD:SHOW_INFO_BUBBLE",zD="LAYERDOWNLOAD:SET_INFO_BUBBLE_MESSAGE",UD=function(e){return{type:PD,checking:e}},WD=function(e,t){return{type:xD,key:e,value:t}},VD=function(){return{type:CD}},qD=function(e){return{type:AD,service:e}},HD=function(e){return{type:FD,results:e}},$D=function(e,t){return{type:RD,id:e,newProps:t}},KD=function(e){return{type:_D,checking:e}},YD=function(e,t,r,n){return{type:BD,msgId:e,msgParams:t,level:r,duration:n}},XD=function(e){return{type:GD,show:e}},QD=function(e,t,r){return{type:zD,msgId:e,msgParams:t,level:r}},JD=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.service},eR=(0,D.P1)(TE.Rd,Zm.X1,H.Iz,(function(e,t,r){return e?t:null!=r&&r.name?{featureTypeName:r.name,filterType:"OGC",ogcVersion:"1.1.0"}:null})),tR=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.results},rR=r(35400);function nR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const oR=function(e){var t,r,n=e.cropDataSetVisible,o=void 0!==n&&n,i=e.cropDataSetEnabled,a=void 0!==i&&i,l=e.donwloadFilteredVisible,s=void 0!==l&&l,u=e.downloadFilteredEnabled,p=void 0!==u&&u,f=e.advancedOptionsVisible,d=void 0!==f&&f,m=e.compressionOptions,y=void 0===m?["CCITT RLE","LZW","JPEG","ZLib","PackBits","Deflate"]:m,v=e.selectedCompression,h=e.tileWidth,O=e.tileHeight,w=e.quality,E=e.onChange,S=void 0===E?function(){}:E,P=(t=c().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return nR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nR(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=P[0],C=P[1];return c().createElement(c().Fragment,null,o&&c().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},c().createElement(fb.Z,{checked:a,onClick:function(e){return S("cropDataSet",e)}}),c().createElement(b.Z,{msgId:"layerdownload.cropDataSet"})),s&&c().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},c().createElement(fb.Z,{checked:p,onClick:function(e){return S("downloadFilteredDataSet",e)}}),c().createElement(b.Z,{msgId:"layerdownload.downloadFilteredDataSet"})),d&&c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-options"},c().createElement(g.Button,{className:"no-border",onClick:function(){return C(!j)}},c().createElement(g.Glyphicon,{glyph:"chevron-".concat(j?"down":"right")})),c().createElement(b.Z,{msgId:"layerdownload.advancedOptions"})),j&&d&&c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced"},c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.compression"}),c().createElement(Rr.ZP,{clearable:!0,value:v,options:y.map((function(e){return(0,ue.isString)(e)?{value:e,label:e}:e})),onChange:function(e){return S("compression",null==e?void 0:e.value)}})),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.quality"}),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},c().createElement(g.FormControl,{placeholder:"0.75",type:"number",min:"0",max:"1",value:w||"",onChange:function(e){return S("quality",e.target.value)}}))),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.tileWidth"}),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},c().createElement(g.FormControl,{placeholder:"256",type:"number",min:"0",value:h||"",onChange:function(e){return S("tileWidth",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),c().createElement("span",null,"px"))),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.tileHeight"}),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},c().createElement(g.FormControl,{placeholder:"256",type:"number",min:"0",value:O||"",onChange:function(e){return S("tileHeight",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),c().createElement("span",null,"px")))))};function iR(e){return(iR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cR(e,t){return(cR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sR(e,t){return!t||"object"!==iR(t)&&"function"!=typeof t?uR(e):t}function uR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pR(e){return(pR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cR(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pR(n);if(o){var r=pR(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sR(this,e)});function a(){var e;aR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fR(uR(e=i.call.apply(i,[this].concat(r))),"getSelectedFormat",(function(){return(0,ue.get)(e.props,"downloadOptions.selectedFormat")})),fR(uR(e),"getSelectedSRS",(function(){return(0,ue.get)(e.props,"downloadOptions.selectedSrs")||e.props.defaultSrs||(0,ue.get)((0,ue.head)(e.props.srsList),"name")})),e}return t=a,(r=[{key:"render",value:function(){var e,t=this;return c().createElement("form",null,c().createElement("label",null,c().createElement(b.Z,{msgId:"layerdownload.format"})),c().createElement(Rr.ZP,{clearable:!1,isLoading:this.props.formatsLoading,onOpen:function(){return t.props.formatOptionsFetch(t.props.layer)},value:null===(e=this.props.downloadOptions)||void 0===e?void 0:e.selectedFormat,noResultsText:c().createElement(b.Z,{msgId:"layerdownload.format"}),onChange:function(e){return t.props.onChange("selectedFormat",e.value)},options:this.props.formats.map((function(e){return{value:e.name,label:e.label||e.name}}))}),c().createElement("label",null,c().createElement(b.Z,{msgId:"layerdownload.srs"})),c().createElement(Rr.ZP,{clearable:!1,value:this.getSelectedSRS(),onChange:function(e){return t.props.onChange("selectedSrs",e.value)},options:this.props.srsList.map((function(e){return{value:e.name,label:e.label||e.name}}))}),this.props.wpsOptionsVisible&&c().createElement(oR,{cropDataSetVisible:!0,donwloadFilteredVisible:this.props.downloadFilteredVisible,advancedOptionsVisible:this.props.wpsAdvancedOptionsVisible,cropDataSetEnabled:this.props.downloadOptions.cropDataSet,downloadFilteredEnabled:this.props.downloadOptions.downloadFilteredDataSet,selectedCompression:this.props.downloadOptions.compression,quality:this.props.downloadOptions.quality,tileWidth:this.props.downloadOptions.tileWidth,tileHeight:this.props.downloadOptions.tileHeight,onChange:this.props.onChange}),this.props.virtualScroll?null:c().createElement(g.Checkbox,{checked:this.props.downloadOptions.singlePage,onChange:function(){return t.props.onChange("singlePage",!t.props.downloadOptions.singlePage)}},c().createElement(b.Z,{msgId:"layerdownload.downloadonlycurrentpage"})))}}])&&lR(t.prototype,r),a}(c().Component);fR(dR,"propTypes",{downloadOptions:u().object,formatOptionsFetch:u().func,formats:u().array,srsList:u().array,onChange:u().func,defaultSrs:u().string,wpsOptionsVisible:u().bool,wpsAdvancedOptionsVisible:u().bool,downloadFilteredVisible:u().bool,layer:u().object,formatsLoading:u().bool,virtualScroll:u().bool}),fR(dR,"defaultProps",{downloadOptions:{},formatsLoading:!1,formats:[],srsList:[],wpsOptionsVisible:!1,wpsAdvancedOptionsVisible:!1,downloadFilteredVisible:!1,virtualScroll:!0});const mR=dR;function yR(e){return(yR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vR(e,t){return(vR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hR(e,t){return!t||"object"!==yR(t)&&"function"!=typeof t?OR(e):t}function OR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wR(e){return(wR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ER(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vR(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wR(n);if(o){var r=wR(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return hR(this,e)});function a(){var e;bR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ER(OR(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose()})),ER(OR(e),"renderIcon",(function(){return e.props.loading?c().createElement("div",{style:{float:"left"}},c().createElement(tP(),{spinnerName:"circle",noFadeIn:!0})):c().createElement(g.Glyphicon,{glyph:"download"})})),ER(OR(e),"handleExport",(function(){var t=e.props,r=t.url,n=t.filterObj,o=t.downloadOptions,i=t.defaultSrs,a=t.srsList,l=t.onExport,c=t.layer,s=o&&o.selectedSrs||i||(a[0]||{}).name;l(r||c.url,n,le()({},o,{selectedSrs:s}))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(e){this.props.enabled!==e.enabled&&this.props.enabled&&(this.props.onClearDownloadOptions(),"wms"===this.props.layer.type&&this.props.onCheckWPSAvailability(this.props.url||this.props.layer.url))}},{key:"render",value:function(){var e,t,r,n=this,o=function(e){return n.props.formats.filter((function(t){var r,o,i=t.validServices,a=t.type,l=void 0===a?"vector":a;return(!i||(0,ue.findIndex)(i,(function(t){return t===e}))>-1)&&("vector"===l&&(null===(r=n.props.layer.search)||void 0===r?void 0:r.url)||"raster"===l&&!(null!==(o=n.props.layer.search)&&void 0!==o&&o.url))}))},i=o("wfs"),a=o("wps"),l=i.length>0?i.filter((function(e){return n.props.wfsFormats.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))})):this.props.wfsFormats;return this.props.enabled?c().createElement(En.Z,{id:"mapstore-export",draggable:!1,modal:!0},c().createElement("span",{role:"header"},c().createElement("span",{className:"about-panel-title"},c().createElement(b.Z,{msgId:"layerdownload.title"})),c().createElement("button",{onClick:this.onClose,className:"settings-panel-close close"},this.props.closeGlyph?c().createElement(g.Glyphicon,{glyph:this.props.closeGlyph}):c().createElement("span",null,""))),c().createElement("div",{role:"body"},this.props.checkingWPSAvailability?c().createElement(Ga.Z,{size:100,style:{margin:"0 auto"}}):"wfs"!==this.props.service||null!==(e=this.props.layer.search)&&void 0!==e&&e.url?c().createElement(mR,{downloadOptions:this.props.downloadOptions,onChange:this.props.onDownloadOptionChange,formatOptionsFetch:"wfs"===this.props.service?this.props.onFormatOptionsFetch:function(){},formatsLoading:this.props.formatsLoading,formats:"wfs"===this.props.service?l:a,srsList:this.props.srsList,defaultSrs:this.props.defaultSrs,wpsOptionsVisible:"wps"===this.props.service,wpsAdvancedOptionsVisible:!(null!==(t=this.props.layer.search)&&void 0!==t&&t.url),downloadFilteredVisible:!(null===(r=this.props.layer.search)||void 0===r||!r.url),layer:this.props.layer,virtualScroll:this.props.virtualScroll}):c().createElement(rR.Z,{title:c().createElement(b.Z,{msgId:"layerdownload.noSupportedServiceFound"})})),!this.props.checkingWPSAvailability&&c().createElement("div",{role:"footer"},c().createElement(qe.Z,{bsStyle:"primary",className:"download-button",disabled:!this.props.downloadOptions.selectedFormat||this.props.loading,onClick:this.handleExport},this.renderIcon()," ",c().createElement(b.Z,{msgId:"layerdownload.export"})))):null}}])&&gR(t.prototype,r),a}(c().Component);ER(SR,"propTypes",{filterObj:u().object,closeGlyph:u().string,url:u().string,service:u().string,onMount:u().func,onUnmount:u().func,enabled:u().bool,loading:u().bool,checkingWPSAvailability:u().bool,onClose:u().func,onExport:u().func,onCheckWPSAvailability:u().func,onDownloadOptionChange:u().func,onClearDownloadOptions:u().func,onFormatOptionsFetch:u().func,downloadOptions:u().object,wfsFormats:u().array,formats:u().array,srsList:u().array,defaultSrs:u().string,layer:u().object,formatsLoading:u().bool,virtualScroll:u().bool}),ER(SR,"defaultProps",{onMount:function(){},onUnmount:function(){},onExport:function(){},onClose:function(){},onCheckWPSAvailability:function(){},onDownloadOptionChange:function(){},onClearDownloadOptions:function(){},onFormatOptionsFetch:function(){},checkingWPSAvailability:!1,layer:{},closeGlyph:"1-close",service:"wfs",wfsFormats:[],formats:[{name:"application/json",label:"GeoJSON",type:"vector",validServices:["wps"]},{name:"application/arcgrid",label:"ArcGrid",type:"raster",validServices:["wps"]},{name:"image/tiff",label:"TIFF",type:"raster",validServices:["wps"]},{name:"image/png",label:"PNG",type:"raster",validServices:["wps"]},{name:"image/jpeg",label:"JPEG",type:"raster",validServices:["wps"]},{name:"application/wfs-collection-1.0",label:"wfs-collection-1.0",type:"vector",validServices:["wps"]},{name:"application/wfs-collection-1.1",label:"wfs-collection-1.1",type:"vector",validServices:["wps"]},{name:"application/zip",label:"Shapefile",type:"vector",validServices:["wps"]},{name:"text/csv",label:"CSV",type:"vector",validServices:["wps"]}],formatsLoading:!1,srsList:[{name:"native",label:"Native"},{name:"EPSG:4326",label:"WGS84"}],virtualScroll:!0,downloadOptions:{}});const PR=SR;var jR=c().createElement(g.Button,{bsStyle:"primary",bsSize:"small",className:"mapstore-exportdataresults-item-failed"},c().createElement(g.Glyphicon,{glyph:"exclamation-sign"}));const CR=(0,Ti.Z)((function(e){var t=e.results;return!(void 0===t?[]:t).length}),{title:c().createElement(b.Z,{msgId:"exportDataResults.emptyStateMessage"})})((function(e){var t=e.loading,r=void 0!==t&&t,n=e.results,o=void 0===n?[]:n,i=e.currentLocale,a=e.onRemoveResult,l=void 0===a?function(){}:a;return r?c().createElement(Ga.Z,{size:100,style:{margin:"0 auto",padding:"10px"}}):c().createElement("div",{className:"mapstore-exportdataresults-container"},o.map((function(e){var t=e.id,r=e.layerName,n=e.layerTitle,o=e.startTime,a=e.status,s=e.result,u=(0,ne.getLayerTitle)({name:r,title:n},i),p=new Date(o),f=function(e){return e<10?"0".concat(e):"".concat(e)},d="".concat(f(p.getDate()),"/").concat(f(p.getMonth()+1),"/").concat(p.getFullYear()," ").concat(f(p.getHours()),":").concat(f(p.getMinutes()));return c().createElement("div",{key:t,className:"mapstore-exportdataresults-item"},c().createElement("div",{className:"mapstore-exportdataresults-item-name"},u),c().createElement("div",{className:"mapstore-exportdataresults-item-date"},d),c().createElement("div",{className:"mapstore-exportdataresults-item-buttons"},"pending"===a&&c().createElement(Ga.Z,{size:22,style:{marginLeft:"2px"}}),"failed"===a&&s&&s.msgId?c().createElement(We.Z,{placement:"top",overlay:c().createElement(g.Tooltip,{id:"exportresults-failure-tooltip"},c().createElement(b.Z,{msgId:s.msgId,msgParams:s.msgParams}))},jR):null,"failed"!==a||s&&s.msgId?null:jR,"completed"===a&&c().createElement("a",{href:s},c().createElement(g.Button,{bsStyle:"primary",bsSize:"small"},c().createElement(g.Glyphicon,{glyph:"floppy-disk"}))),c().createElement(g.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return l(t)}},c().createElement(g.Glyphicon,{glyph:"trash"}))))})))}));function xR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const TR=function(e){var t,r=e.show,n=e.arrowDirection,o=void 0===n?"bottom":n,i=e.className,a=e.containerClassName,l=e.children;return c().createElement("div",{className:YI().apply(void 0,["mapstore-info-bubble"].concat((t=r?["mapstore-info-bubble-visible"]:[],function(e){if(Array.isArray(e))return xR(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return xR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xR(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]))},c().createElement("div",{className:YI()("mapstore-info-bubble-container",a)},c().createElement("div",{className:YI()("mapstore-info-bubble-arrow-container","arrow-".concat(o))},c().createElement("div",{className:"mapstore-info-bubble-arrow"})),c().createElement("div",{className:"mapstore-info-bubble-inner"},l)))},kR=function(e){var t=e.msgId,r=e.msgParams,n=e.level,o=void 0===n?"normal":n,i=e.className;return c().createElement("div",{className:YI()("mapstore-info-bubble-default-inner","mapstore-info-bubble-default-inner-level-".concat(o),i)},t?c().createElement(b.Z,{msgId:t,msgParams:r}):null)};var IR=r(9669),AR=r.n(IR),FR=r(78598),DR=r(7526),RR=r(63516),NR=r(27835);function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function LR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MR(Object(r),!0).forEach((function(t){_R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZR(e){return function(e){if(Array.isArray(e))return GR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||BR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BR(e,t){if(e){if("string"==typeof e)return GR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GR(e,t):void 0}}function GR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zR=function(e){var t=e.type,r=e.data;return"TEXT"===t?(0,ey.XA)((0,ey.p5)((0,ey.Rr)(r.data),r.mimeType)):(0,ey.fA)(r.mimeType,r.href,r.method,(0,ey.Rr)(r.requestBodyData))},UR=function(e,t,r){if(e&&t){var n=(0,NR.mG)(e,(a=(i={layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}).layerName,l=i.ROI,c=i.roiCRS,s=i.dataFilter,u=i.targetCRS,(0,NR.Uh)("gs:DownloadEstimator",[(0,ey.qP)("layerName",(0,ey.XA)((0,ey.gN)(a)))].concat(ZR(l?[(0,ey.qP)("ROI",zR(l))]:[]),ZR(c?[(0,ey.qP)("RoiCRS",(0,ey.XA)((0,ey.gN)(c)))]:[]),ZR(s?[(0,ey.qP)("filter",zR(s))]:[]),ZR(u?[(0,ey.qP)("targetCRS",(0,ey.XA)((0,ey.gN)(u)))]:[])))),{outputsExtractor:(0,NR.dr)(NR.ai)}),o=(0,NR.mG)(e,function(e){var t=e.layerName,r=e.dataFilter,n=e.outputFormat,o=e.targetCRS,i=e.roiCRS,a=e.ROI,l=e.cropToROI,c=e.asynchronous,s=e.outputAsReference,u=e.resultOutput,p=e.writeParameters;return(0,NR.Uh)("gs:Download",[(0,ey.qP)("layerName",(0,ey.XA)((0,ey.gN)(t))),(0,ey.qP)("outputFormat",(0,ey.XA)((0,ey.gN)(n)))].concat(ZR(a?[(0,ey.qP)("ROI",zR(a))]:[]),ZR(r?[(0,ey.qP)("filter",zR(r))]:[]),ZR(o?[(0,ey.qP)("targetCRS",(0,ey.XA)((0,ey.gN)(o)))]:[]),ZR(i?[(0,ey.qP)("RoiCRS",(0,ey.XA)((0,ey.gN)(i)))]:[]),[(0,ey.qP)("cropToROI",(0,ey.XA)((0,ey.gN)(l?"true":"false")))],ZR(p&&(0,ue.keys)(p).length>0?[(0,ey.XJ)((0,ue.toPairs)(p).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||BR(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return(0,ey.Dx)(o,i)})).join(""))]:[])),(0,ey.DK)(c?(0,ey.Tr)(!0,!0,s?(0,ey.t$)(u,!0,"result"):(0,ey.En)("result",u)):(0,ey.En)("result",u)))}(LR(LR({},(0,ue.omit)(t,"notifyDownloadEstimatorSuccess")),{},{outputAsReference:!!t.asynchronous&&t.outputAsReference})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(t.resultOutput||"application/zip")}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?Ai.Observable.of("DownloadEstimatorSuccess").concat(o):o;throw new Error("DownloadEstimatorFailed")}))}var i,a,l,c,s,u;return Ai.Observable.empty()},WR=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}];function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VR(Object(r),!0).forEach((function(t){HR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $R(e){return function(e){if(Array.isArray(e))return YR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||KR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KR(e,t){if(e){if("string"==typeof e)return YR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YR(e,t):void 0}}function YR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var XR={gml3:"GML3.1",GML2:"GML2","DXF-ZIP":"DXF-ZIP","application/vnd.google-earth.kml+xml":"KML","OGR-CSV":"OGR-CSV","OGR-FileGDB":"OGR-GeoDatabase","OGR-GPKG":"OGR-GeoPackage","OGR-KML":"OGR-KML","OGR-MIF":"OGR-MIF","OGR-TAB":"OGR-TAB","SHAPE-ZIP":"Shapefile",gml32:"GML3.2","application/json":"GeoJSON",csv:"CSV","application/x-gpkg":"GeoPackage",excel:"excel",excel2007:"excel2007"},QR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=e.filterObj,n=void 0===r?{}:r,o=e.downloadOptions,i=void 0===o?{}:o,a=(0,uu.toOGCFilter)(n.featureTypeName,n,n.ogcVersion,n.sortOptions,!1,null,null,i.selectedSrs);return Ai.Observable.defer((function(){return AR().post((0,Pr.$F)(t+"?service=WFS&outputFormat=".concat(i.selectedFormat)),a,{timeout:6e4,responseType:"arraybuffer",headers:{"Content-Type":"application/xml"}})}))},JR=function(e){var t,r=(0,ue.get)(e,"filterObj.featureTypeName"),n=(t=(0,ue.get)(e,"downloadOptions.selectedFormat"),(0,ue.head)(WR.filter((function(e){return e.outputFormat===t})))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(t));return n&&n.extension?r+"."+n.extension:r},eN=function(e){return e.query&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes&&e.query.featureTypes[e.query.typeName].attributes[0]&&e.query.featureTypes[e.query.typeName].attributes[0].attribute||null},tN=function(e){switch(e.code){case"ProcessFailed":return{msgId:"layerdownload.wpsExecuteError.processFailed",msgParams:{exceptionReport:e.message}};case"NoStatusLocation":case"NoExecutionId":case"UnexpectedProcessStatus":return{msgId:"layerdownload.wpsExecuteError.badResponse",msgParams:{eCode:e.code}};case"ExecuteProcessXHRFailed":return{msgId:"layerdownload.wpsExecuteError.executeProcessXhrFailed"};case"GetExecutionStatusXHRFailed":return{msgId:"layerdonwload.wpsExecuteError.getExecutionStatusXhrFailed"};default:return{msgId:"layerdownload.wpsExecuteError.unexpectedError"}}},rN=function(e){var t=(0,te.np)(e);if(null!=t&&t.id){var r=document.cookie.split(";").filter((function(e){return e.indexOf("exportDataResults_".concat(t.id,"="))>-1}))[0];if(r){var n=JSON.parse(decodeURIComponent(r.split("=")[1])).results;return Ai.Observable.of(HD(n.filter((function(e){return"pending"!==e.status}))))}}return Ai.Observable.empty()},nN=function(e){return e.ofType(SD).switchMap((function(e){var t=e.url;return ty(t,"gs:DownloadEstimator,gs:Download").switchMap((function(e){return Ai.Observable.defer((function(){return new Promise((function(t,r){return(0,qx.parseString)(e.data,{tagNameProcessors:[DR.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(e){var t,r,n,o,i,a,l,c,s=[null==e||null===(t=e.ProcessDescriptions)||void 0===t||null===(r=t.ProcessDescription)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.Identifier)||void 0===o?void 0:o[0],null==e||null===(i=e.ProcessDescriptions)||void 0===i||null===(a=i.ProcessDescription)||void 0===a||null===(l=a[1])||void 0===l||null===(c=l.Identifier)||void 0===c?void 0:c[0]];return Ai.Observable.of(qD((0,ue.findIndex)(s,(function(e){return"gs:DownloadEstimator"===e}))>-1&&(0,ue.findIndex)(s,(function(e){return"gs:Download"===e}))>-1?"wps":"wfs"),UD(!1))})).catch((function(){return Ai.Observable.of(qD("wfs"),UD(!1))})).startWith(UD(!0))}))},oN=function(e){return e.ofType(h.HN).switchMap((function(e){var t;return Ai.Observable.from([(0,v.Xi)("layerdownload"),WD("singlePage",!1)].concat($R(null!==(t=e.layer.search)&&void 0!==t&&t.url?[(0,_m.rP)(e.layer.url,{featureTypeName:e.layer.name})]:[])))}))},iN=function(e){return e.ofType(kD).switchMap((function(e){return(0,Ym.ED)(e).map((function(e){return t=function(e){var t=(0,ue.get)(e,"WFS_Capabilities.OperationsMetadata.Operation"),r=(0,ue.find)(t,(function(e){return"GetFeature"===e.name})),n=(0,ue.get)(r,"Parameter"),o=(0,ue.find)(n,(function(e){return"outputFormat"===e.name})).Value,i=(0,ue.pick)(XR,o);return(0,ue.toPairs)(i).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(t,r)||KR(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],label:n[1]}}))}(e),{type:ID,wfsFormats:t};var t}))}))},aN=function(e,t){return e.ofType(jD).switchMap((function(r){var n,o,i,a,l=t.getState(),c=l.featuregrid.virtualScroll,s=void 0!==c&&c,u=JD(l),p=(0,H.Iz)(l),f=(0,X.pQ)(l),d=(0,Q.Pz)(l);return"wps"===u?(n=r.downloadOptions.cropDataSet&&!!f&&!!f.bounds,o={layerName:p.name,outputFormat:r.downloadOptions.selectedFormat,asynchronous:!0,outputAsReference:!0,targetCRS:r.downloadOptions.selectedSrs&&"native"!==r.downloadOptions.selectedSrs?r.downloadOptions.selectedSrs:void 0,cropToROI:n,dataFilter:r.downloadOptions.downloadFilteredDataSet?{type:"TEXT",data:{mimeType:"text/plain; subtype=filter/1.0",data:(0,uu.mergeFiltersToOGC)({ogcVersion:"1.0.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},p.layerFilter,r.filterObj)}}:void 0,ROI:n?{type:"TEXT",data:{mimeType:"application/json",data:JSON.stringify((0,zr.bboxToFeatureGeometry)(f.bounds))}}:void 0,roiCRS:n?f.crs||"EPSG:4326":void 0,writeParameters:qR(qR(qR({},r.downloadOptions.tileWidth?{tilewidth:r.downloadOptions.tileWidth}:{}),r.downloadOptions.tileHeight?{tileheight:r.downloadOptions.tileHeight}:{}),r.downloadOptions.compression?qR({compression:r.downloadOptions.compression},r.downloadOptions.quality?{quality:r.downloadOptions.quality}:{}):{}),notifyDownloadEstimatorSuccess:!0},i={id:xr()(),layerName:p.name,layerTitle:p.title,status:"pending"},a={outputsExtractor:(0,NR.dr)(NR.RW)},UR(r.url,o,a).takeUntil(e.ofType(ND).filter((function(e){return e.id===i.id})).take(1)).flatMap((function(e){var t,r;return"DownloadEstimatorSuccess"===e?Ai.Observable.of((r=qR(qR({},i),{},{startTime:(new Date).getTime()}),{type:DD,result:r}),YD("layerdownload.exportResultsMessages.newExport"),VD(),(0,v.Xi)("layerdownload","enabled")):(t=Ai.Observable).of.apply(t,$R(e&&e.length>0&&e[0].href?[$D(i.id,{status:"completed",result:e[0].href}),YD("layerdownload.exportResultsMessages.exportSuccess",{layerTitle:(0,ne.getLayerTitle)(p,d)},"success")]:[$D(i.id,{status:"failed",result:{msgId:"layerdonwload.exportResultsMessages.invalidHref"}}),YD("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,ne.getLayerTitle)(p,d)},"danger")]))})).catch((function(e){var t;return(t=Ai.Observable).of.apply(t,$R(e.message&&e.message.indexOf("DownloadEstimator")>-1?[(0,q.vU)({error:e,title:"layerdownload.error.downloadEstimatorTitle",message:"layerdownload.error.downloadEstimatorFailed"}),VD()]:[$D(i.id,{status:"failed",result:tN(e)}),YD("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,ne.getLayerTitle)(p,d)},"danger")]))}))):QR({url:r.url,downloadOptions:r.downloadOptions,filterObj:qR(qR({},r.filterObj),{},{pagination:!s&&(0,ue.get)(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null})}).do((function(e){var t=e.data;if("application/xml"===e.headers["content-type"]){var r=String.fromCharCode.apply(null,new Uint8Array(t));if(0===r.indexOf("<ows:ExceptionReport"))throw r}})).catch((function(){return QR({url:r.url,downloadOptions:r.downloadOptions,filterObj:qR(qR({},r.filterObj),{},{pagination:!s&&(0,ue.get)(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,sortOptions:(e=eN(t.getState()),e?{sortBy:e,sortOrder:"A"}:{})})}).do((function(e){var t=e.data,n=e.headers;if("application/xml"===n["content-type"]){var o=String.fromCharCode.apply(null,new Uint8Array(t));if(0===o.indexOf("<ows:ExceptionReport"))throw o}(0,FR.saveAs)(new Blob([t],{type:n&&n["content-type"]}),JR(r))}));var e})).do((function(e){var t=e.data,n=e.headers;(0,FR.saveAs)(new Blob([t],{type:n&&n["content-type"]}),JR(r))})).map((function(){return VD()})).catch((function(e){return Ai.Observable.of((0,q.vU)({error:e,title:"layerdownload.error.title",message:"layerdownload.error.invalidOutputFormat",autoDismiss:5,position:"tr"}),VD())}))}))},lN=function(e,t){return e.ofType(v.kM).filter((function(e){return"queryPanel"===e.control&&!(0,J._d)(t.getState())&&(0,J.lI)(t.getState())})).switchMap((function(){return Ai.Observable.of((0,v.Xi)("layerdownload"))}))},cN=function(e){return e.ofType(BD).concatMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ai.Observable.of(QD(e.msgId,e.msgParams,e.level),XD(!0)).delay(10).concat(Ai.Observable.of(XD(!1)).delay(e.duration||3e3)).concat(Ai.Observable.empty().delay(1e3))}))},sN=function(e,t){return e.ofType(LD).exhaustMap((function(){var e=t.getState(),r=(tR(e)||[]).filter((function(e){return"completed"===e.status}));return r.length>0?Ai.Observable.forkJoin(r.map((function(e){var t=e.result,r=t.indexOf("executionId="),n=t.slice(r),o=n.indexOf("&"),i=(o>-1?n.slice(0,o):n).slice(12),a=t.indexOf("?"),l=t.slice(0,a);return(0,NR.W5)(l,i).let(Jm.oB).catch((function(){return Ai.Observable.of(null)})).map((function(t){return t?null:e.id}))}))).flatMap((function(e){return Ai.Observable.of((t=e.filter((function(e){return!!e})),{type:MD,ids:t}),{type:ZD},KD(!1));var t})).startWith(KD(!0)):Ai.Observable.empty()}))},uN=function(e,t){return e.ofType(DD,ND,RD,ZD).filter((function(){return(0,te.jl)(t.getState())})).do((function(){var e=t.getState(),r=tR(e),n=(0,te.np)(e).id,o=JSON.stringify({results:r});document.cookie="exportDataResults_".concat(n,"=").concat(encodeURIComponent(o))})).flatMap((function(){return Ai.Observable.empty()}))},pN=function(e){return e.ofType(Vw.ok).switchMap((function(){return e.ofType(RR.Nv).switchMap((function(){return Ai.Observable.of(HD([]))})).takeUntil(e.ofType(Lm.nk))}))},fN=function(e,t){return e.ofType(Vw.ok).switchMap((function(){return rN(t.getState()).concat(e.ofType(RR.XP).switchMap((function(){return rN(t.getState())})).takeUntil(e.ofType(Lm.nk)))}))};function dN(e){return function(e){if(Array.isArray(e))return mN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mN(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yN(Object(r),!0).forEach((function(t){gN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const vN=(0,O.rx)("LayerDownload",{component:(0,p.connect)((0,D.zB)({url:Zm.Bu,filterObj:eR,enabled:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled},downloadOptions:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.downloadOptions},loading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.loading},wfsFormats:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wfsFormats},formatsLoading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.formatsLoading},layer:H.Iz,service:JD,checkingWPSAvailability:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingWPSAvailability},virtualScroll:function(e){return e&&e.featuregrid&&e.featuregrid.virtualScroll}}),{onExport:function(e,t,r){return{type:jD,url:e,filterObj:t,downloadOptions:r}},onDownloadOptionChange:WD,onClearDownloadOptions:function(){return{type:TD}},onFormatOptionsFetch:function(e){return{type:kD,layer:e}},onCheckWPSAvailability:function(e){return{type:SD,url:e}},onMount:function(){return(0,v.Xg)("layerdownload","available",!0)},onUnmount:function(){return(0,v.Xg)("layerdownload","available",!1)},onClose:function(){return(0,v.Xi)("layerdownload")}})(PR),containers:{TOC:{doNotHide:!0,name:"LayerDownload"},MapFooter:{name:"LayerDownload",position:1,tool:(0,p.connect)((0,D.zB)({active:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.exportDataResults)||void 0===r?void 0:r.enabled},showInfoBubble:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.showInfoBubble},infoBubbleMessage:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.infoBubbleMessage},checkingExportDataEntries:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingExportDataEntries},results:tR,currentLocale:Q.Pz}),{onToggle:v.Xi.bind(null,"exportDataResults","enabled"),onActive:function(){return{type:LD}},onRemoveResult:function(e){return{type:ND,id:e}}})((function(e){var t=e.active,r=void 0!==t&&t,n=e.showInfoBubble,o=void 0!==n&&n,i=e.infoBubbleMessage,a=void 0===i?{}:i,l=e.checkingExportDataEntries,s=e.results,u=void 0===s?[]:s,p=e.currentLocale,f=e.onToggle,d=void 0===f?function(){}:f,m=e.onActive,y=void 0===m?function(){}:m,v=e.onRemoveResult;return c().useEffect((function(){r&&y()}),[r]),c().createElement(c().Fragment,null,u.length>0?c().createElement("div",{id:"mapstore-export-data-results-button-container"},c().createElement(We.Z,{placement:"left",overlay:c().createElement(g.Tooltip,{id:"mapstore-export-data-results-tooltip"},c().createElement(b.Z,{msgId:"exportDataResults.title"}))},c().createElement(g.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return d()}},c().createElement(g.Glyphicon,{glyph:"download"}))),c().createElement(TR,{show:o,className:"mapstore-export"},c().createElement(kR,a))):null,c().createElement(En.Z,{id:"mapstore-export-data-results",style:{display:r?"block":"none"},draggable:!1,modal:!0},c().createElement("span",{role:"header"},c().createElement("span",{className:"about-panel-title"},c().createElement(b.Z,{msgId:"exportDataResults.title"})),c().createElement("button",{onClick:function(){return d()},className:"settings-panel-close close"},c().createElement(g.Glyphicon,{glyph:"1-close"}))),c().createElement("div",{role:"body"},c().createElement(CR,{loading:l,results:u,currentLocale:p,onRemoveResult:v}))))}))}},epics:o,reducers:{layerdownload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{downloadOptions:{singlePage:!0}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jD:return bN(bN({},e),{},{loading:!0});case xD:return bN(bN({},e),{},{downloadOptions:bN(bN({},e.downloadOptions),{},gN({},t.key,t.value))});case TD:return bN(bN({},e),{},{downloadOptions:{singlePage:!0}});case kD:return bN(bN({},e),{},{layer:t.layer,wfsFormats:[],formatsLoading:!0});case CD:return bN(bN({},e),{},{loading:!1});case ID:return bN(bN({},e),{},{wfsFormats:t.wfsFormats,formatsLoading:!1});case AD:return bN(bN({},e),{},{service:t.service});case PD:return bN(bN({},e),{},{checkingWPSAvailability:t.checking});case FD:return bN(bN({},e),{},{results:t.results});case DD:return bN(bN({},e),{},{results:[].concat(dN(e.results||[]),[t.result])});case RD:var r=(0,ue.findIndex)(e.results||[],{id:t.id});return bN(bN({},e),{},{results:r>-1?[].concat(dN(e.results.slice(0,r)),[bN(bN({},e.results[r]),t.newProps||{})],dN(e.results.slice(r+1))):e.results});case ND:return bN(bN({},e),{},{results:(e.results||[]).filter((function(e){return e.id!==t.id}))});case MD:return bN(bN({},e),{},{results:(e.results||[]).filter((function(e){return-1===(0,ue.findIndex)(t.ids,(function(t){return t===e.id}))}))});case GD:return bN(bN({},e),{},{showInfoBubble:t.show});case zD:return bN(bN({},e),{},{infoBubbleMessage:{msgId:t.msgId,msgParams:t.msgParams,level:t.level}});case _D:return bN(bN({},e),{},{checkingExportDataEntries:t.checking});default:return e}}}});var hN="GEONODE:SAVING_RESOURCE",ON="GEONODE:SAVE_SUCCESS",wN="GEONODE:SAVE_ERROR",EN="GEONODE:CLEAR_SAVE",SN="GEONODE:SAVE_CONTENT",PN="GEONODE:UPDATE_RESOURCE_BEFORE_SAVE";function jN(){return{type:EN}}function CN(e,t,r){return{type:SN,id:e,metadata:t,reload:r}}function xN(e){return{type:PN,id:e}}var TN=r(25108),kN="GEONODE:RESOURCE_LOADING",IN="GEONODE:SET_RESOURCE",AN="GEONODE:RESOURCE_ERROR",FN="GEONODE:UPDATE_RESOURCE_PROPERTIES",DN="GEONODE:SET_RESOURCE_TYPE",RN="GEONODE:SET_NEW_RESOURCE",NN="GEONODE:SET_RESOURCE_ID",MN="GEONODE:SET_RESOURCE_PERMISSIONS";function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LN(Object(r),!0).forEach((function(t){ZN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ZN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const BN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kN:return _N(_N({},e),{},{loading:!0});case IN:return _N(_N({},e),{},{error:null,data:t.data,loading:!1});case AN:return _N(_N({},e),{},{data:null,error:t.error,loading:!1});case FN:return _N(_N({},e),{},{data:_N(_N({},e.data),t.properties)});case DN:return _N(_N({},e),{},{type:t.resourceType});case RN:return _N(_N({},e),{},{isNew:!0});case NN:return _N(_N({},e),{},{id:t.id});case MN:return _N(_N({},e),{},{permissions:t.permissions});default:return e}},GN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hN:return{saving:!0};case ON:return{success:t.success,saving:!1};case wN:return{error:t.error,saving:!1};case EN:return{};default:return e}};function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function UN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zN(Object(r),!0).forEach((function(t){WN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function WN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var VN={},qN=(0,D.zB)({catalogServices:(0,D.zB)({services:de.b6,selectedService:de.Cb}),widgetsConfig:(0,D.zB)({widgets:Yd.zm,layouts:Yd.p,collapsed:Yd.lF}),mapInfoConfiguration:ee.bI,dimensionData:(0,D.zB)({currentTime:$C.WT,offsetTime:$C.ns}),timelineData:(0,D.zB)({selectedLayer:qw.Li})}),HN=(r(30998),r(30084),r(52628)),$N=r.n(HN);r(63105),r(82492),r(47037),r(64721),r(13880);$N()({CASCADE:"cascade"}),$N()({TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner"}),$N()({IMAGE:"image",MAP:"map",VIDEO:"video"}),$N()({EDIT:"edit",VIEW:"view"}),r(24684);r(30236),r(84596),r(36808);var KN="/api/v2/resources",YN="/api/v2/geostories";function XN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function QN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XN(Object(r),!0).forEach((function(t){JN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tM={map:function(e,t,r,n){var o,i=(0,X.Od)(e)||{},a=(0,H.l2)(e),l=(0,H.Bt)(e),c=(0,uk.Mz)(e),s=function(e){return e.searchconfig&&e.searchconfig.textSearchConfig}(e),u=function(e){return e.searchbookmarkconfig&&e.searchbookmarkconfig.bookmarkSearchConfig}(e),p=function(e){var t=Object.keys(VN).reduce((function(t,r){return UN(UN({},t),{},WN({},r,VN[r](e)))}),{});return UN(UN({},qN(e)),t)}(e),f=(0,oe.saveMapConfiguration)(i,a,l,c,s,u,p),d=r.name,m=r.description,y=r.thumbnail,b={name:d,data:f,attributes:[{type:"string",name:"title",value:d,label:"Title"},{type:"string",name:"abstract",value:m,label:"Abstract"}].concat((o=y?[{type:"string",name:"thumbnail",value:y,label:"Thumbnail"}]:[],function(e){if(Array.isArray(e))return eM(e)}(o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return eM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eM(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))};return t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,Pr.u8)("genode_rest_api")||"/mapstore/rest/";return Qm().patch("".concat(r,"resources/").concat(e,"/"),t,{params:{full:!0}}).then((function(e){return e.data}))}(t,QN(QN({},b),{},{id:t})):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Pr.u8)("genode_rest_api")||"/mapstore/rest/";return Qm().post("".concat(t,"resources/"),e,{timeout:1e4,params:{full:!0}}).then((function(e){return e.data}))}(b).then((function(e){return n&&(window.location.href="".concat((0,Pr.u8)("geonode_url"),"maps/").concat(e.id,"/edit")),e.data}))},geostory:function(e,t,r,n){var o=function(e){return(0,ue.get)(e,"geostory.currentStory")}(e),i=(0,te.np)(e),a={title:r.name,abstract:r.description,data:JSON.stringify(o),thumbnail_url:r.thumbnail};return t?function(e,t){return Qm().patch("".concat(YN,"/").concat(e),t,{params:{include:["data"]}}).then((function(e){return e.data.geostory}))}(t,a):function(e){return Qm().post("".concat(YN),e,{params:{include:["data"]}}).then((function(e){return e.data.geostory}))}(QN({name:r.name+" "+BS()(),owner:i.name},a)).then((function(e){return n&&(window.location.href="".concat((0,Pr.u8)("geonode_url"),"apps/").concat(e.pk,"/edit")),e.data}))}};const rM={gnSaveContent:function(e,t){return e.ofType(SN).switchMap((function(e){var r,n=t.getState(),o=(null===(r=n.gnresource)||void 0===r?void 0:r.type)||"map";return Ai.Observable.defer((function(){return tM[o](n,e.id,e.metadata,e.reload)})).switchMap((function(t){return Ai.Observable.of({type:ON,success:t},(r={title:e.metadata.name,abstract:e.metadata.description,thumbnail_url:e.metadata.thumbnail},{type:FN,properties:r}));var r})).catch((function(e){return Ai.Observable.of(function(e){return{type:wN,error:e}}(e.data||e.message))})).startWith({type:hN})}))},gnUpdateResource:function(e,t){return e.ofType(PN).switchMap((function(e){var r,n=(null===(r=t.getState().gnresource)||void 0===r?void 0:r.data)||{};return!e.id||n.pk&&e.id&&n.pk+""==e.id+""?Ai.Observable.empty():Ai.Observable.defer((function(){return t=e.id,Qm().get("".concat(KN,"/").concat(t)).then((function(e){return e.data.resource}));var t})).switchMap((function(e){return Ai.Observable.of({type:IN,data:e})})).catch((function(e){return Ai.Observable.of(function(e){return{type:AN,error:e}}(e.data||e.message))})).startWith({type:kN})}))}};var nM=r(14068);function oM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iM(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var aM=(0,Ua.Z)("placeholder")(g.FormControl);function lM(e){var t=e.update,r=e.error,n=e.success,o=e.labelId,i=e.resource,a=e.contentId,s=e.saving,u=e.loading,p=e.enabled,f=e.onClose,d=e.onSave,m=e.onInit,v=e.onClear,h=e.thumbnailOptions,O=oM((0,l.useState)(),2),w=O[0],E=O[1],S=oM((0,l.useState)(),2),P=S[0],j=S[1],C=oM((0,l.useState)(""),2),x=C[0],T=C[1],k=oM((0,l.useState)(""),2),I=k[0],A=k[1],F=oM((0,l.useState)(!1),2),D=F[0],R=F[1],N=(0,l.useRef)();N.current={contentId:a,resource:i},(0,l.useEffect)((function(){p?m(N.current.contentId):v()}),[p]),(0,l.useEffect)((function(){if(!u){var e=N.current.resource||{};E(e.thumbnail_url),T(e.title),A(e.abstract),j(!1),R(e.title?void 0:"error")}}),[p,u]);var M=u||s;return c().createElement(y.Z,{title:c().createElement(b.Z,{msgId:o}),show:p,fitContent:!0,clickOutEnabled:!1,buttons:M?[]:[{text:c().createElement(b.Z,{msgId:"close"}),onClick:function(){return f()}},{text:c().createElement(b.Z,{msgId:o}),disabled:!!D,onClick:function(){return d(t?a:void 0,{thumbnail:w,name:x,description:I},!0)}}],onClose:M?null:function(){return f()}},r&&c().createElement(g.Alert,{bsStyle:"danger",style:{margin:0}},c().createElement("div",null,c().createElement(b.Z,{msgId:"map.mapError.errorDefault"}))),n&&c().createElement(g.Alert,{bsStyle:"success",style:{margin:0}},c().createElement("div",null,c().createElement(b.Z,{msgId:"saveDialog.saveSuccessMessage"}))),c().createElement(g.Form,null,c().createElement(g.FormGroup,{validationState:P?"error":void 0},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"map.thumbnail"})),c().createElement(nM.Z,{thumbnail:w,thumbnailOptions:h,message:c().createElement(b.Z,{msgId:"map.message"}),onUpdate:function(e){E(e),j(!1)},onError:function(e){j(e)}}),P&&c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"map.error"})),c().createElement("div",null,P.indexOf&&-1!==P.indexOf("FORMAT")&&c().createElement("small",null,c().createElement(b.Z,{msgId:"map.errorFormat"}))),c().createElement("div",null,P.indexOf&&-1!==P.indexOf("SIZE")&&c().createElement("small",null,c().createElement(b.Z,{msgId:"map.errorSize"}))))),c().createElement(g.FormGroup,{validationState:D},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"saveDialog.name"})),c().createElement(aM,{placeholder:"saveDialog.namePlaceholder",value:x,onChange:function(e){T(e.target.value),R(e.target.value?void 0:"error")},onBlur:function(e){R(e.target.value?void 0:"error")}})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"saveDialog.description"})),c().createElement(aM,{placeholder:"saveDialog.descriptionPlaceholder",value:I,onChange:function(e){return A(e.target.value)}}))),M&&c().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},c().createElement(Ga.Z,{size:70})))}lM.propTypes={update:u().bool,labelId:u().string,contentId:u().oneOfType([u().string,u().number]),resource:u().object,loading:u().bool,enabled:u().bool,onClose:u().func,onSave:u().func,onInit:u().func,onClear:u().func,error:u().oneOfType([u().string,u().object]),success:u().oneOfType([u().string,u().object]),thumbnailOptions:u().object},lM.defaultProps={update:!1,resource:{},loading:!1,enabled:!1,onClose:function(){},onSave:function(){},onInit:function(){},onClear:function(){},thumbnailOptions:{width:300,height:250,type:"image/jpeg",quality:.9,contain:!1}};const cM=lM;function sM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pM(){return(pM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var fM=(0,p.connect)((0,D.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.save)||void 0===r?void 0:r.enabled},X._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,r,n,o,i,a,l){return{enabled:e,contentId:l||(null==t?void 0:t.id),resource:r,loading:n,saving:o,error:i,success:a}})),{onClose:v.Xi.bind(null,"save",null),onInit:xN,onSave:CN,onClear:jN})((function(e){return c().createElement(cM,pM({},e,{update:!0,labelId:"save"}))}));const dM=(0,O.rx)("Save",{component:fM,containers:{BurgerMenu:{name:"save",position:30,text:c().createElement(b.Z,{msgId:"save"}),icon:c().createElement(g.Glyphicon,{glyph:"floppy-open"}),action:v.Xi.bind(null,"save",null),selector:(0,D.P1)(te.jl,(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.canEdit}),(function(e){var t,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.type}),(function(e,t,r,n){return{style:!e||t||!r&&n?{display:"none"}:{}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sM(Object(r),!0).forEach((function(t){uM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},rM),reducers:{gnresource:BN,gnsave:GN,controls:TN.Z}});function mM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bM(){return(bM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var gM=(0,p.connect)((0,D.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.saveAs)||void 0===r?void 0:r.enabled},X._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,r,n,o,i,a,l){return{enabled:e,contentId:l||(null==t?void 0:t.id),resource:r,loading:n,saving:o,error:i,success:a}})),{onClose:v.Xi.bind(null,"saveAs",null),onInit:xN,onSave:CN,onClear:jN})((function(e){return c().createElement(cM,bM({},e,{labelId:"saveAs"}))}));const vM=(0,O.rx)("SaveAs",{component:gM,containers:{BurgerMenu:{name:"saveAs",position:30,text:c().createElement(b.Z,{msgId:"saveAs"}),icon:c().createElement(g.Glyphicon,{glyph:"floppy-open"}),action:v.Xi.bind(null,"saveAs",null),selector:(0,D.P1)(te.jl,(function(e){return{style:e?{}:{display:"none"}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mM(Object(r),!0).forEach((function(t){yM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},rM),reducers:{gnresource:BN,gnsave:GN,controls:TN.Z}});var hM=(0,Ge.Z)(jx());const OM=function(e){var t=e.shareUrl,r=void 0===t?"":t,n=e.copied,o=void 0!==n&&n,i=e.onCopy,a=void 0===i?function(){}:i,l=e.onMouseLeave,s=void 0===l?function(){}:l;return c().createElement(hM,{text:r,tooltipId:o?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:o.toString(),onCopy:function(){return a(r)}},c().createElement(qe.Z,{bsStyle:"primary",onMouseLeave:function(){return s()}},c().createElement(g.Glyphicon,{glyph:"copy"})))};function wM(e){return(wM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PM(e,t){return(PM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jM(e,t){return!t||"object"!==wM(t)&&"function"!=typeof t?CM(e):t}function CM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xM(e){return(xM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PM(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xM(n);if(o){var r=xM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return jM(this,e)});function a(){var e;EM(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return TM(CM(e=i.call.apply(i,[this].concat(r))),"state",{copied:!1,forceDrawer:!1,connections:!1}),TM(CM(e),"renderTools",(function(){return c().createElement(c().Fragment,null,e.props.showTOCToggle&&c().createElement(g.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},c().createElement(b.Z,{msgId:"share.forceDrawer"})),e.props.showConnectionsParamToggle&&c().createElement(g.Checkbox,{checked:e.state.connections,onChange:function(){return e.setState({connections:!e.state.connections})}},c().createElement(b.Z,{msgId:"share.showConnections"})))})),TM(CM(e),"generateUrl",(function(){var t=HC.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),e.state.connections&&(t.query.connections=!0),HC.format(t)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return c().createElement("div",{className:"input-link"},c().createElement("div",{className:"input-link-head"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"share.embeddedLinkTitle"})),c().createElement(OM,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),c().createElement("div",{className:"input-link-tools"},this.renderTools()),c().createElement("pre",null,c().createElement("code",null,t)))}}])&&SM(t.prototype,r),a}(c().Component);TM(kM,"propTypes",{shareUrl:u().string,showTOCToggle:u().bool,showConnectionsParamToggle:u().bool}),TM(kM,"defaultProps",{showTOCToggle:!0,shareUrl:""});const IM=kM;function AM(e){return(AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RM(e,t){return(RM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NM(e,t){return!t||"object"!==AM(t)&&"function"!=typeof t?MM(e):t}function MM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LM(e){return(LM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ZM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RM(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=LM(n);if(o){var r=LM(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return NM(this,e)});function a(){var e;FM(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _M(MM(e=i.call.apply(i,[this].concat(r))),"state",{copied:!1}),e}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement("div",{className:"input-link"},c().createElement("div",{className:"input-link-head"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"share.directLinkTitle"})),c().createElement(OM,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),c().createElement("pre",{style:{padding:0}},c().createElement(g.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&DM(t.prototype,r),a}(c().Component);_M(ZM,"propTypes",{shareUrl:u().string});const BM=ZM;function GM(e){var t=e.resourceId,r=e.pathTemplate,n=e.enabled,o=e.onClose,i=function(e){var t=e.resourceId,r=e.pathTemplate,n=HC.parse(location.href),o=n.host,i=n.protocol,a=r.replace(/\{id\}/g,t);return HC.format({host:o,protocol:i,pathname:a})}({resourceId:t,pathTemplate:r});return c().createElement(y.Z,{modalClassName:"gn-share-modal",title:c().createElement(b.Z,{msgId:"share.title"}),show:n,fitContent:!0,clickOutEnabled:!1,onClose:function(){return o()}},c().createElement(BM,{shareUrl:i}),c().createElement(IM,{showTOCToggle:!1,shareUrl:i}))}GM.propTypes={resourceId:u().oneOfType([u().number,u().string]),pathTemplate:u().string,enabled:u().bool,onClose:u().func},GM.defaultProps={resourceId:null,pathTemplate:"/apps/{id}/embed",enabled:!1,onClose:function(){}};var zM=(0,p.connect)((0,D.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.share)||void 0===r?void 0:r.enabled},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id},X._H],(function(e,t,r){return{enabled:e,resourceId:t||(null==r?void 0:r.id)}})),{onClose:v.Xi.bind(null,"share",null)})(GM);const UM=(0,O.rx)("Share",{component:zM,containers:{BurgerMenu:{name:"share",position:1e3,text:c().createElement(b.Z,{msgId:"share.title"}),icon:c().createElement(g.Glyphicon,{glyph:"share-alt"}),action:v.Xi.bind(null,"share",null),selector:(0,D.P1)((function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}),X._H,(function(e,t,r){return{style:!e&&(t||null!=r&&r.id)?{}:{display:"none"}}}))}},epics:{},reducers:{controls:TN.Z}});var WM=r(65986),VM=r(75751),qM=r(46618),HM=r(77314),$M=r(79870),KM={plugins:{AddGroupPlugin:A,IdentifyPlugin:F.default,TOCPlugin:_e,MapPlugin:Ze.default,ToolbarPlugin:Be.default,DrawerMenuPlugin:Rt,ZoomAllPlugin:Nt.default,MapLoadingPlugin:Mt.default,OmniBarPlugin:Lt.default,BackgroundSelectorPlugin:_t.default,FullScreenPlugin:Zt.Z,ZoomInPlugin:Bt.default,ZoomOutPlugin:Gt.default,ExpanderPlugin:zt.default,BurgerMenuPlugin:Ut.default,UndoPlugin:gr,RedoPlugin:gr,ScaleBoxPlugin:vr.default,MapFooterPlugin:hr.default,PrintPlugin:Or.default,MeasurePlugin:Bn,FilterLayerPlugin:Gn,TOCItemsSettingsPlugin:Kd,WidgetsPlugin:Dm,WidgetsBuilderPlugin:yw,WidgetsTrayPlugin:Jw,NotificationsPlugin:bE,FeatureEditorPlugin:QP,QueryPanelPlugin:Ex,SavePlugin:dM,SaveAsPlugin:vM,MetadataExplorerPlugin:jk,GridContainerPlugin:Mk,StyleEditorPlugin:$k,TimelinePlugin:Kk.default,PlaybackPlugin:Yk.default,MousePositionPlugin:vI,SearchPlugin:$I,SearchServicesConfigPlugin:gF,SwipePlugin:XF,LocatePlugin:ED,SharePlugin:UM,LayerDownloadPlugin:vN,AddReducersAndEpics:{reducers:{security:WM.Z,maps:VM.Z,maplayout:qM.Z},epics:i.ZP}},requires:{ReactSwipe:HM.Z,SwipeHeader:$M.Z}};const YM=a.A?(0,a.A)(KM):KM},83775:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi #mapstore-elevation {\r\n    width: 100%;\r\n    /*margin-top: -46px;*/\r\n    height: 80px;\r\n    padding: 0 5px;\r\n}\r\n\r\n.msgapi label#mapstore-elevation-label {\r\n    margin-top: 10px;\r\n}\r\n\r\n.msgapi .custom-tooltip {\r\n    width: auto;\r\n    margin: 0;\r\n    line-height: 24px;\r\n    border: 1px solid #C1C1C1;\r\n    background-color: rgba(255, 255, 255, 0.8);\r\n    padding: 5px;\r\n}\r\n.msgapi .custom-tooltip  .label {\r\n  margin: 0;\r\n  color: #82CA9D;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n",""])},59297:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"\r\n.msgapi .featuregrid-toolbar {\r\n    margin-top: 5px;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.msgapi #featuregrid-toolbar .btn {\r\n    overflow: hidden;\r\n}\r\n",""])},28492:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"",""])},74704:(e,t,r)=>{(e.exports=r(9252)()).push([e.id," .msgapi #mapstore-mouseposition {\r\n    z-index: 10;\r\n    top: -10px;\r\n    right: 45%;\r\n    position: absolute;\r\n    margin: 8px;\r\n    text-shadow: -1px -1px 1px #000,\r\n                  1px -1px 1px #000,\r\n                 -1px  1px 1px #000,\r\n                  1px  1px 1px #000;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .label {\r\n    max-width: 350px;\r\n    min-width: 200px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    vertical-align: middle;\r\n\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .label-info {\r\n    background-color:rgba(91,192,222,0);\r\n    color: white;\r\n    font-size: 110%;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition h5 {\r\n    display: inline-block;\r\n}\r\n\r\n\r\n.msgapi #mapstore-mousepositionsettings .form-group {\r\n    margin-bottom: 0 !important;\r\n}\r\n\r\n.msgapi #mapstore-mousepositionsettings select, .msgapi #mapstore-mousepositionsettings button {\r\n    width: 60% !important;\r\n    float: right;\r\n    height: 35px;\r\n}\r\n\r\n.msgapi #mapstore-mousepositionsettings label {\r\n    width: 100% !important;\r\n}\r\n\r\n\r\n.msgapi #mapstore-mouseposition .label-info {\r\n    white-space: normal;\r\n    color: black;\r\n    font-size: 110%;\r\n    padding: 0;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition {\r\n    bottom: 5px;\r\n    right: 264px;\r\n    top: auto;\r\n    margin: 0;\r\n    text-shadow: none;\r\n    background-color: white;\r\n    width: 160px;\r\n    height: 46px;\r\n    padding-left: 5px;\r\n    padding-top: 2px;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition h5 {\r\n    margin-top: 5px;\r\n}\r\n\r\n.msgapi .mouseposition-separator {\r\n    display: block;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition-mobile {\r\n        bottom: 25px;\r\n        right: 30px;\r\n        z-index: 10;\r\n        position: absolute;\r\n        text-shadow: -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000, 1px 1px 1px #000;\r\n    }\r\n\r\n.msgapi #mapstore-mouseposition-mobile .label {\r\n        display: inline-block;\r\n        max-width: 280px;\r\n        min-width: 200px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        vertical-align: middle;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition-mobile .label-info {\r\n        background-color:rgba(91,192,222,0);\r\n        color: white;\r\n        font-size: 90%;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .form-group {\r\n    float: right;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .form-group .control-label {\r\n    display: none;\r\n}\r\n\r\n.msgapi #mapstore-mouseposition .form-group select {\r\n    width: 90px;\r\n    font-size: 11px;\r\n    padding: 2px;\r\n}\r\n",""])},85323:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,'\r\n\r\n.msgapi .ql-snow .ms-ql-iframe-tooltip[data-mode=video]::before {\r\n    content: "Enter iframe url:";\r\n}\r\n\r\n\r\n',""])},15198:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"/* Menu Button */\r\n.msgapi .drawer-menu-button {\r\n    position: absolute;\r\n    z-index:1000;\r\n    left: 30px;\r\n    top: 8px;\r\n    width:30px;\r\n    background: transparent;\r\n    outline: none;\r\n    border: transparent;\r\n    font-size: 14px;\r\n}\r\n\r\n.msgapi .drawer-menu-button:hover {\r\n    background: transparent;\r\n}\r\n\r\n.msgapi #drawer-menu-button:active{\r\n    box-shadow: none;\r\n}\r\n\r\n.msgapi #mapstore-drawermenu > div > div:nth-child(2) {\r\n    display: none;\r\n}\r\n\r\n.msgapi .nav-content #background-switcher .thumbnail {\r\n    border-radius: 0 !important;\r\n    margin-bottom: 40px;\r\n    width: 220px !important;\r\n}\r\n.msgapi .nav-content #background-switcher .thumbnail img {\r\n    border-radius: 0 !important;\r\n    height: 90px;\r\n    width: 220px !important;\r\n}\r\n\r\n.msgapi .nav-content #background-switcher .thumbnail .caption {\r\n    font-size: 14px !important;\r\n    text-align: left !important;\r\n    top: -20px !important;\r\n    position: absolute !important;\r\n}\r\n\r\n.msgapi .nav-content #background-switcher {\r\n    margin-top: 10px;\r\n}\r\n\r\n.msgapi #mapstore-drawermenu .panel {\r\n    border: none;\r\n    box-shadow: none;\r\n}\r\n\r\n.msgapi div.nav-menu {\r\n    -webkit-transform:   translate3d(300px, 0, 0);\r\n    -moz-transform: \t translate3d(300px, 0, 0);\r\n    -ms-transform: \t\t translate3d(300px, 0, 0);\r\n    -o-transform: \t\t translate3d(300px, 0, 0);\r\n    box-shadow: 2px 0px 15px #A7A7A7;\r\n}\r\n\r\n.msgapi .nav-menu  .navHeader {\r\n    height: 50px;\r\n}\r\n.msgapi .nav-menu > .nav-content .navHeader .title{\r\n    font-size: 16px;\r\n    position: absolute;\r\n    margin: 13px;\r\n    font-weight: bold;\r\n}\r\n.msgapi .nav-content  .section {\r\n    margin-bottom: 2px;\r\n}\r\n.msgapi .nav-content  .section .sectionHeader{\r\n    padding: 5px;\r\n    cursor: pointer;\r\n}\r\n.msgapi .nav-content .section .sectionHeader>.glyphicon{\r\n    /* Firefox */\r\n    -moz-transition: all .3s ease;\r\n    /* WebKit */\r\n    -webkit-transition: all .3s ease;\r\n    /* Opera */\r\n    -o-transition: all .3s ease;\r\n    /* Standard */\r\n    transition: all .3s ease;\r\n}\r\n.msgapi .nav-content  .section .sectionTitle{\r\n    padding-left: 10px;\r\n\r\n}\r\n.msgapi .nav-content  .section .sectionContent{\r\n    -moz-transition: max-height .3s ease;\r\n    -webkit-transition: max-height .3s ease;\r\n    -o-transition: max-height .3s ease;\r\n    transition: max-height .3s ease;\r\n\r\n    box-shadow: inset 0px 0px 10px rgba(0,0,0,.5);\r\n    padding: 5px;\r\n}\r\n\r\n.msgapi .navButtons {\r\n    float: right;\r\n}\r\n\r\n.msgapi #drawer-menu-button {\r\n     position: absolute;\r\n}\r\n",""])},98065:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi #locate-btn {\r\n    position: absolute;\r\n    z-index: 1000;\r\n    right: 10px;\r\n    bottom: 150px;\r\n}\r\n\r\n.msgapi #mapstore-toolbar #locate-btn {\r\n    position: static;\r\n}\r\n",""])},85985:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi div.record-grid {\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n}\r\n\r\n.msgapi div.record-grid .record-item{\r\n    height: auto;\r\n}\r\n.msgapi div.record-grid .record-item .panel-body{\r\n    padding: 0;\r\n}\r\n\r\n.msgapi #mapstore-catalog-panel button.search-button {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.msgapi #mapstore-catalog-panel .record-item {\r\n    min-height: 150px;\r\n}\r\n.msgapi #catalog-root {\r\n    position: static!important;\r\n}\r\n\r\n/*\r\n!important is needed because the library we used\r\nuse inline style which cannot be overridden unless\r\nwe use !important*/\r\n@media (max-width: 500px) {\r\n    .msgapi div .catalog-sidebar.nav-menu {\r\n        width: 100% !important\r\n    }\r\n}\r\n\r\n.msgapi #mapstore-metadata-explorer{\r\n    margin-bottom: 0\r\n}\r\n",""])},12485:e=>{e.exports='<html>\r\n  <head>\r\n    <title>Geoserver GetFeatureInfo output</title>\r\n  </head>\r\n    <style type="text/css">\r\n    \ttable.featureInfo, table.featureInfo td, table.featureInfo th {\r\n    \t\tborder:1px solid #ddd;\r\n    \t\tborder-collapse:collapse;\r\n    \t\tmargin:0;\r\n    \t\tpadding:0;\r\n    \t\tfont-size: 90%;\r\n    \t\tpadding:.2em .1em;\r\n    \t}\r\n    \ttable.featureInfo th {\r\n    \t    padding:.2em .2em;\r\n    \t\tfont-weight:bold;\r\n    \t\tbackground:#eee;\r\n    \t}\r\n    \ttable.featureInfo td{\r\n    \t\tbackground:#fff;\r\n    \t}\r\n    \ttable.featureInfo tr.odd td{\r\n    \t\tbackground:#eee;\r\n    \t}\r\n    \ttable.featureInfo caption{\r\n    \t\ttext-align:left;\r\n    \t\tfont-size:100%;\r\n    \t\tfont-weight:bold;\r\n    \t\tpadding:.2em .2em;\r\n    \t}\r\n    </style>\r\n  <body>\r\n    <table class="featureInfo">\r\n      <caption class="featureInfo">states</caption>\r\n      <tr>\r\n        <th>fid</th>\r\n          <th >STATE_NAME</th>\r\n          <th >STATE_FIPS</th>\r\n          <th >SUB_REGION</th>\r\n          <th >STATE_ABBR</th>\r\n          <th >LAND_KM</th>\r\n      </tr>\r\n      <tr>\r\n        <td>states.29</td>\r\n        <td>Wyoming</td>\r\n        <td>56</td>\r\n        <td>Mtn</td>\r\n        <td>WY</td>\r\n        <td>251500.801</td>\r\n      </tr>\r\n    </table>\r\n    <br/>\r\n  </body>\r\n</html>'},20135:e=>{e.exports='{\r\n  "type": "FeatureCollection",\r\n  "totalFeatures": "unknown",\r\n  "features": [\r\n      {\r\n    "type": "Feature",\r\n    "id": "states.29",\r\n    "geometry": {\r\n      "type": "MultiPolygon",\r\n      "coordinates": [\r\n        [\r\n          [\r\n            [-1.15831389980175E7, 5115884.78673627],\r\n            [-1.158334883525764E7, 5095927.61163692],\r\n            [-1.158318319185534E7, 5069757.00399456],\r\n            [-1.158292671174856E7, 5012817.65726345],\r\n            [-1.168119588467766E7, 5011501.68893432],\r\n            [-1.171952218348237E7, 5011805.51696107],\r\n            [-1.182245230349099E7, 5012358.03633596],\r\n            [-1.183643948618967E7, 5012535.77548496],\r\n            [-1.189613934986567E7, 5012118.79424704],\r\n            [-1.194496385588862E7, 5012366.44384074],\r\n            [-1.201338092624966E7, 5012844.6510808],\r\n            [-1.213912753436923E7, 5012116.58180143],\r\n            [-1.224530617975818E7, 5011994.45558498],\r\n            [-1.225209889508638E7, 5012037.8190659],\r\n            [-1.23620611786479E7, 5011845.33978484],\r\n            [-1.236213086464914E7, 5050542.48847943],\r\n            [-1.236206540878855E7, 5098070.44035716],\r\n            [-1.236180135895639E7, 5160419.97558219],\r\n            [-1.23615872915756E7, 5236675.5279452],\r\n            [-1.236185657342383E7, 5315010.76063796],\r\n            [-1.236166543785814E7, 5355424.25785557],\r\n            [-1.236158395199088E7, 5390784.55533999],\r\n            [-1.236198815306194E7, 5462754.83859328],\r\n            [-1.236211728367126E7, 5538995.97145504],\r\n            [-1.236212318360428E7, 5568867.31982516],\r\n            [-1.236232444924363E7, 5620854.95417318],\r\n            [-1.229288824894438E7, 5620316.91583206],\r\n            [-1.2288781895568E7, 5621314.94100872],\r\n            [-1.224456390139357E7, 5621970.64383454],\r\n            [-1.222273014174734E7, 5621455.36603028],\r\n            [-1.209203215399677E7, 5621150.43241323],\r\n            [-1.205128866376898E7, 5621546.67495262],\r\n            [-1.201067341359458E7, 5621492.04691732],\r\n            [-1.182865814246373E7, 5620919.18090556],\r\n            [-1.180215653392956E7, 5621084.9446589],\r\n            [-1.169794913408358E7, 5621495.03806919],\r\n            [-1.169313957548385E7, 5621693.24344854],\r\n            [-1.158383374295954E7, 5621104.15015297],\r\n            [-1.158379210946998E7, 5554761.48947335],\r\n            [-1.158396710370951E7, 5493626.06569343],\r\n            [-1.158382183177402E7, 5488039.68771347],\r\n            [-1.158379377926234E7, 5442710.58976854],\r\n            [-1.158361967557875E7, 5388962.94229949],\r\n            [-1.158375815702529E7, 5385191.61647555],\r\n            [-1.158342865133254E7, 5312442.79715209],\r\n            [-1.15834303211249E7, 5253508.54391938],\r\n            [-1.158312797738791E7, 5160957.12459852],\r\n            [-1.15831389980175E7, 5115884.78673627]\r\n          ]\r\n        ]\r\n      ]\r\n    },\r\n    "geometry_name": "the_geom",\r\n    "properties": {\r\n      "STATE_NAME": "Wyoming",\r\n      "STATE_FIPS": "56",\r\n      "SUB_REGION": "Mtn",\r\n      "STATE_ABBR": "WY",\r\n      "LAND_KM": 251500.801,\r\n      "WATER_KM": 1848.149,\r\n      "PERSONS": 453588,\r\n      "FAMILIES": 119825,\r\n      "HOUSHOLD": 168839,\r\n      "MALE": 227007,\r\n      "FEMALE": 226581,\r\n      "WORKERS": 164561,\r\n      "DRVALONE": 153679,\r\n      "CARPOOL": 28109,\r\n      "PUBTRANS": 2963,\r\n      "EMPLOYED": 207868,\r\n      "UNEMPLOY": 13112,\r\n      "SERVICE": 71419,\r\n      "MANUAL": 29157,\r\n      "P_MALE": 0.5,\r\n      "P_FEMALE": 0.5,\r\n      "SAMP_POP": 83202,\r\n      "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\r\n    }\r\n  }],\r\n  "crs": {\r\n    "type": "name",\r\n    "properties": {\r\n      "name": "urn:ogc:def:crs:EPSG::3857"\r\n    }\r\n  },\r\n  "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\r\n}'},71062:e=>{e.exports="Results for FeatureType 'http://www.openplans.org/topp:states':\r\n--------------------------------------------\r\nthe_geom = [GEOMETRY (Polygon) with 48 points]\r\nSTATE_NAME = Wyoming\r\nSTATE_FIPS = 56\r\nSUB_REGION = Mtn\r\nSTATE_ABBR = WY\r\nLAND_KM = 251500.801\r\nWATER_KM = 1848.149\r\nPERSONS = 453588.0\r\nFAMILIES = 119825.0\r\nHOUSHOLD = 168839.0\r\nMALE = 227007.0\r\nFEMALE = 226581.0\r\nWORKERS = 164561.0\r\nDRVALONE = 153679.0\r\nCARPOOL = 28109.0\r\nPUBTRANS = 2963.0\r\nEMPLOYED = 207868.0\r\nUNEMPLOY = 13112.0\r\nSERVICE = 71419.0\r\nMANUAL = 29157.0\r\nP_MALE = 0.5\r\nP_FEMALE = 0.5\r\nSAMP_POP = 83202.0\r\n--------------------------------------------"},57845:(e,t,r)=>{var n=r(83775);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},49548:(e,t,r)=>{var n=r(59297);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},65207:(e,t,r)=>{var n=r(28492);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},94889:(e,t,r)=>{var n=r(74704);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},89531:(e,t,r)=>{var n=r(85323);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},16385:(e,t,r)=>{var n=r(15198);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},52780:(e,t,r)=>{var n=r(98065);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},65288:(e,t,r)=>{var n=r(85985);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},3932:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"},97671:e=>{e.exports="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Hh4dnZ2e7u7jc3NzMzM1dXV5qamn9/f8fHx05OTm5ubqGhoYKCgsrKylFRUTY2NnFxcerq6t/f3/b29l9fX+Li4vT09MTExLKystTU1PHx8QAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA"},18845:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"},72810:()=>{},36631:()=>{},86799:()=>{}}]);