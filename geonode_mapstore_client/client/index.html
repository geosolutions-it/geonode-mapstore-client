<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Page with MapStore API</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato" type='text/css'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css" />
        <link rel="shortcut icon" type="image/png" href="https://cdn.jslibs.mapstore2.geo-solutions.it/leaflet/favicon.ico" />
        <script src="https://maps.google.com/maps/api/js?v=3"></script>
        <!--script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.10/proj4.js"></script-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
        <style>
        #container {
            position: absolute;
            top: 100px;
            left: 10px;
            right: 10px;
            bottom: 100px;
        }
        #mapstore2-embedded, #map, .fill {
            width: 100%;
            height: 100%;
        }
        </style>
    </head>
    <body onload="init()">
        <div id="container" class="ms2"></div>
        <script id="ms2-api" src="dist/ms2-geonode-api.js"></script>
        <script type="text/javascript">
        function init() {
            MapStore2.create('container',{
            config: {
    "catalogServices": {
        "selectedService": "GeoNode Catalogue",
        "services": {
            "Demo WMS Service": {
                "autoload": false,
                "title": "Demo WMS Service",
                "type": "wms",
                "url": "https://demo.geo-solutions.it/geoserver/wms"
            },
            "Demo WMTS Service": {
                "autoload": false,
                "title": "Demo WMTS Service",
                "type": "wmts",
                "url": "https://demo.geo-solutions.it/geoserver/gwc/service/wmts"
            },
            "GeoNode Catalogue": {
                "GeoNode Catalogue": {
                    "autoload": true,
                    "title": "GeoNode Catalogue",
                    "type": "csw",
                    "url": "http://localhost:8000/catalogue/csw"
                }
            }
        }
    },
    "map": {
        "center": {
            "crs": "EPSG:3857",
            "x": -8233981.29895,
            "y": 4980132.418785
        },
        "layers": [
            {
                "group": "background",
                "name": "mapnik",
                "source": "osm",
                "title": "Open Street Map",
                "type": "osm",
                "visibility": true
            },
            {
                "group": "background",
                "name": "HYBRID",
                "source": "google",
                "title": "Google HYBRID",
                "type": "google",
                "visibility": false
            },
            {
                "group": "background",
                "name": "osm",
                "source": "mapquest",
                "title": "MapQuest OSM",
                "type": "mapquest",
                "visibility": false
            },
            {
                "apiKey": "AqTGBsziZHIJYYxgivLBf0hVdrAk9mWO5cQcb8Yux8sW5M8c8opEC2lZqKR1ZZXf",
                "group": "background",
                "name": "Aerial",
                "source": "bing",
                "title": "Bing Aerial",
                "type": "bing",
                "visibility": false
            },
            {
                "group": "background",
                "name": "Night2012",
                "provider": "NASAGIBS.ViirsEarthAtNight2012",
                "source": "nasagibs",
                "title": "NASAGIBS Night 2012",
                "type": "tileprovider",
                "visibility": false
            },
            {
                "format": "image/jpeg",
                "group": "background",
                "name": "rv1",
                "title": "e-Geos Ortofoto RealVista 1.0",
                "type": "wms",
                "url": "http://www.realvista.it/reflector/open/service",
                "visibility": false
            },
            {
                "format": "image/png",
                "group": "background",
                "name": "sde:NE2_HR_LC_SR_W_DR",
                "title": "Natural Earth",
                "type": "wms",
                "url": "https://demo.geo-solutions.it/geoserver/wms",
                "visibility": false
            },
            {
                "format": "image/png",
                "group": "background",
                "name": "sde:HYP_HR_SR_OB_DR",
                "title": "Hypsometric",
                "type": "wms",
                "url": "https://demo.geo-solutions.it/geoserver/wms",
                "visibility": false
            },
            {
                "format": "image/png",
                "group": "background",
                "name": "sde:GRAY_HR_SR_OB_DR",
                "title": "Gray Earth",
                "type": "wms",
                "url": "https://demo.geo-solutions.it/geoserver/wms",
                "visibility": false
            },
            {
                "group": "background",
                "name": "OpenTopoMap",
                "provider": "OpenTopoMap",
                "source": "OpenTopoMap",
                "title": "OpenTopoMap",
                "type": "tileprovider",
                "visibility": false
            },
            {
                "abstract": "No abstract provided.",
                "attribution":"admin",
                "bbox": {
                    "bounds": {
                        "maxx": -8227290.16266,
                        "maxy": 4994389.51827,
                        "minx": -8240672.43524,
                        "miny": 4965875.3193
                    },
                    "crs": "EPSG:3857"
                },
                "format": "image/png",
                "group": "",
                "keywords": [
                    "features",
                    "roads"
                ],
                "llbbox": [
                    -74.02722,
                    40.684221,
                    -73.907005,
                    40.878178
                ],
                "name": "geonode:roads",
                "opacity": 1,
                "styles": [
                    {
                        "legend": {
                            "format": "image/png",
                            "height": "40",
                            "href": "http://localhost:8080/geoserver/ows?service=wms&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=geonode%3Aroads",
                            "width": "22"
                        },
                        "name": "roads",
                        "title": "roads"
                    }
                ],
                "title": "roads",
                "type": "wms",
                "url": "http://localhost:8080/geoserver/ows",
                "visibility": true,
                "featureInfo": {
                    "format": 'TEMPLATE',
                    "template": '<div class="row"><div class="col-xs-4">Nome</div><div class="col-xs-8">${properties.NAME}</div></div><div class="row"><div class="col-xs-4">Test</div><div class="col-xs-8">${properties.CFCC}</div></div>'
                }
            }
        ],
        "maxExtent": [
            -20037508.34,
            -20037508.34,
            20037508.34,
            20037508.34
        ],
        "maxResolution": 156543.03390625,
        "projection": "EPSG:3857",
        "units": "m",
        "zoom": 11
    },
    "version": 2,
    "widgetsConfig": {}
}
,
        proxy: "http://localhost:8081/proxy/?url=",
        printingEnabled: true,
        localConfig: {
            translations: '',
            loadAfterTheme: true,
            printUrl: "http://localhost:8000/gs/pdf/info.json",
            useAuthenticationRules: true,
            authenticationRules: [{
                "urlPattern": ".*geostore.*",
                "method": "bearer"
            }, {
                "urlPattern": ".*geoserver.*",
                "authkeyParamName": "access_token",
                "method": "authkey"
            }],
            initialState: {
                defaultState: {
                mode: "embedded",
                mousePosition: {enabled: false},
                controls: {
                    print: {
                        enabled: false
                    },
                    toolbar: {
                        active: null,
                        expanded: false
                    },
                    drawer: {
                        enabled: false,
                        menu: "1"
                    }
                },
                mapInfo: {enabled: true, infoFormat: "text/html" },
                security: {
                        token: "z8OGZsBN1m8hRvkEYV0FMsQJwHF6zQ"
                    }
            }
            }
          },
          plugins: {
        "desktop": [{
            "name": "Map",
            "cfg": {
                "tools": ["locate", "measurement"],
                "mapOptions": {
                "openlayers": {
                  "interactions": {
                    "pinchRotate": false,
                    "altShiftDragRotate": false
                  }
                },
                "leaflet": {
                    "attribution": {
                      "container": "#mapstore-map-footer-container"
                    }
                  }
              }
            }
        }, {
          "name": "DrawerMenu"
          }, {
              "name": "BackgroundSelector",
              "cfg": {
                  "style": {"bottom": 0, "marginBottom": 30},
                  "dimensions": {
                  "side": 65,
                  "sidePreview": 65,
                  "frame": 3,
                  "margin": 5,
                  "label": false,
                  "vertical": false
                 }
              }
          },
          {
            "name": "Identify",
            "cfg": {
                "showFullscreen": false,
                "dock": false,
                "position": "bottom",
                "size": 0.5,
                "fluid": true,
                "viewerOptions": {
                    "container": "{context.ReactSwipe}"
                }
            },
            "override": {
                "Toolbar": {
                  "position": 11,
                  "alwaysVisible": false
                }
              }
        }, {
            "name": "ZoomAll",
            "override": {
                "Toolbar": {
                    "alwaysVisible": false
                }
            }
        }, {
            "name": "TOC",
            "cfg": {
                "activateMapTitle": false,
                "activateSettingsTool": false,
                "activateMetedataTool": false,
                "activateRemoveLayer": false
            }

        }, {
            "name": "Settings",
            "cfg": {
                "wrap": true
            }
        }, {
            "name": "Toolbar",
            "id": "NavigationBar",
            "cfg": {
                "id": "navigationBar",
                "layout": "horizontal"
            }
        }, {
            "name": "MapLoading",
            "override": {
                "Toolbar": {
                    "alwaysVisible": true
                }
            }
        }, "Cookie",
        "OmniBar", {
            "name": "GoFull",
            "override": {
                "Toolbar": {
                    "alwaysVisible": false
                }
            }
        },
        "Expander", "ScaleBox", "Undo", "Redo",
       {name: "FullScreen",
       "override": {
        "Toolbar": {
            "alwaysVisible": false
        }
    }
    }, "BurgerMenu", "MapFooter", "Print",
        {
            "name": "ZoomIn",
            "override": {
                "Toolbar": {
                    "alwaysVisible": true
                }
            }
        }, {
            "name": "Measure"
        }, {
            "name": "ZoomOut",
            "override": {
                "Toolbar": {
                    "alwaysVisible": true
                }
            }
        }
    ]
    }
      });
}
        </script>
    </body>
</html>
